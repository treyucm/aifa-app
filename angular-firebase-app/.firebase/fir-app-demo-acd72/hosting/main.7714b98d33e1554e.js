"use strict";(self.webpackChunkangular_firebase_app=self.webpackChunkangular_firebase_app||[]).push([[179],{6304:(gt,Se,U)=>{U.d(Se,{Dh:()=>Ae,GT:()=>ce,cc:()=>Oe,hO:()=>Be,on:()=>G,pX:()=>ue,xv:()=>ye});var u=U(5879),$=U(120),N=U(2793);gt=U.hmd(gt);const te=["ngOnDestroy"],ue=(Pe,vt,ft,le={})=>new Proxy(Pe,{get:(xe,pe)=>ft.runOutsideAngular(()=>{var Ce;if(Pe[pe])return!(null===(Ce=le?.spy)||void 0===Ce)&&Ce.get&&le.spy.get(pe,Pe[pe]),Pe[pe];if(te.indexOf(pe)>-1)return()=>{};const Ve=vt.toPromise().then(Y=>{const ke=Y&&Y[pe];return"function"==typeof ke?ke.bind(Y):ke&&ke.then?ke.then(qe=>ft.run(()=>qe)):ft.run(()=>ke)});return new Proxy(()=>{},{get:(Y,ke)=>Ve[ke],apply:(Y,ke,qe)=>Ve.then(wt=>{var hn;const Un=wt&&wt(...qe);return!(null===(hn=le?.spy)||void 0===hn)&&hn.apply&&le.spy.apply(pe,qe,Un),Un})})})}),ce=(Pe,vt)=>{vt.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(le=>{Object.defineProperty(Pe.prototype,le,Object.getOwnPropertyDescriptor(ft.prototype||ft,le))})})};class Ie{constructor(vt){return vt}}const Ae=new u.OlP("angularfire2.app.options"),ye=new u.OlP("angularfire2.app.name");function G(Pe,vt,ft){const xe="object"==typeof ft&&ft||{};xe.name=xe.name||"string"==typeof ft&&ft||"[DEFAULT]";const Ce=$.Z.apps.filter(Ve=>Ve&&Ve.name===xe.name)[0]||vt.runOutsideAngular(()=>$.Z.initializeApp(Pe,xe));try{JSON.stringify(Pe)!==JSON.stringify(Ce.options)&&Z("error",`${Ce.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(Ce)}const Z=(Pe,...vt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Pe](...vt)},ae={provide:Ie,useFactory:G,deps:[Ae,u.R0b,[new u.FiY,ye]]};let Be=(()=>{class Pe{constructor(ft){$.Z.registerVersion("angularfire",N.q4.full,"core"),$.Z.registerVersion("angularfire",N.q4.full,"app-compat"),$.Z.registerVersion("angular",u.q4F.full,ft.toString())}static initializeApp(ft,le){return{ngModule:Pe,providers:[{provide:Ae,useValue:ft},{provide:ye,useValue:le}]}}}return Pe.\u0275fac=function(ft){return new(ft||Pe)(u.LFG(u.Lbi))},Pe.\u0275mod=u.oAB({type:Pe}),Pe.\u0275inj=u.cJS({providers:[ae]}),Pe})();function Oe(Pe,vt,ft,le,xe){const[,pe,Ce]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Pe)||[];if(pe)return function Xe(Pe,vt){try{return Pe.toString()===vt.toString()}catch{return Pe===vt}}(xe,Ce)||(Je("error",`${vt} was already initialized on the ${ft} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),Je("warn",{is:xe,was:Ce})),pe;{const Ve=le();return globalThis.\u0275AngularfireInstanceCache.push([Pe,Ve,xe]),Ve}}const Fe=!!gt.hot,Je=(Pe,...vt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Pe](...vt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(gt,Se,U)=>{U.d(Se,{q4:()=>Ni,iC:()=>gl,fc:()=>Su,HU:()=>fn,vb:()=>Gf,JM:()=>Cu,u3:()=>No});var u=U(5879),$=U(4097),N=U(5861),te=U(4303),ue=U(9058),ce=U(4537),Ie=U(7879);const Ae=(C,x)=>x.some(k=>C instanceof k);let ye,G;const Be=new WeakMap,Oe=new WeakMap,Xe=new WeakMap,Fe=new WeakMap,Je=new WeakMap;let ft={get(C,x,k){if(C instanceof IDBTransaction){if("done"===x)return Oe.get(C);if("objectStoreNames"===x)return C.objectStoreNames||Xe.get(C);if("store"===x)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return Ce(C[x])},set:(C,x,k)=>(C[x]=k,!0),has:(C,x)=>C instanceof IDBTransaction&&("done"===x||"store"===x)||x in C};function pe(C){return"function"==typeof C?function xe(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...x){return C.apply(Ve(this),x),Ce(Be.get(this))}:function(...x){return Ce(C.apply(Ve(this),x))}:function(x,...k){const j=C.call(Ve(this),x,...k);return Xe.set(j,x.sort?x.sort():[x]),Ce(j)}}(C):(C instanceof IDBTransaction&&function vt(C){if(Oe.has(C))return;const x=new Promise((k,j)=>{const X=()=>{C.removeEventListener("complete",oe),C.removeEventListener("error",we),C.removeEventListener("abort",we)},oe=()=>{k(),X()},we=()=>{j(C.error||new DOMException("AbortError","AbortError")),X()};C.addEventListener("complete",oe),C.addEventListener("error",we),C.addEventListener("abort",we)});Oe.set(C,x)}(C),Ae(C,function Z(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,ft):C)}function Ce(C){if(C instanceof IDBRequest)return function Pe(C){const x=new Promise((k,j)=>{const X=()=>{C.removeEventListener("success",oe),C.removeEventListener("error",we)},oe=()=>{k(Ce(C.result)),X()},we=()=>{j(C.error),X()};C.addEventListener("success",oe),C.addEventListener("error",we)});return x.then(k=>{k instanceof IDBCursor&&Be.set(k,C)}).catch(()=>{}),Je.set(x,C),x}(C);if(Fe.has(C))return Fe.get(C);const x=pe(C);return x!==C&&(Fe.set(C,x),Je.set(x,C)),x}const Ve=C=>Je.get(C),qe=["get","getKey","getAll","getAllKeys","count"],wt=["put","add","delete","clear"],hn=new Map;function Un(C,x){if(!(C instanceof IDBDatabase)||x in C||"string"!=typeof x)return;if(hn.get(x))return hn.get(x);const k=x.replace(/FromIndex$/,""),j=x!==k,X=wt.includes(k);if(!(k in(j?IDBIndex:IDBObjectStore).prototype)||!X&&!qe.includes(k))return;const oe=function(){var we=(0,N.Z)(function*(it,...nt){const bt=this.transaction(it,X?"readwrite":"readonly");let Ut=bt.store;return j&&(Ut=Ut.index(nt.shift())),(yield Promise.all([Ut[k](...nt),X&&bt.done]))[0]});return function(nt){return we.apply(this,arguments)}}();return hn.set(x,oe),oe}!function le(C){ft=C(ft)}(C=>({...C,get:(x,k,j)=>Un(x,k)||C.get(x,k,j),has:(x,k)=>!!Un(x,k)||C.has(x,k)}));const Vn="@firebase/installations",Bn="0.6.4",An=1e4,Ji=`w:${Bn}`,de="FIS_v2",_e="https://firebaseinstallations.googleapis.com/v1",ve=36e5,et=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(C){return C instanceof ue.ZR&&C.code.includes("request-failed")}function mn({projectId:C}){return`${_e}/projects/${C}/installations`}function At(C){return{token:C.token,requestStatus:2,expiresIn:oi(C.expiresIn),creationTime:Date.now()}}function rn(C,x){return _t.apply(this,arguments)}function _t(){return(_t=(0,N.Z)(function*(C,x){const j=(yield x.json()).error;return et.create("request-failed",{requestName:C,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function En({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Fn(C){return gn.apply(this,arguments)}function gn(){return(gn=(0,N.Z)(function*(C){const x=yield C();return x.status>=500&&x.status<600?C():x})).apply(this,arguments)}function oi(C){return Number(C.replace("s","000"))}function Xn(){return(Xn=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:x},{fid:k}){const j=mn(C),X=En(C),oe=x.getImmediate({optional:!0});if(oe){const bt=yield oe.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const it={method:"POST",headers:X,body:JSON.stringify({fid:k,authVersion:de,appId:C.appId,sdkVersion:Ji})},nt=yield Fn(()=>fetch(j,it));if(nt.ok){const bt=yield nt.json();return{fid:bt.fid||k,registrationStatus:2,refreshToken:bt.refreshToken,authToken:At(bt.authToken)}}throw yield rn("Create Installation",nt)})).apply(this,arguments)}function ii(C){return new Promise(x=>{setTimeout(x,C)})}const Rs=/^[cdef][\w-]{21}$/,Ct="";function Rt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const k=function Lt(C){return function dr(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Rs.test(k)?k:Ct}catch{return Ct}}function Jt(C){return`${C.appName}!${C.appId}`}const vi=new Map;function Ai(C,x){const k=Jt(C);Pr(k,x),function cn(C,x){const k=function Qt(){return!Er&&"BroadcastChannel"in self&&(Er=new BroadcastChannel("[Firebase] FID Change"),Er.onmessage=C=>{Pr(C.data.key,C.data.fid)}),Er}();k&&k.postMessage({key:C,fid:x}),function Hn(){0===vi.size&&Er&&(Er.close(),Er=null)}()}(k,x)}function Pr(C,x){const k=vi.get(C);if(k)for(const j of k)j(x)}let Er=null;const Wr="firebase-installations-database",us=1,Ri="firebase-installations-store";let fi=null;function be(){return fi||(fi=function Y(C,x,{blocked:k,upgrade:j,blocking:X,terminated:oe}={}){const we=indexedDB.open(C,x),it=Ce(we);return j&&we.addEventListener("upgradeneeded",nt=>{j(Ce(we.result),nt.oldVersion,nt.newVersion,Ce(we.transaction))}),k&&we.addEventListener("blocked",()=>k()),it.then(nt=>{oe&&nt.addEventListener("close",()=>oe()),X&&nt.addEventListener("versionchange",()=>X())}).catch(()=>{}),it}(Wr,us,{upgrade:(C,x)=>{0===x&&C.createObjectStore(Ri)}})),fi}function Q(C,x){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,N.Z)(function*(C,x){const k=Jt(C),X=(yield be()).transaction(Ri,"readwrite"),oe=X.objectStore(Ri),we=yield oe.get(k);return yield oe.put(x,k),yield X.done,(!we||we.fid!==x.fid)&&Ai(C,x.fid),x})).apply(this,arguments)}function Ge(C){return ht.apply(this,arguments)}function ht(){return(ht=(0,N.Z)(function*(C){const x=Jt(C),j=(yield be()).transaction(Ri,"readwrite");yield j.objectStore(Ri).delete(x),yield j.done})).apply(this,arguments)}function yt(C,x){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(C,x){const k=Jt(C),X=(yield be()).transaction(Ri,"readwrite"),oe=X.objectStore(Ri),we=yield oe.get(k),it=x(we);return void 0===it?yield oe.delete(k):yield oe.put(it,k),yield X.done,it&&(!we||we.fid!==it.fid)&&Ai(C,it.fid),it})).apply(this,arguments)}function K(C){return q.apply(this,arguments)}function q(){return q=(0,N.Z)(function*(C){let x;const k=yield yt(C.appConfig,j=>{const X=function B(C){return lt(C||{fid:Rt(),registrationStatus:0})}(j),oe=function H(C,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(et.create("app-offline"))};const k={fid:x.fid,registrationStatus:1,registrationTime:Date.now()},j=function F(C,x){return se.apply(this,arguments)}(C,k);return{installationEntry:k,registrationPromise:j}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:Re(C)}:{installationEntry:x}}(C,X);return x=oe.registrationPromise,oe.installationEntry});return k.fid===Ct?{installationEntry:yield x}:{installationEntry:k,registrationPromise:x}}),q.apply(this,arguments)}function se(){return se=(0,N.Z)(function*(C,x){try{const k=yield function Di(C,x){return Xn.apply(this,arguments)}(C,x);return Q(C.appConfig,k)}catch(k){throw Ke(k)&&409===k.customData.serverCode?yield Ge(C.appConfig):yield Q(C.appConfig,{fid:x.fid,registrationStatus:0}),k}}),se.apply(this,arguments)}function Re(C){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(C){let x=yield Nt(C.appConfig);for(;1===x.registrationStatus;)yield ii(100),x=yield Nt(C.appConfig);if(0===x.registrationStatus){const{installationEntry:k,registrationPromise:j}=yield K(C);return j||k}return x})).apply(this,arguments)}function Nt(C){return yt(C,x=>{if(!x)throw et.create("installation-not-found");return lt(x)})}function lt(C){return function In(C){return 1===C.registrationStatus&&C.registrationTime+An<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Ln(){return(Ln=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:x},k){const j=function Yt(C,{fid:x}){return`${mn(C)}/${x}/authTokens:generate`}(C,k),X=function Qn(C,{refreshToken:x}){const k=En(C);return k.append("Authorization",function Or(C){return`${de} ${C}`}(x)),k}(C,k),oe=x.getImmediate({optional:!0});if(oe){const bt=yield oe.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const it={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:Ji,appId:C.appId}})},nt=yield Fn(()=>fetch(j,it));if(nt.ok)return At(yield nt.json());throw yield rn("Generate Auth Token",nt)})).apply(this,arguments)}function qr(C){return va.apply(this,arguments)}function va(){return va=(0,N.Z)(function*(C,x=!1){let k;const j=yield yt(C.appConfig,oe=>{if(!Wo(oe))throw et.create("not-registered");const we=oe.authToken;if(!x&&function Ja(C){return 2===C.requestStatus&&!function Kc(C){const x=Date.now();return x<C.creationTime||C.creationTime+C.expiresIn<x+ve}(C)}(we))return oe;if(1===we.requestStatus)return k=function xo(C,x){return uo.apply(this,arguments)}(C,x),oe;{if(!navigator.onLine)throw et.create("app-offline");const it=function Yc(C){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:x})}(oe);return k=function ks(C,x){return un.apply(this,arguments)}(C,it),it}});return k?yield k:j.authToken}),va.apply(this,arguments)}function uo(){return(uo=(0,N.Z)(function*(C,x){let k=yield ho(C.appConfig);for(;1===k.authToken.requestStatus;)yield ii(100),k=yield ho(C.appConfig);const j=k.authToken;return 0===j.requestStatus?qr(C,x):j})).apply(this,arguments)}function ho(C){return yt(C,x=>{if(!Wo(x))throw et.create("not-registered");return function Do(C){return 1===C.requestStatus&&C.requestTime+An<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function un(){return un=(0,N.Z)(function*(C,x){try{const k=yield function Vt(C,x){return Ln.apply(this,arguments)}(C,x),j=Object.assign(Object.assign({},x),{authToken:k});return yield Q(C.appConfig,j),k}catch(k){if(!Ke(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const j=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield Q(C.appConfig,j)}else yield Ge(C.appConfig);throw k}}),un.apply(this,arguments)}function Wo(C){return void 0!==C&&2===C.registrationStatus}function el(){return(el=(0,N.Z)(function*(C){const x=C,{installationEntry:k,registrationPromise:j}=yield K(x);return j?j.catch(console.error):qr(x).catch(console.error),k.fid})).apply(this,arguments)}function ba(){return ba=(0,N.Z)(function*(C,x=!1){const k=C;return yield function Ao(C){return wa.apply(this,arguments)}(k),(yield qr(k,x)).token}),ba.apply(this,arguments)}function wa(){return(wa=(0,N.Z)(function*(C){const{registrationPromise:x}=yield K(C);x&&(yield x)})).apply(this,arguments)}function Ea(C){return et.create("missing-app-config-values",{valueName:C})}const nl="installations",Xl=C=>{const x=C.getProvider("app").getImmediate(),k=function Kr(C){if(!C||!C.options)throw Ea("App Configuration");if(!C.name)throw Ea("App Name");const x=["projectId","apiKey","appId"];for(const k of x)if(!C.options[k])throw Ea(k);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(x);return{app:x,appConfig:k,heartbeatServiceProvider:(0,te._getProvider)(x,"heartbeat"),_delete:()=>Promise.resolve()}},Ad=C=>{const x=C.getProvider("app").getImmediate(),k=(0,te._getProvider)(x,nl).getImmediate();return{getId:()=>function Zl(C){return el.apply(this,arguments)}(k),getToken:X=>function Dd(C){return ba.apply(this,arguments)}(k,X)}};(function Rd(){(0,te._registerComponent)(new ce.wA(nl,Xl,"PUBLIC")),(0,te._registerComponent)(new ce.wA("installations-internal",Ad,"PRIVATE"))})(),(0,te.registerVersion)(Vn,Bn),(0,te.registerVersion)(Vn,Bn,"esm2017");const Jl="@firebase/remote-config",Ir=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bt{constructor(x,k,j,X){this.client=x,this.storage=k,this.storageCache=j,this.logger=X}isCachedDataFresh(x,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-k,X=j<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${X}.`),X}fetch(x){var k=this;return(0,N.Z)(function*(){const[j,X]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(X&&k.isCachedDataFresh(x.cacheMaxAgeMillis,j))return X;x.eTag=X&&X.eTag;const oe=yield k.client.fetch(x),we=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&we.push(k.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(we),oe})()}}function Wn(C=navigator){return C.languages&&C.languages[0]||C.language}class ds{constructor(x,k,j,X,oe,we){this.firebaseInstallations=x,this.sdkVersion=k,this.namespace=j,this.projectId=X,this.apiKey=oe,this.appId=we}fetch(x){var k=this;return(0,N.Z)(function*(){const[j,X]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),we=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,it={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},nt={sdk_version:k.sdkVersion,app_instance_id:j,app_instance_id_token:X,app_id:k.appId,language_code:Wn()},bt={method:"POST",headers:it,body:JSON.stringify(nt)},Ut=fetch(we,bt),Mt=new Promise((ys,ui)=>{x.signal.addEventListener(()=>{const Va=new Error("The operation was aborted.");Va.name="AbortError",ui(Va)})});let Vr;try{yield Promise.race([Ut,Mt]),Vr=yield Ut}catch(ys){let ui="fetch-client-network";throw"AbortError"===ys?.name&&(ui="fetch-timeout"),Ir.create(ui,{originalErrorMessage:ys?.message})}let Qi=Vr.status;const ei=Vr.headers.get("ETag")||void 0;let Ua,bo;if(200===Vr.status){let ys;try{ys=yield Vr.json()}catch(ui){throw Ir.create("fetch-client-parse",{originalErrorMessage:ui?.message})}Ua=ys.entries,bo=ys.state}if("INSTANCE_STATE_UNSPECIFIED"===bo?Qi=500:"NO_CHANGE"===bo?Qi=304:("NO_TEMPLATE"===bo||"EMPTY_CONFIG"===bo)&&(Ua={}),304!==Qi&&200!==Qi)throw Ir.create("fetch-status",{httpStatus:Qi});return{status:Qi,eTag:ei,config:Ua}})()}}class Ca{constructor(x,k){this.client=x,this.storage=k}fetch(x){var k=this;return(0,N.Z)(function*(){const j=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(x,j)})()}attemptFetch(x,{throttleEndTimeMillis:k,backoffCount:j}){var X=this;return(0,N.Z)(function*(){yield function Ro(C,x){return new Promise((k,j)=>{const X=Math.max(x-Date.now(),0),oe=setTimeout(k,X);C.addEventListener(()=>{clearTimeout(oe),j(Ir.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,k);try{const oe=yield X.client.fetch(x);return yield X.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Nr(C){if(!(C instanceof ue.ZR&&C.customData))return!1;const x=Number(C.customData.httpStatus);return 429===x||500===x||503===x||504===x}(oe))throw oe;const we={throttleEndTimeMillis:Date.now()+(0,ue.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(we),X.attemptFetch(x,we)}})()}}class Ko{constructor(x,k,j,X,oe){this.app=x,this._client=k,this._storageCache=j,this._storage=X,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kt(C,x){const k=C.target.error||void 0;return Ir.create(x,{originalErrorMessage:k&&k?.message})}const Ws="app_namespace_store";class ol{constructor(x,k,j,X=function $i(){return new Promise((C,x)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=j=>{x(kt(j,"storage-open"))},k.onsuccess=j=>{C(j.target.result)},k.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(Ws,{keyPath:"compositeKey"})}}catch(k){x(Ir.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=x,this.appName=k,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var k=this;return(0,N.Z)(function*(){const j=yield k.openDbPromise;return new Promise((X,oe)=>{const it=j.transaction([Ws],"readonly").objectStore(Ws),nt=k.createCompositeKey(x);try{const bt=it.get(nt);bt.onerror=Ut=>{oe(kt(Ut,"storage-get"))},bt.onsuccess=Ut=>{const Mt=Ut.target.result;X(Mt?Mt.value:void 0)}}catch(bt){oe(Ir.create("storage-get",{originalErrorMessage:bt?.message}))}})})()}set(x,k){var j=this;return(0,N.Z)(function*(){const X=yield j.openDbPromise;return new Promise((oe,we)=>{const nt=X.transaction([Ws],"readwrite").objectStore(Ws),bt=j.createCompositeKey(x);try{const Ut=nt.put({compositeKey:bt,value:k});Ut.onerror=Mt=>{we(kt(Mt,"storage-set"))},Ut.onsuccess=()=>{oe()}}catch(Ut){we(Ir.create("storage-set",{originalErrorMessage:Ut?.message}))}})})()}delete(x){var k=this;return(0,N.Z)(function*(){const j=yield k.openDbPromise;return new Promise((X,oe)=>{const it=j.transaction([Ws],"readwrite").objectStore(Ws),nt=k.createCompositeKey(x);try{const bt=it.delete(nt);bt.onerror=Ut=>{oe(kt(Ut,"storage-delete"))},bt.onsuccess=()=>{X()}}catch(bt){oe(Ir.create("storage-delete",{originalErrorMessage:bt?.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class fs{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,N.Z)(function*(){const k=x.storage.getLastFetchStatus(),j=x.storage.getLastSuccessfulFetchTimestampMillis(),X=x.storage.getActiveConfig(),oe=yield k;oe&&(x.lastFetchStatus=oe);const we=yield j;we&&(x.lastSuccessfulFetchTimestampMillis=we);const it=yield X;it&&(x.activeConfig=it)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function Ta(){return qs.apply(this,arguments)}function qs(){return(qs=(0,N.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Fr(){(0,te._registerComponent)(new ce.wA("remote-config",function C(x,{instanceIdentifier:k}){const j=x.getProvider("app").getImmediate(),X=x.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ir.create("registration-window");if(!(0,ue.hl)())throw Ir.create("indexed-db-unavailable");const{projectId:oe,apiKey:we,appId:it}=j.options;if(!oe)throw Ir.create("registration-project-id");if(!we)throw Ir.create("registration-api-key");if(!it)throw Ir.create("registration-app-id");const nt=new ol(it,j.name,k=k||"firebase"),bt=new fs(nt),Ut=new Ie.Yd(Jl);Ut.logLevel=Ie.in.ERROR;const Mt=new ds(X,te.SDK_VERSION,k,oe,we,it),Vr=new Ca(Mt,nt),Qi=new Bt(Vr,nt,bt,Ut),ei=new Ko(j,Qi,bt,nt,Ut);return function hr(C){const x=(0,ue.m9)(C);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(ei),ei},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(Jl,"0.4.4"),(0,te.registerVersion)(Jl,"0.4.4","esm2017")}();const nu=(C,x)=>x.some(k=>C instanceof k);let ps,en;const al=new WeakMap,pr=new WeakMap,Cr=new WeakMap,Zo=new WeakMap,Sa=new WeakMap;let Tr={get(C,x,k){if(C instanceof IDBTransaction){if("done"===x)return pr.get(C);if("objectStoreNames"===x)return C.objectStoreNames||Cr.get(C);if("store"===x)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return ms(C[x])},set:(C,x,k)=>(C[x]=k,!0),has:(C,x)=>C instanceof IDBTransaction&&("done"===x||"store"===x)||x in C};function Mo(C){return"function"==typeof C?function Fd(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Nd(){return en||(en=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...x){return C.apply(Zr(this),x),ms(al.get(this))}:function(...x){return ms(C.apply(Zr(this),x))}:function(x,...k){const j=C.call(Zr(this),x,...k);return Cr.set(j,x.sort?x.sort():[x]),ms(j)}}(C):(C instanceof IDBTransaction&&function _f(C){if(pr.has(C))return;const x=new Promise((k,j)=>{const X=()=>{C.removeEventListener("complete",oe),C.removeEventListener("error",we),C.removeEventListener("abort",we)},oe=()=>{k(),X()},we=()=>{j(C.error||new DOMException("AbortError","AbortError")),X()};C.addEventListener("complete",oe),C.addEventListener("error",we),C.addEventListener("abort",we)});pr.set(C,x)}(C),nu(C,function Pd(){return ps||(ps=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Tr):C)}function ms(C){if(C instanceof IDBRequest)return function Wi(C){const x=new Promise((k,j)=>{const X=()=>{C.removeEventListener("success",oe),C.removeEventListener("error",we)},oe=()=>{k(ms(C.result)),X()},we=()=>{j(C.error),X()};C.addEventListener("success",oe),C.addEventListener("error",we)});return x.then(k=>{k instanceof IDBCursor&&al.set(k,C)}).catch(()=>{}),Sa.set(x,C),x}(C);if(Zo.has(C))return Zo.get(C);const x=Mo(C);return x!==C&&(Zo.set(C,x),Sa.set(x,C)),x}const Zr=C=>Sa.get(C);function xa(C,x,{blocked:k,upgrade:j,blocking:X,terminated:oe}={}){const we=indexedDB.open(C,x),it=ms(we);return j&&we.addEventListener("upgradeneeded",nt=>{j(ms(we.result),nt.oldVersion,nt.newVersion,ms(we.transaction))}),k&&we.addEventListener("blocked",()=>k()),it.then(nt=>{oe&&nt.addEventListener("close",()=>oe()),X&&nt.addEventListener("versionchange",()=>X())}).catch(()=>{}),it}function tc(C,{blocked:x}={}){const k=indexedDB.deleteDatabase(C);return x&&k.addEventListener("blocked",()=>x()),ms(k).then(()=>{})}const yf=["get","getKey","getAll","getAllKeys","count"],eg=["put","add","delete","clear"],Ld=new Map;function iu(C,x){if(!(C instanceof IDBDatabase)||x in C||"string"!=typeof x)return;if(Ld.get(x))return Ld.get(x);const k=x.replace(/FromIndex$/,""),j=x!==k,X=eg.includes(k);if(!(k in(j?IDBIndex:IDBObjectStore).prototype)||!X&&!yf.includes(k))return;const oe=function(){var we=(0,N.Z)(function*(it,...nt){const bt=this.transaction(it,X?"readwrite":"readonly");let Ut=bt.store;return j&&(Ut=Ut.index(nt.shift())),(yield Promise.all([Ut[k](...nt),X&&bt.done]))[0]});return function(nt){return we.apply(this,arguments)}}();return Ld.set(x,oe),oe}!function Sr(C){Tr=C(Tr)}(C=>({...C,get:(x,k,j)=>iu(x,k)||C.get(x,k,j),has:(x,k)=>!!iu(x,k)||C.has(x,k)}));const Ud="/firebase-messaging-sw.js",vf="/firebase-cloud-messaging-push-scope",tg="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ng="https://fcmregistrations.googleapis.com/v1",ai="google.c.a.c_id",ig="google.c.a.c_l",L0="google.c.a.ts";var ru=function(C){return C.PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",C}(ru||{});function Ks(C){const x=new Uint8Array(C);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sg(C){const k=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(k),X=new Uint8Array(j.length);for(let oe=0;oe<j.length;++oe)X[oe]=j.charCodeAt(oe);return X}const ll="fcm_token_details_db",cl=5,iv="fcm_token_object_Store";function Vd(){return Vd=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(ll))return null;let x=null;return(yield xa(ll,cl,{upgrade:(j=(0,N.Z)(function*(X,oe,we,it){var nt;if(oe<2||!X.objectStoreNames.contains(iv))return;const bt=it.objectStore(iv),Ut=yield bt.index("fcmSenderId").get(C);if(yield bt.clear(),Ut)if(2===oe){const Mt=Ut;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;x={token:Mt.fcmToken,createTime:null!==(nt=Mt.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:Ks(Mt.vapidKey)}}}else if(3===oe){const Mt=Ut;x={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Ks(Mt.auth),p256dh:Ks(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Ks(Mt.vapidKey)}}}else if(4===oe){const Mt=Ut;x={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Ks(Mt.auth),p256dh:Ks(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Ks(Mt.vapidKey)}}}}),function(oe,we,it,nt){return j.apply(this,arguments)})})).close(),yield tc(ll),yield tc("fcm_vapid_details_db"),yield tc("undefined"),function Oo(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:x}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}(x)?x:null;var j}),Vd.apply(this,arguments)}const Qo="firebase-messaging-database",su=1,Ys="firebase-messaging-store";let ki=null;function nc(){return ki||(ki=xa(Qo,su,{upgrade:(C,x)=>{0===x&&C.createObjectStore(Ys)}})),ki}function xr(C){return ic.apply(this,arguments)}function ic(){return ic=(0,N.Z)(function*(C){const x=Hd(C),j=yield(yield nc()).transaction(Ys).objectStore(Ys).get(x);if(j)return j;{const X=yield function og(C){return Vd.apply(this,arguments)}(C.appConfig.senderId);if(X)return yield rc(C,X),X}}),ic.apply(this,arguments)}function rc(C,x){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,N.Z)(function*(C,x){const k=Hd(C),X=(yield nc()).transaction(Ys,"readwrite");return yield X.objectStore(Ys).put(x,k),yield X.done,x})).apply(this,arguments)}function Xo(){return(Xo=(0,N.Z)(function*(C){const x=Hd(C),j=(yield nc()).transaction(Ys,"readwrite");yield j.objectStore(Ys).delete(x),yield j.done})).apply(this,arguments)}function Hd({appConfig:C}){return C.appId}const Mi=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ag(C,x){return sc.apply(this,arguments)}function sc(){return(sc=(0,N.Z)(function*(C,x){const k=yield ou(C),j=If(x),X={method:"POST",headers:k,body:JSON.stringify(j)};let oe;try{oe=yield(yield fetch(jd(C.appConfig),X)).json()}catch(we){throw Mi.create("token-subscribe-failed",{errorInfo:we?.toString()})}if(oe.error)throw Mi.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw Mi.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function Da(){return(Da=(0,N.Z)(function*(C,x){const k=yield ou(C),j=If(x.subscriptionOptions),X={method:"PATCH",headers:k,body:JSON.stringify(j)};let oe;try{oe=yield(yield fetch(`${jd(C.appConfig)}/${x.token}`,X)).json()}catch(we){throw Mi.create("token-update-failed",{errorInfo:we?.toString()})}if(oe.error)throw Mi.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw Mi.create("token-update-no-token");return oe.token})).apply(this,arguments)}function oc(C,x){return fo.apply(this,arguments)}function fo(){return(fo=(0,N.Z)(function*(C,x){const j={method:"DELETE",headers:yield ou(C)};try{const oe=yield(yield fetch(`${jd(C.appConfig)}/${x}`,j)).json();if(oe.error)throw Mi.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(X){throw Mi.create("token-unsubscribe-failed",{errorInfo:X?.toString()})}})).apply(this,arguments)}function jd({projectId:C}){return`${ng}/projects/${C}/registrations`}function ou(C){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,N.Z)(function*({appConfig:C,installations:x}){const k=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function If({p256dh:C,auth:x,endpoint:k,vapidKey:j}){const X={web:{endpoint:k,auth:x,p256dh:C}};return j!==tg&&(X.web.applicationPubKey=j),X}const rv=6048e5;function cg(){return cg=(0,N.Z)(function*(C){const x=yield function lu(C,x){return zd.apply(this,arguments)}(C.swRegistration,C.vapidKey),k={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:x.endpoint,auth:Ks(x.getKey("auth")),p256dh:Ks(x.getKey("p256dh"))},j=yield xr(C.firebaseDependencies);if(j){if(function Df(C,x){return x.vapidKey===C.vapidKey&&x.endpoint===C.endpoint&&x.auth===C.auth&&x.p256dh===C.p256dh}(j.subscriptionOptions,k))return Date.now()>=j.createTime+rv?function Sf(C,x){return au.apply(this,arguments)}(C,{token:j.token,createTime:Date.now(),subscriptionOptions:k}):j.token;try{yield oc(C.firebaseDependencies,j.token)}catch(X){console.warn(X)}return lc(C.firebaseDependencies,k)}return lc(C.firebaseDependencies,k)}),cg.apply(this,arguments)}function ac(){return ac=(0,N.Z)(function*(C){const x=yield xr(C.firebaseDependencies);x&&(yield oc(C.firebaseDependencies,x.token),yield function bf(C){return Xo.apply(this,arguments)}(C.firebaseDependencies));const k=yield C.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()}),ac.apply(this,arguments)}function au(){return au=(0,N.Z)(function*(C,x){try{const k=yield function lg(C,x){return Da.apply(this,arguments)}(C.firebaseDependencies,x),j=Object.assign(Object.assign({},x),{token:k,createTime:Date.now()});return yield rc(C.firebaseDependencies,j),k}catch(k){throw yield function Tf(C){return ac.apply(this,arguments)}(C),k}}),au.apply(this,arguments)}function lc(C,x){return xf.apply(this,arguments)}function xf(){return(xf=(0,N.Z)(function*(C,x){const j={token:yield ag(C,x),createTime:Date.now(),subscriptionOptions:x};return yield rc(C,j),j.token})).apply(this,arguments)}function zd(){return(zd=(0,N.Z)(function*(C,x){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sg(x)})})).apply(this,arguments)}function cu(C){const x={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function cc(C,x){if(!x.notification)return;C.notification={};const k=x.notification.title;k&&(C.notification.title=k);const j=x.notification.body;j&&(C.notification.body=j);const X=x.notification.image;X&&(C.notification.image=X);const oe=x.notification.icon;oe&&(C.notification.icon=oe)}(x,C),function sv(C,x){x.data&&(C.data=x.data)}(x,C),function Gd(C,x){var k,j,X,oe,we;if(!(x.fcmOptions||null!==(k=x.notification)&&void 0!==k&&k.click_action))return;C.fcmOptions={};const it=null!==(X=null===(j=x.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(oe=x.notification)||void 0===oe?void 0:oe.click_action;it&&(C.fcmOptions.link=it);const nt=null===(we=x.fcmOptions)||void 0===we?void 0:we.analytics_label;nt&&(C.fcmOptions.analyticsLabel=nt)}(x,C),x}function $d(C,x){const k=[];for(let j=0;j<C.length;j++)k.push(C.charAt(j)),j<x.length&&k.push(x.charAt(j));return k.join("")}function Wd(C){return Mi.create("missing-app-config-values",{valueName:C})}$d("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$d("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dg{constructor(x,k,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function ov(C){if(!C||!C.options)throw Wd("App Configuration Object");if(!C.name)throw Wd("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:k}=C;for(const j of x)if(!k[j])throw Wd(j);return{appName:C.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:X,installations:k,analyticsProvider:j}}_delete(){return Promise.resolve()}}function uc(){return(uc=(0,N.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Ud,{scope:vf}),C.swRegistration.update().catch(()=>{})}catch(x){throw Mi.create("failed-service-worker-registration",{browserErrorMessage:x?.message})}})).apply(this,arguments)}function Zs(){return(Zs=(0,N.Z)(function*(C,x){if(!x&&!C.swRegistration&&(yield function uu(C){return uc.apply(this,arguments)}(C)),x||!C.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw Mi.create("invalid-sw-registration");C.swRegistration=x}})).apply(this,arguments)}function dc(){return(dc=(0,N.Z)(function*(C,x){x?C.vapidKey=x:C.vapidKey||(C.vapidKey=tg)})).apply(this,arguments)}function hc(){return hc=(0,N.Z)(function*(C,x){if(!navigator)throw Mi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mi.create("permission-blocked");return yield function ul(C,x){return dc.apply(this,arguments)}(C,x?.vapidKey),yield function du(C,x){return Zs.apply(this,arguments)}(C,x?.serviceWorkerRegistration),function Cf(C){return cg.apply(this,arguments)}(C)}),hc.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(C,x,k){const j=function Rf(C){switch(C){case ru.NOTIFICATION_CLICKED:return"notification_open";case ru.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(x);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:k[ai],message_name:k[ig],message_time:k[L0],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xn(){return xn=(0,N.Z)(function*(C,x){const k=x.data;if(!k.isFirebaseMessaging)return;C.onMessageHandler&&k.messageType===ru.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(cu(k)):C.onMessageHandler.next(cu(k)));const j=k.data;(function ug(C){return"object"==typeof C&&!!C&&ai in C})(j)&&"1"===j["google.c.a.e"]&&(yield function av(C,x,k){return Ms.apply(this,arguments)}(C,k.messageType,j))}),xn.apply(this,arguments)}const dl="@firebase/messaging",Lr=C=>{const x=new dg(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function hu(C,x){return xn.apply(this,arguments)}(x,k)),x},lv=C=>{const x=C.getProvider("messaging").getImmediate();return{getToken:j=>function Af(C,x){return hc.apply(this,arguments)}(x,j)}};function Aa(){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,N.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qd(){(0,te._registerComponent)(new ce.wA("messaging",Lr,"PUBLIC")),(0,te._registerComponent)(new ce.wA("messaging-internal",lv,"PRIVATE")),(0,te.registerVersion)(dl,"0.12.4"),(0,te.registerVersion)(dl,"0.12.4","esm2017")}();const hl="analytics",Mf="firebase_id",Pt="origin",pu=6e4,uv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mu="https://www.googletagmanager.com/gtag/js",Ki=new Ie.Yd("@firebase/analytics"),Oi=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Jo(C){if(!C.startsWith(mu)){const x=Oi.create("invalid-gtag-resource",{gtagURL:C});return Ki.warn(x.message),""}return C}function Ma(C){return Promise.all(C.map(x=>x.catch(k=>k)))}function Ne(){return(Ne=(0,N.Z)(function*(C,x,k,j,X,oe){const we=j[X];try{if(we)yield x[we];else{const nt=(yield Ma(k)).find(bt=>bt.measurementId===X);nt&&(yield x[nt.appId])}}catch(it){Ki.error(it)}C("config",X,oe)})).apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(C,x,k,j,X){try{let oe=[];if(X&&X.send_to){let we=X.send_to;Array.isArray(we)||(we=[we]);const it=yield Ma(k);for(const nt of we){const bt=it.find(Mt=>Mt.measurementId===nt),Ut=bt&&x[bt.appId];if(!Ut){oe=[];break}oe.push(Ut)}}0===oe.length&&(oe=Object.values(x)),yield Promise.all(oe),C("event",j,X||{})}catch(oe){Ki.error(oe)}})).apply(this,arguments)}const fc=30,Qd=new class Nf{constructor(x={},k=1e3){this.throttleMetadata=x,this.intervalMillis=k}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,k){this.throttleMetadata[x]=k}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function mg(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Xd(){return(Xd=(0,N.Z)(function*(C){var x;const{appId:k,apiKey:j}=C,X={method:"GET",headers:mg(j)},oe=uv.replace("{app-id}",k),we=yield fetch(oe,X);if(200!==we.status&&304!==we.status){let it="";try{const nt=yield we.json();null!==(x=nt.error)&&void 0!==x&&x.message&&(it=nt.error.message)}catch{}throw Oi.create("config-fetch-failed",{httpStatus:we.status,responseMessage:it})}return we.json()})).apply(this,arguments)}function go(){return(go=(0,N.Z)(function*(C,x=Qd,k){const{appId:j,apiKey:X,measurementId:oe}=C.options;if(!j)throw Oi.create("no-app-id");if(!X){if(oe)return{measurementId:oe,appId:j};throw Oi.create("no-api-key")}const we=x.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},it=new Jd;return setTimeout((0,N.Z)(function*(){it.abort()}),void 0!==k?k:pu),Ff({appId:j,apiKey:X,measurementId:oe},we,it,x)})).apply(this,arguments)}function Ff(C,x,k){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,N.Z)(function*(C,{throttleEndTimeMillis:x,backoffCount:k},j,X=Qd){var oe;const{appId:we,measurementId:it}=C;try{yield function _s(C,x){return new Promise((k,j)=>{const X=Math.max(x-Date.now(),0),oe=setTimeout(k,X);C.addEventListener(()=>{clearTimeout(oe),j(Oi.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(j,x)}catch(nt){if(it)return Ki.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${nt?.message}]`),{appId:we,measurementId:it};throw nt}try{const nt=yield function V0(C){return Xd.apply(this,arguments)}(C);return X.deleteThrottleMetadata(we),nt}catch(nt){const bt=nt;if(!function gg(C){if(!(C instanceof ue.ZR&&C.customData))return!1;const x=Number(C.customData.httpStatus);return 429===x||500===x||503===x||504===x}(bt)){if(X.deleteThrottleMetadata(we),it)return Ki.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:we,measurementId:it};throw nt}const Ut=503===Number(null===(oe=bt?.customData)||void 0===oe?void 0:oe.httpStatus)?(0,ue.$s)(k,X.intervalMillis,fc):(0,ue.$s)(k,X.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+Ut,backoffCount:k+1};return X.setThrottleMetadata(we,Mt),Ki.debug(`Calling attemptFetch again in ${Ut} millis`),Ff(C,Mt,j,X)}}),Oa.apply(this,arguments)}class Jd{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}let _u,Zi;function yu(){return(yu=(0,N.Z)(function*(C,x,k,j,X){if(X&&X.global)C("event",k,j);else{const oe=yield x;C("event",k,Object.assign(Object.assign({},j),{send_to:oe}))}})).apply(this,arguments)}function Qs(){return(Qs=(0,N.Z)(function*(){if(!(0,ue.hl)())return Ki.warn(Oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(C){return Ki.warn(Oi.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function Os(){return Os=(0,N.Z)(function*(C,x,k,j,X,oe,we){var it;const nt=function gr(C){return go.apply(this,arguments)}(C);nt.then(Qi=>{k[Qi.measurementId]=Qi.appId,C.options.measurementId&&Qi.measurementId!==C.options.measurementId&&Ki.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Qi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Qi=>Ki.error(Qi)),x.push(nt);const bt=function ot(){return Qs.apply(this,arguments)}().then(Qi=>{if(Qi)return j.getId()}),[Ut,Mt]=yield Promise.all([nt,bt]);(function gu(C){const x=window.document.getElementsByTagName("script");for(const k of Object.values(x))if(k.src&&k.src.includes(mu)&&k.src.includes(C))return k;return null})(oe)||function pg(C,x){const k=function Yd(C,x){let k;return window.trustedTypes&&(k=window.trustedTypes.createPolicy(C,x)),k}("firebase-js-sdk-policy",{createScriptURL:Jo}),j=document.createElement("script"),X=`${mu}?l=${C}&id=${x}`;j.src=k?k?.createScriptURL(X):X,j.async=!0,document.head.appendChild(j)}(oe,Ut.measurementId),Zi&&(X("consent","default",Zi),function ea(C){Zi=C}(void 0)),X("js",new Date);const Vr=null!==(it=we?.config)&&void 0!==it?it:{};return Vr[Pt]="firebase",Vr.update=!0,null!=Mt&&(Vr[Mf]=Mt),X("config",Ut.measurementId,Vr),_u&&(X("set",_u),function jn(C){_u=C}(void 0)),Ut.measurementId}),Os.apply(this,arguments)}class pc{constructor(x){this.app=x}_delete(){return delete _o[this.app.options.appId],Promise.resolve()}}let _o={},mc=[];const Pi={};let Ar,Nn,qn="dataLayer",Xs=!1;function Pa(C,x,k){!function fl(){const C=[];if((0,ue.ru)()&&C.push("This is a browser extension environment."),(0,ue.zI)()||C.push("Cookies are not available."),C.length>0){const x=C.map((j,X)=>`(${X+1}) ${j}`).join(" "),k=Oi.create("invalid-analytics-context",{errorInfo:x});Ki.warn(k.message)}}();const j=C.options.appId;if(!j)throw Oi.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Oi.create("no-api-key");Ki.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_o[j])throw Oi.create("already-exists",{id:j});if(!Xs){!function Of(C){let x=[];Array.isArray(window[C])?x=window[C]:window[C]=x}(qn);const{wrappedGtag:oe,gtagCore:we}=function mr(C,x,k,j,X){let oe=function(...we){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(oe=window[X]),window[X]=function Zd(C,x,k,j){function oe(){return oe=(0,N.Z)(function*(we,...it){try{if("event"===we){const[nt,bt]=it;yield function dn(C,x,k,j,X){return gs.apply(this,arguments)}(C,x,k,nt,bt)}else if("config"===we){const[nt,bt]=it;yield function Pf(C,x,k,j,X,oe){return Ne.apply(this,arguments)}(C,x,k,j,nt,bt)}else if("consent"===we){const[nt]=it;C("consent","update",nt)}else if("get"===we){const[nt,bt,Ut]=it;C("get",nt,bt,Ut)}else if("set"===we){const[nt]=it;C("set",nt)}else C(we,...it)}catch(nt){Ki.error(nt)}}),oe.apply(this,arguments)}return function X(we){return oe.apply(this,arguments)}}(oe,C,x,k),{gtagCore:oe,wrappedGtag:window[X]}}(_o,mc,Pi,qn,"gtag");Nn=oe,Ar=we,Xs=!0}return _o[j]=function ci(C,x,k,j,X,oe,we){return Os.apply(this,arguments)}(C,mc,Pi,x,Ar,qn,k),new pc(C)}function Vf(){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,N.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const bu="@firebase/analytics";!function Hf(){(0,te._registerComponent)(new ce.wA(hl,(x,{options:k})=>Pa(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,te._registerComponent)(new ce.wA("analytics-internal",function C(x){try{const k=x.getProvider(hl).getImmediate();return{logEvent:(j,X,oe)=>function pv(C,x,k,j){C=(0,ue.m9)(C),function dv(C,x,k,j,X){return yu.apply(this,arguments)}(Nn,_o[C.app.options.appId],x,k,j).catch(X=>Ki.error(X))}(k,j,X,oe)}}catch(k){throw Oi.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,te.registerVersion)(bu,"0.10.0"),(0,te.registerVersion)(bu,"0.10.0","esm2017")}();var wu=U(1954),_c=U(2631);const _g=new class H0 extends _c.v{}(class jf extends wu.o{constructor(x,k){super(x,k),this.scheduler=x,this.work=k}schedule(x,k=0){return k>0?super.schedule(x,k):(this.delay=k,this.state=x,this.scheduler.flush(this),this)}execute(x,k){return k>0||this.closed?super.execute(x,k):this._execute(x,k)}requestAsyncId(x,k,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(x,k,j):(x.flush(this),0)}});var mv=U(6321),ee=U(5592),Wt=U(9397),gi=U(3093),A=U(5137);const Ni=new u.GfV("7.6.1"),ta="__angularfire_symbol__analyticsIsSupportedValue",Na="__angularfire_symbol__analyticsIsSupported",Eu="__angularfire_symbol__remoteConfigIsSupportedValue",Kn="__angularfire_symbol__remoteConfigIsSupported",Iu="__angularfire_symbol__messagingIsSupportedValue",na="__angularfire_symbol__messagingIsSupported";function Cu(C,x,k){if(x){if(1===x.length)return x[0];const oe=x.filter(we=>we.app===k);if(1===oe.length)return oe[0]}return k.container.getProvider(C).getImmediate({optional:!0})}globalThis[Na]||(globalThis[Na]=Vf().then(C=>globalThis[ta]=C).catch(()=>globalThis[ta]=!1)),globalThis[na]||(globalThis[na]=Aa().then(C=>globalThis[Iu]=C).catch(()=>globalThis[Iu]=!1)),globalThis[Kn]||(globalThis[Kn]=Ta().then(C=>globalThis[Eu]=C).catch(()=>globalThis[Eu]=!1));const Gf=(C,x)=>{const k=x?[x]:(0,$.C6)(),j=[];return k.forEach(X=>{X.container.getProvider(C).instances.forEach(we=>{j.includes(we)||j.push(we)})}),j};function Fa(){}class La{constructor(x,k=_g){this.zone=x,this.delegate=k}now(){return this.delegate.now()}schedule(x,k,j){const X=this.zone;return this.delegate.schedule(function(we){X.runGuarded(()=>{x.apply(this,[we])})},k,j)}}class yg{constructor(x){this.zone=x,this.task=null}call(x,k){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fa,{},Fa,Fa)),k.pipe((0,Wt.b)({next:j,complete:j,error:j})).subscribe(x).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fn=(()=>{class C{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new La(Zone.current)),this.insideAngular=k.run(()=>new La(Zone.current,mv.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(k){return new(k||C)(u.LFG(u.R0b))},C.\u0275prov=u.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function vo(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Js(C){return vo().ngZone.run(()=>C())}function Su(C){return C.pipe((0,gi.Q)(vo().outsideAngular))}function gl(C){return vo(),function _l(C){return function(k){return(k=k.lift(new yg(C.ngZone))).pipe((0,A.R)(C.outsideAngular),(0,gi.Q)(C.insideAngular))}}(vo())(C)}const yl=(C,x)=>function(){const j=arguments;return x&&setTimeout(()=>{"scheduled"===x.state&&x.invoke()},10),Js(()=>C.apply(void 0,j))},No=(C,x)=>function(){let k;const j=arguments;for(let oe=0;oe<arguments.length;oe++)"function"==typeof j[oe]&&(x&&(k||(k=Js(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fa,{},Fa,Fa)))),j[oe]=yl(j[oe],k));const X=function Tu(C){return vo().ngZone.runOutsideAngular(()=>C())}(()=>C.apply(this,j));if(!x){if(X instanceof ee.y){const oe=vo();return X.pipe((0,A.R)(oe.outsideAngular),(0,gi.Q)(oe.insideAngular))}return Js(()=>X)}return X instanceof ee.y?X.pipe(gl):X instanceof Promise?Js(()=>new Promise((oe,we)=>X.then(it=>Js(()=>oe(it)),it=>Js(()=>we(it))))):"function"==typeof X&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),X.apply(this,arguments)}:Js(()=>X)}},6710:(gt,Se,U)=>{U.d(Se,{$:()=>Ud,A:()=>Z,D:()=>Oe,I:()=>mf,J:()=>Xl,L:()=>tt,N:()=>yt,P:()=>ci,Q:()=>ol,R:()=>Lf,U:()=>tu,V:()=>Ta,W:()=>qs,X:()=>Yo,Y:()=>Pd,Z:()=>Nd,_:()=>Sa,a:()=>fu,a0:()=>tg,a1:()=>ai,a2:()=>U0,a3:()=>iv,a4:()=>Vd,a5:()=>Qo,a6:()=>Ys,a7:()=>nc,a8:()=>ic,a9:()=>Bd,aA:()=>Y,aB:()=>Na,aC:()=>Ge,aD:()=>_n,aE:()=>Wt,aF:()=>ih,aG:()=>fv,aH:()=>pi,aL:()=>ka,aO:()=>ps,aa:()=>bf,ab:()=>Hd,ac:()=>wf,ad:()=>lg,ae:()=>oc,af:()=>jd,ai:()=>rv,aj:()=>cg,ak:()=>Tf,an:()=>Fd,ao:()=>cc,aq:()=>dc,ar:()=>dl,as:()=>qe,at:()=>lt,au:()=>Re,av:()=>le,aw:()=>Mt,ax:()=>na,ay:()=>In,az:()=>xe,b:()=>Kd,c:()=>Nn,d:()=>Pa,e:()=>vu,f:()=>bu,g:()=>H0,h:()=>wu,i:()=>mo,j:()=>mv,k:()=>bo,l:()=>pt,m:()=>Va,p:()=>Ae,r:()=>On,s:()=>li,u:()=>ot});var u=U(5861),$=U(9058),N=U(7592),te=U(7582),ue=U(7879),ce=U(4537);const Ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Xe=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fe=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new ue.Yd("@firebase/auth");function ft(E,..._){Pe.logLevel<=ue.in.ERROR&&Pe.error(`Auth (${N.SDK_VERSION}): ${E}`,..._)}function le(E,..._){throw Ve(E,..._)}function xe(E,..._){return Ve(E,..._)}function pe(E,_,y){const T=Object.assign(Object.assign({},Xe()),{[_]:y});return new $.LL("auth","Firebase",T).create(_,{appName:E.name})}function Ce(E,_,y){if(!(_ instanceof y))throw y.name!==_.constructor.name&&le(E,"argument-error"),pe(E,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(E,..._){if("string"!=typeof E){const y=_[0],T=[..._.slice(1)];return T[0]&&(T[0].appName=E.name),E._errorFactory.create(y,...T)}return Fe.create(E,..._)}function Y(E,_,...y){if(!E)throw Ve(_,...y)}function ke(E){const _="INTERNAL ASSERTION FAILED: "+E;throw ft(_),new Error(_)}function qe(E,_){E||ke(_)}function wt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function hn(){return"http:"===Un()||"https:"===Un()}function Un(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class An{constructor(_,y){this.shortDelay=_,this.longDelay=y,qe(y>_,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Vn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(hn()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ji(E,_){qe(E.emulator,"Emulator should always be set here");const{url:y}=E.emulator;return _?`${y}${_.startsWith("/")?_.slice(1):_}`:y}class de{static initialize(_,y,T){this.fetchImpl=_,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ve=new An(3e4,6e4);function he(E,_){return E.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:E.tenantId}):_}function De(E,_,y,T){return $e.apply(this,arguments)}function $e(){return($e=(0,u.Z)(function*(E,_,y,T,M={}){return et(E,M,(0,u.Z)(function*(){let L={},ie={};T&&("GET"===_?ie=T:L={body:JSON.stringify(T)});const me=(0,$.xO)(Object.assign({key:E.config.apiKey},ie)).slice(1),Ze=yield E._getAdditionalHeaders();return Ze["Content-Type"]="application/json",E.languageCode&&(Ze["X-Firebase-Locale"]=E.languageCode),de.fetch()(rn(E,E.config.apiHost,y,me),Object.assign({method:_,headers:Ze,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function et(E,_,y){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,u.Z)(function*(E,_,y){E._canInitEmulator=!1;const T=Object.assign(Object.assign({},_e),_);try{const M=new _t(E),L=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const ie=yield L.json();if("needConfirmation"in ie)throw En(E,"account-exists-with-different-credential",ie);if(L.ok&&!("errorMessage"in ie))return ie;{const me=L.ok?ie.errorMessage:ie.error.message,[Ze,st]=me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw En(E,"credential-already-in-use",ie);if("EMAIL_EXISTS"===Ze)throw En(E,"email-already-in-use",ie);if("USER_DISABLED"===Ze)throw En(E,"user-disabled",ie);const Et=T[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw pe(E,Et,st);le(E,Et)}}catch(M){if(M instanceof $.ZR)throw M;le(E,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function mn(E,_,y,T){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(E,_,y,T,M={}){const L=yield De(E,_,y,T,M);return"mfaPendingCredential"in L&&le(E,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function rn(E,_,y,T){const M=`${_}${y}?${T}`;return E.config.emulator?Ji(E.config,M):`${E.config.apiScheme}://${M}`}class _t{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(xe(this.auth,"network-request-failed")),ve.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function En(E,_,y){const T={appName:E.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const M=xe(E,_,T);return M.customData._tokenResponse=y,M}function Fn(){return(Fn=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function oi(){return(oi=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Di(){return(Di=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Xn(E){if(E)try{const _=new Date(Number(E));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function Rs(){return(Rs=(0,u.Z)(function*(E,_=!1){const y=(0,$.m9)(E),T=yield y.getIdToken(_),M=Rt(T);Y(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const L="object"==typeof M.firebase?M.firebase:void 0,ie=L?.sign_in_provider;return{claims:M,token:T,authTime:Xn(Ct(M.auth_time)),issuedAtTime:Xn(Ct(M.iat)),expirationTime:Xn(Ct(M.exp)),signInProvider:ie||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Ct(E){return 1e3*Number(E)}function Rt(E){const[_,y,T]=E.split(".");if(void 0===_||void 0===y||void 0===T)return ft("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(y);return M?JSON.parse(M):(ft("Failed to decode base64 JWT payload"),null)}catch(M){return ft("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Jt(E,_){return vi.apply(this,arguments)}function vi(){return(vi=(0,u.Z)(function*(E,_,y=!1){if(y)return _;try{return yield _}catch(T){throw T instanceof $.ZR&&function Ai({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(T)&&E.auth.currentUser===E&&(yield E.auth.signOut()),T}})).apply(this,arguments)}class Kt{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var y;if(_){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(_=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(_);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),T)}iteration(){var _=this;return(0,u.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&_.schedule(!0))}_.schedule()})()}}class $n{constructor(_,y){this.createdAt=_,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xn(this.lastLoginAt),this.creationTime=Xn(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pr(E){return cn.apply(this,arguments)}function cn(){return cn=(0,u.Z)(function*(E){var _;const y=E.auth,T=yield E.getIdToken(),M=yield Jt(E,function Or(E,_){return Di.apply(this,arguments)}(y,{idToken:T}));Y(M?.users.length,y,"internal-error");const L=M.users[0];E._notifyReloadListener(L);const ie=null!==(_=L.providerUserInfo)&&void 0!==_&&_.length?function Wr(E){return E.map(_=>{var{providerId:y}=_,T=(0,te._T)(_,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(L.providerUserInfo):[],me=function Hn(E,_){return[...E.filter(T=>!_.some(M=>M.providerId===T.providerId)),..._]}(E.providerData,ie),Et=!!E.isAnonymous&&!(E.email&&L.passwordHash||me?.length),on={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:me,metadata:new $n(L.createdAt,L.lastLoginAt),isAnonymous:Et};Object.assign(E,on)}),cn.apply(this,arguments)}function Qt(){return(Qt=(0,u.Z)(function*(E){const _=(0,$.m9)(E);yield Pr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(function*(E,_){const y=yield et(E,{},(0,u.Z)(function*(){const T=(0,$.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:M,apiKey:L}=E.config,ie=rn(E,M,"/v1/token",`key=${L}`),me=yield E._getAdditionalHeaders();return me["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(ie,{method:"POST",headers:me,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){Y(_.idToken,"internal-error"),Y(typeof _.idToken<"u","internal-error"),Y(typeof _.refreshToken<"u","internal-error");const y="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Lt(E){const _=Rt(E);return Y(_,"internal-error"),Y(typeof _.exp<"u","internal-error"),Y(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,y)}getToken(_,y=!1){var T=this;return(0,u.Z)(function*(){return Y(!T.accessToken||T.refreshToken,_,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(_,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,y){var T=this;return(0,u.Z)(function*(){const{accessToken:M,refreshToken:L,expiresIn:ie}=yield function us(E,_){return Ri.apply(this,arguments)}(_,y);T.updateTokensAndExpiration(M,L,Number(ie))})()}updateTokensAndExpiration(_,y,T){this.refreshToken=y||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(_,y){const{refreshToken:T,accessToken:M,expirationTime:L}=y,ie=new fi;return T&&(Y("string"==typeof T,"internal-error",{appName:_}),ie.refreshToken=T),M&&(Y("string"==typeof M,"internal-error",{appName:_}),ie.accessToken=M),L&&(Y("number"==typeof L,"internal-error",{appName:_}),ie.expirationTime=L),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new fi,this.toJSON())}_performRefresh(){return ke("not implemented")}}function be(E,_){Y("string"==typeof E||typeof E>"u","internal-error",{appName:_})}class Q{constructor(_){var{uid:y,auth:T,stsTokenManager:M}=_,L=(0,te._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new $n(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(_){var y=this;return(0,u.Z)(function*(){const T=yield Jt(y,y.stsTokenManager.getToken(y.auth,_));return Y(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(_){return function dr(E){return Rs.apply(this,arguments)}(this,_)}reload(){return function Er(E){return Qt.apply(this,arguments)}(this)}_assign(_){this!==_&&(Y(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(y=>Object.assign({},y)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const y=new Q(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(_){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,y=!1){var T=this;return(0,u.Z)(function*(){let M=!1;_.idToken&&_.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(_),M=!0),y&&(yield Pr(T)),yield T.auth._persistUserIfCurrent(T),M&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var _=this;return(0,u.Z)(function*(){const y=yield _.getIdToken();return yield Jt(_,function Qn(E,_){return Fn.apply(this,arguments)}(_.auth,{idToken:y})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,y){var T,M,L,ie,me,Ze,st,Et;const on=null!==(T=y.displayName)&&void 0!==T?T:void 0,Jr=null!==(M=y.email)&&void 0!==M?M:void 0,Ps=null!==(L=y.phoneNumber)&&void 0!==L?L:void 0,Au=null!==(ie=y.photoURL)&&void 0!==ie?ie:void 0,wg=null!==(me=y.tenantId)&&void 0!==me?me:void 0,ah=null!==(Ze=y._redirectEventId)&&void 0!==Ze?Ze:void 0,vc=null!==(st=y.createdAt)&&void 0!==st?st:void 0,Ru=null!==(Et=y.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Eg,emailVerified:vv,isAnonymous:$f,providerData:Wf,stsTokenManager:bv}=y;Y(Eg&&bv,_,"internal-error");const wv=fi.fromJSON(this.name,bv);Y("string"==typeof Eg,_,"internal-error"),be(on,_.name),be(Jr,_.name),Y("boolean"==typeof vv,_,"internal-error"),Y("boolean"==typeof $f,_,"internal-error"),be(Ps,_.name),be(Au,_.name),be(wg,_.name),be(ah,_.name),be(vc,_.name),be(Ru,_.name);const Ev=new Q({uid:Eg,auth:_,email:Jr,emailVerified:vv,displayName:on,isAnonymous:$f,photoURL:Au,phoneNumber:Ps,tenantId:wg,stsTokenManager:wv,createdAt:vc,lastLoginAt:Ru});return Wf&&Array.isArray(Wf)&&(Ev.providerData=Wf.map(G0=>Object.assign({},G0))),ah&&(Ev._redirectEventId=ah),Ev}static _fromIdTokenResponse(_,y,T=!1){return(0,u.Z)(function*(){const M=new fi;M.updateFromServerResponse(y);const L=new Q({uid:y.localId,auth:_,stsTokenManager:M,isAnonymous:T});return yield Pr(L),L})()}}const Ee=new Map;function Ge(E){qe(E instanceof Function,"Expected a class definition");let _=Ee.get(E);return _?(qe(_ instanceof E,"Instance stored in cache mismatched with class"),_):(_=new E,Ee.set(E,_),_)}const yt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,T){var M=this;return(0,u.Z)(function*(){M.storage[y]=T})()}_get(y){var T=this;return(0,u.Z)(function*(){const M=T.storage[y];return void 0===M?null:M})()}_remove(y){var T=this;return(0,u.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return E.type="NONE",E})();function _n(E,_,y){return`firebase:${E}:${_}:${y}`}class K{constructor(_,y,T){this.persistence=_,this.auth=y,this.userKey=T;const{config:M,name:L}=this.auth;this.fullUserKey=_n(this.userKey,M.apiKey,L),this.fullPersistenceKey=_n("persistence",M.apiKey,L),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,u.Z)(function*(){const y=yield _.persistence._get(_.fullUserKey);return y?Q._fromJSON(_.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var y=this;return(0,u.Z)(function*(){if(y.persistence===_)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=_,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,y,T="authUser"){return(0,u.Z)(function*(){if(!y.length)return new K(Ge(yt),_,T);const M=(yield Promise.all(y.map(function(){var st=(0,u.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return st.apply(this,arguments)}}()))).filter(st=>st);let L=M[0]||Ge(yt);const ie=_n(T,_.config.apiKey,_.name);let me=null;for(const st of y)try{const Et=yield st._get(ie);if(Et){const on=Q._fromJSON(_,Et);st!==L&&(me=on),L=st;break}}catch{}const Ze=M.filter(st=>st._shouldAllowMigration);return L._shouldAllowMigration&&Ze.length?(L=Ze[0],me&&(yield L._set(ie,me.toJSON())),yield Promise.all(y.map(function(){var st=(0,u.Z)(function*(Et){if(Et!==L)try{yield Et._remove(ie)}catch{}});return function(Et){return st.apply(this,arguments)}}())),new K(L,_,T)):new K(L,_,T)})()}}function q(E){const _=E.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(se(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(B(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Qe(_))return"Blackberry";if(Nt(_))return"Webos";if(H(_))return"Safari";if((_.includes("chrome/")||F(_))&&!_.includes("edge/"))return"Chrome";if(Re(_))return"Android";{const T=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function B(E=(0,$.z$)()){return/firefox\//i.test(E)}function H(E=(0,$.z$)()){const _=E.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function F(E=(0,$.z$)()){return/crios\//i.test(E)}function se(E=(0,$.z$)()){return/iemobile/i.test(E)}function Re(E=(0,$.z$)()){return/android/i.test(E)}function Qe(E=(0,$.z$)()){return/blackberry/i.test(E)}function Nt(E=(0,$.z$)()){return/webos/i.test(E)}function lt(E=(0,$.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function In(E=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Yt(E=(0,$.z$)()){return lt(E)||Re(E)||Nt(E)||Qe(E)||/windows phone/i.test(E)||se(E)}function va(E,_=[]){let y;switch(E){case"Browser":y=q((0,$.z$)());break;case"Worker":y=`${q((0,$.z$)())}-${E}`;break;default:y=E}const T=_.length?_.join(","):"FirebaseCore-web";return`${y}/JsCore/${N.SDK_VERSION}/${T}`}function uo(){return(uo=(0,u.Z)(function*(E){return(yield De(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ho(E,_){return ks.apply(this,arguments)}function ks(){return(ks=(0,u.Z)(function*(E,_){return De(E,"GET","/v2/recaptchaConfig",he(E,_))})).apply(this,arguments)}function un(E){return void 0!==E&&void 0!==E.getResponse}function Wo(E){return void 0!==E&&void 0!==E.enterprise}class Ja{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function Yc(E){return new Promise((_,y)=>{const T=document.createElement("script");T.setAttribute("src",E),T.onload=_,T.onerror=M=>{const L=xe("internal-error");L.customData=M,y(L)},T.type="text/javascript",T.charset="UTF-8",function Kc(){var E,_;return null!==(_=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==_?_:document}().appendChild(T)})}function Do(E){return`__${E}${Math.floor(1e6*Math.random())}`}class ba{constructor(_){this.type="recaptcha-enterprise",this.auth=pi(_)}verify(_="verify",y=!1){var T=this;return(0,u.Z)(function*(){function L(){return L=(0,u.Z)(function*(me){if(!y){if(null==me.tenantId&&null!=me._agentRecaptchaConfig)return me._agentRecaptchaConfig.siteKey;if(null!=me.tenantId&&void 0!==me._tenantRecaptchaConfigs[me.tenantId])return me._tenantRecaptchaConfigs[me.tenantId].siteKey}return new Promise(function(){var Ze=(0,u.Z)(function*(st,Et){ho(me,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(on=>{if(void 0!==on.recaptchaKey){const Jr=new Ja(on);return null==me.tenantId?me._agentRecaptchaConfig=Jr:me._tenantRecaptchaConfigs[me.tenantId]=Jr,st(Jr.siteKey)}Et(new Error("recaptcha Enterprise site key undefined"))}).catch(on=>{Et(on)})});return function(st,Et){return Ze.apply(this,arguments)}}())}),L.apply(this,arguments)}function ie(me,Ze,st){const Et=window.grecaptcha;Wo(Et)?Et.enterprise.ready(()=>{Et.enterprise.execute(me,{action:_}).then(on=>{Ze(on)}).catch(()=>{Ze("NO_RECAPTCHA")})}):st(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((me,Ze)=>{(function M(me){return L.apply(this,arguments)})(T.auth).then(st=>{if(!y&&Wo(window.grecaptcha))ie(st,me,Ze);else{if(typeof window>"u")return void Ze(new Error("RecaptchaVerifier is only supported in browser"));Yc("https://www.google.com/recaptcha/enterprise.js?render="+st).then(()=>{ie(st,me,Ze)}).catch(Et=>{Ze(Et)})}}).catch(st=>{Ze(st)})})})()}}function Ao(E,_,y){return wa.apply(this,arguments)}function wa(){return(wa=(0,u.Z)(function*(E,_,y,T=!1){const M=new ba(E);let L;try{L=yield M.verify(y)}catch{L=yield M.verify(y,!0)}const ie=Object.assign({},_);return Object.assign(ie,T?{captchaResp:L}:{captchaResponse:L}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}class Ql{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,y){const T=L=>new Promise((ie,me)=>{try{ie(_(L))}catch(Ze){me(Ze)}});T.onAbort=y,this.queue.push(T);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(_){var y=this;return(0,u.Z)(function*(){if(y.auth.currentUser===_)return;const T=[];try{for(const M of y.queue)yield M(_),M.onAbort&&T.push(M.onAbort)}catch(M){T.reverse();for(const L of T)try{L()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class tl{constructor(_,y,T,M){this.app=_,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=T,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ev(this),this.idTokenSubscription=new ev(this),this.beforeStateQueue=new Ql(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(_,y){var T=this;return y&&(this._popupRedirectResolver=Ge(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var M,L;if(!T._deleted&&(T.persistenceManager=yield K.create(T,_),!T._deleted)){if(null!==(M=T._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(L=T.currentUser)||void 0===L?void 0:L.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,u.Z)(function*(){if(_._deleted)return;const y=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||y){if(_.currentUser&&y&&_.currentUser.uid===y.uid)return _._currentUser._assign(y),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(y,!0)}})()}initializeCurrentUser(_){var y=this;return(0,u.Z)(function*(){var T;const M=yield y.assertedPersistence.getCurrentUser();let L=M,ie=!1;if(_&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const me=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,Ze=L?._redirectEventId,st=yield y.tryRedirectSignIn(_);(!me||me===Ze)&&st?.user&&(L=st.user,ie=!0)}if(!L)return y.directlySetCurrentUser(null);if(!L._redirectEventId){if(ie)try{yield y.beforeStateQueue.runMiddleware(L)}catch(me){L=M,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(me))}return L?y.reloadAndSetCurrentUserOrClear(L):y.directlySetCurrentUser(null)}return Y(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===L._redirectEventId?y.directlySetCurrentUser(L):y.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(_){var y=this;return(0,u.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,_,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(_){var y=this;return(0,u.Z)(function*(){try{yield Pr(_)}catch(T){if("auth/network-request-failed"!==T?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function Bn(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var _=this;return(0,u.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var y=this;return(0,u.Z)(function*(){const T=_?(0,$.m9)(_):null;return T&&Y(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(_,y=!1){var T=this;return(0,u.Z)(function*(){if(!T._deleted)return _&&Y(T.tenantId===_.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(_)),T.queue((0,u.Z)(function*(){yield T.directlySetCurrentUser(_),T.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,u.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(Ge(_))}))}initializeRecaptchaConfig(){var _=this;return(0,u.Z)(function*(){const y=yield ho(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new Ja(y);null==_.tenantId?_._agentRecaptchaConfig=T:_._tenantRecaptchaConfigs[_.tenantId]=T,T.emailPasswordEnabled&&new ba(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new $.LL("auth","Firebase",_())}onAuthStateChanged(_,y,T){return this.registerStateListener(this.authStateSubscription,_,y,T)}beforeAuthStateChanged(_,y){return this.beforeStateQueue.pushCallback(_,y)}onIdTokenChanged(_,y,T){return this.registerStateListener(this.idTokenSubscription,_,y,T)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,y){var T=this;return(0,u.Z)(function*(){const M=yield T.getOrInitRedirectPersistenceManager(y);return null===_?M.removeCurrentUser():M.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const T=_&&Ge(_)||y._popupRedirectResolver;Y(T,y,"argument-error"),y.redirectPersistenceManager=yield K.create(y,[Ge(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(_){var y=this;return(0,u.Z)(function*(){var T,M;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===_?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===_?y.redirectUser:null})()}_persistUserIfCurrent(_){var y=this;return(0,u.Z)(function*(){if(_===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,y,T,M){if(this._deleted)return()=>{};const L="function"==typeof y?y:y.next.bind(y),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(ie,this,"internal-error"),ie.then(()=>L(this.currentUser)),"function"==typeof y?_.addObserver(y,T,M):_.addObserver(y)}directlySetCurrentUser(_){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==_&&y._currentUser._stopProactiveRefresh(),_&&y.isProactiveRefreshEnabled&&_._startProactiveRefresh(),y.currentUser=_,_?yield y.assertedPersistence.setCurrentUser(_):yield y.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=va(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,u.Z)(function*(){var y;const T={"X-Client-Version":_.clientVersion};_.app.options.appId&&(T["X-Firebase-gmpid"]=_.app.options.appId);const M=yield null===(y=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();M&&(T["X-Firebase-Client"]=M);const L=yield _._getAppCheckToken();return L&&(T["X-Firebase-AppCheck"]=L),T})()}_getAppCheckToken(){var _=this;return(0,u.Z)(function*(){var y;const T=yield null===(y=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return T?.error&&function vt(E,..._){Pe.logLevel<=ue.in.WARN&&Pe.warn(`Auth (${N.SDK_VERSION}): ${E}`,..._)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function pi(E){return(0,$.m9)(E)}class ev{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,$.ne)(y=>this.observer=y)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mf(E,_,y){const T=pi(E);Y(T._canInitEmulator,T,"emulator-config-failed"),Y(/^https?:\/\//.test(_),T,"invalid-emulator-scheme");const M=!!y?.disableWarnings,L=Kr(_),{host:ie,port:me}=function Ea(E){const _=Kr(E),y=/(\/\/)?([^?#/]+)/.exec(E.substr(_.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(T);if(M){const L=M[1];return{host:L,port:nl(T.substr(L.length+1))}}{const[L,ie]=T.split(":");return{host:L,port:nl(ie)}}}(_);T.config.emulator={url:`${L}//${ie}${null===me?"":`:${me}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:ie,port:me,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Xm(){function E(){const _=document.createElement("p"),y=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function Kr(E){const _=E.indexOf(":");return _<0?"":E.substr(0,_+1)}function nl(E){if(!E)return null;const _=Number(E);return isNaN(_)?null:_}class Xl{constructor(_,y){this.providerId=_,this.signInMethod=y}toJSON(){return ke("not implemented")}_getIdTokenResponse(_){return ke("not implemented")}_linkToIdToken(_,y){return ke("not implemented")}_getReauthenticationResolver(_){return ke("not implemented")}}function Ad(E,_){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:resetPassword",he(E,_))})).apply(this,arguments)}function Jl(E,_){return ec.apply(this,arguments)}function ec(){return(ec=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Yr(){return(Yr=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:update",he(E,_))})).apply(this,arguments)}function Zc(E,_){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signInWithPassword",he(E,_))})).apply(this,arguments)}function Qc(E,_){return kd.apply(this,arguments)}function kd(){return(kd=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:sendOobCode",he(E,_))})).apply(this,arguments)}function Jc(){return(Jc=(0,u.Z)(function*(E,_){return Qc(E,_)})).apply(this,arguments)}function eu(E,_){return il.apply(this,arguments)}function il(){return(il=(0,u.Z)(function*(E,_){return Qc(E,_)})).apply(this,arguments)}function Md(E,_){return sn.apply(this,arguments)}function sn(){return(sn=(0,u.Z)(function*(E,_){return Qc(E,_)})).apply(this,arguments)}function hr(){return(hr=(0,u.Z)(function*(E,_){return Qc(E,_)})).apply(this,arguments)}function fr(){return(fr=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signInWithEmailLink",he(E,_))})).apply(this,arguments)}function Od(){return(Od=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signInWithEmailLink",he(E,_))})).apply(this,arguments)}class Ia extends Xl{constructor(_,y,T,M=null){super("password",T),this._email=_,this._password=y,this._tenantId=M}static _fromEmailAndPassword(_,y){return new Ia(_,y,"password")}static _fromEmailAndCode(_,y,T=null){return new Ia(_,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(_){var y=this;return(0,u.Z)(function*(){var T;switch(y.signInMethod){case"password":const M={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=_._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const L=yield Ao(_,M,"signInWithPassword");return Zc(_,L)}return Zc(_,M).catch(function(){var L=(0,u.Z)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const me=yield Ao(_,M,"signInWithPassword");return Zc(_,me)}return Promise.reject(ie)});return function(ie){return L.apply(this,arguments)}}());case"emailLink":return function rl(E,_){return fr.apply(this,arguments)}(_,{email:y._email,oobCode:y._password});default:le(_,"internal-error")}})()}_linkToIdToken(_,y){var T=this;return(0,u.Z)(function*(){switch(T.signInMethod){case"password":return Jl(_,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Jm(E,_){return Od.apply(this,arguments)}(_,{idToken:y,email:T._email,oobCode:T._password});default:le(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function qo(E,_){return sl.apply(this,arguments)}function sl(){return(sl=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signInWithIdp",he(E,_))})).apply(this,arguments)}class tt extends Xl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const y=new tt(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(y.idToken=_.idToken),_.accessToken&&(y.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(y.nonce=_.nonce),_.pendingToken&&(y.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(y.accessToken=_.oauthToken,y.secret=_.oauthTokenSecret):le("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_,{providerId:T,signInMethod:M}=y,L=(0,te._T)(y,["providerId","signInMethod"]);if(!T||!M)return null;const ie=new tt(T,M);return ie.idToken=L.idToken||void 0,ie.accessToken=L.accessToken||void 0,ie.secret=L.secret,ie.nonce=L.nonce,ie.pendingToken=L.pendingToken||null,ie}_getIdTokenResponse(_){return qo(_,this.buildRequest())}_linkToIdToken(_,y){const T=this.buildRequest();return T.idToken=y,qo(_,T)}_getReauthenticationResolver(_){const y=this.buildRequest();return y.autoCreate=!1,qo(_,y)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),_.postBody=(0,$.xO)(y)}return _}}function Wn(){return(Wn=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:sendVerificationCode",he(E,_))})).apply(this,arguments)}function Ro(){return(Ro=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signInWithPhoneNumber",he(E,_))})).apply(this,arguments)}function Ca(){return(Ca=(0,u.Z)(function*(E,_){const y=yield mn(E,"POST","/v1/accounts:signInWithPhoneNumber",he(E,_));if(y.temporaryProof)throw En(E,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Jn={USER_NOT_FOUND:"user-not-found"};function Ko(){return(Ko=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signInWithPhoneNumber",he(E,Object.assign(Object.assign({},_),{operation:"REAUTH"})),Jn)})).apply(this,arguments)}class kt extends Xl{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,y){return new kt({verificationId:_,verificationCode:y})}static _fromTokenResponse(_,y){return new kt({phoneNumber:_,temporaryProof:y})}_getIdTokenResponse(_){return function ds(E,_){return Ro.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,y){return function Nr(E,_){return Ca.apply(this,arguments)}(_,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function ko(E,_){return Ko.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:y,verificationId:T,verificationCode:M}=this.params;return _&&y?{temporaryProof:_,phoneNumber:y}:{sessionInfo:T,code:M}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:y,verificationCode:T,phoneNumber:M,temporaryProof:L}=_;return T||y||M||L?new kt({verificationId:y,verificationCode:T,phoneNumber:M,temporaryProof:L}):null}}class hs{constructor(_){var y,T,M,L,ie,me;const Ze=(0,$.zd)((0,$.pd)(_)),st=null!==(y=Ze.apiKey)&&void 0!==y?y:null,Et=null!==(T=Ze.oobCode)&&void 0!==T?T:null,on=function Ws(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ze.mode)&&void 0!==M?M:null);Y(st&&Et&&on,"argument-error"),this.apiKey=st,this.operation=on,this.code=Et,this.continueUrl=null!==(L=Ze.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ie=Ze.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(me=Ze.tenantId)&&void 0!==me?me:null}static parseLink(_){const y=function gf(E){const _=(0,$.zd)((0,$.pd)(E)).link,y=_?(0,$.zd)((0,$.pd)(_)).deep_link_id:null,T=(0,$.zd)((0,$.pd)(E)).deep_link_id;return(T?(0,$.zd)((0,$.pd)(T)).link:null)||T||y||_||E}(_);try{return new hs(y)}catch{return null}}}let ol=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(y,T){return Ia._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const M=hs.parseLink(T);return Y(M,"argument-error"),Ia._fromEmailAndCode(y,M.code,M.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class fs{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Fr extends fs{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Yo extends Fr{static credentialFromJSON(_){const y="string"==typeof _?JSON.parse(_):_;return Y("providerId"in y&&"signInMethod"in y,"argument-error"),tt._fromParams(y)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return Y(_.idToken||_.accessToken,"argument-error"),tt._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Yo.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Yo.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:M,pendingToken:L,nonce:ie,providerId:me}=_;if(!T&&!M&&!y&&!L||!me)return null;try{return new Yo(me)._credential({idToken:y,accessToken:T,nonce:ie,pendingToken:L})}catch{return null}}}let tu=(()=>{class E extends Fr{constructor(){super("facebook.com")}static credential(y){return tt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ta=(()=>{class E extends Fr{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return tt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:M}=y;if(!T&&!M)return null;try{return E.credential(T,M)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),qs=(()=>{class E extends Fr{constructor(){super("github.com")}static credential(y){return tt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class ps extends Xl{constructor(_,y){super(_,_),this.pendingToken=y}_getIdTokenResponse(_){return qo(_,this.buildRequest())}_linkToIdToken(_,y){const T=this.buildRequest();return T.idToken=y,qo(_,T)}_getReauthenticationResolver(_){const y=this.buildRequest();return y.autoCreate=!1,qo(_,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_,{providerId:T,signInMethod:M,pendingToken:L}=y;return T&&M&&L&&T===M?new ps(T,L):null}static _create(_,y){return new ps(_,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pd extends fs{constructor(_){Y(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Pd.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Pd.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const y=ps.fromJSON(_);return Y(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:y,providerId:T}=_;if(!y||!T)return null;try{return ps._create(T,y)}catch{return null}}}let Nd=(()=>{class E extends Fr{constructor(){super("twitter.com")}static credential(y,T){return tt._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:M}=y;if(!T||!M)return null;try{return E.credential(T,M)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function al(E,_){return pr.apply(this,arguments)}function pr(){return(pr=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signUp",he(E,_))})).apply(this,arguments)}class Cr{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,y,T,M=!1){return(0,u.Z)(function*(){const L=yield Q._fromIdTokenResponse(_,T,M),ie=Zo(T);return new Cr({user:L,providerId:ie,_tokenResponse:T,operationType:y})})()}static _forOperation(_,y,T){return(0,u.Z)(function*(){yield _._updateTokensIfNecessary(T,!0);const M=Zo(T);return new Cr({user:_,providerId:M,_tokenResponse:T,operationType:y})})()}}function Zo(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Sa(E){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(E){var _;const y=pi(E);if(yield y._initializationPromise,null!==(_=y.currentUser)&&void 0!==_&&_.isAnonymous)return new Cr({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield al(y,{returnSecureToken:!0}),M=yield Cr._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class _f extends $.ZR{constructor(_,y,T,M){var L;super(y.code,y.message),this.operationType=T,this.user=M,Object.setPrototypeOf(this,_f.prototype),this.customData={appName:_.name,tenantId:null!==(L=_.tenantId)&&void 0!==L?L:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(_,y,T,M){return new _f(_,y,T,M)}}function Tr(E,_,y,T){return("reauthenticate"===_?y._getReauthenticationResolver(E):y._getIdTokenResponse(E)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?_f._fromErrorAndOperation(E,L,_,T):L})}function Sr(E){return new Set(E.map(({providerId:_})=>_).filter(_=>!!_))}function Fd(E,_){return Mo.apply(this,arguments)}function Mo(){return Mo=(0,u.Z)(function*(E,_){const y=(0,$.m9)(E);yield xa(!0,y,_);const{providerUserInfo:T}=yield function gn(E,_){return oi.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[_]}),M=Sr(T||[]);return y.providerData=y.providerData.filter(L=>M.has(L.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),Mo.apply(this,arguments)}function ms(E,_){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,u.Z)(function*(E,_,y=!1){const T=yield Jt(E,_._linkToIdToken(E.auth,yield E.getIdToken()),y);return Cr._forOperation(E,"link",T)})).apply(this,arguments)}function xa(E,_,y){return tc.apply(this,arguments)}function tc(){return(tc=(0,u.Z)(function*(E,_,y){yield Pr(_);const M=!1===E?"provider-already-linked":"no-such-provider";Y(Sr(_.providerData).has(y)===E,_.auth,M)})).apply(this,arguments)}function yf(E,_){return eg.apply(this,arguments)}function eg(){return(eg=(0,u.Z)(function*(E,_,y=!1){const{auth:T}=E,M="reauthenticate";try{const L=yield Jt(E,Tr(T,M,_,E),y);Y(L.idToken,T,"internal-error");const ie=Rt(L.idToken);Y(ie,T,"internal-error");const{sub:me}=ie;return Y(E.uid===me,T,"user-mismatch"),Cr._forOperation(E,M,L)}catch(L){throw"auth/user-not-found"===L?.code&&le(T,"user-mismatch"),L}})).apply(this,arguments)}function Ld(E,_){return iu.apply(this,arguments)}function iu(){return(iu=(0,u.Z)(function*(E,_,y=!1){const T="signIn",M=yield Tr(E,T,_),L=yield Cr._fromIdTokenResponse(E,T,M);return y||(yield E._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Ud(E,_){return vf.apply(this,arguments)}function vf(){return(vf=(0,u.Z)(function*(E,_){return Ld(pi(E),_)})).apply(this,arguments)}function tg(E,_){return ng.apply(this,arguments)}function ng(){return(ng=(0,u.Z)(function*(E,_){const y=(0,$.m9)(E);return yield xa(!1,y,_.providerId),ms(y,_)})).apply(this,arguments)}function ai(E,_){return ig.apply(this,arguments)}function ig(){return(ig=(0,u.Z)(function*(E,_){return yf((0,$.m9)(E),_)})).apply(this,arguments)}function rg(){return(rg=(0,u.Z)(function*(E,_){return mn(E,"POST","/v1/accounts:signInWithCustomToken",he(E,_))})).apply(this,arguments)}function U0(E,_){return ru.apply(this,arguments)}function ru(){return ru=(0,u.Z)(function*(E,_){const y=pi(E),T=yield function L0(E,_){return rg.apply(this,arguments)}(y,{token:_,returnSecureToken:!0}),M=yield Cr._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(M.user),M}),ru.apply(this,arguments)}class Ks{constructor(_,y){this.factorId=_,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(_,y){return"phoneInfo"in y?sg._fromServerResponse(_,y):"totpInfo"in y?ll._fromServerResponse(_,y):le(_,"internal-error")}}class sg extends Ks{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,y){return new sg(y)}}class ll extends Ks{constructor(_){super("totp",_)}static _fromServerResponse(_,y){return new ll(y)}}function cl(E,_,y){var T;Y((null===(T=y.url)||void 0===T?void 0:T.length)>0,E,"invalid-continue-uri"),Y(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),_.continueUrl=y.url,_.dynamicLinkDomain=y.dynamicLinkDomain,_.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Y(y.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),_.iOSBundleId=y.iOS.bundleId),y.android&&(Y(y.android.packageName.length>0,E,"missing-android-pkg-name"),_.androidInstallApp=y.android.installApp,_.androidMinimumVersionCode=y.android.minimumVersion,_.androidPackageName=y.android.packageName)}function iv(E,_,y){return og.apply(this,arguments)}function og(){return og=(0,u.Z)(function*(E,_,y){var T;const M=pi(E),L={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const ie=yield Ao(M,L,"getOobCode",!0);y&&cl(M,ie,y),yield eu(M,ie)}else y&&cl(M,L,y),yield eu(M,L).catch(function(){var ie=(0,u.Z)(function*(me){if("auth/missing-recaptcha-token"!==me.code)return Promise.reject(me);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ze=yield Ao(M,L,"getOobCode",!0);y&&cl(M,Ze,y),yield eu(M,Ze)}});return function(me){return ie.apply(this,arguments)}}())}),og.apply(this,arguments)}function Vd(E,_,y){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,u.Z)(function*(E,_,y){yield Ad((0,$.m9)(E),{oobCode:_,newPassword:y})})).apply(this,arguments)}function Qo(E,_){return su.apply(this,arguments)}function su(){return su=(0,u.Z)(function*(E,_){yield function nv(E,_){return Yr.apply(this,arguments)}((0,$.m9)(E),{oobCode:_})}),su.apply(this,arguments)}function Ys(E,_){return ki.apply(this,arguments)}function ki(){return(ki=(0,u.Z)(function*(E,_){const y=(0,$.m9)(E),T=yield Ad(y,{oobCode:_}),M=T.requestType;switch(Y(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(T.mfaInfo,y,"internal-error");default:Y(T.email,y,"internal-error")}let L=null;return T.mfaInfo&&(L=Ks._fromServerResponse(pi(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:L},operation:M}})).apply(this,arguments)}function nc(E,_){return xr.apply(this,arguments)}function xr(){return(xr=(0,u.Z)(function*(E,_){const{data:y}=yield Ys((0,$.m9)(E),_);return y.email})).apply(this,arguments)}function ic(E,_,y){return rc.apply(this,arguments)}function rc(){return rc=(0,u.Z)(function*(E,_,y){var T;const M=pi(E),L={returnSecureToken:!0,email:_,password:y,clientType:"CLIENT_TYPE_WEB"};let ie;if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const st=yield Ao(M,L,"signUpPassword");ie=al(M,st)}else ie=al(M,L).catch(function(){var st=(0,u.Z)(function*(Et){if("auth/missing-recaptcha-token"===Et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const on=yield Ao(M,L,"signUpPassword");return al(M,on)}return Promise.reject(Et)});return function(Et){return st.apply(this,arguments)}}());const me=yield ie.catch(st=>Promise.reject(st)),Ze=yield Cr._fromIdTokenResponse(M,"signIn",me);return yield M._updateCurrentUser(Ze.user),Ze}),rc.apply(this,arguments)}function Bd(E,_,y){return Ud((0,$.m9)(E),ol.credential(_,y))}function bf(E,_,y){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,u.Z)(function*(E,_,y){var T;const M=pi(E),L={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function ie(me,Ze){Y(Ze.handleCodeInApp,M,"argument-error"),Ze&&cl(M,me,Ze)}if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const me=yield Ao(M,L,"getOobCode",!0);ie(me,y),yield Md(M,me)}else ie(L,y),yield Md(M,L).catch(function(){var me=(0,u.Z)(function*(Ze){if("auth/missing-recaptcha-token"!==Ze.code)return Promise.reject(Ze);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const st=yield Ao(M,L,"getOobCode",!0);ie(st,y),yield Md(M,st)}});return function(Ze){return me.apply(this,arguments)}}())}),Xo.apply(this,arguments)}function Hd(E,_){const y=hs.parseLink(_);return"EMAIL_SIGNIN"===y?.operation}function wf(E,_,y){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E),M=ol.credentialWithLink(_,y||wt());return Y(M._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Ud(T,M)})).apply(this,arguments)}function sc(){return(sc=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:createAuthUri",he(E,_))})).apply(this,arguments)}function lg(E,_){return Da.apply(this,arguments)}function Da(){return Da=(0,u.Z)(function*(E,_){const T={identifier:_,continueUri:hn()?wt():"http://localhost"},{signinMethods:M}=yield function ag(E,_){return sc.apply(this,arguments)}((0,$.m9)(E),T);return M||[]}),Da.apply(this,arguments)}function oc(E,_){return fo.apply(this,arguments)}function fo(){return fo=(0,u.Z)(function*(E,_){const y=(0,$.m9)(E),M={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};_&&cl(y.auth,M,_);const{email:L}=yield function Xc(E,_){return Jc.apply(this,arguments)}(y.auth,M);L!==E.email&&(yield E.reload())}),fo.apply(this,arguments)}function jd(E,_,y){return ou.apply(this,arguments)}function ou(){return ou=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:_};y&&cl(T.auth,L,y);const{email:ie}=yield function Gi(E,_){return hr.apply(this,arguments)}(T.auth,L);ie!==E.email&&(yield E.reload())}),ou.apply(this,arguments)}function If(){return(If=(0,u.Z)(function*(E,_){return De(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function rv(E,_){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,u.Z)(function*(E,{displayName:_,photoURL:y}){if(void 0===_&&void 0===y)return;const T=(0,$.m9)(E),L={idToken:yield T.getIdToken(),displayName:_,photoUrl:y,returnSecureToken:!0},ie=yield Jt(T,function Ef(E,_){return If.apply(this,arguments)}(T.auth,L));T.displayName=ie.displayName||null,T.photoURL=ie.photoUrl||null;const me=T.providerData.find(({providerId:Ze})=>"password"===Ze);me&&(me.displayName=T.displayName,me.photoURL=T.photoURL),yield T._updateTokensIfNecessary(ie)}),Cf.apply(this,arguments)}function cg(E,_){return ac((0,$.m9)(E),_,null)}function Tf(E,_){return ac((0,$.m9)(E),null,_)}function ac(E,_,y){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,u.Z)(function*(E,_,y){const{auth:T}=E,L={idToken:yield E.getIdToken(),returnSecureToken:!0};_&&(L.email=_),y&&(L.password=y);const ie=yield Jt(E,Jl(T,L));yield E._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class lc{constructor(_,y,T={}){this.isNewUser=_,this.providerId=y,this.profile=T}}class xf extends lc{constructor(_,y,T,M){super(_,y,T),this.username=M}}class lu extends lc{constructor(_,y){super(_,"facebook.com",y)}}class zd extends xf{constructor(_,y){super(_,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Df extends lc{constructor(_,y){super(_,"google.com",y)}}class cu extends xf{constructor(_,y,T){super(_,"twitter.com",y,T)}}function cc(E){const{user:_,_tokenResponse:y}=E;return _.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function au(E){var _,y;if(!E)return null;const{providerId:T}=E,M=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},L=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!T&&E?.idToken){const ie=null===(y=null===(_=Rt(E.idToken))||void 0===_?void 0:_.firebase)||void 0===y?void 0:y.sign_in_provider;if(ie)return new lc(L,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!T)return null;switch(T){case"facebook.com":return new lu(L,M);case"github.com":return new zd(L,M);case"google.com":return new Df(L,M);case"twitter.com":return new cu(L,M,E.screenName||null);case"custom":case"anonymous":return new lc(L,null);default:return new lc(L,T,M)}}(y)}class Zs{constructor(_,y,T){this.type=_,this.credential=y,this.auth=T}static _fromIdtoken(_,y){return new Zs("enroll",_,y)}static _fromMfaPendingCredential(_){return new Zs("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var y,T;if(_?.multiFactorSession){if(null!==(y=_.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Zs._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(T=_.multiFactorSession)&&void 0!==T&&T.idToken)return Zs._fromIdtoken(_.multiFactorSession.idToken)}return null}}class ul{constructor(_,y,T){this.session=_,this.hints=y,this.signInResolver=T}static _fromError(_,y){const T=pi(_),M=y.customData._serverResponse,L=(M.mfaInfo||[]).map(me=>Ks._fromServerResponse(T,me));Y(M.mfaPendingCredential,T,"internal-error");const ie=Zs._fromMfaPendingCredential(M.mfaPendingCredential);return new ul(ie,L,function(){var me=(0,u.Z)(function*(Ze){const st=yield Ze._process(T,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const Et=Object.assign(Object.assign({},M),{idToken:st.idToken,refreshToken:st.refreshToken});switch(y.operationType){case"signIn":const on=yield Cr._fromIdTokenResponse(T,y.operationType,Et);return yield T._updateCurrentUser(on.user),on;case"reauthenticate":return Y(y.user,T,"internal-error"),Cr._forOperation(y.user,y.operationType,Et);default:le(T,"internal-error")}});return function(Ze){return me.apply(this,arguments)}}())}resolveSignIn(_){var y=this;return(0,u.Z)(function*(){return y.signInResolver(_)})()}}function dc(E,_){var y;const T=(0,$.m9)(E),M=_;return Y(_.customData.operationType,T,"argument-error"),Y(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),ul._fromError(T,M)}class hu{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>Ks._fromServerResponse(_.auth,T)))})}static _fromUser(_){return new hu(_)}getSession(){var _=this;return(0,u.Z)(function*(){return Zs._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,y){var T=this;return(0,u.Z)(function*(){const M=_,L=yield T.getSession(),ie=yield Jt(T.user,M._process(T.user.auth,L,y));return yield T.user._updateTokensIfNecessary(ie),T.user.reload()})()}unenroll(_){var y=this;return(0,u.Z)(function*(){const T="string"==typeof _?_:_.uid,M=yield y.user.getIdToken();try{const L=yield Jt(y.user,function Rf(E,_){return De(E,"POST","/v2/accounts/mfaEnrollment:withdraw",he(E,_))}(y.user.auth,{idToken:M,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ie})=>ie!==T),yield y.user._updateTokensIfNecessary(L),yield y.user.reload()}catch(L){throw L}})()}}const xn=new WeakMap;function dl(E){const _=(0,$.m9)(E);return xn.has(_)||xn.set(_,hu._fromUser(_)),xn.get(_)}const po="__sak";class Lr{constructor(_,y){this.storageRetriever=_,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(po,"1"),this.storage.removeItem(po),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,y){return this.storage.setItem(_,JSON.stringify(y)),Promise.resolve()}_get(_){const y=this.storage.getItem(_);return Promise.resolve(y?JSON.parse(y):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kd=(()=>{class E extends Lr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function lv(){const E=(0,$.z$)();return H(E)||lt(E)}()&&function qr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const M=this.storage.getItem(T),L=this.localCache[T];M!==L&&y(T,L,M)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((me,Ze,st)=>{this.notifyListeners(me,st)});const M=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const me=this.storage.getItem(M);if(y.newValue!==me)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!T)return}const L=()=>{const me=this.storage.getItem(M);!T&&this.localCache[M]===me||this.notifyListeners(M,me)},ie=this.storage.getItem(M);!function Ln(){return(0,$.w1)()&&10===document.documentMode}()||ie===y.newValue||y.newValue===y.oldValue?L():setTimeout(L,10)}notifyListeners(y,T){this.localCache[y]=T;const M=this.listeners[y];if(M)for(const L of Array.from(M))L(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var M=()=>super._set,L=this;return(0,u.Z)(function*(){yield M().call(L,y,T),L.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,M=this;return(0,u.Z)(function*(){const L=yield T().call(M,y);return M.localCache[y]=JSON.stringify(L),L})()}_remove(y){var T=()=>super._remove,M=this;return(0,u.Z)(function*(){yield T().call(M,y),delete M.localCache[y]})()}}return E.type="LOCAL",E})(),fu=(()=>{class E extends Lr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return E.type="SESSION",E})();let hg=(()=>{class E{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(L=>L.isListeningto(y));if(T)return T;const M=new E(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,u.Z)(function*(){const M=y,{eventId:L,eventType:ie,data:me}=M.data,Ze=T.handlersMap[ie];if(!Ze?.size)return;M.ports[0].postMessage({status:"ack",eventId:L,eventType:ie});const st=Array.from(Ze).map(function(){var on=(0,u.Z)(function*(Jr){return Jr(M.origin,me)});return function(Jr){return on.apply(this,arguments)}}()),Et=yield function Ra(E){return Promise.all(E.map(function(){var _=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return _.apply(this,arguments)}}()))}(st);M.ports[0].postMessage({status:"done",eventId:L,eventType:ie,response:Et})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function ka(E="",_=10){let y="";for(let T=0;T<_;T++)y+=Math.floor(10*Math.random());return E+y}class cv{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,y,T=50){var M=this;return(0,u.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ie,me;return new Promise((Ze,st)=>{const Et=ka("",20);L.port1.start();const on=setTimeout(()=>{st(new Error("unsupported_event"))},T);me={messageChannel:L,onMessage(Jr){const Ps=Jr;if(Ps.data.eventId===Et)switch(Ps.data.status){case"ack":clearTimeout(on),ie=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),Ze(Ps.data.response);break;default:clearTimeout(on),clearTimeout(ie),st(new Error("invalid_response"))}}},M.handlers.add(me),L.port1.addEventListener("message",me.onMessage),M.target.postMessage({eventType:_,eventId:Et,data:y},[L.port2])}).finally(()=>{me&&M.removeMessageHandler(me)})})()}}function qi(){return window}function Mf(){return typeof qi().WorkerGlobalScope<"u"&&"function"==typeof qi().importScripts}function pu(){return(pu=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ki="firebaseLocalStorageDb",Oi="firebaseLocalStorage",Jo="fbase_key";class Ma{constructor(_){this.request=_}toPromise(){return new Promise((_,y)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Yd(E,_){return E.transaction([Oi],_?"readwrite":"readonly").objectStore(Oi)}function Of(){const E=indexedDB.open(Ki,1);return new Promise((_,y)=>{E.addEventListener("error",()=>{y(E.error)}),E.addEventListener("upgradeneeded",()=>{const T=E.result;try{T.createObjectStore(Oi,{keyPath:Jo})}catch(M){y(M)}}),E.addEventListener("success",(0,u.Z)(function*(){const T=E.result;T.objectStoreNames.contains(Oi)?_(T):(T.close(),yield function pg(){const E=indexedDB.deleteDatabase(Ki);return new Ma(E).toPromise()}(),_(yield Of()))}))})}function Pf(E,_,y){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,u.Z)(function*(E,_,y){const T=Yd(E,!0).put({[Jo]:_,value:y});return new Ma(T).toPromise()})).apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(E,_){const y=Yd(E,!1).get(_),T=yield new Ma(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Zd(E,_){const y=Yd(E,!0).delete(_);return new Ma(y).toPromise()}const mo=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield Of()),y.db})()}_withRetries(y){var T=this;return(0,u.Z)(function*(){let M=0;for(;;)try{const L=yield T._openDb();return yield y(L)}catch(L){if(M++>3)throw L;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return Mf()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=hg._getInstance(function mu(){return Mf()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,u.Z)(function*(M,L){return{keyProcessed:(yield y._poll()).includes(L.key)}});return function(M,L){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,u.Z)(function*(M,L){return["keyChanged"]});return function(M,L){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var T,M;if(y.activeServiceWorker=yield function Pt(){return pu.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new cv(y.activeServiceWorker);const L=yield y.sender._send("ping",{},800);L&&null!==(T=L[0])&&void 0!==T&&T.fulfilled&&null!==(M=L[0])&&void 0!==M&&M.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,u.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function uv(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Of();return yield Pf(y,po,"1"),yield Zd(y,po),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,u.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var M=this;return(0,u.Z)(function*(){return M._withPendingWrite((0,u.Z)(function*(){return yield M._withRetries(L=>Pf(L,y,T)),M.localCache[y]=T,M.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,u.Z)(function*(){const M=yield T._withRetries(L=>function dn(E,_){return gs.apply(this,arguments)}(L,y));return T.localCache[y]=M,M})()}_remove(y){var T=this;return(0,u.Z)(function*(){return T._withPendingWrite((0,u.Z)(function*(){return yield T._withRetries(M=>Zd(M,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const T=yield y._withRetries(ie=>{const me=Yd(ie,!1).getAll();return new Ma(me).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const M=[],L=new Set;for(const{fbase_key:ie,value:me}of T)L.add(ie),JSON.stringify(y.localCache[ie])!==JSON.stringify(me)&&(y.notifyListeners(ie,me),M.push(ie));for(const ie of Object.keys(y.localCache))y.localCache[ie]&&!L.has(ie)&&(y.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(y,T){this.localCache[y]=T;const M=this.listeners[y];if(M)for(const L of Array.from(M))L(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),gr=1e12;class go{constructor(_){this.auth=_,this.counter=gr,this._widgets=new Map}render(_,y){const T=this.counter;return this._widgets.set(T,new Ff(_,this.auth.name,y||{})),this.counter++,T}reset(_){var y;const T=_||gr;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(_){var y;return(null===(y=this._widgets.get(_||gr))||void 0===y?void 0:y.getResponse())||""}execute(_){var y=this;return(0,u.Z)(function*(){var T;return null===(T=y._widgets.get(_||gr))||void 0===T||T.execute(),""})()}}class Ff{constructor(_,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof _?document.getElementById(_):_;Y(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Oa(E){const _=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<E;T++)_.push(y.charAt(Math.floor(62*Math.random())));return _.join("")}(50);const{callback:_,"expired-callback":y}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _s=Do("rcb"),gg=new An(3e4,6e4);class _u{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=qi().grecaptcha)||void 0===_||!_.render)}load(_,y=""){return Y(function dv(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(y),_,"argument-error"),this.shouldResolveImmediately(y)&&un(qi().grecaptcha)?Promise.resolve(qi().grecaptcha):new Promise((T,M)=>{const L=qi().setTimeout(()=>{M(xe(_,"network-request-failed"))},gg.get());qi()[_s]=()=>{qi().clearTimeout(L),delete qi()[_s];const me=qi().grecaptcha;if(!me||!un(me))return void M(xe(_,"internal-error"));const Ze=me.render;me.render=(st,Et)=>{const on=Ze(st,Et);return this.counter++,on},this.hostLanguage=y,T(me)},Yc(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:_s,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(L),M(xe(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var y;return!(null===(y=qi().grecaptcha)||void 0===y||!y.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class yu{load(_){return(0,u.Z)(function*(){return new go(_)})()}clearedOneInstance(){}}const eh="recaptcha",th={theme:"light",type:"image"};class Lf{constructor(_,y=Object.assign({},th),T){this.parameters=y,this.type=eh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pi(T),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof _?document.getElementById(_):_;Y(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new yu:new _u,this.validateStartingState()}verify(){var _=this;return(0,u.Z)(function*(){_.assertNotDestroyed();const y=yield _.render(),T=_.getAssertedRecaptcha();return T.getResponse(y)||new Promise(L=>{const ie=me=>{me&&(_.tokenChangeListeners.delete(ie),L(me))};_.tokenChangeListeners.add(ie),_.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof _)_(y);else if("string"==typeof _){const T=qi()[_];"function"==typeof T&&T(y)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,u.Z)(function*(){if(yield _.init(),!_.widgetId){let y=_.container;if(!_.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}_.widgetId=_.getAssertedRecaptcha().render(y,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,u.Z)(function*(){Y(hn()&&!Mf(),_.auth,"internal-error"),yield function Uf(){let E=null;return new Promise(_=>{"complete"!==document.readyState?(E=()=>_(),window.addEventListener("load",E)):_()}).catch(_=>{throw E&&window.removeEventListener("load",E),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const y=yield function xo(E){return uo.apply(this,arguments)}(_.auth);Y(y,_.auth,"internal-error"),_.parameters.sitekey=y})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class nh{constructor(_,y){this.verificationId=_,this.onConfirmation=y}confirm(_){const y=kt._fromVerification(this.verificationId,_);return this.onConfirmation(y)}}function li(E,_,y){return zt.apply(this,arguments)}function zt(){return(zt=(0,u.Z)(function*(E,_,y){const T=pi(E),M=yield ea(T,_,(0,$.m9)(y));return new nh(M,L=>Ud(T,L))})).apply(this,arguments)}function pt(E,_,y){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E);yield xa(!1,T,"phone");const M=yield ea(T.auth,_,(0,$.m9)(y));return new nh(M,L=>tg(T,L))})).apply(this,arguments)}function On(E,_,y){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E),M=yield ea(T.auth,_,(0,$.m9)(y));return new nh(M,L=>ai(T,L))})).apply(this,arguments)}function ea(E,_,y){return jn.apply(this,arguments)}function jn(){return jn=(0,u.Z)(function*(E,_,y){var T;const M=yield y.verify();try{let L;if(Y("string"==typeof M,E,"argument-error"),Y(y.type===eh,E,"argument-error"),L="string"==typeof _?{phoneNumber:_}:_,"session"in L){const ie=L.session;if("phoneNumber"in L)return Y("enroll"===ie.type,E,"internal-error"),(yield function Af(E,_){return De(E,"POST","/v2/accounts/mfaEnrollment:start",he(E,_))}(E,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Y("signin"===ie.type,E,"internal-error");const me=(null===(T=L.multiFactorHint)||void 0===T?void 0:T.uid)||L.multiFactorUid;return Y(me,E,"missing-multi-factor-info"),(yield function Nf(E,_){return De(E,"POST","/v2/accounts/mfaSignIn:start",he(E,_))}(E,{mfaPendingCredential:ie.credential,mfaEnrollmentId:me,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield function Bt(E,_){return Wn.apply(this,arguments)}(E,{phoneNumber:L.phoneNumber,recaptchaToken:M});return ie}}finally{y._reset()}}),jn.apply(this,arguments)}function ot(E,_){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,u.Z)(function*(E,_){yield ms((0,$.m9)(E),_)})).apply(this,arguments)}let ci=(()=>{class E{constructor(y){this.providerId=E.PROVIDER_ID,this.auth=pi(y)}verifyPhoneNumber(y,T){return ea(this.auth,y,(0,$.m9)(T))}static credential(y,T){return kt._fromVerification(y,T)}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:M}=y;return T&&M?kt._fromTokenResponse(T,M):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Os(E,_){return _?Ge(_):(Y(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class pc extends Xl{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return qo(_,this._buildIdpRequest())}_linkToIdToken(_,y){return qo(_,this._buildIdpRequest(y))}_getReauthenticationResolver(_){return qo(_,this._buildIdpRequest())}_buildIdpRequest(_){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(y.idToken=_),y}}function _o(E){return Ld(E.auth,new pc(E),E.bypassAuthState)}function mc(E){const{auth:_,user:y}=E;return Y(y,_,"internal-error"),yf(y,new pc(E),E.bypassAuthState)}function Pi(E){return qn.apply(this,arguments)}function qn(){return(qn=(0,u.Z)(function*(E){const{auth:_,user:y}=E;return Y(y,_,"internal-error"),ms(y,new pc(E),E.bypassAuthState)})).apply(this,arguments)}class Pn{constructor(_,y,T,M,L=!1){this.auth=_,this.resolver=T,this.user=M,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var _=this;return new Promise(function(){var y=(0,u.Z)(function*(T,M){_.pendingPromise={resolve:T,reject:M};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(L){_.reject(L)}});return function(T,M){return y.apply(this,arguments)}}())}onAuthEvent(_){var y=this;return(0,u.Z)(function*(){const{urlResponse:T,sessionId:M,postBody:L,tenantId:ie,error:me,type:Ze}=_;if(me)return void y.reject(me);const st={auth:y.auth,requestUri:T,sessionId:M,tenantId:ie||void 0,postBody:L||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Ze)(st))}catch(Et){y.reject(Et)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return _o;case"linkViaPopup":case"linkViaRedirect":return Pi;case"reauthViaPopup":case"reauthViaRedirect":return mc;default:le(this.auth,"internal-error")}}resolve(_){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ar=new An(2e3,1e4);function Nn(E,_,y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,u.Z)(function*(E,_,y){const T=pi(E);Ce(E,_,fs);const M=Os(T,y);return new Ur(T,"signInViaPopup",_,M).executeNotNull()})).apply(this,arguments)}function vu(E,_,y){return fl.apply(this,arguments)}function fl(){return(fl=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E);Ce(T.auth,_,fs);const M=Os(T.auth,y);return new Ur(T.auth,"reauthViaPopup",_,M,T).executeNotNull()})).apply(this,arguments)}function Pa(E,_,y){return yo.apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E);Ce(T.auth,_,fs);const M=Os(T.auth,y);return new Ur(T.auth,"linkViaPopup",_,M,T).executeNotNull()})).apply(this,arguments)}let Ur=(()=>{class E extends Pn{constructor(y,T,M,L,ie){super(y,T,L,ie),this.provider=M,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const T=yield y.execute();return Y(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,u.Z)(function*(){qe(1===y.filter.length,"Popup operations only handle one event");const T=ka();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(xe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,M;this.pollId=null!==(M=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,Ar.get())};y()}}return E.currentPopupAction=null,E})();const Vf="pendingRedirect",Qr=new Map;class Gt extends Pn{constructor(_,y,T=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var _=()=>super.execute,y=this;return(0,u.Z)(function*(){let T=Qr.get(y.auth._key());if(!T){try{const L=(yield function Bf(E,_){return Po.apply(this,arguments)}(y.resolver,y.auth))?yield _().call(y):null;T=()=>Promise.resolve(L)}catch(M){T=()=>Promise.reject(M)}Qr.set(y.auth._key(),T)}return y.bypassAuthState||Qr.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(_){var y=()=>super.onAuthEvent,T=this;return(0,u.Z)(function*(){if("signInViaRedirect"===_.type)return y().call(T,_);if("unknown"!==_.type){if(_.eventId){const M=yield T.auth._redirectUserForId(_.eventId);if(M)return T.user=M,y().call(T,_);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Po(){return(Po=(0,u.Z)(function*(E,_){const y=B0(_),T=pv(E);if(!(yield T._isAvailable()))return!1;const M="true"===(yield T._get(y));return yield T._remove(y),M})).apply(this,arguments)}function gc(E,_){return hv.apply(this,arguments)}function hv(){return(hv=(0,u.Z)(function*(E,_){return pv(E)._set(B0(_),"true")})).apply(this,arguments)}function fv(){Qr.clear()}function ih(E,_){Qr.set(E._key(),_)}function pv(E){return Ge(E._redirectPersistence)}function B0(E){return _n(Vf,E.config.apiKey,E.name)}function bu(E,_,y){return function pl(E,_,y){return Hf.apply(this,arguments)}(E,_,y)}function Hf(){return(Hf=(0,u.Z)(function*(E,_,y){const T=pi(E);Ce(E,_,fs),yield T._initializationPromise;const M=Os(T,y);return yield gc(M,T),M._openRedirect(T,_,"signInViaRedirect")})).apply(this,arguments)}function wu(E,_,y){return function jf(E,_,y){return _c.apply(this,arguments)}(E,_,y)}function _c(){return(_c=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E);Ce(T.auth,_,fs),yield T.auth._initializationPromise;const M=Os(T.auth,y);yield gc(M,T.auth);const L=yield A(T);return M._openRedirect(T.auth,_,"reauthViaRedirect",L)})).apply(this,arguments)}function H0(E,_,y){return function _g(E,_,y){return zf.apply(this,arguments)}(E,_,y)}function zf(){return(zf=(0,u.Z)(function*(E,_,y){const T=(0,$.m9)(E);Ce(T.auth,_,fs),yield T.auth._initializationPromise;const M=Os(T.auth,y);yield xa(!1,T,_.providerId),yield gc(M,T.auth);const L=yield A(T);return M._openRedirect(T.auth,_,"linkViaRedirect",L)})).apply(this,arguments)}function mv(E,_){return ee.apply(this,arguments)}function ee(){return(ee=(0,u.Z)(function*(E,_){return yield pi(E)._initializationPromise,Wt(E,_,!1)})).apply(this,arguments)}function Wt(E,_){return gi.apply(this,arguments)}function gi(){return(gi=(0,u.Z)(function*(E,_,y=!1){const T=pi(E),M=Os(T,_),ie=yield new Gt(T,M,y).execute();return ie&&!y&&(delete ie.user._redirectEventId,yield T._persistUserIfCurrent(ie.user),yield T._setRedirectUser(null,_)),ie})).apply(this,arguments)}function A(E){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,u.Z)(function*(E){const _=ka(`${E.uid}:::`);return E._redirectEventId=_,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),_})).apply(this,arguments)}class Na{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(_,T)&&(y=!0,this.sendToConsumer(_,T),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Iu(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kn(E);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=_,y=!0)),y}sendToConsumer(_,y){var T;if(_.error&&!Kn(_)){const M=(null===(T=_.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(xe(this.auth,M))}else y.onAuthEvent(_)}isEventForConsumer(_,y){const T=null===y.eventId||!!_.eventId&&_.eventId===y.eventId;return y.filter.includes(_.type)&&T}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eu(_))}saveEventToCache(_){this.cachedEventUids.add(Eu(_)),this.lastProcessedEventTime=Date.now()}}function Eu(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(_=>_).join("-")}function Kn({type:E,error:_}){return"unknown"===E&&"auth/no-auth-event"===_?.code}function na(E){return ia.apply(this,arguments)}function ia(){return(ia=(0,u.Z)(function*(E,_={}){return De(E,"GET","/v1/projects",_)})).apply(this,arguments)}const gv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rh=/^https?/;function Cu(){return(Cu=(0,u.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:_}=yield na(E);for(const y of _)try{if(Gf(y))return}catch{}le(E,"unauthorized-domain")})).apply(this,arguments)}function Gf(E){const _=wt(),{protocol:y,hostname:T}=new URL(_);if(E.startsWith("chrome-extension://")){const ie=new URL(E);return""===ie.hostname&&""===T?"chrome-extension:"===y&&E.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===y&&ie.hostname===T}if(!rh.test(y))return!1;if(gv.test(E))return T===E;const M=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(T)}const Fa=new An(3e4,6e4);function La(){const E=qi().___jsl;if(E?.H)for(const _ of Object.keys(E.H))if(E.H[_].r=E.H[_].r||[],E.H[_].L=E.H[_].L||[],E.H[_].r=[...E.H[_].L],E.CP)for(let y=0;y<E.CP.length;y++)E.CP[y]=null}let fn=null;const Tu=new An(5e3,15e3),Js="__/auth/iframe",Su="emulator/auth/iframe",xu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _l(E){const _=E.config;Y(_.authDomain,E,"auth-domain-config-required");const y=_.emulator?Ji(_,Su):`https://${E.config.authDomain}/${Js}`,T={apiKey:_.apiKey,appName:E.name,v:N.SDK_VERSION},M=gl.get(E.config.apiHost);M&&(T.eid=M);const L=E._getFrameworks();return L.length&&(T.fw=L.join(",")),`${y}?${(0,$.xO)(T).slice(1)}`}function No(){return No=(0,u.Z)(function*(E){const _=yield function vo(E){return fn=fn||function yg(E){return new Promise((_,y)=>{var T,M,L;function ie(){La(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{La(),y(xe(E,"network-request-failed"))},timeout:Fa.get()})}if(null!==(M=null===(T=qi().gapi)||void 0===T?void 0:T.iframes)&&void 0!==M&&M.Iframe)_(gapi.iframes.getContext());else{if(null===(L=qi().gapi)||void 0===L||!L.load){const me=Do("iframefcb");return qi()[me]=()=>{gapi.load?ie():y(xe(E,"network-request-failed"))},Yc(`https://apis.google.com/js/api.js?onload=${me}`).catch(Ze=>y(Ze))}ie()}}).catch(_=>{throw fn=null,_})}(E),fn}(E),y=qi().gapi;return Y(y,E,"internal-error"),_.open({where:document.body,url:_l(E),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xu,dontclear:!0},T=>new Promise(function(){var M=(0,u.Z)(function*(L,ie){yield T.restyle({setHideOnLeave:!1});const me=xe(E,"network-request-failed"),Ze=qi().setTimeout(()=>{ie(me)},Tu.get());function st(){qi().clearTimeout(Ze),L(T)}T.ping(st).then(st,()=>{ie(me)})});return function(L,ie){return M.apply(this,arguments)}}()))}),No.apply(this,arguments)}const C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oe{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const nt="__/auth/handler",bt="emulator/auth/handler",Ut=encodeURIComponent("fac");function Mt(E,_,y,T,M,L){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(E,_,y,T,M,L){Y(E.config.authDomain,E,"auth-domain-config-required"),Y(E.config.apiKey,E,"invalid-api-key");const ie={apiKey:E.config.apiKey,appName:E.name,authType:y,redirectUrl:T,v:N.SDK_VERSION,eventId:M};if(_ instanceof fs){_.setDefaultLanguage(E.languageCode),ie.providerId=_.providerId||"",(0,$.xb)(_.getCustomParameters())||(ie.customParameters=JSON.stringify(_.getCustomParameters()));for(const[Et,on]of Object.entries(L||{}))ie[Et]=on}if(_ instanceof Fr){const Et=_.getScopes().filter(on=>""!==on);Et.length>0&&(ie.scopes=Et.join(","))}E.tenantId&&(ie.tid=E.tenantId);const me=ie;for(const Et of Object.keys(me))void 0===me[Et]&&delete me[Et];const Ze=yield E._getAppCheckToken(),st=Ze?`#${Ut}=${encodeURIComponent(Ze)}`:"";return`${function Qi({config:E}){return E.emulator?Ji(E,bt):`https://${E.authDomain}/${nt}`}(E)}?${(0,$.xO)(me).slice(1)}${st}`})).apply(this,arguments)}const ei="webStorageSupport",bo=class Ua{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fu,this._completeRedirectFn=Wt,this._overrideRedirectResult=ih}_openPopup(_,y,T,M){var L=this;return(0,u.Z)(function*(){var ie;qe(null===(ie=L.eventManagers[_._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const me=yield Mt(_,y,T,wt(),M);return function we(E,_,y,T=500,M=600){const L=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-T)/2,0).toString();let me="";const Ze=Object.assign(Object.assign({},C),{width:T.toString(),height:M.toString(),top:L,left:ie}),st=(0,$.z$)().toLowerCase();y&&(me=F(st)?"_blank":y),B(st)&&(_=_||"http://localhost",Ze.scrollbars="yes");const Et=Object.entries(Ze).reduce((Jr,[Ps,Au])=>`${Jr}${Ps}=${Au},`,"");if(function Vt(E=(0,$.z$)()){var _;return lt(E)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(st)&&"_self"!==me)return function it(E,_){const y=document.createElement("a");y.href=E,y.target=_;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(_||"",me),new oe(null);const on=window.open(_||"",me,Et);Y(on,E,"popup-blocked");try{on.focus()}catch{}return new oe(on)}(_,me,ka())})()}_openRedirect(_,y,T,M){var L=this;return(0,u.Z)(function*(){return yield L._originValidation(_),function hl(E){qi().location.href=E}(yield Mt(_,y,T,wt(),M)),new Promise(()=>{})})()}_initialize(_){const y=_._key();if(this.eventManagers[y]){const{manager:M,promise:L}=this.eventManagers[y];return M?Promise.resolve(M):(qe(L,"If manager is not set, promise should be"),L)}const T=this.initAndGetManager(_);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(_){var y=this;return(0,u.Z)(function*(){const T=yield function yl(E){return No.apply(this,arguments)}(_),M=new Na(_);return T.register("authEvent",L=>(Y(L?.authEvent,_,"invalid-auth-event"),{status:M.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[_._key()]={manager:M},y.iframes[_._key()]=T,M})()}_isIframeWebStorageSupported(_,y){this.iframes[_._key()].send(ei,{type:ei},M=>{var L;const ie=null===(L=M?.[0])||void 0===L?void 0:L[ei];void 0!==ie&&y(!!ie),le(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const y=_._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function ml(E){return Cu.apply(this,arguments)}(_)),this.originValidationPromises[y]}get _shouldInitProactively(){return Yt()||H()||lt()}};class ys{constructor(_){this.factorId=_}_process(_,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(_,y.credential,T);case"signin":return this._finalizeSignIn(_,y.credential);default:return ke("unexpected MultiFactorSessionType")}}}class ui extends ys{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new ui(_)}_finalizeEnroll(_,y,T){return function hc(E,_){return De(E,"POST","/v2/accounts/mfaEnrollment:finalize",he(E,_))}(_,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,y){return function Qd(E,_){return De(E,"POST","/v2/accounts/mfaSignIn:finalize",he(E,_))}(_,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Va=(()=>{class E{constructor(){}static assertion(y){return ui._fromCredential(y)}}return E.FACTOR_ID="phone",E})();var j0="@firebase/auth";class gx{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const y=this.auth.onIdTokenChanged(T=>{_(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(_,y),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const y=this.internalListeners.get(_);y&&(this.internalListeners.delete(_),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function sh(E){(0,N._registerComponent)(new ce.wA("auth",(_,{options:y})=>{const T=_.getProvider("app").getImmediate(),M=_.getProvider("heartbeat"),L=_.getProvider("app-check-internal"),{apiKey:ie,authDomain:me}=T.options;Y(ie&&!ie.includes(":"),"invalid-api-key",{appName:T.name});const Ze={apiKey:ie,authDomain:me,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:va(E)},st=new tl(T,M,L,Ze);return function tv(E,_){const y=_?.persistence||[],T=(Array.isArray(y)?y:[y]).map(Ge);_?.errorMap&&E._updateErrorMap(_.errorMap),E._initializeWithPersistence(T,_?.popupRedirectResolver)}(st,y),st},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,y,T)=>{_.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ce.wA("auth-internal",_=>{const y=pi(_.getProvider("auth").getImmediate());return new gx(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(j0,"0.23.2",function Xr(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,N.registerVersion)(j0,"0.23.2","esm2017")}("Browser")},9058:(gt,Se,U)=>{U.d(Se,{$s:()=>Ge,BH:()=>pe,DV:()=>oi,Dv:()=>Pr,G6:()=>Ji,GJ:()=>Fn,L:()=>ye,LL:()=>$e,P0:()=>ft,Pz:()=>xe,Sg:()=>Ce,UG:()=>ke,UI:()=>Di,US:()=>ce,Wj:()=>Qt,Wl:()=>At,Yr:()=>An,ZB:()=>ae,ZR:()=>De,aH:()=>le,b$:()=>hn,cI:()=>mn,dS:()=>Wr,eu:()=>_e,g5:()=>N,gK:()=>cn,gQ:()=>Lt,h$:()=>Ae,hl:()=>de,hu:()=>$,jU:()=>qe,lb:()=>Hn,m9:()=>_n,ne:()=>Jt,p$:()=>Z,pd:()=>Rt,r3:()=>gn,ru:()=>wt,tV:()=>G,uI:()=>Y,ug:()=>us,vZ:()=>Xn,w1:()=>Vn,w9:()=>Qn,xO:()=>Rs,xb:()=>Or,z$:()=>Ve,zI:()=>ve,zd:()=>Ct});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$=function(K,q){if(!K)throw N(q)},N=function(K){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+K)},te=function(K){const q=[];let B=0;for(let H=0;H<K.length;H++){let F=K.charCodeAt(H);F<128?q[B++]=F:F<2048?(q[B++]=F>>6|192,q[B++]=63&F|128):55296==(64512&F)&&H+1<K.length&&56320==(64512&K.charCodeAt(H+1))?(F=65536+((1023&F)<<10)+(1023&K.charCodeAt(++H)),q[B++]=F>>18|240,q[B++]=F>>12&63|128,q[B++]=F>>6&63|128,q[B++]=63&F|128):(q[B++]=F>>12|224,q[B++]=F>>6&63|128,q[B++]=63&F|128)}return q},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,q){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let F=0;F<K.length;F+=3){const se=K[F],Re=F+1<K.length,Qe=Re?K[F+1]:0,Nt=F+2<K.length,lt=Nt?K[F+2]:0;let Ln=(15&Qe)<<2|lt>>6,Yt=63&lt;Nt||(Yt=64,Re||(Ln=64)),H.push(B[se>>2],B[(3&se)<<4|Qe>>4],B[Ln],B[Yt])}return H.join("")},encodeString(K,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(K):this.encodeByteArray(te(K),q)},decodeString(K,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(K):function(K){const q=[];let B=0,H=0;for(;B<K.length;){const F=K[B++];if(F<128)q[H++]=String.fromCharCode(F);else if(F>191&&F<224){const se=K[B++];q[H++]=String.fromCharCode((31&F)<<6|63&se)}else if(F>239&&F<365){const Nt=((7&F)<<18|(63&K[B++])<<12|(63&K[B++])<<6|63&K[B++])-65536;q[H++]=String.fromCharCode(55296+(Nt>>10)),q[H++]=String.fromCharCode(56320+(1023&Nt))}else{const se=K[B++],Re=K[B++];q[H++]=String.fromCharCode((15&F)<<12|(63&se)<<6|63&Re)}}return q.join("")}(this.decodeStringToByteArray(K,q))},decodeStringToByteArray(K,q){this.init_();const B=q?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let F=0;F<K.length;){const se=B[K.charAt(F++)],Qe=F<K.length?B[K.charAt(F)]:0;++F;const lt=F<K.length?B[K.charAt(F)]:64;++F;const Vt=F<K.length?B[K.charAt(F)]:64;if(++F,null==se||null==Qe||null==lt||null==Vt)throw new Ie;H.push(se<<2|Qe>>4),64!==lt&&(H.push(Qe<<4&240|lt>>2),64!==Vt&&H.push(lt<<6&192|Vt))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ae=function(K){const q=te(K);return ce.encodeByteArray(q,!0)},ye=function(K){return Ae(K).replace(/\./g,"")},G=function(K){try{return ce.decodeString(K,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Z(K){return ae(void 0,K)}function ae(K,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return q}for(const B in q)!q.hasOwnProperty(B)||!Be(B)||(K[B]=ae(K[B],q[B]));return K}function Be(K){return"__proto__"!==K}const Pe=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const K=process.env.__FIREBASE_DEFAULTS__;return K?JSON.parse(K):void 0})()||(()=>{if(typeof document>"u")return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=K&&G(K[1]);return q&&JSON.parse(q)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},ft=K=>{const q=(K=>{var q,B;return null===(B=null===(q=Pe())||void 0===q?void 0:q.emulatorHosts)||void 0===B?void 0:B[K]})(K);if(!q)return;const B=q.lastIndexOf(":");if(B<=0||B+1===q.length)throw new Error(`Invalid host ${q} with no separate hostname and port!`);const H=parseInt(q.substring(B+1),10);return"["===q[0]?[q.substring(1,B-1),H]:[q.substring(0,B),H]},le=()=>{var K;return null===(K=Pe())||void 0===K?void 0:K.config},xe=K=>{var q;return null===(q=Pe())||void 0===q?void 0:q[`_${K}`]};class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,B)=>{this.resolve=q,this.reject=B})}wrapCallback(q){return(B,H)=>{B?this.reject(B):this.resolve(H),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(B):q(B,H))}}}function Ce(K,q){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=q||"demo-project",F=K.iat||0,se=K.sub||K.user_id;if(!se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:F,exp:F+3600,auth_time:F,sub:se,user_id:se,firebase:{sign_in_provider:"custom",identities:{}}},K);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Re)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ke(){var K;const q=null===(K=Pe())||void 0===K?void 0:K.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function qe(){return"object"==typeof self&&self.self===self}function wt(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function hn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Vn(){const K=Ve();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function An(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Ji(){return!ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((K,q)=>{try{let B=!0;const H="validate-browser-context-for-indexeddb-analytics-module",F=self.indexedDB.open(H);F.onsuccess=()=>{F.result.close(),B||self.indexedDB.deleteDatabase(H),K(!0)},F.onupgradeneeded=()=>{B=!1},F.onerror=()=>{var se;q((null===(se=F.error)||void 0===se?void 0:se.message)||"")}}catch(B){q(B)}})}function ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class De extends Error{constructor(q,B,H){super(B),this.code=q,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,De.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}}class $e{constructor(q,B,H){this.service=q,this.serviceName=B,this.errors=H}create(q,...B){const H=B[0]||{},F=`${this.service}/${q}`,se=this.errors[q],Re=se?function et(K,q){return K.replace(Ke,(B,H)=>{const F=q[H];return null!=F?String(F):`<${H}?>`})}(se,H):"Error";return new De(F,`${this.serviceName}: ${Re} (${F}).`,H)}}const Ke=/\{\$([^}]+)}/g;function mn(K){return JSON.parse(K)}function At(K){return JSON.stringify(K)}const rn=function(K){let q={},B={},H={},F="";try{const se=K.split(".");q=mn(G(se[0])||""),B=mn(G(se[1])||""),F=se[2],H=B.d||{},delete B.d}catch{}return{header:q,claims:B,data:H,signature:F}},Qn=function(K){const B=rn(K).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},Fn=function(K){const q=rn(K).claims;return"object"==typeof q&&!0===q.admin};function gn(K,q){return Object.prototype.hasOwnProperty.call(K,q)}function oi(K,q){if(Object.prototype.hasOwnProperty.call(K,q))return K[q]}function Or(K){for(const q in K)if(Object.prototype.hasOwnProperty.call(K,q))return!1;return!0}function Di(K,q,B){const H={};for(const F in K)Object.prototype.hasOwnProperty.call(K,F)&&(H[F]=q.call(B,K[F],F,K));return H}function Xn(K,q){if(K===q)return!0;const B=Object.keys(K),H=Object.keys(q);for(const F of B){if(!H.includes(F))return!1;const se=K[F],Re=q[F];if(ii(se)&&ii(Re)){if(!Xn(se,Re))return!1}else if(se!==Re)return!1}for(const F of H)if(!B.includes(F))return!1;return!0}function ii(K){return null!==K&&"object"==typeof K}function Rs(K){const q=[];for(const[B,H]of Object.entries(K))Array.isArray(H)?H.forEach(F=>{q.push(encodeURIComponent(B)+"="+encodeURIComponent(F))}):q.push(encodeURIComponent(B)+"="+encodeURIComponent(H));return q.length?"&"+q.join("&"):""}function Ct(K){const q={};return K.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[F,se]=H.split("=");q[decodeURIComponent(F)]=decodeURIComponent(se)}}),q}function Rt(K){const q=K.indexOf("?");if(!q)return"";const B=K.indexOf("#",q);return K.substring(q,B>0?B:void 0)}class Lt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,B){B||(B=0);const H=this.W_;if("string"==typeof q)for(let Vt=0;Vt<16;Vt++)H[Vt]=q.charCodeAt(B)<<24|q.charCodeAt(B+1)<<16|q.charCodeAt(B+2)<<8|q.charCodeAt(B+3),B+=4;else for(let Vt=0;Vt<16;Vt++)H[Vt]=q[B]<<24|q[B+1]<<16|q[B+2]<<8|q[B+3],B+=4;for(let Vt=16;Vt<80;Vt++){const Ln=H[Vt-3]^H[Vt-8]^H[Vt-14]^H[Vt-16];H[Vt]=4294967295&(Ln<<1|Ln>>>31)}let lt,In,F=this.chain_[0],se=this.chain_[1],Re=this.chain_[2],Qe=this.chain_[3],Nt=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(lt=Qe^se&(Re^Qe),In=1518500249):(lt=se^Re^Qe,In=1859775393):Vt<60?(lt=se&Re|Qe&(se|Re),In=2400959708):(lt=se^Re^Qe,In=3395469782);const Ln=(F<<5|F>>>27)+lt+Nt+In+H[Vt]&4294967295;Nt=Qe,Qe=Re,Re=4294967295&(se<<30|se>>>2),se=F,F=Ln}this.chain_[0]=this.chain_[0]+F&4294967295,this.chain_[1]=this.chain_[1]+se&4294967295,this.chain_[2]=this.chain_[2]+Re&4294967295,this.chain_[3]=this.chain_[3]+Qe&4294967295,this.chain_[4]=this.chain_[4]+Nt&4294967295}update(q,B){if(null==q)return;void 0===B&&(B=q.length);const H=B-this.blockSize;let F=0;const se=this.buf_;let Re=this.inbuf_;for(;F<B;){if(0===Re)for(;F<=H;)this.compress_(q,F),F+=this.blockSize;if("string"==typeof q){for(;F<B;)if(se[Re]=q.charCodeAt(F),++Re,++F,Re===this.blockSize){this.compress_(se),Re=0;break}}else for(;F<B;)if(se[Re]=q[F],++Re,++F,Re===this.blockSize){this.compress_(se),Re=0;break}}this.inbuf_=Re,this.total_+=B}digest(){const q=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let F=this.blockSize-1;F>=56;F--)this.buf_[F]=255&B,B/=256;this.compress_(this.buf_);let H=0;for(let F=0;F<5;F++)for(let se=24;se>=0;se-=8)q[H]=this.chain_[F]>>se&255,++H;return q}}function Jt(K,q){const B=new vi(K,q);return B.subscribe.bind(B)}class vi{constructor(q,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{q(this)}).catch(H=>{this.error(H)})}next(q){this.forEachObserver(B=>{B.next(q)})}error(q){this.forEachObserver(B=>{B.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,B,H){let F;if(void 0===q&&void 0===B&&void 0===H)throw new Error("Missing Observer.");F=function Kt(K,q){if("object"!=typeof K||null===K)return!1;for(const B of q)if(B in K&&"function"==typeof K[B])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:B,complete:H},void 0===F.next&&(F.next=$n),void 0===F.error&&(F.error=$n),void 0===F.complete&&(F.complete=$n);const se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?F.error(this.finalError):F.complete()}catch{}}),this.observers.push(F),se}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,q)}sendOne(q,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{B(this.observers[q])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $n(){}const Pr=function(K,q,B,H){let F;if(H<q?F="at least "+q:H>B&&(F=0===B?"none":"no more than "+B),F)throw new Error(K+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+F+".")};function cn(K,q){return`${K} failed: ${q} argument `}function Qt(K,q,B,H){if((!H||B)&&"function"!=typeof B)throw new Error(cn(K,q)+"must be a valid function.")}function Hn(K,q,B,H){if((!H||B)&&("object"!=typeof B||null===B))throw new Error(cn(K,q)+"must be a valid context object.")}const Wr=function(K){const q=[];let B=0;for(let H=0;H<K.length;H++){let F=K.charCodeAt(H);if(F>=55296&&F<=56319){const se=F-55296;H++,$(H<K.length,"Surrogate pair missing trail surrogate."),F=65536+(se<<10)+(K.charCodeAt(H)-56320)}F<128?q[B++]=F:F<2048?(q[B++]=F>>6|192,q[B++]=63&F|128):F<65536?(q[B++]=F>>12|224,q[B++]=F>>6&63|128,q[B++]=63&F|128):(q[B++]=F>>18|240,q[B++]=F>>12&63|128,q[B++]=F>>6&63|128,q[B++]=63&F|128)}return q},us=function(K){let q=0;for(let B=0;B<K.length;B++){const H=K.charCodeAt(B);H<128?q++:H<2048?q+=2:H>=55296&&H<=56319?(q+=4,B++):q+=3}return q},fi=1e3,be=2,Q=144e5,Ee=.5;function Ge(K,q=fi,B=be){const H=q*Math.pow(B,K),F=Math.round(Ee*H*(Math.random()-.5)*2);return Math.min(Q,H+F)}function _n(K){return K&&K._delegate?K._delegate:K}},1545:(gt,Se,U)=>{var u=U(5879);let $=null;function N(){return $}class ue{}const ce=new u.OlP("DocumentToken");let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(ye)},providedIn:"platform"})}return n})();const Ae=new u.OlP("Location Initialized");let ye=(()=>{class n extends Ie{constructor(){super(),this._doc=(0,u.f3M)(ce),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function G(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ae(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Xe)},providedIn:"root"})}return n})();const Oe=new u.OlP("appBaseHref");let Xe=(()=>{class n extends Be{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return G(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ae(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const a=this.prepareExternalUrl(r+ae(s));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,s){const a=this.prepareExternalUrl(r+ae(s));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Ie),u.LFG(Oe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fe=(()=>{class n extends Be{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=G(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let a=this.prepareExternalUrl(r+ae(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,s){let a=this.prepareExternalUrl(r+ae(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Ie),u.LFG(Oe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),Je=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function le(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Z(ft(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ae(i))}normalize(t){return n.stripTrailingSlash(function vt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ft(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ae(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ae(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=ae;static#t=this.joinWithSlash=G;static#n=this.stripTrailingSlash=Z;static#i=this.\u0275fac=function(i){return new(i||n)(u.LFG(Be))};static#r=this.\u0275prov=u.Yz7({token:n,factory:function(){return function Pe(){return new Je((0,u.LFG)(Be))}()},providedIn:"root"})}return n})();function ft(n){return n.replace(/\/index.html$/,"")}const el=/\s+/,Dd=[];let ba=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=Dd,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(el):Dd}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(el):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(el).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Ql{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,a)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Ql(r.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,a),pi(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{pi(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function pi(n,e){n.context.$implicit=e.item}let $s=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new tv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.s_b),u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class tv{constructor(){this.$implicit=null,this.ngIf=null}}function mf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class Kr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ea=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),nl=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Kr(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Ea,9))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),ec=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:a}=this;this._viewRef=i.createEmbeddedView(r,s,a?{injector:a}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.s_b))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]})}return n})();class Zc{createSubscription(e,t){return(0,u.rg0)(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){(0,u.rg0)(()=>e.unsubscribe())}}class Ir{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Qc=new Ir,kd=new Zc;let Xc=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,u.QGY)(t))return Qc;if((0,u.F4k)(t))return kd;throw function Yr(n,e){return new u.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.sBO,16))};static#t=this.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Jn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const ko="browser";function hs(n){return"server"===n}let Fr=(()=>{class n{static#e=this.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Yo((0,u.LFG)(ce),window)})}return n})();class Yo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function tu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Df extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class cu extends Df{static makeCurrent(){!function te(n){$||($=n)}(new cu)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function sv(){return cc=cc||document.querySelector("base"),cc?cc.getAttribute("href"):null}();return null==t?null:function ug(n){Gd=Gd||document.createElement("a"),Gd.setAttribute("href",n);const e=Gd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Zl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Gd,cc=null,ov=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Wd=new u.OlP("EventManagerPlugins");let dg=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Wd),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class uu{constructor(e){this._doc=e}}const uc="ng-app-id";let du=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hs(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${uc}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(uc),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(uc,this.appId),a}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,a=s.get(i)?.elements;a?a.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Zs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ul=/%COMP%/g,Ms=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function xn(n,e){return e.map(t=>t.replace(ul,n))}let dl=(()=>{class n{constructor(t,i,r,s,a,d,f,m=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=d,this.ngZone=f,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=hs(d),this.defaultRenderer=new po(t,a,f,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===u.ifc.ShadowDom&&(i={...i,encapsulation:u.ifc.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof Kd?r.applyToHost(t):r instanceof Dr&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const a=this.doc,d=this.ngZone,f=this.eventManager,m=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,I=this.platformIsServer;switch(i.encapsulation){case u.ifc.Emulated:s=new Kd(f,m,i,this.appId,b,a,d,I);break;case u.ifc.ShadowDom:return new Aa(f,m,t,i,a,d,this.nonce,I);default:s=new Dr(f,m,i,b,a,d,I)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(dg),u.LFG(du),u.LFG(u.AFp),u.LFG(Ms),u.LFG(ce),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class po{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Zs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qd(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(qd(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new u.vHH(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Zs[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Zs[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=N().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function qd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Aa extends po{constructor(e,t,i,r,s,a,d,f){super(e,s,a,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=xn(r.id,r.styles);for(const b of m){const I=document.createElement("style");d&&I.setAttribute("nonce",d),I.textContent=b,this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Dr extends po{constructor(e,t,i,r,s,a,d,f){super(e,s,a,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=f?xn(f,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Kd extends Dr{constructor(e,t,i,r,s,a,d,f){const m=r+"-"+i.id;super(e,t,i,s,a,d,f,m),this.contentAttr=function Rf(n){return"_ngcontent-%COMP%".replace(ul,n)}(m),this.hostAttr=function hu(n){return"_nghost-%COMP%".replace(ul,n)}(m)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let kf=(()=>{class n extends uu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const fu=["alt","control","meta","shift"],Ra={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ka=(()=>{class n extends uu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let a="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),a="code."),fu.forEach(m=>{const b=i.indexOf(m);b>-1&&(i.splice(b,1),a+=m+".")}),a+=s,0!=i.length||0===s.length)return null;const f={};return f.domEventName=r,f.fullKey=a,f}static matchEventFullKeyCode(t,i){let r=Ra[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),fu.forEach(a=>{a!==r&&(0,hg[a])(t)&&(s+=a+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ki=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:ko},{provide:u.g9A,useValue:function Pt(){cu.makeCurrent()},multi:!0},{provide:ce,useFactory:function uv(){return(0,u.RDi)(document),document},deps:[]}]),fg=new u.OlP(""),Oi=[{provide:u.rWj,useClass:class $d{addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new u.vHH(5103,!1);return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let s=r.length,a=!1;const d=function(f){a=a||f,s--,0==s&&i(a)};r.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Jo=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function pu(){return new u.qLn},deps:[]},{provide:Wd,useClass:kf,multi:!0,deps:[ce,u.R0b,u.Lbi]},{provide:Wd,useClass:ka,multi:!0,deps:[ce]},dl,du,dg,{provide:u.FYo,useExisting:dl},{provide:class qs{},useClass:ov,deps:[]},[]];let Ma=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(fg,12))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[...Jo,...Oi],imports:[Jn,u.hGG]})}return n})(),Ne=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function Pf(){return new Ne((0,u.LFG)(ce))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;let _s=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(i){let r=null;return r=i?new(i||n):u.LFG(Jd),r},providedIn:"root"})}return n})(),Jd=(()=>{class n extends _s{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new u.vHH(5200,!1);case u.q3G.URL:return(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new u.vHH(5201,!1);default:throw new u.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function gg(n){return new Jd(n.get(ce))}(u.LFG(u.zs3)),r},providedIn:"root"})}return n})();var li=U(6304),zt=U(8645),pt=U(2096),Yi=U(5592),On=U(2459),Zi=U(3019),ea=U(3093),jn=U(4664),ot=U(7398),Qs=U(4552);class ci extends zt.x{constructor(e=1/0,t=1/0,i=Qs.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:a}=this;t||(i.push(e),!r&&i.push(s.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let a=0;a<s.length&&!e.closed;a+=i?1:2)e.next(s[a]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const a=t.now();let d=0;for(let f=1;f<i.length&&i[f]<=a;f+=2)d=f;d&&i.splice(0,d+1)}}}var Os=U(3020);function pc(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,Os.B)({connector:()=>new ci(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const mc=(0,U(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Pi=U(9360),qn=U(8251);function Pn(n,e){return(0,Pi.e)((t,i)=>{let r=0;t.subscribe((0,qn.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}var Ar=U(6232);function Nn(n){return n<=0?()=>Ar.E:(0,Pi.e)((e,t)=>{let i=0;e.subscribe((0,qn.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Xs(n){return(0,Pi.e)((e,t)=>{let i=!1;e.subscribe((0,qn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function vu(n=fl){return(0,Pi.e)((e,t)=>{let i=!1;e.subscribe((0,qn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function fl(){return new mc}var Pa=U(2737);function yo(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Pn((r,s)=>n(r,s,i)):Pa.y,Nn(1),t?Xs(e):vu(()=>new mc))}var Ur=U(4674);function Vf(n,e){return(0,Ur.m)(e)?(0,jn.w)(()=>n,e):(0,jn.w)(()=>n)}var Qr=U(5137),Gt=U(2793),Bf=U(4097);class gc{constructor(){return(0,Bf.C6)()}}var ee=U(5861),Wt=U(4303),gi=U(4537),A=U(9058),Ni=U(7879);const ta=new Map,Na={activated:!1,tokenObservers:[]},Eu={initialized:!1,enabled:!1};function Kn(n){return ta.get(n)||Object.assign({},Na)}function na(){return Eu}const ia="https://content-firebaseappcheck.googleapis.com/v1",ml="exchangeDebugToken",Cu={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Fa{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ee.Z)(function*(){t.stop();try{t.pending=new A.BH,yield function La(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new A.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fn=new A.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Tu(n){if(!Kn(n).activated)throw fn.create("use-before-activation",{appName:n.name})}function xu(n,e){return gl.apply(this,arguments)}function gl(){return(gl=(0,ee.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const I=yield r.getHeartbeatsHeader();I&&(i["X-Firebase-Client"]=I)}const s={method:"POST",body:JSON.stringify(e),headers:i};let a,d;try{a=yield fetch(n,s)}catch(I){throw fn.create("fetch-network-error",{originalErrorMessage:I?.message})}if(200!==a.status)throw fn.create("fetch-status-error",{httpStatus:a.status});try{d=yield a.json()}catch(I){throw fn.create("fetch-parse-error",{originalErrorMessage:I?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw fn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const m=1e3*Number(f[1]),b=Date.now();return{token:d.token,expireTimeMillis:b+m,issuedAtTimeMillis:b}})).apply(this,arguments)}function No(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${ia}/projects/${t}/apps/${i}:${ml}?key=${r}`,body:{debug_token:e}}}const C="firebase-app-check-database",x=1,k="firebase-app-check-store";let X=null;function Mt(){return(Mt=(0,ee.Z)(function*(n,e){const i=(yield function oe(){return X||(X=new Promise((n,e)=>{try{const t=indexedDB.open(C,x);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(fn.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(k,{keyPath:"compositeKey"})}}catch(t){e(fn.create("storage-open",{originalErrorMessage:t?.message}))}}),X)}()).transaction(k,"readwrite"),s=i.objectStore(k).put({compositeKey:n,value:e});return new Promise((a,d)=>{s.onsuccess=f=>{a()},i.onerror=f=>{var m;d(fn.create("storage-set",{originalErrorMessage:null===(m=f.target.error)||void 0===m?void 0:m.message}))}})})).apply(this,arguments)}const Ua=new Ni.Yd("@firebase/app-check");function ui(n,e){return(0,A.hl)()?function it(n,e){return function Ut(n,e){return Mt.apply(this,arguments)}(function ei(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ua.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vl(){return na().enabled}function bl(){return Du.apply(this,arguments)}function Du(){return(Du=(0,ee.Z)(function*(){const n=na();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const _v={error:"UNKNOWN_ERROR"};function gx(n){return A.US.encodeString(JSON.stringify(n),!1)}function Xr(n){return sh.apply(this,arguments)}function sh(){return(sh=(0,ee.Z)(function*(n,e=!1){const t=n.app;Tu(t);const i=Kn(t);let s,r=i.token;if(r&&!y(r)&&(i.token=void 0,r=void 0),!r){const f=yield i.cachedTokenPromise;f&&(y(f)?r=f:yield ui(t,void 0))}if(!e&&r&&y(r))return{token:r.token};let d,a=!1;if(vl()){i.exchangeTokenPromise||(i.exchangeTokenPromise=xu(No(t,yield bl()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);const f=yield i.exchangeTokenPromise;return yield ui(t,f),i.token=f,{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),r=yield Kn(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?Ua.warn(f.message):Ua.error(f),s=f}return r?s?d=y(r)?{token:r.token,internalError:s}:T(s):(d={token:r.token},i.token=r,yield ui(t,r)):d=T(s),a&&function _(n,e){const t=Kn(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,d),d})).apply(this,arguments)}function yc(n){return yv.apply(this,arguments)}function yv(){return(yv=(0,ee.Z)(function*(n){const e=n.app;Tu(e);const{provider:t}=Kn(e);if(vl()){const i=yield bl(),{token:r}=yield xu(No(e,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield t.getToken();return{token:i}}})).apply(this,arguments)}function bg(n,e){const t=Kn(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function z0(n){const{app:e}=n,t=Kn(e);let i=t.tokenRefresher;i||(i=function E(n){const{app:e}=n;return new Fa((0,ee.Z)(function*(){let i;if(i=Kn(e).token?yield Xr(n,!0):yield Xr(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Kn(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},Cu.RETRIAL_MIN_WAIT,Cu.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function y(n){return n.expireTimeMillis-Date.now()>0}function T(n){return{token:gx(_v),error:n}}class M{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Kn(this.app);for(const t of e)bg(this.app,t.next);return Promise.resolve()}}const gN="app-check-internal";!function _N(){(0,Wt._registerComponent)(new gi.wA("app-check",n=>function L(n,e){return new M(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gN).initialize()})),(0,Wt._registerComponent)(new gi.wA(gN,n=>function ie(n){return{getToken:e=>Xr(n,e),getLimitedUseToken:()=>yc(n),addTokenListener:e=>function oh(n,e,t,i){const{app:r}=n,s=Kn(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&y(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),z0(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>z0(n))}(n,"INTERNAL",e),removeTokenListener:e=>bg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wt.registerVersion)("@firebase/app-check","0.8.0")}();class Cg{constructor(){return(0,Gt.vb)("app-check")}}typeof window<"u"&&window;var xg=U(120);const qf=new u.OlP("angularfire2.auth.use-emulator"),Kf=new u.OlP("angularfire2.auth.settings"),K0=new u.OlP("angularfire2.auth.tenant-id"),Y0=new u.OlP("angularfire2.auth.langugage-code"),Z0=new u.OlP("angularfire2.auth.use-device-language"),Tv=new u.OlP("angularfire.auth.persistence"),Dg=(n,e,t,i,r,s,a,d)=>(0,li.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),i&&(f.tenantId=i),f.languageCode=r,s&&f.useDeviceLanguage(),a)for(const[m,b]of Object.entries(a))f.settings[m]=b;return d&&f.setPersistence(d),f},[t,i,r,s,a,d]);let Ag=(()=>{class n{constructor(t,i,r,s,a,d,f,m,b,I,D,O){const V=new zt.x,W=(0,pt.of)(void 0).pipe((0,ea.Q)(a.outsideAngular),(0,jn.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,8661)))),(0,ot.U)(()=>(0,li.on)(t,s,i)),(0,ot.U)(re=>Dg(re,s,d,m,b,I,f,D)),pc({bufferSize:1,refCount:!1}));if(hs(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,pt.of)(null);else{W.pipe(yo()).subscribe();const Me=W.pipe((0,jn.w)(Ye=>Ye.getRedirectResult().then(xt=>xt,()=>null)),Gt.iC,pc({bufferSize:1,refCount:!1})),ze=W.pipe((0,jn.w)(Ye=>new Yi.y(xt=>({unsubscribe:s.runOutsideAngular(()=>Ye.onAuthStateChanged(Ot=>xt.next(Ot),Ot=>xt.error(Ot),()=>xt.complete()))})))),je=W.pipe((0,jn.w)(Ye=>new Yi.y(xt=>({unsubscribe:s.runOutsideAngular(()=>Ye.onIdTokenChanged(Ot=>xt.next(Ot),Ot=>xt.error(Ot),()=>xt.complete()))}))));this.authState=Me.pipe(Vf(ze),(0,Qr.R)(a.outsideAngular),(0,ea.Q)(a.insideAngular)),this.user=Me.pipe(Vf(je),(0,Qr.R)(a.outsideAngular),(0,ea.Q)(a.insideAngular)),this.idToken=this.user.pipe((0,jn.w)(Ye=>Ye?(0,On.D)(Ye.getIdToken()):(0,pt.of)(null))),this.idTokenResult=this.user.pipe((0,jn.w)(Ye=>Ye?(0,On.D)(Ye.getIdTokenResult()):(0,pt.of)(null))),this.credential=(0,Zi.T)(Me,V,this.authState.pipe(Pn(Ye=>!Ye))).pipe((0,ot.U)(Ye=>Ye?.user?Ye:null),(0,Qr.R)(a.outsideAngular),(0,ea.Q)(a.insideAngular))}return(0,li.pX)(this,W,s,{spy:{apply:(re,Me,ze)=>{(re.startsWith("signIn")||re.startsWith("createUser"))&&ze.then(je=>V.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(li.Dh),u.LFG(li.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Gt.HU),u.LFG(qf,8),u.LFG(Kf,8),u.LFG(K0,8),u.LFG(Y0,8),u.LFG(Z0,8),u.LFG(Tv,8),u.LFG(Cg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),EN=(()=>{class n{constructor(){xg.Z.registerVersion("angularfire",Gt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ag]}),n})();var Yf=U(6321);function Sv(n,e=Yf.z){return(0,Pi.e)((t,i)=>{let r=null,s=null,a=null;const d=()=>{if(r){r.unsubscribe(),r=null;const m=s;s=null,i.next(m)}};function f(){const m=a+n,b=e.now();if(b<m)return r=this.schedule(void 0,m-b),void i.add(r);d()}t.subscribe((0,qn.x)(i,m=>{s=m,a=e.now(),r||(r=e.schedule(f,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}class IN{constructor(e,t){this._delegate=e,this.firebase=t,(0,Wt._addComponent)(e,new gi.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Wt.deleteApp)(this._delegate)))}_getService(e,t=Wt._DEFAULT_ENTRY_NAME){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(i=r.getComponent())||void 0===i?void 0:i.instantiationMode)&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Wt._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,Wt._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,Wt._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const eo=new A.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J0=function X0(){const n=function Q0(n){const e={},t={__esModule:!0,initializeApp:function s(m,b={}){const I=Wt.initializeApp(m,b);if((0,A.r3)(e,I.name))return e[I.name];const D=new n(I,t);return e[I.name]=D,D},app:r,registerVersion:Wt.registerVersion,setLogLevel:Wt.setLogLevel,onLog:Wt.onLog,apps:null,SDK_VERSION:Wt.SDK_VERSION,INTERNAL:{registerComponent:function d(m){const b=m.name,I=b.replace("-compat","");if(Wt._registerComponent(m)&&"PUBLIC"===m.type){const D=(O=r())=>{if("function"!=typeof O[I])throw eo.create("invalid-app-argument",{appName:b});return O[I]()};void 0!==m.serviceProps&&(0,A.ZB)(D,m.serviceProps),t[I]=D,n.prototype[I]=function(...O){return this._getService.bind(this,b).apply(this,m.multipleInstances?O:[])}}return"PUBLIC"===m.type?t[I]:null},removeApp:function i(m){delete e[m]},useAsService:function f(m,b){return"serverAuth"===b?null:b},modularAPIs:Wt}};function r(m){if(!(0,A.r3)(e,m=m||Wt._DEFAULT_ENTRY_NAME))throw eo.create("no-app",{appName:m});return e[m]}return t.default=t,Object.defineProperty(t,"apps",{get:function a(){return Object.keys(e).map(m=>e[m])}}),r.App=n,t}(IN);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:X0,extendNamespace:function e(t){(0,A.ZB)(n,t)},createSubscribe:A.ne,ErrorFactory:A.LL,deepExtend:A.ZB}),n}(),vs=new Ni.Yd("@firebase/app-compat");if((0,A.jU)()&&void 0!==self.firebase){vs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&vs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const TN=J0;!function bx(n){(0,Wt.registerVersion)("@firebase/app-compat","0.2.19",n)}();const eE="firebasestorage.googleapis.com",wx="storageBucket";class Xi extends A.ZR{constructor(e,t,i=0){super(kg(e),`Firebase Storage: ${t} (${kg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Fi=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Fi||{});function kg(n){return"storage/"+n}function Mg(){return new Xi(Fi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function tE(){return new Xi(Fi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nE(){return new Xi(Fi.CANCELED,"User canceled the upload/download.")}function Dv(){return new Xi(Fi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qf(n){return new Xi(Fi.INVALID_ARGUMENT,n)}function Sx(){return new Xi(Fi.APP_DELETED,"The Firebase app was deleted.")}function xx(n){return new Xi(Fi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pg(n,e){return new Xi(Fi.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Xf(n){throw new Xi(Fi.INTERNAL_ERROR,"Internal error: "+n)}class Br{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Br.makeFromUrl(e,t)}catch{return new Br(e,"")}if(""===i.path)return i;throw function xv(n){return new Xi(Fi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function m(Ye){Ye.path_=decodeURIComponent(Ye.path)}const I=t.replace(/[.]/g,"\\."),je=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp(`^https?://${t===eE?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:m}];for(let Ye=0;Ye<je.length;Ye++){const xt=je[Ye],Ot=xt.regex.exec(e);if(Ot){let zi=Ot[xt.indices.path];zi||(zi=""),i=new Br(Ot[xt.indices.bucket],zi),xt.postModify(i);break}}if(null==i)throw function Zf(n){return new Xi(Fi.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class iE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function wl(n){return"string"==typeof n||n instanceof String}function oE(n){return Rv()&&n instanceof Blob}function Rv(){return typeof Blob<"u"&&!(0,A.UG)()}function aE(n,e,t,i){if(i<e)throw Qf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Qf(`Invalid value for '${n}'. Expected ${t} or less.`)}function ku(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function Ng(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Jf=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Jf||{});function lE(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class Ax{constructor(e,t,i,r,s,a,d,f,m,b,I,D=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=b,this.connectionFactory_=I,this.retry=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,V)=>{this.resolve_=O,this.reject_=V,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,a=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function ON(n){return void 0!==n}(f)?s():s(f)}catch(f){a(f)}else if(null!==d){const f=Mg();f.serverResponse=d.getErrorText(),a(this.errorCallback_?this.errorCallback_(d,f):f)}else a(r.canceled?this.appDelete_?Sx():nE():tE())};this.canceled_?t(0,new Fg(!1,null,!0)):this.backoffId_=function rE(n,e,t){let i=1,r=null,s=null,a=!1,d=0;function f(){return 2===d}let m=!1;function b(...re){m||(m=!0,e.apply(null,re))}function I(re){r=setTimeout(()=>{r=null,n(O,f())},re)}function D(){s&&clearTimeout(s)}function O(re,...Me){if(m)return void D();if(re)return D(),void b.call(null,re,...Me);if(f()||a)return D(),void b.call(null,re,...Me);let je;i<64&&(i*=2),1===d?(d=2,je=0):je=1e3*(i+Math.random()),I(je)}let V=!1;function W(re){V||(V=!0,D(),!m&&(null!==r?(re||(d=2),clearTimeout(r),I(0)):re||(d=1)))}return I(0),s=setTimeout(()=>{a=!0,W(!0)},t),W}((i,r)=>{if(r)return void i(!1,new Fg(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const a=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const d=s.getErrorCode()===Jf.NO_ERROR,f=s.getStatus();if(!d||lE(f,this.additionalRetryCodes_)&&this.retry){const b=s.getErrorCode()===Jf.ABORT;return void i(!1,new Fg(!1,null,b))}const m=-1!==this.successCodes_.indexOf(f);i(!0,new Fg(m,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function MN(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fg{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Mv(...n){const e=function uE(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(Rv())return new Blob(n);throw new Xi(Fi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const bs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hE{constructor(e,t){this.data=e,this.contentType=t||null}}function Ov(n,e){switch(n){case bs.RAW:return new hE(Ox(e));case bs.BASE64:case bs.BASE64URL:return new hE(Px(n,e));case bs.DATA_URL:return new hE(function Nx(n){const e=new fE(n);return e.base64?Px(bs.BASE64,e.rest):function PN(n){let e;try{e=decodeURIComponent(n)}catch{throw Pg(bs.DATA_URL,"Malformed data URL.")}return Ox(e)}(e.rest)}(e),function Pv(n){return new fE(n).contentType}(e))}throw Mg()}function Ox(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function Px(n,e){switch(n){case bs.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Pg(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case bs.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Pg(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function dE(n){if(typeof atob>"u")throw function kN(n){return new Xi(Fi.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:Pg(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class fE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Pg(bs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function pE(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class to{constructor(e,t){let i=0,r="";oE(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(oE(this.data_)){const r=function Mx(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new to(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new to(i,!0)}}static getBlob(...e){if(Rv()){const t=e.map(i=>i instanceof to?i.data_:i);return new to(Mv.apply(null,t))}{const t=e.map(a=>wl(a)?Ov(bs.RAW,a).data:a.data_);let i=0;t.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(a=>{for(let d=0;d<a.length;d++)r[s++]=a[d]}),new to(r,!0)}}uploadData(){return this.data_}}function mE(n){let e;try{e=JSON.parse(n)}catch{return null}return function Dx(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Fx(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function gE(n,e){return e}class no{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||gE}}let bc=null;function lh(){if(bc)return bc;const n=[];n.push(new no("bucket")),n.push(new no("generation")),n.push(new no("metageneration")),n.push(new no("name","fullPath",!0));const t=new no("name");t.xform=function e(s,a){return function Nv(n){return!wl(n)||n.length<2?n:Fx(n)}(a)},n.push(t);const r=new no("size");return r.xform=function i(s,a){return void 0!==a?Number(a):a},n.push(r),n.push(new no("timeCreated")),n.push(new no("updated")),n.push(new no("md5Hash",null,!0)),n.push(new no("cacheControl",null,!0)),n.push(new no("contentDisposition",null,!0)),n.push(new no("contentEncoding",null,!0)),n.push(new no("contentLanguage",null,!0)),n.push(new no("contentType",null,!0)),n.push(new no("metadata","customMetadata",!0)),bc=n,bc}function _E(n,e,t){const i=mE(e);return null===i?null:function Ux(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const a=t[s];i[a.local]=a.xform(i,e[a.server])}return function Lx(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Br(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function yE(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Vx="prefixes",Bx="items";class es{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function io(n){if(!n)throw Mg()}function Fv(n,e){return function t(i,r){const s=_E(n,r,e);return io(null!==s),s}}function ep(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function AN(){return new Xi(Fi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function DN(){return new Xi(Fi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Og(n){return new Xi(Fi.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Cx(n){return new Xi(Fi.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function Ug(n){const e=ep(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function xN(n){return new Xi(Fi.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function Hx(n,e,t){const r=ku(e.fullServerUrl(),n.host,n._protocol),a=n.maxOperationRetryTime,d=new es(r,"GET",Fv(n,t),a);return d.errorHandler=Ug(e),d}function jx(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=ku(e.bucketOnlyServerUrl(),n.host,n._protocol),m=n.maxOperationRetryTime,b=new es(d,"GET",function UN(n,e){return function t(i,r){const s=function LN(n,e,t){const i=mE(t);return null===i?null:function FN(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Vx])for(const r of t[Vx]){const s=r.replace(/\/$/,""),a=n._makeStorageReference(new Br(e,s));i.prefixes.push(a)}if(t[Bx])for(const r of t[Bx]){const s=n._makeStorageReference(new Br(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return io(null!==s),s}}(n,e.bucket),m);return b.urlParams=s,b.errorHandler=ep(e),b}function El(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function Lv(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class Vg{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function Uv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{io(!1)}return io(!!t&&-1!==(e||["active"]).indexOf(t)),t}const vE={STATE_CHANGED:"state_changed"},ws={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $x(n){switch(n){case"running":case"pausing":case"canceling":return ws.RUNNING;case"paused":return ws.PAUSED;case"success":return ws.SUCCESS;case"canceled":return ws.CANCELED;default:return ws.ERROR}}class cz{constructor(e,t,i){if(function sE(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function uh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Wx=null;class GN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Xf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class $N extends GN{initXhr(){this.xhr_.responseType="text"}}function Ba(){return Wx?Wx():new $N}class Yx{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=lh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Fi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(lE(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=tE()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Fi.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function Gx(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),a=El(e,i,r),d={name:a.fullPath},f=ku(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},I=yE(a,t),V=new es(f,"POST",function O(W){let re;Uv(W);try{re=W.getResponseHeader("X-Goog-Upload-URL")}catch{io(!1)}return io(wl(re)),re},n.maxUploadRetryTime);return V.urlParams=d,V.headers=b,V.body=I,V.errorHandler=ep(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ba,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function az(n,e,t,i){const f=new es(t,"POST",function s(m){const b=Uv(m,["active","final"]);let I=null;try{I=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{io(!1)}I||io(!1);const D=Number(I);return io(!isNaN(D)),new Vg(D,i.size(),"final"===b)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=ep(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Ba,t,i);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Vg(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=function lz(n,e,t,i,r,s,a,d){const f=new Vg(0,0);if(a?(f.current=a.current,f.total=a.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw function Av(){return new Xi(Fi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const m=f.total-f.current;let b=m;r>0&&(b=Math.min(b,r));const I=f.current;let O="";O=0===b?"finalize":m===b?"upload, finalize":"upload";const V={"X-Goog-Upload-Command":O,"X-Goog-Upload-Offset":`${f.current}`},W=i.slice(I,I+b);if(null===W)throw Dv();const je=new es(t,"POST",function re(Ye,xt){const Ot=Uv(Ye,["active","final"]),pn=f.current+b,zi=i.size();let cs;return cs="final"===Ot?Fv(e,s)(Ye,xt):null,new Vg(pn,zi,"final"===Ot,cs)},e.maxUploadRetryTime);return je.headers=V,je.body=W.uploadData(),je.progressCallback=d||null,je.errorHandler=ep(n),je}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(a,Ba,r,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=Hx(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Ba,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function tp(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let je="";for(let Ye=0;Ye<2;Ye++)je+=Math.random().toString().slice(2);return je}();a["Content-Type"]="multipart/related; boundary="+f;const m=El(e,i,r),b=yE(m,t),O=to.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+f+"\r\nContent-Type: "+m.contentType+"\r\n\r\n",i,"\r\n--"+f+"--");if(null===O)throw Dv();const V={name:m.fullPath},W=ku(s,n.host,n._protocol),Me=n.maxUploadRetryTime,ze=new es(W,"POST",Fv(n,t),Me);return ze.urlParams=V,ze.headers=a,ze.body=O.uploadData(),ze.errorHandler=ep(e),ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ba,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=nE(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=$x(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new cz(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch($x(this._state)){case ws.SUCCESS:uh(this._resolve.bind(null,this.snapshot))();break;case ws.CANCELED:case ws.ERROR:uh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($x(this._state)){case ws.RUNNING:case ws.PAUSED:e.next&&uh(e.next.bind(e,this.snapshot))();break;case ws.SUCCESS:e.complete&&uh(e.complete.bind(e))();break;default:e.error&&uh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Fo{constructor(e,t){this._service=e,this._location=t instanceof Br?t:Br.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fo(e,t)}get root(){const e=new Br(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fx(this._location.path)}get storage(){return this._service}get parent(){const e=function NN(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Br(this._location.bucket,e);return new Fo(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xx(e)}}function Qx(n,e,t){return wE.apply(this,arguments)}function wE(){return(wE=(0,ee.Z)(function*(n,e,t){const r=yield EE(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield Qx(n,e,r.nextPageToken))})).apply(this,arguments)}function EE(n,e){null!=e&&"number"==typeof e.maxResults&&aE("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=jx(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Ba)}function Bg(n){n._throwIfRoot("getDownloadURL");const e=function BN(n,e,t){const r=ku(e.fullServerUrl(),n.host,n._protocol),a=n.maxOperationRetryTime,d=new es(r,"GET",function VN(n,e){return function t(i,r){const s=_E(n,r,e);return io(null!==s),function ch(n,e,t,i){const r=mE(e);if(null===r||!wl(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map(m=>{const I=n.fullPath;return ku("/b/"+a(n.bucket)+"/o/"+a(I),t,i)+Ng({alt:"media",token:m})})[0]}(s,r,n.host,n._protocol)}}(n,t),a);return d.errorHandler=Ug(e),d}(n.storage,n._location,lh());return n.storage.makeRequestWithTokens(e,Ba).then(t=>{if(null===t)throw function RN(){return new Xi(Fi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function np(n,e){const t=function oz(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Br(n._location.bucket,t);return new Fo(n.storage,i)}function Hv(n,e){if(n instanceof jv){const t=n;if(null==t._bucket)throw function Tx(){return new Xi(Fi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wx+"' property when initializing the app?")}();const i=new Fo(t,t._bucket);return null!=e?Hv(i,e):i}return void 0!==e?np(n,e):n}function eD(n,e){if(e&&function Xx(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof jv)return function Jx(n,e){return new Fo(n,e)}(n,e);throw Qf("To use ref(service, url), the first argument must be a Storage instance.")}return Hv(n,e)}function tD(n,e){const t=e?.[wx];return null==t?null:Br.makeFromBucketSpec(t,n)}class jv{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=eE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Br.makeFromBucketSpec(r,this._host):tD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Br.makeFromBucketSpec(this._url,e):tD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fo(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new iE(Sx());{const a=function kx(n,e,t,i,r,s,a=!0){const d=Ng(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return function kv(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function cE(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function Rx(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,s),function Lg(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,i),new Ax(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,a)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var i=this;return(0,ee.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const Hg="@firebase/storage",zv="storage";function IE(n,e,t){return function Zx(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Yx(n,new to(e),t)}(n=(0,A.m9)(n),e,t)}function jg(n){return function YN(n){const e={prefixes:[],items:[]};return Qx(n,e).then(()=>e)}(n=(0,A.m9)(n))}function rD(n){return Bg(n=(0,A.m9)(n))}function Gv(n){return function zn(n){n._throwIfRoot("deleteObject");const e=function jN(n,e){const i=ku(e.fullServerUrl(),n.host,n._protocol),d=new es(i,"DELETE",function a(f,m){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Ug(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ba)}(n=(0,A.m9)(n))}function Mu(n,e){return eD(n=(0,A.m9)(n),e)}function ip(n=(0,Wt.getApp)(),e){n=(0,A.m9)(n);const i=(0,Wt._getProvider)(n,zv).getImmediate({identifier:e}),r=(0,A.P0)("storage");return r&&$v(i,...r),i}function $v(n,e,t,i={}){!function nD(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,A.Sg)(r,n.app.options.projectId))}(n,e,t,i)}function sD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new jv(t,i,r,e,Wt.SDK_VERSION)}!function rp(){(0,Wt._registerComponent)(new gi.wA(zv,sD,"PUBLIC").setMultipleInstances(!0)),(0,Wt.registerVersion)(Hg,"0.11.2",""),(0,Wt.registerVersion)(Hg,"0.11.2","esm2017")}();class Wv{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class oD{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Wv(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new Wv(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?a=>t(new Wv(a,this,this._ref)):{next:t.next?a=>t.next(new Wv(a,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class aD{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ha(e,this._service))}get items(){return this._delegate.items.map(e=>new Ha(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ha{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Il(n,e){return np(n,e)}(this._delegate,e);return new Ha(t,this.storage)}get root(){return new Ha(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ha(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new oD(IE(this._delegate,e,t),this)}putString(e,t=bs.RAW,i){this._throwIfRoot("putString");const r=Ov(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new oD(new Yx(this._delegate,new to(r.data,!0),s),this)}listAll(){return jg(this._delegate).then(e=>new aD(e,this.storage))}list(e){return function CE(n,e){return EE(n=(0,A.m9)(n),e)}(this._delegate,e||void 0).then(t=>new aD(t,this.storage))}getMetadata(){return function dh(n){return function uz(n){n._throwIfRoot("getMetadata");const e=Hx(n.storage,n._location,lh());return n.storage.makeRequestWithTokens(e,Ba)}(n=(0,A.m9)(n))}(this._delegate)}updateMetadata(e){return function XN(n,e){return function dz(n,e){n._throwIfRoot("updateMetadata");const t=function HN(n,e,t,i){const s=ku(e.fullServerUrl(),n.host,n._protocol),d=yE(t,i),m=n.maxOperationRetryTime,b=new es(s,"PATCH",Fv(n,i),m);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=Ug(e),b}(n.storage,n._location,e,lh());return n.storage.makeRequestWithTokens(t,Ba)}(n=(0,A.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return rD(this._delegate)}delete(){return this._throwIfRoot("delete"),Gv(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xx(e)}}class TE{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(lD(e))throw Qf("ref() expected a child path but got a URL, use refFromURL instead.");return new Ha(Mu(this._delegate,e),this)}refFromURL(e){if(!lD(e))throw Qf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Br.makeFromUrl(e,this._delegate.host)}catch{throw Qf("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ha(Mu(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){$v(this._delegate,e,t,i)}}function lD(n){return/^[A-Za-z]+:\/\//.test(n)}function JN(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new TE(t,i)}function n1(n){const e=function t1(n){return new Yi.y(e=>{const t=a=>e.next(a);t(n.snapshot);const s=n.on("state_changed",t);return n.then(a=>{t(a),e.complete()},a=>{t(n.snapshot),(a=>{e.error(a)})(a)}),function(){s()}}).pipe(Sv(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ot.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function xE(n){return{getDownloadURL:()=>(0,pt.of)(void 0).pipe(Gt.fc,(0,jn.w)(()=>n.getDownloadURL()),Gt.iC),getMetadata:()=>(0,pt.of)(void 0).pipe(Gt.fc,(0,jn.w)(()=>n.getMetadata()),Gt.iC),delete:()=>(0,On.D)(n.delete()),child:e=>xE(n.child(e)),updateMetadata:e=>(0,On.D)(n.updateMetadata(e)),put:(e,t)=>n1(n.put(e,t)),putString:(e,t,i)=>n1(n.putString(e,t,i)),list:e=>(0,On.D)(n.list(e)),listAll:()=>(0,On.D)(n.listAll())}}!function e1(n){const e={TaskState:ws,TaskEvent:vE,StringFormat:bs,Storage:TE,Reference:Ha};n.INTERNAL.registerComponent(new gi.wA("storage-compat",JN,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(TN);const qv=new u.OlP("angularfire2.storageBucket"),r1=new u.OlP("angularfire2.storage.maxUploadRetryTime"),DE=new u.OlP("angularfire2.storage.maxOperationRetryTime"),AE=new u.OlP("angularfire2.storage.use-emulator");let sp=(()=>{class n{constructor(t,i,r,s,a,d,f,m,b,I){const D=(0,li.on)(t,a,i);this.storage=(0,li.cc)(`${D.name}.storage.${r}`,"AngularFireStorage",D.name,()=>{const O=a.runOutsideAngular(()=>D.storage(r||void 0)),V=b;return V&&O.useEmulator(...V),f&&O.setMaxUploadRetryTime(f),m&&O.setMaxOperationRetryTime(m),O},[f,m])}ref(t){return xE(this.storage.ref(t))}refFromURL(t){return xE(this.storage.refFromURL(t))}upload(t,i,r){return xE(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(li.Dh),u.LFG(li.xv,8),u.LFG(qv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Gt.HU),u.LFG(r1,8),u.LFG(DE,8),u.LFG(AE,8),u.LFG(Cg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),RE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),zg=(()=>{class n{constructor(){xg.Z.registerVersion("angularfire",Gt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[sp],imports:[RE]}),n})();var Ou=U(7537),Pu=U(9940);function hh(...n){return function op(){return(0,Ou.J)(1)}()((0,On.D)(n,(0,Pu.yG)(n)))}function Es(...n){const e=(0,Pu.yG)(n);return(0,Pi.e)((t,i)=>{(e?hh(n,t,e):hh(n,t)).subscribe(i)})}function dD(){return(0,Pi.e)((n,e)=>{let t,i=!1;n.subscribe((0,qn.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}function Cl(n,e){return(0,Pi.e)(function kE(n,e,t,i,r){return(s,a)=>{let d=t,f=e,m=0;s.subscribe((0,qn.x)(a,b=>{const I=m++;f=d?n(f,b,I):(d=!0,b),i&&a.next(f)},r&&(()=>{d&&a.next(f),a.complete()})))}}(n,e,arguments.length>=2,!0))}var dt,ME=U(3997),hD=(U(8661),U(3399)),Nu=U(7592),OE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ra={},PE=PE||{},Zt=OE||self;function Kv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var FE="closure_uid_"+(1e9*Math.random()>>>0),fD=0;function LE(n,e,t){return n.call.apply(n.bind,arguments)}function Yv(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Ns(n,e,t){return(Ns=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LE:Yv).apply(null,arguments)}function Gg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function ts(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var a=Array(arguments.length-2),d=2;d<arguments.length;d++)a[d-2]=arguments[d];return e.prototype[r].apply(i,a)}}function wc(){this.s=this.s,this.o=this.o}wc.prototype.s=!1,wc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function NE(n){Object.prototype.hasOwnProperty.call(n,FE)&&n[FE]||(n[FE]=++fD)}(this)},wc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function fh(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function mD(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Kv(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let a=0;a<s;a++)n[r+a]=i[a]}else n.push(i)}}function _r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_r.prototype.h=function(){this.defaultPrevented=!0};var $g=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",()=>{},e),Zt.removeEventListener("test",()=>{},e)}catch{}return n}();function Wg(n){return/^[\s\xa0]*$/.test(n)}function qg(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function Tl(n){return-1!=qg().indexOf(n)}function UE(n){return UE[" "](n),n}UE[" "]=function(){};var VE,n,gD=Tl("Opera"),ph=Tl("Trident")||Tl("MSIE"),Zv=Tl("Edge"),_D=Zv||ph,Qv=Tl("Gecko")&&!(-1!=qg().toLowerCase().indexOf("webkit")&&!Tl("Edge"))&&!(Tl("Trident")||Tl("MSIE"))&&!Tl("Edge"),yD=-1!=qg().toLowerCase().indexOf("webkit")&&!Tl("Edge");function vD(){var n=Zt.document;return n?n.documentMode:void 0}e:{var Xv="",BE=(n=qg(),Qv?/rv:([^\);]+)(\)|;)/.exec(n):Zv?/Edge\/([\d\.]+)/.exec(n):ph?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yD?/WebKit\/(\S+)/.exec(n):gD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(BE&&(Xv=BE?BE[1]:""),ph){var Jv=vD();if(null!=Jv&&Jv>parseFloat(Xv)){VE=String(Jv);break e}}VE=Xv}var _z=Zt.document&&ph&&(vD()||parseInt(VE,10))||void 0;function ap(n,e){if(_r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Qv){e:{try{UE(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:wD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ap.$.h.call(this)}}ts(ap,_r);var wD={2:"touch",3:"pen",4:"mouse"};ap.prototype.h=function(){ap.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ro="closure_listenable_"+(1e6*Math.random()|0),ED=0;function yz(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++ED,this.fa=this.ia=!1}function lp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Sl(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ID(n){const e={};for(const t in n)e[t]=n[t];return e}const a1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CD(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<a1.length;s++)t=a1[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function cp(n){this.src=n,this.g={},this.h=0}function sa(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=pD(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(lp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function eb(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}cp.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var a=eb(n,e,i,r);return-1<a?(e=n[a],t||(e.ia=!1)):((e=new yz(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var zE="closure_lm_"+(1e6*Math.random()|0),TD={};function Hr(n,e,t,i,r){if(i&&i.once)return xD(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Hr(n,e[s],t,i,r);return null}return t=nb(t),n&&n[ro]?n.O(e,t,Fu(i)?!!i.capture:!!i,r):SD(n,e,t,!1,i,r)}function SD(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var a=Fu(r)?!!r.capture:!!r,d=WE(n);if(d||(n[zE]=d=new cp(n)),(t=d.add(e,t,i,a,s)).proxy)return t;if(i=function GE(){const e=AD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)$g||(r=a),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent($E(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function xD(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)xD(n,e[s],t,i,r);return null}return t=nb(t),n&&n[ro]?n.P(e,t,Fu(i)?!!i.capture:!!i,r):SD(n,e,t,!0,i,r)}function DD(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)DD(n,e[s],t,i,r);else i=Fu(i)?!!i.capture:!!i,t=nb(t),n&&n[ro]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=eb(s=n.g[e],t,i,r))&&(lp(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=WE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=eb(e,t,i,r)),(t=-1<n?e[n]:null)&&Kg(t))}function Kg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[ro])sa(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent($E(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=WE(e))?(sa(t,n),0==t.h&&(t.src=null,e[zE]=null)):lp(n)}}}function $E(n){return n in TD?TD[n]:TD[n]="on"+n}function AD(n,e){if(n.fa)n=!0;else{e=new ap(e,this);var t=n.listener,i=n.la||n.src;n.ia&&Kg(n),n=t.call(i,e)}return n}function WE(n){return(n=n[zE])instanceof cp?n:null}var tb="__closure_events_fn_"+(1e9*Math.random()>>>0);function nb(n){return"function"==typeof n?n:(n[tb]||(n[tb]=function(e){return n.handleEvent(e)}),n[tb])}function ns(){wc.call(this),this.i=new cp(this),this.S=this,this.J=null}function Is(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new _r(e,n);else if(e instanceof _r)e.target=e.target||n;else{var r=e;CD(e=new _r(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var a=e.g=t[s];r=Yg(a,i,!0,e)&&r}if(r=Yg(a=e.g=n,i,!0,e)&&r,r=Yg(a,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=Yg(a=e.g=t[s],i,!1,e)&&r}function Yg(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==t){var d=a.listener,f=a.la||a.src;a.ia&&sa(n.i,a),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}ts(ns,wc),ns.prototype[ro]=!0,ns.prototype.removeEventListener=function(n,e,t,i){DD(this,n,e,t,i)},ns.prototype.N=function(){if(ns.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)lp(t[i]);delete n.g[e],n.h--}}this.J=null},ns.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},ns.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var ib=Zt.JSON.stringify;function Ec(){var n=hp;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var RD=new class up{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new l1,n=>n.reset());class l1{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function MD(n){Zt.setTimeout(()=>{throw n},0)}let mh,Ic=!1,hp=new class dp{constructor(){this.h=this.g=null}add(e,t){const i=RD.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},qE=()=>{const n=Zt.Promise.resolve(void 0);mh=()=>{n.then(OD)}};var OD=()=>{for(var n;n=Ec();){try{n.h.call(n.g)}catch(t){MD(t)}var e=RD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ic=!1};function rb(n,e){ns.call(this),this.h=n||1,this.g=e||Zt,this.j=Ns(this.qb,this),this.l=Date.now()}function KE(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function YE(n,e,t){if("function"==typeof n)t&&(n=Ns(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ns(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function PD(n){n.g=YE(()=>{n.g=null,n.i&&(n.i=!1,PD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ts(rb,ns),(dt=rb.prototype).ga=!1,dt.T=null,dt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Is(this,"tick"),this.ga&&(KE(this),this.start()))}},dt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.N=function(){rb.$.N.call(this),KE(this),delete this.g};class ND extends wc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:PD(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sb(n){wc.call(this),this.h=n,this.g={}}ts(sb,wc);var FD=[];function c1(n,e,t,i){Array.isArray(t)||(t&&(FD[0]=t.toString()),t=FD);for(var r=0;r<t.length;r++){var s=Hr(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function u1(n){Sl(n.g,function(e,t){this.g.hasOwnProperty(t)&&Kg(e)},n),n.g={}}function Zg(){this.g=!0}function Cc(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function VD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<r.length;a++)r[a]=""}}}return ib(t)}catch{return e}}(n,t)+(i?" "+i:"")})}sb.prototype.N=function(){sb.$.N.call(this),u1(this)},sb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zg.prototype.Ea=function(){this.g=!1},Zg.prototype.info=function(){};var gh={},ZE=null;function Qg(){return ZE=ZE||new ns}function qt(n){_r.call(this,gh.Ta,n)}function fp(n){const e=Qg();Is(e,new qt(e))}function QE(n,e){_r.call(this,gh.STAT_EVENT,n),this.stat=e}function Rr(n){const e=Qg();Is(e,new QE(e,n))}function XE(n,e){_r.call(this,gh.Ua,n),this.size=e}function Xg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}gh.Ta="serverreachability",ts(qt,_r),gh.STAT_EVENT="statevent",ts(QE,_r),gh.Ua="timingevent",ts(XE,_r);var _h={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jg(){}function JE(){}Jg.prototype.h=null;var ob,vh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function e_(){_r.call(this,"d")}function t_(){_r.call(this,"c")}function mp(){}function n_(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new sb(this),this.P=d1,this.V=new rb(n=_D?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new BD}function BD(){this.i=null,this.g="",this.h=!1}ts(e_,_r),ts(t_,_r),ts(mp,Jg),mp.prototype.g=function(){return new XMLHttpRequest},mp.prototype.i=function(){return{}},ob=new mp;var d1=45e3,ab={},lb={};function eI(n,e,t){n.L=1,n.v=ub(Tc(e)),n.s=t,n.S=!0,HD(n,null)}function HD(n,e){n.G=Date.now(),i_(n),n.A=Tc(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),iI(t.i,"t",i),n.C=0,t=n.l.J,n.h=new BD,n.g=bA(n.l,t?e:null,!n.s),0<n.O&&(n.M=new ND(Ns(n.Pa,n,n.g),n.O)),c1(n.U,n.g,"readystatechange",n.nb),e=n.I?ID(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),fp(),function LD(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var a="",d=s.split("&"),f=0;f<d.length;f++){var m=d[f].split("=");if(1<m.length){var b=m[0];m=m[1];var I=b.split("_");a=2<=I.length&&"type"==I[1]?a+(b+"=")+m+"&":a+(b+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+a})}(n.j,n.u,n.A,n.m,n.W,n.s)}function jD(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function tI(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=zD(n,t),r==lb){4==e&&(n.o=4,Rr(14),i=!1),Cc(n.j,n.m,null,"[Incomplete Response]");break}if(r==ab){n.o=4,Rr(15),Cc(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Cc(n.j,n.m,r,null),$D(n,r)}jD(n)&&r!=lb&&r!=ab&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Rr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),wb(e),e.M=!0,Rr(11))):(Cc(n.j,n.m,t,"[Invalid Chunked Response]"),bh(n),r_(n))}function zD(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?lb:(t=Number(e.substring(t,i)),isNaN(t)?ab:(i+=1)+t>e.length?lb:(e=e.slice(i,i+t),n.C=i+t,e))}function i_(n){n.Y=Date.now()+n.P,GD(n,n.P)}function GD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xg(Ns(n.lb,n),e)}function Fs(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function r_(n){0==n.l.H||n.J||uI(n.l,n)}function bh(n){Fs(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,KE(n.V),u1(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function $D(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||a_(t.i,n)))if(!n.K&&a_(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;cI(t),Eh(t)}bb(t),Rr(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=Xg(Ns(t.ib,t),6e3));if(1>=tA(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else wp(t,11)}else if((n.K||t.g==n)&&cI(t),!Wg(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let m=r[e];if(t.V=m[0],m=m[1],2==t.H)if("c"==m[0]){t.K=m[1],t.pa=m[2];const b=m[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const I=m[4];null!=I&&(t.Ga=I,t.l.info("SVER="+t.Ga));const D=m[5];null!=D&&"number"==typeof D&&0<D&&(t.L=i=1.5*D,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const O=n.g;if(O){const V=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var s=i.i;s.g||-1==V.indexOf("spdy")&&-1==V.indexOf("quic")&&-1==V.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(rI(s,s.h),s.h=null))}if(i.F){const W=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;W&&(i.Da=W,bi(i.I,i.F,W))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var a=n;if((i=t).wa=vA(i,i.J?i.pa:null,i.Y),a.K){sI(i.i,a);var d=a,f=i.L;f&&d.setTimeout(f),d.B&&(Fs(d),i_(d)),i.g=a}else _A(i);0<t.j.length&&vb(t)}else"stop"!=m[0]&&"close"!=m[0]||wp(t,7);else 3==t.H&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?wp(t,7):lI(t):"noop"!=m[0]&&t.h&&t.h.Aa(m),t.A=0)}fp()}catch{}}function qD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Kv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function WD(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Kv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function nI(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Kv(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(dt=n_.prototype).setTimeout=function(n){this.P=n},dt.nb=function(n){n=n.target;const e=this.M;e&&3==Dl(n)?e.l():this.Pa(n)},dt.Pa=function(n){try{if(n==this.g)e:{const b=Dl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||_D||this.g&&(this.h.h||this.g.ja()||hA(this.g)))){this.J||4!=b||7==e||fp(),Fs(this);var t=this.g.da();this.ca=t;t:if(jD(this)){var i=hA(this.g);n="";var r=i.length,s=4==Dl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bh(this),r_(this);var a="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==t,function vz(n,e,t,i,r,s,a){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+a})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wg(d)){var m=d;break t}}m=null}if(!(t=m)){this.i=!1,this.o=3,Rr(12),bh(this),r_(this);break e}Cc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$D(this,t)}this.S?(tI(this,b,a),_D&&this.i&&3==b&&(c1(this.U,this.V,"tick",this.mb),this.V.start())):(Cc(this.j,this.m,a,null),$D(this,a)),4==b&&bh(this),this.i&&!this.J&&(4==b?uI(this.l,this):(this.i=!1,i_(this)))}else(function _1(n){const e={};n=(n.g&&2<=Dl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(Wg(n[i]))continue;var t=kD(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function jE(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<a.indexOf("Unknown SID")?(this.o=3,Rr(12)):(this.o=0,Rr(13)),bh(this),r_(this)}}}catch{}},dt.mb=function(){if(this.g){var n=Dl(this.g),e=this.g.ja();this.C<e.length&&(Fs(this),tI(this,n,e),this.i&&4!=n&&i_(this))}},dt.cancel=function(){this.J=!0,bh(this)},dt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function UD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(fp(),Rr(17)),bh(this),this.o=2,r_(this)):GD(this,this.Y-n)};var KD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Lu){this.h=n.h,cb(this,n.j),this.s=n.s,this.g=n.g,gp(this,n.m),this.l=n.l;var e=n.i,t=new _p;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),YD(this,t),this.o=n.o}else n&&(e=String(n).match(KD))?(this.h=!1,cb(this,e[1]||"",!0),this.s=s_(e[2]||""),this.g=s_(e[3]||"",!0),gp(this,e[4]),this.l=s_(e[5]||"",!0),YD(this,e[6]||"",!0),this.o=s_(e[7]||"")):(this.h=!1,this.i=new _p(null,this.h))}function Tc(n){return new Lu(n)}function cb(n,e,t){n.j=t?s_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function gp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function YD(n,e,t){e instanceof _p?(n.i=e,function XD(n,e){e&&!n.j&&(ja(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(hb(this,i),iI(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=o_(e,p1)),n.i=new _p(e,n.h))}function bi(n,e,t){n.i.set(e,t)}function ub(n){return bi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function s_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function o_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xl),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xl(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Lu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(o_(e,db,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(o_(e,db,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(o_(t,"/"==t.charAt(0)?ZD:f1,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",o_(t,QD)),n.join("")};var db=/[#\/\?@]/g,f1=/[#\?:]/g,ZD=/[#\?]/g,p1=/[#\?@]/g,QD=/#/g;function _p(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ja(n){n.g||(n.g=new Map,n.h=0,n.i&&function h1(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hb(n,e){ja(n),e=wh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function m1(n,e){return ja(n),e=wh(n,e),n.g.has(e)}function iI(n,e,t){hb(n,e),0<t.length&&(n.i=null,n.g.set(wh(n,e),fh(t)),n.h+=t.length)}function wh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fb(n){this.l=n||Sc,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=_p.prototype).add=function(n,e){ja(this),this.i=null,n=wh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){ja(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},dt.ta=function(){ja(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},dt.Z=function(n){ja(this);let e=[];if("string"==typeof n)m1(this,n)&&(e=e.concat(this.g.get(wh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},dt.set=function(n,e){return ja(this),this.i=null,m1(this,n=wh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=s;""!==a[i]&&(r+="="+encodeURIComponent(String(a[i]))),n.push(r)}}return this.i=n.join("&")};var Sc=10;function eA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tA(n){return n.h?1:n.g?n.g.size:0}function a_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function rI(n,e){n.g?n.g.add(e):n.h=e}function sI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nA(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return fh(n.i)}fb.prototype.cancel=function(){if(this.i=nA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var pb=class{stringify(n){return Zt.JSON.stringify(n,void 0)}parse(n){return Zt.JSON.parse(n,void 0)}};function l_(){this.g=new pb}function iA(n,e,t){const i=t||"";try{qD(n,function(r,s){let a=r;Fu(r)&&(a=ib(r)),e.push(i+s+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function oI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function c_(n){this.l=n.fc||null,this.j=n.ob||!1}function u_(n,e){ns.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=gb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ts(c_,Jg),c_.prototype.g=function(){return new u_(this.l,this.j)},c_.prototype.i=function(n){return function(){return n}}({}),ts(u_,ns);var gb=0;function rA(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function d_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yp(n)}function yp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=u_.prototype).open=function(n,e){if(this.readyState!=gb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yp(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Zt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,d_(this)),this.readyState=gb},dt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yp(this)),this.g&&(this.readyState=3,yp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rA(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},dt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?d_(this):yp(this),3==this.readyState&&rA(this)}},dt.Za=function(n){this.g&&(this.response=this.responseText=n,d_(this))},dt.Ya=function(n){this.g&&(this.response=n,d_(this))},dt.ka=function(){this.g&&d_(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(u_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sA=Zt.JSON.parse;function _i(n){ns.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oA,this.L=this.M=!1}ts(_i,ns);var oA="",aA=/^https?$/i,lA=["POST","PUT"];function cA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vp(n),_b(n)}function vp(n){n.F||(n.F=!0,Is(n,"complete"),Is(n,"error"))}function uA(n){if(n.h&&typeof PE<"u"&&(!n.C[1]||4!=Dl(n)||2!=n.da()))if(n.v&&4==Dl(n))YE(n.La,0,n);else if(Is(n,"readystatechange"),4==Dl(n)){n.h=!1;try{const a=n.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===a){var r=String(n.I).match(KD)[1]||null;!r&&Zt.self&&Zt.self.location&&(r=Zt.self.location.protocol.slice(0,-1)),i=!aA.test(r?r.toLowerCase():"")}t=i}if(t)Is(n,"complete"),Is(n,"success");else{n.m=6;try{var s=2<Dl(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",vp(n)}}finally{_b(n)}}}function _b(n,e){if(n.g){dA(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Is(n,"ready");try{t.onreadystatechange=i}catch{}}}function dA(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function Dl(n){return n.g?n.g.readyState:0}function hA(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case oA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function fA(n){let e="";return Sl(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function aI(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=fA(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bi(n,e,t))}function bp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function yb(n){this.Ga=0,this.j=[],this.l=new Zg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bp("baseRetryDelayMs",5e3,n),this.hb=bp("retryDelaySeedMs",1e4,n),this.eb=bp("forwardChannelMaxRetries",2,n),this.xa=bp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new fb(n&&n.concurrentRequestLimit),this.Ja=new l_,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lI(n){if(pA(n),3==n.H){var e=n.W++,t=Tc(n.I);if(bi(t,"SID",n.K),bi(t,"RID",e),bi(t,"TYPE","terminate"),h_(n,t),(e=new n_(n,n.l,e)).L=2,e.v=ub(Tc(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{t=Zt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=bA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),i_(e)}f_(n)}function Eh(n){n.g&&(wb(n),n.g.cancel(),n.g=null)}function pA(n){Eh(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),cI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function vb(n){if(!eA(n.i)&&!n.m){n.m=!0;var e=n.Na;mh||qE(),Ic||(mh(),Ic=!0),hp.add(e,n),n.C=0}}function mA(n,e){var t;t=e?e.m:n.W++;const i=Tc(n.I);bi(i,"SID",n.K),bi(i,"RID",t),bi(i,"AID",n.V),h_(n,i),n.o&&n.s&&aI(i,n.o,n.s),t=new n_(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=gA(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),rI(n.i,t),eI(t,i,e)}function h_(n,e){n.na&&Sl(n.na,function(t,i){bi(e,i,t)}),n.h&&qD({},function(t,i){bi(e,i,t)})}function gA(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Ns(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const a=["count="+t];-1==s?0<t?(s=r[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let m=r[f].g;const b=r[f].map;if(m-=s,0>m)s=Math.max(0,r[f].g-100),d=!1;else try{iA(b,a,"req"+m+"_")}catch{i&&i(b)}}if(d){i=a.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function _A(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;mh||qE(),Ic||(mh(),Ic=!0),hp.add(e,n),n.A=0}}function bb(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Xg(Ns(n.Ma,n),dI(n,n.A)),n.A++,0))}function wb(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function yA(n){n.g=new n_(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Tc(n.wa);bi(e,"RID","rpc"),bi(e,"SID",n.K),bi(e,"AID",n.V),bi(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&bi(e,"TO",n.qa),bi(e,"TYPE","xmlhttp"),h_(n,e),n.o&&n.s&&aI(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=ub(Tc(e)),t.s=null,t.S=!0,HD(t,n)}function cI(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function uI(n,e){var t=null;if(n.g==e){cI(n),wb(n),n.g=null;var i=2}else{if(!a_(n.i,e))return;t=e.F,sI(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;Is(i=Qg(),new XE(i,t)),vb(n)}else _A(n);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function y1(n,e){return!(tA(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Xg(Ns(n.Na,n,e),dI(n,n.C)),n.C++,0)))}(n,e)||2==i&&bb(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:wp(n,5);break;case 4:wp(n,10);break;case 3:wp(n,6);break;default:wp(n,2)}}function dI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function wp(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=Ns(n.pb,n);t||(t=new Lu("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||cb(t,"https"),ub(t)),function mb(n,e){const t=new Zg;if(Zt.Image){const i=new Image;i.onload=Gg(oI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Gg(oI,t,i,"TestLoadImage: error",!1,e),i.onabort=Gg(oI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Gg(oI,t,i,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Rr(2);n.H=0,n.h&&n.h.za(e),f_(n),pA(n)}function f_(n){if(n.H=0,n.ma=[],n.h){const e=nA(n.i);(0!=e.length||0!=n.j.length)&&(mD(n.ma,e),mD(n.ma,n.j),n.i.i.length=0,fh(n.j),n.j.length=0),n.h.ya()}}function vA(n,e,t){var i=t instanceof Lu?Tc(t):new Lu(t);if(""!=i.g)e&&(i.g=e+"."+i.g),gp(i,i.m);else{var r=Zt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Lu(null);i&&cb(s,i),e&&(s.g=e),r&&gp(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&bi(i,t,e),bi(i,"VER",n.ra),h_(n,i),i}function bA(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _i(t&&n.Ha&&!n.va?new c_({ob:!0}):n.va)).Oa(n.J),e}function Eb(){}function Ib(){if(ph&&!(10<=Number(_z)))throw Error("Environmental error: no available transport.")}function er(n,e){ns.call(this),this.g=new yb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Wg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new oa(this)}function Ep(n){e_.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Cs(){t_.call(this),this.status=1}function oa(n){this.g=n}function tr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function p_(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],a=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;a=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(a<<7&4294967295|a>>>25))+((a=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(e=t+((a=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=s+((a=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Rn(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(dt=_i.prototype).Oa=function(n){this.M=n},dt.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ob.g(),this.C=function pp(n){return n.h||(n.h=n.i())}(this.u?this.u:ob),this.g.onreadystatechange=Ns(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void cA(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=Zt.FormData&&n instanceof Zt.FormData,!(0<=pD(lA,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of t)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dA(this),0<this.B&&((this.L=function g1(n){return ph&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ns(this.ua,this)):this.A=YE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){cA(this,s)}},dt.ua=function(){typeof PE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Is(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Is(this,"complete"),Is(this,"abort"),_b(this))},dt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_b(this,!0)),_i.$.N.call(this)},dt.La=function(){this.s||(this.G||this.v||this.l?uA(this):this.kb())},dt.kb=function(){uA(this)},dt.isActive=function(){return!!this.g},dt.da=function(){try{return 2<Dl(this)?this.g.status:-1}catch{return-1}},dt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sA(e)}},dt.Ia=function(){return this.m},dt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=yb.prototype).ra=8,dt.H=1,dt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new n_(this,this.l,n);let s=this.s;if(this.U&&(s?(s=ID(s),CD(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gA(this,r,e),bi(t=Tc(this.I),"RID",n),bi(t,"CVER",22),this.F&&bi(t,"X-HTTP-Session-Id",this.F),h_(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(fA(s)))+"&"+e:this.o&&aI(t,this.o,s)),rI(this.i,r),this.bb&&bi(t,"TYPE","init"),this.P?(bi(t,"$req",e),bi(t,"SID","null"),r.aa=!0,eI(r,t,null)):eI(r,t,e),this.H=2}}else 3==this.H&&(n?mA(this,n):0==this.j.length||eA(this.i)||mA(this))},dt.Ma=function(){if(this.u=null,yA(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Xg(Ns(this.jb,this),n)}},dt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Rr(10),Eh(this),yA(this))},dt.ib=function(){null!=this.v&&(this.v=null,Eh(this),bb(this),Rr(19))},dt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Rr(2)):(this.l.info("Failed to ping google.com"),Rr(1))},dt.isActive=function(){return!!this.h&&this.h.isActive(this)},(dt=Eb.prototype).Ba=function(){},dt.Aa=function(){},dt.za=function(){},dt.ya=function(){},dt.isActive=function(){return!0},dt.Va=function(){},Ib.prototype.g=function(n,e){return new er(n,e)},ts(er,ns),er.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Rr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=vA(n,null,n.Y),vb(n)},er.prototype.close=function(){lI(this.g)},er.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ib(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&vb(e)},er.prototype.N=function(){this.g.h=null,delete this.j,lI(this.g),delete this.g,er.$.N.call(this)},ts(Ep,e_),ts(Cs,t_),ts(oa,Eb),oa.prototype.Ba=function(){Is(this.g,"a")},oa.prototype.Aa=function(n){Is(this.g,new Ep(n))},oa.prototype.za=function(n){Is(this.g,new Cs)},oa.prototype.ya=function(){Is(this.g,"b")},ts(tr,function Cb(){this.blockSize=-1}),tr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},tr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)p_(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){p_(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){p_(this,i),r=0;break}}this.h=r,this.i+=e},tr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var Ip={};function Uu(n){return-128<=n&&128>n?function o1(n,e){var t=Ip;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Rn([0|e],0>e?-1:0)}):new Rn([0|n],0>n?-1:0)}function so(n){if(isNaN(n)||!isFinite(n))return za;if(0>n)return is(so(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=Vu;return new Rn(e,0)}var Vu=4294967296,za=Uu(0),Bu=Uu(1),Ch=Uu(16777216);function Al(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Lo(n){return-1==n.h}function is(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Rn(t,~n.h).add(Bu)}function m_(n,e){return n.add(is(e))}function g_(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Cp(n,e){this.g=n,this.h=e}function __(n,e){if(Al(e))throw Error("division by zero");if(Al(n))return new Cp(za,za);if(Lo(n))return e=__(is(n),e),new Cp(is(e.g),is(e.h));if(Lo(e))return e=__(n,is(e)),new Cp(is(e.g),e.h);if(30<n.g.length){if(Lo(n)||Lo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Bu,i=e;0>=i.X(n);)t=hI(t),i=hI(i);var r=Th(t,1),s=Th(i,1);for(i=Th(i,2),t=Th(t,2);!Al(i);){var a=s.add(i);0>=a.X(n)&&(r=r.add(t),s=a),i=Th(i,1),t=Th(t,1)}return e=m_(n,r.R(e)),new Cp(r,e)}for(r=za;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),a=(s=so(t)).R(e);Lo(a)||0<a.X(n);)a=(s=so(t-=i)).R(e);Al(s)&&(s=Bu),r=r.add(s),n=m_(n,a)}return new Cp(r,n)}function hI(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Rn(t,n.h)}function Th(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Rn(r,n.h)}(dt=Rn.prototype).ea=function(){if(Lo(this))return-is(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:Vu+i)*e,e*=Vu}return n},dt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Al(this))return"0";if(Lo(this))return"-"+is(this).toString(n);for(var e=so(Math.pow(n,6)),t=this,i="";;){var r=__(t,e).g,s=((0<(t=m_(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Al(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},dt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},dt.X=function(n){return Lo(n=m_(this,n))?-1:Al(n)?0:1},dt.abs=function(){return Lo(this)?is(this):this},dt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),a=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=a>>>16,t[r]=(a&=65535)<<16|(s&=65535)}return new Rn(t,-2147483648&t[t.length-1]?-1:0)},dt.R=function(n){if(Al(this)||Al(n))return za;if(Lo(this))return Lo(n)?is(this).R(is(n)):is(is(this).R(n));if(Lo(n))return is(this.R(is(n)));if(0>this.X(Ch)&&0>n.X(Ch))return so(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,a=65535&this.D(i),d=n.D(r)>>>16,f=65535&n.D(r);t[2*i+2*r]+=a*f,g_(t,2*i+2*r),t[2*i+2*r+1]+=s*f,g_(t,2*i+2*r+1),t[2*i+2*r+1]+=a*d,g_(t,2*i+2*r+1),t[2*i+2*r+2]+=s*d,g_(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Rn(t,0)},dt.gb=function(n){return __(this,n).h},dt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Rn(t,this.h&n.h)},dt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Rn(t,this.h|n.h)},dt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Rn(t,this.h^n.h)},Ib.prototype.createWebChannel=Ib.prototype.g,er.prototype.send=er.prototype.u,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,_h.NO_ERROR=0,_h.TIMEOUT=8,_h.HTTP_ERROR=6,yh.COMPLETE="complete",JE.EventType=vh,vh.OPEN="a",vh.CLOSE="b",vh.ERROR="c",vh.MESSAGE="d",ns.prototype.listen=ns.prototype.O,_i.prototype.listenOnce=_i.prototype.P,_i.prototype.getLastError=_i.prototype.Sa,_i.prototype.getLastErrorCode=_i.prototype.Ia,_i.prototype.getStatus=_i.prototype.da,_i.prototype.getResponseJson=_i.prototype.Wa,_i.prototype.getResponseText=_i.prototype.ja,_i.prototype.send=_i.prototype.ha,_i.prototype.setWithCredentials=_i.prototype.Oa,tr.prototype.digest=tr.prototype.l,tr.prototype.reset=tr.prototype.reset,tr.prototype.update=tr.prototype.j,Rn.prototype.add=Rn.prototype.add,Rn.prototype.multiply=Rn.prototype.R,Rn.prototype.modulo=Rn.prototype.gb,Rn.prototype.compare=Rn.prototype.X,Rn.prototype.toNumber=Rn.prototype.ea,Rn.prototype.toString=Rn.prototype.toString,Rn.prototype.getBits=Rn.prototype.D,Rn.fromNumber=so,Rn.fromString=function Ih(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return is(Ih(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=so(Math.pow(e,8)),i=za,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),a=parseInt(n.substring(r,r+s),e);8>s?(s=so(Math.pow(e,s)),i=i.R(s).add(so(a))):i=(i=i.R(t)).add(so(a))}return i};var fI=ra.createWebChannelTransport=function(){return new Ib},v1=ra.getStatEventTarget=function(){return Qg()},wA=ra.ErrorCode=_h,bz=ra.EventType=yh,b1=ra.Event=gh,EA=ra.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wz=ra.FetchXmlHttpFactory=c_,Tb=ra.WebChannel=JE,Ez=ra.XhrIo=_i,w1=ra.Md5=tr,Tp=ra.Integer=Rn;const IA="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let Rl="9.23.0";const kl=new Ni.Yd("@firebase/firestore");function Sp(){return kl.logLevel}function He(n,...e){if(kl.logLevel<=Ni.in.DEBUG){const t=e.map(Sh);kl.debug(`Firestore (${Rl}): ${n}`,...t)}}function nr(n,...e){if(kl.logLevel<=Ni.in.ERROR){const t=e.map(Sh);kl.error(`Firestore (${Rl}): ${n}`,...t)}}function aa(n,...e){if(kl.logLevel<=Ni.in.WARN){const t=e.map(Sh);kl.warn(`Firestore (${Rl}): ${n}`,...t)}}function Sh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function mt(n="Unexpected state"){const e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function Tt(n,e){n||mt()}function ct(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends A.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class I1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kr.UNAUTHENTICATED))}shutdown(){}}class T1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pI{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let a=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ir,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const m=a;e.enqueueRetryable((0,ee.Z)(function*(){yield m.promise,yield s(i.currentUser)}))},f=m=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ir)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt("string"==typeof i.accessToken),new I1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new kr(e)}}class S1{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class TA{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new S1(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x1{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.T;return this.T=s.token,He("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.T=t.token,new SA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class mI{static A(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=xA(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function $t(n,e){return n<e?-1:n>e?1:0}function xp(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function DA(n){return n+"\0"}class wi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wi.fromMillis(Date.now())}static fromDate(e){return wi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new wi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new wi(0,0))}static max(){return new It(new wi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xh{constructor(e,t,i){void 0===t?t=0:t>e.length&&mt(),void 0===i?i=e.length-t:i>e.length-t&&mt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===xh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xh?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),a=t.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kn extends xh{construct(e,t,i){return new kn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new kn(t)}static emptyPath(){return new kn([])}}const Sb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ei extends xh{construct(e,t,i){return new Ei(e,t,i)}static isValidIdentifier(e){return Sb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ei.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ei(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let a=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new Le(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Le(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else"`"===d?(a=!a,r++):"."!==d||a?(i+=d,r++):(s(),r++)}if(s(),a)throw new Le(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ei(t)}static emptyPath(){return new Ei([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(kn.fromString(e))}static fromName(e){return new rt(kn.fromString(e).popFirst(5))}static empty(){return new rt(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new kn(e.slice()))}}class y_{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function gI(n){return n.fields.find(e=>2===e.kind)}function Dh(n){return n.fields.filter(e=>2!==e.kind)}y_.UNKNOWN_ID=-1;class Ah{constructor(e,t){this.fieldPath=e,this.kind=t}}class Dp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Dp(0,Uo.min())}}function _I(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=It.fromTimestamp(1e9===i?new wi(t+1,0):new wi(t,i));return new Uo(r,rt.empty(),e)}function AA(n){return new Uo(n.readTime,n.key,-1)}class Uo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Uo(It.min(),rt.empty(),-1)}static max(){return new Uo(It.max(),rt.empty(),-1)}}function Db(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const Ab="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ml(n){return Rb.apply(this,arguments)}function Rb(){return Rb=(0,ee.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==Ab)throw n;He("LocalStore","Unexpectedly lost primary lease")}),Rb.apply(this,arguments)}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,i)=>{t(e)})}static reject(e){return new fe((t,i)=>{i(e)})}static waitFor(e){return new fe((t,i)=>{let r=0,s=0,a=!1;e.forEach(d=>{++r,d.next(()=>{++s,a&&s===r&&t()},f=>i(f))}),a=!0,s===r&&t()})}static or(e){let t=fe.resolve(!1);for(const i of e)t=t.next(r=>r?fe.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new fe((i,r)=>{const s=e.length,a=new Array(s);let d=0;for(let f=0;f<s;f++){const m=f;t(e[m]).next(b=>{a[m]=b,++d,d===s&&i(a)},b=>r(b))}})}static doWhile(e,t){return new fe((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class v_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ir,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ap(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=b_(i.target.error);this.v.reject(new Ap(e,r))}}static open(e,t,i,r){try{return new v_(t,e.transaction(r,i))}catch(s){throw new Ap(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kA(t)}}class la{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===la.S((0,A.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),ju(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,A.hl)())return!1;if(la.C())return!0;const e=(0,A.z$)(),t=la.S(e),i=0<t&&t<10,r=la.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,ee.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=a=>{i(a.target.result)},s.onblocked=()=>{r(new Ap(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const d=a.target.error;r("VersionError"===d.name?new Le(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Le(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Ap(e,d))},s.onupgradeneeded=a=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',a.oldVersion),t.V.O(a.target.result,s.transaction,a.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,ee.Z)(function*(){const a="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.$(e);const f=v_.open(s.db,e,a?"readonly":"readwrite",i),m=r(f).next(b=>(f.P(),b)).catch(b=>(f.abort(b),fe.reject(b))).toPromise();return m.catch(()=>{}),yield f.R,m}catch(f){const m=f,b="FirebaseError"!==m.name&&d<3;if(He("SimpleDb","Transaction failed with error:",m.message,"Retrying:",b),s.close(),!b)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class RA{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ju(this.L.delete())}}class Ap extends Le{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hu(n){return"IndexedDbTransactionError"===n.name}class kA{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ju(i)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),ju(this.store.add(e))}get(e){return ju(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),ju(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),ju(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(a,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new fe((s,a)=>{r.onerror=d=>{a(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new fe((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}J(e,t){He("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,a,d)=>d.delete())}X(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Z(e){const t=this.cursor({});return new fe((i,r)=>{t.onerror=s=>{const a=b_(s.target.error);r(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(d=>{d?a.continue():i()}):i()}})}W(e,t){const i=[];return new fe((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const d=a.target.result;if(!d)return void r();const f=new RA(d),m=t(d.primaryKey,d.value,f);if(m instanceof fe){const b=m.catch(I=>(f.done(),fe.reject(I)));i.push(b)}f.isDone?r():null===f.K?d.continue():d.continue(f.K)}}).next(()=>fe.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ju(n){return new fe((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=b_(i.target.error);t(r)}})}let kb=!1;function b_(n){const e=la.S((0,A.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kb||(kb=!0,setTimeout(()=>{throw i},0)),i}}return n}class MA{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ee.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Hu(i)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ml(i)}yield t.et(6e4)}))}}class OA{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,s=!0;return fe.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(null!==a&&!i.has(a))return He("IndexBackiller",`Processing collection: ${a}`),this.it(e,a,r).next(d=>{r-=d,i.add(a)});s=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.rt(r,s)).next(d=>(He("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>a.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,s)=>{const a=AA(s);Db(a,i)>0&&(i=a)}),new Uo(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let wo=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Rp(n){return null==n}function kp(n){return 0===n&&1/n==-1/0}function vI(n){return"number"==typeof n&&Number.isInteger(n)&&!kp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=w_(e)),e=PA(n.get(t),e);return w_(e)}function PA(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function w_(n){return n+"\x01\x01"}function Ss(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),kn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const a=n.indexOf("\x01",s);switch((a<0||a>t)&&mt(),n.charAt(a+1)){case"\x01":const d=n.substring(s,a);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(s,a),r+="\0";break;case"\x11":r+=n.substring(s,a+1);break;default:mt()}s=a+2}return new kn(i)}const NA=["userId","batchId"];function Mb(n,e){return[n,Ts(e)]}function Ob(n,e,t){return[n,Ts(e),t]}const Rh={},bI=["prefixPath","collectionGroup","readTime","documentId"],R1=["prefixPath","collectionGroup","documentId"],wI=["collectionGroup","readTime","prefixPath","documentId"],Iz=["canonicalId","targetId"],Cz=["targetId","path"],k1=["path","targetId"],M1=["collectionId","parent"],FA=["indexId","uid"],O1=["uid","sequenceNumber"],jr=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LA=["indexId","uid","orderedDocumentKey"],P1=["userId","collectionPath","documentId"],N1=["userId","collectionPath","largestBatchId"],UA=["userId","collectionGroup","largestBatchId"],VA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BA=[...VA,"documentOverlays"],EI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kh=EI,F1=[...kh,"indexConfiguration","indexState","indexEntries"];class II extends yI{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function zr(n,e){const t=ct(n);return la.M(t.ht,e)}function HA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class di{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new di(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new di(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mp(this.root,e,this.comparator,!0)}}class Mp{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??yi.RED,this.left=r??yi.EMPTY,this.right=s??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new yi(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new yi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ii{constructor(e){this.comparator=e,this.data=new di(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jA(this.data.getIterator())}getIteratorFrom(e){return new jA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ii(this.comparator);return t.data=e,t}}class jA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function oo(n){return n.hasNext()?n.getNext():void 0}class Li{constructor(e){this.fields=e,e.sort(Ei.comparator)}static empty(){return new Li([])}unionWith(e){let t=new Ii(Ei.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xp(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class ca extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ca("Invalid base64 string: "+r):r}}(e);return new Mr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mr.EMPTY_BYTE_STRING=new Mr("");const U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zu(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=U1.exec(n);if(Tt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rr(n.seconds),nanos:rr(n.nanos)}}function rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dc(n){return"string"==typeof n?Mr.fromBase64String(n):Mr.fromUint8Array(n)}function Op(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gu(n){const e=n.mapValue.fields.__previous_value__;return Op(e)?Gu(e):e}function E_(n){const e=zu(n.mapValue.fields.__local_write_time__.timestampValue);return new wi(e.seconds,e.nanos)}class GA{constructor(e,t,i,r,s,a,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class $u{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $u("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $u&&e.projectId===this.projectId&&e.database===this.database}}const Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},I_={nullValue:"NULL_VALUE"};function Ac(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Op(n)?4:DI(n)?9007199254740991:10:mt()}function Vo(n,e){if(n===e)return!0;const t=Ac(n);if(t!==Ac(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return E_(n).isEqual(E_(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=zu(i.timestampValue),a=zu(r.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Dc(n.bytesValue).isEqual(Dc(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return rr(i.geoPointValue.latitude)===rr(r.geoPointValue.latitude)&&rr(i.geoPointValue.longitude)===rr(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return rr(i.integerValue)===rr(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=rr(i.doubleValue),a=rr(r.doubleValue);return s===a?kp(s)===kp(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return xp(n.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(i,r){const s=i.mapValue.fields||{},a=r.mapValue.fields||{};if(HA(s)!==HA(a))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===a[d]||!Vo(s[d],a[d])))return!1;return!0}(n,e);default:return mt()}var r}function C_(n,e){return void 0!==(n.values||[]).find(t=>Vo(t,e))}function Rc(n,e){if(n===e)return 0;const t=Ac(n),i=Ac(e);if(t!==i)return $t(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(r,s){const a=rr(r.integerValue||r.doubleValue),d=rr(s.integerValue||s.doubleValue);return a<d?-1:a>d?1:a===d?0:isNaN(a)?isNaN(d)?0:-1:1}(n,e);case 3:return CI(n.timestampValue,e.timestampValue);case 4:return CI(E_(n),E_(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(r,s){const a=Dc(r),d=Dc(s);return a.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const a=r.split("/"),d=s.split("/");for(let f=0;f<a.length&&f<d.length;f++){const m=$t(a[f],d[f]);if(0!==m)return m}return $t(a.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const a=$t(rr(r.latitude),rr(s.latitude));return 0!==a?a:$t(rr(r.longitude),rr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const a=r.values||[],d=s.values||[];for(let f=0;f<a.length&&f<d.length;++f){const m=Rc(a[f],d[f]);if(m)return m}return $t(a.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Wu.mapValue&&s===Wu.mapValue)return 0;if(r===Wu.mapValue)return 1;if(s===Wu.mapValue)return-1;const a=r.fields||{},d=Object.keys(a),f=s.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let b=0;b<d.length&&b<m.length;++b){const I=$t(d[b],m[b]);if(0!==I)return I;const D=Rc(a[d[b]],f[m[b]]);if(0!==D)return D}return $t(d.length,m.length)}(n.mapValue,e.mapValue);default:throw mt()}}function CI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=zu(n),i=zu(e),r=$t(t.seconds,i.seconds);return 0!==r?r:$t(t.nanos,i.nanos)}function Mh(n){return TI(n)}function TI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=zu(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dc(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const a of i.values||[])s?s=!1:r+=",",r+=TI(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",a=!0;for(const d of r)a?a=!1:s+=",",s+=`${d}:${TI(i.fields[d])}`;return s+"}"}(n.mapValue):mt();var e}function kc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Pp(n){return!!n&&"integerValue"in n}function Np(n){return!!n&&"arrayValue"in n}function SI(n){return!!n&&"nullValue"in n}function xI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function T_(n){return!!n&&"mapValue"in n}function Fp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Fp(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $A(n){return"nullValue"in n?I_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?kc($u.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function WA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?kc($u.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wu:mt()}function qA(n,e){const t=Rc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function KA(n,e){const t=Rc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class xs{constructor(e){this.value=e}static empty(){return new xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!T_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fp(t)}setAll(e){let t=Ei.emptyPath(),i={},r=[];e.forEach((a,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=d.popLast()}a?i[d.lastSegment()]=Fp(a):r.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());T_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];T_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){xc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new xs(Fp(this.value))}}function YA(n){const e=[];return xc(n.fields,(t,i)=>{const r=new Ei([t]);if(T_(i)){const s=YA(i.mapValue).fields;if(0===s.length)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Li(e)}class Ci{constructor(e,t,i,r,s,a,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=d}static newInvalidDocument(e){return new Ci(e,0,It.min(),It.min(),It.min(),xs.empty(),0)}static newFoundDocument(e,t,i,r){return new Ci(e,1,t,It.min(),i,r,0)}static newNoDocument(e,t){return new Ci(e,2,t,It.min(),It.min(),xs.empty(),0)}static newUnknownDocument(e,t){return new Ci(e,3,t,It.min(),It.min(),xs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qu{constructor(e,t){this.position=e,this.inclusive=t}}function ZA(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],a=n.position[r];if(i=s.field.isKeyField()?rt.comparator(rt.fromName(a.referenceValue),t.key):Rc(a,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function QA(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vo(n.position[t],e.position[t]))return!1;return!0}class Lp{constructor(e,t="asc"){this.field=e,this.dir=t}}function V1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class XA{}class Cn extends XA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new eR(e,t,i):"array-contains"===t?new iR(e,i):"in"===t?new FI(e,i):"not-in"===t?new LI(e,i):"array-contains-any"===t?new rR(e,i):new Cn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new tR(e,i):new nR(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Rc(t,this.value)):null!==t&&Ac(this.value)===Ac(t)&&this.matchesComparison(Rc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ti extends XA{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ti(e,t)}matches(e){return Up(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Up(n){return"and"===n.op}function AI(n){return"or"===n.op}function RI(n){return JA(n)&&Up(n)}function JA(n){for(const e of n.filters)if(e instanceof ti)return!1;return!0}function kI(n){if(n instanceof Cn)return n.field.canonicalString()+n.op.toString()+Mh(n.value);if(RI(n))return n.filters.map(e=>kI(e)).join(",");{const e=n.filters.map(t=>kI(t)).join(",");return`${n.op}(${e})`}}function MI(n,e){return n instanceof Cn?(t=n,(i=e)instanceof Cn&&t.op===i.op&&t.field.isEqual(i.field)&&Vo(t.value,i.value)):n instanceof ti?function(t,i){return i instanceof ti&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,a)=>r&&MI(s,i.filters[a]),!0)}(n,e):void mt();var t,i}function OI(n,e){const t=n.filters.concat(e);return ti.create(t,n.op)}function PI(n){return n instanceof Cn?`${(e=n).field.canonicalString()} ${e.op} ${Mh(e.value)}`:n instanceof ti?function(e){return e.op.toString()+" {"+e.getFilters().map(PI).join(" ,")+"}"}(n):"Filter";var e}class eR extends Cn{constructor(e,t,i){super(e,t,i),this.key=rt.fromName(i.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class tR extends Cn{constructor(e,t){super(e,"in",t),this.keys=NI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nR extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=NI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function NI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>rt.fromName(i.referenceValue))}class iR extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Np(t)&&C_(t.arrayValue,this.value)}}class FI extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&C_(this.value.arrayValue,t)}}class LI extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(C_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!C_(this.value.arrayValue,t)}}class rR extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Np(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>C_(this.value.arrayValue,i))}}class Oh{constructor(e,t=null,i=[],r=[],s=null,a=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=d,this.dt=null}}function UI(n,e=null,t=[],i=[],r=null,s=null,a=null){return new Oh(n,e,t,i,r,s,a)}function Ph(n){const e=ct(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>kI(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Rp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Mh(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Mh(i)).join(",")),e.dt=t}return e.dt}function Ol(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QA(n.startAt,e.startAt)&&QA(n.endAt,e.endAt)}function VI(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Vp(n,e){return n.filters.filter(t=>t instanceof Cn&&t.field.isEqual(e))}function B1(n,e,t){let i=I_,r=!0;for(const s of Vp(n,e)){let a=I_,d=!0;switch(s.op){case"<":case"<=":a=$A(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,d=!1;break;case"!=":case"not-in":a=I_}qA({value:i,inclusive:r},{value:a,inclusive:d})<0&&(i=a,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];qA({value:i,inclusive:r},{value:a,inclusive:t.inclusive})<0&&(i=a,r=t.inclusive);break}return{value:i,inclusive:r}}function BI(n,e,t){let i=Wu,r=!0;for(const s of Vp(n,e)){let a=Wu,d=!0;switch(s.op){case">=":case">":a=WA(s.value),d=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,d=!1;break;case"!=":case"not-in":a=Wu}KA({value:i,inclusive:r},{value:a,inclusive:d})>0&&(i=a,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];KA({value:i,inclusive:r},{value:a,inclusive:t.inclusive})>0&&(i=a,r=t.inclusive);break}return{value:i,inclusive:r}}class Pl{constructor(e,t=null,i=[],r=[],s=null,a="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function H1(n,e,t,i,r,s,a,d){return new Pl(n,e,t,i,r,s,a,d)}function Ga(n){return new Pl(n)}function sR(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function HI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Nb(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ku(n){return null!==n.collectionGroup}function Nh(n){const e=ct(n);if(null===e.wt){e.wt=[];const t=Nb(e),i=HI(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new Lp(t)),e.wt.push(new Lp(Ei.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Lp(Ei.keyField(),s))}}}return e.wt}function rs(n){const e=ct(n);if(!e._t)if("F"===e.limitType)e._t=UI(e.path,e.collectionGroup,Nh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Nh(e))t.push(new Lp(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new qu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new qu(e.startAt.position,e.startAt.inclusive):null;e._t=UI(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function Bp(n,e){e.getFirstInequalityField(),Nb(n);const t=n.filters.concat([e]);return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ds(n,e,t){return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fb(n,e){return Ol(rs(n),rs(e))&&n.limitType===e.limitType}function jI(n){return`${Ph(rs(n))}|lt:${n.limitType}`}function Lb(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>PI(i)).join(", ")}]`),Rp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Mh(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Mh(i)).join(",")),`Target(${t})`}(rs(n))}; limitType=${n.limitType})`}function S_(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):rt.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of Nh(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,a){const d=ZA(r,s,a);return r.inclusive?d<=0:d<0}(t.startAt,Nh(t),i)||t.endAt&&!function(r,s,a){const d=ZA(r,s,a);return r.inclusive?d>=0:d>0}(t.endAt,Nh(t),i)));var t,i}function zI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GI(n){return(e,t)=>{let i=!1;for(const r of Nh(n)){const s=oR(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function oR(n,e,t){const i=n.field.isKeyField()?rt.comparator(e.key,t.key):function(r,s,a){const d=s.data.field(r),f=a.data.field(r);return null!==d&&null!==f?Rc(d,f):mt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}class Nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return L1(this.inner)}size(){return this.innerSize}}const j1=new di(rt.comparator);function Eo(){return j1}const aR=new di(rt.comparator);function Mc(...n){let e=aR;for(const t of n)e=e.insert(t.key,t);return e}function lR(n){let e=aR;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Fl(){return Yu()}function cR(){return Yu()}function Yu(){return new Nl(n=>n.toString(),(n,e)=>n.isEqual(e))}const uR=new di(rt.comparator),dR=new Ii(rt.comparator);function Xt(...n){let e=dR;for(const t of n)e=e.add(t);return e}const z1=new Ii($t);function Fh(){return z1}function Hp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(e)?"-0":e}}function hR(n){return{integerValue:""+n}}function fR(n,e){return vI(e)?hR(e):Hp(n,e)}class Ub{constructor(){this._=void 0}}function pR(n,e,t){return n instanceof jp?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Op(r)&&(r=Gu(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Zu?gR(n,e):n instanceof Lh?G1(n,e):function(i,r){const s=$I(i,r),a=$1(s)+$1(i.gt);return Pp(s)&&Pp(i.gt)?hR(a):Hp(i.serializer,a)}(n,e)}function mR(n,e,t){return n instanceof Zu?gR(n,e):n instanceof Lh?G1(n,e):t}function $I(n,e){return n instanceof x_?Pp(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class jp extends Ub{}class Zu extends Ub{constructor(e){super(),this.elements=e}}function gR(n,e){const t=W1(e);for(const i of n.elements)t.some(r=>Vo(r,i))||t.push(i);return{arrayValue:{values:t}}}class Lh extends Ub{constructor(e){super(),this.elements=e}}function G1(n,e){let t=W1(e);for(const i of n.elements)t=t.filter(r=>!Vo(r,i));return{arrayValue:{values:t}}}class x_ extends Ub{constructor(e,t){super(),this.serializer=e,this.gt=t}}function $1(n){return rr(n.integerValue||n.doubleValue)}function W1(n){return Np(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zp{constructor(e,t){this.field=e,this.transform=t}}class q1{constructor(e,t){this.version=e,this.transformResults=t}}class Ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function D_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qu{}function _R(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Wp(n.key,Ui.none()):new Gp(n.key,n.data,Ui.none());{const t=n.data,i=xs.empty();let r=new Ii(Ei.comparator);for(let s of e.fields)if(!r.has(s)){let a=t.field(s);null===a&&s.length>1&&(s=s.popLast(),a=t.field(s)),null===a?i.delete(s):i.set(s,a),r=r.add(s)}return new Ll(n.key,i,new Li(r.toArray()),Ui.none())}}function K1(n,e,t){n instanceof Gp?function(i,r,s){const a=i.value.clone(),d=vR(i.fieldTransforms,r,s.transformResults);a.setAll(d),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ll?function(i,r,s){if(!D_(i.precondition,r))return void r.convertToUnknownDocument(s.version);const a=vR(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(yR(i)),d.setAll(a),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function A_(n,e,t,i){return n instanceof Gp?function(r,s,a,d){if(!D_(r.precondition,s))return a;const f=r.value.clone(),m=$p(r.fieldTransforms,d,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ll?function(r,s,a,d){if(!D_(r.precondition,s))return a;const f=$p(r.fieldTransforms,d,s),m=s.data;return m.setAll(yR(r)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null===a?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,e,t,i):(a=t,D_(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Y1(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=$I(i.transform,r||null);null!=s&&(null===t&&(t=xs.empty()),t.set(i.field,s))}return t||null}function Z1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&xp(t,i,(r,s)=>function Vb(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Zu&&i instanceof Zu||t instanceof Lh&&i instanceof Lh?xp(t.elements,i.elements,Vo):t instanceof x_&&i instanceof x_?Vo(t.gt,i.gt):t instanceof jp&&i instanceof jp);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Gp extends Qu{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ll extends Qu{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function vR(n,e,t){const i=new Map;Tt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],a=s.transform,d=e.data.field(s.field);i.set(s.field,mR(a,d,t[r]))}return i}function $p(n,e,t){const i=new Map;for(const r of n){const s=r.transform,a=t.data.field(r.field);i.set(r.field,pR(s,a,e))}return i}class Wp extends Qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bb extends Qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WI{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&K1(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=A_(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=A_(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=cR();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let d=this.applyToLocalView(a,s.mutatedFields);d=t.has(r.key)?null:d;const f=_R(a,d);null!==f&&i.set(r.key,f),a.isValidDocument()||a.convertToNoDocument(It.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&xp(this.mutations,e.mutations,(t,i)=>Z1(t,i))&&xp(this.baseMutations,e.baseMutations,(t,i)=>Z1(t,i))}}class Hb{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Tt(e.mutations.length===i.length);let r=uR;const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Hb(e,t,i,r)}}class qI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Q1{constructor(e,t){this.count=e,this.unchangedNames=t}}var sr,Mn;function KI(n){switch(n){default:return mt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function YI(n){if(void 0===n)return nr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case sr.OK:return ge.OK;case sr.CANCELLED:return ge.CANCELLED;case sr.UNKNOWN:return ge.UNKNOWN;case sr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case sr.INTERNAL:return ge.INTERNAL;case sr.UNAVAILABLE:return ge.UNAVAILABLE;case sr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case sr.NOT_FOUND:return ge.NOT_FOUND;case sr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case sr.ABORTED:return ge.ABORTED;case sr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case sr.DATA_LOSS:return ge.DATA_LOSS;default:return mt()}}(Mn=sr||(sr={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";class ZI{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return jb}static getOrCreateInstance(){return null===jb&&(jb=new ZI),jb}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let jb=null;function wR(){return new TextEncoder}const QI=new Tp([4294967295,4294967295],0);function ER(n){const e=wR().encode(n),t=new w1;return t.update(e),new Uint8Array(t.digest())}function XI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tp([t,i],0),new Tp([r,s],0)]}class JI{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new R_(`Invalid padding: ${t}`);if(i<0)throw new R_(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new R_(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new R_(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Tp.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(Tp.fromNumber(i)));return 1===r.compare(QI)&&(r=new Tp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=ER(e),[i,r]=XI(t);for(let s=0;s<this.hashCount;s++){const a=this.Et(i,r,s);if(!this.At(a))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new JI(s,r,t);return i.forEach(d=>a.insert(d)),a}insert(e){if(0===this.It)return;const t=ER(e),[i,r]=XI(t);for(let s=0;s<this.hashCount;s++){const a=this.Et(i,r,s);this.Rt(a)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class R_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class k_{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,M_.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new k_(It.min(),r,new di($t),Eo(),Xt())}}class M_{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new M_(i,t,Xt(),Xt(),Xt())}}class zb{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class IR{constructor(e,t){this.targetId=e,this.Vt=t}}class CR{constructor(e,t,i=Mr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class TR{constructor(){this.St=0,this.Dt=xR(),this.Ct=Mr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Xt(),t=Xt(),i=Xt();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:mt()}}),new M_(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=xR()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class SR{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Eo(),this.zt=eC(),this.Wt=new di($t)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const a=s.target;if(VI(a))if(0===r){const d=new rt(a.path);this.Yt(i,d,Ci.newNoDocument(d,It.min()))}else Tt(1===r);else{const d=this.ie(i);if(d!==r){const f=this.re(e,d);0!==f&&(this.ee(i),this.Wt=this.Wt.insert(i,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ZI.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(m,b,I){var D,O,V,W,re,Me;const ze={localCacheCount:b,existenceFilterCount:I.count},je=I.unchangedNames;return je&&(ze.bloomFilter={applied:0===m,hashCount:null!==(D=je?.hashCount)&&void 0!==D?D:0,bitmapLength:null!==(W=null===(V=null===(O=je?.bits)||void 0===O?void 0:O.bitmap)||void 0===V?void 0:V.length)&&void 0!==W?W:0,padding:null!==(Me=null===(re=je?.bits)||void 0===re?void 0:re.padding)&&void 0!==Me?Me:0}),ze}(f,d,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:a=0},hashCount:d=0}=i;let f,m;try{f=Dc(s).toUint8Array()}catch(b){if(b instanceof ca)return aa("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{m=new JI(f,a,d)}catch(b){return aa(b instanceof R_?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===m.It?1:r!==t-this.oe(e.targetId,m)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const a=this.Gt.ue(),d=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.vt(d)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,a)=>{const d=this.se(a);if(d){if(s.current&&VI(d.target)){const f=new rt(d.target.path);null!==this.jt.get(f)||this.ae(a,f)||this.Yt(a,f,Ci.newNoDocument(f,e))}s.Mt&&(t.set(a,s.Ot()),s.Ft())}});let i=Xt();this.zt.forEach((s,a)=>{let d=!0;a.forEachWhile(f=>{const m=this.se(f);return!m||"TargetPurposeLimboResolution"===m.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.jt.forEach((s,a)=>a.setReadTime(e));const r=new k_(e,t,this.Wt,this.jt,i);return this.jt=Eo(),this.zt=eC(),this.Wt=new di($t),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new TR,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ii($t),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new TR),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function eC(){return new di(rt.comparator)}function xR(){return new di(rt.comparator)}const X1={asc:"ASCENDING",desc:"DESCENDING"},DR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J1={and:"AND",or:"OR"};class eF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tC(n,e){return n.useProto3Json||Rp(e)?e:{value:e}}function qp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nC(n,e){return qp(n,e.toTimestamp())}function or(n){return Tt(!!n),It.fromTimestamp(function(e){const t=zu(e);return new wi(t.seconds,t.nanos)}(n))}function O_(n,e){return(t=n,new kn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function AR(n){const e=kn.fromString(n);return Tt(iF(e)),e}function P_(n,e){return O_(n.databaseId,e.path)}function ua(n,e){const t=AR(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(sC(t))}function iC(n,e){return O_(n.databaseId,e)}function rC(n){const e=AR(n);return 4===e.length?kn.emptyPath():sC(e)}function $a(n){return new kn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sC(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function RR(n,e,t){return{name:P_(n,e),fields:t.value.mapValue.fields}}function tF(n,e,t){const i=ua(n,e.name),r=or(e.updateTime),s=e.createTime?or(e.createTime):It.min(),a=new xs({mapValue:{fields:e.fields}}),d=Ci.newFoundDocument(i,r,s,a);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function N_(n,e){let t;if(e instanceof Gp)t={update:RR(n,e.key,e.value)};else if(e instanceof Wp)t={delete:P_(n,e.key)};else if(e instanceof Ll)t={update:RR(n,e.key,e.data),updateMask:LR(e.fieldMask)};else{if(!(e instanceof Bb))return mt();t={verify:P_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const a=s.transform;if(a instanceof jp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Lh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof x_)return{fieldPath:s.field.canonicalString(),increment:a.gt};throw mt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:nC(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:mt()),t;var r}function $b(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Ui.updateTime(or(r.updateTime)):void 0!==r.exists?Ui.exists(r.exists):Ui.none():Ui.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let d=null;"setToServerValue"in a?(Tt("REQUEST_TIME"===a.setToServerValue),d=new jp):"appendMissingElements"in a?d=new Zu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?d=new Lh(a.removeAllFromArray.values||[]):"increment"in a?d=new x_(s,a.increment):mt();const f=Ei.fromServerFormat(a.fieldPath);return new zp(f,d)}(n,r)):[];var r;if(e.update){const r=ua(n,e.update.name),s=new xs({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=new Li((e.updateMask.fieldPaths||[]).map(m=>Ei.fromServerFormat(m)));return new Ll(r,s,a,t,i)}return new Gp(r,s,t,i)}if(e.delete){const r=ua(n,e.delete);return new Wp(r,t)}if(e.verify){const r=ua(n,e.verify);return new Bb(r,t)}return mt()}function MR(n,e){return{documents:[iC(n,e.path)]}}function Wb(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=iC(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=iC(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0!==f.length)return FR(ti.create(f,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(f){if(0!==f.length)return f.map(m=>{return{field:Xu((b=m).field),direction:PR(b.dir)};var b})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=tC(n,e.limit);var d,f;return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function qb(n){let e=rC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Tt(1===i);const b=t.from[0];b.allDescendants?r=b.collectionId:e=e.child(b.collectionId)}let s=[];t.where&&(s=function(b){const I=lC(b);return I instanceof ti&&RI(I)?I.getFilters():[I]}(t.where));let a=[];t.orderBy&&(a=t.orderBy.map(b=>{return new Lp(Kp((I=b).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let d=null;t.limit&&(d=function(b){let I;return I="object"==typeof b?b.value:b,Rp(I)?null:I}(t.limit));let f=null;var b;t.startAt&&(f=new qu((b=t.startAt).values||[],!!b.before));let m=null;return t.endAt&&(m=function(b){return new qu(b.values||[],!b.before)}(t.endAt)),H1(e,r,a,s,d,"F",f,m)}function lC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kp(e.unaryFilter.field);return Cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=Kp(e.unaryFilter.field);return Cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kp(e.unaryFilter.field);return Cn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Kp(e.unaryFilter.field);return Cn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(n):void 0!==n.fieldFilter?Cn.create(Kp((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ti.create(e.compositeFilter.filters.map(t=>lC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return mt()}}(e.compositeFilter.op))}(n):mt();var e}function PR(n){return X1[n]}function NR(n){return DR[n]}function nF(n){return J1[n]}function Xu(n){return{fieldPath:n.canonicalString()}}function Kp(n){return Ei.fromServerFormat(n.fieldPath)}function FR(n){return n instanceof Cn?function(e){if("=="===e.op){if(xI(e.value))return{unaryFilter:{field:Xu(e.field),op:"IS_NAN"}};if(SI(e.value))return{unaryFilter:{field:Xu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xI(e.value))return{unaryFilter:{field:Xu(e.field),op:"IS_NOT_NAN"}};if(SI(e.value))return{unaryFilter:{field:Xu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xu(e.field),op:NR(e.op),value:e.value}}}(n):n instanceof ti?function(e){const t=e.getFilters().map(i=>FR(i));return 1===t.length?t[0]:{compositeFilter:{op:nF(e.op),filters:t}}}(n):mt()}function LR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ul{constructor(e,t,i,r,s=It.min(),a=It.min(),d=Mr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ul(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class UR{constructor(e){this.fe=e}}function sF(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:P_(r=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:qp(r,s.version.toTimestamp()),createTime:qp(r,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Uh(e.version)};else{if(!e.isUnknownDocument())return mt();i.unknownDocument={path:t.path.toArray(),version:Uh(e.version)}}var r,s;return i}function Kb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Uh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vh(n){const e=new wi(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Bh(n,e){const t=(e.baseMutations||[]).map(s=>$b(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>$b(n.fe,s)),r=wi.fromMillis(e.localWriteTimeMs);return new WI(e.batchId,r,t,i)}function F_(n){const e=Vh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vh(n.lastLimboFreeSnapshotVersion):It.min();let i;var r;return void 0!==n.query.documents?(Tt(1===(r=n.query).documents.length),i=rs(Ga(rC(r.documents[0])))):i=rs(qb(n.query)),new Ul(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mr.fromBase64String(n.resumeToken))}function VR(n,e){const t=Uh(e.snapshotVersion),i=Uh(e.lastLimboFreeSnapshotVersion);let r;r=VI(e.target)?MR(n.fe,e.target):Wb(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ph(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function cC(n){const e=qb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ds(e,e.limit,"L"):e}function uC(n,e){return new qI(e.largestBatchId,$b(n.fe,e.overlayMutation))}function BR(n,e){const t=e.path.lastSegment();return[n,Ts(e.path.popLast()),t]}function HR(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Uh(i.readTime),documentKey:Ts(i.documentKey.path),largestBatchId:i.largestBatchId}}class oF{getBundleMetadata(e,t){return jR(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Vh(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return jR(e).put({bundleId:(i=t).id,createTime:Uh(or(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Yp(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:cC(r.bundledQuery),readTime:Vh(r.readTime)};var r})}saveNamedQuery(e,t){return Yp(e).put({name:(i=t).name,readTime:Uh(or(i.readTime)),bundledQuery:i.bundledQuery});var i}}function jR(n){return zr(n,"bundles")}function Yp(n){return zr(n,"namedQueries")}class L_{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new L_(e,t.uid||"")}getOverlay(e,t){return Zp(e).get(BR(this.userId,t)).next(i=>i?uC(this.serializer,i):null)}getOverlays(e,t){const i=Fl();return fe.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,a)=>{const d=new qI(t,a);r.push(this.we(e,d))}),fe.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(a=>r.add(Ts(a.getCollectionPath())));const s=[];return r.forEach(a=>{const d=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(Zp(e).J("collectionPathOverlayIndex",d))}),fe.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Fl(),s=Ts(t),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Zp(e).j("collectionPathOverlayIndex",a).next(d=>{for(const f of d){const m=uC(this.serializer,f);r.set(m.getKey(),m)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Fl();let a;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zp(e).X({index:"collectionGroupOverlayIndex",range:d},(f,m,b)=>{const I=uC(this.serializer,m);s.size()<r||I.largestBatchId===a?(s.set(I.getKey(),I),a=I.largestBatchId):b.done()}).next(()=>s)}we(e,t){return Zp(e).put(function(i,r,s){const[a,d,f]=BR(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:N_(i.fe,s.mutation)}}(this.serializer,this.userId,t))}}function Zp(n){return zr(n,"documentOverlays")}class Ju{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(rr(e.integerValue));else if("doubleValue"in e){const i=rr(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),kp(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Dc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?DI(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):mt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),rt.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function zR(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function dC(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=zR(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Ju.Ve=new Ju;class GR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=t.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=t.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const t=this.Fe(e),i=dC(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),i=dC(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class aF{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Tz{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yb{constructor(){this.je=new GR,this.ze=new aF(this.je),this.We=new Tz(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ed{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ed(this.indexId,this.documentKey,this.arrayValue,i)}}function td(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$R(n.arrayValue,e.arrayValue),0!==t?t:(t=$R(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function $R(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class lF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){Tt(e.collectionGroup===this.collectionId);const t=gI(e);if(void 0!==t&&!this.en(t))return!1;const i=Dh(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const d=i[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[a++],d))return!1}++s}for(;s<i.length;++s)if(a>=this.Ye.length||!this.sn(this.Ye[a++],i[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function WR(n){var e,t;if(Tt(n instanceof Cn||n instanceof ti),n instanceof Cn){if(n instanceof FI){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Cn.create(n.field,"==",s)))||[];return ti.create(r,"or")}return n}const i=n.filters.map(r=>WR(r));return ti.create(i,n.op)}function U_(n){if(0===n.getFilters().length)return[];const e=KR(WR(n));return Tt(qR(e)),hC(e)||Qp(e)?[e]:e.getFilters()}function hC(n){return n instanceof Cn}function Qp(n){return n instanceof ti&&RI(n)}function qR(n){return hC(n)||Qp(n)||function(e){if(e instanceof ti&&AI(e)){for(const t of e.getFilters())if(!hC(t)&&!Qp(t))return!1;return!0}return!1}(n)}function KR(n){if(Tt(n instanceof Cn||n instanceof ti),n instanceof Cn)return n;if(1===n.filters.length)return KR(n.filters[0]);const e=n.filters.map(i=>KR(i));let t=ti.create(e,n.op);return t=nd(t),qR(t)?t:(Tt(t instanceof ti),Tt(Up(t)),Tt(t.filters.length>1),t.filters.reduce((i,r)=>fC(i,r)))}function fC(n,e){let t;return Tt(n instanceof Cn||n instanceof ti),Tt(e instanceof Cn||e instanceof ti),t=n instanceof Cn?e instanceof Cn?ti.create([n,e],"and"):cF(n,e):e instanceof Cn?cF(e,n):function(i,r){if(Tt(i.filters.length>0&&r.filters.length>0),Up(i)&&Up(r))return OI(i,r.getFilters());const s=AI(i)?i:r,a=AI(i)?r:i,d=s.filters.map(f=>fC(f,a));return ti.create(d,"or")}(n,e),nd(t)}function cF(n,e){if(Up(e))return OI(e,n.getFilters());{const t=e.filters.map(i=>fC(n,i));return ti.create(t,"or")}}function nd(n){if(Tt(n instanceof Cn||n instanceof ti),n instanceof Cn)return n;const e=n.getFilters();if(1===e.length)return nd(e[0]);if(JA(n))return n;const t=e.map(r=>nd(r)),i=[];return t.forEach(r=>{r instanceof Cn?i.push(r):r instanceof ti&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:ti.create(i,n.op)}class uF{constructor(){this.rn=new pC}addToCollectionParentIndex(e,t){return this.rn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Uo.min())}updateCollectionGroup(e,t,i){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class pC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ii(kn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ii(kn.comparator)).toArray()}}const Zb=new Uint8Array(0);class Qb{constructor(e,t){this.user=e,this.databaseId=t,this.on=new pC,this.un=new Nl(i=>Ph(i),(i,r)=>Ol(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:i,parent:Ts(r)};return mC(e).put(s)}return fe.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[DA(t),""],!1,!0);return mC(e).j(r).next(s=>{for(const a of s){if(a.collectionId!==t)break;i.push(Ss(a.parent))}return i})}addFieldIndex(e,t){const i=B_(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var a;delete r.indexId;const s=i.add(r);if(t.indexState){const a=id(e);return s.next(d=>{a.put(HR(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=B_(e),r=id(e),s=V_(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=V_(e);let r=!0;const s=new Map;return fe.forEach(this.cn(t),a=>this.an(e,a).next(d=>{r&&(r=!!d),s.set(a,d)})).next(()=>{if(r){let a=Xt();const d=[];return fe.forEach(s,(f,m)=>{var b;He("IndexedDbIndexManager",`Using index ${b=f,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${Ph(t)}`);const I=function(je,Ye){const xt=gI(Ye);if(void 0===xt)return null;for(const Ot of Vp(je,xt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(m,f),D=function(je,Ye){const xt=new Map;for(const Ot of Dh(Ye))for(const pn of Vp(je,Ot.fieldPath))switch(pn.op){case"==":case"in":xt.set(Ot.fieldPath.canonicalString(),pn.value);break;case"not-in":case"!=":return xt.set(Ot.fieldPath.canonicalString(),pn.value),Array.from(xt.values())}return null}(m,f),O=function(je,Ye){const xt=[];let Ot=!0;for(const pn of Dh(Ye)){const zi=0===pn.kind?B1(je,pn.fieldPath,je.startAt):BI(je,pn.fieldPath,je.startAt);xt.push(zi.value),Ot&&(Ot=zi.inclusive)}return new qu(xt,Ot)}(m,f),V=function(je,Ye){const xt=[];let Ot=!0;for(const pn of Dh(Ye)){const zi=0===pn.kind?BI(je,pn.fieldPath,je.endAt):B1(je,pn.fieldPath,je.endAt);xt.push(zi.value),Ot&&(Ot=zi.inclusive)}return new qu(xt,Ot)}(m,f),W=this.hn(f,m,O),re=this.hn(f,m,V),Me=this.ln(f,m,D),ze=this.fn(f.indexId,I,W,O.inclusive,re,V.inclusive,Me);return fe.forEach(ze,je=>i.H(je,t.limit).next(Ye=>{Ye.forEach(xt=>{const Ot=rt.fromSegments(xt.documentKey);a.has(Ot)||(a=a.add(Ot),d.push(Ot))})}))}).next(()=>d)}return fe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:U_(ti.create(e.filters,"and")).map(i=>UI(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,r,s,a,d){const f=(null!=t?t.length:1)*Math.max(i.length,s.length),m=f/(null!=t?t.length:1),b=[];for(let I=0;I<f;++I){const D=t?this.dn(t[I/m]):Zb,O=this.wn(e,D,i[I%m],r),V=this._n(e,D,s[I%m],a),W=d.map(re=>this.wn(e,D,re,!0));b.push(...this.createRange(O,V,W))}return b}wn(e,t,i,r){const s=new ed(e,rt.empty(),t,i);return r?s:s.Je()}_n(e,t,i,r){const s=new ed(e,rt.empty(),t,i);return r?s.Je():s}an(e,t){const i=new lF(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const d of s)i.tn(d)&&(!a||d.fields.length>a.fields.length)&&(a=d);return a})}getIndexType(e,t){let i=2;const r=this.cn(t);return fe.forEach(r,s=>this.an(e,s).next(a=>{a?0!==i&&a.fields.length<function(d){let f=new Ii(Ei.comparator),m=!1;for(const b of d.filters)for(const I of b.getFlattenedFilters())I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?m=!0:f=f.add(I.field));for(const b of d.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(m?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}mn(e,t){const i=new Yb;for(const r of Dh(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const a=i.He(r.kind);Ju.Ve._e(s,a)}return i.Qe()}dn(e){const t=new Yb;return Ju.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new Yb;return Ju.Ve._e(kc(this.databaseId,t),i.He(function(r){const s=Dh(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let r=[];r.push(new Yb);let s=0;for(const a of Dh(e)){const d=i[s++];for(const f of r)if(this.yn(t,a.fieldPath)&&Np(d))r=this.pn(r,a,d);else{const m=f.He(a.kind);Ju.Ve._e(d,m)}}return this.In(r)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const d of r){const f=new Yb;f.seed(d.Qe()),Ju.Ve._e(a,f.He(t.kind)),s.push(f)}return s}yn(e,t){return!!e.filters.find(i=>i instanceof Cn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=B_(e),r=id(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(s=>{const a=[];return fe.forEach(s,d=>r.get([d.indexId,this.uid]).next(f=>{a.push(function(m,b){const I=b?new Dp(b.sequenceNumber,new Uo(Vh(b.readTime),new rt(Ss(b.documentKey)),b.largestBatchId)):Dp.empty(),D=m.fields.map(([O,V])=>new Ah(Ei.fromServerFormat(O),V));return new y_(m.indexId,m.collectionGroup,D,I)}(d,f))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:$t(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=B_(e),s=id(e);return this.Tn(e).next(a=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>fe.forEach(d,f=>s.put(HR(f.indexId,this.user,a,i)))))}updateIndexEntries(e,t){const i=new Map;return fe.forEach(t,(r,s)=>{const a=i.get(r.collectionGroup);return(a?fe.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),fe.forEach(d,f=>this.En(e,r,f).next(m=>{const b=this.An(s,f);return m.isEqual(b)?fe.resolve():this.vn(e,s,f,m,b)}))))})}Rn(e,t,i,r){return V_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,r){return V_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const r=V_(e);let s=new Ii(td);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(a,d)=>{s=s.add(new ed(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}An(e,t){let i=new Ii(td);const r=this.mn(t,e);if(null==r)return i;const s=gI(t);if(null!=s){const a=e.data.field(s.fieldPath);if(Np(a))for(const d of a.arrayValue.values||[])i=i.add(new ed(t.indexId,e.key,this.dn(d),r))}else i=i.add(new ed(t.indexId,e.key,Zb,r));return i}vn(e,t,i,r,s){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(d,f,m,b,I){const D=d.getIterator(),O=f.getIterator();let V=oo(D),W=oo(O);for(;V||W;){let re=!1,Me=!1;if(V&&W){const ze=m(V,W);ze<0?Me=!0:ze>0&&(re=!0)}else null!=V?Me=!0:re=!0;re?(b(W),W=oo(O)):Me?(I(V),V=oo(D)):(V=oo(D),W=oo(O))}}(r,s,td,d=>{a.push(this.Rn(e,t,i,d))},d=>{a.push(this.Pn(e,t,i,d))}),fe.waitFor(a)}Tn(e){let t=1;return id(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((a,d)=>td(a,d)).filter((a,d,f)=>!d||0!==td(a,f[d-1]));const r=[];r.push(e);for(const a of i){const d=td(a,e),f=td(a,t);if(0===d)r[0]=e.Je();else if(d>0&&f<0)r.push(a),r.push(a.Je());else if(f>0)break}r.push(t);const s=[];for(let a=0;a<r.length;a+=2){if(this.bn(r[a],r[a+1]))return[];s.push(IDBKeyRange.bound([r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,Zb,[]],[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,Zb,[]]))}return s}bn(e,t){return td(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(YR)}getMinOffset(e,t){return fe.mapArray(this.cn(t),i=>this.an(e,i).next(r=>r||mt())).next(YR)}}function mC(n){return zr(n,"collectionParents")}function V_(n){return zr(n,"indexEntries")}function B_(n){return zr(n,"indexConfiguration")}function id(n){return zr(n,"indexState")}function YR(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Db(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Uo(e.readTime,e.documentKey,t)}const ZR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class As{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function QR(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let d=0;const f=i.X({range:a},(b,I,D)=>(d++,D.delete()));s.push(f.next(()=>{Tt(1===d)}));const m=[];for(const b of t.mutations){const I=Ob(e,b.key.path,t.batchId);s.push(r.delete(I)),m.push(b.key)}return fe.waitFor(s).next(()=>m)}function Xb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw mt();e=n.noDocument}return JSON.stringify(e).length}As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(41943040,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);class H_{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(e,t,i,r){Tt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new H_(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rd(e).X({index:"userMutationsIndex",range:i},(r,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Xp(e),a=rd(e);return a.add({}).next(d=>{Tt("number"==typeof d);const f=new WI(d,t,i,r),m=function(D,O,V){const W=V.baseMutations.map(Me=>N_(D.fe,Me)),re=V.mutations.map(Me=>N_(D.fe,Me));return{userId:O,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:W,mutations:re}}(this.serializer,this.userId,f),b=[];let I=new Ii((D,O)=>$t(D.canonicalString(),O.canonicalString()));for(const D of r){const O=Ob(this.userId,D.key.path,d);I=I.add(D.key.path.popLast()),b.push(a.put(m)),b.push(s.put(O,Rh))}return I.forEach(D=>{b.push(this.indexManager.addToCollectionParentIndex(e,D))}),e.addOnCommittedListener(()=>{this.Vn[d]=f.keys()}),fe.waitFor(b).next(()=>f)})}lookupMutationBatch(e,t){return rd(e).get(t).next(i=>i?(Tt(i.userId===this.userId),Bh(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?fe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Vn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return rd(e).X({index:"userMutationsIndex",range:r},(a,d,f)=>{d.userId===this.userId&&(Tt(d.batchId>=i),s=Bh(this.serializer,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return rd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rd(e).j("userMutationsIndex",t).next(i=>i.map(r=>Bh(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Mb(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Xp(e).X({range:r},(a,d,f)=>{const[m,b,I]=a,D=Ss(b);if(m===this.userId&&t.path.isEqual(D))return rd(e).get(I).next(O=>{if(!O)throw mt();Tt(O.userId===this.userId),s.push(Bh(this.serializer,O))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ii($t);const r=[];return t.forEach(s=>{const a=Mb(this.userId,s.path),d=IDBKeyRange.lowerBound(a),f=Xp(e).X({range:d},(m,b,I)=>{const[D,O,V]=m,W=Ss(O);D===this.userId&&s.path.isEqual(W)?i=i.add(V):I.done()});r.push(f)}),fe.waitFor(r).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=Mb(this.userId,i),a=IDBKeyRange.lowerBound(s);let d=new Ii($t);return Xp(e).X({range:a},(f,m,b)=>{const[I,D,O]=f,V=Ss(D);I===this.userId&&i.isPrefixOf(V)?V.length===r&&(d=d.add(O)):b.done()}).next(()=>this.Dn(e,d))}Dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(rd(e).get(s).next(a=>{if(null===a)throw mt();Tt(a.userId===this.userId),i.push(Bh(this.serializer,a))}))}),fe.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return QR(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),fe.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Xp(e).X({range:i},(s,a,d)=>{if(s[0]===this.userId){const f=Ss(s[1]);r.push(f)}else d.done()}).next(()=>{Tt(0===r.length)})})}containsKey(e,t){return j_(e,this.userId,t)}xn(e){return gC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function j_(n,e,t){const i=Mb(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Xp(n).X({range:s,Y:!0},(d,f,m)=>{const[b,I,D]=d;b===e&&I===r&&(a=!0),m.done()}).next(()=>a)}function rd(n){return zr(n,"mutations")}function Xp(n){return zr(n,"documentMutations")}function gC(n){return zr(n,"mutationQueues")}class sd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new sd(0)}static Mn(){return new sd(-1)}}class _C{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new sd(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>It.fromTimestamp(new wi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hh(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(Tt(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Hh(e).X((a,d)=>{const f=F_(d);f.sequenceNumber<=t&&null===i.get(f.targetId)&&(r++,s.push(this.removeTargetData(e,f)))}).next(()=>fe.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Hh(e).X((i,r)=>{const s=F_(r);t(s)})}$n(e){return XR(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}On(e,t){return XR(e).put("targetGlobalKey",t)}Fn(e,t){return Hh(e).put(VR(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ph(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Hh(e).X({range:r,index:"queryTargetsIndex"},(a,d,f)=>{const m=F_(d);Ol(t,m.target)&&(s=m,f.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Oc(e);return t.forEach(a=>{const d=Ts(a.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(e,i,a))}),fe.waitFor(r)}removeMatchingKeys(e,t,i){const r=Oc(e);return fe.forEach(t,s=>{const a=Ts(s.path);return fe.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Oc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Oc(e);let s=Xt();return r.X({range:i,Y:!0},(a,d,f)=>{const m=Ss(a[1]),b=new rt(m);s=s.add(b)}).next(()=>s)}containsKey(e,t){const i=Ts(t.path),r=IDBKeyRange.bound([i],[DA(i)],!1,!0);let s=0;return Oc(e).X({index:"documentTargetsIndex",Y:!0,range:r},([a,d],f,m)=>{0!==a&&(s++,m.done())}).next(()=>s>0)}le(e,t){return Hh(e).get(t).next(i=>i?F_(i):null)}}function Hh(n){return zr(n,"targets")}function XR(n){return zr(n,"targetGlobal")}function Oc(n){return zr(n,"targetDocuments")}function yC([n,e],[t,i]){const r=$t(n,t);return 0===r?$t(e,i):r}class dF{constructor(e){this.Ln=e,this.buffer=new Ii(yC),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();yC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Hu(i)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ml(i)}yield t.Qn(3e5)}))}}class vC{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(wo.ct);const i=new dF(t);return this.jn.forEachTarget(e,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(ZR)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZR):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,r,s,a,d,f,m;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,a=Date.now(),this.nthSequenceNumber(e,r))).next(I=>(i=I,d=Date.now(),this.removeTargets(e,i,t))).next(I=>(s=I,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(I=>(m=Date.now(),Sp()<=Ni.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-b}ms\n\tDetermined least recently used ${r} in `+(d-a)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${I} documents in `+(m-f)+`ms\nTotal Duration: ${m-b}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:I})))}}class ek{constructor(e,t){this.db=e,this.garbageCollector=function Jb(n,e){return new vC(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,r)=>t(r))}addReference(e,t,i){return Jp(e,i)}removeReference(e,t,i){return Jp(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Jp(e,t)}Xn(e,t){return function(i,r){let s=!1;return gC(i).Z(a=>j_(i,a,r).next(d=>(d&&(s=!0),fe.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(a,d)=>{if(d<=t){const f=this.Xn(e,a).next(m=>{if(!m)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,It.min()),Oc(e).delete([0,Ts(a.path)])))});r.push(f)}}).next(()=>fe.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Jp(e,t)}Yn(e,t){const i=Oc(e);let r,s=wo.ct;return i.X({index:"documentTargetsIndex"},([a,d],{path:f,sequenceNumber:m})=>{0===a?(s!==wo.ct&&t(new rt(Ss(r)),s),s=m,r=f):s=wo.ct}).next(()=>{s!==wo.ct&&t(new rt(Ss(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jp(n,e){return Oc(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ts(e.path),sequenceNumber:i}));var i}class ew{constructor(){this.changes=new Nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ci.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?fe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return od(e).put(i)}removeEntry(e,t,i){return od(e).delete(function(r,s){const a=r.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Kb(s),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=Ci.newInvalidDocument(t);return od(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(jh(t))},(r,s)=>{i=this.ts(t,s)}).next(()=>i)}es(e,t){let i={size:0,document:Ci.newInvalidDocument(t)};return od(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(jh(t))},(r,s)=>{i={document:this.ts(t,s),size:Xb(s)}}).next(()=>i)}getEntries(e,t){let i=Eo();return this.ns(e,t,(r,s)=>{const a=this.ts(r,s);i=i.insert(r,a)}).next(()=>i)}ss(e,t){let i=Eo(),r=new di(rt.comparator);return this.ns(e,t,(s,a)=>{const d=this.ts(s,a);i=i.insert(s,d),r=r.insert(s,Xb(a))}).next(()=>({documents:i,rs:r}))}ns(e,t,i){if(t.isEmpty())return fe.resolve();let r=new Ii(wC);t.forEach(f=>r=r.add(f));const s=IDBKeyRange.bound(jh(r.first()),jh(r.last())),a=r.getIterator();let d=a.getNext();return od(e).X({index:"documentKeyIndex",range:s},(f,m,b)=>{const I=rt.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&wC(d,I)<0;)i(d,null),d=a.getNext();d&&d.isEqual(I)&&(i(d,m),d=a.hasNext()?a.getNext():null),d?b.G(jh(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Kb(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return od(e).j(IDBKeyRange.bound(a,d,!0)).next(f=>{let m=Eo();for(const b of f){const I=this.ts(rt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);I.isFoundDocument()&&(S_(t,I)||r.has(I.key))&&(m=m.insert(I.key,I))}return m})}getAllFromCollectionGroup(e,t,i,r){let s=Eo();const a=bC(t,i),d=bC(t,Uo.max());return od(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,d,!0)},(f,m,b)=>{const I=this.ts(rt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);s=s.insert(I.key,I),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(e){return new fF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return nk(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Zn(e,t){return nk(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function rF(n,e){let t;if(e.document)t=tF(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=rt.fromSegments(e.noDocument.path),r=Vh(e.noDocument.readTime);t=Ci.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt();{const i=rt.fromSegments(e.unknownDocument.path),r=Vh(e.unknownDocument.version);t=Ci.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new wi(i[0],i[1]);return It.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(It.min()))return i}return Ci.newInvalidDocument(e)}}function tk(n){return new hF(n)}class fF extends ew{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Nl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Ii((s,a)=>$t(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const d=this.us.get(s);if(t.push(this.os.removeEntry(e,s,d.readTime)),a.isValidDocument()){const f=sF(this.os.serializer,a);r=r.add(s.path.popLast());const m=Xb(f);i+=m-d.size,t.push(this.os.addEntry(e,s,f))}else if(i-=d.size,this.trackRemovals){const f=sF(this.os.serializer,a.convertToNoDocument(It.min()));t.push(this.os.addEntry(e,s,f))}}),r.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,i)),fe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:r})=>(r.forEach((s,a)=>{this.us.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function nk(n){return zr(n,"remoteDocumentGlobal")}function od(n){return zr(n,"remoteDocumentsV14")}function jh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bC(n,e){const t=e.documentKey.path.toArray();return[n,Kb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wC(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=$t(t[s],i[s]),r)return r;return r=$t(t.length,i.length),r||(r=$t(t[t.length-2],i[i.length-2]),r||$t(t[t.length-1],i[i.length-1]))}class ik{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class EC{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&A_(i.mutation,r,Li.empty(),wi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Xt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Xt()){const r=Fl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let a=Mc();return s.forEach((d,f)=>{a=a.insert(d,f.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const i=Fl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Xt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,d)=>{t.set(a,d)})})}computeViews(e,t,i,r){let s=Eo();const a=Yu(),d=Yu();return t.forEach((f,m)=>{const b=i.get(m.key);r.has(m.key)&&(void 0===b||b.mutation instanceof Ll)?s=s.insert(m.key,m):void 0!==b?(a.set(m.key,b.mutation.getFieldMask()),A_(b.mutation,m,b.mutation.getFieldMask(),wi.now())):a.set(m.key,Li.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((m,b)=>a.set(m,b)),t.forEach((m,b)=>{var I;return d.set(m,new ik(b,null!==(I=a.get(m))&&void 0!==I?I:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Yu();let r=new di((a,d)=>a-d),s=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const d of a)d.keys().forEach(f=>{const m=t.get(f);if(null===m)return;let b=i.get(f)||Li.empty();b=d.applyToLocalView(m,b),i.set(f,b);const I=(r.get(d.batchId)||Xt()).add(f);r=r.insert(d.batchId,I)})}).next(()=>{const a=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,b=f.value,I=cR();b.forEach(D=>{if(!s.has(D)){const O=_R(t.get(D),i.get(D));null!==O&&I.set(D,O),s=s.add(D)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,I))}return fe.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return rt.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ku(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):fe.resolve(Fl());let d=-1,f=s;return a.next(m=>fe.forEach(m,(b,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),s.get(b)?fe.resolve():this.remoteDocumentCache.getEntry(e,b).next(D=>{f=f.insert(b,D)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,f,m,Xt())).next(b=>({batchId:d,changes:lR(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(i=>{let r=Mc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Mc();return this.indexManager.getCollectionParents(e,r).next(a=>fe.forEach(a,d=>{const f=(m=t,b=d.child(r),new Pl(b,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,b;return this.getDocumentsMatchingCollectionQuery(e,f,i).next(m=>{m.forEach((b,I)=>{s=s.insert(b,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((d,f)=>{const m=f.getKey();null===s.get(m)&&(s=s.insert(m,Ci.newInvalidDocument(m)))});let a=Mc();return s.forEach((d,f)=>{const m=r.get(d);void 0!==m&&A_(m.mutation,f,Li.empty(),wi.now()),S_(t,f)&&(a=a.insert(d,f))}),a})}}class pF{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return fe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:or(i.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:cC(i.bundledQuery),readTime:or(i.readTime)}),fe.resolve();var i}}class rk{constructor(){this.overlays=new di(rt.comparator),this.ls=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Fl();return fe.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),fe.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),fe.resolve()}getOverlaysForCollection(e,t,i){const r=Fl(),s=t.length+1,a=new rt(t.child("")),d=this.overlays.getIteratorFrom(a);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return fe.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new di((m,b)=>m-b);const a=this.overlays.getIterator();for(;a.hasNext();){const m=a.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let b=s.get(m.largestBatchId);null===b&&(b=Fl(),s=s.insert(m.largestBatchId,b)),b.set(m.getKey(),m)}}const d=Fl(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,b)=>d.set(m,b)),!(d.size()>=r)););return fe.resolve(d)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const a=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new qI(t,i));let s=this.ls.get(t);void 0===s&&(s=Xt(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class tw{constructor(){this.fs=new Ii(ss.ds),this.ws=new Ii(ss._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new ss(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new ss(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new rt(new kn([])),i=new ss(t,e),r=new ss(t,e+1),s=[];return this.ws.forEachInRange([i,r],a=>{this.ys(a),s.push(a.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new rt(new kn([])),i=new ss(t,e),r=new ss(t,e+1);let s=Xt();return this.ws.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new ss(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class ss{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return rt.comparator(e.key,t.key)||$t(e.As,t.As)}static _s(e,t){return $t(e.As,t.As)||rt.comparator(e.key,t.key)}}class sk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ii(ss.ds)}checkEmpty(e){return fe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const a=new WI(s,t,i,r);this.mutationQueue.push(a);for(const d of r)this.Rs=this.Rs.add(new ss(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(a)}lookupMutationBatch(e,t){return fe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return fe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ss(t,0),r=new ss(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],a=>{const d=this.Ps(a.As);s.push(d)}),fe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ii($t);return t.forEach(r=>{const s=new ss(r,0),a=new ss(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,a],d=>{i=i.add(d.As)})}),fe.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;rt.isDocumentKey(s)||(s=s.child(""));const a=new ss(new rt(s),0);let d=new Ii($t);return this.Rs.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(d=d.add(f.As)),!0)},a),fe.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Tt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return fe.forEach(t.mutations,r=>{const s=new ss(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new ss(t,0),r=this.Rs.firstAfterOrEqual(i);return fe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return fe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ok{constructor(e){this.Ds=e,this.docs=new di(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return fe.resolve(i?i.document.mutableCopy():Ci.newInvalidDocument(t))}getEntries(e,t){let i=Eo();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ci.newInvalidDocument(r))}),fe.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Eo();const a=t.path,d=new rt(a.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:b}}=f.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||Db(AA(b),i)<=0||(r.has(b.key)||S_(t,b))&&(s=s.insert(b.key,b.mutableCopy()))}return fe.resolve(s)}getAllFromCollectionGroup(e,t,i,r){mt()}Cs(e,t){return fe.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new ao(this)}getSize(e){return fe.resolve(this.size)}}class ao extends ew{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),fe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class em{constructor(e){this.persistence=e,this.xs=new Nl(t=>Ph(t),Ol),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ns=0,this.ks=new tw,this.targetCount=0,this.Ms=sd.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),fe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new sd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Fn(t),fe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((a,d)=>{d.sequenceNumber<=t&&null===i.get(d.targetId)&&(this.xs.delete(a),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),fe.waitFor(s).next(()=>r)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return fe.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),fe.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),fe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return fe.resolve(i)}containsKey(e,t){return fe.resolve(this.ks.containsKey(t))}}class IC{constructor(e,t){this.$s={},this.overlays={},this.Os=new wo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new em(this),this.indexManager=new uF,this.remoteDocumentCache=new ok(i=>this.referenceDelegate.Ls(i)),this.serializer=new UR(t),this.qs=new pF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new sk(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){He("MemoryPersistence","Starting transaction:",e);const r=new mF(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return fe.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class mF extends yI{constructor(e){super(),this.currentSequenceNumber=e}}class CC{constructor(e){this.persistence=e,this.Qs=new tw,this.js=null}static zs(e){return new CC(e)}get Ws(){if(this.js)return this.js;throw mt()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),fe.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Ws,i=>{const r=rt.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,It.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return fe.or([()=>fe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ak{constructor(e){this.serializer=e}O(e,t,i,r){const s=new v_("createOrUpgrade",t);var d;i<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NA,{unique:!0}),d.createObjectStore("documentMutations"),nw(e),function(d){d.createObjectStore("remoteDocuments")}(e));let a=fe.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),nw(e)),a=a.next(()=>function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(s))),i<4&&r>=4&&(0!==i&&(a=a.next(()=>function(d,f){return f.store("mutations").j().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NA,{unique:!0});const b=f.store("mutations"),I=m.map(D=>b.put(D));return fe.waitFor(I)})}(e,s))),a=a.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(a=a.next(()=>this.Ys(s))),i<6&&r>=6&&(a=a.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),i<7&&r>=7&&(a=a.next(()=>this.Zs(s))),i<8&&r>=8&&(a=a.next(()=>this.ti(e,s))),i<9&&r>=9&&(a=a.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(a=a.next(()=>this.ei(s))),i<11&&r>=11&&(a=a.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:P1});f.createIndex("collectionPathOverlayIndex",N1,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",UA,{unique:!1})}(e)})),i<13&&r>=13&&(a=a.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:bI});f.createIndex("documentKeyIndex",R1),f.createIndex("collectionGroupIndex",wI)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,s))),i<15&&r>=15&&(a=a.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:FA}).createIndex("sequenceNumberIndex",O1,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:jr}).createIndex("documentKeyIndex",LA,{unique:!1})}(e))),a}Xs(e){let t=0;return e.store("remoteDocuments").X((i,r)=>{t+=Xb(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>fe.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",a).next(d=>fe.forEach(d,f=>{Tt(f.userId===s.userId);const m=Bh(this.serializer,f);return QR(e,s.userId,m).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((a,d)=>{const f=new kn(a),m=[0,Ts(f)];s.push(t.get(m).next(b=>b?fe.resolve():t.put({targetId:0,path:Ts(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>fe.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:M1});const i=t.store("collectionParents"),r=new pC,s=a=>{if(r.add(a)){const d=a.lastSegment(),f=a.popLast();return i.put({collectionId:d,parent:Ts(f)})}};return t.store("remoteDocuments").X({Y:!0},(a,d)=>{const f=new kn(a);return s(f.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([a,d,f],m)=>{const b=Ss(d);return s(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,r)=>{const s=F_(r),a=VR(this.serializer,s);return t.put(a)})}ni(e,t){const i=t.store("remoteDocuments"),r=[];return i.X((s,a)=>{const d=t.store("remoteDocumentsV14"),f=(m=a,m.document?new rt(kn.fromString(m.document.name).popFirst(5)):m.noDocument?rt.fromSegments(m.noDocument.path):m.unknownDocument?rt.fromSegments(m.unknownDocument.path):mt()).path.toArray();var m;const b={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(d.put(b))}).next(()=>fe.waitFor(r))}si(e,t){const i=t.store("mutations"),r=tk(this.serializer),s=new IC(CC.zs,this.serializer.fe);return i.j().next(a=>{const d=new Map;return a.forEach(f=>{var m;let b=null!==(m=d.get(f.userId))&&void 0!==m?m:Xt();Bh(this.serializer,f).keys().forEach(I=>b=b.add(I)),d.set(f.userId,b)}),fe.forEach(d,(f,m)=>{const b=new kr(m),I=L_.de(this.serializer,b),D=s.getIndexManager(b),O=H_.de(b,this.serializer,D,s.referenceDelegate);return new EC(r,O,I,D).recalculateAndSaveOverlaysForDocumentKeys(new II(t,wo.ct),f).next()})})}}function nw(n){n.createObjectStore("targetDocuments",{keyPath:Cz}).createIndex("documentTargetsIndex",k1,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Iz,{unique:!0}),n.createObjectStore("targetGlobal")}const lk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ck{constructor(e,t,i,r,s,a,d,f,m,b,I=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=s,this.window=a,this.document=d,this.ri=m,this.oi=b,this.ui=I,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=D=>Promise.resolve(),!ck.D())throw new Le(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ek(this,r),this.di=t+"main",this.serializer=new UR(f),this.wi=new la(this.di,this.ui,new ak(this.serializer)),this.Bs=new _C(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tk(this.serializer),this.qs=new oF,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,lk);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new wo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var i=(0,ee.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ee.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ad(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Hu(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return iw(e).get("owner").next(t=>fe.resolve(this.Ri(t)))}Pi(e){return ad(e).delete(this.clientId)}bi(){var e=this;return(0,ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=zr(i,"clientMetadata");return r.j().next(s=>{const a=e.Si(s,18e5),d=s.filter(f=>-1===a.indexOf(f));return fe.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?fe.resolve(!0):iw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,lk);return!1}}return!(!this.networkEnabled||!this.inForeground)||ad(e).j().next(i=>void 0===this.Si(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new II(t,wo.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>ad(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return H_.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qb(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return L_.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){He("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(a=this.ui)?F1:14===a?kh:13===a?EI:12===a?BA:11===a?VA:void mt();var a;let d;return this.wi.runTransaction(e,r,s,f=>(d=new II(f,this.Os?this.Os.next():wo.ct),"readwrite-primary"===t?this.Ti(d).next(m=>!!m||this.Ei(d)).next(m=>{if(!m)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Le(ge.FAILED_PRECONDITION,Ab);return i(d)}).next(m=>this.vi(d).next(()=>m)):this.Oi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Oi(e){return iw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(ge.FAILED_PRECONDITION,lk)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iw(e).put("owner",t)}static D(){return la.D()}Ai(e){const t=iw(e);return t.get("owner").next(i=>this.Ri(i)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(nr(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,A.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return He("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return nr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function iw(n){return zr(n,"owner")}function ad(n){return zr(n,"clientMetadata")}function SC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class z_{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=Xt(),r=Xt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new z_(e,t.fromCache,i,r)}}class uk{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(sR(t))return fe.resolve(null);let i=rs(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ds(t,null,"F"),i=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=Xt(...s);return this.Ui.getDocuments(e,a).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.ji(t,d);return this.zi(t,m,a,f.readTime)?this.Ki(e,Ds(t,null,"F")):this.Wi(e,m,t,f)}))})))}Gi(e,t,i,r){return sR(t)||r.isEqual(It.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const a=this.ji(t,s);return this.zi(t,a,i,r)?this.Qi(e,t):(Sp()<=Ni.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lb(t)),this.Wi(e,a,t,_I(r,-1)))})}ji(e,t){let i=new Ii(GI(e));return t.forEach((r,s)=>{S_(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return Sp()<=Ni.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Lb(t)),this.Ui.getDocumentsMatchingQuery(e,t,Uo.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}class dk{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new di($t),this.Yi=new Nl(s=>Ph(s),Ol),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function hk(n,e,t,i){return new dk(n,e,t,i)}function fk(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,ee.Z)(function*(n,e){const t=ct(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],d=[];let f=Xt();for(const m of r){a.push(m.batchId);for(const b of m.mutations)f=f.add(b.key)}for(const m of s){d.push(m.batchId);for(const b of m.mutations)f=f.add(b.key)}return t.localDocuments.getDocuments(i,f).next(m=>({er:m,removedBatchIds:a,addedBatchIds:d}))})})}),xC.apply(this,arguments)}function AC(n){const e=ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function G_(n,e,t){let i=Xt(),r=Xt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let a=Eo();return t.forEach((d,f)=>{const m=s.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(It.min())?(e.removeEntry(d,f.readTime),a=a.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(f),a=a.insert(d,f)):He("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{nr:a,sr:r}})}function RC(n,e){const t=ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function $_(n,e){const t=ct(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,fe.resolve(r)):t.Bs.allocateTargetId(i).next(a=>(r=new Ul(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function zh(n,e,t){return kC.apply(this,arguments)}function kC(){return kC=(0,ee.Z)(function*(n,e,t){const i=ct(n),r=i.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Hu(a))throw a;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}),kC.apply(this,arguments)}function W_(n,e,t){const i=ct(n);let r=It.min(),s=Xt();return i.persistence.runTransaction("Execute query","readonly",a=>function(d,f,m){const b=ct(d),I=b.Yi.get(m);return void 0!==I?fe.resolve(b.Ji.get(I)):b.Bs.getTargetData(f,m)}(i,a,rs(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(a,d.targetId).next(f=>{s=f})}).next(()=>i.Hi.getDocumentsMatchingQuery(a,e,t?r:It.min(),t?s:Xt())).next(d=>(MC(i,zI(e),d),{documents:d,ir:s})))}function Gh(n,e){const t=ct(n),i=ct(t.Bs),r=t.Ji.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.le(s,e).next(a=>a?a.target:null))}function pk(n,e){const t=ct(n),i=t.Xi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Zi.getAllFromCollectionGroup(r,e,_I(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(MC(t,e,r),r))}function MC(n,e,t){let i=n.Xi.get(e)||It.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}function mk(){return mk=(0,ee.Z)(function*(n,e,t,i){const r=ct(n);let s=Xt(),a=Eo();for(const m of t){const b=e.rr(m.metadata.name);m.document&&(s=s.add(b));const I=e.ur(m);I.setReadTime(e.cr(m.metadata.readTime)),a=a.insert(b,I)}const d=r.Zi.newChangeBuffer({trackRemovals:!0}),f=yield $_(r,(m=i,rs(Ga(kn.fromString(`__bundle__/docs/${m}`)))));var m;return r.persistence.runTransaction("Apply bundle documents","readwrite",m=>G_(m,d,a).next(b=>(d.apply(m),b)).next(b=>r.Bs.removeMatchingKeysForTargetId(m,f.targetId).next(()=>r.Bs.addMatchingKeys(m,s,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,b.nr,b.sr)).next(()=>b.nr)))}),mk.apply(this,arguments)}function _F(n,e){return gk.apply(this,arguments)}function gk(){return gk=(0,ee.Z)(function*(n,e,t=Xt()){const i=yield $_(n,rs(cC(e.bundledQuery))),r=ct(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=or(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.qs.saveNamedQuery(s,e);const d=i.withResumeToken(Mr.EMPTY_BYTE_STRING,a);return r.Ji=r.Ji.insert(d.targetId,d),r.Bs.updateTargetData(s,d).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,t,i.targetId)).next(()=>r.qs.saveNamedQuery(s,e))})}),gk.apply(this,arguments)}function _k(n,e){return`firestore_clients_${n}_${e}`}function yk(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function PC(n,e){return`firestore_targets_${n}_${e}`}class q_{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static ar(e,t,i){const r=JSON.parse(i);let s,a="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(s=new Le(r.error.code,r.error.message))),a?new q_(e,t,r.state,s):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tm{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Le(i.error.code,i.error.message))),s?new tm(e,i.state,r):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=Fh();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=vI(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new rw(e,s):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sw{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sw(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ow{constructor(){this.activeTargetIds=Fh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NC{constructor(e,t,i,r,s){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new di($t),this.started=!1,this.yr=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=_k(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ow),this.Tr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const r of t){if(r===e.wr)continue;const s=e.getItem(_k(e.persistenceKey,r));if(s){const a=rw.ar(r,s);a&&(e.gr=e.gr.insert(a.clientId,a))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const r=e.br(i);r&&e.Vr(r)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(PC(this.persistenceKey,e));if(i){const r=tm.ar(e,i);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(PC(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Cr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(He("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ee.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const r=t.Or(i.key);return t.Fr(r,null)}{const r=t.Br(i.key,i.newValue);if(r)return t.Fr(r.clientId,r)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const r=t.Lr(i.key,i.newValue);if(r)return t.qr(r)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const r=t.Ur(i.key,i.newValue);if(r)return t.Kr(r)}}else if(i.key===t.vr){if(null!==i.newValue){const r=t.br(i.newValue);if(r)return t.Vr(r)}}else if(i.key===t.Ir){const r=function(s){let a=wo.ct;if(null!=s)try{const d=JSON.parse(s);Tt("number"==typeof d),a=d}catch(d){nr("SharedClientState","Failed to read sequence number from WebStorage",d)}return a}(i.newValue);r!==wo.ct&&t.sequenceNumberHandler(r)}else if(i.key===t.Rr){const r=t.Gr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const r=new q_(this.currentUser,e,t,i),s=yk(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const t=yk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const r=PC(this.persistenceKey,e),s=new tm(e,t,i);this.setItem(r,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return rw.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),r=Number(i[1]);return q_.ar(new kr(void 0!==i[2]?i[2]:null),r,t)}Ur(e,t){const i=this.Ar.exec(e),r=Number(i[1]);return tm.ar(r,t)}br(e){return sw.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(i),a=[],d=[];return s.forEach(f=>{r.has(f)||a.push(f)}),r.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Wr(a,d).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Fh();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class vk{constructor(){this.Hr=new ow,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ow,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bk{Yr(e){}shutdown(){}}class wk{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let K_=null;function aw(){return null===K_?K_=268435456+Math.round(2147483648*Math.random()):K_++,"0x"+K_.toString(16)}const Ek={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ik{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ls="WebChannelConnection";class yF extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const a=aw(),d=this.To(e,t);He("RestConnection",`Sending RPC '${e}' ${a}:`,d,i);const f={};return this.Eo(f,r,s),this.Ao(e,d,f,i).then(m=>(He("RestConnection",`Received RPC '${e}' ${a}: `,m),m),m=>{throw aa("RestConnection",`RPC '${e}' ${a} failed with error: `,m,"url: ",d,"request:",i),m})}vo(e,t,i,r,s,a){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${Ek[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=aw();return new Promise((a,d)=>{const f=new Ez;f.setWithCredentials(!0),f.listenOnce(bz.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case wA.NO_ERROR:const b=f.getResponseJson();He(Ls,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(b)),a(b);break;case wA.TIMEOUT:He(Ls,`RPC '${e}' ${s} timed out`),d(new Le(ge.DEADLINE_EXCEEDED,"Request time out"));break;case wA.HTTP_ERROR:const I=f.getStatus();if(He(Ls,`RPC '${e}' ${s} failed with status:`,I,"response text:",f.getResponseText()),I>0){let D=f.getResponseJson();Array.isArray(D)&&(D=D[0]);const O=D?.error;if(O&&O.status&&O.message){const V=function(W){const re=W.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(re)>=0?re:ge.UNKNOWN}(O.status);d(new Le(V,O.message))}else d(new Le(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Le(ge.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{He(Ls,`RPC '${e}' ${s} completed.`)}});const m=JSON.stringify(r);He(Ls,`RPC '${e}' ${s} sending request:`,r),f.send(t,"POST",m,i,15)})}Ro(e,t,i){const r=aw(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=fI(),d=v1(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;void 0!==m&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.xmlHttpFactory=new wz({})),this.Eo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const b=s.join("");He(Ls,`Creating RPC '${e}' stream ${r}: ${b}`,f);const I=a.createWebChannel(b,f);let D=!1,O=!1;const V=new Ik({ro:re=>{O?He(Ls,`Not sending because RPC '${e}' stream ${r} is closed:`,re):(D||(He(Ls,`Opening RPC '${e}' stream ${r} transport.`),I.open(),D=!0),He(Ls,`RPC '${e}' stream ${r} sending:`,re),I.send(re))},oo:()=>I.close()}),W=(re,Me,ze)=>{re.listen(Me,je=>{try{ze(je)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return W(I,Tb.EventType.OPEN,()=>{O||He(Ls,`RPC '${e}' stream ${r} transport opened.`)}),W(I,Tb.EventType.CLOSE,()=>{O||(O=!0,He(Ls,`RPC '${e}' stream ${r} transport closed`),V.wo())}),W(I,Tb.EventType.ERROR,re=>{O||(O=!0,aa(Ls,`RPC '${e}' stream ${r} transport errored:`,re),V.wo(new Le(ge.UNAVAILABLE,"The operation could not be completed")))}),W(I,Tb.EventType.MESSAGE,re=>{var Me;if(!O){const ze=re.data[0];Tt(!!ze);const Ye=ze.error||(null===(Me=ze[0])||void 0===Me?void 0:Me.error);if(Ye){He(Ls,`RPC '${e}' stream ${r} received error:`,Ye);const xt=Ye.status;let Ot=function(zi){const cs=sr[zi];if(void 0!==cs)return YI(cs)}(xt),pn=Ye.message;void 0===Ot&&(Ot=ge.INTERNAL,pn="Unknown error status: "+xt+" with message "+Ye.message),O=!0,V.wo(new Le(Ot,pn)),I.close()}else He(Ls,`RPC '${e}' stream ${r} received:`,ze),V._o(ze)}}),W(d,b1.STAT_EVENT,re=>{re.stat===EA.PROXY?He(Ls,`RPC '${e}' stream ${r} detected buffering proxy`):re.stat===EA.NOPROXY&&He(Ls,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{V.fo()},0),V}}function vF(){return typeof window<"u"?window:null}function Y_(){return typeof document<"u"?document:null}function lw(n){return new eF(n,!0)}class Ck{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&He("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class bF{constructor(e,t,i,r,s,a,d,f){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Ck(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,ee.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===ge.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new Le(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No((0,ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sz extends bF{constructor(e,t,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function aC(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:mt(),r=e.targetChange.targetIds||[],s=function(f,m){return f.useProto3Json?(Tt(void 0===m||"string"==typeof m),Mr.fromBase64String(m||"")):(Tt(void 0===m||m instanceof Uint8Array),Mr.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,d=a&&function(f){const m=void 0===f.code?ge.UNKNOWN:YI(f.code);return new Le(m,f.message||"")}(a);t=new CR(i,r,s,d||null)}else if("documentChange"in e){const i=e.documentChange,r=ua(n,i.document.name),s=or(i.document.updateTime),a=i.document.createTime?or(i.document.createTime):It.min(),d=new xs({mapValue:{fields:i.document.fields}}),f=Ci.newFoundDocument(r,s,a,d);t=new zb(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const i=e.documentDelete,r=ua(n,i.document),s=i.readTime?or(i.readTime):It.min(),a=Ci.newNoDocument(r,s);t=new zb([],i.removedTargetIds||[],a.key,a)}else if("documentRemove"in e){const i=e.documentRemove,r=ua(n,i.document);t=new zb([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return mt();{const i=e.filter,{count:r=0,unchangedNames:s}=i,a=new Q1(r,s);t=new IR(i.targetId,a)}}var f;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return It.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?It.min():s.readTime?or(s.readTime):It.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=$a(this.serializer),t.addTarget=function(r,s){let a;const d=s.target;if(a=VI(d)?{documents:MR(r,d)}:{query:Wb(r,d)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Gb(r,s.resumeToken);const f=tC(r,s.expectedCount);null!==f&&(a.expectedCount=f)}else if(s.snapshotVersion.compareTo(It.min())>0){a.readTime=qp(r,s.snapshotVersion.toTimestamp());const f=tC(r,s.expectedCount);null!==f&&(a.expectedCount=f)}return a}(this.serializer,e);const i=function OR(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=$a(this.serializer),t.removeTarget=e,this.Wo(t)}}class xz extends bF{constructor(e,t,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function kR(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(i,r){let s=or(i.updateTime?i.updateTime:r);return s.isEqual(It.min())&&(s=or(r)),new q1(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=or(e.commitTime);return this.listener.cu(i,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=$a(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>N_(this.serializer,i))};this.Wo(t)}}class Dz extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Le(ge.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,t,i,s,a,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Le(ge.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Rz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(nr(t),this.mu=!1):He("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Sk{constructor(e,t,i,r,s){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{i.enqueueAndForget((0,ee.Z)(function*(){var f;ld(a)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,ee.Z)(function*(m){const b=ct(m);b.vu.add(4),yield nm(b),b.bu.set("Unknown"),b.vu.delete(4),yield $h(b)}),function(m){return f.apply(this,arguments)})(a))}))}),this.bu=new Rz(i,r)}}function $h(n){return cw.apply(this,arguments)}function cw(){return cw=(0,ee.Z)(function*(n){if(ld(n))for(const e of n.Ru)yield e(!0)}),cw.apply(this,arguments)}function nm(n){return im.apply(this,arguments)}function im(){return im=(0,ee.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),im.apply(this,arguments)}function uw(n,e){const t=ct(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),FC(t)?hw(t):Gr(t).Ko()&&xk(t,e))}function dw(n,e){const t=ct(n),i=Gr(t);t.Au.delete(e),i.Ko()&&Dk(t,e),0===t.Au.size&&(i.Ko()?i.jo():ld(t)&&t.bu.set("Unknown"))}function xk(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gr(n).su(e)}function Dk(n,e){n.Vu.qt(e),Gr(n).iu(e)}function hw(n){n.Vu=new SR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Gr(n).start(),n.bu.gu()}function FC(n){return ld(n)&&!Gr(n).Uo()&&n.Au.size>0}function ld(n){return 0===ct(n).vu.size}function Ak(n){n.Vu=void 0}function kz(n){return LC.apply(this,arguments)}function LC(){return LC=(0,ee.Z)(function*(n){n.Au.forEach((e,t)=>{xk(n,e)})}),LC.apply(this,arguments)}function Z_(n,e){return rm.apply(this,arguments)}function rm(){return rm=(0,ee.Z)(function*(n,e){Ak(n),FC(n)?(n.bu.Iu(e),hw(n)):n.bu.set("Unknown")}),rm.apply(this,arguments)}function wF(n,e,t){return UC.apply(this,arguments)}function UC(){return UC=(0,ee.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof CR&&2===e.state&&e.cause)try{yield(i=(0,ee.Z)(function*(r,s){const a=s.cause;for(const d of s.targetIds)r.Au.has(d)&&(yield r.remoteSyncer.rejectListen(d,a),r.Au.delete(d),r.Vu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield fw(n,i)}else if(e instanceof zb?n.Vu.Ht(e):e instanceof IR?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(It.min()))try{const i=yield AC(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const a=r.Vu.ce(s);return a.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=r.Au.get(f);m&&r.Au.set(f,m.withResumeToken(d.resumeToken,s))}}),a.targetMismatches.forEach((d,f)=>{const m=r.Au.get(d);if(!m)return;r.Au.set(d,m.withResumeToken(Mr.EMPTY_BYTE_STRING,m.snapshotVersion)),Dk(r,d);const b=new Ul(m.target,d,f,m.sequenceNumber);xk(r,b)}),r.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){He("RemoteStore","Failed to raise snapshot:",i),yield fw(n,i)}var i}),UC.apply(this,arguments)}function fw(n,e,t){return VC.apply(this,arguments)}function VC(){return VC=(0,ee.Z)(function*(n,e,t){if(!Hu(e))throw e;n.vu.add(1),yield nm(n),n.bu.set("Offline"),t||(t=()=>AC(n.localStore)),n.asyncQueue.enqueueRetryable((0,ee.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield $h(n)}))}),VC.apply(this,arguments)}function Rk(n,e){return e().catch(t=>fw(n,t,e))}function sm(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ee.Z)(function*(n){const e=ct(n),t=Pc(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;EF(e);)try{const r=yield RC(e.localStore,i);if(null===r){0===e.Eu.length&&t.jo();break}i=r.batchId,IF(e,r)}catch(r){yield fw(e,r)}kk(e)&&Mk(e)}),Q_.apply(this,arguments)}function EF(n){return ld(n)&&n.Eu.length<10}function IF(n,e){n.Eu.push(e);const t=Pc(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function kk(n){return ld(n)&&!Pc(n).Uo()&&n.Eu.length>0}function Mk(n){Pc(n).start()}function CF(n){return BC.apply(this,arguments)}function BC(){return BC=(0,ee.Z)(function*(n){Pc(n).hu()}),BC.apply(this,arguments)}function TF(n){return HC.apply(this,arguments)}function HC(){return HC=(0,ee.Z)(function*(n){const e=Pc(n);for(const t of n.Eu)e.uu(t.mutations)}),HC.apply(this,arguments)}function SF(n,e,t){return pw.apply(this,arguments)}function pw(){return pw=(0,ee.Z)(function*(n,e,t){const i=n.Eu.shift(),r=Hb.from(i,e,t);yield Rk(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield sm(n)}),pw.apply(this,arguments)}function jC(n,e){return zC.apply(this,arguments)}function zC(){return zC=(0,ee.Z)(function*(n,e){var t;e&&Pc(n).ou&&(yield(t=(0,ee.Z)(function*(i,r){if(KI(s=r.code)&&s!==ge.ABORTED){const a=i.Eu.shift();Pc(i).Qo(),yield Rk(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),yield sm(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),kk(n)&&Mk(n)}),zC.apply(this,arguments)}function Ok(n,e){return mw.apply(this,arguments)}function mw(){return mw=(0,ee.Z)(function*(n,e){const t=ct(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const i=ld(t);t.vu.add(3),yield nm(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield $h(t)}),mw.apply(this,arguments)}function gw(n,e){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,ee.Z)(function*(n,e){const t=ct(n);e?(t.vu.delete(2),yield $h(t)):e||(t.vu.add(2),yield nm(t),t.bu.set("Unknown"))}),Pk.apply(this,arguments)}function Gr(n){return n.Su||(n.Su=function(e,t,i){const r=ct(e);return r.fu(),new Sz(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:kz.bind(null,n),ao:Z_.bind(null,n),nu:wF.bind(null,n)}),n.Ru.push(function(){var e=(0,ee.Z)(function*(t){t?(n.Su.Qo(),FC(n)?hw(n):n.bu.set("Unknown")):(yield n.Su.stop(),Ak(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Pc(n){return n.Du||(n.Du=function(e,t,i){const r=ct(e);return r.fu(),new xz(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:CF.bind(null,n),ao:jC.bind(null,n),au:TF.bind(null,n),cu:SF.bind(null,n)}),n.Ru.push(function(){var e=(0,ee.Z)(function*(t){t?(n.Du.Qo(),yield sm(n)):(yield n.Du.stop(),n.Eu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class _w{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,i,r,s){const a=Date.now()+i,d=new _w(e,t,a,r,s);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function om(n,e){if(nr("AsyncQueue",`${e}: ${n}`),Hu(n))return new Le(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Wh{constructor(e){this.comparator=e?(t,i)=>e(t,i)||rt.comparator(t.key,i.key):(t,i)=>rt.comparator(t.key,i.key),this.keyedMap=Mc(),this.sortedSet=new di(this.comparator)}static emptySet(e){return new Wh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Wh;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Nk{constructor(){this.Cu=new di(rt.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):mt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class cd{constructor(e,t,i,r,s,a,d,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,r,s){const a=[];return t.forEach(d=>{a.push({type:0,doc:d})}),new cd(e,t,Wh.emptySet(t),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class ud{constructor(){this.Nu=void 0,this.listeners=[]}}class Fk{constructor(){this.queries=new Nl(e=>jI(e),Fb),this.onlineState="Unknown",this.ku=new Set}}function X_(n,e){return J_.apply(this,arguments)}function J_(){return J_=(0,ee.Z)(function*(n,e){const t=ct(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new ud),r)try{s.Nu=yield t.onListen(i)}catch(a){const d=om(a,`Initialization of query '${Lb(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&$C(t)}),J_.apply(this,arguments)}function GC(n,e){return Lk.apply(this,arguments)}function Lk(){return Lk=(0,ee.Z)(function*(n,e){const t=ct(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),Lk.apply(this,arguments)}function Uk(n,e){const t=ct(n);let i=!1;for(const r of e){const a=t.queries.get(r.query);if(a){for(const d of a.listeners)d.$u(r)&&(i=!0);a.Nu=r}}i&&$C(t)}function xF(n,e,t){const i=ct(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function $C(n){n.ku.forEach(e=>{e.next()})}class WC{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new cd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class DF{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class qC{constructor(e){this.serializer=e}rr(e){return ua(this.serializer,e)}ur(e){return e.metadata.exists?tF(this.serializer,e.document,!1):Ci.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return or(e)}}class Mz{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KC(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=kn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new qC(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const a of r.metadata.queries){const d=(t.get(a)||Xt()).add(s);t.set(a,d)}}return t}complete(){var e=this;return(0,ee.Z)(function*(){const t=yield function OC(n,e,t,i){return mk.apply(this,arguments)}(e.localStore,new qC(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const r of e.queries)yield _F(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function KC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Vk{constructor(e){this.key=e}}class YC{constructor(e){this.key=e}}class AF{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Xt(),this.mutatedKeys=Xt(),this.tc=GI(e),this.ec=new Wh(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new Nk,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,a=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,m="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((b,I)=>{const D=r.get(b),O=S_(this.query,I)?I:null,V=!!D&&this.mutatedKeys.has(D.key),W=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let re=!1;D&&O?D.data.isEqual(O.data)?V!==W&&(i.track({type:3,doc:O}),re=!0):this.rc(D,O)||(i.track({type:2,doc:O}),re=!0,(f&&this.tc(O,f)>0||m&&this.tc(O,m)<0)&&(d=!0)):!D&&O?(i.track({type:0,doc:O}),re=!0):D&&!O&&(i.track({type:1,doc:D}),re=!0,(f||m)&&(d=!0)),re&&(O?(a=a.add(O),s=W?s.add(b):s.delete(b)):(a=a.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const b="F"===this.query.limitType?a.last():a.first();a=a.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{ec:a,ic:i,zi:d,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((m,b)=>function(I,D){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return O(I)-O(D)}(m.type,b.type)||this.tc(m.doc,b.doc)),this.oc(i);const a=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==s.length||f?{snapshot:new cd(this.query,e.ec,r,s,e.mutatedKeys,0===d,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Nk,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Xt(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new YC(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new Vk(i))}),t}hc(e){this.Yu=e.ir,this.Zu=Xt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return cd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ZC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Bk{constructor(e){this.key=e,this.fc=!1}}class Hk{constructor(e,t,i,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new Nl(d=>jI(d),Fb),this._c=new Map,this.mc=new Set,this.gc=new di(rt.comparator),this.yc=new Map,this.Ic=new tw,this.Tc={},this.Ec=new Map,this.Ac=sd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function RF(n,e){return yw.apply(this,arguments)}function yw(){return yw=(0,ee.Z)(function*(n,e){const t=Sw(n);let i,r;const s=t.wc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const a=yield $_(t.localStore,rs(e)),d=t.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=yield vw(t,e,i,"current"===d,a.resumeToken),t.isPrimaryClient&&uw(t.remoteStore,a)}return r}),yw.apply(this,arguments)}function vw(n,e,t,i,r){return dd.apply(this,arguments)}function dd(){return dd=(0,ee.Z)(function*(n,e,t,i,r){n.Rc=(I,D,O)=>{return(V=(0,ee.Z)(function*(W,re,Me,ze){let je=re.view.sc(Me);je.zi&&(je=yield W_(W.localStore,re.query,!1).then(({documents:Ot})=>re.view.sc(Ot,je)));const Ye=ze&&ze.targetChanges.get(re.targetId),xt=re.view.applyChanges(je,W.isPrimaryClient,Ye);return qk(W,re.targetId,xt.cc),xt.snapshot}),function(W,re,Me,ze){return V.apply(this,arguments)})(n,I,D,O);var V};const s=yield W_(n.localStore,e,!0),a=new AF(e,s.ir),d=a.sc(s.documents),f=M_.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),m=a.applyChanges(d,n.isPrimaryClient,f);qk(n,t,m.cc);const b=new ZC(e,t,a);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),m.snapshot}),dd.apply(this,arguments)}function bw(n,e){return ww.apply(this,arguments)}function ww(){return ww=(0,ee.Z)(function*(n,e){const t=ct(n),i=t.wc.get(e),r=t._c.get(i.targetId);if(r.length>1)return t._c.set(i.targetId,r.filter(s=>!Fb(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zh(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),dw(t.remoteStore,i.targetId),ey(t,i.targetId)}).catch(Ml))):(ey(t,i.targetId),yield zh(t.localStore,i.targetId,!0))}),ww.apply(this,arguments)}function QC(){return QC=(0,ee.Z)(function*(n,e,t){const i=xw(n);try{const r=yield function(s,a){const d=ct(s),f=wi.now(),m=a.reduce((D,O)=>D.add(O.key),Xt());let b,I;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>{let O=Eo(),V=Xt();return d.Zi.getEntries(D,m).next(W=>{O=W,O.forEach((re,Me)=>{Me.isValidDocument()||(V=V.add(re))})}).next(()=>d.localDocuments.getOverlayedDocuments(D,O)).next(W=>{b=W;const re=[];for(const Me of a){const ze=Y1(Me,b.get(Me.key).overlayedDocument);null!=ze&&re.push(new Ll(Me.key,ze,YA(ze.value.mapValue),Ui.exists(!0)))}return d.mutationQueue.addMutationBatch(D,f,re,a)}).next(W=>{I=W;const re=W.applyToLocalDocumentSet(b,V);return d.documentOverlayCache.saveOverlays(D,W.batchId,re)})}).then(()=>({batchId:I.batchId,changes:lR(b)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,d){let f=s.Tc[s.currentUser.toKey()];f||(f=new di($t)),f=f.insert(a,d),s.Tc[s.currentUser.toKey()]=f}(i,r.batchId,t),yield da(i,r.changes),yield sm(i.remoteStore)}catch(r){const s=om(r,"Failed to persist write");t.reject(s)}}),QC.apply(this,arguments)}function zk(n,e){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,ee.Z)(function*(n,e){const t=ct(n);try{const i=yield function gF(n,e){const t=ct(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const d=[];e.targetChanges.forEach((b,I)=>{const D=r.get(I);if(!D)return;d.push(t.Bs.removeMatchingKeys(s,b.removedDocuments,I).next(()=>t.Bs.addMatchingKeys(s,b.addedDocuments,I)));let O=D.withSequenceNumber(s.currentSequenceNumber);var V,W,re;null!==e.targetMismatches.get(I)?O=O.withResumeToken(Mr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,i)),r=r.insert(I,O),W=O,re=b,(0===(V=D).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(s,O))});let f=Eo(),m=Xt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(G_(s,a,e.documentUpdates).next(b=>{f=b.nr,m=b.sr})),!i.isEqual(It.min())){const b=t.Bs.getLastRemoteSnapshotVersion(s).next(I=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return fe.waitFor(d).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,m)).next(()=>f)}).then(s=>(t.Ji=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const a=t.yc.get(s);a&&(Tt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.fc=!0:r.modifiedDocuments.size>0?Tt(a.fc):r.removedDocuments.size>0&&(Tt(a.fc),a.fc=!1))}),yield da(t,i,e)}catch(i){yield Ml(i)}}),Gk.apply(this,arguments)}function XC(n,e,t){const i=ct(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,a)=>{const d=a.view.Mu(e);d.snapshot&&r.push(d.snapshot)}),function(s,a){const d=ct(s);d.onlineState=a;let f=!1;d.queries.forEach((m,b)=>{for(const I of b.listeners)I.Mu(a)&&(f=!0)}),f&&$C(d)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function kF(n,e,t){return JC.apply(this,arguments)}function JC(){return JC=(0,ee.Z)(function*(n,e,t){const i=ct(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.yc.get(e),s=r&&r.key;if(s){let a=new di(rt.comparator);a=a.insert(s,Ci.newNoDocument(s,It.min()));const d=Xt().add(s),f=new k_(It.min(),new Map,new di($t),a,d);yield zk(i,f),i.gc=i.gc.remove(s),i.yc.delete(e),nT(i)}else yield zh(i.localStore,e,!1).then(()=>ey(i,e,t)).catch(Ml)}),JC.apply(this,arguments)}function Oz(n,e){return $k.apply(this,arguments)}function $k(){return $k=(0,ee.Z)(function*(n,e){const t=ct(n),i=e.batch.batchId;try{const r=yield function DC(n,e){const t=ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(a,d,f,m){const b=f.batch,I=b.keys();let D=fe.resolve();return I.forEach(O=>{D=D.next(()=>m.getEntry(d,O)).next(V=>{const W=f.docVersions.get(O);Tt(null!==W),V.version.compareTo(W)<0&&(b.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),m.addEntry(V)))})}),D.next(()=>a.mutationQueue.removeMutationBatch(d,b))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let d=Xt();for(let f=0;f<a.mutationResults.length;++f)a.mutationResults[f].transformResults.length>0&&(d=d.add(a.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);Wk(t,i,null),tT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield da(t,r)}catch(r){yield Ml(r)}}),$k.apply(this,arguments)}function Pz(n,e,t){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,ee.Z)(function*(n,e,t){const i=ct(n);try{const r=yield function(s,a){const d=ct(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,a).next(b=>(Tt(null!==b),m=b.keys(),d.mutationQueue.removeMutationBatch(f,b))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,a)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(i.localStore,e);Wk(i,e,t),tT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield da(i,r)}catch(r){yield Ml(r)}}),Ew.apply(this,arguments)}function eT(){return eT=(0,ee.Z)(function*(n,e){const t=ct(n);ld(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const a=ct(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>a.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===i)return void e.resolve();const r=t.Ec.get(i)||[];r.push(e),t.Ec.set(i,r)}catch(i){const r=om(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),eT.apply(this,arguments)}function tT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Wk(n,e,t){const i=ct(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||OF(n,i)})}function OF(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(dw(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),nT(n))}function qk(n,e,t){for(const i of t)i instanceof Vk?(n.Ic.addReference(i.key,e),Nz(n,i)):i instanceof YC?(He("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||OF(n,i.key)):mt()}function Nz(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(He("SyncEngine","New document in limbo: "+t),n.mc.add(i),nT(n))}function nT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new rt(kn.fromString(e)),i=n.Ac.next();n.yc.set(i,new Bk(t)),n.gc=n.gc.insert(t,i),uw(n.remoteStore,new Ul(rs(Ga(t.path)),i,"TargetPurposeLimboResolution",wo.ct))}}function da(n,e,t){return iT.apply(this,arguments)}function iT(){return iT=(0,ee.Z)(function*(n,e,t){const i=ct(n),r=[],s=[],a=[];var d;i.wc.isEmpty()||(i.wc.forEach((d,f)=>{a.push(i.Rc(f,e,t).then(m=>{if((m||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,m?.fromCache?"not-current":"current"),m){r.push(m);const b=z_.Li(f.targetId,m);s.push(b)}}))}),yield Promise.all(a),i.dc.nu(r),yield(d=(0,ee.Z)(function*(f,m){const b=ct(f);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>fe.forEach(m,D=>fe.forEach(D.Fi,O=>b.persistence.referenceDelegate.addReference(I,D.targetId,O)).next(()=>fe.forEach(D.Bi,O=>b.persistence.referenceDelegate.removeReference(I,D.targetId,O)))))}catch(I){if(!Hu(I))throw I;He("LocalStore","Failed to update sequence numbers: "+I)}for(const I of m){const D=I.targetId;if(!I.fromCache){const O=b.Ji.get(D),W=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);b.Ji=b.Ji.insert(D,W)}}}),function(f,m){return d.apply(this,arguments)})(i.localStore,s))}),iT.apply(this,arguments)}function PF(n,e){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,ee.Z)(function*(n,e){const t=ct(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const i=yield fk(t.localStore,e);t.currentUser=e,(r=t).Ec.forEach(a=>{a.forEach(d=>{d.reject(new Le(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield da(t,i.er)}var r}),Iw.apply(this,arguments)}function qh(n,e){const t=ct(n),i=t.yc.get(e);if(i&&i.fc)return Xt().add(i.key);{let r=Xt();const s=t._c.get(e);if(!s)return r;for(const a of s){const d=t.wc.get(a);r=r.unionWith(d.view.nc)}return r}}function Kk(n,e){return ty.apply(this,arguments)}function ty(){return ty=(0,ee.Z)(function*(n,e){const t=ct(n),i=yield W_(t.localStore,e.query,!0),r=e.view.hc(i);return t.isPrimaryClient&&qk(t,e.targetId,r.cc),r}),ty.apply(this,arguments)}function rT(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,ee.Z)(function*(n,e){const t=ct(n);return pk(t.localStore,e).then(i=>da(t,i))}),sT.apply(this,arguments)}function oT(n,e,t,i){return ny.apply(this,arguments)}function ny(){return ny=(0,ee.Z)(function*(n,e,t,i){const r=ct(n),s=yield function(a,d){const f=ct(a),m=ct(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",b=>m.Sn(b,d).next(I=>I?f.localDocuments.getDocuments(b,I):fe.resolve(null)))}(r.localStore,e);var d;null!==s?("pending"===t?yield sm(r.remoteStore):"acknowledged"===t||"rejected"===t?(Wk(r,e,i||null),tT(r,e),d=e,ct(ct(r.localStore).mutationQueue).Cn(d)):mt(),yield da(r,s)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),ny.apply(this,arguments)}function Yk(){return Yk=(0,ee.Z)(function*(n,e){const t=ct(n);if(Sw(t),xw(t),!0===e&&!0!==t.vc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield NF(t,i.toArray());t.vc=!0,yield gw(t.remoteStore,!0);for(const s of r)uw(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const i=[];let r=Promise.resolve();t._c.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(ey(t,a),zh(t.localStore,a,!0))),dw(t.remoteStore,a)}),yield r,yield NF(t,i),function(s){const a=ct(s);a.yc.forEach((d,f)=>{dw(a.remoteStore,f)}),a.Ic.Ts(),a.yc=new Map,a.gc=new di(rt.comparator)}(t),t.vc=!1,yield gw(t.remoteStore,!1)}}),Yk.apply(this,arguments)}function NF(n,e,t){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,ee.Z)(function*(n,e,t){const i=ct(n),r=[],s=[];for(const a of e){let d;const f=i._c.get(a);if(f&&0!==f.length){d=yield $_(i.localStore,rs(f[0]));for(const m of f){const b=i.wc.get(m),I=yield Kk(i,b);I.snapshot&&s.push(I.snapshot)}}else{const m=yield Gh(i.localStore,a);d=yield $_(i.localStore,m),yield vw(i,aT(m),a,!1,d.resumeToken)}r.push(d)}return i.dc.nu(s),r}),Zk.apply(this,arguments)}function aT(n){return H1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function FF(n){const e=ct(n);return ct(ct(e.localStore).persistence).$i()}function LF(n,e,t,i){return lT.apply(this,arguments)}function lT(){return lT=(0,ee.Z)(function*(n,e,t,i){const r=ct(n);if(r.vc)return void He("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=yield pk(r.localStore,zI(s[0])),d=k_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Mr.EMPTY_BYTE_STRING);yield da(r,a,d);break}case"rejected":yield zh(r.localStore,e,!0),ey(r,e,i);break;default:mt()}}),lT.apply(this,arguments)}function UF(n,e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=(0,ee.Z)(function*(n,e,t){const i=Sw(n);if(i.vc){for(const r of e){if(i._c.has(r)){He("SyncEngine","Adding an already active target "+r);continue}const s=yield Gh(i.localStore,r),a=yield $_(i.localStore,s);yield vw(i,aT(s),a.targetId,!1,a.resumeToken),uw(i.remoteStore,a)}for(const r of t)i._c.has(r)&&(yield zh(i.localStore,r,!1).then(()=>{dw(i.remoteStore,r),ey(i,r)}).catch(Ml))}}),Tw.apply(this,arguments)}function Sw(n){const e=ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kF.bind(null,e),e.dc.nu=Uk.bind(null,e.eventManager),e.dc.Pc=xF.bind(null,e.eventManager),e}function xw(n){const e=ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pz.bind(null,e),e}class iy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ee.Z)(function*(){t.serializer=lw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hk(this.persistence,new uk,e.initialUser,this.serializer)}createPersistence(e){return new IC(CC.zs,this.serializer)}createSharedClientState(e){return new vk}terminate(){var e=this;return(0,ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ry extends iy{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ee.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield xw(i.Vc.syncEngine),yield sm(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return hk(this.persistence,new uk,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new JR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new OA(t,this.persistence);return new MA(e.asyncQueue,i)}createPersistence(e){const t=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new ck(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,vF(),Y_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new vk}}class BF extends ry{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ee.Z)(function*(){yield t().call(i,e);const r=i.Vc.syncEngine;i.sharedClientState instanceof NC&&(i.sharedClientState.syncEngine={jr:oT.bind(null,r),zr:LF.bind(null,r),Wr:UF.bind(null,r),$i:FF.bind(null,r),Qr:rT.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,ee.Z)(function*(a){yield function Cw(n,e){return Yk.apply(this,arguments)}(i.Vc.syncEngine,a),i.gcScheduler&&(a&&!i.gcScheduler.started?i.gcScheduler.start():a||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(a&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():a||i.indexBackfillerScheduler.stop())});return function(a){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=vF();if(!NC.D(t))throw new Le(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new NC(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Kh{initialize(e,t){var i=this;return(0,ee.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>XC(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=PF.bind(null,i.syncEngine),yield gw(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fk}createDatastore(e){const t=lw(e.databaseInfo.databaseId),i=new yF(e.databaseInfo);return new Dz(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=d=>XC(this.syncEngine,d,0),a=wk.D()?new wk:new bk,new Sk(t,i,r,s,a);var t,i,r,s,a}createSyncEngine(e,t){return function(i,r,s,a,d,f,m){const b=new Hk(i,r,s,a,d,f);return m&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ee.Z)(function*(t){const i=ct(t);He("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield nm(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Dw(n,e=10240){let t=0;return{read:()=>(0,ee.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Aw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HF{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ir,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),r=Number(i);isNaN(r)&&e.Mc(`length string (${i}) is not valid number`);const s=yield e.$c(r);return new DF(JSON.parse(s),t.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class Fz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ee.Z)(function*(s,a){const d=ct(s),f=$a(d.serializer)+"/documents",m={documents:a.map(O=>P_(d.serializer,O))},b=yield d.vo("BatchGetDocuments",f,m,a.length),I=new Map;b.forEach(O=>{const V=function oC(n,e){return"found"in e?function(t,i){Tt(!!i.found);const r=ua(t,i.found.name),s=or(i.found.updateTime),a=i.found.createTime?or(i.found.createTime):It.min(),d=new xs({mapValue:{fields:i.found.fields}});return Ci.newFoundDocument(r,s,a,d)}(n,e):"missing"in e?function(t,i){Tt(!!i.missing),Tt(!!i.readTime);const r=ua(t,i.missing),s=or(i.readTime);return Ci.newNoDocument(r,s)}(n,e):mt()}(d.serializer,O);I.set(V.key.toString(),V)});const D=[];return a.forEach(O=>{const V=I.get(O.toString());Tt(!!V),D.push(V)}),D}),function(s,a){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=rt.fromPath(r);e.mutations.push(new Bb(s,e.precondition(s)))}),yield(i=(0,ee.Z)(function*(r,s){const a=ct(r),d=$a(a.serializer)+"/documents",f={writes:s.map(m=>N_(a.serializer,m))};yield a.Io("Commit",d,f)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mt();t=It.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Le(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?Ui.exists(!1):Ui.updateTime(t):Ui.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Le(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ui.updateTime(t)}return Ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Lz{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new Ck(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ee.Z)(function*(){const t=new Fz(e.datastore),i=e.qc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Uc(s)}))}).catch(r=>{e.Uc(r)})}))}qc(e){try{const t=this.updateFunction(e);return!Rp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!KI(t)}return!1}}class jF{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=kr.UNAUTHENTICATED,this.clientId=mI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var a=(0,ee.Z)(function*(d){He("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(i,a=>(He("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var e=this;return(0,ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=om(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function Rw(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ee.Z)(function*(s){i.isEqual(s)||(yield fk(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),cT.apply(this,arguments)}function uT(n,e){return kw.apply(this,arguments)}function kw(){return kw=(0,ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield hT(n);He("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>Ok(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Ok(e.remoteStore,s)),n._onlineComponents=e}),kw.apply(this,arguments)}function dT(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function hT(n){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){He("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Rw(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!dT(t))throw t;aa("Error using user provided cache. Falling back to memory cache: "+t),yield Rw(n,new iy)}}else He("FirestoreClient","Using default OfflineComponentProvider"),yield Rw(n,new iy);return n._offlineComponents}),Mw.apply(this,arguments)}function sy(n){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(He("FirestoreClient","Using user provided OnlineComponentProvider"),yield uT(n,n._uninitializedComponentsProvider._online)):(He("FirestoreClient","Using default OnlineComponentProvider"),yield uT(n,new Kh))),n._onlineComponents}),Xk.apply(this,arguments)}function Jk(n){return hT(n).then(e=>e.persistence)}function am(n){return hT(n).then(e=>e.localStore)}function fT(n){return sy(n).then(e=>e.remoteStore)}function Ow(n){return sy(n).then(e=>e.syncEngine)}function Nc(n){return pT.apply(this,arguments)}function pT(){return pT=(0,ee.Z)(function*(n){const e=yield sy(n),t=e.eventManager;return t.onListen=RF.bind(null,e.syncEngine),t.onUnlisten=bw.bind(null,e.syncEngine),t}),pT.apply(this,arguments)}function GF(n,e,t={}){const i=new ir;return n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(r,s,a,d,f){const m=new Aw({next:I=>{s.enqueueAndForget(()=>GC(r,b));const D=I.docs.has(a);!D&&I.fromCache?f.reject(new Le(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&I.fromCache&&d&&"server"===d.source?f.reject(new Le(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(I)},error:I=>f.reject(I)}),b=new WC(Ga(a.path),m,{includeMetadataChanges:!0,Ku:!0});return X_(r,b)}(yield Nc(n),n.asyncQueue,e,t,i)})),i.promise}function WF(n,e,t={}){const i=new ir;return n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(r,s,a,d,f){const m=new Aw({next:I=>{s.enqueueAndForget(()=>GC(r,b)),I.fromCache&&"server"===d.source?f.reject(new Le(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(I)},error:I=>f.reject(I)}),b=new WC(a,m,{includeMetadataChanges:!0,Ku:!0});return X_(r,b)}(yield Nc(n),n.asyncQueue,e,t,i)})),i.promise}function iM(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const YF=new Map;function rM(n,e,t){if(!t)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZF(n,e,t,i){if(!0===e&&!0===i)throw new Le(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QF(n){if(!rt.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XF(n){if(rt.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Pw(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":mt()}function Dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pw(n);throw new Le(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function JF(n,e){if(e<=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class eL{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=iM(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Le(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Le(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Le(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nw{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new C1;switch(t.type){case"firstParty":return new TA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YF.get(e);t&&(He("ComponentProvider","Removing Datastore"),YF.delete(e),t.terminate())}(this),Promise.resolve()}}class Ti{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ti(this.firestore,e,this._key)}}class Us{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class o extends Us{constructor(e,t,i){super(e,t,Ga(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ti(this.firestore,null,new rt(e))}withConverter(e){return new o(this.firestore,e,this._path)}}function l(n,e,...t){if(n=(0,A.m9)(n),rM("collection","path",e),n instanceof Nw){const i=kn.fromString(e,...t);return XF(i),new o(n,null,i)}{if(!(n instanceof Ti||n instanceof o))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kn.fromString(e,...t));return XF(i),new o(n.firestore,null,i)}}function h(n,e,...t){if(n=(0,A.m9)(n),1===arguments.length&&(e=mI.A()),rM("doc","path",e),n instanceof Nw){const i=kn.fromString(e,...t);return QF(i),new Ti(n,null,new rt(i))}{if(!(n instanceof Ti||n instanceof o))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kn.fromString(e,...t));return QF(i),new Ti(n.firestore,n instanceof o?n.converter:null,new rt(i))}}function p(n,e){return n=(0,A.m9)(n),e=(0,A.m9)(e),(n instanceof Ti||n instanceof o)&&(e instanceof Ti||e instanceof o)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function g(n,e){return n=(0,A.m9)(n),e=(0,A.m9)(e),n instanceof Us&&e instanceof Us&&n.firestore===e.firestore&&Fb(n._query,e._query)&&n.converter===e.converter}class v{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Ck(this,"async_queue_retry"),this.Xc=()=>{const t=Y_();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Y_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Y_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ir;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Hu(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=_w.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&mt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function w(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class S{constructor(){this._progressObserver={},this._taskCompletionResolver=new ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class P extends Nw{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new v,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Te(this),this._firestoreClient.terminate()}}function ne(n){return n._firestoreClient||Te(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Te(n){var e,t,i;const r=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new GA(n._databaseId,d,n._persistenceKey,(m=r).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,iM(m.experimentalLongPollingOptions),m.useFetchStreams));var d,m;n._firestoreClient=new jF(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function St(n,e,t){const i=new ir;return n.asyncQueue.enqueue((0,ee.Z)(function*(){try{yield Rw(n,t),yield uT(n,e),i.resolve()}catch(r){const s=r;if(!dT(s))throw s;aa("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function Fw(n){if(n._initialized||n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hd(Mr.fromBase64String(e))}catch(t){throw new Le(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hd(Mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ei(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ay{constructor(e){this._methodName=e}}class sM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const X8=/^__.*__$/;class J8{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gp(e,this.data,t,this.fieldTransforms)}}class Bz{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class oM{constructor(e,t,i,r,s,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new oM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return cM(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Hz(this.ca)&&X8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class eK{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||lw(e)}ya(e,t,i,r=!1){return new oM({ca:e,methodName:t,ga:i,path:Ei.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ly(n){const e=n._freezeSettings(),t=lw(n._databaseId);return new eK(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aM(n,e,t,i,r,s={}){const a=n.ya(s.merge||s.mergeFields?2:0,e,t,r);oL("Data must be an object, but it was:",a,i);const d=Gz(i,a);let f,m;if(s.merge)f=new Li(a.fieldMask),m=a.fieldTransforms;else if(s.mergeFields){const b=[];for(const I of s.mergeFields){const D=gT(e,I,t);if(!a.contains(D))throw new Le(ge.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);Wz(b,D)||b.push(D)}f=new Li(b),m=a.fieldTransforms.filter(I=>f.covers(I.field))}else f=null,m=a.fieldTransforms;return new J8(new xs(d),f,m)}class mT extends ay{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mT}}function jz(n,e,t){return new oM({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iL extends ay{_toFieldTransform(e){return new zp(e.path,new jp)}isEqual(e){return e instanceof iL}}class tK extends ay{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=jz(this,e,!0),i=this.pa.map(s=>cy(s,t)),r=new Zu(i);return new zp(e.path,r)}isEqual(e){return this===e}}class nK extends ay{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=jz(this,e,!0),i=this.pa.map(s=>cy(s,t)),r=new Lh(i);return new zp(e.path,r)}isEqual(e){return this===e}}class iK extends ay{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new x_(e.serializer,fR(e.serializer,this.Ia));return new zp(e.path,t)}isEqual(e){return this===e}}function rL(n,e,t,i){const r=n.ya(1,e,t);oL("Data must be an object, but it was:",r,i);const s=[],a=xs.empty();xc(i,(f,m)=>{const b=lM(e,f,t);m=(0,A.m9)(m);const I=r.da(b);if(m instanceof mT)s.push(b);else{const D=cy(m,I);null!=D&&(s.push(b),a.set(b,D))}});const d=new Li(s);return new Bz(a,d,r.fieldTransforms)}function sL(n,e,t,i,r,s){const a=n.ya(1,e,t),d=[gT(e,i,t)],f=[r];if(s.length%2!=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<s.length;D+=2)d.push(gT(e,s[D])),f.push(s[D+1]);const m=[],b=xs.empty();for(let D=d.length-1;D>=0;--D)if(!Wz(m,d[D])){const O=d[D];let V=f[D];V=(0,A.m9)(V);const W=a.da(O);if(V instanceof mT)m.push(O);else{const re=cy(V,W);null!=re&&(m.push(O),b.set(O,re))}}const I=new Li(m);return new Bz(b,I,a.fieldTransforms)}function zz(n,e,t,i=!1){return cy(t,n.ya(i?4:3,e))}function cy(n,e){if($z(n=(0,A.m9)(n)))return oL("Unsupported field value:",e,n),Gz(n,e);if(n instanceof ay)return function(t,i){if(!Hz(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const a of t){let d=cy(a,i.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,A.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fR(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=wi.fromDate(t);return{timestampValue:qp(i.serializer,r)}}if(t instanceof wi){const r=new wi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qp(i.serializer,r)}}if(t instanceof sM)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hd)return{bytesValue:Gb(i.serializer,t._byteString)};if(t instanceof Ti){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:O_(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${Pw(t)}`)}(n,e)}function Gz(n,e){const t={};return L1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xc(n,(i,r)=>{const s=cy(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function $z(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof wi||n instanceof sM||n instanceof hd||n instanceof Ti||n instanceof ay)}function oL(n,e,t){if(!$z(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Pw(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function gT(n,e,t){if((e=(0,A.m9)(e))instanceof Yh)return e._internalPath;if("string"==typeof e)return lM(n,e);throw cM("Field path arguments must be of type string or ",n,!1,void 0,t)}const rK=new RegExp("[~\\*/\\[\\]]");function lM(n,e,t){if(e.search(rK)>=0)throw cM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yh(...e.split("."))._internalPath}catch{throw cM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cM(n,e,t,i,r){const s=i&&!i.isEmpty(),a=void 0!==r;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||a)&&(f+=" (found",s&&(f+=` in field ${i}`),a&&(f+=` in document ${r}`),f+=")"),new Le(ge.INVALID_ARGUMENT,d+n+f)}function Wz(n,e){return n.some(t=>t.isEqual(e))}class _T{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sK extends _T{data(){return super.data()}}function uM(n,e){return"string"==typeof e?lM(n,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}function qz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aL{}class yT extends aL{}function cm(n,e,...t){let i=[];e instanceof aL&&i.push(e),i=i.concat(t),function(r){const s=r.filter(d=>d instanceof Lw).length,a=r.filter(d=>d instanceof vT).length;if(s>1||s>0&&a>0)throw new Le(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class vT extends yT{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new vT(e,t,i)}_apply(e){const t=this._parse(e);return Qz(e._query,t),new Us(e.firestore,e.converter,Bp(e._query,t))}_parse(e){const t=ly(e.firestore);return function(r,s,a,d,f,m,b){let I;if(f.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){Zz(b,m);const D=[];for(const O of b)D.push(Yz(d,r,O));I={arrayValue:{values:D}}}else I=Yz(d,r,b)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||Zz(b,m),I=zz(a,"where",b,"in"===m||"not-in"===m);return Cn.create(f,m,I)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Lw extends aL{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lw(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const a=r.getFlattenedFilters();for(const d of a)Qz(s,d),s=Bp(s,d)}(e._query,t),new Us(e.firestore,e.converter,Bp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lL extends yT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lL(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Lp(r,s);return function(d,f){if(null===HI(d)){const m=Nb(d);null!==m&&Xz(0,m,f.field)}}(i,a),a}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Pl(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class dM extends yT{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new dM(e,t,i)}_apply(e){return new Us(e.firestore,e.converter,Ds(e._query,this._limit,this._limitType))}}class hM extends yT{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new hM(e,t,i)}_apply(e){const t=Kz(e,this.type,this._docOrFields,this._inclusive);return new Us(e.firestore,e.converter,(r=t,new Pl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class fM extends yT{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new fM(e,t,i)}_apply(e){const t=Kz(e,this.type,this._docOrFields,this._inclusive);return new Us(e.firestore,e.converter,(r=t,new Pl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function Kz(n,e,t,i){if(t[0]=(0,A.m9)(t[0]),t[0]instanceof _T)return function(r,s,a,d,f){if(!d)throw new Le(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const m=[];for(const b of Nh(r))if(b.field.isKeyField())m.push(kc(s,d.key));else{const I=d.data.field(b.field);if(Op(I))throw new Le(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const D=b.field.canonicalString();throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}m.push(I)}return new qu(m,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=ly(n.firestore);return function(s,a,d,f,m,b){const I=s.explicitOrderBy;if(m.length>I.length)throw new Le(ge.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let O=0;O<m.length;O++){const V=m[O];if(I[O].field.isKeyField()){if("string"!=typeof V)throw new Le(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof V}`);if(!Ku(s)&&-1!==V.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${V}' contains a slash.`);const W=s.path.child(kn.fromString(V));if(!rt.isDocumentKey(W))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const re=new rt(W);D.push(kc(a,re))}else{const W=zz(d,f,V);D.push(W)}}return new qu(D,b)}(n._query,n.firestore._databaseId,r,e,t,i)}}function Yz(n,e,t){if("string"==typeof(t=(0,A.m9)(t))){if(""===t)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ku(e)&&-1!==t.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(kn.fromString(t));if(!rt.isDocumentKey(i))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return kc(n,new rt(i))}if(t instanceof Ti)return kc(n,t._key);throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pw(t)}.`)}function Zz(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qz(n,e){if(e.isInequality()){const i=Nb(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=HI(n);null!==s&&Xz(0,r,s)}const t=function(i,r){for(const s of i)for(const a of s.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Le(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Xz(n,e,t){if(!t.isEqual(e))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class cL{convertValue(e,t="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return xc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new sM(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Gu(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(E_(e));default:return null}}convertTimestamp(e){const t=zu(e);return new wi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=kn.fromString(e);Tt(iF(i));const r=new $u(i.get(1),i.get(3)),s=new rt(i.popFirst(5));return r.isEqual(t)||nr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function pM(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class pK extends cL{constructor(e){super(),this.firestore=e}convertBytes(e){return new hd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ti(this.firestore,null,t)}}class uy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zh extends _T{constructor(e,t,i,r,s,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(uM("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class bT extends Zh{data(e={}){return super.data(e)}}class um{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uy(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new bT(this._firestore,this._userDataWriter,i.key,i,new uy(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new bT(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uy(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||3!==a.type).map(a=>{const d=new bT(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uy(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return 0!==a.type&&(f=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),m=s.indexOf(a.doc.key)),{type:gK(a.type),doc:d,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function eG(n,e){return n instanceof Zh&&e instanceof Zh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof um&&e instanceof um&&n._firestore===e._firestore&&g(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class dm extends cL{constructor(e){super(),this.firestore=e}convertBytes(e){return new hd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ti(this.firestore,null,t)}}function tG(n,e,t){n=Dn(n,Ti);const i=Dn(n.firestore,P),r=pM(n.converter,e,t);return Uw(i,[aM(ly(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Ui.none())])}function nG(n,e,t,...i){n=Dn(n,Ti);const r=Dn(n.firestore,P),s=ly(r);let a;return a="string"==typeof(e=(0,A.m9)(e))||e instanceof Yh?sL(s,"updateDoc",n._key,e,t,i):rL(s,"updateDoc",n._key,e),Uw(r,[a.toMutation(n._key,Ui.exists(!0))])}function iG(n,...e){var t,i,r;n=(0,A.m9)(n);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||w(e[a])||(s=e[a],a++);const d={includeMetadataChanges:s.includeMetadataChanges};if(w(e[a])){const I=e[a];e[a]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[a+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),e[a+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let f,m,b;if(n instanceof Ti)m=Dn(n.firestore,P),b=Ga(n._key.path),f={next:I=>{e[a]&&e[a](uL(m,n,I))},error:e[a+1],complete:e[a+2]};else{const I=Dn(n,Us);m=Dn(I.firestore,P),b=I._query;const D=new dm(m);f={next:O=>{e[a]&&e[a](new um(m,D,I,O))},error:e[a+1],complete:e[a+2]},qz(n._query)}return function(I,D,O,V){const W=new Aw(V),re=new WC(D,W,O);return I.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return X_(yield Nc(I),re)})),()=>{W.Dc(),I.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return GC(yield Nc(I),re)}))}}(ne(m),b,d,f)}function Uw(n,e){return function(t,i){const r=new ir;return t.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function jk(n,e,t){return QC.apply(this,arguments)}(yield Ow(t),i,r)})),r.promise}(ne(n),e)}function uL(n,e,t){const i=t.docs.get(e._key),r=new dm(n);return new Zh(n,r,e._key,i,new uy(t.hasPendingWrites,t.fromCache),e.converter)}const PK={maxAttempts:5};class rG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ly(e)}set(e,t,i){this._verifyNotCommitted();const r=hm(e,this._firestore),s=pM(r.converter,t,i),a=aM(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(a.toMutation(r._key,Ui.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=hm(e,this._firestore);let a;return a="string"==typeof(t=(0,A.m9)(t))||t instanceof Yh?sL(this._dataReader,"WriteBatch.update",s._key,t,i,r):rL(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hm(e,this._firestore);return this._mutations=this._mutations.concat(new Wp(t._key,Ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(n,e){if((n=(0,A.m9)(n)).firestore!==e)throw new Le(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class NK extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ly(e)}get(e){const t=hm(e,this._firestore),i=new pK(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return mt();const s=r[0];if(s.isFoundDocument())return new _T(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new _T(this._firestore,i,t._key,null,t.converter);throw mt()})}set(e,t,i){const r=hm(e,this._firestore),s=pM(r.converter,t,i),a=aM(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,a),this}update(e,t,i,...r){const s=hm(e,this._firestore);let a;return a="string"==typeof(t=(0,A.m9)(t))||t instanceof Yh?sL(this._dataReader,"Transaction.update",s._key,t,i,r):rL(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=hm(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hm(e,this._firestore),i=new dm(this._firestore);return super.get(e).then(r=>new Zh(this._firestore,i,t._key,r._document,new uy(!1,!1),t.converter))}}function dL(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function oG(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function aG(){if(!function zA(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Rl=Nu.SDK_VERSION,(0,Nu._registerComponent)(new gi.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),a=new P(new pI(t.getProvider("auth-internal")),new x1(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Le(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $u(d.options.projectId,f)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),(0,Nu.registerVersion)(IA,"3.13.0",n),(0,Nu.registerVersion)(IA,"3.13.0","esm2017")}();class wT{constructor(e){this._delegate=e}static fromBase64String(e){return aG(),new wT(hd.fromBase64String(e))}static fromUint8Array(e){return oG(),new wT(hd.fromUint8Array(e))}toBase64(){return aG(),this._delegate.toBase64()}toUint8Array(){return oG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hL(n){return function GK(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class $K{enableIndexedDbPersistence(e,t){return function We(n,e){Fw(n=Dn(n,P));const t=ne(n);if(t._uninitializedComponentsProvider)throw new Le(ge.FAILED_PRECONDITION,"SDK cache is already specified.");aa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Kh;return St(t,r,new ry(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ut(n){Fw(n=Dn(n,P));const e=ne(n);if(e._uninitializedComponentsProvider)throw new Le(ge.FAILED_PRECONDITION,"SDK cache is already specified.");aa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Kh;return St(e,i,new BF(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ue(n){if(n._initialized&&!n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ee.Z)(function*(){try{yield(t=(0,ee.Z)(function*(i){if(!la.D())return Promise.resolve();const r=i+"main";yield la.delete(r)}),function(i){return t.apply(this,arguments)})(SC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lG{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof $u||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&aa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function tL(n,e,t,i={}){var r;const s=(n=Dn(n,Nw))._getSettings(),a=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let d,f;if("string"==typeof i.mockUserToken)d=i.mockUserToken,f=kr.MOCK_USER;else{d=(0,A.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Le(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new kr(m)}n._authCredentials=new T1(new I1(d,f))}}(this._delegate,e,t,i)}enableNetwork(){return function an(n){return function zF(n){return n.asyncQueue.enqueue((0,ee.Z)(function*(){const e=yield Jk(n),t=yield fT(n);return e.setNetworkEnabled(!0),function(i){const r=ct(i);return r.vu.delete(0),$h(r)}(t)}))}(ne(n=Dn(n,P)))}(this._delegate)}disableNetwork(){return function ni(n){return function tM(n){return n.asyncQueue.enqueue((0,ee.Z)(function*(){const e=yield Jk(n),t=yield fT(n);return e.setNetworkEnabled(!1),(i=(0,ee.Z)(function*(r){const s=ct(r);s.vu.add(0),yield nm(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(ne(n=Dn(n,P)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,ZF("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ht(n){return function(e){const t=new ir;return e.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function MF(n,e){return eT.apply(this,arguments)}(yield Ow(e),t)})),t.promise}(ne(n=Dn(n,P)))}(this._delegate)}onSnapshotsInSync(e){return function TK(n,e){return function qF(n,e){const t=new Aw(e);return n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return i=yield Nc(n),r=t,ct(i).ku.add(r),void r.next();var i,r})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return i=yield Nc(n),r=t,void ct(i).ku.delete(r);var i,r}))}}(ne(n=Dn(n,P)),w(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vw(this,l(this._delegate,e))}catch(t){throw Ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vl(this,h(this._delegate,e))}catch(t){throw Ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jo(this,function c(n,e){if(n=Dn(n,Nw),rM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Us(n,null,(t=e,new Pl(kn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function FK(n,e,t){n=Dn(n,P);const i=Object.assign(Object.assign({},PK),t);return function(r){if(r.maxAttempts<1)throw new Le(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,a){const d=new ir;return r.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){const f=yield function eM(n){return sy(n).then(e=>e.datastore)}(r);new Lz(r.asyncQueue,f,a,s,d).run()})),d.promise}(ne(n),r=>e(new NK(n,r)),i)}(this._delegate,t=>e(new cG(this,t)))}batch(){return ne(this._delegate),new uG(new rG(this._delegate,e=>Uw(this._delegate,e)))}loadBundle(e){return function Fc(n,e){const t=ne(n=Dn(n,P)),i=new S;return function Uz(n,e,t,i){const r=function(s,a){let d;return d="string"==typeof s?wR().encode(s):s,f=function(f,m){if(f instanceof Uint8Array)return Dw(f,m);if(f instanceof ArrayBuffer)return Dw(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new HF(f,a);var f}(t,lw(e));n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){!function VF(n,e,t){const i=ct(n);var r;(r=(0,ee.Z)(function*(s,a,d){try{const f=yield a.getMetadata();if(yield function(D,O){const V=ct(D),W=or(O.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",re=>V.qs.getBundleMetadata(re,O.id)).then(re=>!!re&&re.createTime.compareTo(W)>=0)}(s.localStore,f))return yield a.close(),d._completeWith({taskState:"Success",documentsLoaded:(D=f).totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}),Promise.resolve(new Set);d._updateProgress(KC(f));const m=new Mz(f,s.localStore,a.serializer);let b=yield a.bc();for(;b;){const D=yield m.zu(b);D&&d._updateProgress(D),b=yield a.bc()}const I=yield m.complete();return yield da(s,I.Ju,void 0),yield function(D,O){const V=ct(D);return V.persistence.runTransaction("Save bundle","readwrite",W=>V.qs.saveBundleMetadata(W,O))}(s.localStore,f),d._completeWith(I.progress),Promise.resolve(I.Hu)}catch(f){return aa("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var D}),function(s,a,d){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield Ow(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function lm(n,e){return function Vz(n,e){return n.asyncQueue.enqueue((0,ee.Z)(function*(){return function(t,i){const r=ct(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield am(n),e)}))}(ne(n=Dn(n,P)),e).then(t=>t?new Us(n,null,t.query):null)}(this._delegate,e).then(t=>t?new jo(this,t):null)}}class mM extends cL{constructor(e){super(),this.firestore=e}convertBytes(e){return new wT(new hd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vl.forKey(t,this.firestore,null)}}class cG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mM(e)}get(e){const t=hy(e);return this._delegate.get(t).then(i=>new ET(this._firestore,new Zh(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=hy(e);return i?(dL("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=hy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=hy(e);return this._delegate.delete(t),this}}class uG{constructor(e){this._delegate=e}set(e,t,i){const r=hy(e);return i?(dL("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=hy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=hy(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dy{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new bT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new IT(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=dy.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new dy(e,new mM(e),t),r.set(t,s)),s}}dy.INSTANCES=new WeakMap;class Vl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mM(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vl(t,new Ti(t._delegate,i,new rt(e)))}static forKey(e,t,i){return new Vl(t,new Ti(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Vw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vw(this.firestore,l(this._delegate,e))}catch(t){throw Ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,A.m9)(e))instanceof Ti&&p(this._delegate,e)}set(e,t){t=dL("DocumentReference.set",t);try{return t?tG(this._delegate,e,t):tG(this._delegate,e)}catch(i){throw Ho(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?nG(this._delegate,e):nG(this._delegate,e,t,...i)}catch(r){throw Ho(r,"updateDoc()","DocumentReference.update()")}}delete(){return function IK(n){return Uw(Dn(n.firestore,P),[new Wp(n._key,Ui.none())])}(this._delegate)}onSnapshot(...e){const t=dG(e),i=hG(e,r=>new ET(this.firestore,new Zh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return iG(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function yK(n){n=Dn(n,Ti);const e=Dn(n.firestore,P),t=ne(e),i=new dm(e);return function nM(n,e){const t=new ir;return n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return(i=(0,ee.Z)(function*(r,s,a){try{const d=yield function(f,m){const b=ct(f);return b.persistence.runTransaction("read document","readonly",I=>b.localDocuments.getDocument(I,m))}(r,s);d.isFoundDocument()?a.resolve(d):d.isNoDocument()?a.resolve(null):a.reject(new Le(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=om(d,`Failed to get document '${s} from cache`);a.reject(f)}}),function(r,s,a){return i.apply(this,arguments)})(yield am(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Zh(e,i,n._key,r,new uy(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vK(n){n=Dn(n,Ti);const e=Dn(n.firestore,P);return GF(ne(e),n._key,{source:"server"}).then(t=>uL(e,n,t))}(this._delegate):function _K(n){n=Dn(n,Ti);const e=Dn(n.firestore,P);return GF(ne(e),n._key).then(t=>uL(e,n,t))}(this._delegate),t.then(i=>new ET(this.firestore,new Zh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Vl(this.firestore,this._delegate.withConverter(e?dy.getInstance(this.firestore,e):null))}}function Ho(n,e,t){return n.message=n.message.replace(e,t),n}function dG(n){for(const e of n)if("object"==typeof e&&!hL(e))return e;return{}}function hG(n,e){var t,i;let r;return r=hL(n[0])?n[0]:hL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class ET{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eG(this._delegate,e._delegate)}}class IT extends ET{data(e){const t=this._delegate.data(e);return function E1(n,e){n||mt()}(void 0!==t),t}}class jo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mM(e)}where(e,t,i){try{return new jo(this.firestore,cm(this._delegate,function oK(n,e,t){const i=e,r=uM("where",n);return vT._create(r,i,t)}(e,t,i)))}catch(r){throw Ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new jo(this.firestore,cm(this._delegate,function aK(n,e="asc"){const t=e,i=uM("orderBy",n);return lL._create(i,t)}(e,t)))}catch(i){throw Ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jo(this.firestore,cm(this._delegate,function lK(n){return JF("limit",n),dM._create("limit",n,"F")}(e)))}catch(t){throw Ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new jo(this.firestore,cm(this._delegate,function cK(n){return JF("limitToLast",n),dM._create("limitToLast",n,"L")}(e)))}catch(t){throw Ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jo(this.firestore,cm(this._delegate,function uK(...n){return hM._create("startAt",n,!0)}(...e)))}catch(t){throw Ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jo(this.firestore,cm(this._delegate,function dK(...n){return hM._create("startAfter",n,!1)}(...e)))}catch(t){throw Ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jo(this.firestore,cm(this._delegate,function hK(...n){return fM._create("endBefore",n,!1)}(...e)))}catch(t){throw Ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jo(this.firestore,cm(this._delegate,function fK(...n){return fM._create("endAt",n,!0)}(...e)))}catch(t){throw Ho(t,"endAt()","Query.endAt()")}}isEqual(e){return g(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function wK(n){n=Dn(n,Us);const e=Dn(n.firestore,P),t=ne(e),i=new dm(e);return function $F(n,e){const t=new ir;return n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return(i=(0,ee.Z)(function*(r,s,a){try{const d=yield W_(r,s,!0),f=new AF(s,d.ir),m=f.sc(d.documents),b=f.applyChanges(m,!1);a.resolve(b.snapshot)}catch(d){const f=om(d,`Failed to execute query '${s} against cache`);a.reject(f)}}),function(r,s,a){return i.apply(this,arguments)})(yield am(n),e,t);var i})),t.promise}(t,n._query).then(r=>new um(e,i,n,r))}(this._delegate):"server"===e?.source?function EK(n){n=Dn(n,Us);const e=Dn(n.firestore,P),t=ne(e),i=new dm(e);return WF(t,n._query,{source:"server"}).then(r=>new um(e,i,n,r))}(this._delegate):function bK(n){n=Dn(n,Us);const e=Dn(n.firestore,P),t=ne(e),i=new dm(e);return qz(n._query),WF(t,n._query).then(r=>new um(e,i,n,r))}(this._delegate),t.then(i=>new fL(this.firestore,new um(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=dG(e),i=hG(e,r=>new fL(this.firestore,new um(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return iG(this._delegate,t,i)}withConverter(e){return new jo(this.firestore,this._delegate.withConverter(e?dy.getInstance(this.firestore,e):null))}}class qK{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new IT(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fL{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new IT(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qK(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new IT(this._firestore,i))})}isEqual(e){return eG(this._delegate,e._delegate)}}class Vw extends jo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vl(this.firestore,e):null}doc(e){try{return new Vl(this.firestore,void 0===e?h(this._delegate):h(this._delegate,e))}catch(t){throw Ho(t,"doc()","CollectionReference.doc()")}}add(e){return function CK(n,e){const t=Dn(n.firestore,P),i=h(n),r=pM(n.converter,e);return Uw(t,[aM(ly(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ui.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Vl(this.firestore,t))}isEqual(e){return p(this._delegate,e._delegate)}withConverter(e){return new Vw(this.firestore,this._delegate.withConverter(e?dy.getInstance(this.firestore,e):null))}}function hy(n){return Dn(n,Ti)}class pL{constructor(...e){this._delegate=new Yh(...e)}static documentId(){return new pL(Ei.keyField().canonicalString())}isEqual(e){return(e=(0,A.m9)(e))instanceof Yh&&this._delegate._internalPath.isEqual(e._internalPath)}}class fy{constructor(e){this._delegate=e}static serverTimestamp(){const e=function UK(){return new iL("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fy(e)}static delete(){const e=function LK(){return new mT("deleteField")}();return e._methodName="FieldValue.delete",new fy(e)}static arrayUnion(...e){const t=function VK(...n){return new tK("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new fy(t)}static arrayRemove(...e){const t=function BK(...n){return new nK("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new fy(t)}static increment(e){const t=function HK(n){return new iK("increment",n)}(e);return t._methodName="FieldValue.increment",new fy(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KK={Firestore:lG,GeoPoint:sM,Timestamp:wi,Blob:wT,Transaction:cG,WriteBatch:uG,DocumentReference:Vl,DocumentSnapshot:ET,Query:jo,QueryDocumentSnapshot:IT,QuerySnapshot:fL,CollectionReference:Vw,FieldPath:pL,FieldValue:fy,setLogLevel:function WK(n){!function CA(n){kl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function fG(n,e){return function QK(n,e=Yf.z){return new Yi.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function mL(n,e){return fG(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function gM(n,e){return mL(n,e).pipe(Es(void 0),dD(),(0,ot.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(a=>({type:a.type,payload:a}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,d)=>{const f=r.find(b=>b.doc.ref.isEqual(a.ref)),m=t?.payload.docs.find(b=>b.ref.isEqual(a.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(a.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:a}})}),s}))}function pG(n,e,t){return gM(n,t).pipe(Cl((i,r)=>function JK(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function eY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return gL(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return gL(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gL(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),(0,ME.x)(),(0,ot.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function gL(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function mG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function ZK(n){(function YK(n,e){n.INTERNAL.registerComponent(new gi.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},KK)))})(n,(e,t)=>new lG(e,t,new $K)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(hD.Z);class gG{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=gM(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Es(void 0),dD(),Pn(([i,r])=>r.length>0||!i),(0,ot.U)(([i,r])=>r),Gt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Cl((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=mG(e);return pG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(e={}){return mL(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Gt.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(Gt.iC)}add(e){return this.ref.add(e)}doc(e){return new _G(this.ref.doc(e),this.afs)}}class _G{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=bG(i,t);return new gG(r,s,this.afs)}snapshotChanges(){return function XK(n,e){return fG(n,e).pipe(Es(void 0),dD(),(0,ot.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,On.D)(this.ref.get(e)).pipe(Gt.iC)}}class tY{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Pn(t=>t.length>0),Gt.iC):gM(this.query,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Cl((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=mG(e);return pG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(e={}){return mL(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),Gt.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(Gt.iC)}}const yG=new u.OlP("angularfire2.enableFirestorePersistence"),vG=new u.OlP("angularfire2.firestore.persistenceSettings"),nY=new u.OlP("angularfire2.firestore.settings"),iY=new u.OlP("angularfire2.firestore.use-emulator");function bG(n,e=(t=>t)){return{query:e(n),ref:n}}let wG=(()=>{class n{constructor(t,i,r,s,a,d,f,m,b,I,D,O,V,W,re,Me,ze){this.schedulers=f;const je=(0,li.on)(t,d,i),Ye=b;I&&Dg(je,d,D,V,W,re,O,Me),[this.firestore,this.persistenceEnabled$]=(0,li.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const xt=d.runOutsideAngular(()=>je.firestore());if(s&&xt.settings(s),Ye&&xt.useEmulator(...Ye),r&&!hs(a)){const Ot=()=>{try{return(0,On.D)(xt.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(pn){return typeof console<"u"&&console.warn(pn),(0,pt.of)(!1)}};return[xt,d.runOutsideAngular(Ot)]}return[xt,(0,pt.of)(!1)]},[s,Ye,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:a}=bG(r,i),d=this.schedulers.ngZone.run(()=>s);return new gG(d,a,this)}collectionGroup(t,i){const r=i||(a=>a),s=this.firestore.collectionGroup(t);return new tY(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new _G(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(li.Dh),u.LFG(li.xv,8),u.LFG(yG,8),u.LFG(nY,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Gt.HU),u.LFG(vG,8),u.LFG(iY,8),u.LFG(Ag,8),u.LFG(qf,8),u.LFG(Kf,8),u.LFG(K0,8),u.LFG(Y0,8),u.LFG(Z0,8),u.LFG(Tv,8),u.LFG(Cg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rY=(()=>{class n{constructor(){xg.Z.registerVersion("angularfire",Gt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yG,useValue:!0},{provide:vG,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[wG]}),n})();var fm=U(4829),_L=U(2420);const EG="@firebase/database";let yL="";function CG(n){yL=n}class aY{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,A.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,A.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class lY{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,A.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const TG=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new aY(e)}}catch{}return new lY},py=TG("localStorage"),vL=TG("sessionStorage"),Bw=new Ni.Yd("@firebase/database"),SG=function(){let n=1;return function(){return n++}}(),xG=function(n){const e=(0,A.dS)(n),t=new A.gQ;t.update(e);const i=t.digest();return A.US.encodeByteArray(i)},CT=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=CT.apply(null,i):e+="object"==typeof i?(0,A.Wl)(i):i,e+=" "}return e};let my=null,DG=!0;const AG=function(n,e){(0,A.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Bw.logLevel=Ni.in.VERBOSE,my=Bw.log.bind(Bw),e&&vL.set("logging_enabled",!0)):"function"==typeof n?my=n:(my=null,vL.remove("logging_enabled"))},Vs=function(...n){if(!0===DG&&(DG=!1,null===my&&!0===vL.get("logging_enabled")&&AG(!0)),my){const e=CT.apply(null,n);my(e)}},TT=function(n){return function(...e){Vs(n,...e)}},bL=function(...n){const e="FIREBASE INTERNAL ERROR: "+CT(...n);Bw.error(e)},fd=function(...n){const e=`FIREBASE FATAL ERROR: ${CT(...n)}`;throw Bw.error(e),new Error(e)},Io=function(...n){const e="FIREBASE WARNING: "+CT(...n);Bw.warn(e)},_M=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},pm="[MIN_NAME]",Qh="[MAX_NAME]",gy=function(n,e){if(n===e)return 0;if(n===pm||e===Qh)return-1;if(e===pm||n===Qh)return 1;{const t=MG(n),i=MG(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},dY=function(n,e){return n===e?0:n<e?-1:1},ST=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,A.Wl)(e))},wL=function(n){if("object"!=typeof n||null===n)return(0,A.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,A.Wl)(e[i]),t+=":",t+=wL(n[e[i]]);return t+="}",t},RG=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Bs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const kG=function(n){(0,A.hu)(!_M(n),"Invalid JSON number");const i=1023;let r,s,a,d,f;0===n?(s=0,a=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,a=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,a=Math.round(n/Math.pow(2,-1074))));const m=[];for(f=52;f;f-=1)m.push(a%2?1:0),a=Math.floor(a/2);for(f=11;f;f-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(r?1:0),m.reverse();const b=m.join("");let I="";for(f=0;f<64;f+=8){let D=parseInt(b.substr(f,8),2).toString(16);1===D.length&&(D="0"+D),I+=D}return I.toLowerCase()},mY=new RegExp("^-?(0*)\\d{1,10}$"),MG=function(n){if(mY.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Hw=function(n){try{n()}catch(e){setTimeout(()=>{throw Io("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xT=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class vY{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Io(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bY{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Io(e)}}let DT=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const LG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,BG="websocket",HG="long_polling";class IL{constructor(e,t,i,r,s=!1,a="",d=!1,f=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=py.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&py.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function jG(n,e,t){let i;if((0,A.hu)("string"==typeof e,"typeof type must == string"),(0,A.hu)("object"==typeof t,"typeof params must == object"),e===BG)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==HG)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function wY(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Bs(t,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}class EY{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,A.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,A.p$)(this.counters_)}}const CL={},TL={};function SL(n){const e=n.toString();return CL[e]||(CL[e]=new EY),CL[e]}class CY{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Hw(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class mm{constructor(e,t,i,r,s,a,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=TT(e),this.stats_=SL(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),jG(t,HG,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new CY(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,A.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xL((...s)=>{const[a,d,f,m,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===a)this.id=d,this.password=f;else{if("close"!==a)throw new Error("Unrecognized command received: "+a);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[a,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&LG.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mm.forceAllow_=!0}static forceDisallow(){mm.forceDisallow_=!0}static isAvailable(){return!((0,A.Yr)()||!mm.forceAllow_&&(mm.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,A.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,A.h$)(t),r=RG(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,A.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,A.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class xL{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,A.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=SG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=xL.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(d){Vs("frame writing exception"),d.stack&&Vs(d.stack),Vs(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vs("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const a=this.pendingSegs.shift();i=i+"&seg"+r+"="+a.seg+"&ts"+r+"="+a.ts+"&d"+r+"="+a.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,A.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Vs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let vM=null;typeof MozWebSocket<"u"?vM=MozWebSocket:typeof WebSocket<"u"&&(vM=WebSocket);let jw=(()=>{class n{constructor(t,i,r,s,a,d,f){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=TT(this.connId),this.stats_=SL(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,a){const d={v:"5"};return!(0,A.Yr)()&&typeof location<"u"&&location.hostname&&LG.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),a&&(d.p=a),jG(t,BG,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,py.set("previous_websocket_failure",!0);try{let r;if((0,A.Yr)()){r={headers:{"User-Agent":`Firebase/5/${yL}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const a=process.env,d=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new vM(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==vM&&!n.forceDisallow_}static previouslyFailed(){return py.isInMemoryStorage||!0===py.get("previous_websocket_failure")}markConnectionHealthy(){py.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,A.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,A.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,A.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=RG(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),YG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[mm,jw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=jw&&jw.isAvailable();let r=i&&!jw.previouslyFailed();if(t.webSocketOnly&&(i||Io("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jw];else{const s=this.transports_=[];for(const a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class n${constructor(e,t,i,r,s,a,d,f,m,b){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=d,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=TT("c:"+this.id+":"),this.transportManager_=new YG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=xT(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ST("t",e),i=ST("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ST("t",e),i=ST("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ST("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?bL("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bL("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Io("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),xT(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xT(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(py.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class i${put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class r${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,A.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,A.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class bM extends r${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,A.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bM}getInitialEvent(e){return(0,A.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ri{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Yn(){return new ri("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gm(n){return n.pieces_.length-n.pieceNum_}function Si(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ri(n.pieces_,e)}function AL(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function AT(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function a$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ri(e,0)}function ar(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof ri)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new ri(t,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function zo(n,e){const t=yn(n),i=yn(e);if(null===t)return e;if(t===i)return zo(Si(n),Si(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function WY(n,e){const t=AT(n,0),i=AT(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=gy(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function RL(n,e){if(gm(n)!==gm(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Bl(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(gm(n)>gm(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class qY{constructor(e,t){this.errorPrefix_=t,this.parts_=AT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,A.ug)(this.parts_[i]);l$(this)}}function l$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_y(n))}function _y(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class kL extends r${constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new kL}getInitialEvent(e){return(0,A.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const RT=1e3;let EM,yy=(()=>{class n extends i${constructor(t,i,r,s,a,d,f,m){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=TT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RT,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,A.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kL.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&bM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,a={r:s,a:t,b:i};this.log_((0,A.Wl)(a)),(0,A.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new A.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const a=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+a),this.listens.has(d)||this.listens.set(d,new Map),(0,A.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,A.hu)(!this.listens.get(d).has(a),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const a={p:r};t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,f=>{const m=f.d,b=f.s;n.warnOnListenWarnings_(m,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",f),"ok"!==b&&this.removeListen_(r,s),t.onComplete&&t.onComplete(b,m))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,A.r3)(t,"w")){const r=(0,A.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();Io(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,A.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,A.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const a=s.s,d=s.d||"error";this.authToken_===t&&("ok"===a?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,A.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const a={p:t};s&&(a.q=r,a.t=s),this.sendRequest("n",a)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const a={p:i,d:r};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,a){this.initConnection_();const d={p:i,d:r};void 0!==a&&(d.h=a),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,A.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):bL("Unrecognized action received from server: "+(0,A.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,A.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RT,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=RT,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=RT),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),a=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,m=null;const b=function(){m?m.close():(f=!0,s())};t.realtime_={close:b,sendRequest:function(O){(0,A.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(O)}};const D=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,V]=yield Promise.all([t.authTokenProvider_.getToken(D),t.appCheckTokenProvider_.getToken(D)]);f?Vs("getToken() completed but was canceled"):(Vs("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=V&&V.token,m=new n$(a,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,W=>{Io(W+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),f||(t.repoInfo_.nodeAdmin&&Io(O),b())}}})()}interrupt(t){Vs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,A.xb)(this.interruptReasons_)&&(this.reconnectDelay_=RT,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(a=>wL(a)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new ri(t).toString();let s;if(this.listens.has(r)){const a=this.listens.get(r);s=a.get(i),a.delete(i),0===a.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Vs("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Vs("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,A.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+yL.replace(/\./g,"-")]=1,(0,A.uI)()?t["framework.cordova"]=1:(0,A.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=bM.getInstance().currentlyOnline();return(0,A.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Tn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tn(e,t)}}class wM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Tn(pm,e),r=new Tn(pm,t);return 0!==this.compare(i,r)}minPost(){return Tn.MIN}}class d$ extends wM{static get __EMPTY_NODE(){return EM}static set __EMPTY_NODE(e){EM=e}compare(e,t){return gy(e.name,t.name)}isDefinedOn(e){throw(0,A.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tn.MIN}maxPost(){return new Tn(Qh,EM)}makePost(e,t){return(0,A.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tn(e,EM)}toString(){return".key"}}const pd=new d$;class IM{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let OL,Lc=(()=>{class n{constructor(t,i,r,s,a){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??ha.EMPTY_NODE,this.right=a??ha.EMPTY_NODE}copy(t,i,r,s,a){return new n(t??this.key,i??this.value,r??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const a=r(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===a?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ha.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return ha.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ha{constructor(e,t=ha.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ha(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Lc.BLACK,null,null))}remove(e){return new ha(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lc.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new IM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new IM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new IM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new IM(this.root_,null,this.comparator_,!0,e)}}function tZ(n,e){return gy(n.name,e.name)}function ML(n,e){return gy(n,e)}ha.EMPTY_NODE=new class eZ{copy(e,t,i,r,s){return this}insert(e,t,i){return new Lc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const h$=function(n){return"number"==typeof n?"number:"+kG(n):"string:"+n},f$=function(n){if(n.isLeafNode()){const e=n.val();(0,A.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,A.r3)(e,".sv"),"Priority must be a string or number.")}else(0,A.hu)(n===OL||n.isEmpty(),"priority of unexpected type.");(0,A.hu)(n===OL||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let p$,m$,g$,zw=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,A.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),f$(this.priorityNode_)}static set __childrenNodeConstructor(t){p$=t}static get __childrenNodeConstructor(){return p$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vn(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=yn(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,A.hu)(".priority"!==r||1===gm(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Si(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+h$(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?kG(this.value_):this.value_,this.lazyHash_=xG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,A.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(r);return(0,A.hu)(s>=0,"Unknown leaf type: "+i),(0,A.hu)(a>=0,"Unknown leaf type: "+r),s===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Vi=new class sZ extends wM{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?gy(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tn.MIN}maxPost(){return new Tn(Qh,new zw("[PRIORITY-POST]",g$))}makePost(e,t){const i=m$(e);return new Tn(t,new zw("[PRIORITY-POST]",i))}toString(){return".priority"}},oZ=Math.log(2);class aZ{constructor(e){this.count=parseInt(Math.log(e+1)/oZ,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const CM=function(n,e,t,i){n.sort(e);const r=function(f,m){const b=m-f;let I,D;if(0===b)return null;if(1===b)return I=n[f],D=t?t(I):I,new Lc(D,I.node,Lc.BLACK,null,null);{const O=parseInt(b/2,10)+f,V=r(f,O),W=r(O+1,m);return I=n[O],D=t?t(I):I,new Lc(D,I.node,Lc.BLACK,V,W)}},d=function(f){let m=null,b=null,I=n.length;const D=function(V,W){const re=I-V,Me=I;I-=V;const ze=r(re+1,Me),je=n[re],Ye=t?t(je):je;O(new Lc(Ye,je.node,W,null,ze))},O=function(V){m?(m.left=V,m=V):(b=V,m=V)};for(let V=0;V<f.count;++V){const W=f.nextBitIsOne(),re=Math.pow(2,f.count-(V+1));W?D(re,Lc.BLACK):(D(re,Lc.BLACK),D(re,Lc.RED))}return b}(new aZ(n.length));return new ha(i||e,d)};let PL;const Gw={};class Xh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,A.hu)(Gw&&Vi,"ChildrenNode.ts has not been loaded"),PL=PL||new Xh({".priority":Gw},{".priority":Vi}),PL}get(e){const t=(0,A.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ha?t:null}hasIndex(e){return(0,A.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,A.hu)(e!==pd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Tn.Wrap);let d,a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=s.getNext();d=r?CM(i,e.getCompare()):Gw;const f=e.toString(),m=Object.assign({},this.indexSet_);m[f]=e;const b=Object.assign({},this.indexes_);return b[f]=d,new Xh(b,m)}addToIndexes(e,t){const i=(0,A.UI)(this.indexes_,(r,s)=>{const a=(0,A.DV)(this.indexSet_,s);if((0,A.hu)(a,"Missing index implementation for "+s),r===Gw){if(a.isDefinedOn(e.node)){const d=[],f=t.getIterator(Tn.Wrap);let m=f.getNext();for(;m;)m.name!==e.name&&d.push(m),m=f.getNext();return d.push(e),CM(d,a.getCompare())}return Gw}{const d=t.get(e.name);let f=r;return d&&(f=f.remove(new Tn(e.name,d))),f.insert(e,e.node)}});return new Xh(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,A.UI)(this.indexes_,r=>{if(r===Gw)return r;{const s=t.get(e.name);return s?r.remove(new Tn(e.name,s)):r}});return new Xh(i,this.indexSet_)}}let kT,tn=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&f$(this.priorityNode_),this.children_.isEmpty()&&(0,A.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kT||(kT=new n(new ha(ML),null,Xh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kT}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?kT:i}}getChild(t){const i=yn(t);return null===i?this:this.getImmediateChild(i).getChild(Si(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,A.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Tn(t,i);let s,a;i.isEmpty()?(s=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?kT:this.priorityNode_;return new n(s,d,a)}}updateChild(t,i){const r=yn(t);if(null===r)return i;{(0,A.hu)(".priority"!==yn(t)||1===gm(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Si(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,a=!0;if(this.forEachChild(Vi,(d,f)=>{i[d]=f.val(t),r++,a&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):a=!1}),!t&&a&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+h$(this.getPriority().val())+":"),this.forEachChild(Vi,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":xG(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const a=s.getPredecessorKey(new Tn(t,i));return a?a.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Tn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Tn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Tn.Wrap);let a=s.peek();for(;null!=a&&i.compare(a,t)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Tn.Wrap);let a=s.peek();for(;null!=a&&i.compare(a,t)>0;)s.getNext(),a=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===MT?-1:0}withIndex(t){if(t===pd||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===pd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Vi),s=i.getIterator(Vi);let a=r.getNext(),d=s.getNext();for(;a&&d;){if(a.name!==d.name||!a.node.equals(d.node))return!1;a=r.getNext(),d=s.getNext()}return null===a&&null===d}return!1}return!1}}resolveIndex_(t){return t===pd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const MT=new class lZ extends tn{constructor(){super(new ha(ML),tn.EMPTY_NODE,Xh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Tn,{MIN:{value:new Tn(pm,tn.EMPTY_NODE)},MAX:{value:new Tn(Qh,MT)}}),d$.__EMPTY_NODE=tn.EMPTY_NODE,zw.__childrenNodeConstructor=tn,function nZ(n){OL=n}(MT),function rZ(n){g$=n}(MT);const cZ=!0;function yr(n,e=null){if(null===n)return tn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,A.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new zw(n,yr(e));if(n instanceof Array||!cZ){let t=tn.EMPTY_NODE;return Bs(n,(i,r)=>{if((0,A.r3)(n,i)&&"."!==i.substring(0,1)){const s=yr(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(yr(e))}{const t=[];let i=!1;if(Bs(n,(a,d)=>{if("."!==a.substring(0,1)){const f=yr(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new Tn(a,f)))}}),0===t.length)return tn.EMPTY_NODE;const s=CM(t,tZ,a=>a.name,ML);if(i){const a=CM(t,Vi.getCompare());return new tn(s,yr(e),new Xh({".priority":a},{".priority":Vi}))}return new tn(s,yr(e),Xh.Default)}}!function iZ(n){m$=n}(yr);class NL extends wM{constructor(e){super(),this.indexPath_=e,(0,A.hu)(!vn(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?gy(e.name,t.name):s}makePost(e,t){const i=yr(e),r=tn.EMPTY_NODE.updateChild(this.indexPath_,i);return new Tn(t,r)}maxPost(){const e=tn.EMPTY_NODE.updateChild(this.indexPath_,MT);return new Tn(Qh,e)}toString(){return AT(this.indexPath_,0).join("/")}}const FL=new class uZ extends wM{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?gy(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tn.MIN}maxPost(){return Tn.MAX}makePost(e,t){const i=yr(e);return new Tn(t,i)}toString(){return".value"}};function _$(n){return{type:"value",snapshotNode:n}}function $w(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function OT(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function PT(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class LL{constructor(e){this.index_=e}updateChild(e,t,i,r,s,a){(0,A.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=a&&(i.isEmpty()?e.hasChild(t)?a.trackChildChange(OT(t,d)):(0,A.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?a.trackChildChange($w(t,i)):a.trackChildChange(PT(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Vi,(r,s)=>{t.hasChild(r)||i.trackChildChange(OT(r,s))}),t.isLeafNode()||t.forEachChild(Vi,(r,s)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(s)||i.trackChildChange(PT(r,s,a))}else i.trackChildChange($w(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?tn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class NT{constructor(e){this.indexedFilter_=new LL(e.getIndex()),this.index_=e.getIndex(),this.startPost_=NT.getStartPost_(e),this.endPost_=NT.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,a){return this.matches(new Tn(t,i))||(i=tn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,a)}updateFullNode(e,t,i){t.isLeafNode()&&(t=tn.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(tn.EMPTY_NODE);const s=this;return t.forEachChild(Vi,(a,d)=>{s.matches(new Tn(a,d))||(r=r.updateImmediateChild(a,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class hZ{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new NT(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,a){return this.rangedFilter_.matches(new Tn(t,i))||(i=tn.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,a):this.fullLimitUpdateChild_(e,t,i,s,a)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=tn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=tn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),a++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(tn.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let a=0;for(;s.hasNext();){const d=s.getNext();a<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?a++:r=r.updateImmediateChild(d.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let a;if(this.reverse_){const I=this.index_.getCompare();a=(D,O)=>I(O,D)}else a=this.index_.getCompare();const d=e;(0,A.hu)(d.numChildren()===this.limit_,"");const f=new Tn(t,i),m=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(f);if(d.hasChild(t)){const I=d.getImmediateChild(t);let D=r.getChildAfterChild(this.index_,m,this.reverse_);for(;null!=D&&(D.name===t||d.hasChild(D.name));)D=r.getChildAfterChild(this.index_,D,this.reverse_);const O=null==D?1:a(D,f);if(b&&!i.isEmpty()&&O>=0)return s?.trackChildChange(PT(t,i,I)),d.updateImmediateChild(t,i);{s?.trackChildChange(OT(t,I));const W=d.updateImmediateChild(t,tn.EMPTY_NODE);return null!=D&&this.rangedFilter_.matches(D)?(s?.trackChildChange($w(D.name,D.node)),W.updateImmediateChild(D.name,D.node)):W}}return i.isEmpty()?e:b&&a(m,f)>=0?(null!=s&&(s.trackChildChange(OT(m.name,m.node)),s.trackChildChange($w(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(m.name,tn.EMPTY_NODE)):e}}class TM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,A.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,A.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pm}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,A.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,A.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,A.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vi}copy(){const e=new TM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function UL(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function VL(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function SM(n,e){const t=n.copy();return t.index_=e,t}function y$(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Vi?t="$priority":n.index_===FL?t="$value":n.index_===pd?t="$key":((0,A.hu)(n.index_ instanceof NL,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,A.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,A.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,A.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,A.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,A.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function v$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Vi&&(e.i=n.index_.toString()),e}class xM extends i${constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=TT("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,A.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=xM.getListenId_(e,i),d={};this.listens_[a]=d;const f=y$(e._queryParams);this.restRequest_(s+".json",f,(m,b)=>{let I=b;if(404===m&&(I=null,m=null),null===m&&this.onDataUpdate_(s,I,!1,i),(0,A.DV)(this.listens_,a)===d){let D;D=m?401===m?"permission_denied":"rest_error:"+m:"ok",r(D,null)}})}unlisten(e,t){const i=xM.getListenId_(e,t);delete this.listens_[i]}get(e){const t=y$(e._queryParams),i=e._path.toString(),r=new A.BH;return this.restRequest_(i+".json",t,(s,a)=>{let d=a;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,A.xO)(t);this.log_("Sending REST request for "+a);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+a+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,A.cI)(d.responseText)}catch{Io("Failed to parse JSON response for "+a+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Io("Got unsuccessful REST response for "+a+" Status: "+d.status),i(d.status);i=null}},d.open("GET",a,!0),d.send()})}}class yZ{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function DM(){return{value:null,children:new Map}}function Ww(n,e,t){if(vn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=yn(e);n.children.has(i)||n.children.set(i,DM()),Ww(n.children.get(i),e=Si(e),t)}}function BL(n,e){if(vn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Vi,(i,r)=>{Ww(n,new ri(i),r)}),BL(n,e)}}if(n.children.size>0){const t=yn(e);return e=Si(e),n.children.has(t)&&BL(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function HL(n,e,t){null!==n.value?t(e,n.value):function vZ(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{HL(r,new ri(e.toString()+"/"+i),t)})}class bZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bs(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class IZ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new bZ(e);const i=1e4+2e4*Math.random();xT(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Bs(e,(r,s)=>{s>0&&(0,A.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),xT(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var md=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(md||{});function GL(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class AM{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=md.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,A.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ri(e));return new AM(Yn(),t,this.revert)}}return(0,A.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new AM(Si(this.path),this.affectedTree,this.revert)}}class FT{constructor(e,t){this.source=e,this.path=t,this.type=md.LISTEN_COMPLETE}operationForChild(e){return vn(this.path)?new FT(this.source,Yn()):new FT(this.source,Si(this.path))}}class vy{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=md.OVERWRITE}operationForChild(e){return vn(this.path)?new vy(this.source,Yn(),this.snap.getImmediateChild(e)):new vy(this.source,Si(this.path),this.snap)}}class qw{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=md.MERGE}operationForChild(e){if(vn(this.path)){const t=this.children.subtree(new ri(e));return t.isEmpty()?null:t.value?new vy(this.source,Yn(),t.value):new qw(this.source,Yn(),t)}return(0,A.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new qw(this.source,Si(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _m{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vn(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class CZ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function LT(n,e,t,i,r,s){const a=i.filter(d=>d.type===t);a.sort((d,f)=>function xZ(n,e,t){if(null==e.childName||null==t.childName)throw(0,A.g5)("Should only compare child_ events.");const i=new Tn(e.childName,e.snapshotNode),r=new Tn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),a.forEach(d=>{const f=function SZ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(f,n.query_))})})}function RM(n,e){return{eventCache:n,serverCache:e}}function UT(n,e,t,i){return RM(new _m(e,t,i),n.serverCache)}function w$(n,e,t,i){return RM(n.eventCache,new _m(e,t,i))}function kM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function by(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let $L;class Bi{constructor(e,t=(()=>($L||($L=new ha(dY)),$L))()){this.value=e,this.children=t}static fromObject(e){let t=new Bi(null);return Bs(e,(i,r)=>{t=t.set(new ri(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Yn(),value:this.value};if(vn(e))return null;{const i=yn(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Si(e),t);return null!=s?{path:ar(new ri(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vn(e))return this;{const t=yn(e),i=this.children.get(t);return null!==i?i.subtree(Si(e)):new Bi(null)}}set(e,t){if(vn(e))return new Bi(t,this.children);{const i=yn(e),s=(this.children.get(i)||new Bi(null)).set(Si(e),t),a=this.children.insert(i,s);return new Bi(this.value,a)}}remove(e){if(vn(e))return this.children.isEmpty()?new Bi(null):new Bi(null,this.children);{const t=yn(e),i=this.children.get(t);if(i){const r=i.remove(Si(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Bi(null):new Bi(this.value,s)}return this}}get(e){if(vn(e))return this.value;{const t=yn(e),i=this.children.get(t);return i?i.get(Si(e)):null}}setTree(e,t){if(vn(e))return t;{const i=yn(e),s=(this.children.get(i)||new Bi(null)).setTree(Si(e),t);let a;return a=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Bi(this.value,a)}}fold(e){return this.fold_(Yn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ar(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Yn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(vn(e))return null;{const s=yn(e),a=this.children.get(s);return a?a.findOnPath_(Si(e),ar(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Yn(),t)}foreachOnPath_(e,t,i){if(vn(e))return this;{this.value&&i(t,this.value);const r=yn(e),s=this.children.get(r);return s?s.foreachOnPath_(Si(e),ar(t,r),i):new Bi(null)}}foreach(e){this.foreach_(Yn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(ar(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Uc{constructor(e){this.writeTree_=e}static empty(){return new Uc(new Bi(null))}}function VT(n,e,t){if(vn(e))return new Uc(new Bi(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const a=zo(r,e);return s=s.updateChild(a,t),new Uc(n.writeTree_.set(r,s))}{const r=new Bi(t),s=n.writeTree_.setTree(e,r);return new Uc(s)}}}function WL(n,e,t){let i=n;return Bs(t,(r,s)=>{i=VT(i,ar(e,r),s)}),i}function E$(n,e){if(vn(e))return Uc.empty();{const t=n.writeTree_.setTree(e,new Bi(null));return new Uc(t)}}function qL(n,e){return null!=wy(n,e)}function wy(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(zo(t.path,e)):null}function I$(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Vi,(i,r)=>{e.push(new Tn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Tn(i,r.value))}),e}function ym(n,e){if(vn(e))return n;{const t=wy(n,e);return new Uc(null!=t?new Bi(t):n.writeTree_.subtree(e))}}function KL(n){return n.writeTree_.isEmpty()}function Kw(n,e){return C$(Yn(),n.writeTree_,e)}function C$(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,A.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=C$(ar(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(ar(n,".priority"),i)),t}}function MM(n,e){return A$(e,n)}function OZ(n,e){if(n.snap)return Bl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Bl(ar(n.path,t),e))return!0;return!1}function NZ(n){return n.visible}function T$(n,e,t){let i=Uc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const a=s.path;let d;if(s.snap)Bl(t,a)?(d=zo(t,a),i=VT(i,d,s.snap)):Bl(a,t)&&(d=zo(a,t),i=VT(i,Yn(),s.snap.getChild(d)));else{if(!s.children)throw(0,A.g5)("WriteRecord should have .snap or .children");if(Bl(t,a))d=zo(t,a),i=WL(i,d,s.children);else if(Bl(a,t))if(d=zo(a,t),vn(d))i=WL(i,Yn(),s.children);else{const f=(0,A.DV)(s.children,yn(d));if(f){const m=f.getChild(Si(d));i=VT(i,Yn(),m)}}}}}return i}function S$(n,e,t,i,r){if(i||r){const s=ym(n.visibleWrites,e);return!r&&KL(s)?t:r||null!=t||qL(s,Yn())?Kw(T$(n.allWrites,function(m){return(m.visible||r)&&(!i||!~i.indexOf(m.writeId))&&(Bl(m.path,e)||Bl(e,m.path))},e),t||tn.EMPTY_NODE):null}{const s=wy(n.visibleWrites,e);if(null!=s)return s;{const a=ym(n.visibleWrites,e);return KL(a)?t:null!=t||qL(a,Yn())?Kw(a,t||tn.EMPTY_NODE):null}}}function OM(n,e,t,i){return S$(n.writeTree,n.treePath,e,t,i)}function YL(n,e){return function FZ(n,e,t){let i=tn.EMPTY_NODE;const r=wy(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Vi,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(t){const s=ym(n.visibleWrites,e);return t.forEachChild(Vi,(a,d)=>{const f=Kw(ym(s,new ri(a)),d);i=i.updateImmediateChild(a,f)}),I$(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}return I$(ym(n.visibleWrites,e)).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}(n.writeTree,n.treePath,e)}function x$(n,e,t,i){return function LZ(n,e,t,i,r){(0,A.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ar(e,t);if(qL(n.visibleWrites,s))return null;{const a=ym(n.visibleWrites,s);return KL(a)?r.getChild(t):Kw(a,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function PM(n,e){return function VZ(n,e){return wy(n.visibleWrites,e)}(n.writeTree,ar(n.treePath,e))}function ZL(n,e,t){return function UZ(n,e,t,i){const r=ar(e,t),s=wy(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?Kw(ym(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function D$(n,e){return A$(ar(n.treePath,e),n.writeTree)}function A$(n,e){return{treePath:n,writeTree:e}}class zZ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,A.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,A.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,PT(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,OT(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,$w(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,A.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,PT(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const R$=new class GZ{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class QL{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new _m(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ZL(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:by(this.viewCache_),s=function jZ(n,e,t,i,r,s){return function BZ(n,e,t,i,r,s,a){let d;const f=ym(n.visibleWrites,e),m=wy(f,Yn());if(null!=m)d=m;else{if(null==t)return[];d=Kw(f,t)}if(d=d.withIndex(a),d.isEmpty()||d.isLeafNode())return[];{const b=[],I=a.getCompare(),D=s?d.getReverseIteratorFrom(i,a):d.getIteratorFrom(i,a);let O=D.getNext();for(;O&&b.length<r;)0!==I(O,i)&&b.push(O),O=D.getNext();return b}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function k$(n,e,t,i,r,s){const a=e.eventCache;if(null!=PM(i,t))return e;{let d,f;if(vn(t))if((0,A.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=by(e),I=YL(i,m instanceof tn?m:tn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),I,s)}else{const m=OM(i,by(e));d=n.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const m=yn(t);if(".priority"===m){(0,A.hu)(1===gm(t),"Can't have a priority with additional path components");const b=a.getNode();f=e.serverCache.getNode();const I=x$(i,t,b,f);d=null!=I?n.filter.updatePriority(b,I):a.getNode()}else{const b=Si(t);let I;if(a.isCompleteForChild(m)){f=e.serverCache.getNode();const D=x$(i,t,a.getNode(),f);I=null!=D?a.getNode().getImmediateChild(m).updateChild(b,D):a.getNode().getImmediateChild(m)}else I=ZL(i,m,e.serverCache);d=null!=I?n.filter.updateChild(a.getNode(),m,I,b,r,s):a.getNode()}}return UT(e,d,a.isFullyInitialized()||vn(t),n.filter.filtersNodes())}}function NM(n,e,t,i,r,s,a,d){const f=e.serverCache;let m;const b=a?n.filter:n.filter.getIndexedFilter();if(vn(t))m=b.updateFullNode(f.getNode(),i,null);else if(b.filtersNodes()&&!f.isFiltered()){const O=f.getNode().updateChild(t,i);m=b.updateFullNode(f.getNode(),O,null)}else{const O=yn(t);if(!f.isCompleteForPath(t)&&gm(t)>1)return e;const V=Si(t),re=f.getNode().getImmediateChild(O).updateChild(V,i);m=".priority"===O?b.updatePriority(f.getNode(),re):b.updateChild(f.getNode(),O,re,V,R$,null)}const I=w$(e,m,f.isFullyInitialized()||vn(t),b.filtersNodes());return k$(n,I,t,r,new QL(r,I,s),d)}function XL(n,e,t,i,r,s,a){const d=e.eventCache;let f,m;const b=new QL(r,e,s);if(vn(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,a),f=UT(e,m,!0,n.filter.filtersNodes());else{const I=yn(t);if(".priority"===I)m=n.filter.updatePriority(e.eventCache.getNode(),i),f=UT(e,m,d.isFullyInitialized(),d.isFiltered());else{const D=Si(t),O=d.getNode().getImmediateChild(I);let V;if(vn(D))V=i;else{const W=b.getCompleteChild(I);V=null!=W?".priority"===AL(D)&&W.getChild(a$(D)).isEmpty()?W:W.updateChild(D,i):tn.EMPTY_NODE}f=O.equals(V)?e:UT(e,n.filter.updateChild(d.getNode(),I,V,D,b,a),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function M$(n,e){return n.eventCache.isCompleteForChild(e)}function O$(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function JL(n,e,t,i,r,s,a,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m,f=e;m=vn(t)?i:new Bi(null).setTree(t,i);const b=e.serverCache.getNode();return m.children.inorderTraversal((I,D)=>{if(b.hasChild(I)){const V=O$(0,e.serverCache.getNode().getImmediateChild(I),D);f=NM(n,f,new ri(I),V,r,s,a,d)}}),m.children.inorderTraversal((I,D)=>{const O=!e.serverCache.isCompleteForChild(I)&&null===D.value;if(!b.hasChild(I)&&!O){const W=O$(0,e.serverCache.getNode().getImmediateChild(I),D);f=NM(n,f,new ri(I),W,r,s,a,d)}}),f}class JZ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new LL(i.getIndex()),s=function fZ(n){return n.loadsAllData()?new LL(n.getIndex()):n.hasLimit()?new hZ(n):new NT(n)}(i);this.processor_=function $Z(n){return{filter:n}}(s);const a=t.serverCache,d=t.eventCache,f=r.updateFullNode(tn.EMPTY_NODE,a.getNode(),null),m=s.updateFullNode(tn.EMPTY_NODE,d.getNode(),null),b=new _m(f,a.isFullyInitialized(),r.filtersNodes()),I=new _m(m,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=RM(I,b),this.eventGenerator_=new CZ(this.query_)}get query(){return this.query_}}function nQ(n,e){const t=by(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vn(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function P$(n){return 0===n.eventRegistrations_.length}function N$(n,e,t){const i=[];if(t){(0,A.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(t,r);a&&i.push(a)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const a=n.eventRegistrations_[s];if(a.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(a)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function F$(n,e,t,i){e.type===md.MERGE&&null!==e.source.queryId&&((0,A.hu)(by(n.viewCache_),"We should always have a full cache before handling merges"),(0,A.hu)(kM(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function qZ(n,e,t,i,r){const s=new zZ;let a,d;if(t.type===md.OVERWRITE){const m=t;m.source.fromUser?a=XL(n,e,m.path,m.snap,i,r,s):((0,A.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!vn(m.path),a=NM(n,e,m.path,m.snap,i,r,d,s))}else if(t.type===md.MERGE){const m=t;m.source.fromUser?a=function YZ(n,e,t,i,r,s,a){let d=e;return i.foreach((f,m)=>{const b=ar(t,f);M$(e,yn(b))&&(d=XL(n,d,b,m,r,s,a))}),i.foreach((f,m)=>{const b=ar(t,f);M$(e,yn(b))||(d=XL(n,d,b,m,r,s,a))}),d}(n,e,m.path,m.children,i,r,s):((0,A.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),a=JL(n,e,m.path,m.children,i,r,d,s))}else if(t.type===md.ACK_USER_WRITE){const m=t;a=m.revert?function XZ(n,e,t,i,r,s){let a;if(null!=PM(i,t))return e;{const d=new QL(i,e,r),f=e.eventCache.getNode();let m;if(vn(t)||".priority"===yn(t)){let b;if(e.serverCache.isFullyInitialized())b=OM(i,by(e));else{const I=e.serverCache.getNode();(0,A.hu)(I instanceof tn,"serverChildren would be complete if leaf node"),b=YL(i,I)}m=n.filter.updateFullNode(f,b,s)}else{const b=yn(t);let I=ZL(i,b,e.serverCache);null==I&&e.serverCache.isCompleteForChild(b)&&(I=f.getImmediateChild(b)),m=null!=I?n.filter.updateChild(f,b,I,Si(t),d,s):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(f,b,tn.EMPTY_NODE,Si(t),d,s):f,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=OM(i,by(e)),a.isLeafNode()&&(m=n.filter.updateFullNode(m,a,s)))}return a=e.serverCache.isFullyInitialized()||null!=PM(i,Yn()),UT(e,m,a,n.filter.filtersNodes())}}(n,e,m.path,i,r,s):function ZZ(n,e,t,i,r,s,a){if(null!=PM(r,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=i.value){if(vn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return NM(n,e,t,f.getNode().getChild(t),r,s,d,a);if(vn(t)){let m=new Bi(null);return f.getNode().forEachChild(pd,(b,I)=>{m=m.set(new ri(b),I)}),JL(n,e,t,m,r,s,d,a)}return e}{let m=new Bi(null);return i.foreach((b,I)=>{const D=ar(t,b);f.isCompleteForPath(D)&&(m=m.set(b,f.getNode().getChild(D)))}),JL(n,e,t,m,r,s,d,a)}}(n,e,m.path,m.affectedTree,i,r,s)}else{if(t.type!==md.LISTEN_COMPLETE)throw(0,A.g5)("Unknown operation type: "+t.type);a=function QZ(n,e,t,i,r){const s=e.serverCache;return k$(n,w$(e,s.getNode(),s.isFullyInitialized()||vn(t),s.isFiltered()),t,i,R$,r)}(n,e,t.path,i,s)}const f=s.getChanges();return function KZ(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=kM(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(_$(kM(e)))}}(e,a,f),{viewCache:a,changes:f}}(n.processor_,r,e,t,i);return function WZ(n,e){(0,A.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,A.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,A.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,L$(n,s.changes,s.viewCache.eventCache.getNode(),null)}function L$(n,e,t,i){return function TZ(n,e,t,i){const r=[],s=[];return e.forEach(a=>{"child_changed"===a.type&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(function dZ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(a.childName,a.snapshotNode))}),LT(n,r,"child_removed",e,i,t),LT(n,r,"child_added",e,i,t),LT(n,r,"child_moved",s,i,t),LT(n,r,"child_changed",e,i,t),LT(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let FM,UM;class U${constructor(){this.views=new Map}}function e2(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,A.hu)(null!=s,"SyncTree gave us an op for an invalid query."),F$(s,e,t,i)}{let s=[];for(const a of n.views.values())s=s.concat(F$(a,e,t,i));return s}}function V$(n,e,t,i,r){const a=n.views.get(e._queryIdentifier);if(!a){let d=OM(t,r?i:null),f=!1;d?f=!0:i instanceof tn?(d=YL(t,i),f=!1):(d=tn.EMPTY_NODE,f=!1);const m=RM(new _m(d,f,!1),new _m(i,r,!1));return new JZ(e,m)}return a}function B$(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function vm(n,e){let t=null;for(const i of n.views.values())t=t||nQ(i,e);return t}function H$(n,e){return e._queryParams.loadsAllData()?LM(n):n.views.get(e._queryIdentifier)}function j$(n,e){return null!=H$(n,e)}function bm(n){return null!=LM(n)}function LM(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let hQ=1;class z${constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bi(null),this.pendingWriteTree_=function HZ(){return{visibleWrites:Uc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function t2(n,e,t,i,r){return function AZ(n,e,t,i,r){(0,A.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=VT(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Yw(n,new vy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wm(n,e,t=!1){const i=function kZ(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function MZ(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,A.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,a=n.allWrites.length-1;for(;r&&a>=0;){const d=n.allWrites[a];d.visible&&(a>=t&&OZ(d,i.path)?r=!1:Bl(i.path,d.path)&&(s=!0)),a--}return!!r&&(s?(function PZ(n){n.visibleWrites=T$(n.allWrites,NZ,Yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=E$(n.visibleWrites,i.path):Bs(i.children,f=>{n.visibleWrites=E$(n.visibleWrites,ar(i.path,f))}),!0))}(n.pendingWriteTree_,e)){let s=new Bi(null);return null!=i.snap?s=s.set(Yn(),!0):Bs(i.children,a=>{s=s.set(new ri(a),!0)}),Yw(n,new AM(i.path,s,t))}return[]}function BT(n,e,t){return Yw(n,new vy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function VM(n,e,t,i,r=!1){const s=e._path,a=n.syncPointTree_.get(s);let d=[];if(a&&("default"===e._queryIdentifier||j$(a,e))){const f=function cQ(n,e,t,i){const r=e._queryIdentifier,s=[];let a=[];const d=bm(n);if("default"===r)for(const[f,m]of n.views.entries())a=a.concat(N$(m,t,i)),P$(m)&&(n.views.delete(f),m.query._queryParams.loadsAllData()||s.push(m.query));else{const f=n.views.get(r);f&&(a=a.concat(N$(f,t,i)),P$(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!bm(n)&&s.push(new(function oQ(){return(0,A.hu)(FM,"Reference.ts has not been loaded"),FM}())(e._repo,e._path)),{removed:s,events:a}}(a,e,t,i);(function aQ(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const m=f.removed;if(d=f.events,!r){const b=-1!==m.findIndex(D=>D._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(s,(D,O)=>bm(O));if(b&&!I){const D=n.syncPointTree_.subtree(s);if(!D.isEmpty()){const O=function vQ(n){return n.fold((e,t,i)=>{if(t&&bm(t))return[LM(t)];{let r=[];return t&&(r=B$(t)),Bs(i,(s,a)=>{r=r.concat(a)}),r}})}(D);for(let V=0;V<O.length;++V){const W=O[V],re=W.query,Me=q$(n,W);n.listenProvider_.startListening(jT(re),HT(n,re),Me.hashFn,Me.onComplete)}}}!I&&m.length>0&&!i&&(b?n.listenProvider_.stopListening(jT(e),null):m.forEach(D=>{const O=n.queryToTagMap.get(HM(D));n.listenProvider_.stopListening(jT(D),O)}))}!function bQ(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=HM(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,m)}return d}function G$(n,e,t,i){const r=r2(n,i);if(null!=r){const s=s2(r),a=s.path,d=s.queryId,f=zo(a,e);return o2(n,a,new vy(GL(d),f,t))}return[]}function n2(n,e,t,i=!1){const r=e._path;let s=null,a=!1;n.syncPointTree_.foreachOnPath(r,(D,O)=>{const V=zo(D,r);s=s||vm(O,V),a=a||bm(O)});let f,d=n.syncPointTree_.get(r);d?(a=a||bm(d),s=s||vm(d,Yn())):(d=new U$,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?f=!0:(f=!1,s=tn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,V)=>{const W=vm(V,Yn());W&&(s=s.updateImmediateChild(O,W))}));const m=j$(d,e);if(!m&&!e._queryParams.loadsAllData()){const D=HM(e);(0,A.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const O=function wQ(){return hQ++}();n.queryToTagMap.set(D,O),n.tagToQueryMap.set(O,D)}let I=function lQ(n,e,t,i,r,s){const a=V$(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,a),function iQ(n,e){n.eventRegistrations_.push(e)}(a,t),function rQ(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Vi,(s,a)=>{i.push($w(s,a))}),t.isFullyInitialized()&&i.push(_$(t.getNode())),L$(n,i,t.getNode(),e)}(a,t)}(d,e,t,MM(n.pendingWriteTree_,r),s,f);if(!m&&!a&&!i){const D=H$(d,e);I=I.concat(function EQ(n,e,t){const i=e._path,r=HT(n,e),s=q$(n,t),a=n.listenProvider_.startListening(jT(e),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,A.hu)(!bm(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((m,b,I)=>{if(!vn(m)&&b&&bm(b))return[LM(b).query];{let D=[];return b&&(D=D.concat(B$(b).map(O=>O.query))),Bs(I,(O,V)=>{D=D.concat(V)}),D}});for(let m=0;m<f.length;++m){const b=f[m];n.listenProvider_.stopListening(jT(b),HT(n,b))}}return a}(n,e,D))}return I}function BM(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(a,d)=>{const m=vm(d,zo(a,e));if(m)return m});return S$(r,e,s,t,!0)}function Yw(n,e){return $$(e,n.syncPointTree_,null,MM(n.pendingWriteTree_,Yn()))}function $$(n,e,t,i){if(vn(n.path))return W$(n,e,t,i);{const r=e.get(Yn());null==t&&null!=r&&(t=vm(r,Yn()));let s=[];const a=yn(n.path),d=n.operationForChild(a),f=e.children.get(a);if(f&&d){const m=t?t.getImmediateChild(a):null,b=D$(i,a);s=s.concat($$(d,f,m,b))}return r&&(s=s.concat(e2(r,n,i,t))),s}}function W$(n,e,t,i){const r=e.get(Yn());null==t&&null!=r&&(t=vm(r,Yn()));let s=[];return e.children.inorderTraversal((a,d)=>{const f=t?t.getImmediateChild(a):null,m=D$(i,a),b=n.operationForChild(a);b&&(s=s.concat(W$(b,d,f,m)))}),r&&(s=s.concat(e2(r,n,i,t))),s}function q$(n,e){const t=e.query,i=HT(n,t);return{hashFn:()=>(function eQ(n){return n.viewCache_.serverCache.getNode()}(e)||tn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function gQ(n,e,t){const i=r2(n,t);if(i){const r=s2(i),s=r.path,a=r.queryId,d=zo(s,e);return o2(n,s,new FT(GL(a),d))}return[]}(n,t._path,i):function mQ(n,e){return Yw(n,new FT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function pY(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return VM(n,t,null,s)}}}}function HT(n,e){const t=HM(e);return n.queryToTagMap.get(t)}function HM(n){return n._path.toString()+"$"+n._queryIdentifier}function r2(n,e){return n.tagToQueryMap.get(e)}function s2(n){const e=n.indexOf("$");return(0,A.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ri(n.substr(0,e))}}function o2(n,e,t){const i=n.syncPointTree_.get(e);return(0,A.hu)(i,"Missing sync point for query tag that we're tracking"),e2(i,t,MM(n.pendingWriteTree_,e),null)}function jT(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function dQ(){return(0,A.hu)(UM,"Reference.ts has not been loaded"),UM}())(n._repo,n._path):n}class a2{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new a2(t)}node(){return this.node_}}class l2{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ar(this.path_,e);return new l2(this.syncTree_,t)}node(){return BM(this.syncTree_,this.path_)}}const IQ=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},K$=function(n,e,t){return n&&"object"==typeof n?((0,A.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?CQ(n[".sv"],e,t):"object"==typeof n[".sv"]?TQ(n[".sv"],e):void(0,A.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},CQ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,A.hu)(!1,"Unexpected server value: "+n)},TQ=function(n,e,t){n.hasOwnProperty("increment")||(0,A.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,A.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,A.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return"number"!=typeof a?i:a+i},Y$=function(n,e,t,i){return u2(e,new l2(t,n),i)},c2=function(n,e,t){return u2(n,new a2(e),t)};function u2(n,e,t){const i=n.getPriority().val(),r=K$(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const a=n,d=K$(a.getValue(),e,t);return d!==a.getValue()||r!==a.getPriority().val()?new zw(d,yr(r)):n}{const a=n;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new zw(r))),a.forEachChild(Vi,(d,f)=>{const m=u2(f,e.getImmediateChild(d),t);m!==f&&(s=s.updateImmediateChild(d,m))}),s}}class d2{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function jM(n,e){let t=e instanceof ri?e:new ri(e),i=n,r=yn(t);for(;null!==r;){const s=(0,A.DV)(i.node.children,r)||{children:{},childCount:0};i=new d2(r,i,s),t=Si(t),r=yn(t)}return i}function Ey(n){return n.node.value}function h2(n,e){n.node.value=e,f2(n)}function Z$(n){return n.node.childCount>0}function zM(n,e){Bs(n.node.children,(t,i)=>{e(new d2(t,n,i))})}function Q$(n,e,t,i){t&&!i&&e(n),zM(n,r=>{Q$(r,e,!0,i)}),t&&i&&e(n)}function zT(n){return new ri(null===n.parent?n.name:zT(n.parent)+"/"+n.name)}function f2(n){null!==n.parent&&function DQ(n,e,t){const i=function SQ(n){return void 0===Ey(n)&&!Z$(n)}(t),r=(0,A.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,f2(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,f2(n))}(n.parent,n.name,n)}const AQ=/[\[\].#$\/\u0000-\u001F\u007F]/,RQ=/[\[\].#$\u0000-\u001F\u007F]/,p2=10485760,GM=function(n){return"string"==typeof n&&0!==n.length&&!AQ.test(n)},X$=function(n){return"string"==typeof n&&0!==n.length&&!RQ.test(n)},GT=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!_M(n)||n&&"object"==typeof n&&(0,A.r3)(n,".sv")},gd=function(n,e,t,i){i&&void 0===e||$T((0,A.gK)(n,"value"),e,t)},$T=function(n,e,t){const i=t instanceof ri?new qY(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+_y(i));if("function"==typeof e)throw new Error(n+"contains a function "+_y(i)+" with contents = "+e.toString());if(_M(e))throw new Error(n+"contains "+e.toString()+" "+_y(i));if("string"==typeof e&&e.length>p2/3&&(0,A.ug)(e)>p2)throw new Error(n+"contains a string greater than "+p2+" utf8 bytes "+_y(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Bs(e,(a,d)=>{if(".value"===a)r=!0;else if(".priority"!==a&&".sv"!==a&&(s=!0,!GM(a)))throw new Error(n+" contains an invalid key ("+a+") "+_y(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function KY(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,A.ug)(e),l$(n)})(i,a),$T(n,d,i),function YY(n){const e=n.parts_.pop();n.byteLength_-=(0,A.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+_y(i)+" in addition to actual children.")}},J$=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,A.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Bs(e,(a,d)=>{const f=new ri(a);if($T(r,d,ar(t,f)),".priority"===AL(f)&&!GT(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=AT(i);for(let a=0;a<s.length;a++)if((".priority"!==s[a]||a!==s.length-1)&&!GM(s[a]))throw new Error(n+"contains an invalid key ("+s[a]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(WY);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Bl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},m2=function(n,e,t){if(!t||void 0!==e){if(_M(e))throw new Error((0,A.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!GT(e))throw new Error((0,A.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},WT=function(n,e,t,i){if(!(i&&void 0===t||GM(t)))throw new Error((0,A.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qT=function(n,e,t,i){if(!(i&&void 0===t||X$(t)))throw new Error((0,A.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},OQ=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qT(n,e,t,i)},Hl=function(n,e){if(".info"===yn(e))throw new Error(n+" failed = Can't modify data under /.info/")},e3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!GM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),X$(n)}(t))throw new Error((0,A.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class PQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $M(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!RL(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function t3(n,e,t){$M(n,t),n3(n,i=>RL(i,e))}function Wa(n,e,t){$M(n,t),n3(n,i=>Bl(i,e)||Bl(e,i))}function n3(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(NQ(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function NQ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();my&&Vs("event: "+t.toString()),Hw(i)}}}const i3="repo_interrupt",FQ=25;class LQ{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=DM(),this.transactionQueueTree_=new d2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function r3(n){const t=n.infoData_.getNode(new ri(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function KT(n){return IQ({timestamp:r3(n)})}function s3(n,e,t,i,r){n.dataUpdateCount++;const s=new ri(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(r)if(i){const f=(0,A.UI)(t,m=>yr(m));a=function _Q(n,e,t,i){const r=r2(n,i);if(r){const s=s2(r),a=s.path,d=s.queryId,f=zo(a,e),m=Bi.fromObject(t);return o2(n,a,new qw(GL(d),f,m))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=yr(t);a=G$(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,A.UI)(t,m=>yr(m));a=function pQ(n,e,t){const i=Bi.fromObject(t);return Yw(n,new qw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,f)}else{const f=yr(t);a=BT(n.serverSyncTree_,s,f)}let d=s;a.length>0&&(d=Qw(n,s)),Wa(n.eventQueue_,d,a)}function o3(n,e){g2(n,"connected",e),!1===e&&function jQ(n){Zw(n,"onDisconnectEvents");const e=KT(n),t=DM();HL(n.onDisconnect_,Yn(),(r,s)=>{const a=Y$(r,s,n.serverSyncTree_,e);Ww(t,r,a)});let i=[];HL(t,Yn(),(r,s)=>{i=i.concat(BT(n.serverSyncTree_,r,s));const a=b2(n,r);Qw(n,a)}),n.onDisconnect_=DM(),Wa(n.eventQueue_,Yn(),i)}(n)}function g2(n,e,t){const i=new ri("/.info/"+e),r=yr(t);n.infoData_.updateSnapshot(i,r);const s=BT(n.infoSyncTree_,i,r);Wa(n.eventQueue_,i,s)}function WM(n){return n.nextWriteId_++}function _2(n,e,t,i,r){Zw(n,"set",{path:e.toString(),value:t,priority:i});const s=KT(n),a=yr(t,i),d=BM(n.serverSyncTree_,e),f=c2(a,d,s),m=WM(n),b=t2(n.serverSyncTree_,e,f,m,!0);$M(n.eventQueue_,b),n.server_.put(e.toString(),a.val(!0),(D,O)=>{const V="ok"===D;V||Io("set at "+e+" failed: "+D);const W=wm(n.serverSyncTree_,m,!V);Wa(n.eventQueue_,e,W),Em(0,r,D,O)});const I=b2(n,e);Qw(n,I),Wa(n.eventQueue_,I,[])}function zQ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&BL(n.onDisconnect_,e),Em(0,t,i,r)})}function a3(n,e,t,i){const r=yr(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,a)=>{"ok"===s&&Ww(n.onDisconnect_,e,r),Em(0,i,s,a)})}function y2(n,e,t){let i;i=".info"===yn(e._path)?VM(n.infoSyncTree_,e,t):VM(n.serverSyncTree_,e,t),t3(n.eventQueue_,e._path,i)}function l3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(i3)}function Zw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vs(t,...e)}function Em(n,e,t,i){e&&Hw(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const a=new Error(s);a.code=r,e(a)}})}function v2(n,e,t){return BM(n.serverSyncTree_,e,t)||tn.EMPTY_NODE}function qM(n,e=n.transactionQueueTree_){if(e||KM(n,e),Ey(e)){const t=u3(n,e);(0,A.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function YQ(n,e,t){const i=t.map(m=>m.currentWriteId),r=v2(n,e,i);let s=r;const a=r.hash();for(let m=0;m<t.length;m++){const b=t[m];(0,A.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const I=zo(e,b.path);s=s.updateChild(I,b.currentOutputSnapshotRaw)}const d=s.val(!0),f=e;n.server_.put(f.toString(),d,m=>{Zw(n,"transaction put response",{path:f.toString(),status:m});let b=[];if("ok"===m){const I=[];for(let D=0;D<t.length;D++)t[D].status=2,b=b.concat(wm(n.serverSyncTree_,t[D].currentWriteId)),t[D].onComplete&&I.push(()=>t[D].onComplete(null,!0,t[D].currentOutputSnapshotResolved)),t[D].unwatcher();KM(n,jM(n.transactionQueueTree_,e)),qM(n,n.transactionQueueTree_),Wa(n.eventQueue_,e,b);for(let D=0;D<I.length;D++)Hw(I[D])}else{if("datastale"===m)for(let I=0;I<t.length;I++)t[I].status=3===t[I].status?4:0;else{Io("transaction at "+f.toString()+" failed: "+m);for(let I=0;I<t.length;I++)t[I].status=4,t[I].abortReason=m}Qw(n,e)}},a)}(n,zT(e),t)}else Z$(e)&&zM(e,t=>{qM(n,t)})}function Qw(n,e){const t=c3(n,e),i=zT(t);return function ZQ(n,e,t){if(0===e.length)return;const i=[];let r=[];const a=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],m=zo(t,f.path);let I,b=!1;if((0,A.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)b=!0,I=f.abortReason,r=r.concat(wm(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=FQ)b=!0,I="maxretry",r=r.concat(wm(n.serverSyncTree_,f.currentWriteId,!0));else{const D=v2(n,f.path,a);f.currentInputSnapshot=D;const O=e[d].update(D.val());if(void 0!==O){$T("transaction failed: Data returned ",O,f.path);let V=yr(O);"object"==typeof O&&null!=O&&(0,A.r3)(O,".priority")||(V=V.updatePriority(D.getPriority()));const re=f.currentWriteId,Me=KT(n),ze=c2(V,D,Me);f.currentOutputSnapshotRaw=V,f.currentOutputSnapshotResolved=ze,f.currentWriteId=WM(n),a.splice(a.indexOf(re),1),r=r.concat(t2(n.serverSyncTree_,f.path,ze,f.currentWriteId,f.applyLocally)),r=r.concat(wm(n.serverSyncTree_,re,!0))}else b=!0,I="nodata",r=r.concat(wm(n.serverSyncTree_,f.currentWriteId,!0))}Wa(n.eventQueue_,t,r),r=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===I?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(I),!1,null)))}KM(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Hw(i[d]);qM(n,n.transactionQueueTree_)}(n,u3(n,t),i),i}function c3(n,e){let t,i=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===Ey(i);)i=jM(i,t),t=yn(e=Si(e));return i}function u3(n,e){const t=[];return d3(n,e,t),t.sort((i,r)=>i.order-r.order),t}function d3(n,e,t){const i=Ey(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);zM(e,r=>{d3(n,r,t)})}function KM(n,e){const t=Ey(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,h2(e,t.length>0?t:void 0)}zM(e,i=>{KM(n,i)})}function b2(n,e){const t=zT(c3(n,e)),i=jM(n.transactionQueueTree_,e);return function xQ(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{w2(n,r)}),w2(n,i),Q$(i,r=>{w2(n,r)}),t}function w2(n,e){const t=Ey(e);if(t){const i=[];let r=[],s=-1;for(let a=0;a<t.length;a++)3===t[a].status||(1===t[a].status?((0,A.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,t[a].status=3,t[a].abortReason="set"):((0,A.hu)(0===t[a].status,"Unexpected transaction status in abort"),t[a].unwatcher(),r=r.concat(wm(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));-1===s?h2(e,void 0):t.length=s+1,Wa(n.eventQueue_,zT(e),r);for(let a=0;a<i.length;a++)Hw(i[a])}}const E2=function(n,e){const t=JQ(n),i=t.namespace;return"firebase.com"===t.domain&&fd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&fd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Io("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new IL(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new ri(t.pathString)}},JQ=function(n){let e="",t="",i="",r="",s="",a=!0,d="https",f=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let b=n.indexOf("/");-1===b&&(b=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),e=n.substring(0,Math.min(b,I)),b<I&&(r=function QQ(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(b,I)));const D=function XQ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Io(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,I)));m=e.indexOf(":"),m>=0?(a="https"===d||"wss"===d,f=parseInt(e.substring(m+1),10)):m=e.length;const O=e.slice(0,m);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const V=e.indexOf(".");i=e.substring(0,V).toLowerCase(),t=e.substring(V+1),s=i}"ns"in D&&(s=D.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:a,scheme:d,pathString:r,namespace:s}},h3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",eX=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=h3.charAt(t%64),t=Math.floor(t/64);(0,A.hu)(0===t,"Cannot push at time == 0");let a=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=h3.charAt(e[r]);return(0,A.hu)(20===a.length,"nextPushId: Length should be 20."),a}}();class f3{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,A.Wl)(this.snapshot.exportVal())}}class p3{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class I2{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,A.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class m3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new A.BH;return zQ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Hl("OnDisconnect.remove",this._path);const e=new A.BH;return a3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Hl("OnDisconnect.set",this._path),gd("OnDisconnect.set",e,this._path,!1);const t=new A.BH;return a3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Hl("OnDisconnect.setWithPriority",this._path),gd("OnDisconnect.setWithPriority",e,this._path,!1),m2("OnDisconnect.setWithPriority",t,!1);const i=new A.BH;return function GQ(n,e,t,i,r){const s=yr(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(a,d)=>{"ok"===a&&Ww(n.onDisconnect_,e,s),Em(0,r,a,d)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Hl("OnDisconnect.update",this._path),J$("OnDisconnect.update",e,this._path,!1);const t=new A.BH;return function $Q(n,e,t,i){if((0,A.xb)(t))return Vs("onDisconnect().update() called with empty data.  Don't do anything."),void Em(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Bs(t,(a,d)=>{const f=yr(d);Ww(n.onDisconnect_,ar(e,a),f)}),Em(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fa{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return vn(this._path)?null:AL(this._path)}get ref(){return new jl(this._repo,this._path)}get _queryIdentifier(){const e=v$(this._queryParams),t=wL(e);return"{}"===t?"default":t}get _queryObject(){return v$(this._queryParams)}isEqual(e){if(!((e=(0,A.m9)(e))instanceof fa))return!1;const t=this._repo===e._repo,i=RL(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function $Y(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function YM(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Im(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===pd){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==pm)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Qh)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Vi){if(null!=e&&!GT(e)||null!=t&&!GT(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,A.hu)(n.getIndex()instanceof NL||n.getIndex()===FL,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ZM(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class jl extends fa{constructor(e,t){super(e,t,new TM,!1)}get parent(){const e=a$(this._path);return null===e?null:new jl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Iy{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ri(e),i=Cy(this.ref,e);return new Iy(this._node.getChild(t),i,Vi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Iy(r,Cy(this.ref,i),Vi)))}hasChild(e){const t=new ri(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function g3(n,e){return(n=(0,A.m9)(n))._checkNotDeleted("ref"),void 0!==e?Cy(n._root,e):n._root}function _3(n,e){(n=(0,A.m9)(n))._checkNotDeleted("refFromURL");const t=E2(e,n._repo.repoInfo_.nodeAdmin);e3("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&fd("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),g3(n,t.path.toString())}function Cy(n,e){return null===yn((n=(0,A.m9)(n))._path)?OQ("child","path",e,!1):qT("child","path",e,!1),new jl(n._repo,ar(n._path,e))}function C2(n,e){n=(0,A.m9)(n),Hl("set",n._path),gd("set",e,n._path,!1);const t=new A.BH;return _2(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function sX(n,e){J$("update",e,n._path,!1);const t=new A.BH;return function HQ(n,e,t,i){Zw(n,"update",{path:e.toString(),value:t});let r=!0;const s=KT(n),a={};if(Bs(t,(d,f)=>{r=!1,a[d]=Y$(ar(e,d),yr(f),n.serverSyncTree_,s)}),r)Vs("update() called with empty data.  Don't do anything."),Em(0,i,"ok",void 0);else{const d=WM(n),f=function fQ(n,e,t,i){!function RZ(n,e,t,i){(0,A.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=WL(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Bi.fromObject(t);return Yw(n,new qw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,a,d);$M(n.eventQueue_,f),n.server_.merge(e.toString(),t,(m,b)=>{const I="ok"===m;I||Io("update at "+e+" failed: "+m);const D=wm(n.serverSyncTree_,d,!I),O=D.length>0?Qw(n,e):e;Wa(n.eventQueue_,O,D),Em(0,i,m,b)}),Bs(t,m=>{const b=b2(n,ar(e,m));Qw(n,b)}),Wa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function oX(n){n=(0,A.m9)(n);const e=new I2(()=>{}),t=new YT(e);return function BQ(n,e,t){const i=function yQ(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(m,b)=>{const I=zo(m,t);i=i||vm(b,I)});let r=n.syncPointTree_.get(t);r?i=i||vm(r,Yn()):(r=new U$,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,a=s?new _m(i,!0,!1):null;return function tQ(n){return kM(n.viewCache_)}(V$(r,e,MM(n.pendingWriteTree_,e._path),s?a.getNode():tn.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=yr(r).withIndex(e._queryParams.getIndex());let a;if(n2(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())a=BT(n.serverSyncTree_,e._path,s);else{const d=HT(n.serverSyncTree_,e);a=G$(n.serverSyncTree_,e._path,s,d)}return Wa(n.eventQueue_,e._path,a),VM(n.serverSyncTree_,e,t,null,!0),s},r=>(Zw(n,"get for query "+(0,A.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Iy(i,new jl(n._repo,n._path),n._queryParams.getIndex()))}class YT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new f3("value",this,new Iy(e.snapshotNode,new jl(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new p3(this,e,t):null}matches(e){return e instanceof YT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class QM{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new p3(this,e,t):null}createEvent(e,t){(0,A.hu)(null!=e.childName,"Child events should have a childName.");const i=Cy(new jl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new f3(e.type,this,new Iy(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof QM&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ZT(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const f=t,m=(b,I)=>{y2(n._repo,n,d),f(b,I)};m.userCallback=t.userCallback,m.context=t.context,t=m}const a=new I2(t,s||void 0),d="value"===e?new YT(a):new QM(e,a);return function WQ(n,e,t){let i;i=".info"===yn(e._path)?n2(n.infoSyncTree_,e,t):n2(n.serverSyncTree_,e,t),t3(n.eventQueue_,e._path,i)}(n._repo,n,d),()=>y2(n._repo,n,d)}function T2(n,e,t,i){return ZT(n,"value",e,t,i)}function y3(n,e,t,i){return ZT(n,"child_added",e,t,i)}function v3(n,e,t,i){return ZT(n,"child_changed",e,t,i)}function b3(n,e,t,i){return ZT(n,"child_moved",e,t,i)}function w3(n,e,t,i){return ZT(n,"child_removed",e,t,i)}function E3(n,e,t){let i=null;const r=t?new I2(t):null;"value"===e?i=new YT(r):e&&(i=new QM(e,r)),y2(n._repo,n,i)}class Vc{}class I3 extends Vc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gd("endAt",this._value,e._path,!0);const t=VL(e._queryParams,this._value,this._key);if(ZM(t),Im(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class lX extends Vc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gd("endBefore",this._value,e._path,!1);const t=function _Z(n,e,t){let i;return i=VL(n,e,n.index_===pd||t?t:pm),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ZM(t),Im(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class C3 extends Vc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gd("startAt",this._value,e._path,!0);const t=UL(e._queryParams,this._value,this._key);if(ZM(t),Im(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class dX extends Vc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gd("startAfter",this._value,e._path,!1);const t=function gZ(n,e,t){let i;return i=UL(n,e,n.index_===pd||t?t:Qh),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(ZM(t),Im(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class fX extends Vc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(e._repo,e._path,function pZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class mX extends Vc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(e._repo,e._path,function mZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class _X extends Vc{constructor(e){super(),this._path=e}_apply(e){YM(e,"orderByChild");const t=new ri(this._path);if(vn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new NL(t),r=SM(e._queryParams,i);return Im(r),new fa(e._repo,e._path,r,!0)}}class vX extends Vc{_apply(e){YM(e,"orderByKey");const t=SM(e._queryParams,pd);return Im(t),new fa(e._repo,e._path,t,!0)}}class wX extends Vc{_apply(e){YM(e,"orderByPriority");const t=SM(e._queryParams,Vi);return Im(t),new fa(e._repo,e._path,t,!0)}}class IX extends Vc{_apply(e){YM(e,"orderByValue");const t=SM(e._queryParams,FL);return Im(t),new fa(e._repo,e._path,t,!0)}}class TX extends Vc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(gd("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new I3(this._value,this._key)._apply(new C3(this._value,this._key)._apply(e))}}function Bc(n,...e){let t=(0,A.m9)(n);for(const i of e)t=i._apply(t);return t}(function sQ(n){(0,A.hu)(!FM,"__referenceConstructor has already been defined"),FM=n})(jl),function uQ(n){(0,A.hu)(!UM,"__referenceConstructor has already been defined"),UM=n}(jl);const S2={};function S3(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||fd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vs("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,m,a=E2(s,r),d=a.repoInfo;typeof process<"u"&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(f=!0,s=`http://${m}?ns=${d.namespace}`,a=E2(s,r),d=a.repoInfo):f=!a.repoInfo.secure;const b=r&&f?new DT(DT.OWNER):new bY(n.name,n.options,e);e3("Invalid Firebase Database URL",a),vn(a.path)||fd("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function RX(n,e,t,i){let r=S2[e.name];r||(r={},S2[e.name]=r);let s=r[n.toURLString()];return s&&fd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new LQ(n,false,t,i),r[n.toURLString()]=s,s}(d,n,b,new vY(n.name,t));return new MX(I,n)}class MX{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function UQ(n,e,t){if(n.stats_=SL(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new xM(n.repoInfo_,(i,r,s,a)=>{s3(n,i,r,s,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>o3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,A.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new yy(n.repoInfo_,e,(i,r,s,a)=>{s3(n,i,r,s,a)},i=>{o3(n,i)},i=>{!function VQ(n,e){Bs(e,(t,i)=>{g2(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function IY(n,e){const t=n.toString();return TL[t]||(TL[t]=e()),TL[t]}(n.repoInfo_,()=>new IZ(n.stats_,n.server_)),n.infoData_=new yZ,n.infoSyncTree_=new z$({startListening:(i,r,s,a)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=BT(n.infoSyncTree_,i._path,f),setTimeout(()=>{a("ok")},0)),d},stopListening:()=>{}}),g2(n,"connected",!1),n.serverSyncTree_=new z$({startListening:(i,r,s,a)=>(n.server_.listen(i,s,r,(d,f)=>{const m=a(d,f);Wa(n.eventQueue_,i._path,m)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jl(this._repo,Yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function AX(n,e){const t=S2[e];(!t||t[n.key]!==n)&&fd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),l3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fd("Cannot call "+e+" on a deleted database.")}}function x3(){YG.IS_TRANSPORT_INITIALIZED&&Io("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function OX(){x3(),mm.forceDisallow()}function PX(){x3(),jw.forceDisallow(),mm.forceAllow()}function LX(n,e){AG(n,e)}const VX={".sv":"timestamp"};class jX{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}yy.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},yy.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function UX(n){CG(Nu.SDK_VERSION),(0,Nu._registerComponent)(new gi.wA("database",(e,{instanceIdentifier:t})=>S3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Nu.registerVersion)(EG,"0.14.4",n),(0,Nu.registerVersion)(EG,"0.14.4","esm2017")}();const WX=new Ni.Yd("@firebase/database-compat"),A3=function(n){WX.warn("FIREBASE WARNING: "+n)};class YX{constructor(e){this._delegate=e}cancel(e){(0,A.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,A.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,A.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,A.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,A.Dv)("OnDisconnect.set",1,2,arguments.length),(0,A.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,A.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,A.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,A.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,A3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,A.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class ZX{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,A.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Cm{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,A.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,A.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,A.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,A.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,A.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),qT("DataSnapshot.child","path",e,!1),new Cm(this._database,this._delegate.child(e))}hasChild(e){return(0,A.Dv)("DataSnapshot.hasChild",1,1,arguments.length),qT("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,A.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,A.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,A.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Cm(this._database,t)))}hasChildren(){return(0,A.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,A.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,A.Dv)("DataSnapshot.ref",0,0,arguments.length),new qa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class lo{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,A.Dv)("Query.on",2,4,arguments.length),(0,A.Wj)("Query.on","callback",t,!1);const a=lo.getCancelAndContextArgs_("Query.on",i,r),d=(m,b)=>{t.call(a.context,new Cm(this.database,m),b)};d.userCallback=t,d.context=a.context;const f=null===(s=a.cancel)||void 0===s?void 0:s.bind(a.context);switch(e){case"value":return T2(this._delegate,d,f),t;case"child_added":return y3(this._delegate,d,f),t;case"child_removed":return w3(this._delegate,d,f),t;case"child_changed":return v3(this._delegate,d,f),t;case"child_moved":return b3(this._delegate,d,f),t;default:throw new Error((0,A.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,A.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,A.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,A.Wj)("Query.off","callback",t,!0),(0,A.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,E3(this._delegate,e,r)}else E3(this._delegate,e)}get(){return oX(this._delegate).then(e=>new Cm(this.database,e))}once(e,t,i,r){(0,A.Dv)("Query.once",1,4,arguments.length),(0,A.Wj)("Query.once","callback",t,!0);const s=lo.getCancelAndContextArgs_("Query.once",i,r),a=new A.BH,d=(m,b)=>{const I=new Cm(this.database,m);t&&t.call(s.context,I,b),a.resolve(I)};d.userCallback=t,d.context=s.context;const f=m=>{s.cancel&&s.cancel.call(s.context,m),a.reject(m)};switch(e){case"value":T2(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":y3(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":w3(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":v3(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":b3(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,A.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return a.promise}limitToFirst(e){return(0,A.Dv)("Query.limitToFirst",1,1,arguments.length),new lo(this.database,Bc(this._delegate,function pX(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fX(n)}(e)))}limitToLast(e){return(0,A.Dv)("Query.limitToLast",1,1,arguments.length),new lo(this.database,Bc(this._delegate,function gX(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new mX(n)}(e)))}orderByChild(e){return(0,A.Dv)("Query.orderByChild",1,1,arguments.length),new lo(this.database,Bc(this._delegate,function yX(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qT("orderByChild","path",n,!1),new _X(n)}(e)))}orderByKey(){return(0,A.Dv)("Query.orderByKey",0,0,arguments.length),new lo(this.database,Bc(this._delegate,function bX(){return new vX}()))}orderByPriority(){return(0,A.Dv)("Query.orderByPriority",0,0,arguments.length),new lo(this.database,Bc(this._delegate,function EX(){return new wX}()))}orderByValue(){return(0,A.Dv)("Query.orderByValue",0,0,arguments.length),new lo(this.database,Bc(this._delegate,function CX(){return new IX}()))}startAt(e=null,t){return(0,A.Dv)("Query.startAt",0,2,arguments.length),new lo(this.database,Bc(this._delegate,function uX(n=null,e){return WT("startAt","key",e,!0),new C3(n,e)}(e,t)))}startAfter(e=null,t){return(0,A.Dv)("Query.startAfter",0,2,arguments.length),new lo(this.database,Bc(this._delegate,function hX(n,e){return WT("startAfter","key",e,!0),new dX(n,e)}(e,t)))}endAt(e=null,t){return(0,A.Dv)("Query.endAt",0,2,arguments.length),new lo(this.database,Bc(this._delegate,function aX(n,e){return WT("endAt","key",e,!0),new I3(n,e)}(e,t)))}endBefore(e=null,t){return(0,A.Dv)("Query.endBefore",0,2,arguments.length),new lo(this.database,Bc(this._delegate,function cX(n,e){return WT("endBefore","key",e,!0),new lX(n,e)}(e,t)))}equalTo(e,t){return(0,A.Dv)("Query.equalTo",1,2,arguments.length),new lo(this.database,Bc(this._delegate,function SX(n,e){return WT("equalTo","key",e,!0),new TX(n,e)}(e,t)))}toString(){return(0,A.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,A.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,A.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof lo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,A.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,A.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,A.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new qa(this.database,new jl(this._delegate._repo,this._delegate._path))}}class qa extends lo{constructor(e,t){super(e,new fa(t._repo,t._path,new TM,!1)),this.database=e,this._delegate=t}getKey(){return(0,A.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,A.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new qa(this.database,Cy(this._delegate,e))}getParent(){(0,A.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new qa(this.database,e):null}getRoot(){return(0,A.Dv)("Reference.root",0,0,arguments.length),new qa(this.database,this._delegate.root)}set(e,t){(0,A.Dv)("Reference.set",1,2,arguments.length),(0,A.Wj)("Reference.set","onComplete",t,!0);const i=C2(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,A.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,A3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hl("Reference.update",this._delegate._path),(0,A.Wj)("Reference.update","onComplete",t,!0);const i=sX(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,A.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,A.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function rX(n,e,t){if(Hl("setWithPriority",n._path),gd("setWithPriority",e,n._path,!1),m2("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new A.BH;return _2(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,A.Dv)("Reference.remove",0,1,arguments.length),(0,A.Wj)("Reference.remove","onComplete",e,!0);const t=function nX(n){return Hl("remove",n._path),C2(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,A.Dv)("Reference.transaction",1,3,arguments.length),(0,A.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,A.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,A.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function zX(n,e,t){var i;if(n=(0,A.m9)(n),Hl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new A.BH,d=T2(n,()=>{});return function KQ(n,e,t,i,r,s){Zw(n,"transaction on "+e);const a={path:e,update:t,onComplete:i,status:null,order:SG(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=v2(n,e,void 0);a.currentInputSnapshot=d;const f=a.update(d.val());if(void 0===f)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{$T("transaction failed: Data returned ",f,a.path),a.status=0;const m=jM(n.transactionQueueTree_,e),b=Ey(m)||[];let I;b.push(a),h2(m,b),"object"==typeof f&&null!==f&&(0,A.r3)(f,".priority")?(I=(0,A.DV)(f,".priority"),(0,A.hu)(GT(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(BM(n.serverSyncTree_,e)||tn.EMPTY_NODE).getPriority().val();const D=KT(n),O=yr(f,I),V=c2(O,d,D);a.currentOutputSnapshotRaw=O,a.currentOutputSnapshotResolved=V,a.currentWriteId=WM(n);const W=t2(n.serverSyncTree_,e,V,a.currentWriteId,a.applyLocally);Wa(n.eventQueue_,e,W),qM(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,m,b)=>{let I=null;f?s.reject(f):(I=new Iy(b,new jl(n._repo,n._path),Vi),s.resolve(new jX(m,I)))},d,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new ZX(s.committed,new Cm(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,A.Dv)("Reference.setPriority",1,2,arguments.length),(0,A.Wj)("Reference.setPriority","onComplete",t,!0);const i=function iX(n,e){n=(0,A.m9)(n),Hl("setPriority",n._path),m2("setPriority",e,!1);const t=new A.BH;return _2(n._repo,ar(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,A.Dv)("Reference.push",0,2,arguments.length),(0,A.Wj)("Reference.push","onComplete",t,!0);const i=function tX(n,e){n=(0,A.m9)(n),Hl("push",n._path),gd("push",e,n._path,!0);const t=r3(n._repo),i=eX(t),r=Cy(n,i),s=Cy(n,i);let a;return a=null!=e?C2(s,e).then(()=>s):Promise.resolve(s),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}(this._delegate,e),r=i.then(a=>new qa(this.database,a));t&&r.then(()=>t(null),a=>t(a));const s=new qa(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Hl("Reference.onDisconnect",this._delegate._path),new YX(new m3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class QT{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:OX,forceLongPolling:PX}}useEmulator(e,t,i={}){!function D3(n,e,t,i={}){(n=(0,A.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&fd("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&fd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new DT(DT.OWNER);else if(i.mockUserToken){const a="string"==typeof i.mockUserToken?i.mockUserToken:(0,A.Sg)(i.mockUserToken,n.app.options.projectId);s=new DT(a)}!function DX(n,e,t,i){n.repoInfo_=new IL(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,A.Dv)("database.ref",0,1,arguments.length),e instanceof qa){const t=_3(this._delegate,e.toString());return new qa(this,t)}{const t=g3(this._delegate,e);return new qa(this,t)}}refFromURL(e){(0,A.Dv)("database.refFromURL",1,1,arguments.length);const i=_3(this._delegate,e);return new qa(this,i)}goOffline(){return(0,A.Dv)("database.goOffline",0,0,arguments.length),function NX(n){(n=(0,A.m9)(n))._checkNotDeleted("goOffline"),l3(n._repo)}(this._delegate)}goOnline(){return(0,A.Dv)("database.goOnline",0,0,arguments.length),function FX(n){(n=(0,A.m9)(n))._checkNotDeleted("goOnline"),function qQ(n){n.persistentConnection_&&n.persistentConnection_.resume(i3)}(n._repo)}(this._delegate)}}QT.ServerValue={TIMESTAMP:function BX(){return VX}(),increment:n=>function HX(n){return{".sv":{increment:n}}}(n)};var XX=Object.freeze({__proto__:null,initStandalone:function QX({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){CG(t);const a=new gi.zt("auth-internal",new gi.H0("database-standalone"));return a.setComponent(new gi.wA("auth-internal",()=>i,"PRIVATE")),{instance:new QT(S3(n,a,void 0,e,s),n),namespace:r}}});const JX=QT.ServerValue;function R3(n){return null==n}function k3(n){return"function"==typeof n.set}function M3(n,e){return k3(e)?e:n.ref(e)}function O3(n,e){if(function tJ(n){return"string"==typeof n}(n))return e.stringCase();if(k3(n))return e.firebaseCase();if(function nJ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function XT(n,e,t="on",i=Yf.z){return new Yi.y(r=>{let s=null;return s=n[t](e,(a,d)=>{i.schedule(()=>{r.next({snapshot:a,prevKey:d})}),"once"===t&&i.schedule(()=>r.complete())},a=>{i.schedule(()=>r.error(a))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ot.U)(r=>{const{snapshot:s,prevKey:a}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:a,key:d}}),(0,Os.B)())}function P3(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function sJ(n,e){const{payload:t,prevKey:i,key:r}=e,s=P3(n,r),a=function rJ(n,e){if(R3(e))return 0;{const t=P3(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const m={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,m],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==t.key)).splice(a,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(a,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(a,0,d),n}return n;default:return n}}function N3(n){return(R3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function F3(n,e,t){return function iJ(n,e,t){return XT(n,"value","once",t).pipe((0,jn.w)(i=>{const r=[(0,pt.of)(i)];return e.forEach(s=>r.push(XT(n,s,"on",t))),(0,Zi.T)(...r).pipe(Cl(sJ,[]))}),(0,ME.x)())}(n,e=N3(e),t)}function L3(n,e,t){const i=(e=N3(e)).map(r=>XT(n,r,"on",t));return(0,Zi.T)(...i)}function U3(n,e){return function(i,r){return O3(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function cJ(n){return function(t){return t?O3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function V3(n,e){return function(){return XT(n,"value","on",e)}}!function eJ(n){n.INTERNAL.registerComponent(new gi.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new QT(r,i)},"PUBLIC").setServiceProps({Reference:qa,Query:lo,Database:QT,DataSnapshot:Cm,enableLogging:LX,INTERNAL:XX,ServerValue:JX}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(hD.Z);const hJ=new u.OlP("angularfire2.realtimeDatabaseURL"),fJ=new u.OlP("angularfire2.database.use-emulator");let B3=(()=>{class n{constructor(t,i,r,s,a,d,f,m,b,I,D,O,V,W,re){this.schedulers=d;const Me=f,ze=(0,li.on)(t,a,i);m&&Dg(ze,a,b,D,O,V,I,W),this.database=(0,li.cc)(`${ze.name}.database.${r}`,"AngularFireDatabase",ze.name,()=>{const je=a.runOutsideAngular(()=>ze.database(r||void 0));return Me&&je.useEmulator(...Me),je},[Me])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>M3(this.database,t));let s=r;return i&&(s=i(r)),function uJ(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:U3(i,"update"),set:U3(i,"set"),push:r=>i.push(r),remove:cJ(i),snapshotChanges:r=>F3(n,r,t).pipe(Gt.iC),stateChanges:r=>L3(n,r,t).pipe(Gt.iC),auditTrail:r=>function oJ(n,e,t){return function lJ(n,e,t){return function aJ(n,e){return XT(n,"value","on",e).pipe((0,ot.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function sY(...n){const e=(0,Pu.jO)(n);return(0,Pi.e)((t,i)=>{const r=n.length,s=new Array(r);let a=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,fm.Xf)(n[f]).subscribe((0,qn.x)(i,m=>{s[f]=m,!d&&!a[f]&&(a[f]=!0,(d=a.every(Pa.y))&&(a=null))},_L.Z));t.subscribe((0,qn.x)(i,f=>{if(d){const m=[f,...s];i.next(e?e(...m):m)}}))})}(e),(0,ot.U)(([r,s])=>{const a=r.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:a,loadedKeys:d}}),function oY(n){return(0,Pi.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,qn.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ot.U)(r=>r.actions))}(n,L3(n,e).pipe(Cl((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(Gt.iC),valueChanges:(r,s)=>F3(n,r,t).pipe((0,ot.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),Gt.iC)}}(s,this)}object(t){return function dJ(n,e){return{query:n,snapshotChanges:()=>V3(n,e.schedulers.outsideAngular)().pipe(Gt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>V3(n,e.schedulers.outsideAngular)().pipe(Gt.iC,(0,ot.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>M3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(li.Dh),u.LFG(li.xv,8),u.LFG(hJ,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Gt.HU),u.LFG(fJ,8),u.LFG(Ag,8),u.LFG(qf,8),u.LFG(Kf,8),u.LFG(K0,8),u.LFG(Y0,8),u.LFG(Z0,8),u.LFG(Tv,8),u.LFG(Cg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pJ=(()=>{class n{constructor(){xg.Z.registerVersion("angularfire",Gt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[B3]}),n})();U(6710);class j3{constructor(){return(0,Gt.vb)("auth")}}class A2{constructor(e){return e}}const z3="storage",R2=new u.OlP("angularfire2.storage-instances");function bJ(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new A2(i)}}const wJ={provide:class yJ{constructor(){return(0,Gt.vb)(z3)}},deps:[[new u.FiY,R2]]},EJ={provide:A2,useFactory:function vJ(n,e){const t=(0,Gt.JM)(z3,n,e);return t&&new A2(t)},deps:[[new u.FiY,R2],class Po{constructor(e){return e}}]};let IJ=(()=>{class n{constructor(){(0,Bf.KN)("angularfire",Gt.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[EJ,wJ]}),n})();function CJ(n,...e){return{ngModule:IJ,providers:[{provide:R2,useFactory:bJ(n),multi:!0,deps:[u.R0b,u.zs3,Gt.HU,gc,[new u.FiY,j3],[new u.FiY,Cg],...e]}]}}const TJ=(0,Gt.u3)(ip,!0),G3_firebase={apiKey:"AIzaSyCpKvN8eYnVGjGmnUFS70UhxqP9SQZ2HIk",authDomain:"fir-app-demo-acd72.firebaseapp.com",databaseURL:"https://fir-app-demo-acd72-default-rtdb.firebaseio.com",projectId:"fir-app-demo-acd72",storageBucket:"fir-app-demo-acd72.appspot.com",messagingSenderId:"315780365463",appId:"1:315780365463:web:42e83c38ef17d42b8b7dd2",measurementId:"G-91Y2LEH5BC"};var zl=U(5619);const{isArray:xJ}=Array,{getPrototypeOf:DJ,prototype:AJ,keys:RJ}=Object;function $3(n){if(1===n.length){const e=n[0];if(xJ(e))return{args:e,keys:null};if(function kJ(n){return n&&"object"==typeof n&&DJ(n)===AJ}(e)){const t=RJ(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:MJ}=Array;function k2(n){return(0,ot.U)(e=>function OJ(n,e){return MJ(e)?n(...e):n(e)}(n,e))}function W3(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var PJ=U(7103);function XM(...n){const e=(0,Pu.yG)(n),t=(0,Pu.jO)(n),{args:i,keys:r}=$3(n);if(0===i.length)return(0,On.D)([],e);const s=new Yi.y(function NJ(n,e,t=Pa.y){return i=>{q3(e,()=>{const{length:r}=n,s=new Array(r);let a=r,d=r;for(let f=0;f<r;f++)q3(e,()=>{const m=(0,On.D)(n[f],e);let b=!1;m.subscribe((0,qn.x)(i,I=>{s[f]=I,b||(b=!0,d--),d||i.next(t(s.slice()))},()=>{--a||i.complete()}))},i)},i)}}(i,e,r?a=>W3(r,a):Pa.y));return t?s.pipe(k2(t)):s}function q3(n,e,t){n?(0,PJ.f)(t,n,e):e()}function JT(n){return new Yi.y(e=>{(0,fm.Xf)(n()).subscribe(e)})}var FJ=U(8407);function Xw(n,e){const t=(0,Ur.m)(n)?n:()=>n,i=r=>r.error(t());return new Yi.y(e?r=>e.schedule(i,0,r):i)}var Hc=U(7394);function M2(){return(0,Pi.e)((n,e)=>{let t=null;n._refCount++;const i=(0,qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class K3 extends Yi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Hc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,qn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Hc.w0.EMPTY)}return e}refCount(){return M2()(this)}}var co=U(1631);function Jw(n,e){return(0,Ur.m)(e)?(0,co.z)(n,e,1):(0,co.z)(n,1)}var $r=U(9397);function Tm(n){return(0,Pi.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,qn.x)(t,void 0,void 0,a=>{s=(0,fm.Xf)(n(a,Tm(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function O2(n){return n<=0?()=>Ar.E:(0,Pi.e)((e,t)=>{let i=[];e.subscribe((0,qn.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Y3(n){return(0,ot.U)(()=>n)}function JM(n){return(0,Pi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Hs(n){return(0,Pi.e)((e,t)=>{(0,fm.Xf)(n).subscribe((0,qn.x)(t,()=>t.complete(),_L.Z)),!t.closed&&e.subscribe(t)})}const ln="primary",eS=Symbol("RouteTitle");class UJ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function e0(n){return new UJ(n)}function VJ(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const a=i[s],d=n[s];if(a.startsWith(":"))r[a.substring(1)]=d;else if(a!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _d(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Z3(n[r],e[r]))return!1;return!0}function Z3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Q3(n){return n.length>0?n[n.length-1]:null}function Sm(n){return function SJ(n){return!!n&&(n instanceof Yi.y||(0,Ur.m)(n.lift)&&(0,Ur.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,On.D)(Promise.resolve(n)):(0,pt.of)(n)}const HJ={exact:function eW(n,e,t){if(!Ty(n.segments,e.segments)||!eO(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!eW(n.children[i],e.children[i],t))return!1;return!0},subset:tW},X3={exact:function jJ(n,e){return _d(n,e)},subset:function zJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Z3(n[t],e[t]))},ignored:()=>!0};function J3(n,e,t){return HJ[t.paths](n.root,e.root,t.matrixParams)&&X3[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tW(n,e,t){return nW(n,e,e.segments,t)}function nW(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ty(r,t)||e.hasChildren()||!eO(r,t,i))}if(n.segments.length===t.length){if(!Ty(n.segments,t)||!eO(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!tW(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ty(n.segments,r)&&eO(n.segments,r,i)&&n.children[ln])&&nW(n.children[ln],e,s,i)}}function eO(n,e,t){return e.every((i,r)=>X3[t](n[r].parameters,i.parameters))}class t0{constructor(e=new hi([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=e0(this.queryParams)),this._queryParamMap}toString(){return WJ.serialize(this)}}class hi{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tO(this)}}class tS{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=e0(this.parameters)),this._parameterMap}toString(){return sW(this)}}function Ty(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let nS=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new P2},providedIn:"root"})}return n})();class P2{parse(e){const t=new iee(e);return new t0(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${iS(e.root,!0)}`,i=function YJ(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${nO(t)}=${nO(r)}`).join("&"):`${nO(t)}=${nO(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function qJ(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const WJ=new P2;function tO(n){return n.segments.map(e=>sW(e)).join("/")}function iS(n,e){if(!n.hasChildren())return tO(n);if(e){const t=n.children[ln]?iS(n.children[ln],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ln&&i.push(`${r}:${iS(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function $J(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ln&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ln&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===ln?[iS(n.children[ln],!1)]:[`${r}:${iS(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ln]?`${tO(n)}/${t[0]}`:`${tO(n)}/(${t.join("//")})`}}function iW(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nO(n){return iW(n).replace(/%3B/gi,";")}function N2(n){return iW(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iO(n){return decodeURIComponent(n)}function rW(n){return iO(n.replace(/\+/g,"%20"))}function sW(n){return`${N2(n.path)}${function KJ(n){return Object.keys(n).map(e=>`;${N2(e)}=${N2(n[e])}`).join("")}(n.parameters)}`}const ZJ=/^[^\/()?;#]+/;function F2(n){const e=n.match(ZJ);return e?e[0]:""}const QJ=/^[^\/()?;=#]+/,JJ=/^[^=?&#]+/,tee=/^[^&#]+/;class iee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hi([],{}):new hi([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ln]=new hi(e,t)),i}parseSegment(){const e=F2(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new tS(iO(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function XJ(n){const e=n.match(QJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=F2(this.remaining);r&&(i=r,this.capture(i))}e[iO(t)]=iO(i)}parseQueryParam(e){const t=function eee(n){const e=n.match(JJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const a=function nee(n){const e=n.match(tee);return e?e[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const r=rW(t),s=rW(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=F2(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new u.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ln);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[ln]:new hi([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function oW(n){return n.segments.length>0?new hi([],{[ln]:n}):n}function aW(n){const e={};for(const i of Object.keys(n.children)){const s=aW(n.children[i]);if(i===ln&&0===s.segments.length&&s.hasChildren())for(const[a,d]of Object.entries(s.children))e[a]=d;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function ree(n){if(1===n.numberOfChildren&&n.children[ln]){const e=n.children[ln];return new hi(n.segments.concat(e.segments),e.children)}return n}(new hi(n.segments,e))}function Sy(n){return n instanceof t0}function lW(n){let e;const r=oW(function t(s){const a={};for(const f of s.children){const m=t(f);a[f.outlet]=m}const d=new hi(s.url,a);return s===n&&(e=d),d}(n.root));return e??r}function cW(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return L2(r,r,r,t,i);const s=function oee(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dW(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([f,m])=>{d[f]="string"==typeof m?m.split("/"):m}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===a?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new dW(t,e,i)}(e);if(s.toRoot())return L2(r,r,new hi([],{}),t,i);const a=function aee(n,e,t){if(n.isAbsolute)return new sO(e,!0,0);if(!t)return new sO(e,!1,NaN);if(null===t.parent)return new sO(t,!0,0);const i=rO(n.commands[0])?0:1;return function lee(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new u.vHH(4005,!1);r=i.segments.length}return new sO(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),d=a.processChildren?sS(a.segmentGroup,a.index,s.commands):hW(a.segmentGroup,a.index,s.commands);return L2(r,a.segmentGroup,d,t,i)}function rO(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rS(n){return"object"==typeof n&&null!=n&&n.outlets}function L2(n,e,t,i,r){let a,s={};i&&Object.entries(i).forEach(([f,m])=>{s[f]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),a=n===e?t:uW(n,e,t);const d=oW(aW(a));return new t0(d,s,r)}function uW(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:uW(s,e,t)}),new hi(n.segments,i)}class dW{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&rO(i[0]))throw new u.vHH(4003,!1);const r=i.find(rS);if(r&&r!==Q3(i))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sO{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function hW(n,e,t){if(n||(n=new hi([],{})),0===n.segments.length&&n.hasChildren())return sS(n,e,t);const i=function uee(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const a=n.segments[r],d=t[i];if(rS(d))break;const f=`${d}`,m=i<t.length-1?t[i+1]:null;if(r>0&&void 0===f)break;if(f&&m&&"object"==typeof m&&void 0===m.outlets){if(!pW(f,m,a))return s;i+=2}else{if(!pW(f,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new hi(n.segments.slice(0,i.pathIndex),{});return s.children[ln]=new hi(n.segments.slice(i.pathIndex),n.children),sS(s,0,r)}return i.match&&0===r.length?new hi(n.segments,{}):i.match&&!n.hasChildren()?U2(n,e,t):i.match?sS(n,0,r):U2(n,e,t)}function sS(n,e,t){if(0===t.length)return new hi(n.segments,{});{const i=function cee(n){return rS(n[0])?n[0].outlets:{[ln]:n}}(t),r={};if(Object.keys(i).some(s=>s!==ln)&&n.children[ln]&&1===n.numberOfChildren&&0===n.children[ln].segments.length){const s=sS(n.children[ln],e,t);return new hi(n.segments,s.children)}return Object.entries(i).forEach(([s,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(r[s]=hW(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{void 0===i[s]&&(r[s]=a)}),new hi(n.segments,r)}}function U2(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(rS(s)){const f=dee(s.outlets);return new hi(i,f)}if(0===r&&rO(t[0])){i.push(new tS(n.segments[e].path,fW(t[0]))),r++;continue}const a=rS(s)?s.outlets[ln]:`${s}`,d=r<t.length-1?t[r+1]:null;a&&d&&rO(d)?(i.push(new tS(a,fW(d))),r+=2):(i.push(new tS(a,{})),r++)}return new hi(i,{})}function dee(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=U2(new hi([],{}),0,i))}),e}function fW(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function pW(n,e,t){return n==t.path&&_d(e,t.parameters)}const oS="imperative";class yd{constructor(e,t){this.id=e,this.url=t}}class oO extends yd{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xm extends yd{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aS extends yd{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class n0 extends yd{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class aO extends yd{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mW extends yd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hee extends yd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fee extends yd{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pee extends yd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mee extends yd{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gee{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _ee{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yee{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vee{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bee{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wee{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gW{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class V2{}class B2{constructor(e){this.url=e}}class Eee{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new lS,this.attachRef=null}}let lS=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Eee,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class _W{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=H2(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=H2(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=j2(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return j2(e,this._root).map(t=>t.value)}}function H2(n,e){if(n===e.value)return e;for(const t of e.children){const i=H2(n,t);if(i)return i}return null}function j2(n,e){if(n===e.value)return[e];for(const t of e.children){const i=j2(n,t);if(i.length)return i.unshift(e),i}return[]}class Jh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function r0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yW extends _W{constructor(e,t){super(e),this.snapshot=t,z2(this,e)}toString(){return this.snapshot.toString()}}function vW(n,e){const t=function Iee(n,e){const a=new lO([],{},{},"",{},ln,e,null,{});return new wW("",new Jh(a,[]))}(0,e),i=new zl.X([new tS("",{})]),r=new zl.X({}),s=new zl.X({}),a=new zl.X({}),d=new zl.X(""),f=new s0(i,r,a,d,s,ln,e,t.root);return f.snapshot=t.root,new yW(new Jh(f,[]),t)}class s0{constructor(e,t,i,r,s,a,d,f){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe((0,ot.U)(m=>m[eS]))??(0,pt.of)(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>e0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>e0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bW(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Cee(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class lO{get title(){return this.data?.[eS]}constructor(e,t,i,r,s,a,d,f,m){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=d,this.routeConfig=f,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=e0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=e0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wW extends _W{constructor(e,t){super(t),this.url=e,z2(this,t)}toString(){return EW(this._root)}}function z2(n,e){e.value._routerState=n,e.children.forEach(t=>z2(n,t))}function EW(n){const e=n.children.length>0?` { ${n.children.map(EW).join(", ")} } `:"";return`${n.value}${e}`}function G2(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_d(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_d(e.params,t.params)||n.paramsSubject.next(t.params),function BJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_d(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),_d(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $2(n,e){const t=_d(n.params,e.params)&&function GJ(n,e){return Ty(n,e)&&n.every((t,i)=>_d(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$2(n.parent,e.parent))}let W2=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ln,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(lS),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(cO,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=t;const r=this.location,a=t.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new Tee(t,d,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:f,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]})}return n})();class Tee{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===s0?this.route:e===lS?this.childContexts:this.parent.get(e,t)}}const cO=new u.OlP("");let IW=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=XM([i.queryParams,i.params,i.data]).pipe((0,jn.w)(([s,a,d],f)=>(d={...s,...a,...d},0===f?(0,pt.of)(d):Promise.resolve(d)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const a=(0,u.qFp)(i.component);if(a)for(const{templateName:d}of a.inputs)t.activatedComponentRef.setInput(d,s[d]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function cS(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function xee(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return cS(n,i,r);return cS(n,i)})}(n,e,t);return new Jh(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(d=>cS(n,d)),a}}const i=function Dee(n){return new s0(new zl.X(n.url),new zl.X(n.params),new zl.X(n.queryParams),new zl.X(n.fragment),new zl.X(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>cS(n,s));return new Jh(i,r)}}const q2="ngNavigationCancelingError";function CW(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Sy(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=TW(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function TW(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[q2]=!0,i.cancellationCode=e,t&&(i.url=t),i}function SW(n){return n&&n[q2]}let xW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(i,r){1&i&&u._UZ(0,"router-outlet")},dependencies:[W2],encapsulation:2})}return n})();function K2(n){const e=n.children&&n.children.map(K2),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ln&&(t.component=xW),t}function jc(n){return n.outlet||ln}function uS(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Fee{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),G2(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=r0(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=r0(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);if(i&&i.outlet){const a=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=r0(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=r0(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new wee(s.value.snapshot))}),e.children.length&&this.forwardEvent(new vee(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(G2(r),r===s)if(r.component){const a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(d.contexts),a.attachRef=d.componentRef,a.route=d.route.value,a.outlet&&a.outlet.attach(d.componentRef,d.route.value),G2(d.route.value),this.activateChildRoutes(e,null,a.children)}else{const d=uS(r.snapshot);a.attachRef=null,a.route=r,a.injector=d,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}}class DW{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uO{constructor(e,t){this.component=e,this.route=t}}function Lee(n,e,t){const i=n._root;return dS(i,e?e._root:null,t,[i.value])}function o0(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:i}function dS(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=r0(e);return n.children.forEach(a=>{(function Vee(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const f=function Bee(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ty(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ty(n.url,e.url)||!_d(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$2(n,e)||!_d(n.queryParams,e.queryParams);default:return!$2(n,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new DW(i)):(s.data=a.data,s._resolvedData=a._resolvedData),dS(n,e,s.component?d?d.children:null:t,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new uO(d.outlet.component,a))}else a&&hS(e,d,r),r.canActivateChecks.push(new DW(i)),dS(n,null,s.component?d?d.children:null:t,i,r)})(a,s[a.value.outlet],t,i.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,d])=>hS(d,t.getContext(a),r)),r}function hS(n,e,t){const i=r0(n),r=n.value;Object.entries(i).forEach(([s,a])=>{hS(a,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new uO(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function fS(n){return"function"==typeof n}function AW(n){return n instanceof mc||"EmptyError"===n?.name}const dO=Symbol("INITIAL_VALUE");function a0(){return(0,jn.w)(n=>XM(n.map(e=>e.pipe(Nn(1),Es(dO)))).pipe((0,ot.U)(e=>{for(const t of e)if(!0!==t){if(t===dO)return dO;if(!1===t||t instanceof t0)return t}return!0}),Pn(e=>e!==dO),Nn(1)))}function RW(n){return(0,FJ.z)((0,$r.b)(e=>{if(Sy(e))throw CW(0,e)}),(0,ot.U)(e=>!0===e))}class hO{constructor(e){this.segmentGroup=e||null}}class kW{constructor(e){this.urlTree=e}}function l0(n){return Xw(new hO(n))}function MW(n){return Xw(new kW(n))}class ote{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,pt.of)(i);if(r.numberOfChildren>1||!r.children[ln])return Xw(new u.vHH(4e3,!1));r=r.children[ln]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new t0(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);i[r]=t[d]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let a={};return Object.entries(t.children).forEach(([d,f])=>{a[d]=this.createSegmentGroup(e,f,i,r)}),new hi(s,a)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new u.vHH(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const Y2={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ate(n,e,t,i,r){const s=Z2(n,e,t);return s.matched?(i=function Ree(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function ite(n,e,t,i){const r=e.canMatch;if(!r||0===r.length)return(0,pt.of)(!0);const s=r.map(a=>{const d=o0(a,n);return Sm(function Wee(n){return n&&fS(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))});return(0,pt.of)(s).pipe(a0(),RW())}(i,e,t).pipe((0,ot.U)(a=>!0===a?s:{...Y2}))):(0,pt.of)(s)}function Z2(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Y2}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||VJ)(t,n,e);if(!r)return{...Y2};const s={};Object.entries(r.posParams??{}).forEach(([d,f])=>{s[d]=f.path});const a=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function OW(n,e,t,i){return t.length>0&&function ute(n,e,t){return t.some(i=>fO(n,e,i)&&jc(i)!==ln)}(n,t,i)?{segmentGroup:new hi(e,cte(i,new hi(t,n.children))),slicedSegments:[]}:0===t.length&&function dte(n,e,t){return t.some(i=>fO(n,e,i))}(n,t,i)?{segmentGroup:new hi(n.segments,lte(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new hi(n.segments,n.children),slicedSegments:t}}function lte(n,e,t,i,r){const s={};for(const a of i)if(fO(n,t,a)&&!r[jc(a)]){const d=new hi([],{});s[jc(a)]=d}return{...r,...s}}function cte(n,e){const t={};t[ln]=e;for(const i of n)if(""===i.path&&jc(i)!==ln){const r=new hi([],{});t[jc(i)]=r}return t}function fO(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class mte{constructor(e,t,i,r,s,a,d){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new ote(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=OW(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ln).pipe(Tm(t=>{if(t instanceof kW)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof hO?this.noMatchError(t):t}),(0,ot.U)(t=>{const i=new lO([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ln,this.rootComponentType,null,{}),r=new Jh(i,t),s=new wW("",r),a=function see(n,e,t=null,i=null){return cW(lW(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root),{state:s,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ln).pipe(Tm(i=>{throw i instanceof hO?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=bW(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,On.D)(r).pipe(Jw(s=>{const a=i.children[s],d=function Pee(n,e){const t=n.filter(i=>jc(i)===e);return t.push(...n.filter(i=>jc(i)!==e)),t}(t,s);return this.processSegmentGroup(e,d,a,s)}),Cl((s,a)=>(s.push(...a),s)),Xs(null),function LJ(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Pn((r,s)=>n(r,s,i)):Pa.y,O2(1),t?Xs(e):vu(()=>new mc))}(),(0,co.z)(s=>{if(null===s)return l0(i);const a=PW(s);return function gte(n){n.sort((e,t)=>e.value.outlet===ln?-1:t.value.outlet===ln?1:e.value.outlet.localeCompare(t.value.outlet))}(a),(0,pt.of)(a)}))}processSegment(e,t,i,r,s,a){return(0,On.D)(t).pipe(Jw(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,i,r,s,a).pipe(Tm(f=>{if(f instanceof hO)return(0,pt.of)(null);throw f}))),yo(d=>!!d),Tm(d=>{if(AW(d))return function fte(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?(0,pt.of)([]):l0(i);throw d}))}processSegmentAgainstRoute(e,t,i,r,s,a,d){return function hte(n,e,t,i){return!!(jc(n)===i||i!==ln&&fO(e,t,n))&&("**"===n.path||Z2(e,n,t).matched)}(i,r,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,a,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,a):l0(r):l0(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?MW(s):this.applyRedirects.lineralizeSegments(i,s).pipe((0,co.z)(a=>{const d=new hi(a,{});return this.processSegment(e,t,d,a,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a){const{matched:d,consumedSegments:f,remainingSegments:m,positionalParamSegments:b}=Z2(t,r,s);if(!d)return l0(t);const I=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,b);return r.redirectTo.startsWith("/")?MW(I):this.applyRedirects.lineralizeSegments(r,I).pipe((0,co.z)(D=>this.processSegment(e,i,t,D.concat(m),a,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,a){let d;if("**"===i.path){const f=r.length>0?Q3(r).parameters:{},m=new lO(r,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NW(i),jc(i),i.component??i._loadedComponent??null,i,FW(i));d=(0,pt.of)({snapshot:m,consumedSegments:[],remainingSegments:[]}),t.children={}}else d=ate(t,i,r,e).pipe((0,ot.U)(({matched:f,consumedSegments:m,remainingSegments:b,parameters:I})=>f?{snapshot:new lO(m,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NW(i),jc(i),i.component??i._loadedComponent??null,i,FW(i)),consumedSegments:m,remainingSegments:b}:null));return d.pipe((0,jn.w)(f=>null===f?l0(t):this.getChildConfig(e=i._injector??e,i,r).pipe((0,jn.w)(({routes:m})=>{const b=i._loadedInjector??e,{snapshot:I,consumedSegments:D,remainingSegments:O}=f,{segmentGroup:V,slicedSegments:W}=OW(t,D,O,m);if(0===W.length&&V.hasChildren())return this.processChildren(b,m,V).pipe((0,ot.U)(Me=>null===Me?null:[new Jh(I,Me)]));if(0===m.length&&0===W.length)return(0,pt.of)([new Jh(I,[])]);const re=jc(i)===s;return this.processSegment(b,m,V,W,re?ln:s,!0).pipe((0,ot.U)(Me=>[new Jh(I,Me)]))}))))}getChildConfig(e,t,i){return t.children?(0,pt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,pt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function nte(n,e,t,i){const r=e.canLoad;if(void 0===r||0===r.length)return(0,pt.of)(!0);const s=r.map(a=>{const d=o0(a,n);return Sm(function jee(n){return n&&fS(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))});return(0,pt.of)(s).pipe(a0(),RW())}(e,t,i).pipe((0,co.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,$r.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function ste(n){return Xw(TW(!1,3))}())):(0,pt.of)({routes:[],injector:e})}}function _te(n){const e=n.value.routeConfig;return e&&""===e.path}function PW(n){const e=[],t=new Set;for(const i of n){if(!_te(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=PW(i.children);e.push(new Jh(i.value,r))}return e.filter(i=>!t.has(i))}function NW(n){return n.data||{}}function FW(n){return n.resolve||{}}function LW(n){return"string"==typeof n.title||null===n.title}function Q2(n){return(0,jn.w)(e=>{const t=n(e);return t?(0,On.D)(t).pipe((0,ot.U)(()=>e)):(0,pt.of)(e)})}const c0=new u.OlP("ROUTES");let X2=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,pt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Sm(t.loadComponent()).pipe((0,ot.U)(UW),(0,$r.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),JM(()=>{this.componentLoaders.delete(t)})),r=new K3(i,()=>new zt.x).pipe(M2());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,pt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Cte(n,e,t,i){return Sm(n.loadChildren()).pipe((0,ot.U)(UW),(0,co.z)(r=>r instanceof u.YKP||Array.isArray(r)?(0,pt.of)(r):(0,On.D)(e.compileModuleAsync(r))),(0,ot.U)(r=>{i&&i(n);let s,a,d=!1;return Array.isArray(r)?(a=r,!0):(s=r.create(t).injector,a=s.get(c0,[],{optional:!0,self:!0}).flat()),{routes:a.map(K2),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(JM(()=>{this.childrenLoaders.delete(i)})),a=new K3(s,()=>new zt.x).pipe(M2());return this.childrenLoaders.set(i,a),a}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UW(n){return function Tte(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let pO=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new zt.x,this.transitionAbortSubject=new zt.x,this.configLoader=(0,u.f3M)(X2),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(nS),this.rootContexts=(0,u.f3M)(lS),this.inputBindingEnabled=null!==(0,u.f3M)(cO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,pt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new _ee(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new gee(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new zl.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oS,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pn(s=>0!==s.id),(0,ot.U)(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),(0,jn.w)(s=>{this.currentTransition=s;let a=!1,d=!1;return(0,pt.of)(s).pipe((0,$r.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,jn.w)(f=>{const m=f.currentBrowserUrl.toString(),b=!t.navigated||f.extractedUrl.toString()!==m||m!==f.currentUrlTree.toString();if(!b&&"reload"!==(f.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new n0(f.id,this.urlSerializer.serialize(f.rawUrl),D,0)),f.resolve(null),Ar.E}if(t.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return(0,pt.of)(f).pipe((0,jn.w)(D=>{const O=this.transitions?.getValue();return this.events.next(new oO(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),O!==this.transitions?.getValue()?Ar.E:Promise.resolve(D)}),function yte(n,e,t,i,r,s){return(0,co.z)(a=>function pte(n,e,t,i,r,s,a="emptyOnly"){return new mte(n,e,t,i,r,a,s).recognize()}(n,e,t,i,a.extractedUrl,r,s).pipe((0,ot.U)(({state:d,tree:f})=>({...a,targetSnapshot:d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,$r.b)(D=>{s.targetSnapshot=D.targetSnapshot,s.urlAfterRedirects=D.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects};const O=new mW(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(O)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){const{id:D,extractedUrl:O,source:V,restoredState:W,extras:re}=f,Me=new oO(D,this.urlSerializer.serialize(O),V,W);this.events.next(Me);const ze=vW(0,this.rootComponentType).snapshot;return this.currentTransition=s={...f,targetSnapshot:ze,urlAfterRedirects:O,extras:{...re,skipLocationChange:!1,replaceUrl:!1}},(0,pt.of)(s)}{const D="";return this.events.next(new n0(f.id,this.urlSerializer.serialize(f.extractedUrl),D,1)),f.resolve(null),Ar.E}}),(0,$r.b)(f=>{const m=new hee(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),(0,ot.U)(f=>(this.currentTransition=s={...f,guards:Lee(f.targetSnapshot,f.currentSnapshot,this.rootContexts)},s)),function Kee(n,e){return(0,co.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?(0,pt.of)({...t,guardsResult:!0}):function Yee(n,e,t,i){return(0,On.D)(n).pipe((0,co.z)(r=>function tte(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,pt.of)(!0);const a=s.map(d=>{const f=uS(e)??r,m=o0(d,f);return Sm(function $ee(n){return n&&fS(n.canDeactivate)}(m)?m.canDeactivate(n,e,t,i):f.runInContext(()=>m(n,e,t,i))).pipe(yo())});return(0,pt.of)(a).pipe(a0())}(r.component,r.route,t,e,i)),yo(r=>!0!==r,!0))}(a,i,r,n).pipe((0,co.z)(d=>d&&function Hee(n){return"boolean"==typeof n}(d)?function Zee(n,e,t,i){return(0,On.D)(e).pipe(Jw(r=>hh(function Xee(n,e){return null!==n&&e&&e(new yee(n)),(0,pt.of)(!0)}(r.route.parent,i),function Qee(n,e){return null!==n&&e&&e(new bee(n)),(0,pt.of)(!0)}(r.route,i),function ete(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function Uee(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>JT(()=>{const d=a.guards.map(f=>{const m=uS(a.node)??t,b=o0(f,m);return Sm(function Gee(n){return n&&fS(n.canActivateChild)}(b)?b.canActivateChild(i,n):m.runInContext(()=>b(i,n))).pipe(yo())});return(0,pt.of)(d).pipe(a0())}));return(0,pt.of)(s).pipe(a0())}(n,r.path,t),function Jee(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return(0,pt.of)(!0);const r=i.map(s=>JT(()=>{const a=uS(e)??t,d=o0(s,a);return Sm(function zee(n){return n&&fS(n.canActivate)}(d)?d.canActivate(e,n):a.runInContext(()=>d(e,n))).pipe(yo())}));return(0,pt.of)(r).pipe(a0())}(n,r.route,t))),yo(r=>!0!==r,!0))}(i,s,n,e):(0,pt.of)(d)),(0,ot.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,f=>this.events.next(f)),(0,$r.b)(f=>{if(s.guardsResult=f.guardsResult,Sy(f.guardsResult))throw CW(0,f.guardsResult);const m=new fee(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(m)}),Pn(f=>!!f.guardsResult||(this.cancelNavigationTransition(f,"",3),!1)),Q2(f=>{if(f.guards.canActivateChecks.length)return(0,pt.of)(f).pipe((0,$r.b)(m=>{const b=new pee(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(b)}),(0,jn.w)(m=>{let b=!1;return(0,pt.of)(m).pipe(function vte(n,e){return(0,co.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return(0,pt.of)(t);let s=0;return(0,On.D)(r).pipe(Jw(a=>function bte(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!LW(r)&&(s[eS]=r.title),function wte(n,e,t,i){const r=function Ete(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return(0,pt.of)({});const s={};return(0,On.D)(r).pipe((0,co.z)(a=>function Ite(n,e,t,i){const r=uS(e)??i,s=o0(n,r);return Sm(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[a],e,t,i).pipe(yo(),(0,$r.b)(d=>{s[a]=d}))),O2(1),Y3(s),Tm(a=>AW(a)?Ar.E:Xw(a)))}(s,n,e,i).pipe((0,ot.U)(a=>(n._resolvedData=a,n.data=bW(n,t).resolve,r&&LW(r)&&(n.data[eS]=r.title),null)))}(a.route,i,n,e)),(0,$r.b)(()=>s++),O2(1),(0,co.z)(a=>s===r.length?(0,pt.of)(t):Ar.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,$r.b)({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(m,"",2)}}))}),(0,$r.b)(m=>{const b=new mee(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(b)}))}),Q2(f=>{const m=b=>{const I=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,$r.b)(D=>{b.component=D}),(0,ot.U)(()=>{})));for(const D of b.children)I.push(...m(D));return I};return XM(m(f.targetSnapshot.root)).pipe(Xs(),Nn(1))}),Q2(()=>this.afterPreactivation()),(0,ot.U)(f=>{const m=function See(n,e,t){const i=cS(n,e._root,t?t._root:void 0);return new yW(i,e)}(t.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=s={...f,targetRouterState:m},s}),(0,$r.b)(()=>{this.events.next(new V2)}),((n,e,t,i)=>(0,ot.U)(r=>(new Fee(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),Nn(1),(0,$r.b)({next:f=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),t.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{a=!0}}),Hs(this.transitionAbortSubject.pipe((0,$r.b)(f=>{throw f}))),JM(()=>{a||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Tm(f=>{if(d=!0,SW(f))this.events.next(new aS(s.id,this.urlSerializer.serialize(s.extractedUrl),f.message,f.cancellationCode)),function Aee(n){return SW(n)&&Sy(n.url)}(f)?this.events.next(new B2(f.url)):s.resolve(!1);else{this.events.next(new aO(s.id,this.urlSerializer.serialize(s.extractedUrl),f,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(f))}catch(m){s.reject(m)}}return Ar.E}))}))}cancelNavigationTransition(t,i,r){const s=new aS(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VW(n){return n!==oS}let BW=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ln);return i}getResolvedTitleForRoute(t){return t.data[eS]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Ste)},providedIn:"root"})}return n})(),Ste=(()=>{class n extends BW{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Ne))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xte=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Ate)},providedIn:"root"})}return n})();class Dte{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Ate=(()=>{class n extends Dte{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=u.n5z(n)))(r||n)}}();static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const mO=new u.OlP("",{providedIn:"root",factory:()=>({})});let Rte=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(kte)},providedIn:"root"})}return n})(),kte=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pS=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(pS||{});function HW(n,e){n.events.pipe(Pn(t=>t instanceof xm||t instanceof aS||t instanceof aO||t instanceof n0),(0,ot.U)(t=>t instanceof xm||t instanceof n0?pS.COMPLETE:t instanceof aS&&(0===t.code||1===t.code)?pS.REDIRECTING:pS.FAILED),Pn(t=>t!==pS.REDIRECTING),Nn(1)).subscribe(()=>{e()})}function Mte(n){throw n}function Ote(n,e,t){return e.parse("/")}const Pte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pa=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this._events=new zt.x,this.options=(0,u.f3M)(mO,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||Mte,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ote,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(Rte),this.routeReuseStrategy=(0,u.f3M)(xte),this.titleStrategy=(0,u.f3M)(BW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(c0,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(pO),this.urlSerializer=(0,u.f3M)(nS),this.location=(0,u.f3M)(Je),this.componentInputBindingEnabled=!!(0,u.f3M)(cO,{optional:!0}),this.eventsSubscription=new Hc.w0,this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new t0,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vW(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(jW(i)&&this._events.next(i));if(i instanceof oO)VW(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof n0)this.rawUrlTree=r.rawUrl;else if(i instanceof mW){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof V2)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof aS)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof B2){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),a={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||VW(r.source)};this.scheduleNavigation(s,oS,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof aO&&this.restoreHistory(r,!0),i instanceof xm&&(this.navigated=!0),jW(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),oS,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){const f={...r};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const d=this.parseUrl(t);this.scheduleNavigation(d,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(K2),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:d,preserveFragment:f}=i,m=f?this.currentUrlTree.fragment:a;let I,b=null;switch(d){case"merge":b={...this.currentUrlTree.queryParams,...s};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=s||null}null!==b&&(b=this.removeEmptyProps(b));try{I=lW(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),I=this.currentUrlTree.root}return cW(I,t,b,m??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Sy(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,oS,null,i)}navigate(t,i={skipLocationChange:!1}){return function Fte(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...Pte}:!1===i?{...Nte}:i,Sy(t))return J3(this.currentUrlTree,t,r);const s=this.parseUrl(t);return J3(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,a){if(this.disposed)return Promise.resolve(!1);let d,f,m;a?(d=a.resolve,f=a.reject,m=a.promise):m=new Promise((I,D)=>{d=I,f=D});const b=this.pendingTasks.add();return HW(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:d,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(I=>Promise.reject(I))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",a)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jW(n){return!(n instanceof V2||n instanceof B2)}let xy=(()=>{class n{constructor(t,i,r,s,a,d){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=a,this.locationStrategy=d,this.href=null,this.commands=null,this.onChanges=new zt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const f=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===f||"area"===f,this.isAnchorElement?this.subscription=t.events.subscribe(m=>{m instanceof xm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(pa),u.Y36(s0),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Be))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&i&&u.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]})}return n})();class zW{}let Vte=(()=>{class n{constructor(t,i,r,s,a){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Pn(t=>t instanceof xm),Jw(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,u.MMx)(s.providers,t,`Route: ${s.path}`));const a=s._injector??t,d=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,On.D)(r).pipe((0,Ou.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):(0,pt.of)(null);const s=r.pipe((0,co.z)(a=>null===a?(0,pt.of)(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){const a=this.loader.loadComponent(i);return(0,On.D)([s,a]).pipe((0,Ou.J)())}return s})}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(pa),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(zW),u.LFG(X2))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const J2=new u.OlP("");let GW=(()=>{class n{constructor(t,i,r,s,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oO?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xm?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof n0&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gW&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gW(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){u.$Z()};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function ef(n,e){return{\u0275kind:n,\u0275providers:e}}function WW(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const i=n.get(pa),r=n.get(qW);1===n.get(eU)&&i.initialNavigation(),n.get(KW,null,u.XFs.Optional)?.setUpPreloading(),n.get(J2,null,u.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const qW=new u.OlP("",{factory:()=>new zt.x}),eU=new u.OlP("",{providedIn:"root",factory:()=>1}),KW=new u.OlP("");function zte(n){return ef(0,[{provide:KW,useExisting:Vte},{provide:zW,useExisting:n}])}const YW=new u.OlP("ROUTER_FORROOT_GUARD"),$te=[Je,{provide:nS,useClass:P2},pa,lS,{provide:s0,useFactory:function $W(n){return n.routerState.root},deps:[pa]},X2,[]];function Wte(){return new u.PXZ("Router",pa)}let ZW=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[$te,[],{provide:c0,multi:!0,useValue:t},{provide:YW,useFactory:Zte,deps:[[pa,new u.FiY,new u.tp0]]},{provide:mO,useValue:i||{}},i?.useHash?{provide:Be,useClass:Fe}:{provide:Be,useClass:Xe},{provide:J2,useFactory:()=>{const n=(0,u.f3M)(Fr),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(mO),i=(0,u.f3M)(pO),r=(0,u.f3M)(nS);return t.scrollOffset&&n.setOffset(t.scrollOffset),new GW(r,i,n,e,t)}},i?.preloadingStrategy?zte(i.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:Wte},i?.initialNavigation?Qte(i):[],i?.bindToComponentInputs?ef(8,[IW,{provide:cO,useExisting:IW}]).\u0275providers:[],[{provide:QW,useFactory:WW},{provide:u.tb,multi:!0,useExisting:QW}]]}}static forChild(t){return{ngModule:n,providers:[{provide:c0,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(YW,8))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function Zte(n){return"guarded"}function Qte(n){return["disabled"===n.initialNavigation?ef(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(pa);return()=>{e.setUpLocationChangeListener()}}},{provide:eU,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ef(2,[{provide:eU,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(Ae,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(pa),s=e.get(qW);HW(r,()=>{i(!0)}),e.get(pO).afterPreactivation=()=>(i(!0),s.closed?(0,pt.of)(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const QW=new u.OlP("");var tU=U(7582);const Jte=function t4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},n4=new A.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gO=new Ni.Yd("@firebase/auth");function _O(n,...e){gO.logLevel<=Ni.in.ERROR&&gO.error(`Auth (${Wt.SDK_VERSION}): ${n}`,...e)}function ma(n,...e){throw nU(n,...e)}function vd(n,...e){return nU(n,...e)}function nU(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return n4.create(n,...e)}function at(n,e,...t){if(!n)throw nU(e,...t)}function bd(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _O(e),new Error(e)}function Dm(n,e){n||bd(e)}function r4(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class gS{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dm(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,A.uI)()||(0,A.b$)()}get(){return function tne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function iU(){return"http:"===r4()||"https:"===r4()}()||(0,A.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class s4{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void bd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void bd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void bd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ine={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},rne=new gS(3e4,6e4);function lr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function vr(n,e,t,i){return sU.apply(this,arguments)}function sU(){return sU=(0,ee.Z)(function*(n,e,t,i,r={}){return o4(n,r,(0,ee.Z)(function*(){let s={},a={};i&&("GET"===e?a=i:s={body:JSON.stringify(i)});const d=(0,A.xO)(Object.assign({key:n.config.apiKey},a)).slice(1),f=yield n._getAdditionalHeaders();return f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode),s4.fetch()(a4(n,n.config.apiHost,t,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},s))}))}),sU.apply(this,arguments)}function o4(n,e,t){return oU.apply(this,arguments)}function oU(){return oU=(0,ee.Z)(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},ine),e);try{const r=new sne(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const a=yield s.json();if("needConfirmation"in a)throw _S(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const d=s.ok?a.errorMessage:a.error.message,[f,m]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===f)throw _S(n,"credential-already-in-use",a);if("EMAIL_EXISTS"===f)throw _S(n,"email-already-in-use",a);if("USER_DISABLED"===f)throw _S(n,"user-disabled",a);const b=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw function i4(n,e,t){const i=Object.assign(Object.assign({},Jte()),{[e]:t});return new A.LL("auth","Firebase",i).create(e,{appName:n.name})}(n,b,m);ma(n,b)}}catch(r){if(r instanceof A.ZR)throw r;ma(n,"network-request-failed",{message:String(r)})}}),oU.apply(this,arguments)}function aU(){return aU=(0,ee.Z)(function*(n,e,t,i,r={}){const s=yield vr(n,e,t,i,r);return"mfaPendingCredential"in s&&ma(n,"multi-factor-auth-required",{_serverResponse:s}),s}),aU.apply(this,arguments)}function a4(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?function rU(n,e){Dm(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,r):`${n.config.apiScheme}://${r}`}class sne{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vd(this.auth,"network-request-failed")),rne.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _S(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=vd(n,e,i);return r.customData._tokenResponse=t,r}function uU(){return uU=(0,ee.Z)(function*(n,e){return vr(n,"POST","/v1/accounts:delete",e)}),uU.apply(this,arguments)}function hU(){return hU=(0,ee.Z)(function*(n,e){return vr(n,"POST","/v1/accounts:lookup",e)}),hU.apply(this,arguments)}function yS(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function fU(){return fU=(0,ee.Z)(function*(n,e=!1){const t=(0,A.m9)(n),i=yield t.getIdToken(e),r=yO(i);at(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:yS(pU(r.auth_time)),issuedAtTime:yS(pU(r.iat)),expirationTime:yS(pU(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}),fU.apply(this,arguments)}function pU(n){return 1e3*Number(n)}function yO(n){const[e,t,i]=n.split(".");if(void 0===e||void 0===t||void 0===i)return _O("JWT malformed, contained fewer than 3 sections"),null;try{const r=(0,A.tV)(t);return r?JSON.parse(r):(_O("Failed to decode base64 JWT payload"),null)}catch(r){return _O("Caught error parsing JWT payload as JSON",r?.toString()),null}}function nf(n,e){return mU.apply(this,arguments)}function mU(){return mU=(0,ee.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof A.ZR&&function hne({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}}),mU.apply(this,arguments)}class fne{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout((0,ee.Z)(function*(){yield t.iteration()}),i)}iteration(){var e=this;return(0,ee.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class c4{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yS(this.lastLoginAt),this.creationTime=yS(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vS(n){return gU.apply(this,arguments)}function gU(){return gU=(0,ee.Z)(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield nf(n,function cne(n,e){return hU.apply(this,arguments)}(t,{idToken:i}));at(r?.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function gne(n){return n.map(e=>{var{providerId:t}=e,i=(0,tU._T)(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}(s.providerUserInfo):[],d=function mne(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}(n.providerData,a),b=!!n.isAnonymous&&!(n.email&&s.passwordHash||d?.length),I={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:d,metadata:new c4(s.createdAt,s.lastLoginAt),isAnonymous:b};Object.assign(n,I)}),gU.apply(this,arguments)}function _U(){return _U=(0,ee.Z)(function*(n){const e=(0,A.m9)(n);yield vS(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),_U.apply(this,arguments)}function yU(){return yU=(0,ee.Z)(function*(n,e){const t=yield o4(n,{},(0,ee.Z)(function*(){const i=(0,A.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=a4(n,r,"/v1/token",`key=${s}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",s4.fetch()(a,{method:"POST",headers:d,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),yU.apply(this,arguments)}class bS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function dne(n){const e=yO(n);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return(0,ee.Z)(function*(){return at(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return(0,ee.Z)(function*(){const{accessToken:r,refreshToken:s,expiresIn:a}=yield function _ne(n,e){return yU.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,s,Number(a))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,a=new bS;return i&&(at("string"==typeof i,"internal-error",{appName:e}),a.refreshToken=i),r&&(at("string"==typeof r,"internal-error",{appName:e}),a.accessToken=r),s&&(at("number"==typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bS,this.toJSON())}_performRefresh(){return bd("not implemented")}}function Am(n,e){at("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Dy{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=(0,tU._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fne(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new c4(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,ee.Z)(function*(){const i=yield nf(t,t.stsTokenManager.getToken(t.auth,e));return at(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function une(n){return fU.apply(this,arguments)}(this,e)}reload(){return function pne(n){return _U.apply(this,arguments)}(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dy(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return(0,ee.Z)(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield vS(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return(0,ee.Z)(function*(){const t=yield e.getIdToken();return yield nf(e,function ane(n,e){return uU.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,a,d,f,m,b;const I=null!==(i=t.displayName)&&void 0!==i?i:void 0,D=null!==(r=t.email)&&void 0!==r?r:void 0,O=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,V=null!==(a=t.photoURL)&&void 0!==a?a:void 0,W=null!==(d=t.tenantId)&&void 0!==d?d:void 0,re=null!==(f=t._redirectEventId)&&void 0!==f?f:void 0,Me=null!==(m=t.createdAt)&&void 0!==m?m:void 0,ze=null!==(b=t.lastLoginAt)&&void 0!==b?b:void 0,{uid:je,emailVerified:Ye,isAnonymous:xt,providerData:Ot,stsTokenManager:pn}=t;at(je&&pn,e,"internal-error");const zi=bS.fromJSON(this.name,pn);at("string"==typeof je,e,"internal-error"),Am(I,e.name),Am(D,e.name),at("boolean"==typeof Ye,e,"internal-error"),at("boolean"==typeof xt,e,"internal-error"),Am(O,e.name),Am(V,e.name),Am(W,e.name),Am(re,e.name),Am(Me,e.name),Am(ze,e.name);const cs=new Dy({uid:je,auth:e,email:D,emailVerified:Ye,displayName:I,isAnonymous:xt,photoURL:V,phoneNumber:O,tenantId:W,stsTokenManager:zi,createdAt:Me,lastLoginAt:ze});return Ot&&Array.isArray(Ot)&&(cs.providerData=Ot.map(qc=>Object.assign({},qc))),re&&(cs._redirectEventId=re),cs}static _fromIdTokenResponse(e,t,i=!1){return(0,ee.Z)(function*(){const r=new bS;r.updateFromServerResponse(t);const s=new Dy({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield vS(s),s})()}}const u4=new Map;function rf(n){Dm(n instanceof Function,"Expected a class definition");let e=u4.get(n);return e?(Dm(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,u4.set(n,e),e)}const d4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,ee.Z)(function*(){return!0})()}_set(t,i){var r=this;return(0,ee.Z)(function*(){r.storage[t]=i})()}_get(t){var i=this;return(0,ee.Z)(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return(0,ee.Z)(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function vO(n,e,t){return`firebase:${n}:${e}:${t}`}class d0{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=vO(this.userKey,r.apiKey,s),this.fullPersistenceKey=vO("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,ee.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Dy._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,ee.Z)(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return(0,ee.Z)(function*(){if(!t.length)return new d0(rf(d4),e,i);const r=(yield Promise.all(t.map(function(){var m=(0,ee.Z)(function*(b){if(yield b._isAvailable())return b});return function(b){return m.apply(this,arguments)}}()))).filter(m=>m);let s=r[0]||rf(d4);const a=vO(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const b=yield m._get(a);if(b){const I=Dy._fromJSON(e,b);m!==s&&(d=I),s=m;break}}catch{}const f=r.filter(m=>m._shouldAllowMigration);return s._shouldAllowMigration&&f.length?(s=f[0],d&&(yield s._set(a,d.toJSON())),yield Promise.all(t.map(function(){var m=(0,ee.Z)(function*(b){if(b!==s)try{yield b._remove(a)}catch{}});return function(b){return m.apply(this,arguments)}}())),new d0(s,e,i)):new d0(s,e,i)})()}}function h4(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function m4(n=(0,A.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function f4(n=(0,A.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function _4(n=(0,A.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function y4(n=(0,A.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function vU(n=(0,A.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function p4(n=(0,A.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function g4(n=(0,A.z$)()){return/android/i.test(n)}(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===i?.length)return i[1]}return"Other"}function v4(n,e=[]){let t;switch(n){case"Browser":t=h4((0,A.z$)());break;case"Worker":t=`${h4((0,A.z$)())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wt.SDK_VERSION}/${i}`}class bne{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((a,d)=>{try{a(e(s))}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,ee.Z)(function*(){if(t.auth.currentUser===e)return;const i=[];try{for(const r of t.queue)yield r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})()}}function bU(){return bU=(0,ee.Z)(function*(n,e={}){return vr(n,"GET","/v2/passwordPolicy",lr(n,e))}),bU.apply(this,arguments)}class Ine{constructor(e){var t,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(i=e.allowedNonAlphanumericCharacters)||void 0===i?void 0:i.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,a,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=null===(t=f.meetsMinPasswordLength)||void 0===t||t),f.isValid&&(f.isValid=null===(i=f.meetsMaxPasswordLength)||void 0===i||i),f.isValid&&(f.isValid=null===(r=f.containsLowercaseLetter)||void 0===r||r),f.isValid&&(f.isValid=null===(s=f.containsUppercaseLetter)||void 0===s||s),f.isValid&&(f.isValid=null===(a=f.containsNumericCharacter)||void 0===a||a),f.isValid&&(f.isValid=null===(d=f.containsNonAlphanumericCharacter)||void 0===d||d),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let i;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Cne{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b4(this),this.idTokenSubscription=new b4(this),this.beforeStateQueue=new bne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=rf(t)),this._initializationPromise=this.queue((0,ee.Z)(function*(){var r,s;if(!i._deleted&&(i.persistenceManager=yield d0.create(i,e),!i._deleted)){if(null!==(r=i._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch{}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(s=i.currentUser)||void 0===s?void 0:s.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,ee.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,ee.Z)(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,f=s?._redirectEventId,m=yield t.tryRedirectSignIn(e);(!d||d===f)&&m?.user&&(s=m.user,a=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{yield t.beforeStateQueue.runMiddleware(s)}catch(d){s=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return at(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,ee.Z)(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,ee.Z)(function*(){try{yield vS(e)}catch(i){if("auth/network-request-failed"!==i?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function nne(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,ee.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,ee.Z)(function*(){const i=e?(0,A.m9)(e):null;return i&&at(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return(0,ee.Z)(function*(){if(!i._deleted)return e&&at(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue((0,ee.Z)(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,ee.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,ee.Z)(function*(){yield t.assertedPersistence.setPersistence(rf(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,ee.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const i=t._getPasswordPolicyInternal();return i.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,ee.Z)(function*(){const t=yield function wne(n){return bU.apply(this,arguments)}(e),i=new Ine(t);null===e.tenantId?e._projectPasswordPolicy=i:e._tenantPasswordPolicies[e.tenantId]=i})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new A.LL("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return(0,ee.Z)(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,ee.Z)(function*(){if(!t.redirectPersistenceManager){const i=e&&rf(e)||t._popupRedirectResolver;at(i,t,"argument-error"),t.redirectPersistenceManager=yield d0.create(t,[rf(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,ee.Z)(function*(){var i,r;return t._isInitialized&&(yield t.queue((0,ee.Z)(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,ee.Z)(function*(){if(e===t.currentUser)return t.queue((0,ee.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let a=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(d,this,"internal-error"),d.then(()=>{a||s(this.currentUser)}),"function"==typeof t){const f=e.addObserver(t,i,r);return()=>{a=!0,f()}}{const f=e.addObserver(t);return()=>{a=!0,f()}}}directlySetCurrentUser(e){var t=this;return(0,ee.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,ee.Z)(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();r&&(i["X-Firebase-Client"]=r);const s=yield e._getAppCheckToken();return s&&(i["X-Firebase-AppCheck"]=s),i})()}_getAppCheckToken(){var e=this;return(0,ee.Z)(function*(){var t;const i=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return i?.error&&function ene(n,...e){gO.logLevel<=Ni.in.WARN&&gO.warn(`Auth (${Wt.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${i.error}`),i?.token})()}}class b4{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,A.ne)(t=>this.observer=t)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Nne{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bd("not implemented")}_getIdTokenResponse(e){return bd("not implemented")}_linkToIdToken(e,t){return bd("not implemented")}_getReauthenticationResolver(e){return bd("not implemented")}}function sf(n,e){return VU.apply(this,arguments)}function VU(){return VU=(0,ee.Z)(function*(n,e){return function tf(n,e,t,i){return aU.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",lr(n,e))}),VU.apply(this,arguments)}class h0 extends Nne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new h0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ma("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=(0,tU._T)(t,["providerId","signInMethod"]);if(!i||!r)return null;const a=new h0(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return sf(e,this.buildRequest())}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,sf(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sf(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,A.xO)(t)}return e}}class km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class D4 extends km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Yne=(()=>{class n extends D4{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return h0._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();(function w4(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new gS(3e4,6e4),new gS(2e3,1e4),new gS(3e4,6e4),new gS(5e3,15e3),encodeURIComponent("fac");var X4="@firebase/auth";class Ere{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,ee.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,A.Pz)("authIdTokenMaxAge"),function Cre(n){(0,Wt._registerComponent)(new gi.wA("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:d}=i.options;at(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:a,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v4(n)},m=new Cne(i,r,s,f);return function kne(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(rf);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),(0,Wt._registerComponent)(new gi.wA("auth-internal",e=>{const t=function os(n){return(0,A.m9)(n)}(e.getProvider("auth").getImmediate());return new Ere(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Wt.registerVersion)(X4,"1.3.0",function Ire(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,Wt.registerVersion)(X4,"1.3.0","esm2017")}("Browser");let Mm=(()=>{class n{constructor(t,i,r,s){this.afs=t,this.afAuth=i,this.router=r,this.ngZone=s,this.afAuth.authState.subscribe(a=>{a?(this.userData=a,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,i){return this.afAuth.signInWithEmailAndPassword(t,i).then(r=>{this.SetUserData(r.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["dashboard"])})}).catch(r=>{window.alert(r.message)})}SignUp(t,i){return this.afAuth.createUserWithEmailAndPassword(t,i).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new Yne).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(i=>{this.router.navigate(["dashboard"]),this.SetUserData(i.user)}).catch(i=>{window.alert(i)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(wG),u.LFG(Ag),u.LFG(pa),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dre=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Mm))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Sign In"),u.qZA(),u.TgZ(5,"div",3),u._UZ(6,"input",4,5),u.qZA(),u.TgZ(8,"div",3),u._UZ(9,"input",6,7),u.qZA(),u.TgZ(11,"div",3)(12,"input",8),u.NdJ("click",function(){u.CHM(s);const d=u.MAs(7),f=u.MAs(10);return u.KtG(r.authService.SignIn(d.value,f.value))}),u.qZA()(),u.TgZ(13,"div",3)(14,"span",9)(15,"span",10),u._uU(16,"Or"),u.qZA()()(),u.TgZ(17,"div",11)(18,"span",12),u._uU(19,"Forgot Password?"),u.qZA()()(),u.TgZ(20,"div",13)(21,"span"),u._uU(22,"Don't have an account?"),u.TgZ(23,"span",14),u._uU(24," Sign Up"),u.qZA()()()()()}},dependencies:[xy]})}return n})(),Are=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Mm))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Sign Up"),u.qZA(),u.TgZ(5,"div",3),u._UZ(6,"input",4,5),u.qZA(),u.TgZ(8,"div",3),u._UZ(9,"input",6,7),u.qZA(),u.TgZ(11,"div",3)(12,"input",8),u.NdJ("click",function(){u.CHM(s);const d=u.MAs(7),f=u.MAs(10);return u.KtG(r.authService.SignUp(d.value,f.value))}),u.qZA()(),u.TgZ(13,"div",3)(14,"span",9)(15,"span",10),u._uU(16,"Or"),u.qZA()()(),u.TgZ(17,"div",11)(18,"span"),u._uU(19,"Already have an account? "),u.TgZ(20,"span",12),u._uU(21,"Log In"),u.qZA()()()()()()}},dependencies:[xy]})}return n})();function cr(n){return null!=n&&"false"!=`${n}`}function dB(n,e=0){return function Rre(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function MO(n){return Array.isArray(n)?n:[n]}function ls(n){return null==n?"":"string"==typeof n?n:`${n}px`}function p0(n){return n instanceof u.SBq?n.nativeElement:n}var Mre=U(4266);const Ore=["addListener","removeListener"],Pre=["addEventListener","removeEventListener"],Nre=["on","off"];function m0(n,e,t,i){if((0,Ur.m)(t)&&(i=t,t=void 0),i)return m0(n,e,t).pipe(k2(i));const[r,s]=function Ure(n){return(0,Ur.m)(n.addEventListener)&&(0,Ur.m)(n.removeEventListener)}(n)?Pre.map(a=>d=>n[a](e,d,t)):function Fre(n){return(0,Ur.m)(n.addListener)&&(0,Ur.m)(n.removeListener)}(n)?Ore.map(t6(n,e)):function Lre(n){return(0,Ur.m)(n.on)&&(0,Ur.m)(n.off)}(n)?Nre.map(t6(n,e)):[];if(!r&&(0,Mre.z)(n))return(0,co.z)(a=>m0(a,e,t))((0,fm.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Yi.y(a=>{const d=(...f)=>a.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function t6(n,e){return t=>i=>n[t](e,i)}var n6=U(1954);const CS={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=CS;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Hc.w0(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=CS;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=CS;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var i6=U(2631);new class Bre extends i6.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Vre extends n6.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=CS.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(CS.cancelAnimationFrame(t),e._scheduled=void 0)}});let hB,jre=1;const OO={};function r6(n){return n in OO&&(delete OO[n],!0)}const zre={setImmediate(n){const e=jre++;return OO[e]=!0,hB||(hB=Promise.resolve()),hB.then(()=>r6(e)&&n()),e},clearImmediate(n){r6(n)}},{setImmediate:Gre,clearImmediate:$re}=zre,PO={setImmediate(...n){const{delegate:e}=PO;return(e?.setImmediate||Gre)(...n)},clearImmediate(n){const{delegate:e}=PO;return(e?.clearImmediate||$re)(n)},delegate:void 0};new class qre extends i6.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Wre extends n6.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=PO.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(PO.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});var Zre=U(671);function s6(n=0,e,t=Yf.P){let i=-1;return null!=e&&((0,Zre.K)(e)?t=e:i=e),new Yi.y(r=>{let s=function Qre(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function o6(n,e=Yf.z){return function Yre(n){return(0,Pi.e)((e,t)=>{let i=!1,r=null,s=null,a=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const m=r;r=null,t.next(m)}a&&t.complete()},f=()=>{s=null,a&&t.complete()};e.subscribe((0,qn.x)(t,m=>{i=!0,r=m,s||(0,fm.Xf)(n(m)).subscribe(s=(0,qn.x)(t,d,f))},()=>{a=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>s6(n,e))}let fB;try{fB=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fB=!1}let TS,ky,pB,ga=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function gf(n){return n===ko}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fB)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NO(n){return function Xre(){if(null==TS&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>TS=!0}))}finally{TS=TS||!1}return TS}()?n:!!n.capture}function Jre(){if(null==ky){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ky=!1,ky;if("scrollBehavior"in document.documentElement.style)ky=!0;else{const n=Element.prototype.scrollTo;ky=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ky}function mB(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function af(n){return n.composedPath?n.composedPath()[0]:n.target}function gB(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const nse=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function ise(){return(0,u.f3M)(ce)}}),rse=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let My=(()=>{class n{constructor(t){this.value="ltr",this.change=new u.vpe,t&&(this.value=function sse(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?rse.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(nse,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SS=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),ase=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new zt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Yi.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(o6(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,pt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Pn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=p0(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>m0(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.R0b),u.LFG(ga),u.LFG(ce,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_B=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new zt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(o6(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ga),u.LFG(u.R0b),u.LFG(ce,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yB=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),l6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[SS,yB,SS,yB]})}return n})();class vB{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class bB extends vB{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class wB extends vB{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class cse extends vB{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class EB{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof bB?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof wB?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof cse?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class use extends EB{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{const d=a.element,f=this._document.createComment("dom-portal");d.parentNode.insertBefore(f,d),this.outletElement.appendChild(d),this._attachedPortal=a,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let IB=(()=>{class n extends EB{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const a=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(d,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(a,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(ce))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]})}return n})(),LO=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const c6=Jre();class dse{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ls(-this._previousScrollPosition.left),e.style.top=ls(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),c6&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),c6&&(i.scrollBehavior=s,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class hse{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Pn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class u6{enable(){}disable(){}attach(){}}function CB(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function d6(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class fse{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();CB(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let pse=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new u6,this.close=a=>new hse(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new dse(this._viewportRuler,this._document),this.reposition=a=>new fse(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ase),u.LFG(_B),u.LFG(u.R0b),u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class TB{constructor(e){if(this.scrollStrategy=new u6,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class mse{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let h6=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gse=(()=>{class n extends h6{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const d=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce),u.LFG(u.R0b,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_se=(()=>{class n extends h6{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=af(s)},this._clickListener=s=>{const a=af(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let m=f.length-1;m>-1;m--){const b=f[m];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(a)||b.overlayElement.contains(d))break;const I=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>I.next(s)):I.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce),u.LFG(ga),u.LFG(u.R0b,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UO=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||gB()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),gB()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce),u.LFG(ga))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class xS{constructor(e,t,i,r,s,a,d,f,m,b=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=a,this._document=d,this._location=f,this._outsideClickDispatcher=m,this._animationsDisabled=b,this._backdropElement=null,this._backdropClick=new zt.x,this._attachments=new zt.x,this._detachments=new zt.x,this._locationChanges=Hc.w0.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new zt.x,this._outsidePointerEvents=new zt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Nn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ls(this._config.width),e.height=ls(this._config.height),e.minWidth=ls(this._config.minWidth),e.minHeight=ls(this._config.minHeight),e.maxWidth=ls(this._config.maxWidth),e.maxHeight=ls(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=MO(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Hs((0,Zi.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const f6="cdk-overlay-connected-position-bounding-box",yse=/([A-Za-z%]+)$/;class vse{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new zt.x,this._resizeSubscription=Hc.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(f6),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let a;for(let d of this._preferredPositions){let f=this._getOriginPoint(e,r,d),m=this._getOverlayPoint(f,t,d),b=this._getOverlayFit(m,t,i,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(b,m,i)?s.push({position:d,origin:f,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!a||a.overlayFit.visibleArea<b.visibleArea)&&(a={overlayFit:b,overlayPoint:m,originPoint:f,position:d,overlayRect:t})}if(s.length){let d=null,f=-1;for(const m of s){const b=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);b>f&&(f=b,d=m)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Oy(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(f6),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==i.originX?a:d}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=m6(t);let{x:a,y:d}=e,f=this._getOffset(r,"x"),m=this._getOffset(r,"y");f&&(a+=f),m&&(d+=m);let D=0-d,O=d+s.height-i.height,V=this._subtractOverflows(s.width,0-a,a+s.width-i.width),W=this._subtractOverflows(s.height,D,O),re=V*W;return{visibleArea:re,isCompletelyWithinViewport:s.width*s.height===re,fitsInViewportVertically:W===s.height,fitsInViewportHorizontally:V==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,a=p6(this._overlayRef.getConfig().minHeight),d=p6(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=a&&a<=r)&&(e.fitsInViewportHorizontally||null!=d&&d<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=m6(t),s=this._viewportRect,a=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),f=Math.max(s.top-i.top-e.y,0),m=Math.max(s.left-i.left-e.x,0);let b=0,I=0;return b=r.width<=s.width?m||-a:e.x<this._viewportMargin?s.left-i.left-e.x:0,I=r.height<=s.height?f||-d:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:b,y:I},{x:e.x+b,y:e.y+I}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new mse(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,a,d,b,I,D;if("top"===t.overlayY)a=e.y,s=i.height-a+this._viewportMargin;else if("bottom"===t.overlayY)d=i.height-e.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const O=Math.min(i.bottom-e.y+i.top,e.y),V=this._lastBoundingBoxSize.height;s=2*O,a=e.y-O,s>V&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-V/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)D=i.width-e.x+this._viewportMargin,b=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)I=e.x,b=i.right-e.x;else{const O=Math.min(i.right-e.x+i.left,e.x),V=this._lastBoundingBoxSize.width;b=2*O,I=e.x-O,b>V&&!this._isInitialRender&&!this._growAfterOpen&&(I=e.x-V/2)}return{top:a,left:I,bottom:d,right:D,width:b,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=ls(i.height),r.top=ls(i.top),r.bottom=ls(i.bottom),r.width=ls(i.width),r.left=ls(i.left),r.right=ls(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ls(s)),a&&(r.maxWidth=ls(a))}this._lastBoundingBoxSize=i,Oy(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Oy(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Oy(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();Oy(i,this._getExactOverlayY(t,e,b)),Oy(i,this._getExactOverlayX(t,e,b))}else i.position="static";let d="",f=this._getOffset(t,"x"),m=this._getOffset(t,"y");f&&(d+=`translateX(${f}px) `),m&&(d+=`translateY(${m}px)`),i.transform=d.trim(),a.maxHeight&&(r?i.maxHeight=ls(a.maxHeight):s&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=ls(a.maxWidth):s&&(i.maxWidth="")),Oy(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ls(s.y),r}_getExactOverlayX(e,t,i){let a,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),a=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===a?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ls(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:d6(e,i),isOriginOutsideView:CB(e,i),isOverlayClipped:d6(t,i),isOverlayOutsideView:CB(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&MO(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Oy(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function p6(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(yse);return t&&"px"!==t?null:parseFloat(e)}return n||null}function m6(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const g6="cdk-global-overlay-wrapper";class bse{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(g6),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:a,maxHeight:d}=i,f=!("100%"!==r&&"100vw"!==r||a&&"100%"!==a&&"100vw"!==a),m=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),b=this._xPosition,I=this._xOffset,D="rtl"===this._overlayRef.getConfig().direction;let O="",V="",W="";f?W="flex-start":"center"===b?(W="center",D?V=I:O=I):D?"left"===b||"end"===b?(W="flex-end",O=I):("right"===b||"start"===b)&&(W="flex-start",V=I):"left"===b||"start"===b?(W="flex-start",O=I):("right"===b||"end"===b)&&(W="flex-end",V=I),e.position=this._cssPosition,e.marginLeft=f?"0":O,e.marginTop=m?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=f?"0":V,t.justifyContent=W,t.alignItems=m?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(g6),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let wse=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new bse}flexibleConnectedTo(t){return new vse(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(_B),u.LFG(ce),u.LFG(ga),u.LFG(UO))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ese=0,Om=(()=>{class n{constructor(t,i,r,s,a,d,f,m,b,I,D,O){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=d,this._ngZone=f,this._document=m,this._directionality=b,this._location=I,this._outsideClickDispatcher=D,this._animationsModuleType=O}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),a=new TB(t);return a.direction=a.direction||this._directionality.value,new xS(s,i,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Ese++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new use(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(pse),u.LFG(UO),u.LFG(u._Vd),u.LFG(wse),u.LFG(gse),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(ce),u.LFG(My),u.LFG(Je),u.LFG(_se),u.LFG(u.QbO,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Tse={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Om],useFactory:function Cse(n){return()=>n.scrollStrategies.reposition()}};let SB=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[Om,Tse],imports:[SS,LO,l6,l6]})}return n})();function lf(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function v6(n){return Pn((e,t)=>n<=t)}let jse=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[jse]})}return n})();const w6=new Set;let Py,zse=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):$se}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Gse(n,e){if(!w6.has(n))try{Py||(Py=document.createElement("style"),e&&(Py.nonce=e),Py.setAttribute("type","text/css"),document.head.appendChild(Py)),Py.sheet&&(Py.sheet.insertRule(`@media ${n} {body{ }}`,0),w6.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ga),u.LFG(u.Ojb,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $se(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Wse=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new zt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return E6(MO(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=XM(E6(MO(t)).map(a=>this._registerQuery(a).observable));return s=hh(s.pipe(Nn(1)),s.pipe(v6(1),Sv(0))),s.pipe((0,ot.U)(a=>{const d={matches:!1,breakpoints:{}};return a.forEach(({matches:f,query:m})=>{d.matches=d.matches||f,d.breakpoints[m]=f}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new Yi.y(a=>{const d=f=>this._zone.run(()=>a.next(f));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(Es(i),(0,ot.U)(({matches:a})=>({query:t,matches:a})),Hs(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(zse),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E6(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function C6(n,e,t){const i=T6(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))}function RB(n,e,t){const r=T6(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}function T6(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}class S6{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new zt.x,this._typeaheadSubscription=Hc.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new zt.x,this.change=new zt.x,e instanceof u.n_E&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,$r.b)(t=>this._pressedLetters.push(t)),Sv(e),Pn(()=>this._pressedLetters.length>0),(0,ot.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,a=i[s];if(!this._skipPredicateFn(a)&&0===a.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(s<a?s:a-1,-1);break}return;default:return void((r||lf(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}class Yse extends S6{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class Zse extends S6{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let HO=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Xse(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Qse(n){try{return n.frameElement}catch{return null}}(function ooe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===D6(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=D6(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function roe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function soe(n){return!function eoe(n){return function noe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Jse(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function toe(n){return function ioe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||x6(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ga))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x6(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function D6(n){if(!x6(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class aoe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Nn(1)).subscribe(e)}}let kB=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new aoe(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(HO),u.LFG(u.R0b),u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A6(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function R6(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const loe=new u.OlP("cdk-input-modality-detector-options"),coe={ignoreKeys:[18,17,224,91,16]},_0=NO({passive:!0,capture:!0});let uoe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new zl.X(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(d=>d===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=af(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(A6(a)?"keyboard":"mouse"),this._mostRecentTarget=af(a))},this._onTouchstart=a=>{R6(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=af(a))},this._options={...coe,...s},this.modalityDetected=this._modality.pipe(v6(1)),this.modalityChanged=this.modalityDetected.pipe((0,ME.x)()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,_0),r.addEventListener("mousedown",this._onMousedown,_0),r.addEventListener("touchstart",this._onTouchstart,_0)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,_0),document.removeEventListener("mousedown",this._onMousedown,_0),document.removeEventListener("touchstart",this._onTouchstart,_0))}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ga),u.LFG(u.R0b),u.LFG(ce),u.LFG(loe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const doe=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function hoe(){return null}}),foe=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let poe=0,M6=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,a;return 1===i.length&&"number"==typeof i[0]?a=i[0]:[s,a]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==a&&r&&(a=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof a&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+poe++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],a=s.getAttribute("aria-owns");a?-1===a.indexOf(t)&&s.setAttribute("aria-owns",a+" "+t):s.setAttribute("aria-owns",t)}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(doe,8),u.LFG(u.R0b),u.LFG(ce),u.LFG(foe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const moe=new u.OlP("cdk-focus-monitor-default-options"),jO=NO({passive:!0,capture:!0});let DS=(()=>{class n{constructor(t,i,r,s,a){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new zt.x,this._rootNodeFocusAndBlurListener=d=>{for(let m=af(d);m;m=m.parentElement)"focus"===d.type?this._onFocus(d,m):this._onBlur(d,m)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(t,i=!1){const r=p0(t);if(!this._platform.isBrowser||1!==r.nodeType)return(0,pt.of)();const s=function tse(n){if(function ese(){if(null==pB){const n=typeof document<"u"?document.head:null;pB=!(!n||!n.createShadowRoot&&!n.attachShadow)}return pB}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return i&&(a.checkChildren=!0),a.subject;const d={checkChildren:i,subject:new zt.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const i=p0(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=p0(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,f])=>this._originChanged(d,i,f)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=af(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,jO),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,jO)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Hs(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,jO),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,jO),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.R0b),u.LFG(ga),u.LFG(uoe),u.LFG(ce,8),u.LFG(moe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const O6="cdk-high-contrast-black-on-white",P6="cdk-high-contrast-white-on-black",MB="cdk-high-contrast-active";let N6=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,u.f3M)(Wse).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(MB,O6,P6),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(MB,O6):2===i&&t.add(MB,P6)}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ga),u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),goe=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(N6))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[b6]})}return n})();function _oe(n,e){}class zO{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let F6=(()=>{class n extends EB{constructor(t,i,r,s,a,d,f,m){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=a,this._ngZone=d,this._overlayRef=f,this._focusMonitor=m,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=b=>{this._portalOutlet.hasAttached();const I=this._portalOutlet.attachDomPortal(b);return this._contentAttached(),I},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=mB(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=mB();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=mB())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(kB),u.Y36(ce,8),u.Y36(zO),u.Y36(HO),u.Y36(u.R0b),u.Y36(xS),u.Y36(DS))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&u.Gf(IB,7),2&i){let s;u.iGM(s=u.CRH())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&u.uIk("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&u.YNc(0,_oe,0,0,"ng-template",0)},dependencies:[IB],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class OB{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new zt.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!lf(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const L6=new u.OlP("DialogScrollStrategy"),yoe=new u.OlP("DialogData"),voe=new u.OlP("DefaultDialogConfig"),woe={provide:L6,deps:[Om],useFactory:function boe(n){return()=>n.scrollStrategies.block()}};let Eoe=0,U6=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,a,d){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new zt.x,this._afterOpenedAtThisLevel=new zt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=JT(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Es(void 0))),this._scrollStrategy=d}open(t,i){(i={...this._defaultOptions||new zO,...i}).id=i.id||"cdk-dialog-"+Eoe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),a=this._overlay.create(s),d=new OB(a,i),f=this._attachContainer(a,d,i);return d.containerInstance=f,this._attachDialogContent(t,d,f,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){PB(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){PB(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),PB(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new TB({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,a=[{provide:zO,useValue:r},{provide:OB,useValue:i},{provide:xS,useValue:t}];let d;r.container?"function"==typeof r.container?d=r.container:(d=r.container.type,a.push(...r.container.providers(r))):d=F6;const f=new bB(d,r.viewContainerRef,u.zs3.create({parent:s||this._injector,providers:a}),r.componentFactoryResolver);return t.attach(f).instance}_attachDialogContent(t,i,r,s){if(t instanceof u.Rgc){const a=this._createInjector(s,i,r,void 0);let d={$implicit:s.data,dialogRef:i};s.templateContext&&(d={...d,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new wB(t,null,d,a))}else{const a=this._createInjector(s,i,r,this._injector),d=r.attachComponentPortal(new bB(t,s.viewContainerRef,a,s.componentFactoryResolver));i.componentRef=d,i.componentInstance=d.instance}}_createInjector(t,i,r,s){const a=t.injector||t.viewContainerRef?.injector,d=[{provide:yoe,useValue:t.data},{provide:OB,useValue:i}];return t.providers&&("function"==typeof t.providers?d.push(...t.providers(i,t,r)):d.push(...t.providers)),t.direction&&(!a||!a.get(My,null,{optional:!0}))&&d.push({provide:My,useValue:{value:t.direction,change:(0,pt.of)()}}),u.zs3.create({parent:a||s,providers:d})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Om),u.LFG(u.zs3),u.LFG(voe,8),u.LFG(n,12),u.LFG(UO),u.LFG(L6))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function PB(n,e){let t=n.length;for(;t--;)e(n[t])}let Ioe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[U6,woe],imports:[SB,LO,goe,LO]})}return n})();const Coe=["text"];function Toe(n,e){if(1&n&&u._UZ(0,"mat-pseudo-checkbox",6),2&n){const t=u.oxw();u.Q6J("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function Soe(n,e){if(1&n&&u._UZ(0,"mat-pseudo-checkbox",7),2&n){const t=u.oxw();u.Q6J("disabled",t.disabled)}}function xoe(n,e){if(1&n&&(u.TgZ(0,"span",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij("(",t.group.label,")")}}const Doe=[[["mat-icon"]],"*"],Aoe=["mat-icon","*"],koe=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function Roe(){return!0}});let _a=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!gB()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(N6),u.LFG(koe,8),u.LFG(ce))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[SS,SS]})}return n})();function Moe(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=cr(e)}constructor(...e){super(...e),this._disabled=!1}}}function H6(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function j6(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=cr(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function NB(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?dB(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}function Ooe(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let z6=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Noe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const G6=NO({passive:!0,capture:!0});class Foe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=af(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const a=s.get(i);a?a.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,G6)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,G6)))}}const $6={enterDuration:225,exitDuration:150},W6=NO({passive:!0,capture:!0}),q6=["mousedown","touchstart"],K6=["mouseup","mouseleave","touchend","touchcancel"];class GO{static#e=this._eventManager=new Foe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=p0(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...$6,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const a=i.radius||function Uoe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),d=e-r.left,f=t-r.top,m=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-a+"px",b.style.top=f-a+"px",b.style.height=2*a+"px",b.style.width=2*a+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${m}ms`,this._containerElement.appendChild(b);const I=window.getComputedStyle(b),O=I.transitionDuration,V="none"===I.transitionProperty||"0s"===O||"0s, 0s"===O||0===r.width&&0===r.height,W=new Noe(this,b,i,V);b.style.transform="scale3d(1, 1, 1)",W.state=0,i.persistent||(this._mostRecentTransientRipple=W);let re=null;return!V&&(m||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Me=()=>this._finishRippleTransition(W),ze=()=>this._destroyRipple(W);b.addEventListener("transitionend",Me),b.addEventListener("transitioncancel",ze),re={onTransitionEnd:Me,onTransitionCancel:ze}}),this._activeRipples.set(W,re),(V||!m)&&this._finishRippleTransition(W),W}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...$6,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=p0(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,q6.forEach(i=>{GO._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{K6.forEach(t=>{this._triggerElement.addEventListener(t,this,W6)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=A6(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!R6(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(q6.forEach(t=>GO._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&K6.forEach(t=>e.removeEventListener(t,this,W6)))}}const $O=new u.OlP("mat-ripple-global-options");let Y6=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new GO(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(ga),u.Y36($O,8),u.Y36(u.QbO,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&u.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),Z6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[_a,_a]})}return n})(),Voe=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.QbO,8))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&u.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})(),Boe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[_a]})}return n})();const Q6=new u.OlP("MAT_OPTION_PARENT_COMPONENT"),X6=new u.OlP("MatOptgroup");let Hoe=0;class J6{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let joe=(()=>{class n{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=cr(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Hoe++,this.onSelectionChange=new u.vpe,this._stateChanges=new zt.x}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!lf(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new J6(this,t))}static#e=this.\u0275fac=function(i){u.$Z()};static#t=this.\u0275dir=u.lG2({type:n,viewQuery:function(i,r){if(1&i&&u.Gf(Coe,7),2&i){let s;u.iGM(s=u.CRH())&&(r._text=s.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}})}return n})(),e7=(()=>{class n extends joe{constructor(t,i,r,s){super(t,i,r,s)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Q6,8),u.Y36(X6,8))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&u.NdJ("click",function(){return r._selectViaInteraction()})("keydown",function(a){return r._handleKeydown(a)}),2&i&&(u.Ikx("id",r.id),u.uIk("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),u.ekj("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},exportAs:["matOption"],features:[u.qOj],ngContentSelectors:Aoe,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox","aria-hidden","true",3,"disabled","state",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","aria-hidden","true","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(i,r){1&i&&(u.F$t(Doe),u.YNc(0,Toe,1,2,"mat-pseudo-checkbox",0),u.Hsn(1),u.TgZ(2,"span",1,2),u.Hsn(4,1),u.qZA(),u.YNc(5,Soe,1,1,"mat-pseudo-checkbox",3),u.YNc(6,xoe,2,1,"span",4),u._UZ(7,"div",5)),2&i&&(u.Q6J("ngIf",r.multiple),u.xp6(5),u.Q6J("ngIf",!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator),u.xp6(1),u.Q6J("ngIf",r.group&&r.group._inert),u.xp6(1),u.Q6J("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[Y6,$s,Voe],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),t7=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[Z6,Jn,_a,Boe]})}return n})();const n7={capture:!0},i7=["focus","click","mouseenter","touchstart"],FB="mat-ripple-loader-uninitialized",LB="mat-ripple-loader-class-name",r7="mat-ripple-loader-centered",WO="mat-ripple-loader-disabled";let $oe=(()=>{class n{constructor(){this._document=(0,u.f3M)(ce,{optional:!0}),this._animationMode=(0,u.f3M)(u.QbO,{optional:!0}),this._globalRippleOptions=(0,u.f3M)($O,{optional:!0}),this._platform=(0,u.f3M)(ga),this._ngZone=(0,u.f3M)(u.R0b),this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const r=t.target.closest(`[${FB}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const t of i7)this._document?.addEventListener(t,this._onInteraction,n7)})}ngOnDestroy(){for(const t of i7)this._document?.removeEventListener(t,this._onInteraction,n7)}configureRipple(t,i){t.setAttribute(FB,""),(i.className||!t.hasAttribute(LB))&&t.setAttribute(LB,i.className||""),i.centered&&t.setAttribute(r7,""),i.disabled&&t.setAttribute(WO,"")}getRipple(t){return t.matRipple?t.matRipple:this.createRipple(t)}setDisabled(t,i){const r=t.matRipple;r?r.disabled=i:i?t.setAttribute(WO,""):t.removeAttribute(WO)}createRipple(t){if(!this._document)return;t.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(LB)),t.append(i);const r=new Y6(new u.SBq(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=t,r.centered=t.hasAttribute(r7),r.disabled=t.hasAttribute(WO),this.attachRipple(t,r),r}attachRipple(t,i){t.removeAttribute(FB),t.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class s7{}class Woe{}const cf="*";function UB(n,e){return{type:7,name:n,definitions:e,options:{}}}function y0(n,e=null){return{type:4,styles:e,timings:n}}function VB(n,e=null){return{type:3,steps:n,options:e}}function o7(n,e=null){return{type:2,steps:n,options:e}}function $l(n){return{type:6,styles:n,offset:null}}function qO(n,e,t){return{type:0,name:n,styles:e,options:t}}function RS(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class kS{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class c7{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==s&&this._onFinish()}),a.onDestroy(()=>{++i==s&&this._onDestroy()}),a.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,d)=>Math.max(a,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function qoe(n,e){}class KO{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const HB="mdc-dialog--open",u7="mdc-dialog--opening",d7="mdc-dialog--closing";let Zoe=(()=>{class n extends F6{constructor(t,i,r,s,a,d,f,m){super(t,i,r,s,a,d,f,m),this._animationStateChanged=new u.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(kB),u.Y36(ce,8),u.Y36(KO),u.Y36(HO),u.Y36(u.R0b),u.Y36(xS),u.Y36(DS))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],features:[u.qOj],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const h7="--mat-dialog-transition-duration";function f7(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?dB(n.substring(0,n.length-2)):n.endsWith("s")?1e3*dB(n.substring(0,n.length-1)):"0"===n?0:null}let Qoe=(()=>{class n extends Zoe{constructor(t,i,r,s,a,d,f,m,b){super(t,i,r,s,a,d,f,b),this._animationMode=m,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?f7(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?f7(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(h7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(u7,HB)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(HB),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(HB),this._animationsEnabled?(this._hostElement.style.setProperty(h7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(d7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(u7,d7)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(kB),u.Y36(ce,8),u.Y36(KO),u.Y36(HO),u.Y36(u.R0b),u.Y36(xS),u.Y36(u.QbO,8),u.Y36(DS))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(u.Ikx("id",r._config.id),u.uIk("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),u.ekj("_mat-animation-noopable",!r._animationsEnabled))},features:[u.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,qoe,0,0,"ng-template",2),u.qZA()())},dependencies:[IB],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class Xoe{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new zt.x,this._beforeClosed=new zt.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Pn(r=>"opened"===r.state),Nn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Pn(r=>"closed"===r.state),Nn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Zi.T)(this.backdropClick(),this.keydownEvents().pipe(Pn(r=>27===r.keyCode&&!this.disableClose&&!lf(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function Joe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Pn(t=>"closing"===t.state),Nn(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const p7=new u.OlP("MatMdcDialogData"),m7=new u.OlP("mat-mdc-dialog-default-options"),g7=new u.OlP("mat-mdc-dialog-scroll-strategy"),tae={provide:g7,deps:[Om],useFactory:function eae(n){return()=>n.scrollStrategies.block()}};let nae=0,iae=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,a,d,f,m,b,I){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=f,this._dialogContainerType=m,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new zt.x,this._afterOpenedAtThisLevel=new zt.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=KO,this.afterAllClosed=JT(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Es(void 0))),this._scrollStrategy=d,this._dialog=i.get(U6)}open(t,i){let r;(i={...this._defaultOptions||new KO,...i}).id=i.id||`${this._idPrefix}${nae++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:zO,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(a,d,f)=>(r=new this._dialogRefConstructor(a,i,f),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(r);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){u.$Z()};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),jB=(()=>{class n extends iae{constructor(t,i,r,s,a,d,f,m){super(t,i,s,d,f,a,Xoe,Qoe,p7,m),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Om),u.LFG(u.zs3),u.LFG(Je,8),u.LFG(m7,8),u.LFG(g7),u.LFG(n,12),u.LFG(UO),u.LFG(u.QbO,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),rae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[jB,tae],imports:[Ioe,SB,LO,_a,_a]})}return n})(),zB=(()=>{class n{constructor(t,i,r){this.db=t,this.authService=i,this.dialog=r,this.storage=ip(),this.deleteFile={}}onFileChange(t){this.file=t.target.files[0],this.canCreate=!0}deleteData(t){window.confirm("Are sure you want to delete this item ?")&&Gv(Mu(this.storage,this.deleteFile)).then(s=>{console.log(s+" deleted"),location.reload()}).catch(s=>{console.log("error occurred")})}addData(){!0===this.canCreate?IE(Mu(this.storage,"users//"+this.authService.userData.uid+"/"+this.file.name),this.file).then(r=>{location.reload()}):!1===this.canCreate?console.log("Could not upload..."):console.log("data uninitialized")}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(B3),u.LFG(Mm),u.LFG(jB))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const y7="@firebase/database";let GB="";class sae{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,A.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,A.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class oae{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,A.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const w7=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sae(e)}}catch{}return new oae},Ny=w7("localStorage"),$B=w7("sessionStorage"),v0=new Ni.Yd("@firebase/database"),E7=function(){let n=1;return function(){return n++}}(),I7=function(n){const e=(0,A.dS)(n),t=new A.gQ;t.update(e);const i=t.digest();return A.US.encodeByteArray(i)},MS=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=MS.apply(null,i):e+="object"==typeof i?(0,A.Wl)(i):i,e+=" "}return e};let Fy=null,C7=!0;const js=function(...n){if(!0===C7&&(C7=!1,null===Fy&&!0===$B.get("logging_enabled")&&function(n,e){(0,A.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(v0.logLevel=Ni.in.VERBOSE,Fy=v0.log.bind(v0),e&&$B.set("logging_enabled",!0)):"function"==typeof n?Fy=n:(Fy=null,$B.remove("logging_enabled"))}(!0)),Fy){const e=MS.apply(null,n);Fy(e)}},OS=function(n){return function(...e){js(n,...e)}},WB=function(...n){const e="FIREBASE INTERNAL ERROR: "+MS(...n);v0.error(e)},wd=function(...n){const e=`FIREBASE FATAL ERROR: ${MS(...n)}`;throw v0.error(e),new Error(e)},Co=function(...n){const e="FIREBASE WARNING: "+MS(...n);v0.warn(e)},YO=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nm="[MIN_NAME]",uf="[MAX_NAME]",Ly=function(n,e){if(n===e)return 0;if(n===Nm||e===uf)return-1;if(e===Nm||n===uf)return 1;{const t=D7(n),i=D7(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},cae=function(n,e){return n===e?0:n<e?-1:1},PS=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,A.Wl)(e))},qB=function(n){if("object"!=typeof n||null===n)return(0,A.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,A.Wl)(e[i]),t+=":",t+=qB(n[e[i]]);return t+="}",t},S7=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function zs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const x7=function(n){(0,A.hu)(!YO(n),"Invalid JSON number");const i=1023;let r,s,a,d,f;0===n?(s=0,a=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,a=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,a=Math.round(n/Math.pow(2,-1074))));const m=[];for(f=52;f;f-=1)m.push(a%2?1:0),a=Math.floor(a/2);for(f=11;f;f-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(r?1:0),m.reverse();const b=m.join("");let I="";for(f=0;f<64;f+=8){let D=parseInt(b.substr(f,8),2).toString(16);1===D.length&&(D="0"+D),I+=D}return I.toLowerCase()},fae=new RegExp("^-?(0*)\\d{1,10}$"),D7=function(n){if(fae.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},b0=function(n){try{n()}catch(e){setTimeout(()=>{throw Co("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},NS=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class _ae{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Co(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class yae{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(js("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Co(e)}}let FS=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const O7=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,F7="websocket",L7="long_polling";class YB{constructor(e,t,i,r,s=!1,a="",d=!1,f=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ny.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ny.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function U7(n,e,t){let i;if((0,A.hu)("string"==typeof e,"typeof type must == string"),(0,A.hu)("object"==typeof t,"typeof params must == object"),e===F7)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==L7)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function vae(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return zs(t,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}class bae{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,A.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,A.p$)(this.counters_)}}const ZB={},QB={};function XB(n){const e=n.toString();return ZB[e]||(ZB[e]=new bae),ZB[e]}class Eae{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&b0(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fm{constructor(e,t,i,r,s,a,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=OS(e),this.stats_=XB(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),U7(t,L7,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Eae(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,A.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JB((...s)=>{const[a,d,f,m,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===a)this.id=d,this.password=f;else{if("close"!==a)throw new Error("Unrecognized command received: "+a);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[a,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&O7.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fm.forceAllow_=!0}static forceDisallow(){Fm.forceDisallow_=!0}static isAvailable(){return!((0,A.Yr)()||!Fm.forceAllow_&&(Fm.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,A.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,A.h$)(t),r=S7(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,A.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,A.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class JB{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,A.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=E7(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=JB.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(d){js("frame writing exception"),d.stack&&js(d.stack),js(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||js("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const a=this.pendingSegs.shift();i=i+"&seg"+r+"="+a.seg+"&ts"+r+"="+a.ts+"&d"+r+"="+a.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,A.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{js("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let QO=null;typeof MozWebSocket<"u"?QO=MozWebSocket:typeof WebSocket<"u"&&(QO=WebSocket);let w0=(()=>{class n{constructor(t,i,r,s,a,d,f){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=OS(this.connId),this.stats_=XB(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,a){const d={v:"5"};return!(0,A.Yr)()&&typeof location<"u"&&location.hostname&&O7.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),a&&(d.p=a),U7(t,F7,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ny.set("previous_websocket_failure",!0);try{let r;if((0,A.Yr)()){r={headers:{"User-Agent":`Firebase/5/${GB}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const a=process.env,d=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new QO(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==QO&&!n.forceDisallow_}static previouslyFailed(){return Ny.isInMemoryStorage||!0===Ny.get("previous_websocket_failure")}markConnectionHealthy(){Ny.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,A.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,A.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,A.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=S7(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),$7=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fm,w0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=w0&&w0.isAvailable();let r=i&&!w0.previouslyFailed();if(t.webSocketOnly&&(i||Co("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[w0];else{const s=this.transports_=[];for(const a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class X7{constructor(e,t,i,r,s,a,d,f,m,b){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=d,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=OS("c:"+this.id+":"),this.transportManager_=new $7(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=NS(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=PS("t",e),i=PS("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=PS("t",e),i=PS("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=PS("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?WB("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WB("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Co("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),NS(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):NS(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ny.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class J7{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class eq{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,A.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,A.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class XO extends eq{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,A.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new XO}getInitialEvent(e){return(0,A.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class si{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Zn(){return new si("")}function bn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lm(n){return n.pieces_.length-n.pieceNum_}function xi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new si(n.pieces_,e)}function tH(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function LS(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function iq(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new si(e,0)}function ur(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof si)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new si(t,0)}function wn(n){return n.pieceNum_>=n.pieces_.length}function Go(n,e){const t=bn(n),i=bn(e);if(null===t)return e;if(t===i)return Go(xi(n),xi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function nH(n,e){if(Lm(n)!==Lm(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Wl(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Lm(n)>Lm(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class $ae{constructor(e,t){this.errorPrefix_=t,this.parts_=LS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,A.ug)(this.parts_[i]);rq(this)}}function rq(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Uy(n))}function Uy(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class iH extends eq{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new iH}getInitialEvent(e){return(0,A.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const US=1e3;let eP,Vy=(()=>{class n extends J7{constructor(t,i,r,s,a,d,f,m){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=OS("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=US,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,A.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iH.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&XO.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,a={r:s,a:t,b:i};this.log_((0,A.Wl)(a)),(0,A.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new A.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const a=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+a),this.listens.has(d)||this.listens.set(d,new Map),(0,A.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,A.hu)(!this.listens.get(d).has(a),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const a={p:r};t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,f=>{const m=f.d,b=f.s;n.warnOnListenWarnings_(m,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",f),"ok"!==b&&this.removeListen_(r,s),t.onComplete&&t.onComplete(b,m))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,A.r3)(t,"w")){const r=(0,A.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();Co(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,A.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,A.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const a=s.s,d=s.d||"error";this.authToken_===t&&("ok"===a?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,A.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const a={p:t};s&&(a.q=r,a.t=s),this.sendRequest("n",a)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const a={p:i,d:r};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,a){this.initConnection_();const d={p:i,d:r};void 0!==a&&(d.h=a),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,A.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):WB("Unrecognized action received from server: "+(0,A.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,A.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=US,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=US,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=US),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),a=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,m=null;const b=function(){m?m.close():(f=!0,s())};t.realtime_={close:b,sendRequest:function(O){(0,A.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(O)}};const D=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,V]=yield Promise.all([t.authTokenProvider_.getToken(D),t.appCheckTokenProvider_.getToken(D)]);f?js("getToken() completed but was canceled"):(js("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=V&&V.token,m=new X7(a,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,W=>{Co(W+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),f||(t.repoInfo_.nodeAdmin&&Co(O),b())}}})()}interrupt(t){js("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){js("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,A.xb)(this.interruptReasons_)&&(this.reconnectDelay_=US,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(a=>qB(a)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new si(t).toString();let s;if(this.listens.has(r)){const a=this.listens.get(r);s=a.get(i),a.delete(i),0===a.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){js("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){js("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,A.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+GB.replace(/\./g,"-")]=1,(0,A.uI)()?t["framework.cordova"]=1:(0,A.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=XO.getInstance().currentlyOnline();return(0,A.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Sn(e,t)}}class JO{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Sn(Nm,e),r=new Sn(Nm,t);return 0!==this.compare(i,r)}minPost(){return Sn.MIN}}class aq extends JO{static get __EMPTY_NODE(){return eP}static set __EMPTY_NODE(e){eP=e}compare(e,t){return Ly(e.name,t.name)}isDefinedOn(e){throw(0,A.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Sn.MIN}maxPost(){return new Sn(uf,eP)}makePost(e,t){return(0,A.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Sn(e,eP)}toString(){return".key"}}const Ed=new aq;class tP{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let sH,zc=(()=>{class n{constructor(t,i,r,s,a){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??ya.EMPTY_NODE,this.right=a??ya.EMPTY_NODE}copy(t,i,r,s,a){return new n(t??this.key,i??this.value,r??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const a=r(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===a?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ya.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return ya.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ya{constructor(e,t=ya.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ya(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,zc.BLACK,null,null))}remove(e){return new ya(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zc.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tP(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tP(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tP(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tP(this.root_,null,this.comparator_,!0,e)}}function Jae(n,e){return Ly(n.name,e.name)}function rH(n,e){return Ly(n,e)}ya.EMPTY_NODE=new class Xae{copy(e,t,i,r,s){return this}insert(e,t,i){return new zc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const lq=function(n){return"number"==typeof n?"number:"+x7(n):"string:"+n},cq=function(n){if(n.isLeafNode()){const e=n.val();(0,A.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,A.r3)(e,".sv"),"Priority must be a string or number.")}else(0,A.hu)(n===sH||n.isEmpty(),"priority of unexpected type.");(0,A.hu)(n===sH||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let uq,dq,hq,E0=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,A.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),cq(this.priorityNode_)}static set __childrenNodeConstructor(t){uq=t}static get __childrenNodeConstructor(){return uq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return wn(t)?this:".priority"===bn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=bn(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,A.hu)(".priority"!==r||1===Lm(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(xi(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+lq(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?x7(this.value_):this.value_,this.lazyHash_=I7(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,A.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(r);return(0,A.hu)(s>=0,"Unknown leaf type: "+i),(0,A.hu)(a>=0,"Unknown leaf type: "+r),s===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Hi=new class ile extends JO{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Ly(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Sn.MIN}maxPost(){return new Sn(uf,new E0("[PRIORITY-POST]",hq))}makePost(e,t){const i=dq(e);return new Sn(t,new E0("[PRIORITY-POST]",i))}toString(){return".priority"}},rle=Math.log(2);class sle{constructor(e){this.count=parseInt(Math.log(e+1)/rle,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nP=function(n,e,t,i){n.sort(e);const r=function(f,m){const b=m-f;let I,D;if(0===b)return null;if(1===b)return I=n[f],D=t?t(I):I,new zc(D,I.node,zc.BLACK,null,null);{const O=parseInt(b/2,10)+f,V=r(f,O),W=r(O+1,m);return I=n[O],D=t?t(I):I,new zc(D,I.node,zc.BLACK,V,W)}},d=function(f){let m=null,b=null,I=n.length;const D=function(V,W){const re=I-V,Me=I;I-=V;const ze=r(re+1,Me),je=n[re],Ye=t?t(je):je;O(new zc(Ye,je.node,W,null,ze))},O=function(V){m?(m.left=V,m=V):(b=V,m=V)};for(let V=0;V<f.count;++V){const W=f.nextBitIsOne(),re=Math.pow(2,f.count-(V+1));W?D(re,zc.BLACK):(D(re,zc.BLACK),D(re,zc.RED))}return b}(new sle(n.length));return new ya(i||e,d)};let oH;const I0={};class df{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,A.hu)(I0&&Hi,"ChildrenNode.ts has not been loaded"),oH=oH||new df({".priority":I0},{".priority":Hi}),oH}get(e){const t=(0,A.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ya?t:null}hasIndex(e){return(0,A.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,A.hu)(e!==Ed,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Sn.Wrap);let d,a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=s.getNext();d=r?nP(i,e.getCompare()):I0;const f=e.toString(),m=Object.assign({},this.indexSet_);m[f]=e;const b=Object.assign({},this.indexes_);return b[f]=d,new df(b,m)}addToIndexes(e,t){const i=(0,A.UI)(this.indexes_,(r,s)=>{const a=(0,A.DV)(this.indexSet_,s);if((0,A.hu)(a,"Missing index implementation for "+s),r===I0){if(a.isDefinedOn(e.node)){const d=[],f=t.getIterator(Sn.Wrap);let m=f.getNext();for(;m;)m.name!==e.name&&d.push(m),m=f.getNext();return d.push(e),nP(d,a.getCompare())}return I0}{const d=t.get(e.name);let f=r;return d&&(f=f.remove(new Sn(e.name,d))),f.insert(e,e.node)}});return new df(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,A.UI)(this.indexes_,r=>{if(r===I0)return r;{const s=t.get(e.name);return s?r.remove(new Sn(e.name,s)):r}});return new df(i,this.indexSet_)}}let VS,nn=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&cq(this.priorityNode_),this.children_.isEmpty()&&(0,A.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return VS||(VS=new n(new ya(rH),null,df.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||VS}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?VS:i}}getChild(t){const i=bn(t);return null===i?this:this.getImmediateChild(i).getChild(xi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,A.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Sn(t,i);let s,a;i.isEmpty()?(s=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?VS:this.priorityNode_;return new n(s,d,a)}}updateChild(t,i){const r=bn(t);if(null===r)return i;{(0,A.hu)(".priority"!==bn(t)||1===Lm(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(xi(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,a=!0;if(this.forEachChild(Hi,(d,f)=>{i[d]=f.val(t),r++,a&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):a=!1}),!t&&a&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+lq(this.getPriority().val())+":"),this.forEachChild(Hi,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":I7(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const a=s.getPredecessorKey(new Sn(t,i));return a?a.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Sn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Sn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Sn.Wrap);let a=s.peek();for(;null!=a&&i.compare(a,t)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Sn.Wrap);let a=s.peek();for(;null!=a&&i.compare(a,t)>0;)s.getNext(),a=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===BS?-1:0}withIndex(t){if(t===Ed||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ed||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Hi),s=i.getIterator(Hi);let a=r.getNext(),d=s.getNext();for(;a&&d;){if(a.name!==d.name||!a.node.equals(d.node))return!1;a=r.getNext(),d=s.getNext()}return null===a&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ed?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const BS=new class ole extends nn{constructor(){super(new ya(rH),nn.EMPTY_NODE,df.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Sn,{MIN:{value:new Sn(Nm,nn.EMPTY_NODE)},MAX:{value:new Sn(uf,BS)}}),aq.__EMPTY_NODE=nn.EMPTY_NODE,E0.__childrenNodeConstructor=nn,function ele(n){sH=n}(BS),function nle(n){hq=n}(BS);const ale=!0;function br(n,e=null){if(null===n)return nn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,A.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new E0(n,br(e));if(n instanceof Array||!ale){let t=nn.EMPTY_NODE;return zs(n,(i,r)=>{if((0,A.r3)(n,i)&&"."!==i.substring(0,1)){const s=br(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(br(e))}{const t=[];let i=!1;if(zs(n,(a,d)=>{if("."!==a.substring(0,1)){const f=br(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new Sn(a,f)))}}),0===t.length)return nn.EMPTY_NODE;const s=nP(t,Jae,a=>a.name,rH);if(i){const a=nP(t,Hi.getCompare());return new nn(s,br(e),new df({".priority":a},{".priority":Hi}))}return new nn(s,br(e),df.Default)}}!function tle(n){dq=n}(br);class aH extends JO{constructor(e){super(),this.indexPath_=e,(0,A.hu)(!wn(e)&&".priority"!==bn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Ly(e.name,t.name):s}makePost(e,t){const i=br(e),r=nn.EMPTY_NODE.updateChild(this.indexPath_,i);return new Sn(t,r)}maxPost(){const e=nn.EMPTY_NODE.updateChild(this.indexPath_,BS);return new Sn(uf,e)}toString(){return LS(this.indexPath_,0).join("/")}}const lH=new class lle extends JO{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Ly(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Sn.MIN}maxPost(){return Sn.MAX}makePost(e,t){const i=br(e);return new Sn(t,i)}toString(){return".value"}};function jS(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class uH{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,A.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,A.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nm}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,A.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,A.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,A.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hi}copy(){const e=new uH;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function pq(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Hi?t="$priority":n.index_===lH?t="$value":n.index_===Ed?t="$key":((0,A.hu)(n.index_ instanceof aH,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,A.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,A.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,A.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,A.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,A.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function mq(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Hi&&(e.i=n.index_.toString()),e}class rP extends J7{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=OS("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,A.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=rP.getListenId_(e,i),d={};this.listens_[a]=d;const f=pq(e._queryParams);this.restRequest_(s+".json",f,(m,b)=>{let I=b;if(404===m&&(I=null,m=null),null===m&&this.onDataUpdate_(s,I,!1,i),(0,A.DV)(this.listens_,a)===d){let D;D=m?401===m?"permission_denied":"rest_error:"+m:"ok",r(D,null)}})}unlisten(e,t){const i=rP.getListenId_(e,t);delete this.listens_[i]}get(e){const t=pq(e._queryParams),i=e._path.toString(),r=new A.BH;return this.restRequest_(i+".json",t,(s,a)=>{let d=a;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,A.xO)(t);this.log_("Sending REST request for "+a);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+a+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,A.cI)(d.responseText)}catch{Co("Failed to parse JSON response for "+a+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Co("Got unsuccessful REST response for "+a+" Status: "+d.status),i(d.status);i=null}},d.open("GET",a,!0),d.send()})}}class gle{constructor(){this.rootNode_=nn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sP(){return{value:null,children:new Map}}function T0(n,e,t){if(wn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=bn(e);n.children.has(i)||n.children.set(i,sP()),T0(n.children.get(i),e=xi(e),t)}}function pH(n,e,t){null!==n.value?t(e,n.value):function _le(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{pH(r,new si(e.toString()+"/"+i),t)})}class yle{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&zs(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class wle{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new yle(e);const i=1e4+2e4*Math.random();NS(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;zs(e,(r,s)=>{s>0&&(0,A.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),NS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Id=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Id||{});function _H(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class oP{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Id.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(wn(this.path)){if(null!=this.affectedTree.value)return(0,A.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new si(e));return new oP(Zn(),t,this.revert)}}return(0,A.hu)(bn(this.path)===e,"operationForChild called for unrelated child."),new oP(xi(this.path),this.affectedTree,this.revert)}}class By{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Id.OVERWRITE}operationForChild(e){return wn(this.path)?new By(this.source,Zn(),this.snap.getImmediateChild(e)):new By(this.source,xi(this.path),this.snap)}}class S0{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Id.MERGE}operationForChild(e){if(wn(this.path)){const t=this.children.subtree(new si(e));return t.isEmpty()?null:t.value?new By(this.source,Zn(),t.value):new S0(this.source,Zn(),t)}return(0,A.hu)(bn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new S0(this.source,xi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Um{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(wn(e))return this.isFullyInitialized()&&!this.filtered_;const t=bn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function $S(n,e,t,i,r,s){const a=i.filter(d=>d.type===t);a.sort((d,f)=>function Tle(n,e,t){if(null==e.childName||null==t.childName)throw(0,A.g5)("Should only compare child_ events.");const i=new Sn(e.childName,e.snapshotNode),r=new Sn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),a.forEach(d=>{const f=function Cle(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(f,n.query_))})})}function aP(n,e){return{eventCache:n,serverCache:e}}function WS(n,e,t,i){return aP(new Um(e,t,i),n.serverCache)}function _q(n,e,t,i){return aP(n.eventCache,new Um(e,t,i))}function lP(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Hy(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yH;class ji{constructor(e,t=(()=>(yH||(yH=new ya(cae)),yH))()){this.value=e,this.children=t}static fromObject(e){let t=new ji(null);return zs(e,(i,r)=>{t=t.set(new si(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Zn(),value:this.value};if(wn(e))return null;{const i=bn(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(xi(e),t);return null!=s?{path:ur(new si(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(wn(e))return this;{const t=bn(e),i=this.children.get(t);return null!==i?i.subtree(xi(e)):new ji(null)}}set(e,t){if(wn(e))return new ji(t,this.children);{const i=bn(e),s=(this.children.get(i)||new ji(null)).set(xi(e),t),a=this.children.insert(i,s);return new ji(this.value,a)}}remove(e){if(wn(e))return this.children.isEmpty()?new ji(null):new ji(null,this.children);{const t=bn(e),i=this.children.get(t);if(i){const r=i.remove(xi(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new ji(null):new ji(this.value,s)}return this}}get(e){if(wn(e))return this.value;{const t=bn(e),i=this.children.get(t);return i?i.get(xi(e)):null}}setTree(e,t){if(wn(e))return t;{const i=bn(e),s=(this.children.get(i)||new ji(null)).setTree(xi(e),t);let a;return a=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new ji(this.value,a)}}fold(e){return this.fold_(Zn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ur(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Zn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(wn(e))return null;{const s=bn(e),a=this.children.get(s);return a?a.findOnPath_(xi(e),ur(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Zn(),t)}foreachOnPath_(e,t,i){if(wn(e))return this;{this.value&&i(t,this.value);const r=bn(e),s=this.children.get(r);return s?s.foreachOnPath_(xi(e),ur(t,r),i):new ji(null)}}foreach(e){this.foreach_(Zn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(ur(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Gc{constructor(e){this.writeTree_=e}static empty(){return new Gc(new ji(null))}}function qS(n,e,t){if(wn(e))return new Gc(new ji(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const a=Go(r,e);return s=s.updateChild(a,t),new Gc(n.writeTree_.set(r,s))}{const r=new ji(t),s=n.writeTree_.setTree(e,r);return new Gc(s)}}}function vH(n,e,t){let i=n;return zs(t,(r,s)=>{i=qS(i,ur(e,r),s)}),i}function yq(n,e){if(wn(e))return Gc.empty();{const t=n.writeTree_.setTree(e,new ji(null));return new Gc(t)}}function bH(n,e){return null!=jy(n,e)}function jy(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Go(t.path,e)):null}function vq(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Hi,(i,r)=>{e.push(new Sn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Sn(i,r.value))}),e}function Vm(n,e){if(wn(e))return n;{const t=jy(n,e);return new Gc(null!=t?new ji(t):n.writeTree_.subtree(e))}}function wH(n){return n.writeTree_.isEmpty()}function x0(n,e){return bq(Zn(),n.writeTree_,e)}function bq(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,A.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=bq(ur(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(ur(n,".priority"),i)),t}}function cP(n,e){return Tq(e,n)}function kle(n,e){if(n.snap)return Wl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Wl(ur(n.path,t),e))return!0;return!1}function Ole(n){return n.visible}function wq(n,e,t){let i=Gc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const a=s.path;let d;if(s.snap)Wl(t,a)?(d=Go(t,a),i=qS(i,d,s.snap)):Wl(a,t)&&(d=Go(a,t),i=qS(i,Zn(),s.snap.getChild(d)));else{if(!s.children)throw(0,A.g5)("WriteRecord should have .snap or .children");if(Wl(t,a))d=Go(t,a),i=vH(i,d,s.children);else if(Wl(a,t))if(d=Go(a,t),wn(d))i=vH(i,Zn(),s.children);else{const f=(0,A.DV)(s.children,bn(d));if(f){const m=f.getChild(xi(d));i=qS(i,Zn(),m)}}}}}return i}function Eq(n,e,t,i,r){if(i||r){const s=Vm(n.visibleWrites,e);return!r&&wH(s)?t:r||null!=t||bH(s,Zn())?x0(wq(n.allWrites,function(m){return(m.visible||r)&&(!i||!~i.indexOf(m.writeId))&&(Wl(m.path,e)||Wl(e,m.path))},e),t||nn.EMPTY_NODE):null}{const s=jy(n.visibleWrites,e);if(null!=s)return s;{const a=Vm(n.visibleWrites,e);return wH(a)?t:null!=t||bH(a,Zn())?x0(a,t||nn.EMPTY_NODE):null}}}function uP(n,e,t,i){return Eq(n.writeTree,n.treePath,e,t,i)}function EH(n,e){return function Ple(n,e,t){let i=nn.EMPTY_NODE;const r=jy(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Hi,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(t){const s=Vm(n.visibleWrites,e);return t.forEachChild(Hi,(a,d)=>{const f=x0(Vm(s,new si(a)),d);i=i.updateImmediateChild(a,f)}),vq(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}return vq(Vm(n.visibleWrites,e)).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}(n.writeTree,n.treePath,e)}function Iq(n,e,t,i){return function Nle(n,e,t,i,r){(0,A.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ur(e,t);if(bH(n.visibleWrites,s))return null;{const a=Vm(n.visibleWrites,s);return wH(a)?r.getChild(t):x0(a,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function dP(n,e){return function Lle(n,e){return jy(n.visibleWrites,e)}(n.writeTree,ur(n.treePath,e))}function IH(n,e,t){return function Fle(n,e,t,i){const r=ur(e,t),s=jy(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?x0(Vm(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Cq(n,e){return Tq(ur(n.treePath,e),n.writeTree)}function Tq(n,e){return{treePath:n,writeTree:e}}class Hle{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,A.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,A.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,jS(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,function HS(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,function C0(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,A.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,jS(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const Sq=new class jle{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class CH{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Um(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return IH(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hy(this.viewCache_),s=function Ble(n,e,t,i,r,s){return function Ule(n,e,t,i,r,s,a){let d;const f=Vm(n.visibleWrites,e),m=jy(f,Zn());if(null!=m)d=m;else{if(null==t)return[];d=x0(f,t)}if(d=d.withIndex(a),d.isEmpty()||d.isLeafNode())return[];{const b=[],I=a.getCompare(),D=s?d.getReverseIteratorFrom(i,a):d.getIteratorFrom(i,a);let O=D.getNext();for(;O&&b.length<r;)0!==I(O,i)&&b.push(O),O=D.getNext();return b}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function xq(n,e,t,i,r,s){const a=e.eventCache;if(null!=dP(i,t))return e;{let d,f;if(wn(t))if((0,A.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Hy(e),I=EH(i,m instanceof nn?m:nn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),I,s)}else{const m=uP(i,Hy(e));d=n.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const m=bn(t);if(".priority"===m){(0,A.hu)(1===Lm(t),"Can't have a priority with additional path components");const b=a.getNode();f=e.serverCache.getNode();const I=Iq(i,t,b,f);d=null!=I?n.filter.updatePriority(b,I):a.getNode()}else{const b=xi(t);let I;if(a.isCompleteForChild(m)){f=e.serverCache.getNode();const D=Iq(i,t,a.getNode(),f);I=null!=D?a.getNode().getImmediateChild(m).updateChild(b,D):a.getNode().getImmediateChild(m)}else I=IH(i,m,e.serverCache);d=null!=I?n.filter.updateChild(a.getNode(),m,I,b,r,s):a.getNode()}}return WS(e,d,a.isFullyInitialized()||wn(t),n.filter.filtersNodes())}}function hP(n,e,t,i,r,s,a,d){const f=e.serverCache;let m;const b=a?n.filter:n.filter.getIndexedFilter();if(wn(t))m=b.updateFullNode(f.getNode(),i,null);else if(b.filtersNodes()&&!f.isFiltered()){const O=f.getNode().updateChild(t,i);m=b.updateFullNode(f.getNode(),O,null)}else{const O=bn(t);if(!f.isCompleteForPath(t)&&Lm(t)>1)return e;const V=xi(t),re=f.getNode().getImmediateChild(O).updateChild(V,i);m=".priority"===O?b.updatePriority(f.getNode(),re):b.updateChild(f.getNode(),O,re,V,Sq,null)}const I=_q(e,m,f.isFullyInitialized()||wn(t),b.filtersNodes());return xq(n,I,t,r,new CH(r,I,s),d)}function TH(n,e,t,i,r,s,a){const d=e.eventCache;let f,m;const b=new CH(r,e,s);if(wn(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,a),f=WS(e,m,!0,n.filter.filtersNodes());else{const I=bn(t);if(".priority"===I)m=n.filter.updatePriority(e.eventCache.getNode(),i),f=WS(e,m,d.isFullyInitialized(),d.isFiltered());else{const D=xi(t),O=d.getNode().getImmediateChild(I);let V;if(wn(D))V=i;else{const W=b.getCompleteChild(I);V=null!=W?".priority"===tH(D)&&W.getChild(iq(D)).isEmpty()?W:W.updateChild(D,i):nn.EMPTY_NODE}f=O.equals(V)?e:WS(e,n.filter.updateChild(d.getNode(),I,V,D,b,a),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function Dq(n,e){return n.eventCache.isCompleteForChild(e)}function Aq(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function SH(n,e,t,i,r,s,a,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m,f=e;m=wn(t)?i:new ji(null).setTree(t,i);const b=e.serverCache.getNode();return m.children.inorderTraversal((I,D)=>{if(b.hasChild(I)){const V=Aq(0,e.serverCache.getNode().getImmediateChild(I),D);f=hP(n,f,new si(I),V,r,s,a,d)}}),m.children.inorderTraversal((I,D)=>{const O=!e.serverCache.isCompleteForChild(I)&&null===D.value;if(!b.hasChild(I)&&!O){const W=Aq(0,e.serverCache.getNode().getImmediateChild(I),D);f=hP(n,f,new si(I),W,r,s,a,d)}}),f}function ece(n,e){const t=Hy(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!wn(e)&&!t.getImmediateChild(bn(e)).isEmpty())?t.getChild(e):null}function Mq(n,e,t,i){e.type===Id.MERGE&&null!==e.source.queryId&&((0,A.hu)(Hy(n.viewCache_),"We should always have a full cache before handling merges"),(0,A.hu)(lP(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function $le(n,e,t,i,r){const s=new Hle;let a,d;if(t.type===Id.OVERWRITE){const m=t;m.source.fromUser?a=TH(n,e,m.path,m.snap,i,r,s):((0,A.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!wn(m.path),a=hP(n,e,m.path,m.snap,i,r,d,s))}else if(t.type===Id.MERGE){const m=t;m.source.fromUser?a=function qle(n,e,t,i,r,s,a){let d=e;return i.foreach((f,m)=>{const b=ur(t,f);Dq(e,bn(b))&&(d=TH(n,d,b,m,r,s,a))}),i.foreach((f,m)=>{const b=ur(t,f);Dq(e,bn(b))||(d=TH(n,d,b,m,r,s,a))}),d}(n,e,m.path,m.children,i,r,s):((0,A.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),a=SH(n,e,m.path,m.children,i,r,d,s))}else if(t.type===Id.ACK_USER_WRITE){const m=t;a=m.revert?function Zle(n,e,t,i,r,s){let a;if(null!=dP(i,t))return e;{const d=new CH(i,e,r),f=e.eventCache.getNode();let m;if(wn(t)||".priority"===bn(t)){let b;if(e.serverCache.isFullyInitialized())b=uP(i,Hy(e));else{const I=e.serverCache.getNode();(0,A.hu)(I instanceof nn,"serverChildren would be complete if leaf node"),b=EH(i,I)}m=n.filter.updateFullNode(f,b,s)}else{const b=bn(t);let I=IH(i,b,e.serverCache);null==I&&e.serverCache.isCompleteForChild(b)&&(I=f.getImmediateChild(b)),m=null!=I?n.filter.updateChild(f,b,I,xi(t),d,s):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(f,b,nn.EMPTY_NODE,xi(t),d,s):f,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=uP(i,Hy(e)),a.isLeafNode()&&(m=n.filter.updateFullNode(m,a,s)))}return a=e.serverCache.isFullyInitialized()||null!=dP(i,Zn()),WS(e,m,a,n.filter.filtersNodes())}}(n,e,m.path,i,r,s):function Kle(n,e,t,i,r,s,a){if(null!=dP(r,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=i.value){if(wn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return hP(n,e,t,f.getNode().getChild(t),r,s,d,a);if(wn(t)){let m=new ji(null);return f.getNode().forEachChild(Ed,(b,I)=>{m=m.set(new si(b),I)}),SH(n,e,t,m,r,s,d,a)}return e}{let m=new ji(null);return i.foreach((b,I)=>{const D=ur(t,b);f.isCompleteForPath(D)&&(m=m.set(b,f.getNode().getChild(D)))}),SH(n,e,t,m,r,s,d,a)}}(n,e,m.path,m.affectedTree,i,r,s)}else{if(t.type!==Id.LISTEN_COMPLETE)throw(0,A.g5)("Unknown operation type: "+t.type);a=function Yle(n,e,t,i,r){const s=e.serverCache;return xq(n,_q(e,s.getNode(),s.isFullyInitialized()||wn(t),s.isFiltered()),t,i,Sq,r)}(n,e,t.path,i,s)}const f=s.getChanges();return function Wle(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=lP(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(function fq(n){return{type:"value",snapshotNode:n}}(lP(e)))}}(e,a,f),{viewCache:a,changes:f}}(n.processor_,r,e,t,i);return function Gle(n,e){(0,A.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,A.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,A.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function Oq(n,e,t,i){return function Ile(n,e,t,i){const r=[],s=[];return e.forEach(a=>{"child_changed"===a.type&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(function cle(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(a.childName,a.snapshotNode))}),$S(n,r,"child_removed",e,i,t),$S(n,r,"child_added",e,i,t),$S(n,r,"child_moved",s,i,t),$S(n,r,"child_changed",e,i,t),$S(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let fP,mP;function xH(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,A.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Mq(s,e,t,i)}{let s=[];for(const a of n.views.values())s=s.concat(Mq(a,e,t,i));return s}}function Bm(n,e){let t=null;for(const i of n.views.values())t=t||ece(i,e);return t}class Vq{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ji(null),this.pendingWriteTree_=function Vle(){return{visibleWrites:Gc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function DH(n,e,t,i,r){return function xle(n,e,t,i,r){(0,A.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=qS(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?D0(n,new By({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function jm(n,e,t=!1){const i=function Ale(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Rle(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,A.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,a=n.allWrites.length-1;for(;r&&a>=0;){const d=n.allWrites[a];d.visible&&(a>=t&&kle(d,i.path)?r=!1:Wl(i.path,d.path)&&(s=!0)),a--}return!!r&&(s?(function Mle(n){n.visibleWrites=wq(n.allWrites,Ole,Zn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=yq(n.visibleWrites,i.path):zs(i.children,f=>{n.visibleWrites=yq(n.visibleWrites,ur(i.path,f))}),!0))}(n.pendingWriteTree_,e)){let s=new ji(null);return null!=i.snap?s=s.set(Zn(),!0):zs(i.children,a=>{s=s.set(new si(a),!0)}),D0(n,new oP(i.path,s,t))}return[]}function KS(n,e,t){return D0(n,new By({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function _P(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(a,d)=>{const m=Bm(d,Go(a,e));if(m)return m});return Eq(r,e,s,t,!0)}function D0(n,e){return Hq(e,n.syncPointTree_,null,cP(n.pendingWriteTree_,Zn()))}function Hq(n,e,t,i){if(wn(n.path))return jq(n,e,t,i);{const r=e.get(Zn());null==t&&null!=r&&(t=Bm(r,Zn()));let s=[];const a=bn(n.path),d=n.operationForChild(a),f=e.children.get(a);if(f&&d){const m=t?t.getImmediateChild(a):null,b=Cq(i,a);s=s.concat(Hq(d,f,m,b))}return r&&(s=s.concat(xH(r,n,i,t))),s}}function jq(n,e,t,i){const r=e.get(Zn());null==t&&null!=r&&(t=Bm(r,Zn()));let s=[];return e.children.inorderTraversal((a,d)=>{const f=t?t.getImmediateChild(a):null,m=Cq(i,a),b=n.operationForChild(a);b&&(s=s.concat(jq(b,d,f,m)))}),r&&(s=s.concat(xH(r,n,i,t))),s}function RH(n,e){return n.tagToQueryMap.get(e)}function kH(n){const e=n.indexOf("$");return(0,A.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new si(n.substr(0,e))}}function MH(n,e,t){const i=n.syncPointTree_.get(e);return(0,A.hu)(i,"Missing sync point for query tag that we're tracking"),xH(i,t,cP(n.pendingWriteTree_,e),null)}class OH{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new OH(t)}node(){return this.node_}}class PH{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ur(this.path_,e);return new PH(this.syncTree_,t)}node(){return _P(this.syncTree_,this.path_)}}const wce=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Gq=function(n,e,t){return n&&"object"==typeof n?((0,A.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ece(n[".sv"],e,t):"object"==typeof n[".sv"]?Ice(n[".sv"],e):void(0,A.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ece=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,A.hu)(!1,"Unexpected server value: "+n)},Ice=function(n,e,t){n.hasOwnProperty("increment")||(0,A.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,A.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,A.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return"number"!=typeof a?i:a+i},$q=function(n,e,t,i){return FH(e,new PH(t,n),i)},NH=function(n,e,t){return FH(n,new OH(e),t)};function FH(n,e,t){const i=n.getPriority().val(),r=Gq(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const a=n,d=Gq(a.getValue(),e,t);return d!==a.getValue()||r!==a.getPriority().val()?new E0(d,br(r)):n}{const a=n;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new E0(r))),a.forEachChild(Hi,(d,f)=>{const m=FH(f,e.getImmediateChild(d),t);m!==f&&(s=s.updateImmediateChild(d,m))}),s}}class LH{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function vP(n,e){let t=e instanceof si?e:new si(e),i=n,r=bn(t);for(;null!==r;){const s=(0,A.DV)(i.node.children,r)||{children:{},childCount:0};i=new LH(r,i,s),t=xi(t),r=bn(t)}return i}function zy(n){return n.node.value}function UH(n,e){n.node.value=e,VH(n)}function Wq(n){return n.node.childCount>0}function bP(n,e){zs(n.node.children,(t,i)=>{e(new LH(t,n,i))})}function qq(n,e,t,i){t&&!i&&e(n),bP(n,r=>{qq(r,e,!0,i)}),t&&i&&e(n)}function QS(n){return new si(null===n.parent?n.name:QS(n.parent)+"/"+n.name)}function VH(n){null!==n.parent&&function Sce(n,e,t){const i=function Cce(n){return void 0===zy(n)&&!Wq(n)}(t),r=(0,A.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,VH(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,VH(n))}(n.parent,n.name,n)}const xce=/[\[\].#$\/\u0000-\u001F\u007F]/,Dce=/[\[\].#$\u0000-\u001F\u007F]/,BH=10485760,wP=function(n){return"string"==typeof n&&0!==n.length&&!xce.test(n)},Kq=function(n){return"string"==typeof n&&0!==n.length&&!Dce.test(n)},JS=function(n,e,t){const i=t instanceof si?new $ae(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Uy(i));if("function"==typeof e)throw new Error(n+"contains a function "+Uy(i)+" with contents = "+e.toString());if(YO(e))throw new Error(n+"contains "+e.toString()+" "+Uy(i));if("string"==typeof e&&e.length>BH/3&&(0,A.ug)(e)>BH)throw new Error(n+"contains a string greater than "+BH+" utf8 bytes "+Uy(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(zs(e,(a,d)=>{if(".value"===a)r=!0;else if(".priority"!==a&&".sv"!==a&&(s=!0,!wP(a)))throw new Error(n+" contains an invalid key ("+a+") "+Uy(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Wae(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,A.ug)(e),rq(n)})(i,a),JS(n,d,i),function qae(n){const e=n.parts_.pop();n.byteLength_-=(0,A.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Uy(i)+" in addition to actual children.")}},jH=function(n,e,t,i){if(!(i&&void 0===t||Kq(t)))throw new Error((0,A.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kce=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jH(n,e,t,i)};class Mce{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function EP(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!nH(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function Ka(n,e,t){EP(n,t),function Xq(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(Oce(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,i=>Wl(i,e)||Wl(e,i))}function Oce(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Fy&&js("event: "+t.toString()),b0(i)}}}const Pce=25;class Nce{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mce,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sP(),this.transactionQueueTree_=new LH,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function e5(n){const t=n.infoData_.getNode(new si(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function tx(n){return wce({timestamp:e5(n)})}function t5(n,e,t,i,r){n.dataUpdateCount++;const s=new si(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(r)if(i){const f=(0,A.UI)(t,m=>br(m));a=function mce(n,e,t,i){const r=RH(n,i);if(r){const s=kH(r),a=s.path,d=s.queryId,f=Go(a,e),m=ji.fromObject(t);return MH(n,a,new S0(_H(d),f,m))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=br(t);a=function Bq(n,e,t,i){const r=RH(n,i);if(null!=r){const s=kH(r),a=s.path,d=s.queryId,f=Go(a,e);return MH(n,a,new By(_H(d),f,t))}return[]}(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,A.UI)(t,m=>br(m));a=function hce(n,e,t){const i=ji.fromObject(t);return D0(n,new S0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,f)}else{const f=br(t);a=KS(n.serverSyncTree_,s,f)}let d=s;a.length>0&&(d=R0(n,s)),Ka(n.eventQueue_,d,a)}function n5(n,e){zH(n,"connected",e),!1===e&&function Bce(n){A0(n,"onDisconnectEvents");const e=tx(n),t=sP();pH(n.onDisconnect_,Zn(),(r,s)=>{const a=$q(r,s,n.serverSyncTree_,e);T0(t,r,a)});let i=[];pH(t,Zn(),(r,s)=>{i=i.concat(KS(n.serverSyncTree_,r,s));const a=qH(n,r);R0(n,a)}),n.onDisconnect_=sP(),Ka(n.eventQueue_,Zn(),i)}(n)}function zH(n,e,t){const i=new si("/.info/"+e),r=br(t);n.infoData_.updateSnapshot(i,r);const s=KS(n.infoSyncTree_,i,r);Ka(n.eventQueue_,i,s)}function IP(n){return n.nextWriteId_++}function GH(n,e,t,i,r){A0(n,"set",{path:e.toString(),value:t,priority:i});const s=tx(n),a=br(t,i),d=_P(n.serverSyncTree_,e),f=NH(a,d,s),m=IP(n),b=DH(n.serverSyncTree_,e,f,m,!0);EP(n.eventQueue_,b),n.server_.put(e.toString(),a.val(!0),(D,O)=>{const V="ok"===D;V||Co("set at "+e+" failed: "+D);const W=jm(n.serverSyncTree_,m,!V);Ka(n.eventQueue_,e,W),function zm(n,e,t,i){e&&b0(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const a=new Error(s);a.code=r,e(a)}})}(0,r,D,O)});const I=qH(n,e);R0(n,I),Ka(n.eventQueue_,I,[])}function A0(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),js(t,...e)}function WH(n,e,t){return _P(n.serverSyncTree_,e,t)||nn.EMPTY_NODE}function CP(n,e=n.transactionQueueTree_){if(e||TP(n,e),zy(e)){const t=a5(n,e);(0,A.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function qce(n,e,t){const i=t.map(m=>m.currentWriteId),r=WH(n,e,i);let s=r;const a=r.hash();for(let m=0;m<t.length;m++){const b=t[m];(0,A.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const I=Go(e,b.path);s=s.updateChild(I,b.currentOutputSnapshotRaw)}const d=s.val(!0),f=e;n.server_.put(f.toString(),d,m=>{A0(n,"transaction put response",{path:f.toString(),status:m});let b=[];if("ok"===m){const I=[];for(let D=0;D<t.length;D++)t[D].status=2,b=b.concat(jm(n.serverSyncTree_,t[D].currentWriteId)),t[D].onComplete&&I.push(()=>t[D].onComplete(null,!0,t[D].currentOutputSnapshotResolved)),t[D].unwatcher();TP(n,vP(n.transactionQueueTree_,e)),CP(n,n.transactionQueueTree_),Ka(n.eventQueue_,e,b);for(let D=0;D<I.length;D++)b0(I[D])}else{if("datastale"===m)for(let I=0;I<t.length;I++)t[I].status=3===t[I].status?4:0;else{Co("transaction at "+f.toString()+" failed: "+m);for(let I=0;I<t.length;I++)t[I].status=4,t[I].abortReason=m}R0(n,e)}},a)}(n,QS(e),t)}else Wq(e)&&bP(e,t=>{CP(n,t)})}function R0(n,e){const t=o5(n,e),i=QS(t);return function Kce(n,e,t){if(0===e.length)return;const i=[];let r=[];const a=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],m=Go(t,f.path);let I,b=!1;if((0,A.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)b=!0,I=f.abortReason,r=r.concat(jm(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=Pce)b=!0,I="maxretry",r=r.concat(jm(n.serverSyncTree_,f.currentWriteId,!0));else{const D=WH(n,f.path,a);f.currentInputSnapshot=D;const O=e[d].update(D.val());if(void 0!==O){JS("transaction failed: Data returned ",O,f.path);let V=br(O);"object"==typeof O&&null!=O&&(0,A.r3)(O,".priority")||(V=V.updatePriority(D.getPriority()));const re=f.currentWriteId,Me=tx(n),ze=NH(V,D,Me);f.currentOutputSnapshotRaw=V,f.currentOutputSnapshotResolved=ze,f.currentWriteId=IP(n),a.splice(a.indexOf(re),1),r=r.concat(DH(n.serverSyncTree_,f.path,ze,f.currentWriteId,f.applyLocally)),r=r.concat(jm(n.serverSyncTree_,re,!0))}else b=!0,I="nodata",r=r.concat(jm(n.serverSyncTree_,f.currentWriteId,!0))}Ka(n.eventQueue_,t,r),r=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===I?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(I),!1,null)))}TP(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)b0(i[d]);CP(n,n.transactionQueueTree_)}(n,a5(n,t),i),i}function o5(n,e){let t,i=n.transactionQueueTree_;for(t=bn(e);null!==t&&void 0===zy(i);)i=vP(i,t),t=bn(e=xi(e));return i}function a5(n,e){const t=[];return l5(n,e,t),t.sort((i,r)=>i.order-r.order),t}function l5(n,e,t){const i=zy(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);bP(e,r=>{l5(n,r,t)})}function TP(n,e){const t=zy(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,UH(e,t.length>0?t:void 0)}bP(e,i=>{TP(n,i)})}function qH(n,e){const t=QS(o5(n,e)),i=vP(n.transactionQueueTree_,e);return function Tce(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{KH(n,r)}),KH(n,i),qq(i,r=>{KH(n,r)}),t}function KH(n,e){const t=zy(e);if(t){const i=[];let r=[],s=-1;for(let a=0;a<t.length;a++)3===t[a].status||(1===t[a].status?((0,A.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,t[a].status=3,t[a].abortReason="set"):((0,A.hu)(0===t[a].status,"Unexpected transaction status in abort"),t[a].unwatcher(),r=r.concat(jm(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));-1===s?UH(e,void 0):t.length=s+1,Ka(n.eventQueue_,QS(e),r);for(let a=0;a<i.length;a++)b0(i[a])}}const YH=function(n,e){const t=Qce(n),i=t.namespace;return"firebase.com"===t.domain&&wd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&wd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Co("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new YB(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new si(t.pathString)}},Qce=function(n){let e="",t="",i="",r="",s="",a=!0,d="https",f=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let b=n.indexOf("/");-1===b&&(b=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),e=n.substring(0,Math.min(b,I)),b<I&&(r=function Yce(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(b,I)));const D=function Zce(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Co(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,I)));m=e.indexOf(":"),m>=0?(a="https"===d||"wss"===d,f=parseInt(e.substring(m+1),10)):m=e.length;const O=e.slice(0,m);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const V=e.indexOf(".");i=e.substring(0,V).toLowerCase(),t=e.substring(V+1),s=i}"ns"in D&&(s=D.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:a,scheme:d,pathString:r,namespace:s}};class Ya{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return wn(this._path)?null:tH(this._path)}get ref(){return new $c(this._repo,this._path)}get _queryIdentifier(){const e=mq(this._queryParams),t=qB(e);return"{}"===t?"default":t}get _queryObject(){return mq(this._queryParams)}isEqual(e){if(!((e=(0,A.m9)(e))instanceof Ya))return!1;const t=this._repo===e._repo,i=nH(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function zae(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class $c extends Ya{constructor(e,t){super(e,t,new uH,!1)}get parent(){const e=iq(this._path);return null===e?null:new $c(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function h5(n,e){return(n=(0,A.m9)(n))._checkNotDeleted("ref"),void 0!==e?function k0(n,e){return null===bn((n=(0,A.m9)(n))._path)?kce("child","path",e,!1):jH("child","path",e,!1),new $c(n._repo,ur(n._path,e))}(n._root,e):n._root}function QH(n,e){(function(n,e){if(".info"===bn(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=(0,A.m9)(n))._path),function(n,e,t,i){i&&void 0===e||JS((0,A.gK)(n,"value"),e,t)}("set",e,n._path,!1);const t=new A.BH;return GH(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}(function ice(n){(0,A.hu)(!fP,"__referenceConstructor has already been defined"),fP=n})($c),function lce(n){(0,A.hu)(!mP,"__referenceConstructor has already been defined"),mP=n}($c);const XH={};function g5(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||wd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),js("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,m,a=YH(s,r),d=a.repoInfo;typeof process<"u"&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(f=!0,s=`http://${m}?ns=${d.namespace}`,a=YH(s,r),d=a.repoInfo):f=!a.repoInfo.secure;const b=r&&f?new FS(FS.OWNER):new yae(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!wP(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Kq(n)}(t))throw new Error((0,A.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",a),wn(a.path)||wd("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function fue(n,e,t,i){let r=XH[e.name];r||(r={},XH[e.name]=r);let s=r[n.toURLString()];return s&&wd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Nce(n,false,t,i),r[n.toURLString()]=s,s}(d,n,b,new _ae(n.name,t));return new mue(I,n)}class mue{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Fce(n,e,t){if(n.stats_=XB(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new rP(n.repoInfo_,(i,r,s,a)=>{t5(n,i,r,s,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>n5(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,A.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Vy(n.repoInfo_,e,(i,r,s,a)=>{t5(n,i,r,s,a)},i=>{n5(n,i)},i=>{!function Lce(n,e){zs(e,(t,i)=>{zH(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function wae(n,e){const t=n.toString();return QB[t]||(QB[t]=e()),QB[t]}(n.repoInfo_,()=>new wle(n.stats_,n.server_)),n.infoData_=new gle,n.infoSyncTree_=new Vq({startListening:(i,r,s,a)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=KS(n.infoSyncTree_,i._path,f),setTimeout(()=>{a("ok")},0)),d},stopListening:()=>{}}),zH(n,"connected",!1),n.serverSyncTree_=new Vq({startListening:(i,r,s,a)=>(n.server_.listen(i,s,r,(d,f)=>{const m=a(d,f);Ka(n.eventQueue_,i._path,m)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $c(this._repo,Zn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function hue(n,e){const t=XH[e];(!t||t[n.key]!==n)&&wd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function s5(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wd("Cannot call "+e+" on a deleted database.")}}function y5(...n){const e=(0,Pu.jO)(n),{args:t,keys:i}=$3(n),r=new Yi.y(s=>{const{length:a}=t;if(!a)return void s.complete();const d=new Array(a);let f=a,m=a;for(let b=0;b<a;b++){let I=!1;(0,fm.Xf)(t[b]).subscribe((0,qn.x)(s,D=>{I||(I=!0,m--),d[b]=D},()=>f--,void 0,()=>{(!f||!I)&&(m||s.next(i?W3(i,d):d),s.complete())}))}});return e?r.pipe(k2(e)):r}Vy.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Vy.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function yue(n){(function b7(n){GB=n})(Wt.SDK_VERSION),(0,Wt._registerComponent)(new gi.wA("database",(e,{instanceIdentifier:t})=>g5(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Wt.registerVersion)(y7,"1.0.1",n),(0,Wt.registerVersion)(y7,"1.0.1","esm2017")}();let v5=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.Qsj),u.Y36(u.SBq))};static#t=this.\u0275dir=u.lG2({type:n})}return n})(),$y=(()=>{class n extends v5{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=u.n5z(n)))(r||n)}}();static#t=this.\u0275dir=u.lG2({type:n,features:[u.qOj]})}return n})();const ql=new u.OlP("NgValueAccessor"),Eue={provide:ql,useExisting:(0,u.Gpc)(()=>AP),multi:!0},Cue=new u.OlP("CompositionEventMode");let AP=(()=>{class n extends v5{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Iue(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Cue,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([Eue]),u.qOj]})}return n})();function $m(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function w5(n){return null!=n&&"number"==typeof n.length}const To=new u.OlP("NgValidators"),Wm=new u.OlP("NgAsyncValidators"),Tue=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Sue{static min(e){return function E5(n){return e=>{if($m(e.value)||$m(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function I5(n){return e=>{if($m(e.value)||$m(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function C5(n){return $m(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function T5(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function S5(n){return $m(n.value)||Tue.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function x5(n){return e=>$m(e.value)||!w5(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function D5(n){return e=>w5(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function A5(n){if(!n)return RP;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if($m(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return N5(e)}static composeAsync(e){return F5(e)}}function RP(n){return null}function R5(n){return null!=n}function k5(n){return(0,u.QGY)(n)?(0,On.D)(n):n}function M5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function O5(n,e){return e.map(t=>t(n))}function P5(n){return n.map(e=>function xue(n){return!n.validate}(e)?e:t=>e.validate(t))}function N5(n){if(!n)return null;const e=n.filter(R5);return 0==e.length?null:function(t){return M5(O5(t,e))}}function JH(n){return null!=n?N5(P5(n)):null}function F5(n){if(!n)return null;const e=n.filter(R5);return 0==e.length?null:function(t){return y5(O5(t,e).map(k5)).pipe((0,ot.U)(M5))}}function ej(n){return null!=n?F5(P5(n)):null}function L5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function U5(n){return n._rawValidators}function V5(n){return n._rawAsyncValidators}function tj(n){return n?Array.isArray(n)?n:[n]:[]}function kP(n,e){return Array.isArray(n)?n.includes(e):n===e}function B5(n,e){const t=tj(e);return tj(n).forEach(r=>{kP(t,r)||t.push(r)}),t}function H5(n,e){return tj(e).filter(t=>!kP(n,t))}class j5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JH(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ej(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $o extends j5{get formDirective(){return null}get path(){return null}}class hf extends j5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class z5{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let G5=(()=>{class n extends z5{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(hf,2))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]})}return n})(),$5=(()=>{class n extends z5{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36($o,10))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]})}return n})();const rx="VALID",OP="INVALID",M0="PENDING",sx="DISABLED";function rj(n){return(PP(n)?n.validators:n)||null}function sj(n,e){return(PP(e)?e.asyncValidators:n)||null}function PP(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Y5{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rx}get invalid(){return this.status===OP}get pending(){return this.status==M0}get disabled(){return this.status===sx}get enabled(){return this.status!==sx}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(B5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(B5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(H5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(H5(e,this._rawAsyncValidators))}hasValidator(e){return kP(this._rawValidators,e)}hasAsyncValidator(e){return kP(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=M0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sx,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rx,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rx||this.status===M0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sx:rx}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=M0,this._hasOwnPendingAsyncValidator=!0;const t=k5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?sx:this.errors?OP:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(M0)?M0:this._anyControlsHaveStatus(OP)?OP:rx}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){PP(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kue(n){return Array.isArray(n)?JH(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Mue(n){return Array.isArray(n)?ej(n):n||null}(this._rawAsyncValidators)}}class oj extends Y5{constructor(e,t,i){super(rj(t),sj(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function K5(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function q5(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[t])throw new u.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const O0=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>NP}),NP="always";function ox(n,e,t=NP){aj(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Nue(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Z5(n,e)})}(n,e),function Lue(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Fue(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Z5(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Pue(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function LP(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),VP(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function UP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function aj(n,e){const t=U5(n);null!==e.validator?n.setValidators(L5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=V5(n);null!==e.asyncValidator?n.setAsyncValidators(L5(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();UP(e._rawValidators,r),UP(e._rawAsyncValidators,r)}function VP(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=U5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(a=>a!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=V5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(a=>a!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return UP(e._rawValidators,i),UP(e._rawAsyncValidators,i),t}function Z5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Q5(n,e){aj(n,e)}function X5(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const jue={provide:$o,useExisting:(0,u.Gpc)(()=>BP)},ax=(()=>Promise.resolve())();let BP=(()=>{class n extends $o{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new oj({},JH(t),ej(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ax.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),ox(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ax.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ax.then(()=>{const i=this._findContainer(t.path),r=new oj({});Q5(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ax.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){ax.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,X5(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(To,10),u.Y36(Wm,10),u.Y36(O0,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([jue]),u.qOj]})}return n})();function J5(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function e9(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const HP=class extends Y5{constructor(e=null,t,i){super(rj(t),sj(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),PP(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=e9(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){J5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){J5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){e9(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let s9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),a9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const dj=new u.OlP("NgModelWithFormControlWarning"),Zue={provide:hf,useExisting:(0,u.Gpc)(()=>hj)};let hj=(()=>{class n extends hf{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new u.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=function uj(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===AP?t=s:function Bue(n){return Object.getPrototypeOf(n.constructor)===$y}(s)?i=s:r=s}),r||i||t||null}(0,r)}ngOnChanges(t){if(this._isControlChanged(t)){const i=t.form.previousValue;i&&LP(i,this,!1),ox(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function cj(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&LP(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static#t=this.\u0275fac=function(i){return new(i||n)(u.Y36(To,10),u.Y36(Wm,10),u.Y36(ql,10),u.Y36(dj,8),u.Y36(O0,8))};static#n=this.\u0275dir=u.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[u._Bn([Zue]),u.qOj,u.TTD]})}return n})();const Que={provide:$o,useExisting:(0,u.Gpc)(()=>jP)};let jP=(()=>{class n extends $o{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(VP(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return ox(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){LP(t.control||null,t,!1),function Hue(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,X5(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(LP(i||null,t),(n=>n instanceof HP)(r)&&(ox(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);Q5(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function Uue(n,e){return VP(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){aj(this.form,this),this._oldForm&&VP(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(To,10),u.Y36(Wm,10),u.Y36(O0,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Que]),u.qOj,u.TTD]})}return n})(),mde=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[a9]})}return n})(),_de=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dj,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:O0,useValue:t.callSetDisabledState??NP}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[mde]})}return n})();class yde{constructor(e){this._box=e,this._destroyed=new zt.x,this._resizeSubject=new zt.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Yi.y(t=>{const i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(Pn(t=>t.some(i=>i.target===e)),pc({bufferSize:1,refCount:!0}),Hs(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let vde=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=(0,u.f3M)(u.R0b)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new yde(r)),this._observers.get(r).observe(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const bde=["notch"],wde=["matFormFieldNotchedOutline",""],Ede=["*"],Ide=["textField"],Cde=["iconPrefixContainer"],Tde=["textPrefixContainer"];function Sde(n,e){1&n&&u._UZ(0,"span",19)}function xde(n,e){if(1&n&&(u.TgZ(0,"label",17),u.Hsn(1,1),u.YNc(2,Sde,1,0,"span",18),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),u.uIk("for",t._control.id),u.xp6(2),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Dde(n,e){if(1&n&&u.YNc(0,xde,3,5,"label",16),2&n){const t=u.oxw();u.Q6J("ngIf",t._hasFloatingLabel())}}function Ade(n,e){1&n&&u._UZ(0,"div",20)}function Rde(n,e){}function kde(n,e){if(1&n&&u.YNc(0,Rde,0,0,"ng-template",22),2&n){u.oxw(2);const t=u.MAs(1);u.Q6J("ngTemplateOutlet",t)}}function Mde(n,e){if(1&n&&(u.TgZ(0,"div",21),u.YNc(1,kde,1,1,"ng-template",9),u.qZA()),2&n){const t=u.oxw();u.Q6J("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),u.xp6(1),u.Q6J("ngIf",!t._forceDisplayInfixLabel())}}function Ode(n,e){1&n&&(u.TgZ(0,"div",23,24),u.Hsn(2,2),u.qZA())}function Pde(n,e){1&n&&(u.TgZ(0,"div",25,26),u.Hsn(2,3),u.qZA())}function Nde(n,e){}function Fde(n,e){if(1&n&&u.YNc(0,Nde,0,0,"ng-template",22),2&n){u.oxw();const t=u.MAs(1);u.Q6J("ngTemplateOutlet",t)}}function Lde(n,e){1&n&&(u.TgZ(0,"div",27),u.Hsn(1,4),u.qZA())}function Ude(n,e){1&n&&(u.TgZ(0,"div",28),u.Hsn(1,5),u.qZA())}function Vde(n,e){1&n&&u._UZ(0,"div",29)}function Bde(n,e){if(1&n&&(u.TgZ(0,"div",30),u.Hsn(1,6),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function Hde(n,e){if(1&n&&(u.TgZ(0,"mat-hint",34),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function jde(n,e){if(1&n&&(u.TgZ(0,"div",31),u.YNc(1,Hde,2,2,"mat-hint",32),u.Hsn(2,7),u._UZ(3,"div",33),u.Hsn(4,8),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const zde=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Gde=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let yj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]})}return n})();const $de=new u.OlP("MatError");let Wde=0,I9=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+Wde++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(u.Ikx("id",r.id),u.uIk("align",null),u.ekj("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return n})();const qde=new u.OlP("MatPrefix"),Kde=new u.OlP("MatSuffix"),C9=new u.OlP("FloatingLabelParent");let T9=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,u.f3M)(vde),this._ngZone=(0,u.f3M)(u.R0b),this._parent=(0,u.f3M)(C9),this._resizeSubscription=new Hc.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function Yde(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&u.ekj("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const S9="mdc-line-ripple--active",zP="mdc-line-ripple--deactivating";let x9=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,a=s.contains(zP);"opacity"===r.propertyName&&a&&s.remove(S9,zP)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(zP),t.add(S9)}deactivate(){this._elementRef.nativeElement.classList.add(zP)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.R0b))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),D9=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.R0b))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&u.Gf(bde,5),2&i){let s;u.iGM(s=u.CRH())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&u.ekj("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:wde,ngContentSelectors:Ede,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(u.F$t(),u._UZ(0,"div",0),u.TgZ(1,"div",1,2),u.Hsn(3),u.qZA(),u._UZ(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const Zde={transitionMessages:UB("transitionMessages",[qO("enter",$l({opacity:1,transform:"translateY(0%)"})),RS("void => enter",[$l({opacity:0,transform:"translateY(-5px)"}),y0("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let A9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n})}return n})();const vj=new u.OlP("MatFormField"),Qde=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let R9=0,ehe=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=cr(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,a,d,f,m){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=a,this._defaults=d,this._animationMode=f,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+R9++,this._hintLabelId="mat-mdc-hint-"+R9++,this._subscriptAnimationState="",this._destroyed=new zt.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,d&&(d.appearance&&(this.appearance=d.appearance),this._hideRequiredMarker=!!d?.hideRequiredMarker,d.color&&(this.color=d.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Hs(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,Zi.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Hs(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Hs(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,a=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+a}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(My),u.Y36(ga),u.Y36(Qde,8),u.Y36(u.QbO,8),u.Y36(ce))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(u.Suo(s,yj,5),u.Suo(s,yj,7),u.Suo(s,A9,5),u.Suo(s,qde,5),u.Suo(s,Kde,5),u.Suo(s,$de,5),u.Suo(s,I9,5)),2&i){let a;u.iGM(a=u.CRH())&&(r._labelChildNonStatic=a.first),u.iGM(a=u.CRH())&&(r._labelChildStatic=a.first),u.iGM(a=u.CRH())&&(r._formFieldControl=a.first),u.iGM(a=u.CRH())&&(r._prefixChildren=a),u.iGM(a=u.CRH())&&(r._suffixChildren=a),u.iGM(a=u.CRH())&&(r._errorChildren=a),u.iGM(a=u.CRH())&&(r._hintChildren=a)}},viewQuery:function(i,r){if(1&i&&(u.Gf(Ide,5),u.Gf(Cde,5),u.Gf(Tde,5),u.Gf(T9,5),u.Gf(D9,5),u.Gf(x9,5)),2&i){let s;u.iGM(s=u.CRH())&&(r._textField=s.first),u.iGM(s=u.CRH())&&(r._iconPrefixContainer=s.first),u.iGM(s=u.CRH())&&(r._textPrefixContainer=s.first),u.iGM(s=u.CRH())&&(r._floatingLabel=s.first),u.iGM(s=u.CRH())&&(r._notchedOutline=s.first),u.iGM(s=u.CRH())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&u.ekj("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:vj,useExisting:n},{provide:C9,useExisting:n}])],ngContentSelectors:Gde,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(i,r){1&i&&(u.F$t(zde),u.YNc(0,Dde,1,1,"ng-template",null,0,u.W1O),u.TgZ(2,"div",1,2),u.NdJ("click",function(a){return r._control.onContainerClick(a)}),u.YNc(4,Ade,1,0,"div",3),u.TgZ(5,"div",4),u.YNc(6,Mde,2,2,"div",5),u.YNc(7,Ode,3,0,"div",6),u.YNc(8,Pde,3,0,"div",7),u.TgZ(9,"div",8),u.YNc(10,Fde,1,1,"ng-template",9),u.Hsn(11),u.qZA(),u.YNc(12,Lde,2,0,"div",10),u.YNc(13,Ude,2,0,"div",11),u.qZA(),u.YNc(14,Vde,1,0,"div",12),u.qZA(),u.TgZ(15,"div",13),u.YNc(16,Bde,2,1,"div",14),u.YNc(17,jde,5,2,"div",15),u.qZA()),2&i&&(u.xp6(2),u.ekj("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),u.xp6(2),u.Q6J("ngIf",!r._hasOutline()&&!r._control.disabled),u.xp6(2),u.Q6J("ngIf",r._hasOutline()),u.xp6(1),u.Q6J("ngIf",r._hasIconPrefix),u.xp6(1),u.Q6J("ngIf",r._hasTextPrefix),u.xp6(2),u.Q6J("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),u.xp6(2),u.Q6J("ngIf",r._hasTextSuffix),u.xp6(1),u.Q6J("ngIf",r._hasIconSuffix),u.xp6(1),u.Q6J("ngIf",!r._hasOutline()),u.xp6(1),u.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),u.Q6J("ngSwitch",r._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},dependencies:[$s,ec,Ea,nl,I9,T9,D9,x9],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Zde.transitionMessages]},changeDetection:0})}return n})(),the=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[_a,Jn,b6,_a]})}return n})();function nhe(n,e){1&n&&(u.TgZ(0,"span",7),u.Hsn(1,1),u.qZA())}function ihe(n,e){1&n&&(u.TgZ(0,"span",8),u.Hsn(1,2),u.qZA())}const O9=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],P9=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function ohe(n,e){1&n&&(u.ynx(0),u._UZ(1,"span",8),u.BQk())}function ahe(n,e){1&n&&(u.TgZ(0,"span",9),u.Hsn(1),u.qZA())}function lhe(n,e){1&n&&(u.ynx(0),u.Hsn(1,1),u.BQk())}function che(n,e){1&n&&u.Hsn(0,2,["*ngIf","contentEditInput; else defaultMatChipEditInput"])}function uhe(n,e){1&n&&u._UZ(0,"span",12)}function dhe(n,e){if(1&n&&(u.ynx(0),u.YNc(1,che,1,0,"ng-content",10),u.YNc(2,uhe,1,0,"ng-template",null,11,u.W1O),u.BQk()),2&n){const t=u.MAs(3),i=u.oxw();u.xp6(1),u.Q6J("ngIf",i.contentEditInput)("ngIfElse",t)}}function hhe(n,e){1&n&&(u.TgZ(0,"span",13),u.Hsn(1,3),u.qZA())}const fhe=[[["mat-chip-avatar"],["","matChipAvatar",""]],"*",[["","matChipEditInput",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],phe=["mat-chip-avatar, [matChipAvatar]","*","[matChipEditInput]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"],bj=["*"],GP=new u.OlP("mat-chips-default-options"),wj=new u.OlP("MatChipAvatar"),Ej=new u.OlP("MatChipTrailingIcon"),Ij=new u.OlP("MatChipRemove"),$P=new u.OlP("MatChip");class mhe{}const ghe=NB(mhe,-1);let P0=(()=>{class n extends ghe{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(t){this._disabled=cr(t)}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(t,i){super(),this._elementRef=t,this._parentChip=i,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this._allowFocusWhenDisabled=!1,"BUTTON"===t.nativeElement.nodeName&&t.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(t){!this.disabled&&this.isInteractive&&this._isPrimary&&(t.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(t.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36($P))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(i,r){1&i&&u.NdJ("click",function(a){return r._handleClick(a)})("keydown",function(a){return r._handleKeydown(a)}),2&i&&(u.uIk("tabindex",r._getTabindex())("disabled",r._getDisabledAttribute())("aria-disabled",r.disabled),u.ekj("mdc-evolution-chip__action--primary",r._isPrimary)("mdc-evolution-chip__action--presentational",!r.isInteractive)("mdc-evolution-chip__action--trailing",!r._isPrimary))},inputs:{disabled:"disabled",tabIndex:"tabIndex",isInteractive:"isInteractive",_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},features:[u.qOj]})}return n})(),L9=(()=>{class n extends P0{constructor(){super(...arguments),this._isPrimary=!1}_handleClick(t){this.disabled||(t.stopPropagation(),t.preventDefault(),this._parentChip.remove())}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!this.disabled&&(t.stopPropagation(),t.preventDefault(),this._parentChip.remove())}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=u.n5z(n)))(r||n)}}();static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:["role","button",1,"mat-mdc-chip-remove","mat-mdc-chip-trailing-icon","mat-mdc-focus-indicator","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],hostVars:1,hostBindings:function(i,r){2&i&&u.uIk("aria-hidden",null)},features:[u._Bn([{provide:Ij,useExisting:n}]),u.qOj]})}return n})(),vhe=0;const bhe=NB(H6(j6(Moe(class{constructor(n){this._elementRef=n}})),"primary"),-1);let N0=(()=>{class n extends bhe{_hasFocus(){return this._hasFocusInternal}get value(){return void 0!==this._value?this._value:this._textElement.textContent.trim()}set value(t){this._value=t}get removable(){return this._removable}set removable(t){this._removable=cr(t)}get highlighted(){return this._highlighted}set highlighted(t){this._highlighted=cr(t)}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}constructor(t,i,r,s,a,d,f,m){super(i),this._changeDetectorRef=t,this._ngZone=r,this._focusMonitor=s,this._globalRippleOptions=f,this._onFocus=new zt.x,this._onBlur=new zt.x,this.role=null,this._hasFocusInternal=!1,this.id="mat-mdc-chip-"+vhe++,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this._removable=!0,this._highlighted=!1,this.removed=new u.vpe,this.destroyed=new u.vpe,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=(0,u.f3M)($oe),this._document=a,this._animationsDisabled="NoopAnimations"===d,null!=m&&(this.tabIndex=parseInt(m)??this.defaultTabIndex),this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){const t=this._elementRef.nativeElement;this._isBasicChip=t.hasAttribute(this.basicChipAttrName)||t.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=(0,Zi.T)(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!(!this.trailingIcon&&!this.removeIcon)}_handleKeydown(t){(8===t.keyCode||46===t.keyCode)&&(t.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(t){return this._getActions().find(i=>{const r=i._elementRef.nativeElement;return r===t||r.contains(t)})}_getActions(){const t=[];return this.primaryAction&&t.push(this.primaryAction),this.removeIcon&&t.push(this.removeIcon),this.trailingIcon&&t.push(this.trailingIcon),t}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{const i=null!==t;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):this._ngZone.onStable.pipe(Nn(1)).subscribe(()=>this._ngZone.run(()=>this._onBlur.next({chip:this}))))})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(DS),u.Y36(ce),u.Y36(u.QbO,8),u.Y36($O,8),u.$8M("tabindex"))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(i,r,s){if(1&i&&(u.Suo(s,wj,5),u.Suo(s,Ej,5),u.Suo(s,Ij,5),u.Suo(s,wj,5),u.Suo(s,Ej,5),u.Suo(s,Ij,5)),2&i){let a;u.iGM(a=u.CRH())&&(r.leadingIcon=a.first),u.iGM(a=u.CRH())&&(r.trailingIcon=a.first),u.iGM(a=u.CRH())&&(r.removeIcon=a.first),u.iGM(a=u.CRH())&&(r._allLeadingIcons=a),u.iGM(a=u.CRH())&&(r._allTrailingIcons=a),u.iGM(a=u.CRH())&&(r._allRemoveIcons=a)}},viewQuery:function(i,r){if(1&i&&u.Gf(P0,5),2&i){let s;u.iGM(s=u.CRH())&&(r.primaryAction=s.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:30,hostBindings:function(i,r){1&i&&u.NdJ("keydown",function(a){return r._handleKeydown(a)}),2&i&&(u.Ikx("id",r.id),u.uIk("role",r.role)("tabindex",r.role?r.tabIndex:null)("aria-label",r.ariaLabel),u.ekj("mdc-evolution-chip",!r._isBasicChip)("mdc-evolution-chip--disabled",r.disabled)("mdc-evolution-chip--with-trailing-action",r._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",r.leadingIcon)("mdc-evolution-chip--with-primary-icon",r.leadingIcon)("mdc-evolution-chip--with-avatar",r.leadingIcon)("mat-mdc-chip-with-avatar",r.leadingIcon)("mat-mdc-chip-highlighted",r.highlighted)("mat-mdc-chip-disabled",r.disabled)("mat-mdc-basic-chip",r._isBasicChip)("mat-mdc-standard-chip",!r._isBasicChip)("mat-mdc-chip-with-trailing-icon",r._hasTrailingIcon())("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaDescription:["aria-description","ariaDescription"],value:"value",removable:"removable",highlighted:"highlighted"},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[u._Bn([{provide:$P,useExisting:n}]),u.qOj],ngContentSelectors:P9,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],["class","mdc-evolution-chip__graphic mat-mdc-chip-graphic",4,"ngIf"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],["class","mdc-evolution-chip__cell mdc-evolution-chip__cell--trailing",4,"ngIf"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(i,r){1&i&&(u.F$t(O9),u._UZ(0,"span",0),u.TgZ(1,"span",1)(2,"span",2),u.YNc(3,nhe,2,0,"span",3),u.TgZ(4,"span",4),u.Hsn(5),u._UZ(6,"span",5),u.qZA()()(),u.YNc(7,ihe,2,0,"span",6)),2&i&&(u.xp6(2),u.Q6J("isInteractive",!1),u.xp6(1),u.Q6J("ngIf",r.leadingIcon),u.xp6(4),u.Q6J("ngIf",r._hasTrailingIcon()))},dependencies:[$s,P0],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{overflow-x:hidden}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mdc-evolution-chip__action--primary:before{box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1}.mdc-evolution-chip--touch{margin-top:8px;margin-bottom:8px}.mdc-evolution-chip__action-touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-evolution-chip__text-label{white-space:nowrap;user-select:none;text-overflow:ellipsis;overflow:hidden}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mdc-evolution-chip__checkmark-background{opacity:0}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__graphic{transition:width 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark{transition:opacity 50ms 0ms linear,transform 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-50%, -50%)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@keyframes mdc-evolution-chip-enter{from{transform:scale(0.8);opacity:.4}to{transform:scale(1);opacity:1}}.mdc-evolution-chip--enter{animation:mdc-evolution-chip-enter 100ms 0ms cubic-bezier(0, 0, 0.2, 1)}@keyframes mdc-evolution-chip-exit{from{opacity:1}to{opacity:0}}.mdc-evolution-chip--exit{animation:mdc-evolution-chip-exit 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-evolution-chip--hidden{opacity:0;pointer-events:none;transition:width 150ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height);--mdc-chip-container-shape-family:rounded;--mdc-chip-container-shape-radius:16px 16px 16px 16px;--mdc-chip-with-avatar-avatar-shape-family:rounded;--mdc-chip-with-avatar-avatar-shape-radius:14px 14px 14px 14px;--mdc-chip-with-avatar-avatar-size:28px;--mdc-chip-with-icon-icon-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__ripple{border-radius:var(--mdc-chip-container-shape-radius)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-radius:var(--mdc-chip-container-shape-radius)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius)}.mat-mdc-standard-chip.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:var(--mdc-chip-with-avatar-avatar-size)}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{height:var(--mdc-chip-with-avatar-avatar-size);width:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font);line-height:var(--mdc-chip-label-text-line-height);font-size:var(--mdc-chip-label-text-size);font-weight:var(--mdc-chip-label-text-weight);letter-spacing:var(--mdc-chip-label-text-tracking)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{height:var(--mdc-chip-with-icon-icon-size);width:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary.mdc-ripple-upgraded--background-focused .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:not(.mdc-ripple-upgraded):focus .mdc-evolution-chip__ripple::before{transition-duration:75ms;opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color);opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-standard-chip .mdc-evolution-chip__checkmark{height:20px;width:20px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-mdc-standard-chip .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:.4}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary{flex-basis:100%}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{opacity:.04}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{opacity:.12}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-chip-remove{opacity:.54}.mat-mdc-chip-remove:focus{opacity:1}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px) * -1);left:8px;right:8px}.mat-mdc-chip-remove .mat-icon{width:inherit;height:inherit;font-size:inherit;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),WP=(()=>{class n{constructor(t,i){this._elementRef=t,this._document=i}initialize(t){this.getNativeElement().focus(),this.setValue(t)}getNativeElement(){return this._elementRef.nativeElement}setValue(t){this.getNativeElement().textContent=t,this._moveCursorToEndOfInput()}getValue(){return this.getNativeElement().textContent||""}_moveCursorToEndOfInput(){const t=this._document.createRange();t.selectNodeContents(this.getNativeElement()),t.collapse(!1);const i=window.getSelection();i.removeAllRanges(),i.addRange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(ce))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["span","matChipEditInput",""]],hostAttrs:["role","textbox","tabindex","-1","contenteditable","true",1,"mat-chip-edit-input"]})}return n})(),Cj=(()=>{class n extends N0{constructor(t,i,r,s,a,d,f,m){super(t,i,r,s,a,d,f,m),this.basicChipAttrName="mat-basic-chip-row",this._editStartPending=!1,this.editable=!1,this.edited=new u.vpe,this._isEditing=!1,this.role="row",this._onBlur.pipe(Hs(this.destroyed)).subscribe(()=>{this._isEditing&&!this._editStartPending&&this._onEditFinish()})}_hasTrailingIcon(){return!this._isEditing&&super._hasTrailingIcon()}_handleFocus(){!this._isEditing&&!this.disabled&&this.focus()}_handleKeydown(t){13!==t.keyCode||this.disabled?this._isEditing?t.stopPropagation():super._handleKeydown(t):this._isEditing?(t.preventDefault(),this._onEditFinish()):this.editable&&this._startEditing(t)}_handleDoubleclick(t){!this.disabled&&this.editable&&this._startEditing(t)}_startEditing(t){if(!this.primaryAction||this.removeIcon&&this._getSourceAction(t.target)===this.removeIcon)return;const i=this.value;this._isEditing=this._editStartPending=!0,this._changeDetectorRef.detectChanges(),setTimeout(()=>{this._getEditInput().initialize(i),this._editStartPending=!1})}_onEditFinish(){this._isEditing=this._editStartPending=!1,this.edited.emit({chip:this,value:this._getEditInput().getValue()}),(this._document.activeElement===this._getEditInput().getNativeElement()||this._document.activeElement===this._document.body)&&this.primaryAction.focus()}_isRippleDisabled(){return super._isRippleDisabled()||this._isEditing}_getEditInput(){return this.contentEditInput||this.defaultEditInput}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(DS),u.Y36(ce),u.Y36(u.QbO,8),u.Y36($O,8),u.$8M("tabindex"))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-chip-row"],["","mat-chip-row",""],["mat-basic-chip-row"],["","mat-basic-chip-row",""]],contentQueries:function(i,r,s){if(1&i&&u.Suo(s,WP,5),2&i){let a;u.iGM(a=u.CRH())&&(r.contentEditInput=a.first)}},viewQuery:function(i,r){if(1&i&&u.Gf(WP,5),2&i){let s;u.iGM(s=u.CRH())&&(r.defaultEditInput=s.first)}},hostAttrs:[1,"mat-mdc-chip","mat-mdc-chip-row","mdc-evolution-chip"],hostVars:27,hostBindings:function(i,r){1&i&&u.NdJ("focus",function(a){return r._handleFocus(a)})("dblclick",function(a){return r._handleDoubleclick(a)}),2&i&&(u.Ikx("id",r.id),u.uIk("tabindex",r.disabled?null:-1)("aria-label",null)("aria-description",null)("role",r.role),u.ekj("mat-mdc-chip-with-avatar",r.leadingIcon)("mat-mdc-chip-disabled",r.disabled)("mat-mdc-chip-editing",r._isEditing)("mat-mdc-chip-editable",r.editable)("mdc-evolution-chip--disabled",r.disabled)("mdc-evolution-chip--with-trailing-action",r._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",r.leadingIcon)("mdc-evolution-chip--with-primary-icon",r.leadingIcon)("mdc-evolution-chip--with-avatar",r.leadingIcon)("mat-mdc-chip-highlighted",r.highlighted)("mat-mdc-chip-with-trailing-icon",r._hasTrailingIcon()))},inputs:{color:"color",disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",editable:"editable"},outputs:{edited:"edited"},features:[u._Bn([{provide:N0,useExisting:n},{provide:$P,useExisting:n}]),u.qOj],ngContentSelectors:phe,decls:10,vars:12,consts:[[4,"ngIf"],["role","gridcell","matChipAction","",1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary",3,"tabIndex","disabled"],["class","mdc-evolution-chip__graphic mat-mdc-chip-graphic",4,"ngIf"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label",3,"ngSwitch"],[4,"ngSwitchCase"],["aria-hidden","true",1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],["class","mdc-evolution-chip__cell mdc-evolution-chip__cell--trailing","role","gridcell",4,"ngIf"],[1,"cdk-visually-hidden",3,"id"],[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[4,"ngIf","ngIfElse"],["defaultMatChipEditInput",""],["matChipEditInput",""],["role","gridcell",1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(i,r){1&i&&(u.F$t(fhe),u.YNc(0,ohe,2,0,"ng-container",0),u.TgZ(1,"span",1),u.YNc(2,ahe,2,0,"span",2),u.TgZ(3,"span",3),u.YNc(4,lhe,2,0,"ng-container",4),u.YNc(5,dhe,4,2,"ng-container",4),u._UZ(6,"span",5),u.qZA()(),u.YNc(7,hhe,2,0,"span",6),u.TgZ(8,"span",7),u._uU(9),u.qZA()),2&i&&(u.Q6J("ngIf",!r._isEditing),u.xp6(1),u.Q6J("tabIndex",r.tabIndex)("disabled",r.disabled),u.uIk("aria-label",r.ariaLabel)("aria-describedby",r._ariaDescriptionId),u.xp6(1),u.Q6J("ngIf",r.leadingIcon),u.xp6(1),u.Q6J("ngSwitch",r._isEditing),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(2),u.Q6J("ngIf",r._hasTrailingIcon()),u.xp6(1),u.Q6J("id",r._ariaDescriptionId),u.xp6(1),u.Oqu(r.ariaDescription))},dependencies:[$s,Ea,nl,P0,WP],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{overflow-x:hidden}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mdc-evolution-chip__action--primary:before{box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1}.mdc-evolution-chip--touch{margin-top:8px;margin-bottom:8px}.mdc-evolution-chip__action-touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-evolution-chip__text-label{white-space:nowrap;user-select:none;text-overflow:ellipsis;overflow:hidden}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mdc-evolution-chip__checkmark-background{opacity:0}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__graphic{transition:width 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark{transition:opacity 50ms 0ms linear,transform 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-50%, -50%)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@keyframes mdc-evolution-chip-enter{from{transform:scale(0.8);opacity:.4}to{transform:scale(1);opacity:1}}.mdc-evolution-chip--enter{animation:mdc-evolution-chip-enter 100ms 0ms cubic-bezier(0, 0, 0.2, 1)}@keyframes mdc-evolution-chip-exit{from{opacity:1}to{opacity:0}}.mdc-evolution-chip--exit{animation:mdc-evolution-chip-exit 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-evolution-chip--hidden{opacity:0;pointer-events:none;transition:width 150ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height);--mdc-chip-container-shape-family:rounded;--mdc-chip-container-shape-radius:16px 16px 16px 16px;--mdc-chip-with-avatar-avatar-shape-family:rounded;--mdc-chip-with-avatar-avatar-shape-radius:14px 14px 14px 14px;--mdc-chip-with-avatar-avatar-size:28px;--mdc-chip-with-icon-icon-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__ripple{border-radius:var(--mdc-chip-container-shape-radius)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-radius:var(--mdc-chip-container-shape-radius)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius)}.mat-mdc-standard-chip.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:var(--mdc-chip-with-avatar-avatar-size)}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{height:var(--mdc-chip-with-avatar-avatar-size);width:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font);line-height:var(--mdc-chip-label-text-line-height);font-size:var(--mdc-chip-label-text-size);font-weight:var(--mdc-chip-label-text-weight);letter-spacing:var(--mdc-chip-label-text-tracking)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{height:var(--mdc-chip-with-icon-icon-size);width:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary.mdc-ripple-upgraded--background-focused .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:not(.mdc-ripple-upgraded):focus .mdc-evolution-chip__ripple::before{transition-duration:75ms;opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color);opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-standard-chip .mdc-evolution-chip__checkmark{height:20px;width:20px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-mdc-standard-chip .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:.4}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary{flex-basis:100%}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{opacity:.04}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{opacity:.12}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-chip-remove{opacity:.54}.mat-mdc-chip-remove:focus{opacity:1}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px) * -1);left:8px;right:8px}.mat-mdc-chip-remove .mat-icon{width:inherit;height:inherit;font-size:inherit;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})();class whe{constructor(e){}}const Ehe=NB(whe);let Tj=(()=>{class n extends Ehe{get chipFocusChanges(){return this._getChipStream(t=>t._onFocus)}get chipDestroyedChanges(){return this._getChipStream(t=>t.destroyed)}get disabled(){return this._disabled}set disabled(t){this._disabled=cr(t),this._syncChipsState()}get empty(){return!this._chips||0===this._chips.length}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(t){this._explicitRole=t}get focused(){return this._hasFocusedChip()}constructor(t,i,r){super(t),this._elementRef=t,this._changeDetectorRef=i,this._dir=r,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new zt.x,this._defaultRole="presentation",this._disabled=!1,this._explicitRole=null,this._chipActions=new u.n_E}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(t=>t._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(t=>{t.disabled=this._disabled,t._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(t){this._originatesFromChip(t)&&this._keyManager.onKeydown(t)}_isValidIndex(t){return t>=0&&t<this._chips.length}_allowFocusEscape(){if(-1!==this.tabIndex){const t=this.tabIndex;this.tabIndex=-1,setTimeout(()=>this.tabIndex=t)}}_getChipStream(t){return this._chips.changes.pipe(Es(null),(0,jn.w)(()=>(0,Zi.T)(...this._chips.map(t))))}_originatesFromChip(t){let i=t.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-mdc-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(Es(this._chips)).subscribe(t=>{const i=[];t.forEach(r=>r._getActions().forEach(s=>i.push(s))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new Zse(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(t=>this._skipPredicate(t)),this.chipFocusChanges.pipe(Hs(this._destroyed)).subscribe(({chip:t})=>{const i=t._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe(Hs(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t))}_skipPredicate(t){return!t.isInteractive||t.disabled}_trackChipSetChanges(){this._chips.changes.pipe(Es(null),Hs(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(Hs(this._destroyed)).subscribe(t=>{const r=this._chips.toArray().indexOf(t.chip);this._isValidIndex(r)&&t.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=r)})}_redirectDestroyedChipFocus(){if(null!=this._lastDestroyedFocusedChipIndex){if(this._chips.length){const t=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[t];i.disabled?1===this._chips.length?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(My,8))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-chip-set"]],contentQueries:function(i,r,s){if(1&i&&u.Suo(s,N0,5),2&i){let a;u.iGM(a=u.CRH())&&(r._chips=a)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(i,r){1&i&&u.NdJ("keydown",function(a){return r._handleKeydown(a)}),2&i&&u.uIk("role",r.role)},inputs:{disabled:"disabled",role:"role"},features:[u.qOj],ngContentSelectors:bj,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,r){1&i&&(u.F$t(),u.TgZ(0,"div",0),u.Hsn(1),u.qZA())},styles:[".mdc-evolution-chip-set{display:flex}.mdc-evolution-chip-set:focus{outline:none}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mdc-evolution-chip-set--overflow .mdc-evolution-chip-set__chips{flex-flow:nowrap}.mdc-evolution-chip-set .mdc-evolution-chip-set__chips{margin-left:-8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip-set__chips,.mdc-evolution-chip-set .mdc-evolution-chip-set__chips[dir=rtl]{margin-left:0;margin-right:-8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-left:8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip,.mdc-evolution-chip-set .mdc-evolution-chip[dir=rtl]{margin-left:0;margin-right:8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-top:4px;margin-bottom:4px}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return n})();class The{constructor(e,t){this.source=e,this.value=t}}class She extends Tj{constructor(e,t,i,r,s,a,d){super(e,t,i),this._defaultErrorStateMatcher=r,this._parentForm=s,this._parentFormGroup=a,this.ngControl=d,this.stateChanges=new zt.x}}const xhe=Ooe(She);let B9=(()=>{class n extends xhe{get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=cr(t),this._syncChipsState()}get id(){return this._chipInput.id}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this._chips||0===this._chips.length)}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput.focused||this._hasFocusedChip()}get required(){return this._required??this.ngControl?.control?.hasValidator(Sue.required)??!1}set required(t){this._required=cr(t),this.stateChanges.next()}get shouldLabelFloat(){return!this.empty||this.focused}get value(){return this._value}set value(t){this._value=t}get chipBlurChanges(){return this._getChipStream(t=>t._onBlur)}constructor(t,i,r,s,a,d,f){super(t,i,r,d,s,a,f),this.controlType="mat-chip-grid",this._defaultRole="grid",this._ariaDescribedbyIds=[],this._onTouched=()=>{},this._onChange=()=>{},this._value=[],this.change=new u.vpe,this.valueChange=new u.vpe,this._chips=void 0,this.ngControl&&(this.ngControl.valueAccessor=this)}ngAfterContentInit(){this.chipBlurChanges.pipe(Hs(this._destroyed)).subscribe(()=>{this._blur(),this.stateChanges.next()}),(0,Zi.T)(this.chipFocusChanges,this._chips.changes).pipe(Hs(this._destroyed)).subscribe(()=>this.stateChanges.next())}ngAfterViewInit(){super.ngAfterViewInit()}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnDestroy(){super.ngOnDestroy(),this.stateChanges.complete()}registerInput(t){this._chipInput=t,this._chipInput.setDescribedByIds(this._ariaDescribedbyIds)}onContainerClick(t){!this.disabled&&!this._originatesFromChip(t)&&this.focus()}focus(){this.disabled||this._chipInput.focused||(!this._chips.length||this._chips.first.disabled?Promise.resolve().then(()=>this._chipInput.focus()):this._chips.length&&this._keyManager.setFirstItemActive(),this.stateChanges.next())}setDescribedByIds(t){this._ariaDescribedbyIds=t,this._chipInput?.setDescribedByIds(t)}writeValue(t){this._value=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}_blur(){this.disabled||setTimeout(()=>{this.focused||(this._propagateChanges(),this._markAsTouched())})}_allowFocusEscape(){this._chipInput.focused||super._allowFocusEscape()}_handleKeydown(t){9===t.keyCode?this._chipInput.focused&&lf(t,"shiftKey")&&this._chips.length&&!this._chips.last.disabled?(t.preventDefault(),this._keyManager.activeItem?this._keyManager.setActiveItem(this._keyManager.activeItem):this._focusLastChip()):super._allowFocusEscape():this._chipInput.focused||super._handleKeydown(t),this.stateChanges.next()}_focusLastChip(){this._chips.length&&this._chips.last.focus()}_propagateChanges(){const t=this._chips.length?this._chips.toArray().map(i=>i.value):[];this._value=t,this.change.emit(new The(this,t)),this.valueChange.emit(t),this._onChange(t),this._changeDetectorRef.markForCheck()}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(My,8),u.Y36(BP,8),u.Y36(jP,8),u.Y36(z6),u.Y36(hf,10))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-chip-grid"]],contentQueries:function(i,r,s){if(1&i&&u.Suo(s,Cj,5),2&i){let a;u.iGM(a=u.CRH())&&(r._chips=a)}},hostAttrs:[1,"mat-mdc-chip-set","mat-mdc-chip-grid","mdc-evolution-chip-set"],hostVars:10,hostBindings:function(i,r){1&i&&u.NdJ("focus",function(){return r.focus()})("blur",function(){return r._blur()}),2&i&&(u.Ikx("tabIndex",r._chips&&0===r._chips.length?-1:r.tabIndex),u.uIk("role",r.role)("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState),u.ekj("mat-mdc-chip-list-disabled",r.disabled)("mat-mdc-chip-list-invalid",r.errorState)("mat-mdc-chip-list-required",r.required))},inputs:{tabIndex:"tabIndex",disabled:"disabled",placeholder:"placeholder",required:"required",value:"value",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},features:[u._Bn([{provide:A9,useExisting:n}]),u.qOj],ngContentSelectors:bj,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,r){1&i&&(u.F$t(),u.TgZ(0,"div",0),u.Hsn(1),u.qZA())},styles:[".mdc-evolution-chip-set{display:flex}.mdc-evolution-chip-set:focus{outline:none}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mdc-evolution-chip-set--overflow .mdc-evolution-chip-set__chips{flex-flow:nowrap}.mdc-evolution-chip-set .mdc-evolution-chip-set__chips{margin-left:-8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip-set__chips,.mdc-evolution-chip-set .mdc-evolution-chip-set__chips[dir=rtl]{margin-left:0;margin-right:-8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-left:8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip,.mdc-evolution-chip-set .mdc-evolution-chip[dir=rtl]{margin-left:0;margin-right:8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-top:4px;margin-bottom:4px}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return n})(),Dhe=0,H9=(()=>{class n{set chipGrid(t){t&&(this._chipGrid=t,this._chipGrid.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(t){this._addOnBlur=cr(t)}get disabled(){return this._disabled||this._chipGrid&&this._chipGrid.disabled}set disabled(t){this._disabled=cr(t)}get empty(){return!this.inputElement.value}constructor(t,i,r){this._elementRef=t,this.focused=!1,this._addOnBlur=!1,this.chipEnd=new u.vpe,this.placeholder="",this.id="mat-mdc-chip-list-input-"+Dhe++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement,this.separatorKeyCodes=i.separatorKeyCodes,r&&this.inputElement.classList.add("mat-mdc-form-field-input-control")}ngOnChanges(){this._chipGrid.stateChanges.next()}ngOnDestroy(){this.chipEnd.complete()}ngAfterContentInit(){this._focusLastChipOnBackspace=this.empty}_keydown(t){if(t){if(8===t.keyCode&&this._focusLastChipOnBackspace)return this._chipGrid._focusLastChip(),void t.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(t)}_keyup(t){!this._focusLastChipOnBackspace&&8===t.keyCode&&this.empty&&(this._focusLastChipOnBackspace=!0,t.preventDefault())}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipGrid.focused||this._chipGrid._blur(),this._chipGrid.stateChanges.next()}_focus(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipGrid.stateChanges.next()}_emitChipEnd(t){(!t||this._isSeparatorKey(t))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),t?.preventDefault())}_onInput(){this._chipGrid.stateChanges.next()}focus(){this.inputElement.focus()}clear(){this.inputElement.value="",this._focusLastChipOnBackspace=!0}setDescribedByIds(t){const i=this._elementRef.nativeElement;t.length?i.setAttribute("aria-describedby",t.join(" ")):i.removeAttribute("aria-describedby")}_isSeparatorKey(t){return!lf(t)&&new Set(this.separatorKeyCodes).has(t.keyCode)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(GP),u.Y36(vj,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-mdc-chip-input","mat-mdc-input-element","mdc-text-field__input","mat-input-element"],hostVars:6,hostBindings:function(i,r){1&i&&u.NdJ("keydown",function(a){return r._keydown(a)})("keyup",function(a){return r._keyup(a)})("blur",function(){return r._blur()})("focus",function(){return r._focus()})("input",function(){return r._onInput()}),2&i&&(u.Ikx("id",r.id),u.uIk("disabled",r.disabled||null)("placeholder",r.placeholder||null)("aria-invalid",r._chipGrid&&r._chipGrid.ngControl?r._chipGrid.ngControl.invalid:null)("aria-required",r._chipGrid&&r._chipGrid.required||null)("required",r._chipGrid&&r._chipGrid.required||null))},inputs:{chipGrid:["matChipInputFor","chipGrid"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[u.TTD]})}return n})(),Ahe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[z6,{provide:GP,useValue:{separatorKeyCodes:[13]}}],imports:[_a,Jn,Z6,_a]})}return n})();class Sj{}class ff{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ff?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ff;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ff?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let a=this.headers.get(t);if(!a)return;a=a.filter(d=>-1===s.indexOf(d)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Rhe{encodeKey(e){return j9(e)}encodeValue(e){return j9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Mhe=/%(\d[a-f0-9])/gi,Ohe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function j9(n){return encodeURIComponent(n).replace(Mhe,(e,t)=>Ohe[t]??e)}function qP(n){return`${n}`}class qm{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Rhe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function khe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[a,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],f=t.get(a)||[];f.push(d),t.set(a,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(qP):[qP(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new qm({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(qP(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(qP(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Phe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function z9(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function G9(n){return typeof Blob<"u"&&n instanceof Blob}function $9(n){return typeof FormData<"u"&&n instanceof FormData}class lx{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Nhe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ff),this.context||(this.context=new Phe),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+a}}else this.params=new qm,this.urlWithParams=t}serializeBody(){return null===this.body?null:z9(this.body)||G9(this.body)||$9(this.body)||function Fhe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$9(this.body)?null:G9(this.body)?this.body.type||null:z9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let f=e.headers||this.headers,m=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(f=Object.keys(e.setHeaders).reduce((I,D)=>I.set(D,e.setHeaders[D]),f)),e.setParams&&(m=Object.keys(e.setParams).reduce((I,D)=>I.set(D,e.setParams[D]),m)),new lx(t,i,s,{params:m,headers:f,context:b,reportProgress:d,responseType:r,withCredentials:a})}}var Dj=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Dj||{});class Lhe{constructor(e,t=200,i="OK"){this.headers=e.headers||new ff,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class cx extends Lhe{constructor(e={}){super(e),this.type=Dj.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new cx({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Aj(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Rj=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof lx)s=t;else{let f,m;f=r.headers instanceof ff?r.headers:new ff(r.headers),r.params&&(m=r.params instanceof qm?r.params:new qm({fromObject:r.params})),s=new lx(t,i,void 0!==r.body?r.body:null,{headers:f,context:r.context,params:m,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const a=(0,pt.of)(s).pipe(Jw(f=>this.handler.handle(f)));if(t instanceof lx||"events"===r.observe)return a;const d=a.pipe(Pn(f=>f instanceof cx));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,ot.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,ot.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,ot.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,ot.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new qm).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Aj(r,i))}post(t,i,r={}){return this.request("POST",t,Aj(r,i))}put(t,i,r={}){return this.request("PUT",t,Aj(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Sj))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const ife=["*"];let ZP;function ux(n){return function rfe(){if(void 0===ZP&&(ZP=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(ZP=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ZP}()?.createHTML(n)||n}function t8(n){return Error(`Unable to find icon with the name "${n}"`)}function n8(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function i8(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ky{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let QP=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Ky(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const a=this._sanitizer.sanitize(u.q3G.HTML,r);if(!a)throw i8(r);const d=ux(a);return this._addSvgIconConfig(t,i,new Ky("",d,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Ky(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(u.q3G.HTML,i);if(!s)throw i8(i);const a=ux(s);return this._addSvgIconSetConfig(t,new Ky("",a,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!i)throw n8(t);const r=this._cachedIconsByUrl.get(i);return r?(0,pt.of)(XP(r)):this._loadSvgIconFromConfig(new Ky(t,null)).pipe((0,$r.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,ot.U)(s=>XP(s)))}getNamedSvgIcon(t,i=""){const r=r8(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const a=this._iconSetConfigs.get(i);return a?this._getSvgFromIconSetConfigs(t,a):Xw(t8(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,pt.of)(XP(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ot.U)(i=>XP(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?(0,pt.of)(r):y5(i.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Tm(d=>{const m=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,a.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(m)),(0,pt.of)(null)})))).pipe((0,ot.U)(()=>{const a=this._extractIconWithNameFromAnySet(t,i);if(!a)throw t8(t);return a}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const a=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(a,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,$r.b)(i=>t.svgText=i),(0,ot.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,pt.of)(null):this._fetchIcon(t).pipe((0,$r.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const a=s.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,r);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),r);const d=this._svgElementFromString(ux("<svg></svg>"));return d.appendChild(a),this._setSvgAttributes(d,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(ux("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:a,value:d}=r[s];"id"!==a&&i.setAttribute(a,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function sfe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,i);if(!a)throw n8(i);const d=this._inProgressUrlFetches.get(a);if(d)return d;const f=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe((0,ot.U)(m=>ux(m)),JM(()=>this._inProgressUrlFetches.delete(a)),(0,Os.B)());return this._inProgressUrlFetches.set(a,f),f}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(r8(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return afe(s)?new Ky(s.url,null,s.options):new Ky(s,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Rj,8),u.LFG(_s),u.LFG(ce,8),u.LFG(u.qLn))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XP(n){return n.cloneNode(!0)}function r8(n,e){return n+":"+e}function afe(n){return!(!n.url||!n.options)}const lfe=H6(class{constructor(n){this._elementRef=n}}),cfe=new u.OlP("MAT_ICON_DEFAULT_OPTIONS"),ufe=new u.OlP("mat-icon-location",{providedIn:"root",factory:function dfe(){const n=(0,u.f3M)(ce),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),s8=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],hfe=s8.map(n=>`[${n}]`).join(", "),ffe=/^url\(['"]?#(.*?)['"]?\)$/;let pfe=(()=>{class n extends lfe{get inline(){return this._inline}set inline(t){this._inline=cr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,a,d){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Hc.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(a=>{s.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(hfe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)s8.forEach(a=>{const d=i[s],f=d.getAttribute(a),m=f?f.match(ffe):null;if(m){let b=r.get(d);b||(b=[],r.set(d,b)),b.push({name:a,value:m[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Nn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(QP),u.$8M("aria-hidden"),u.Y36(ufe),u.Y36(u.qLn),u.Y36(cfe,8))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(u.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),u.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:ife,decls:1,vars:0,template:function(i,r){1&i&&(u.F$t(),u.Hsn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),mfe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[_a,_a]})}return n})();function o8(n,e){return e?t=>hh(e.pipe(Nn(1),function gfe(){return(0,Pi.e)((n,e)=>{n.subscribe((0,qn.x)(e,_L.Z))})}()),t.pipe(o8(n))):(0,co.z)((t,i)=>(0,fm.Xf)(n(t,i)).pipe(Nn(1),Y3(t)))}const yfe=["panel"];function vfe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",0,1),u.NdJ("@panelAnimation.done",function(r){u.CHM(t);const s=u.oxw();return u.KtG(s._animationDone.next(r))}),u.Hsn(2),u.qZA()}if(2&n){const t=e.id,i=u.oxw();u.Q6J("id",i.id)("ngClass",i._classList)("@panelAnimation",i.isOpen?"visible":"hidden"),u.uIk("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(t))}}const bfe=["*"],wfe=UB("panelAnimation",[qO("void, hidden",$l({opacity:0,transform:"scaleY(0.8)"})),RS(":enter, hidden => visible",[VB([y0("0.03s linear",$l({opacity:1})),y0("0.12s cubic-bezier(0, 0, 0.2, 1)",$l({transform:"scaleY(1)"}))])]),RS(":leave, visible => hidden",[y0("0.075s linear",$l({opacity:0}))])]);let Efe=0;class Ife{constructor(e,t){this.source=e,this.option=t}}const Cfe=j6(class{}),a8=new u.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function Tfe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let Sfe=(()=>{class n extends Cfe{get isOpen(){return this._isOpen&&this.showPanel}_setColor(t){this._color=t,this._setThemeClasses(this._classList)}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(t){this._autoActiveFirstOption=cr(t)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(t){this._autoSelectActiveOption=cr(t)}get requireSelection(){return this._requireSelection}set requireSelection(t){this._requireSelection=cr(t)}set classList(t){this._classList=t&&t.length?function kre(n,e=/\s+/){const t=[];if(null!=n){const i=Array.isArray(n)?n:`${n}`.split(e);for(const r of i){const s=`${r}`.trim();s&&t.push(s)}}return t}(t).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}constructor(t,i,r,s){super(),this._changeDetectorRef=t,this._elementRef=i,this._defaults=r,this._activeOptionChanges=Hc.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new u.vpe,this.opened=new u.vpe,this.closed=new u.vpe,this.optionActivated=new u.vpe,this._classList={},this.id="mat-autocomplete-"+Efe++,this.inertGroups=s?.SAFARI||!1,this._autoActiveFirstOption=!!r.autoActiveFirstOption,this._autoSelectActiveOption=!!r.autoSelectActiveOption,this._requireSelection=!!r.requireSelection}ngAfterContentInit(){this._keyManager=new Yse(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const i=new Ife(this,t);this.optionSelected.emit(i)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_setVisibilityClasses(t){t[this._visibleClass]=this.showPanel,t[this._hiddenClass]=!this.showPanel}_setThemeClasses(t){t["mat-primary"]="primary"===this._color,t["mat-warn"]="warn"===this._color,t["mat-accent"]="accent"===this._color}_skipPredicate(t){return t.disabled}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(a8),u.Y36(ga))};static#t=this.\u0275dir=u.lG2({type:n,viewQuery:function(i,r){if(1&i&&(u.Gf(u.Rgc,7),u.Gf(yfe,5)),2&i){let s;u.iGM(s=u.CRH())&&(r.template=s.first),u.iGM(s=u.CRH())&&(r.panel=s.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",requireSelection:"requireSelection",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[u.qOj]})}return n})(),xfe=(()=>{class n extends Sfe{constructor(){super(...arguments),this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._animationDone=new u.vpe,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=cr(t),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}ngOnDestroy(){super.ngOnDestroy(),this._animationDone.complete()}_skipPredicate(t){return!1}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=u.n5z(n)))(r||n)}}();static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(i,r,s){if(1&i&&(u.Suo(s,X6,5),u.Suo(s,e7,5)),2&i){let a;u.iGM(a=u.CRH())&&(r.optionGroups=a),u.iGM(a=u.CRH())&&(r.options=a)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{disableRipple:"disableRipple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matAutocomplete"],features:[u._Bn([{provide:Q6,useExisting:n}]),u.qOj],ngContentSelectors:bfe,decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(i,r){1&i&&(u.F$t(),u.YNc(0,vfe,3,5,"ng-template"))},dependencies:[ba],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[wfe]},changeDetection:0})}return n})();const Dfe={provide:ql,useExisting:(0,u.Gpc)(()=>c8),multi:!0},l8=new u.OlP("mat-autocomplete-scroll-strategy"),Rfe={provide:l8,deps:[Om],useFactory:function Afe(n){return()=>n.scrollStrategies.reposition()}};let kfe=(()=>{class n{get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(t){this._autocompleteDisabled=cr(t)}constructor(t,i,r,s,a,d,f,m,b,I,D){this._element=t,this._overlay=i,this._viewContainerRef=r,this._zone=s,this._changeDetectorRef=a,this._dir=f,this._formField=m,this._document=b,this._viewportRuler=I,this._defaults=D,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Hc.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new zt.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=JT(()=>{const O=this.autocomplete?this.autocomplete.options:null;return O?O.changes.pipe(Es(O),(0,jn.w)(()=>(0,Zi.T)(...O.map(V=>V.onSelectionChange)))):this._zone.onStable.pipe(Nn(1),(0,jn.w)(()=>this.optionSelections))}),this._handlePanelKeydown=O=>{(27===O.keyCode&&!lf(O)||38===O.keyCode&&lf(O,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),O.stopPropagation(),O.preventDefault())},this._trackedModal=null,this._scrollStrategy=d}ngAfterViewInit(){const t=this._getWindow();typeof t<"u"&&this._zone.runOutsideAngular(()=>t.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const t=this._getWindow();typeof t<"u"&&t.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel(),this._trackedModal&&C6(this._trackedModal,"aria-owns",this.autocomplete.id)}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&RB(this._trackedModal,"aria-owns",this.autocomplete.id)}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,Zi.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Pn(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Pn(()=>this._overlayAttached)):(0,pt.of)()).pipe((0,ot.U)(t=>t instanceof J6?t:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,Zi.T)(m0(this._document,"click"),m0(this._document,"auxclick"),m0(this._document,"touchend")).pipe(Pn(t=>{const i=af(t),r=this._formField?this._formField._elementRef.nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const i=t.keyCode,r=lf(t);if(27===i&&!r&&t.preventDefault(),this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,a=38===i||40===i;9===i||a&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):a&&this._canOpen()&&this.openPanel(),(a||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let i=t.target,r=i.value;"number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r&&(this._previousValue=r,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(r),r||this._clearPreviousSelectedOption(null,!1),this._canOpen()&&this._document.activeElement===t.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const t=this._zone.onStable.pipe(Nn(1)),i=this.autocomplete.options.changes.pipe((0,$r.b)(()=>this._positionStrategy.reapplyLastPosition()),function _fe(n,e=Yf.z){const t=s6(n,e);return o8(()=>t)}(0));return(0,Zi.T)(t,i).pipe((0,jn.w)(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),r!==this.panelOpen&&(this.panelOpen?(this._captureValueOnAttach(),this._emitOpened()):this.autocomplete.closed.emit())}),this.panelClosingActions)),Nn(1)).subscribe(r=>this._setValueAndClose(r))}_emitOpened(){this.autocomplete.opened.emit()}_captureValueOnAttach(){this._valueOnAttach=this._element.nativeElement.value}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(t){const i=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(t):t;this._updateNativeInputValue(i??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const i=this.autocomplete,r=t?t.source:this._pendingAutoselectedOption;r?(this._clearPreviousSelectedOption(r),this._assignOptionValue(r.value),this._onChange(r.value),i._emitSelectEvent(r),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(Nn(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,i){this.autocomplete?.options?.forEach(r=>{r!==t&&r.selected&&r.deselect(i)})}_attachOverlay(){let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new wB(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})})),t&&!t.hasAttached()&&(t.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this._captureValueOnAttach(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new TB({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let a;a="above"===this.position?s:"below"===this.position?i:[...i,...s],t.withPositions(a)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let i=-1;for(let r=0;r<t.options.length;r++)if(!t.options.get(r).disabled){i=r;break}t._keyManager.setActiveItem(i)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(t){const i=this.autocomplete,r=function zoe(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let a=0;a<n+1;a++)i[a].group&&i[a].group===r[s]&&s++;return s}return 0}(t,i.options,i.optionGroups);if(0===t&&1===r)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[t];if(s){const a=s._getHostElement(),d=function Goe(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}(a.offsetTop,a.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(d)}}}_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const i=this.autocomplete.id;this._trackedModal&&RB(this._trackedModal,"aria-owns",i),C6(t,"aria-owns",i),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(RB(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(Om),u.Y36(u.s_b),u.Y36(u.R0b),u.Y36(u.sBO),u.Y36(l8),u.Y36(My,8),u.Y36(vj,9),u.Y36(ce,8),u.Y36(_B),u.Y36(a8,8))};static#t=this.\u0275dir=u.lG2({type:n,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[u.TTD]})}return n})(),c8=(()=>{class n extends kfe{constructor(){super(...arguments),this._aboveClass="mat-mdc-autocomplete-panel-above"}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=u.n5z(n)))(r||n)}}();static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,r){1&i&&u.NdJ("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(a){return r._handleInput(a)})("keydown",function(a){return r._handleKeydown(a)})("click",function(){return r._handleClick()}),2&i&&u.uIk("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-controls",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[u._Bn([Dfe]),u.qOj]})}return n})(),Mfe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[Rfe],imports:[SB,t7,_a,Jn,yB,t7,_a]})}return n})();const Ofe=["fruitInput"];function Pfe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-chip-row",16),u.NdJ("removed",function(){const s=u.CHM(t).$implicit,a=u.oxw();return u.KtG(a.remove(s))}),u._uU(1),u.TgZ(2,"button",17)(3,"mat-icon"),u._uU(4,"cancel"),u.qZA()()()}if(2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t," "),u.xp6(1),u.uIk("aria-label","remove "+t)}}function Nfe(n,e){if(1&n&&(u.TgZ(0,"mat-option",18),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.hij(" ",t," ")}}let u8=(()=>{class n{constructor(t,i){this.data=t,this.imageService=i,this.pointerImg=this.data.deletefile,this.separatorKeysCodes=[13,188],this.fruitCtrl=new HP(""),this.fruits=["Lemon"],this.allFruits=["Apple","Lemon","Lime","Orange","Strawberry"],this.announcer=(0,u.f3M)(M6),this.filteredFruits=this.fruitCtrl.valueChanges.pipe(Es(null),(0,ot.U)(r=>r?this._filter(r):this.data.inputTags.slice()))}ngOnInit(){console.log(this.data.deletefile)}add(t){const i=(t.value||"").trim();this.fruits.includes(i)?console.log("caught"):i&&(this.fruits.push(i),this.allFruits.push(i),this.data.inputTags.push(i)),t.chipInput.clear(),this.fruitCtrl.setValue(null)}remove(t){const i=this.fruits.indexOf(t);i>=0&&(this.fruits.splice(i,1),this.announcer.announce(`Removed ${t}`))}selected(t){this.fruits.includes(t.option.viewValue)?console.log("caught"):this.fruits.push(t.option.viewValue),this.fruitInput.nativeElement.value="",this.fruitCtrl.setValue(null)}_filter(t){const i=t.toLowerCase();return this.allFruits.filter(r=>r.toLowerCase().includes(i))}closeDialog(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(p7),u.Y36(zB))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-image-detail"]],viewQuery:function(i,r){if(1&i&&u.Gf(Ofe,5),2&i){let s;u.iGM(s=u.CRH())&&(r.fruitInput=s.first)}},decls:29,vars:10,consts:[[1,"image-detail-container"],[1,"image-container"],[3,"src"],[1,"col2"],["id","metadata"],[3,"href"],[1,"example-chip-list"],["aria-label","Fruit selection"],["chipGrid",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New Fruit...",3,"formControl","matChipInputFor","matAutocomplete","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["fruitInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["id","delete"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(i,r){if(1&i&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4)(5,"h1"),u._uU(6," File Name: "),u.qZA(),u.TgZ(7,"p"),u._uU(8," Link: "),u.TgZ(9,"a",5),u._uU(10,"Link"),u.qZA()(),u.TgZ(11,"p"),u._uU(12," Created: "),u.qZA(),u.TgZ(13,"form")(14,"mat-form-field",6)(15,"mat-label"),u._uU(16,"Favorite Fruits"),u.qZA(),u.TgZ(17,"mat-chip-grid",7,8),u.YNc(19,Pfe,5,2,"mat-chip-row",9),u.qZA(),u.TgZ(20,"input",10,11),u.NdJ("matChipInputTokenEnd",function(a){return r.add(a)}),u.qZA(),u.TgZ(22,"mat-autocomplete",12,13),u.NdJ("optionSelected",function(a){return r.selected(a)}),u.YNc(24,Nfe,2,2,"mat-option",14),u.ALo(25,"async"),u.qZA()()()(),u.TgZ(26,"div")(27,"button",15),u._uU(28," Delete "),u.qZA()()()()),2&i){const s=u.MAs(18),a=u.MAs(23);u.xp6(2),u.s9C("src",r.data.deletefile,u.LSH),u.xp6(7),u.s9C("href",r.data.deletefile,u.LSH),u.xp6(10),u.Q6J("ngForOf",r.fruits),u.xp6(1),u.Q6J("formControl",r.fruitCtrl)("matChipInputFor",s)("matAutocomplete",a)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes),u.xp6(4),u.Q6J("ngForOf",u.lcZ(25,8,r.filteredFruits))}},dependencies:[tl,ehe,yj,B9,H9,L9,Cj,pfe,xfe,e7,c8,s9,AP,G5,$5,hj,Xc],styles:[".image-detail-container[_ngcontent-%COMP%]{display:flex}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70vw;max-height:90vh;object-fit:cover}"]})}return n})();const Ffe=["fruitInput"];function Lfe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",16),u.NdJ("removed",function(){const s=u.CHM(t).$implicit,a=u.oxw();return u.KtG(a.remove(s))}),u.TgZ(1,"button",17),u._uU(2),u.TgZ(3,"span",18),u._uU(4,"x"),u.qZA()()()}if(2&n){const t=e.$implicit;u.xp6(2),u.hij(" ",t," ")}}function Ufe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19)(1,"div",20)(2,"img",21),u.NdJ("click",function(r){u.CHM(t);const s=u.oxw();return u.KtG(s.imageDetails(r))}),u.qZA()()()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("src",t,u.LSH)}}let Vfe=(()=>{class n{constructor(t,i,r){this.imageService=t,this.authService=i,this.dialog=r,this.database=function gue(n=(0,Wt.getApp)(),e){const t=(0,Wt._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=(0,A.P0)("database");i&&function _ue(n,e,t,i={}){(n=(0,A.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&wd("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&wd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new FS(FS.OWNER);else if(i.mockUserToken){const a="string"==typeof i.mockUserToken?i.mockUserToken:(0,A.Sg)(i.mockUserToken,n.app.options.projectId);s=new FS(a)}!function due(n,e,t,i){n.repoInfo_=new YB(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(t,...i)}return t}(),this.storage=ip(),this.imgList=[],this.deleteFile={},this.allTags=["stuff","more stuff","other","test","Tagged"],this.separatorKeysCodes=[13,188],this.fruitCtrl=new HP(""),this.fruits=["Tagged"],this.announcer=(0,u.f3M)(M6),this.filteredFruits=this.fruitCtrl.valueChanges.pipe(Es(null),(0,ot.U)(s=>s?this._filter(s):this.allTags.slice()))}writeUserData(){console.log("tags:"+[]),QH(h5(this.database,"users/"+this.authService.userData.uid),{username:"name1",email:"email1",profile_picture:"imageUrl1"})}listFiles(){jg(Mu(this.storage,"users//"+this.authService.userData.uid)).then(i=>{i.items.forEach(r=>{rD(r).then(s=>{this.imgList.push(s)})})}).catch(i=>{})}imageDetails(t){this.deleteFile=t.target.src,this.dialog.open(u8,{height:t.target.imageHeight,width:t.target.imageWidth,maxHeight:"90vh",maxWidth:"90vw",hasBackdrop:!0,backdropClass:"image-details",data:{deletefile:this.deleteFile,inputTags:this.allTags}}).afterClosed().subscribe(a=>{console.log("closed")})}add(t){const i=(t.value||"").trim();this.fruits.includes(i)?console.log("caught"):i&&(this.fruits.push(i),this.allTags.push(i)),t.chipInput.clear(),this.fruitCtrl.setValue(null)}addTag(){var t=document.getElementById("nameInput").value;this.fruits.includes(t)||t&&(this.fruits.push(t),this.allTags.push(t))}remove(t){const i=this.fruits.indexOf(t);i>=0&&(this.fruits.splice(i,1),this.announcer.announce(`Removed ${t}`))}selected(t){this.fruits.includes(t.option.viewValue)?console.log("caught"):this.fruits.push(t.option.viewValue),this.fruitInput.nativeElement.value="",this.fruitCtrl.setValue(null)}_filter(t){const i=t.toLowerCase();return this.allTags.filter(r=>r.toLowerCase().includes(i))}addChipForm(t){t.preventDefault();const i=document.getElementById("nameInput");""!==i.value.trim()&&(i.value="")}onDocumentClick(t){let i=document.getElementById("myModal");t.target==i&&(i.style.display="none")}displayModal(){document.getElementById("myModal").style.display="block"}ngOnInit(){this.listFiles()}ngOnChanges(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(zB),u.Y36(Mm),u.Y36(jB))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-gallery"]],viewQuery:function(i,r){if(1&i&&u.Gf(Ffe,5),2&i){let s;u.iGM(s=u.CRH())&&(r.fruitInput=s.first)}},hostBindings:function(i,r){1&i&&u.NdJ("click",function(a){return r.onDocumentClick(a)},!1,u.evT)},features:[u.TTD],decls:33,vars:4,consts:[[3,"click"],["id","myModal",1,"modal"],[1,"modal-content"],[1,"image-detail-container"],[1,"image-container"],[3,"src"],[1,"col2"],["id","metadata"],[3,"href"],["type","text","id","nameInput","placeholder","Chip Name"],[1,"tagGrid"],["class","tagRow",3,"removed",4,"ngFor","ngForOf"],[1,"chips-container"],["id","delete"],["id","gallery",1,"gallery"],["class","gallery-item","id","gallery-item",4,"ngFor","ngForOf"],[1,"tagRow",3,"removed"],["type","button",1,"badge","badge-pill","badge-primary"],[1,"badge","badge-light"],["id","gallery-item",1,"gallery-item"],["id","content",1,"content"],["alt","",3,"src","click"]],template:function(i,r){1&i&&(u.TgZ(0,"body")(1,"h1"),u._uU(2,"Database Test Button"),u.qZA(),u.TgZ(3,"button",0),u.NdJ("click",function(){return r.writeUserData()}),u._uU(4,"Clicky"),u.qZA(),u.TgZ(5,"button",0),u.NdJ("click",function(){return r.displayModal()}),u._uU(6,"modal test"),u.qZA(),u.TgZ(7,"div",1)(8,"div",2)(9,"div",3)(10,"div",4),u._UZ(11,"img",5),u.qZA(),u.TgZ(12,"div",6)(13,"div",7)(14,"h1"),u._uU(15,"File Name: "),u.qZA(),u.TgZ(16,"p"),u._uU(17,"Link: "),u.TgZ(18,"a",8),u._uU(19,"Link"),u.qZA()(),u.TgZ(20,"p"),u._uU(21,"Created: "),u.qZA(),u._UZ(22,"input",9),u.TgZ(23,"button",0),u.NdJ("click",function(){return r.addTag()}),u._uU(24," Add Chip "),u.qZA(),u.TgZ(25,"div",10),u.YNc(26,Lfe,5,1,"div",11),u.qZA(),u._UZ(27,"div",12),u.qZA(),u.TgZ(28,"div")(29,"button",13),u._uU(30," Delete "),u.qZA()()()()()(),u.TgZ(31,"div",14),u.YNc(32,Ufe,3,1,"div",15),u.qZA()()),2&i&&(u.xp6(11),u.s9C("src",r.deleteFile,u.LSH),u.xp6(7),u.s9C("href",r.deleteFile,u.LSH),u.xp6(8),u.Q6J("ngForOf",r.fruits),u.xp6(6),u.Q6J("ngForOf",r.imgList))},dependencies:[tl],styles:["body[_ngcontent-%COMP%]{background-color:#eee}.gallery[_ngcontent-%COMP%]{display:grid;grid-column-gap:8px;grid-row-gap:8px;grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.gallery-item[_ngcontent-%COMP%]{display:grid;place-items:center;border-radius:4px;padding:4px;width:150px;height:150px}.content[_ngcontent-%COMP%]{display:grid;place-items:center}.content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:8px;box-shadow:0 0 16px #333;transition:all 1.5s ease;object-fit:cover}.content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{box-shadow:0 0 32px #333}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006}.modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;width:50%;--mat-option-selected-state-label-text-color: black !important;--mdc-filled-text-field-container-color: transparent!important;--mat-option-selected-state-label-text-color: black!important;--mat-option-label-text-color: black !important;--mdc-filled-text-field-focus-label-text-color: black!important;--mat-autocomplete-background-color: #68676752!important;--mdc-filled-text-field-input-text-placeholder-color: rgba(0, 0, 0, .5)!important;--mdc-filled-text-field-active-indicator-color: rgba(0, 0, 0, .5)!important;--mat-option-selected-state-label-text-color: #515151!important}.close[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.image-detail-container[_ngcontent-%COMP%]{display:flex}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70vw;max-height:90vh;object-fit:cover}.chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;width:max-content;margin:80px auto auto}.chip[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f0f0f0;border:1px solid #ccc;border-radius:20px;gap:5px}.chip-avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background-color:gray;text-align:center;line-height:23px}.close-icon[_ngcontent-%COMP%]{cursor:pointer;margin:0 8px;font-weight:700;color:red}.add-chip[_ngcontent-%COMP%]{display:flex;align-items:center;width:max-content;margin:50px auto auto}#nameInput[_ngcontent-%COMP%], #profileIconInput[_ngcontent-%COMP%]{padding:10px;border-radius:20px;border:1px solid #ccc;margin-right:10px}#addChipForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:20px;padding:10px;cursor:pointer}"]})}return n})();function Bfe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"div",16)(2,"div",17)(3,"div",18)(4,"h1"),u._uU(5,"Hello: "),u.TgZ(6,"strong"),u._uU(7),u.qZA()(),u.TgZ(8,"p"),u._uU(9,"User ID: "),u.TgZ(10,"strong"),u._uU(11),u.qZA()(),u.TgZ(12,"p"),u._uU(13,"Email: "),u.TgZ(14,"strong"),u._uU(15),u.qZA()(),u.TgZ(16,"p"),u._uU(17,"Email Verified: "),u.TgZ(18,"strong"),u._uU(19),u.qZA()(),u.TgZ(20,"p")(21,"input",19),u.NdJ("change",function(r){u.CHM(t);const s=u.oxw();return u.KtG(s.imageService.onFileChange(r))}),u.qZA()(),u.TgZ(22,"p")(23,"button",20),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.imageService.addData())}),u._uU(24,"Upload File..."),u.qZA()(),u._UZ(25,"br")(26,"br")(27,"br")(28,"app-gallery"),u.qZA()()()()}if(2&n){const t=e.ngIf;u.xp6(7),u.Oqu(t.displayName?t.displayName:"User"),u.xp6(4),u.Oqu(t.uid),u.xp6(4),u.Oqu(t.email),u.xp6(4),u.Oqu(t.emailVerified)}}let Hfe=(()=>{class n{constructor(t,i){this.authService=t,this.imageService=i}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Mm),u.Y36(zB))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:20,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"media-body"],["id","upload","type","file",3,"change"],[3,"click"]],template:function(i,r){1&i&&(u._UZ(0,"nav",0),u.TgZ(1,"div",1)(2,"div",2)(3,"nav",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),u._UZ(8,"i",8),u._uU(9,"User Profile "),u.qZA()(),u.TgZ(10,"li",6)(11,"a",9),u.NdJ("click",function(){return r.authService.SignOut()}),u._UZ(12,"i",10),u._uU(13,"Log out "),u.qZA()()()()(),u.TgZ(14,"main",11)(15,"div",12)(16,"div",13)(17,"h1",14),u._uU(18,"User Profile"),u.qZA()(),u.YNc(19,Bfe,29,4,"div",15),u.qZA()()()()),2&i&&(u.xp6(19),u.Q6J("ngIf",r.authService.userData))},dependencies:[$s,Vfe]})}return n})(),jfe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Mm))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Reset Password"),u.qZA(),u.TgZ(5,"p",3),u._uU(6,"Please enter your email address to request a password reset."),u.qZA(),u.TgZ(7,"div",4),u._UZ(8,"input",5,6),u.qZA(),u.TgZ(10,"div",4)(11,"input",7),u.NdJ("click",function(){u.CHM(s);const d=u.MAs(9);return u.KtG(r.authService.ForgotPassword(d.value))}),u.qZA()()(),u.TgZ(12,"div",8)(13,"span"),u._uU(14,"Go back to ? "),u.TgZ(15,"span",9),u._uU(16,"Log In"),u.qZA()()()()()}},dependencies:[xy]})}return n})();function zfe(n,e){if(1&n&&(u.TgZ(0,"div",4)(1,"p",9),u._uU(2,"We have sent a confirmation email to "),u.TgZ(3,"strong"),u._uU(4),u.qZA(),u._uU(5,"."),u.qZA(),u.TgZ(6,"p",9),u._uU(7,"Please check your email and click on the link to verfiy your email address."),u.qZA()()),2&n){const t=e.ngIf;u.xp6(4),u.Oqu(t.email)}}const Gfe=[{path:"",redirectTo:"/season-greeting",pathMatch:"full"},{path:"season-greeting",component:(()=>{class n{constructor(){this.userName="Test User"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-season-greeting"]],decls:16,vars:1,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"present"],[1,"lid"],[1,"promo"],["id","name"],[1,"box"]],template:function(i,r){1&i&&(u.TgZ(0,"html",0)(1,"head"),u._UZ(2,"meta",1)(3,"meta",2),u.qZA(),u.TgZ(4,"body")(5,"div",3)(6,"div",4),u._UZ(7,"span"),u.qZA(),u.TgZ(8,"div",5)(9,"p"),u._uU(10,"Merry Christmas,"),u.qZA(),u.TgZ(11,"div",6),u._uU(12),u.qZA()(),u.TgZ(13,"div",7),u._UZ(14,"span")(15,"span"),u.qZA()()()()),2&i&&(u.xp6(12),u.Oqu(r.userName))},styles:["body[_ngcontent-%COMP%]{background:url(snowy.7a5e66f5bc903d61.png);background-color:#000;background-size:cover}.present[_ngcontent-%COMP%]{width:410px;margin:auto;padding:25vh 0;position:inherit}.box[_ngcontent-%COMP%], .lid[_ngcontent-%COMP%]{background:-webkit-radial-gradient(white 15%,transparent 15.1%),-webkit-radial-gradient(white 15%,transparent 15.1%),rgb(240,58,58);background-position:0 0,25px 25px;background-size:50px 50px;position:relative;margin:auto}.box[_ngcontent-%COMP%]{width:400px;height:250px}.lid[_ngcontent-%COMP%]{width:400px;height:70px;box-shadow:1px 2px 3px #0003;z-index:1;padding:0 2px;background-color:#d83434;top:0;left:0;transition:top ease-out .5s,left ease-out .5s,transform ease-out .5s}.box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .lid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;display:block;background:rgba(235,199,0,.8);box-shadow:1px 2px 3px #0000001a}.box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{width:100%;height:60px;top:80px}.box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child, .lid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:60px;height:100%;left:170px}.lid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{left:172px}.promo[_ngcontent-%COMP%]{font-size:30px;color:#fff;font-family:Georgia,Times New Roman,Times,serif;text-align:center;position:relative;height:0;top:10px;transition:all ease-out .7s}.promo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;margin:0}.promo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px;margin:0}.present[_ngcontent-%COMP%]:hover   .lid[_ngcontent-%COMP%]{top:-100px;transform:rotate(10deg);left:10px}.present[_ngcontent-%COMP%]:hover   .promo[_ngcontent-%COMP%]{top:-80px}.mainContainer[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw}img[_ngcontent-%COMP%]{width:100%}"]})}return n})()},{path:"season-gift",component:(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-season-gift"]],decls:2,vars:0,template:function(i,r){1&i&&(u.TgZ(0,"p"),u._uU(1,"season-gift works!"),u.qZA())}})}return n})()},{path:"sign-in",component:Dre},{path:"register-user",component:Are},{path:"dashboard",component:Hfe,canActivate:[(()=>{class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Mm),u.LFG(pa))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"forgot-password",component:jfe},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Mm))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(i,r){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Thank You for Registering"),u.qZA(),u.YNc(5,zfe,8,1,"div",3),u.TgZ(6,"div",4)(7,"button",5),u.NdJ("click",function(){return r.authService.SendVerificationMail()}),u._UZ(8,"i",6),u._uU(9," Resend Verification Email "),u.qZA()()(),u.TgZ(10,"div",7)(11,"span"),u._uU(12,"Go back to?"),u.TgZ(13,"span",8),u._uU(14," Sign in"),u.qZA()()()()()),2&i&&(u.xp6(5),u.Q6J("ngIf",r.authService.userData))},dependencies:[$s,xy]})}return n})()},{path:"image-detail",component:u8}];let $fe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[ZW.forRoot(Gfe),ZW]})}return n})(),Wfe=(()=>{class n{constructor(){this.title="angular-firebase-app"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&u._UZ(0,"router-outlet")},dependencies:[W2]})}return n})();function d8(n){return new u.vHH(3e3,!1)}function Ym(n){switch(n.length){case 0:return new kS;case 1:return n[0];default:return new c7(n)}}function h8(n,e,t=new Map,i=new Map){const r=[],s=[];let a=-1,d=null;if(e.forEach(f=>{const m=f.get("offset"),b=m==a,I=b&&d||new Map;f.forEach((D,O)=>{let V=O,W=D;if("offset"!==O)switch(V=n.normalizePropertyName(V,r),W){case"!":W=t.get(O);break;case cf:W=i.get(O);break;default:W=n.normalizeStyleValue(O,V,W,r)}I.set(V,W)}),b||s.push(I),d=I,a=m}),r.length)throw function _pe(n){return new u.vHH(3502,!1)}();return s}function Mj(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Oj(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Oj(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Oj(t,"destroy",n)))}}function Oj(n,e,t){const s=Pj(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(s._data=a),s}function Pj(n,e,t,i,r="",s=0,a){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!a}}function Za(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function f8(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}(0,Wt.registerVersion)("firebase","10.4.0","app");const Ape=(()=>typeof document>"u"?null:document.documentElement)();function Nj(n){const e=n.parentNode||n.host||null;return e===Ape?null:e}let Yy=null,p8=!1;function m8(n,e){for(;e;){if(e===n)return!0;e=Nj(e)}return!1}function g8(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let _8=(()=>{class n{validateStyleProperty(t){return function kpe(n){Yy||(Yy=function Mpe(){return typeof document<"u"?document.body:null}()||{},p8=!!Yy.style&&"WebkitAppearance"in Yy.style);let e=!0;return Yy.style&&!function Rpe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Yy.style,!e&&p8&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Yy.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return m8(t,i)}getParentElement(t){return Nj(t)}query(t,i,r){return g8(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,a,d=[],f){return new kS(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),Fj=(()=>{class n{static#e=this.NOOP=new _8}return n})();const Ope=1e3,Lj="ng-enter",JP="ng-leave",eN="ng-trigger",tN=".ng-trigger",v8="ng-animating",Uj=".ng-animating";function pf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Vj(parseFloat(e[1]),e[2])}function Vj(n,e){return"s"===e?n*Ope:n}function nN(n,e,t){return n.hasOwnProperty("duration")?n:function Npe(n,e,t){let r,s=0,a="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(d8()),{duration:0,delay:0,easing:""};r=Vj(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=Vj(parseFloat(f),d[4]));const m=d[5];m&&(a=m)}else r=n;if(!t){let d=!1,f=e.length;r<0&&(e.push(function Yfe(){return new u.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function Zfe(){return new u.vHH(3101,!1)}()),d=!0),d&&e.splice(f,0,d8())}return{duration:r,delay:s,easing:a}}(n,e,t)}function dx(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function b8(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Zm(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Sd(n,e,t){e.forEach((i,r)=>{const s=Hj(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function Zy(n,e){e.forEach((t,i)=>{const r=Hj(i);n.style[r]=""})}function hx(n){return Array.isArray(n)?1==n.length?n[0]:o7(n):n}const Bj=new RegExp("{{\\s*(.+?)\\s*}}","g");function E8(n){let e=[];if("string"==typeof n){let t;for(;t=Bj.exec(n);)e.push(t[1]);Bj.lastIndex=0}return e}function fx(n,e,t){const i=n.toString(),r=i.replace(Bj,(s,a)=>{let d=e[a];return null==d&&(t.push(function Xfe(n){return new u.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function iN(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Upe=/-+([a-z0-9])/g;function Hj(n){return n.replace(Upe,(...e)=>e[1].toUpperCase())}function Qa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Jfe(n){return new u.vHH(3004,!1)}()}}function I8(n,e){return window.getComputedStyle(n)[e]}const rN="*";function Hpe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function jpe(n,e,t){if(":"==n[0]){const f=function zpe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function fpe(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof f)return void e.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function hpe(n){return new u.vHH(3015,!1)}()),e;const r=i[1],s=i[2],a=i[3];e.push(C8(r,a));"<"==s[0]&&!(r==rN&&a==rN)&&e.push(C8(a,r))}(i,t,e)):t.push(n),t}const sN=new Set(["true","1"]),oN=new Set(["false","0"]);function C8(n,e){const t=sN.has(n)||oN.has(n),i=sN.has(e)||oN.has(e);return(r,s)=>{let a=n==rN||n==r,d=e==rN||e==s;return!a&&t&&"boolean"==typeof r&&(a=r?sN.has(n):oN.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?sN.has(e):oN.has(e)),a&&d}}const Gpe=new RegExp("s*:selfs*,?","g");function jj(n,e,t,i){return new $pe(n).build(e,t,i)}class $pe{constructor(e){this._driver=e}build(e,t,i){const r=new Kpe(t);return this._resetContextStyleTimingState(r),Qa(this,hx(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function tpe(){return new u.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,m=f.name;m.toString().split(/\s*,\s*/).forEach(b=>{f.name=b,s.push(this.visitState(f,t))}),f.name=m}else if(1==d.type){const f=this.visitTransition(d,t);i+=f.queryCount,r+=f.depCount,a.push(f)}else t.errors.push(function npe(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:a,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,a=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{E8(f).forEach(m=>{a.hasOwnProperty(m)||s.add(m)})})}),s.size&&(iN(s.values()),t.errors.push(function ipe(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Qa(this,hx(e.animation),t);return{type:1,matchers:Hpe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Qy(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Qa(this,i,t)),options:Qy(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(a=>{t.currentTime=i;const d=Qa(this,a,t);return r=Math.max(r,t.currentTime),d});return t.currentTime=r,{type:3,steps:s,options:Qy(e.options)}}visitAnimate(e,t){const i=function Zpe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return zj(nN(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=zj(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=nN(t,e);return zj(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:$l({});if(5==s.type)r=this.visitKeyframes(s,t);else{let a=e.styles,d=!1;if(!a){d=!0;const m={};i.easing&&(m.easing=i.easing),a=$l(m)}t.currentTime+=i.duration+i.delay;const f=this.visitStyle(a,t);f.isEmptyStep=d,r=f}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of r)"string"==typeof d?d===cf?i.push(d):t.errors.push(new u.vHH(3002,!1)):i.push(b8(d));let s=!1,a=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(a=d.get("easing"),d.delete("easing")),!s))for(let f of d.values())if(f.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:a,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((d,f)=>{const m=t.collectedStyles.get(t.currentQuerySelector),b=m.get(f);let I=!0;b&&(s!=r&&s>=b.startTime&&r<=b.endTime&&(t.errors.push(function spe(n,e,t,i,r){return new u.vHH(3010,!1)}()),I=!1),s=b.startTime),I&&m.set(f,{startTime:s,endTime:r}),t.options&&function Lpe(n,e,t){const i=e.params||{},r=E8(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Qfe(n){return new u.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ope(){return new u.vHH(3011,!1)}()),i;let s=0;const a=[];let d=!1,f=!1,m=0;const b=e.steps.map(Me=>{const ze=this._makeStyleAst(Me,t);let je=null!=ze.offset?ze.offset:function Ype(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ze.styles),Ye=0;return null!=je&&(s++,Ye=ze.offset=je),f=f||Ye<0||Ye>1,d=d||Ye<m,m=Ye,a.push(Ye),ze});f&&t.errors.push(function ape(){return new u.vHH(3012,!1)}()),d&&t.errors.push(function lpe(){return new u.vHH(3200,!1)}());const I=e.steps.length;let D=0;s>0&&s<I?t.errors.push(function cpe(){return new u.vHH(3202,!1)}()):0==s&&(D=1/(I-1));const O=I-1,V=t.currentTime,W=t.currentAnimateTimings,re=W.duration;return b.forEach((Me,ze)=>{const je=D>0?ze==O?1:D*ze:a[ze],Ye=je*re;t.currentTime=V+W.delay+Ye,W.duration=Ye,this._validateStyleAst(Me,t),Me.offset=je,i.styles.push(Me)}),i}visitReference(e,t){return{type:8,animation:Qa(this,hx(e.animation),t),options:Qy(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Qy(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Qy(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,a]=function Wpe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Gpe,"")),n=n.replace(/@\*/g,tN).replace(/@\w+/g,t=>tN+"-"+t.slice(1)).replace(/:animating/g,Uj),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Za(t.collectedStyles,t.currentQuerySelector,new Map);const d=Qa(this,hx(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:d,originalSelector:e.selector,options:Qy(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function upe(){return new u.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:nN(e.timings,t.errors,!0);return{type:12,animation:Qa(this,hx(e.animation),t),timings:i,options:null}}}class Kpe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qy(n){return n?(n=dx(n)).params&&(n.params=function qpe(n){return n?dx(n):null}(n.params)):n={},n}function zj(n,e,t){return{duration:n,delay:e,easing:t}}function Gj(n,e,t,i,r,s,a=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:a,subTimeline:d}}class aN{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Jpe=new RegExp(":enter","g"),tme=new RegExp(":leave","g");function $j(n,e,t,i,r,s=new Map,a=new Map,d,f,m=[]){return(new nme).buildKeyframes(n,e,t,i,r,s,a,d,f,m)}class nme{buildKeyframes(e,t,i,r,s,a,d,f,m,b=[]){m=m||new aN;const I=new Wj(e,t,m,r,s,b,[]);I.options=f;const D=f.delay?pf(f.delay):0;I.currentTimeline.delayNextStep(D),I.currentTimeline.setStyles([a],null,I.errors,f),Qa(this,i,I);const O=I.timelines.filter(V=>V.containsAnimation());if(O.length&&d.size){let V;for(let W=O.length-1;W>=0;W--){const re=O[W];if(re.element===t){V=re;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([d],null,I.errors,f)}return O.length?O.map(V=>V.buildKeyframes()):[Gj(t,[],[],[],0,D,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);s!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const a="number"==typeof s?s:pf(fx(s,r?.params??{},t.errors));i.delayNextStep(a)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const a=null!=i.duration?pf(i.duration):null,d=null!=i.delay?pf(i.delay):null;return 0!==a&&e.forEach(f=>{const m=t.appendInstructionToTimeline(f,a,d);s=Math.max(s,m.duration+m.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Qa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=lN);const a=pf(s.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>Qa(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?pf(e.options.delay):0;e.steps.forEach(a=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),Qa(this,a,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return nN(t.params?fx(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?pf(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=lN);let a=i;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((m,b)=>{t.currentQueryIndex=b;const I=t.createSubContext(e.options,m);s&&I.delayNextStep(s),m===t.element&&(f=I.currentTimeline),Qa(this,e.animation,I),I.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,I.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,a=Math.abs(s.duration),d=a*(t.currentQueryTotal-1);let f=a*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const b=t.currentTimeline;f&&b.delayNextStep(f);const I=b.currentTime;Qa(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const lN={};class Wj{constructor(e,t,i,r,s,a,d,f){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=a,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lN,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new cN(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=pf(i.duration)),null!=i.delay&&(r.delay=pf(i.delay));const s=i.params;if(s){let a=r.params;a||(a=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!a.hasOwnProperty(d))&&(a[d]=fx(s[d],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new Wj(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=lN,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new ime(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,a){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace(Jpe,"."+this._enterClassName)).replace(tme,"."+this._leaveClassName);let m=this._driver.query(this.element,e,1!=i);0!==i&&(m=i<0?m.slice(m.length+i,m.length):m.slice(0,i)),d.push(...m)}return!s&&0==d.length&&a.push(function dpe(n){return new u.vHH(3014,!1)}()),d}}class cN{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new cN(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||cf),this._currentKeyframe.set(t,cf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},a=function rme(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,cf)}else Zm(r,t)}),t}(e,this._globalTimelineStyles);for(let[d,f]of a){const m=fx(f,s,i);this._pendingStyles.set(d,m),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??cf),this._updateStyle(d,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const m=Zm(d,new Map,this._backFill);m.forEach((b,I)=>{"!"===b?e.add(I):b===cf&&t.add(I)}),i||m.set("offset",f/this.duration),r.push(m)});const s=e.size?iN(e.values()):[],a=t.size?iN(t.values()):[];if(i){const d=r[0],f=new Map(d);d.set("offset",0),f.set("offset",1),r=[d,f]}return Gj(this.element,r,s,a,this.duration,this.startTime,this.easing,!1)}}class ime extends cN{constructor(e,t,i,r,s,a,d=!1){super(e,t,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],a=i+t,d=t/a,f=Zm(e[0]);f.set("offset",0),s.push(f);const m=Zm(e[0]);m.set("offset",x8(d)),s.push(m);const b=e.length-1;for(let I=1;I<=b;I++){let D=Zm(e[I]);const O=D.get("offset");D.set("offset",x8((t+O*i)/a)),s.push(D)}i=a,t=0,r="",e=s}return Gj(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function x8(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class qj{}const sme=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ome extends qj{normalizePropertyName(e,t){return Hj(e)}normalizeStyleValue(e,t,i,r){let s="";const a=i.toString().trim();if(sme.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function epe(n,e){return new u.vHH(3005,!1)}())}return a+s}}function D8(n,e,t,i,r,s,a,d,f,m,b,I,D){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:a,timelines:d,queriedElements:f,preStyleProps:m,postStyleProps:b,totalTime:I,errors:D}}const Kj={};class A8{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function ame(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,a,d,f,m,b){const I=[],D=this.ast.options&&this.ast.options.params||Kj,V=this.buildStyles(i,d&&d.params||Kj,I),W=f&&f.params||Kj,re=this.buildStyles(r,W,I),Me=new Set,ze=new Map,je=new Map,Ye="void"===r,xt={params:lme(W,D),delay:this.ast.options?.delay},Ot=b?[]:$j(e,t,this.ast.animation,s,a,V,re,xt,m,I);let pn=0;if(Ot.forEach(cs=>{pn=Math.max(cs.duration+cs.delay,pn)}),I.length)return D8(t,this._triggerName,i,r,Ye,V,re,[],[],ze,je,pn,I);Ot.forEach(cs=>{const qc=cs.element,G8=Za(ze,qc,new Set);cs.preStyleProps.forEach(Xy=>G8.add(Xy));const mx=Za(je,qc,new Set);cs.postStyleProps.forEach(Xy=>mx.add(Xy)),qc!==t&&Me.add(qc)});const zi=iN(Me.values());return D8(t,this._triggerName,i,r,Ye,V,re,Ot,zi,ze,je,pn)}}function lme(n,e){const t=dx(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class cme{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=dx(this.defaultParams);return Object.keys(e).forEach(s=>{const a=e[s];null!==a&&(r[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,d)=>{a&&(a=fx(a,r,t));const f=this.normalizer.normalizePropertyName(d,t);a=this.normalizer.normalizeStyleValue(d,f,a,t),i.set(d,a)})}),i}}class dme{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new cme(r.style,r.options&&r.options.params||{},i))}),R8(this.states,"true","1"),R8(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new A8(e,r,this.states))}),this.fallbackTransition=function hme(n,e,t){return new A8(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(a=>a.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function R8(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const fme=new aN;class pme{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=jj(this._driver,t,i,[]);if(i.length)throw function ype(n){return new u.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=h8(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let a;const d=new Map;if(s?(a=$j(this._driver,t,s,Lj,JP,new Map,new Map,i,fme,r),a.forEach(b=>{const I=Za(d,b.element,new Map);b.postStyleProps.forEach(D=>I.set(D,null))})):(r.push(function vpe(){return new u.vHH(3300,!1)}()),a=[]),r.length)throw function bpe(n){return new u.vHH(3504,!1)}();d.forEach((b,I)=>{b.forEach((D,O)=>{b.set(O,this._driver.computeStyle(I,O,cf))})});const m=Ym(a.map(b=>{const I=d.get(b.element);return this._buildPlayer(b,new Map,I)}));return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function wpe(n){return new u.vHH(3301,!1)}();return t}listen(e,t,i,r){const s=Pj(t,"","","");return Mj(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const k8="ng-animate-queued",Yj="ng-animate-disabled",vme=[],M8={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bme={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wc="__ng_removed";class Zj{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Cme(n){return n??null}(i?e.value:e),i){const s=dx(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const px="void",Qj=new Zj(px);class wme{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Kl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Epe(n,e){return new u.vHH(3302,!1)}();if(null==i||0==i.length)throw function Ipe(n){return new u.vHH(3303,!1)}();if(!function Tme(n){return"start"==n||"done"==n}(i))throw function Cpe(n,e){return new u.vHH(3400,!1)}();const s=Za(this._elementListeners,e,[]),a={name:t,phase:i,callback:r};s.push(a);const d=Za(this._engine.statesByElement,e,new Map);return d.has(t)||(Kl(e,eN),Kl(e,eN+"-"+t),d.set(t,Qj)),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(a);f>=0&&s.splice(f,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Tpe(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),a=new Xj(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Kl(e,eN),Kl(e,eN+"-"+t),this._engine.statesByElement.set(e,d=new Map));let f=d.get(t);const m=new Zj(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&m.absorbOptions(f.options),d.set(t,m),f||(f=Qj),m.value!==px&&f.value===m.value){if(!function Dme(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(f.params,m.params)){const W=[],re=s.matchStyles(f.value,f.params,W),Me=s.matchStyles(m.value,m.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{Zy(e,re),Sd(e,Me)})}return}const D=Za(this._engine.playersByElement,e,[]);D.forEach(W=>{W.namespaceId==this.id&&W.triggerName==t&&W.queued&&W.destroy()});let O=s.matchTransition(f.value,m.value,e,m.params),V=!1;if(!O){if(!r)return;O=s.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:f,toState:m,player:a,isFallbackTransition:V}),V||(Kl(e,k8),a.onStart(()=>{F0(e,k8)})),a.onDone(()=>{let W=this.players.indexOf(a);W>=0&&this.players.splice(W,1);const re=this._engine.playersByElement.get(e);if(re){let Me=re.indexOf(a);Me>=0&&re.splice(Me,1)}}),this.players.push(a),D.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,tN,!0);i.forEach(r=>{if(r[Wc])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),a=new Map;if(s){const d=[];if(s.forEach((f,m)=>{if(a.set(m,f.value),this._triggers.has(m)){const b=this.trigger(e,m,px,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),i&&Ym(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const a=s.name;if(r.has(a))return;r.add(a);const f=this._triggers.get(a).fallbackTransition,m=i.get(a)||Qj,b=new Zj(px),I=new Xj(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:f,fromState:m,toState:b,player:I,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Wc];(!s||s===M8)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Kl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,a=this._elementListeners.get(s);a&&a.forEach(d=>{if(d.name==i.triggerName){const f=Pj(s,i.triggerName,i.fromState.value,i.toState.value);f._data=e,Mj(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,a=r.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Eme{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new wme(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,d=this.driver.getParentElement(t);for(;d;){const f=r.get(d);if(f){const m=i.indexOf(f);i.splice(m+1,0,e),a=!0;break}d=this.driver.getParentElement(d)}a||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(uN(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!uN(t))return;const s=t[Wc];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Kl(e,Yj)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),F0(e,Yj))}removeNode(e,t,i){if(uN(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Wc]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return uN(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,tN,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Uj,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ym(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Wc];if(t&&t.setForRemoval){if(e[Wc]=M8,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Yj)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Kl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Ym(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Spe(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new aN,r=[],s=new Map,a=[],d=new Map,f=new Map,m=new Map,b=new Set;this.disabledNodes.forEach(Dt=>{b.add(Dt);const Ft=this.driver.query(Dt,".ng-animate-queued",!0);for(let jt=0;jt<Ft.length;jt++)b.add(Ft[jt])});const I=this.bodyNode,D=Array.from(this.statesByElement.keys()),O=N8(D,this.collectedEnterElements),V=new Map;let W=0;O.forEach((Dt,Ft)=>{const jt=Lj+W++;V.set(Ft,jt),Dt.forEach(Gn=>Kl(Gn,jt))});const re=[],Me=new Set,ze=new Set;for(let Dt=0;Dt<this.collectedLeaveElements.length;Dt++){const Ft=this.collectedLeaveElements[Dt],jt=Ft[Wc];jt&&jt.setForRemoval&&(re.push(Ft),Me.add(Ft),jt.hasAnimation?this.driver.query(Ft,".ng-star-inserted",!0).forEach(Gn=>Me.add(Gn)):ze.add(Ft))}const je=new Map,Ye=N8(D,Array.from(Me));Ye.forEach((Dt,Ft)=>{const jt=JP+W++;je.set(Ft,jt),Dt.forEach(Gn=>Kl(Gn,jt))}),e.push(()=>{O.forEach((Dt,Ft)=>{const jt=V.get(Ft);Dt.forEach(Gn=>F0(Gn,jt))}),Ye.forEach((Dt,Ft)=>{const jt=je.get(Ft);Dt.forEach(Gn=>F0(Gn,jt))}),re.forEach(Dt=>{this.processLeaveNode(Dt)})});const xt=[],Ot=[];for(let Dt=this._namespaceList.length-1;Dt>=0;Dt--)this._namespaceList[Dt].drainQueuedTransitions(t).forEach(jt=>{const Gn=jt.player,Gs=jt.element;if(xt.push(Gn),this.collectedEnterElements.length){const So=Gs[Wc];if(So&&So.setForMove){if(So.previousTriggersValues&&So.previousTriggersValues.has(jt.triggerName)){const Jy=So.previousTriggersValues.get(jt.triggerName),Yl=this.statesByElement.get(jt.element);if(Yl&&Yl.has(jt.triggerName)){const fN=Yl.get(jt.triggerName);fN.value=Jy,Yl.set(jt.triggerName,fN)}}return void Gn.destroy()}}const xd=!I||!this.driver.containsElement(I,Gs),Xa=je.get(Gs),Qm=V.get(Gs),wr=this._buildInstruction(jt,i,Qm,Xa,xd);if(wr.errors&&wr.errors.length)return void Ot.push(wr);if(xd)return Gn.onStart(()=>Zy(Gs,wr.fromStyles)),Gn.onDestroy(()=>Sd(Gs,wr.toStyles)),void r.push(Gn);if(jt.isFallbackTransition)return Gn.onStart(()=>Zy(Gs,wr.fromStyles)),Gn.onDestroy(()=>Sd(Gs,wr.toStyles)),void r.push(Gn);const q8=[];wr.timelines.forEach(So=>{So.stretchStartingKeyframe=!0,this.disabledNodes.has(So.element)||q8.push(So)}),wr.timelines=q8,i.append(Gs,wr.timelines),a.push({instruction:wr,player:Gn,element:Gs}),wr.queriedElements.forEach(So=>Za(d,So,[]).push(Gn)),wr.preStyleProps.forEach((So,Jy)=>{if(So.size){let Yl=f.get(Jy);Yl||f.set(Jy,Yl=new Set),So.forEach((fN,tz)=>Yl.add(tz))}}),wr.postStyleProps.forEach((So,Jy)=>{let Yl=m.get(Jy);Yl||m.set(Jy,Yl=new Set),So.forEach((fN,tz)=>Yl.add(tz))})});if(Ot.length){const Dt=[];Ot.forEach(Ft=>{Dt.push(function xpe(n,e){return new u.vHH(3505,!1)}())}),xt.forEach(Ft=>Ft.destroy()),this.reportError(Dt)}const pn=new Map,zi=new Map;a.forEach(Dt=>{const Ft=Dt.element;i.has(Ft)&&(zi.set(Ft,Ft),this._beforeAnimationBuild(Dt.player.namespaceId,Dt.instruction,pn))}),r.forEach(Dt=>{const Ft=Dt.element;this._getPreviousPlayers(Ft,!1,Dt.namespaceId,Dt.triggerName,null).forEach(Gn=>{Za(pn,Ft,[]).push(Gn),Gn.destroy()})});const cs=re.filter(Dt=>L8(Dt,f,m)),qc=new Map;P8(qc,this.driver,ze,m,cf).forEach(Dt=>{L8(Dt,f,m)&&cs.push(Dt)});const mx=new Map;O.forEach((Dt,Ft)=>{P8(mx,this.driver,new Set(Dt),f,"!")}),cs.forEach(Dt=>{const Ft=qc.get(Dt),jt=mx.get(Dt);qc.set(Dt,new Map([...Ft?.entries()??[],...jt?.entries()??[]]))});const Xy=[],$8=[],W8={};a.forEach(Dt=>{const{element:Ft,player:jt,instruction:Gn}=Dt;if(i.has(Ft)){if(b.has(Ft))return jt.onDestroy(()=>Sd(Ft,Gn.toStyles)),jt.disabled=!0,jt.overrideTotalTime(Gn.totalTime),void r.push(jt);let Gs=W8;if(zi.size>1){let Xa=Ft;const Qm=[];for(;Xa=Xa.parentNode;){const wr=zi.get(Xa);if(wr){Gs=wr;break}Qm.push(Xa)}Qm.forEach(wr=>zi.set(wr,Gs))}const xd=this._buildAnimation(jt.namespaceId,Gn,pn,s,mx,qc);if(jt.setRealPlayer(xd),Gs===W8)Xy.push(jt);else{const Xa=this.playersByElement.get(Gs);Xa&&Xa.length&&(jt.parentPlayer=Ym(Xa)),r.push(jt)}}else Zy(Ft,Gn.fromStyles),jt.onDestroy(()=>Sd(Ft,Gn.toStyles)),$8.push(jt),b.has(Ft)&&r.push(jt)}),$8.forEach(Dt=>{const Ft=s.get(Dt.element);if(Ft&&Ft.length){const jt=Ym(Ft);Dt.setRealPlayer(jt)}}),r.forEach(Dt=>{Dt.parentPlayer?Dt.syncPlayerEvents(Dt.parentPlayer):Dt.destroy()});for(let Dt=0;Dt<re.length;Dt++){const Ft=re[Dt],jt=Ft[Wc];if(F0(Ft,JP),jt&&jt.hasAnimation)continue;let Gn=[];if(d.size){let xd=d.get(Ft);xd&&xd.length&&Gn.push(...xd);let Xa=this.driver.query(Ft,Uj,!0);for(let Qm=0;Qm<Xa.length;Qm++){let wr=d.get(Xa[Qm]);wr&&wr.length&&Gn.push(...wr)}}const Gs=Gn.filter(xd=>!xd.destroyed);Gs.length?Sme(this,Ft,Gs):this.processLeaveNode(Ft)}return re.length=0,Xy.forEach(Dt=>{this.players.push(Dt),Dt.onDone(()=>{Dt.destroy();const Ft=this.players.indexOf(Dt);this.players.splice(Ft,1)}),Dt.play()}),Xy}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let a=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(a=d)}else{const d=this.playersByElement.get(e);if(d){const f=!s||s==px;d.forEach(m=>{m.queued||!f&&m.triggerName!=r||a.push(m)})}}return(i||r)&&(a=a.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),a}_beforeAnimationBuild(e,t,i){const s=t.element,a=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const m=f.element,b=m!==s,I=Za(i,m,[]);this._getPreviousPlayers(m,b,a,d,t.toState).forEach(O=>{const V=O.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),O.destroy(),I.push(O)})}Zy(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,a){const d=t.triggerName,f=t.element,m=[],b=new Set,I=new Set,D=t.timelines.map(V=>{const W=V.element;b.add(W);const re=W[Wc];if(re&&re.removedBeforeQueried)return new kS(V.duration,V.delay);const Me=W!==f,ze=function xme(n){const e=[];return F8(n,e),e}((i.get(W)||vme).map(pn=>pn.getRealPlayer())).filter(pn=>!!pn.element&&pn.element===W),je=s.get(W),Ye=a.get(W),xt=h8(this._normalizer,V.keyframes,je,Ye),Ot=this._buildPlayer(V,xt,ze);if(V.subTimeline&&r&&I.add(W),Me){const pn=new Xj(e,d,W);pn.setRealPlayer(Ot),m.push(pn)}return Ot});m.forEach(V=>{Za(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function Ime(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,V.element,V))}),b.forEach(V=>Kl(V,v8));const O=Ym(D);return O.onDestroy(()=>{b.forEach(V=>F0(V,v8)),Sd(f,t.toStyles)}),I.forEach(V=>{Za(r,V,[]).push(O)}),O}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new kS(e.duration,e.delay)}}class Xj{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new kS,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Mj(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Za(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function uN(n){return n&&1===n.nodeType}function O8(n,e){const t=n.style.display;return n.style.display=e??"none",t}function P8(n,e,t,i,r){const s=[];t.forEach(f=>s.push(O8(f)));const a=[];i.forEach((f,m)=>{const b=new Map;f.forEach(I=>{const D=e.computeStyle(m,I,r);b.set(I,D),(!D||0==D.length)&&(m[Wc]=bme,a.push(m))}),n.set(m,b)});let d=0;return t.forEach(f=>O8(f,s[d++])),a}function N8(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=new Set(e),s=new Map;function a(d){if(!d)return 1;let f=s.get(d);if(f)return f;const m=d.parentNode;return f=t.has(m)?m:r.has(m)?1:a(m),s.set(d,f),f}return e.forEach(d=>{const f=a(d);1!==f&&t.get(f).push(d)}),t}function Kl(n,e){n.classList?.add(e)}function F0(n,e){n.classList?.remove(e)}function Sme(n,e,t){Ym(t).onDone(()=>n.processLeaveNode(e))}function F8(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof c7?F8(i.players,e):e.push(i)}}function L8(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class dN{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Eme(e,t,i),this._timelineEngine=new pme(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const a=e+"-"+r;let d=this._triggerCache[a];if(!d){const f=[],b=jj(this._driver,s,f,[]);if(f.length)throw function gpe(n,e){return new u.vHH(3404,!1)}();d=function ume(n,e,t){return new dme(n,e,t)}(r,b,this._normalizer),this._triggerCache[a]=d}this._transitionEngine.registerTrigger(t,r,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,a]=f8(i);this._timelineEngine.command(s,t,a,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[a,d]=f8(i);return this._timelineEngine.listen(a,t,d,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Rme=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Sd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Sd(this._element,this._initialStyles),this._endStyles&&(Sd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zy(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zy(this._element,this._endStyles),this._endStyles=null),Sd(this._element,this._initialStyles),this._state=3)}}return n})();function Jj(n){let e=null;return n.forEach((t,i)=>{(function kme(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class U8{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:I8(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Mme{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return m8(e,t)}getParentElement(e){return Nj(e)}query(e,t,i){return g8(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,a=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const m=new Map,b=a.filter(O=>O instanceof U8);(function Vpe(n,e){return 0===n||0===e})(i,r)&&b.forEach(O=>{O.currentSnapshot.forEach((V,W)=>m.set(W,V))});let I=function Fpe(n){return n.length?n[0]instanceof Map?n:n.map(e=>b8(e)):[]}(t).map(O=>Zm(O));I=function Bpe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,a)=>{i.has(a)||r.push(a),i.set(a,s)}),r.length)for(let s=1;s<e.length;s++){let a=e[s];r.forEach(d=>a.set(d,I8(n,d)))}}return e}(e,I,m);const D=function Ame(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Jj(e[0]),e.length>1&&(i=Jj(e[e.length-1]))):e instanceof Map&&(t=Jj(e)),t||i?new Rme(n,t,i):null}(e,I);return new U8(e,I,f,D)}}let Ome=(()=>{class n extends s7{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?o7(t):t;return V8(this._renderer,null,i,"register",[r]),new Pme(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.FYo),u.LFG(ce))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class Pme extends Woe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Nme(this._id,e,t||{},this._renderer)}}class Nme{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return V8(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function V8(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const B8="@.disabled";let Fme=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,a)=>{const d=a?.parentNode(s);d&&a.removeChild(d,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new H8("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,b)),b}const a=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=b=>{Array.isArray(b)?b.forEach(f):this.engine.registerTrigger(a,d,t,b.name,b)};return i.data.animation.forEach(f),new Lme(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,d]=s;a(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.FYo),u.LFG(dN),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class H8{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==B8?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Lme extends H8{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==B8?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Ume(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function Vme(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,a,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(e,t,i)}}let Bme=(()=>{class n extends dN{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ce),u.LFG(Fj),u.LFG(qj),u.LFG(u.z2F))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const j8=[{provide:s7,useClass:Ome},{provide:qj,useFactory:function Hme(){return new ome}},{provide:dN,useClass:Bme},{provide:u.FYo,useFactory:function jme(n,e,t){return new Fme(n,e,t)},deps:[dl,dN,u.R0b]}],ez=[{provide:Fj,useFactory:()=>new Mme},{provide:u.QbO,useValue:"BrowserAnimations"},...j8],z8=[{provide:Fj,useClass:_8},{provide:u.QbO,useValue:"NoopAnimations"},...j8];let zme=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?z8:ez}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:ez,imports:[Ma]})}return n})();(0,Wt.initializeApp)(G3_firebase);let Gme=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n,bootstrap:[Wfe]});static#n=this.\u0275inj=u.cJS({providers:[{provide:m7,useValue:{hasBackdrop:!1}}],imports:[Ma,$fe,li.hO.initializeApp(G3_firebase),EN,rY,zg,pJ,CJ(()=>TJ()),zme,rae,the,Ahe,mfe,Mfe,_de]})}return n})();Ki().bootstrapModule(Gme).catch(n=>console.error(n))},5619:(gt,Se,U)=>{U.d(Se,{X:()=>$});var u=U(8645);class $ extends u.x{constructor(te){super(),this._value=te}get value(){return this.getValue()}_subscribe(te){const ue=super._subscribe(te);return!ue.closed&&te.next(this._value),ue}getValue(){const{hasError:te,thrownError:ue,_value:ce}=this;if(te)throw ue;return this._throwIfClosed(),ce}next(te){super.next(this._value=te)}}},5592:(gt,Se,U)=>{U.d(Se,{y:()=>Ae});var u=U(305),$=U(7394),N=U(4850),te=U(8407),ue=U(2653),ce=U(4674),Ie=U(1441);let Ae=(()=>{class ae{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const Xe=new ae;return Xe.source=this,Xe.operator=Oe,Xe}subscribe(Oe,Xe,Fe){const Je=function Z(ae){return ae&&ae instanceof u.Lv||function G(ae){return ae&&(0,ce.m)(ae.next)&&(0,ce.m)(ae.error)&&(0,ce.m)(ae.complete)}(ae)&&(0,$.Nn)(ae)}(Oe)?Oe:new u.Hp(Oe,Xe,Fe);return(0,Ie.x)(()=>{const{operator:Pe,source:vt}=this;Je.add(Pe?Pe.call(Je,vt):vt?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(Xe){Oe.error(Xe)}}forEach(Oe,Xe){return new(Xe=ye(Xe))((Fe,Je)=>{const Pe=new u.Hp({next:vt=>{try{Oe(vt)}catch(ft){Je(ft),Pe.unsubscribe()}},error:Je,complete:Fe});this.subscribe(Pe)})}_subscribe(Oe){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(Oe)}[N.L](){return this}pipe(...Oe){return(0,te.U)(Oe)(this)}toPromise(Oe){return new(Oe=ye(Oe))((Xe,Fe)=>{let Je;this.subscribe(Pe=>Je=Pe,Pe=>Fe(Pe),()=>Xe(Je))})}}return ae.create=Be=>new ae(Be),ae})();function ye(ae){var Be;return null!==(Be=ae??ue.config.Promise)&&void 0!==Be?Be:Promise}},8645:(gt,Se,U)=>{U.d(Se,{x:()=>Ie});var u=U(5592),$=U(7394);const te=(0,U(2306).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=U(9039),ce=U(1441);let Ie=(()=>{class ye extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const ae=new Ae(this,this);return ae.operator=Z,ae}_throwIfClosed(){if(this.closed)throw new te}next(Z){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(Z)}})}error(Z){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:ae}=this;for(;ae.length;)ae.shift().error(Z)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:ae,isStopped:Be,observers:Oe}=this;return ae||Be?$.Lc:(this.currentObservers=null,Oe.push(Z),new $.w0(()=>{this.currentObservers=null,(0,ue.P)(Oe,Z)}))}_checkFinalizedStatuses(Z){const{hasError:ae,thrownError:Be,isStopped:Oe}=this;ae?Z.error(Be):Oe&&Z.complete()}asObservable(){const Z=new u.y;return Z.source=this,Z}}return ye.create=(G,Z)=>new Ae(G,Z),ye})();class Ae extends Ie{constructor(G,Z){super(),this.destination=G,this.source=Z}next(G){var Z,ae;null===(ae=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===ae||ae.call(Z,G)}error(G){var Z,ae;null===(ae=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===ae||ae.call(Z,G)}complete(){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===Z||Z.call(G)}_subscribe(G){var Z,ae;return null!==(ae=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(G))&&void 0!==ae?ae:$.Lc}}},305:(gt,Se,U)=>{U.d(Se,{Hp:()=>Fe,Lv:()=>ae});var u=U(4674),$=U(7394),N=U(2653),te=U(3894),ue=U(2420);const ce=ye("C",void 0,void 0);function ye(le,xe,pe){return{kind:le,value:xe,error:pe}}var G=U(7599),Z=U(1441);class ae extends $.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,$.Nn)(xe)&&xe.add(this)):this.destination=ft}static create(xe,pe,Ce){return new Fe(xe,pe,Ce)}next(xe){this.isStopped?vt(function Ae(le){return ye("N",le,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?vt(function Ie(le){return ye("E",void 0,le)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?vt(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Oe(le,xe){return Be.call(le,xe)}class Xe{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:pe}=this;if(pe.next)try{pe.next(xe)}catch(Ce){Je(Ce)}}error(xe){const{partialObserver:pe}=this;if(pe.error)try{pe.error(xe)}catch(Ce){Je(Ce)}else Je(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(pe){Je(pe)}}}class Fe extends ae{constructor(xe,pe,Ce){let Ve;if(super(),(0,u.m)(xe)||!xe)Ve={next:xe??void 0,error:pe??void 0,complete:Ce??void 0};else{let Y;this&&N.config.useDeprecatedNextContext?(Y=Object.create(xe),Y.unsubscribe=()=>this.unsubscribe(),Ve={next:xe.next&&Oe(xe.next,Y),error:xe.error&&Oe(xe.error,Y),complete:xe.complete&&Oe(xe.complete,Y)}):Ve=xe}this.destination=new Xe(Ve)}}function Je(le){N.config.useDeprecatedSynchronousErrorHandling?(0,Z.O)(le):(0,te.h)(le)}function vt(le,xe){const{onStoppedNotification:pe}=N.config;pe&&G.z.setTimeout(()=>pe(le,xe))}const ft={closed:!0,next:ue.Z,error:function Pe(le){throw le},complete:ue.Z}},7394:(gt,Se,U)=>{U.d(Se,{Lc:()=>ce,w0:()=>ue,Nn:()=>Ie});var u=U(4674);const N=(0,U(2306).d)(ye=>function(Z){ye(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((ae,Be)=>`${Be+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var te=U(9039);class ue{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Oe of Z)Oe.remove(this);else Z.remove(this);const{initialTeardown:ae}=this;if((0,u.m)(ae))try{ae()}catch(Oe){G=Oe instanceof N?Oe.errors:[Oe]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Oe of Be)try{Ae(Oe)}catch(Xe){G=G??[],Xe instanceof N?G=[...G,...Xe.errors]:G.push(Xe)}}if(G)throw new N(G)}}add(G){var Z;if(G&&G!==this)if(this.closed)Ae(G);else{if(G instanceof ue){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(G)}}_hasParent(G){const{_parentage:Z}=this;return Z===G||Array.isArray(Z)&&Z.includes(G)}_addParent(G){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(G),Z):Z?[Z,G]:G}_removeParent(G){const{_parentage:Z}=this;Z===G?this._parentage=null:Array.isArray(Z)&&(0,te.P)(Z,G)}remove(G){const{_finalizers:Z}=this;Z&&(0,te.P)(Z,G),G instanceof ue&&G._removeParent(this)}}ue.EMPTY=(()=>{const ye=new ue;return ye.closed=!0,ye})();const ce=ue.EMPTY;function Ie(ye){return ye instanceof ue||ye&&"closed"in ye&&(0,u.m)(ye.remove)&&(0,u.m)(ye.add)&&(0,u.m)(ye.unsubscribe)}function Ae(ye){(0,u.m)(ye)?ye():ye.unsubscribe()}},2653:(gt,Se,U)=>{U.d(Se,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(gt,Se,U)=>{U.d(Se,{E:()=>$});const $=new(U(5592).y)(ue=>ue.complete())},2459:(gt,Se,U)=>{U.d(Se,{D:()=>xe});var u=U(4829),$=U(3093),N=U(5137),ce=U(5592),Ae=U(4971),ye=U(4674),G=U(7103);function ae(pe,Ce){if(!pe)throw new Error("Iterable cannot be null");return new ce.y(Ve=>{(0,G.f)(Ve,Ce,()=>{const Y=pe[Symbol.asyncIterator]();(0,G.f)(Ve,Ce,()=>{Y.next().then(ke=>{ke.done?Ve.complete():Ve.next(ke.value)})},0,!0)})})}var Be=U(8382),Oe=U(4026),Xe=U(4266),Fe=U(3664),Je=U(5726),Pe=U(9853),vt=U(541);function xe(pe,Ce){return Ce?function le(pe,Ce){if(null!=pe){if((0,Be.c)(pe))return function te(pe,Ce){return(0,u.Xf)(pe).pipe((0,N.R)(Ce),(0,$.Q)(Ce))}(pe,Ce);if((0,Xe.z)(pe))return function Ie(pe,Ce){return new ce.y(Ve=>{let Y=0;return Ce.schedule(function(){Y===pe.length?Ve.complete():(Ve.next(pe[Y++]),Ve.closed||this.schedule())})})}(pe,Ce);if((0,Oe.t)(pe))return function ue(pe,Ce){return(0,u.Xf)(pe).pipe((0,N.R)(Ce),(0,$.Q)(Ce))}(pe,Ce);if((0,Je.D)(pe))return ae(pe,Ce);if((0,Fe.T)(pe))return function Z(pe,Ce){return new ce.y(Ve=>{let Y;return(0,G.f)(Ve,Ce,()=>{Y=pe[Ae.h](),(0,G.f)(Ve,Ce,()=>{let ke,qe;try{({value:ke,done:qe}=Y.next())}catch(wt){return void Ve.error(wt)}qe?Ve.complete():Ve.next(ke)},0,!0)}),()=>(0,ye.m)(Y?.return)&&Y.return()})}(pe,Ce);if((0,vt.L)(pe))return function ft(pe,Ce){return ae((0,vt.Q)(pe),Ce)}(pe,Ce)}throw(0,Pe.z)(pe)}(pe,Ce):(0,u.Xf)(pe)}},4829:(gt,Se,U)=>{U.d(Se,{Xf:()=>Be});var u=U(7582),$=U(4266),N=U(4026),te=U(5592),ue=U(8382),ce=U(5726),Ie=U(9853),Ae=U(3664),ye=U(541),G=U(4674),Z=U(3894),ae=U(4850);function Be(le){if(le instanceof te.y)return le;if(null!=le){if((0,ue.c)(le))return function Oe(le){return new te.y(xe=>{const pe=le[ae.L]();if((0,G.m)(pe.subscribe))return pe.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(le);if((0,$.z)(le))return function Xe(le){return new te.y(xe=>{for(let pe=0;pe<le.length&&!xe.closed;pe++)xe.next(le[pe]);xe.complete()})}(le);if((0,N.t)(le))return function Fe(le){return new te.y(xe=>{le.then(pe=>{xe.closed||(xe.next(pe),xe.complete())},pe=>xe.error(pe)).then(null,Z.h)})}(le);if((0,ce.D)(le))return Pe(le);if((0,Ae.T)(le))return function Je(le){return new te.y(xe=>{for(const pe of le)if(xe.next(pe),xe.closed)return;xe.complete()})}(le);if((0,ye.L)(le))return function vt(le){return Pe((0,ye.Q)(le))}(le)}throw(0,Ie.z)(le)}function Pe(le){return new te.y(xe=>{(function ft(le,xe){var pe,Ce,Ve,Y;return(0,u.mG)(this,void 0,void 0,function*(){try{for(pe=(0,u.KL)(le);!(Ce=yield pe.next()).done;)if(xe.next(Ce.value),xe.closed)return}catch(ke){Ve={error:ke}}finally{try{Ce&&!Ce.done&&(Y=pe.return)&&(yield Y.call(pe))}finally{if(Ve)throw Ve.error}}xe.complete()})})(le,xe).catch(pe=>xe.error(pe))})}},3019:(gt,Se,U)=>{U.d(Se,{T:()=>ce});var u=U(7537),$=U(4829),N=U(6232),te=U(9940),ue=U(2459);function ce(...Ie){const Ae=(0,te.yG)(Ie),ye=(0,te._6)(Ie,1/0),G=Ie;return G.length?1===G.length?(0,$.Xf)(G[0]):(0,u.J)(ye)((0,ue.D)(G,Ae)):N.E}},2096:(gt,Se,U)=>{U.d(Se,{of:()=>N});var u=U(9940),$=U(2459);function N(...te){const ue=(0,u.yG)(te);return(0,$.D)(te,ue)}},8251:(gt,Se,U)=>{U.d(Se,{x:()=>$});var u=U(305);function $(te,ue,ce,Ie,Ae){return new N(te,ue,ce,Ie,Ae)}class N extends u.Lv{constructor(ue,ce,Ie,Ae,ye,G){super(ue),this.onFinalize=ye,this.shouldUnsubscribe=G,this._next=ce?function(Z){try{ce(Z)}catch(ae){ue.error(ae)}}:super._next,this._error=Ae?function(Z){try{Ae(Z)}catch(ae){ue.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(Z){ue.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},3997:(gt,Se,U)=>{U.d(Se,{x:()=>te});var u=U(2737),$=U(9360),N=U(8251);function te(ce,Ie=u.y){return ce=ce??ue,(0,$.e)((Ae,ye)=>{let G,Z=!0;Ae.subscribe((0,N.x)(ye,ae=>{const Be=Ie(ae);(Z||!ce(G,Be))&&(Z=!1,G=Be,ye.next(ae))}))})}function ue(ce,Ie){return ce===Ie}},7398:(gt,Se,U)=>{U.d(Se,{U:()=>N});var u=U(9360),$=U(8251);function N(te,ue){return(0,u.e)((ce,Ie)=>{let Ae=0;ce.subscribe((0,$.x)(Ie,ye=>{Ie.next(te.call(ue,ye,Ae++))}))})}},7537:(gt,Se,U)=>{U.d(Se,{J:()=>N});var u=U(1631),$=U(2737);function N(te=1/0){return(0,u.z)($.y,te)}},1631:(gt,Se,U)=>{U.d(Se,{z:()=>Ae});var u=U(7398),$=U(4829),N=U(9360),te=U(7103),ue=U(8251),Ie=U(4674);function Ae(ye,G,Z=1/0){return(0,Ie.m)(G)?Ae((ae,Be)=>(0,u.U)((Oe,Xe)=>G(ae,Oe,Be,Xe))((0,$.Xf)(ye(ae,Be))),Z):("number"==typeof G&&(Z=G),(0,N.e)((ae,Be)=>function ce(ye,G,Z,ae,Be,Oe,Xe,Fe){const Je=[];let Pe=0,vt=0,ft=!1;const le=()=>{ft&&!Je.length&&!Pe&&G.complete()},xe=Ce=>Pe<ae?pe(Ce):Je.push(Ce),pe=Ce=>{Oe&&G.next(Ce),Pe++;let Ve=!1;(0,$.Xf)(Z(Ce,vt++)).subscribe((0,ue.x)(G,Y=>{Be?.(Y),Oe?xe(Y):G.next(Y)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Pe--;Je.length&&Pe<ae;){const Y=Je.shift();Xe?(0,te.f)(G,Xe,()=>pe(Y)):pe(Y)}le()}catch(Y){G.error(Y)}}))};return ye.subscribe((0,ue.x)(G,xe,()=>{ft=!0,le()})),()=>{Fe?.()}}(ae,Be,ye,Z)))}},3093:(gt,Se,U)=>{U.d(Se,{Q:()=>te});var u=U(7103),$=U(9360),N=U(8251);function te(ue,ce=0){return(0,$.e)((Ie,Ae)=>{Ie.subscribe((0,N.x)(Ae,ye=>(0,u.f)(Ae,ue,()=>Ae.next(ye),ce),()=>(0,u.f)(Ae,ue,()=>Ae.complete(),ce),ye=>(0,u.f)(Ae,ue,()=>Ae.error(ye),ce)))})}},3020:(gt,Se,U)=>{U.d(Se,{B:()=>ue});var u=U(4829),$=U(8645),N=U(305),te=U(9360);function ue(Ie={}){const{connector:Ae=(()=>new $.x),resetOnError:ye=!0,resetOnComplete:G=!0,resetOnRefCountZero:Z=!0}=Ie;return ae=>{let Be,Oe,Xe,Fe=0,Je=!1,Pe=!1;const vt=()=>{Oe?.unsubscribe(),Oe=void 0},ft=()=>{vt(),Be=Xe=void 0,Je=Pe=!1},le=()=>{const xe=Be;ft(),xe?.unsubscribe()};return(0,te.e)((xe,pe)=>{Fe++,!Pe&&!Je&&vt();const Ce=Xe=Xe??Ae();pe.add(()=>{Fe--,0===Fe&&!Pe&&!Je&&(Oe=ce(le,Z))}),Ce.subscribe(pe),!Be&&Fe>0&&(Be=new N.Hp({next:Ve=>Ce.next(Ve),error:Ve=>{Pe=!0,vt(),Oe=ce(ft,ye,Ve),Ce.error(Ve)},complete:()=>{Je=!0,vt(),Oe=ce(ft,G),Ce.complete()}}),(0,u.Xf)(xe).subscribe(Be))})(ae)}}function ce(Ie,Ae,...ye){if(!0===Ae)return void Ie();if(!1===Ae)return;const G=new N.Hp({next:()=>{G.unsubscribe(),Ie()}});return(0,u.Xf)(Ae(...ye)).subscribe(G)}},5137:(gt,Se,U)=>{U.d(Se,{R:()=>$});var u=U(9360);function $(N,te=0){return(0,u.e)((ue,ce)=>{ce.add(N.schedule(()=>ue.subscribe(ce),te))})}},4664:(gt,Se,U)=>{U.d(Se,{w:()=>te});var u=U(4829),$=U(9360),N=U(8251);function te(ue,ce){return(0,$.e)((Ie,Ae)=>{let ye=null,G=0,Z=!1;const ae=()=>Z&&!ye&&Ae.complete();Ie.subscribe((0,N.x)(Ae,Be=>{ye?.unsubscribe();let Oe=0;const Xe=G++;(0,u.Xf)(ue(Be,Xe)).subscribe(ye=(0,N.x)(Ae,Fe=>Ae.next(ce?ce(Be,Fe,Xe,Oe++):Fe),()=>{ye=null,ae()}))},()=>{Z=!0,ae()}))})}},9397:(gt,Se,U)=>{U.d(Se,{b:()=>ue});var u=U(4674),$=U(9360),N=U(8251),te=U(2737);function ue(ce,Ie,Ae){const ye=(0,u.m)(ce)||Ie||Ae?{next:ce,error:Ie,complete:Ae}:ce;return ye?(0,$.e)((G,Z)=>{var ae;null===(ae=ye.subscribe)||void 0===ae||ae.call(ye);let Be=!0;G.subscribe((0,N.x)(Z,Oe=>{var Xe;null===(Xe=ye.next)||void 0===Xe||Xe.call(ye,Oe),Z.next(Oe)},()=>{var Oe;Be=!1,null===(Oe=ye.complete)||void 0===Oe||Oe.call(ye),Z.complete()},Oe=>{var Xe;Be=!1,null===(Xe=ye.error)||void 0===Xe||Xe.call(ye,Oe),Z.error(Oe)},()=>{var Oe,Xe;Be&&(null===(Oe=ye.unsubscribe)||void 0===Oe||Oe.call(ye)),null===(Xe=ye.finalize)||void 0===Xe||Xe.call(ye)}))}):te.y}},1954:(gt,Se,U)=>{U.d(Se,{o:()=>ue});var u=U(7394);class $ extends u.w0{constructor(Ie,Ae){super()}schedule(Ie,Ae=0){return this}}const N={setInterval(ce,Ie,...Ae){const{delegate:ye}=N;return ye?.setInterval?ye.setInterval(ce,Ie,...Ae):setInterval(ce,Ie,...Ae)},clearInterval(ce){const{delegate:Ie}=N;return(Ie?.clearInterval||clearInterval)(ce)},delegate:void 0};var te=U(9039);class ue extends ${constructor(Ie,Ae){super(Ie,Ae),this.scheduler=Ie,this.work=Ae,this.pending=!1}schedule(Ie,Ae=0){var ye;if(this.closed)return this;this.state=Ie;const G=this.id,Z=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(Z,G,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(ye=this.id)&&void 0!==ye?ye:this.requestAsyncId(Z,this.id,Ae),this}requestAsyncId(Ie,Ae,ye=0){return N.setInterval(Ie.flush.bind(Ie,this),ye)}recycleAsyncId(Ie,Ae,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return Ae;null!=Ae&&N.clearInterval(Ae)}execute(Ie,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(Ie,Ae);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,Ae){let G,ye=!1;try{this.work(Ie)}catch(Z){ye=!0,G=Z||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:Ae}=this,{actions:ye}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(ye,this),null!=Ie&&(this.id=this.recycleAsyncId(Ae,Ie,null)),this.delay=null,super.unsubscribe()}}}},2631:(gt,Se,U)=>{U.d(Se,{v:()=>N});var u=U(4552);class ${constructor(ue,ce=$.now){this.schedulerActionCtor=ue,this.now=ce}schedule(ue,ce=0,Ie){return new this.schedulerActionCtor(this,ue).schedule(Ie,ce)}}$.now=u.l.now;class N extends ${constructor(ue,ce=$.now){super(ue,ce),this.actions=[],this._active=!1}flush(ue){const{actions:ce}=this;if(this._active)return void ce.push(ue);let Ie;this._active=!0;do{if(Ie=ue.execute(ue.state,ue.delay))break}while(ue=ce.shift());if(this._active=!1,Ie){for(;ue=ce.shift();)ue.unsubscribe();throw Ie}}}},6321:(gt,Se,U)=>{U.d(Se,{P:()=>te,z:()=>N});var u=U(1954);const N=new(U(2631).v)(u.o),te=N},4552:(gt,Se,U)=>{U.d(Se,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},7599:(gt,Se,U)=>{U.d(Se,{z:()=>u});const u={setTimeout($,N,...te){const{delegate:ue}=u;return ue?.setTimeout?ue.setTimeout($,N,...te):setTimeout($,N,...te)},clearTimeout($){const{delegate:N}=u;return(N?.clearTimeout||clearTimeout)($)},delegate:void 0}},4971:(gt,Se,U)=>{U.d(Se,{h:()=>$});const $=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(gt,Se,U)=>{U.d(Se,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(gt,Se,U)=>{U.d(Se,{_6:()=>ce,jO:()=>te,yG:()=>ue});var u=U(4674),$=U(671);function N(Ie){return Ie[Ie.length-1]}function te(Ie){return(0,u.m)(N(Ie))?Ie.pop():void 0}function ue(Ie){return(0,$.K)(N(Ie))?Ie.pop():void 0}function ce(Ie,Ae){return"number"==typeof N(Ie)?Ie.pop():Ae}},9039:(gt,Se,U)=>{function u($,N){if($){const te=$.indexOf(N);0<=te&&$.splice(te,1)}}U.d(Se,{P:()=>u})},2306:(gt,Se,U)=>{function u($){const te=$(ue=>{Error.call(ue),ue.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}U.d(Se,{d:()=>u})},1441:(gt,Se,U)=>{U.d(Se,{O:()=>te,x:()=>N});var u=U(2653);let $=null;function N(ue){if(u.config.useDeprecatedSynchronousErrorHandling){const ce=!$;if(ce&&($={errorThrown:!1,error:null}),ue(),ce){const{errorThrown:Ie,error:Ae}=$;if($=null,Ie)throw Ae}}else ue()}function te(ue){u.config.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ue)}},7103:(gt,Se,U)=>{function u($,N,te,ue=0,ce=!1){const Ie=N.schedule(function(){te(),ce?$.add(this.schedule(null,ue)):this.unsubscribe()},ue);if($.add(Ie),!ce)return Ie}U.d(Se,{f:()=>u})},2737:(gt,Se,U)=>{function u($){return $}U.d(Se,{y:()=>u})},4266:(gt,Se,U)=>{U.d(Se,{z:()=>u});const u=$=>$&&"number"==typeof $.length&&"function"!=typeof $},5726:(gt,Se,U)=>{U.d(Se,{D:()=>$});var u=U(4674);function $(N){return Symbol.asyncIterator&&(0,u.m)(N?.[Symbol.asyncIterator])}},4674:(gt,Se,U)=>{function u($){return"function"==typeof $}U.d(Se,{m:()=>u})},8382:(gt,Se,U)=>{U.d(Se,{c:()=>N});var u=U(4850),$=U(4674);function N(te){return(0,$.m)(te[u.L])}},3664:(gt,Se,U)=>{U.d(Se,{T:()=>N});var u=U(4971),$=U(4674);function N(te){return(0,$.m)(te?.[u.h])}},4026:(gt,Se,U)=>{U.d(Se,{t:()=>$});var u=U(4674);function $(N){return(0,u.m)(N?.then)}},541:(gt,Se,U)=>{U.d(Se,{L:()=>te,Q:()=>N});var u=U(7582),$=U(4674);function N(ue){return(0,u.FC)(this,arguments,function*(){const Ie=ue.getReader();try{for(;;){const{value:Ae,done:ye}=yield(0,u.qq)(Ie.read());if(ye)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Ae)}}finally{Ie.releaseLock()}})}function te(ue){return(0,$.m)(ue?.getReader)}},671:(gt,Se,U)=>{U.d(Se,{K:()=>$});var u=U(4674);function $(N){return N&&(0,u.m)(N.schedule)}},9360:(gt,Se,U)=>{U.d(Se,{A:()=>$,e:()=>N});var u=U(4674);function $(te){return(0,u.m)(te?.lift)}function N(te){return ue=>{if($(ue))return ue.lift(function(ce){try{return te(ce,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(gt,Se,U)=>{function u(){}U.d(Se,{Z:()=>u})},8407:(gt,Se,U)=>{U.d(Se,{U:()=>N,z:()=>$});var u=U(2737);function $(...te){return N(te)}function N(te){return 0===te.length?u.y:1===te.length?te[0]:function(ce){return te.reduce((Ie,Ae)=>Ae(Ie),ce)}}},3894:(gt,Se,U)=>{U.d(Se,{h:()=>N});var u=U(2653),$=U(7599);function N(te){$.z.setTimeout(()=>{const{onUnhandledError:ue}=u.config;if(!ue)throw te;ue(te)})}},9853:(gt,Se,U)=>{function u($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Se,{z:()=>u})},5879:(gt,Se,U)=>{U.d(Se,{$8M:()=>gl,$WT:()=>rl,$Z:()=>XE,AFp:()=>TE,ALo:()=>GR,AaK:()=>ae,BQk:()=>xb,CHM:()=>gs,CRH:()=>EC,EJc:()=>uw,EiD:()=>Kx,EpF:()=>Db,F$t:()=>kA,F4k:()=>yI,FYo:()=>qg,FiY:()=>me,Gf:()=>wC,GfV:()=>gD,Gpc:()=>Xe,HDt:()=>hw,Hsn:()=>ju,Ikx:()=>LI,JOm:()=>Kf,JVY:()=>UN,JZr:()=>ft,KtG:()=>Zd,L6k:()=>VN,LAX:()=>Ug,LFG:()=>Qe,LSH:()=>Bv,Lbi:()=>SE,Lck:()=>RR,MAs:()=>wi,MMx:()=>kR,NdJ:()=>Ml,O4$:()=>Os,Ojb:()=>e1,OlP:()=>zn,Oqu:()=>kc,P3R:()=>EE,PXZ:()=>$C,Q6J:()=>It,QGY:()=>Ab,QbO:()=>JN,Qsj:()=>Tl,R0b:()=>Hr,RDi:()=>no,Rgc:()=>nd,SBq:()=>$g,Sil:()=>ld,Suo:()=>ik,TTD:()=>uu,TgZ:()=>Sb,VuI:()=>iM,W1O:()=>ok,X6Q:()=>JC,XFs:()=>Ct,Xpm:()=>Zc,Xq5:()=>dI,Xts:()=>np,Y36:()=>Rr,YKP:()=>sC,YNc:()=>D1,Yjl:()=>Md,Yz7:()=>_t,Z0I:()=>gn,ZZ4:()=>ry,_Bn:()=>rC,_UZ:()=>rt,_Vd:()=>fh,_c5:()=>jF,_uU:()=>CI,aQg:()=>Dw,c2e:()=>cw,cJS:()=>Qn,cg1:()=>Vp,dDg:()=>om,dqk:()=>Kt,eBb:()=>ep,eFA:()=>KC,eJc:()=>nw,ekj:()=>Mp,eoX:()=>Wh,evT:()=>Yg,f3M:()=>lt,g9A:()=>cD,h0i:()=>$a,hGG:()=>Rw,hij:()=>Pp,iGM:()=>bC,ifc:()=>ho,ip1:()=>Sk,jDz:()=>Wb,kL8:()=>BI,lG2:()=>il,lcZ:()=>ed,lqb:()=>Il,lri:()=>Pc,mCW:()=>Lv,n5z:()=>Tu,n_E:()=>Qp,oAB:()=>Xc,oxw:()=>Ap,pB0:()=>Hx,q3G:()=>Fo,q4F:()=>ph,qFp:()=>Ti,qLn:()=>Sl,qOj:()=>yb,qZA:()=>Ei,qzn:()=>io,rWj:()=>_w,rg0:()=>Gd,s9C:()=>kb,sBO:()=>MF,s_b:()=>j_,soG:()=>im,tb:()=>J_,tp0:()=>st,uIk:()=>p_,vHH:()=>le,vpe:()=>sa,wAp:()=>Ga,xp6:()=>fp,ynx:()=>Ah,z2F:()=>dd,z3N:()=>es,zSh:()=>CE,zs3:()=>ro});var u=U(8645),$=U(7394),N=U(5592),te=U(3019),ue=U(5619),ce=U(2096),Ie=U(3020),Ae=U(4664),ye=U(3997);function G(o){for(let l in o)if(o[l]===G)return l;throw Error("Could not find renamed property on target object.")}function Z(o,l){for(const c in l)l.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=l[c])}function ae(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ae).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const l=o.toString();if(null==l)return""+l;const c=l.indexOf("\n");return-1===c?l:l.substring(0,c)}function Be(o,l){return null==o||""===o?null===l?"":l:null==l||""===l?o:o+" "+l}const Oe=G({__forward_ref__:G});function Xe(o){return o.__forward_ref__=Xe,o.toString=function(){return ae(this())},o}function Fe(o){return Je(o)?o():o}function Je(o){return"function"==typeof o&&o.hasOwnProperty(Oe)&&o.__forward_ref__===Xe}function Pe(o){return o&&!!o.\u0275providers}const ft="https://g.co/ng/security#xss";class le extends Error{constructor(l,c){super(function xe(o,l){return`NG0${Math.abs(o)}${l?": "+l:""}`}(l,c)),this.code=l}}function pe(o){return"string"==typeof o?o:null==o?"":String(o)}function qe(o,l){throw new le(-201,!1)}function et(o,l){null==o&&function Ke(o,l,c,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${c} ${h} ${l} <=Actual]`))}(l,o,null,"!=")}function _t(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Qn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Fn(o){return oi(o,Xn)||oi(o,dr)}function gn(o){return null!==Fn(o)}function oi(o,l){return o.hasOwnProperty(l)?o[l]:null}function Di(o){return o&&(o.hasOwnProperty(ii)||o.hasOwnProperty(Rs))?o[ii]:null}const Xn=G({\u0275prov:G}),ii=G({\u0275inj:G}),dr=G({ngInjectableDef:G}),Rs=G({ngInjectorDef:G});var Ct=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Ct||{});let Rt;function Jt(o){const l=Rt;return Rt=o,l}function vi(o,l,c){const h=Fn(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&Ct.Optional?null:void 0!==l?l:void qe(ae(o))}const Kt=globalThis,Ge={},ht="__NG_DI_FLAG__",yt="ngTempTokenPath",K=/\n/gm,B="__source";let H;function se(o){const l=H;return H=o,l}function Re(o,l=Ct.Default){if(void 0===H)throw new le(-203,!1);return null===H?vi(o,void 0,l):H.get(o,l&Ct.Optional?null:void 0,l)}function Qe(o,l=Ct.Default){return(function Lt(){return Rt}()||Re)(Fe(o),l)}function lt(o,l=Ct.Default){return Qe(o,In(l))}function In(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Vt(o){const l=[];for(let c=0;c<o.length;c++){const h=Fe(o[c]);if(Array.isArray(h)){if(0===h.length)throw new le(900,!1);let p,g=Ct.Default;for(let v=0;v<h.length;v++){const w=h[v],S=Yt(w);"number"==typeof S?-1===S?p=w.token:g|=S:p=w}l.push(Qe(p,g))}else l.push(Qe(h))}return l}function Ln(o,l){return o[ht]=l,o.prototype[ht]=l,o}function Yt(o){return o[ht]}function xo(o){return{toString:o}.toString()}var uo=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(uo||{}),ho=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(ho||{});const ks={},un=[],Wo=G({\u0275cmp:G}),Ja=G({\u0275dir:G}),Kc=G({\u0275pipe:G}),Yc=G({\u0275mod:G}),Do=G({\u0275fac:G}),Zl=G({__NG_ELEMENT_ID__:G}),el=G({__NG_ENV_ID__:G});function Dd(o,l,c){let h=o.length;for(;;){const p=o.indexOf(l,c);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const g=l.length;if(p+g===h||o.charCodeAt(p+g)<=32)return p}c=p+1}}function ba(o,l,c){let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const g=c[h++],v=c[h++],w=c[h++];o.setAttribute(l,v,w,g)}else{const g=p,v=c[++h];wa(g)?o.setProperty(l,g,v):o.setAttribute(l,g,v),h++}}return h}function Ao(o){return 3===o||4===o||6===o}function wa(o){return 64===o.charCodeAt(0)}function Ql(o,l){if(null!==l&&0!==l.length)if(null===o||0===o.length)o=l.slice();else{let c=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?c=p:0===c||tl(o,c,p,null,-1===c||2===c?l[++h]:null)}}return o}function tl(o,l,c,h,p){let g=0,v=o.length;if(-1===l)v=-1;else for(;g<o.length;){const w=o[g++];if("number"==typeof w){if(w===l){v=-1;break}if(w>l){v=g-1;break}}}for(;g<o.length;){const w=o[g];if("number"==typeof w)break;if(w===c){if(null===h)return void(null!==p&&(o[g+1]=p));if(h===o[g+1])return void(o[g+2]=p)}g++,null!==h&&g++,null!==p&&g++}-1!==v&&(o.splice(v,0,l),g=v+1),o.splice(g++,0,c),null!==h&&o.splice(g++,0,h),null!==p&&o.splice(g++,0,p)}const pi="ng-template";function ev(o,l,c){let h=0,p=!0;for(;h<o.length;){let g=o[h++];if("string"==typeof g&&p){const v=o[h++];if(c&&"class"===g&&-1!==Dd(v.toLowerCase(),l,0))return!0}else{if(1===g){for(;h<o.length&&"string"==typeof(g=o[h++]);)if(g.toLowerCase()===l)return!0;return!1}"number"==typeof g&&(p=!1)}}return!1}function $s(o){return 4===o.type&&o.value!==pi}function tv(o,l,c){return l===(4!==o.type||c?o.value:pi)}function mf(o,l,c){let h=4;const p=o.attrs||[],g=function Xl(o){for(let l=0;l<o.length;l++)if(Ao(o[l]))return l;return o.length}(p);let v=!1;for(let w=0;w<l.length;w++){const S=l[w];if("number"!=typeof S){if(!v)if(4&h){if(h=2|1&h,""!==S&&!tv(o,S,c)||""===S&&1===l.length){if(Kr(h))return!1;v=!0}}else{const R=8&h?S:l[++w];if(8&h&&null!==o.attrs){if(!ev(o.attrs,R,c)){if(Kr(h))return!1;v=!0}continue}const z=Ea(8&h?"class":S,p,$s(o),c);if(-1===z){if(Kr(h))return!1;v=!0;continue}if(""!==R){let J;J=z>g?"":p[z+1].toLowerCase();const ne=8&h?J:null;if(ne&&-1!==Dd(ne,R,0)||2&h&&R!==J){if(Kr(h))return!1;v=!0}}}}else{if(!v&&!Kr(h)&&!Kr(S))return!1;if(v&&Kr(S))continue;v=!1,h=S|1&h}}return Kr(h)||v}function Kr(o){return 0==(1&o)}function Ea(o,l,c,h){if(null===l)return-1;let p=0;if(h||!c){let g=!1;for(;p<l.length;){const v=l[p];if(v===o)return p;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=l[++p];for(;"string"==typeof w;)w=l[++p];continue}if(4===v)break;if(0===v){p+=4;continue}}p+=g?1:2}return-1}return function Ad(o,l){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const h=o[c];if("number"==typeof h)return-1;if(h===l)return c;c++}return-1}(l,o)}function nl(o,l,c=!1){for(let h=0;h<l.length;h++)if(mf(o,l[h],c))return!0;return!1}function Rd(o,l){e:for(let c=0;c<l.length;c++){const h=l[c];if(o.length===h.length){for(let p=0;p<o.length;p++)if(o[p]!==h[p])continue e;return!0}}return!1}function Jl(o,l){return o?":not("+l.trim()+")":l}function ec(o){let l=o[0],c=1,h=2,p="",g=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&h){const w=o[++c];p+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&h?p+="."+v:4&h&&(p+=" "+v);else""!==p&&!Kr(v)&&(l+=Jl(g,p),p=""),h=v,g=g||!Kr(h);c++}return""!==p&&(l+=Jl(g,p)),l}function Zc(o){return xo(()=>{const l=Jm(o),c={...l,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===uo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||ho.Emulated,styles:o.styles||un,_:null,schemas:o.schemas||null,tView:null,id:""};Od(c);const h=o.dependencies;return c.directiveDefs=Ia(h,!1),c.pipeDefs=Ia(h,!0),c.id=function sl(o){let l=0;const c=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const p of c)l=Math.imul(31,l)+p.charCodeAt(0)<<0;return l+=2147483648,"c"+l}(c),c})}function Qc(o){return sn(o)||Gi(o)}function kd(o){return null!==o}function Xc(o){return xo(()=>({type:o.type,bootstrap:o.bootstrap||un,declarations:o.declarations||un,imports:o.imports||un,exports:o.exports||un,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function eu(o,l){if(null==o)return ks;const c={};for(const h in o)if(o.hasOwnProperty(h)){let p=o[h],g=p;Array.isArray(p)&&(g=p[1],p=p[0]),c[p]=h,l&&(l[p]=g)}return c}function il(o){return xo(()=>{const l=Jm(o);return Od(l),l})}function Md(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function sn(o){return o[Wo]||null}function Gi(o){return o[Ja]||null}function hr(o){return o[Kc]||null}function rl(o){const l=sn(o)||Gi(o)||hr(o);return null!==l&&l.standalone}function fr(o,l){const c=o[Yc]||null;if(!c&&!0===l)throw new Error(`Type ${ae(o)} does not have '\u0275mod' property.`);return c}function Jm(o){const l={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputTransforms:null,inputConfig:o.inputs||ks,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||un,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:eu(o.inputs,l),outputs:eu(o.outputs)}}function Od(o){o.features?.forEach(l=>l(o))}function Ia(o,l){if(!o)return null;const c=l?hr:Qc;return()=>("function"==typeof o?o():o).map(h=>c(h)).filter(kd)}const mi=0,tt=1,Bt=2,Wn=3,ds=4,Ro=5,Nr=6,Ca=7,Jn=8,ko=9,Ko=10,kt=11,Ws=12,gf=13,hs=14,$i=15,ol=16,fs=17,Fr=18,Yo=19,tu=20,Ta=21,qs=22,nu=23,ps=24,en=25,Nd=1,al=2,pr=7,Zo=9,Wi=11;function Tr(o){return Array.isArray(o)&&"object"==typeof o[Nd]}function Sr(o){return Array.isArray(o)&&!0===o[Nd]}function Fd(o){return 0!=(4&o.flags)}function Mo(o){return o.componentOffset>-1}function ms(o){return 1==(1&o.flags)}function Zr(o){return!!o.template}function xa(o){return 0!=(512&o[Bt])}function Oo(o,l){return o.hasOwnProperty(Do)?o[Do]:null}let ki=null,nc=!1;function xr(o){const l=ki;return ki=o,l}const ic={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Bd(o){if(!oc(o)||o.dirty){if(!o.producerMustRecompute(o)&&!ag(o))return void(o.dirty=!1);o.producerRecomputeValue(o),o.dirty=!1}}function Hd(o){o.dirty=!0,function bf(o){if(void 0===o.liveConsumerNode)return;const l=nc;nc=!0;try{for(const c of o.liveConsumerNode)c.dirty||Hd(c)}finally{nc=l}}(o),o.consumerMarkedDirty?.(o)}function wf(o){return o&&(o.nextProducerIndex=0),xr(o)}function Mi(o,l){if(xr(l),o&&void 0!==o.producerNode&&void 0!==o.producerIndexOfThis&&void 0!==o.producerLastReadVersion){if(oc(o))for(let c=o.nextProducerIndex;c<o.producerNode.length;c++)Da(o.producerNode[c],o.producerIndexOfThis[c]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function ag(o){fo(o);for(let l=0;l<o.producerNode.length;l++){const c=o.producerNode[l],h=o.producerLastReadVersion[l];if(h!==c.version||(Bd(c),h!==c.version))return!0}return!1}function sc(o){if(fo(o),oc(o))for(let l=0;l<o.producerNode.length;l++)Da(o.producerNode[l],o.producerIndexOfThis[l]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function Da(o,l){if(function jd(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}(o),fo(o),1===o.liveConsumerNode.length)for(let h=0;h<o.producerNode.length;h++)Da(o.producerNode[h],o.producerIndexOfThis[h]);const c=o.liveConsumerNode.length-1;if(o.liveConsumerNode[l]=o.liveConsumerNode[c],o.liveConsumerIndexOfThis[l]=o.liveConsumerIndexOfThis[c],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,l<o.liveConsumerNode.length){const h=o.liveConsumerIndexOfThis[l],p=o.liveConsumerNode[l];fo(p),p.producerIndexOfThis[h]=l}}function oc(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function fo(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}let Tf=null;function Gd(o){const l=xr(null);try{return o()}finally{xr(l)}}const $d=()=>{},ov=(()=>({...ic,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:o=>{o.schedule(o.ref)},hasRun:!1,cleanupFn:$d}))();class dg{constructor(l,c,h){this.previousValue=l,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function uu(){return uc}function uc(o){return o.type.prototype.ngOnChanges&&(o.setInput=Zs),du}function du(){const o=dc(this),l=o?.current;if(l){const c=o.previous;if(c===ks)o.previous=l;else for(let h in l)c[h]=l[h];o.current=null,this.ngOnChanges(l)}}function Zs(o,l,c,h){const p=this.declaredInputs[c],g=dc(o)||function Af(o,l){return o[ul]=l}(o,{previous:ks,current:null}),v=g.current||(g.current={}),w=g.previous,S=w[p];v[p]=new dg(S&&S.currentValue,l,w===ks),o[h]=l}uu.ngInherit=!0;const ul="__ngSimpleChanges__";function dc(o){return o[ul]||null}const Ms=function(o,l,c){},Rf="svg";function xn(o){for(;Array.isArray(o);)o=o[mi];return o}function po(o,l){return xn(l[o])}function Lr(o,l){return xn(l[o.index])}function qd(o,l){return o.data[l]}function Aa(o,l){return o[l]}function Dr(o,l){const c=l[o];return Tr(c)?c:c[mi]}function Ra(o,l){return null==l?null:o[l]}function hg(o){o[fs]=0}function ka(o){1024&o[Bt]||(o[Bt]|=1024,qi(o,1))}function cv(o){1024&o[Bt]&&(o[Bt]&=-1025,qi(o,-1))}function qi(o,l){let c=o[Wn];if(null===c)return;c[Ro]+=l;let h=c;for(c=c[Wn];null!==c&&(1===l&&1===h[Ro]||-1===l&&0===h[Ro]);)c[Ro]+=l,h=c,c=c[Wn]}const Pt={lFrame:pt(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Oi(){return Pt.bindingsEnabled}function Jo(){return null!==Pt.skipHydrationRootTNode}function Ne(){return Pt.lFrame.lView}function dn(){return Pt.lFrame.tView}function gs(o){return Pt.lFrame.contextLView=o,o[Jn]}function Zd(o){return Pt.lFrame.contextLView=null,o}function mr(){let o=gu();for(;null!==o&&64===o.type;)o=o.parent;return o}function gu(){return Pt.lFrame.currentTNode}function mo(o,l){const c=Pt.lFrame;c.currentTNode=o,c.isParent=l}function Nf(){return Pt.lFrame.isParent}function Qd(){Pt.lFrame.isParent=!1}function Oa(){return Pt.lFrame.bindingIndex++}function _u(o,l){const c=Pt.lFrame;c.bindingIndex=c.bindingRootIndex=o,yu(l)}function yu(o){Pt.lFrame.currentDirectiveIndex=o}function th(){return Pt.lFrame.currentQueryIndex}function Lf(o){Pt.lFrame.currentQueryIndex=o}function Uf(o){const l=o[tt];return 2===l.type?l.declTNode:1===l.type?o[Nr]:null}function nh(o,l,c){if(c&Ct.SkipSelf){let p=l,g=o;for(;!(p=p.parent,null!==p||c&Ct.Host||(p=Uf(g),null===p||(g=g[hs],10&p.type))););if(null===p)return!1;l=p,o=g}const h=Pt.lFrame=zt();return h.currentTNode=l,h.lView=o,!0}function li(o){const l=zt(),c=o[tt];Pt.lFrame=l,l.currentTNode=c.firstChild,l.lView=o,l.tView=c,l.contextLView=o,l.bindingIndex=c.bindingStartIndex,l.inI18n=!1}function zt(){const o=Pt.lFrame,l=null===o?null:o.child;return null===l?pt(o):l}function pt(o){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=l),l}function Yi(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const On=Yi;function Zi(){const o=Yi();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ot(){return Pt.lFrame.selectedIndex}function Qs(o){Pt.lFrame.selectedIndex=o}function ci(){const o=Pt.lFrame;return qd(o.tView,o.selectedIndex)}function Os(){Pt.lFrame.currentNamespace=Rf}let qn=!0;function Pn(){return qn}function Ar(o){qn=o}function Xs(o,l){for(let c=l.directiveStart,h=l.directiveEnd;c<h;c++){const g=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:S,ngAfterViewChecked:R,ngOnDestroy:P}=g;v&&(o.contentHooks??=[]).push(-c,v),w&&((o.contentHooks??=[]).push(c,w),(o.contentCheckHooks??=[]).push(c,w)),S&&(o.viewHooks??=[]).push(-c,S),R&&((o.viewHooks??=[]).push(c,R),(o.viewCheckHooks??=[]).push(c,R)),null!=P&&(o.destroyHooks??=[]).push(c,P)}}function vu(o,l,c){yo(o,l,3,c)}function fl(o,l,c,h){(3&o[Bt])===c&&yo(o,l,c,h)}function Pa(o,l){let c=o[Bt];(3&c)===l&&(c&=8191,c+=1,o[Bt]=c)}function yo(o,l,c,h){const g=h??-1,v=l.length-1;let w=0;for(let S=void 0!==h?65535&o[fs]:0;S<v;S++)if("number"==typeof l[S+1]){if(w=l[S],null!=h&&w>=h)break}else l[S]<0&&(o[fs]+=65536),(w<g||-1==g)&&(Vf(o,c,l,S),o[fs]=(4294901760&o[fs])+S+2),S++}function Ur(o,l){Ms(4,o,l);const c=xr(null);try{l.call(o)}finally{xr(c),Ms(5,o,l)}}function Vf(o,l,c,h){const p=c[h]<0,g=c[h+1],w=o[p?-c[h]:c[h]];p?o[Bt]>>13<o[fs]>>16&&(3&o[Bt])===l&&(o[Bt]+=8192,Ur(w,g)):Ur(w,g)}const Qr=-1;class Gt{constructor(l,c,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function bu(o){return o!==Qr}function pl(o){return 32767&o}function wu(o,l){let c=function Hf(o){return o>>16}(o),h=l;for(;c>0;)h=h[hs],c--;return h}let jf=!0;function _c(o){const l=jf;return jf=o,l}const _g=255,zf=5;let mv=0;const ee={};function gi(o,l){const c=Ni(o,l);if(-1!==c)return c;const h=l[tt];h.firstCreatePass&&(o.injectorIndex=l.length,A(h.data,o),A(l,null),A(h.blueprint,null));const p=ta(o,l),g=o.injectorIndex;if(bu(p)){const v=pl(p),w=wu(p,l),S=w[tt].data;for(let R=0;R<8;R++)l[g+R]=w[v+R]|S[v+R]}return l[g+8]=p,g}function A(o,l){o.push(0,0,0,0,0,0,0,0,l)}function Ni(o,l){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===l[o.injectorIndex+8]?-1:o.injectorIndex}function ta(o,l){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,h=null,p=l;for(;null!==p;){if(h=xu(p),null===h)return Qr;if(c++,p=p[hs],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return Qr}function Na(o,l,c){!function Wt(o,l,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(Zl)&&(h=c[Zl]),null==h&&(h=c[Zl]=mv++);const p=h&_g;l.data[o+(p>>zf)]|=1<<p}(o,l,c)}function Kn(o,l,c){if(c&Ct.Optional||void 0!==o)return o;qe()}function Iu(o,l,c,h){if(c&Ct.Optional&&void 0===h&&(h=null),!(c&(Ct.Self|Ct.Host))){const p=o[ko],g=Jt(void 0);try{return p?p.get(l,h,c&Ct.Optional):vi(l,h,c&Ct.Optional)}finally{Jt(g)}}return Kn(h,0,c)}function na(o,l,c,h=Ct.Default,p){if(null!==o){if(2048&l[Bt]&&!(h&Ct.Self)){const v=function Su(o,l,c,h,p){let g=o,v=l;for(;null!==g&&null!==v&&2048&v[Bt]&&!(512&v[Bt]);){const w=ia(g,v,c,h|Ct.Self,ee);if(w!==ee)return w;let S=g.parent;if(!S){const R=v[tu];if(R){const P=R.get(c,ee,h);if(P!==ee)return P}S=xu(v),v=v[hs]}g=S}return p}(o,l,c,h,ee);if(v!==ee)return v}const g=ia(o,l,c,h,ee);if(g!==ee)return g}return Iu(l,c,h,p)}function ia(o,l,c,h,p){const g=function Cu(o){if("string"==typeof o)return o.charCodeAt(0)||0;const l=o.hasOwnProperty(Zl)?o[Zl]:void 0;return"number"==typeof l?l>=0?l&_g:vo:l}(c);if("function"==typeof g){if(!nh(l,o,h))return h&Ct.Host?Kn(p,0,h):Iu(l,c,h,p);try{let v;if(v=g(h),null!=v||h&Ct.Optional)return v;qe()}finally{On()}}else if("number"==typeof g){let v=null,w=Ni(o,l),S=Qr,R=h&Ct.Host?l[$i][Nr]:null;for((-1===w||h&Ct.SkipSelf)&&(S=-1===w?ta(o,l):l[w+8],S!==Qr&&Fa(h,!1)?(v=l[tt],w=pl(S),l=wu(S,l)):w=-1);-1!==w;){const P=l[tt];if(Gf(g,w,P.data)){const z=gv(w,l,c,v,h,R);if(z!==ee)return z}S=l[w+8],S!==Qr&&Fa(h,l[tt].data[w+8]===R)&&Gf(g,w,l)?(v=P,w=pl(S),l=wu(S,l)):w=-1}}return p}function gv(o,l,c,h,p,g){const v=l[tt],w=v.data[o+8],P=rh(w,v,c,null==h?Mo(w)&&jf:h!=v&&0!=(3&w.type),p&Ct.Host&&g===w);return null!==P?ml(l,v,P,w):ee}function rh(o,l,c,h,p){const g=o.providerIndexes,v=l.data,w=1048575&g,S=o.directiveStart,P=g>>20,J=p?w+P:o.directiveEnd;for(let ne=h?w:w+P;ne<J;ne++){const Te=v[ne];if(ne<S&&c===Te||ne>=S&&Te.type===c)return ne}if(p){const ne=v[S];if(ne&&Zr(ne)&&ne.type===c)return S}return null}function ml(o,l,c,h){let p=o[c];const g=l.data;if(function Bf(o){return o instanceof Gt}(p)){const v=p;v.resolving&&function Ve(o,l){const c=l?`. Dependency path: ${l.join(" > ")} > ${o}`:"";throw new le(-200,`Circular dependency in DI detected for ${o}${c}`)}(function Ce(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():pe(o)}(g[c]));const w=_c(v.canSeeViewProviders);v.resolving=!0;const R=v.injectImpl?Jt(v.injectImpl):null;nh(o,h,Ct.Default);try{p=o[c]=v.factory(void 0,g,o,h),l.firstCreatePass&&c>=h.directiveStart&&function Nn(o,l,c){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:g}=l.type.prototype;if(h){const v=uc(l);(c.preOrderHooks??=[]).push(o,v),(c.preOrderCheckHooks??=[]).push(o,v)}p&&(c.preOrderHooks??=[]).push(0-o,p),g&&((c.preOrderHooks??=[]).push(o,g),(c.preOrderCheckHooks??=[]).push(o,g))}(c,g[c],l)}finally{null!==R&&Jt(R),_c(w),v.resolving=!1,On()}}return p}function Gf(o,l,c){return!!(c[l+(o>>zf)]&1<<o)}function Fa(o,l){return!(o&Ct.Self||o&Ct.Host&&l)}class fn{constructor(l,c){this._tNode=l,this._lView=c}get(l,c,h){return na(this._tNode,this._lView,l,In(h),c)}}function vo(){return new fn(mr(),Ne())}function Tu(o){return xo(()=>{const l=o.prototype.constructor,c=l[Do]||Js(l),h=Object.prototype;let p=Object.getPrototypeOf(o.prototype).constructor;for(;p&&p!==h;){const g=p[Do]||Js(p);if(g&&g!==c)return g;p=Object.getPrototypeOf(p)}return g=>new g})}function Js(o){return Je(o)?()=>{const l=Js(Fe(o));return l&&l()}:Oo(o)}function xu(o){const l=o[tt],c=l.type;return 2===c?l.declTNode:1===c?o[Nr]:null}function gl(o){return function Eu(o,l){if("class"===l)return o.classes;if("style"===l)return o.styles;const c=o.attrs;if(c){const h=c.length;let p=0;for(;p<h;){const g=c[p];if(Ao(g))break;if(0===g)p+=2;else if("number"==typeof g)for(p++;p<h&&"string"==typeof c[p];)p++;else{if(g===l)return c[p+1];p+=2}}}return null}(mr(),o)}const yl="__parameters__";function k(o,l,c){return xo(()=>{const h=function x(o){return function(...c){if(o){const h=o(...c);for(const p in h)this[p]=h[p]}}}(l);function p(...g){if(this instanceof p)return h.apply(this,g),this;const v=new p(...g);return w.annotation=v,w;function w(S,R,P){const z=S.hasOwnProperty(yl)?S[yl]:Object.defineProperty(S,yl,{value:[]})[yl];for(;z.length<=P;)z.push(null);return(z[P]=z[P]||[]).push(v),S}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}function Va(o,l){o.forEach(c=>Array.isArray(c)?Va(c,l):l(c))}function vg(o,l,c){l>=o.length?o.push(c):o.splice(l,0,c)}function vl(o,l){return l>=o.length-1?o.pop():o.splice(l,1)[0]}function bl(o,l){const c=[];for(let h=0;h<o;h++)c.push(l);return c}function Xr(o,l,c){let h=yc(o,l);return h>=0?o[1|h]=c:(h=~h,function _v(o,l,c,h){let p=o.length;if(p==l)o.push(c,h);else if(1===p)o.push(h,o[0]),o[0]=c;else{for(p--,o.push(o[p-1],o[p]);p>l;)o[p]=o[p-2],p--;o[l]=c,o[l+1]=h}}(o,h,l,c)),h}function sh(o,l){const c=yc(o,l);if(c>=0)return o[1|c]}function yc(o,l){return function oh(o,l,c){let h=0,p=o.length>>c;for(;p!==h;){const g=h+(p-h>>1),v=o[g<<c];if(l===v)return g<<c;v>l?p=g:h=g+1}return~(p<<c)}(o,l,1)}const me=Ln(k("Optional"),8),st=Ln(k("SkipSelf"),4);function Cv(o){return 128==(128&o.flags)}var Kf=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(Kf||{});const K0=/^>|^->|<!--|-->|--!>|<!-$/g,Y0=/(<|>)/g,Z0="\u200b$1\u200b";const Dg=new Map;let Ag=0;const J0="__ngContext__";function vs(o,l){Tr(l)?(o[J0]=l[Yo],function Yf(o){Dg.set(o[Yo],o)}(l)):o[J0]=l}let kg;function Mg(o,l){return kg(o,l)}function Og(o){const l=o[Wn];return Sr(l)?l[Wn]:l}function Cx(o){return nE(o[Ws])}function tE(o){return nE(o[ds])}function nE(o){for(;null!==o&&!Sr(o);)o=o[ds];return o}function Zf(o,l,c,h,p){if(null!=h){let g,v=!1;Sr(h)?g=h:Tr(h)&&(v=!0,h=h[mi]);const w=xn(h);0===o&&null!==c?null==p?oE(l,c,w):wl(l,c,w,p||null,!0):1===o&&null!==c?wl(l,c,w,p||null,!0):2===o?function Mv(o,l,c){const h=Ng(o,l);h&&function aE(o,l,c,h){o.removeChild(l,c,h)}(o,h,l,c)}(l,w,v):3===o&&l.destroyNode(w),null!=g&&function Ox(o,l,c,h,p){const g=c[pr];g!==xn(c)&&Zf(l,o,h,g,p);for(let w=Wi;w<c.length;w++){const S=c[w];bs(S[tt],S,o,l,h,g)}}(l,o,g,c,p)}}function Dv(o,l){return o.createComment(function Tv(o){return o.replace(K0,l=>l.replace(Y0,Z0))}(l))}function Av(o,l,c){return o.createElement(l,c)}function Xf(o,l){const c=o[Zo],h=c.indexOf(l);cv(l),c.splice(h,1)}function Br(o,l){if(o.length<=Wi)return;const c=Wi+l,h=o[c];if(h){const p=h[ol];null!==p&&p!==o&&Xf(p,h),l>0&&(o[c-1][ds]=h[ds]);const g=vl(o,Wi+l);!function RN(o,l){bs(o,l,l[kt],2,null,null),l[mi]=null,l[Nr]=null}(h[tt],h);const v=g[Fr];null!==v&&v.detachView(g[tt]),h[Wn]=null,h[ds]=null,h[Bt]&=-129}return h}function iE(o,l){if(!(256&l[Bt])){const c=l[kt];l[nu]&&sc(l[nu]),l[ps]&&sc(l[ps]),c.destroyNode&&bs(o,l,c,3,null,null),function Sx(o){let l=o[Ws];if(!l)return rE(o[tt],o);for(;l;){let c=null;if(Tr(l))c=l[Ws];else{const h=l[Wi];h&&(c=h)}if(!c){for(;l&&!l[ds]&&l!==o;)Tr(l)&&rE(l[tt],l),l=l[Wn];null===l&&(l=o),Tr(l)&&rE(l[tt],l),c=l&&l[ds]}l=c}}(l)}}function rE(o,l){if(!(256&l[Bt])){l[Bt]&=-129,l[Bt]|=256,function ON(o,l){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let h=0;h<c.length;h+=2){const p=l[c[h]];if(!(p instanceof Gt)){const g=c[h+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=p[g[v]],S=g[v+1];Ms(4,w,S);try{S.call(w)}finally{Ms(5,w,S)}}else{Ms(4,p,g);try{g.call(p)}finally{Ms(5,p,g)}}}}}(o,l),function MN(o,l){const c=o.cleanup,h=l[Ca];if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const v=c[g+3];v>=0?h[v]():h[-v].unsubscribe(),g+=2}else c[g].call(h[c[g+1]]);null!==h&&(l[Ca]=null);const p=l[Ta];if(null!==p){l[Ta]=null;for(let g=0;g<p.length;g++)(0,p[g])()}}(o,l),1===l[tt].type&&l[kt].destroy();const c=l[ol];if(null!==c&&Sr(l[Wn])){c!==l[Wn]&&Xf(c,l);const h=l[Fr];null!==h&&h.detachView(o)}!function IN(o){Dg.delete(o[Yo])}(l)}}function sE(o,l,c){return function Dx(o,l,c){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return c[mi];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:g}=o.data[h.directiveStart+p];if(g===ho.None||g===ho.Emulated)return null}return Lr(h,c)}}(o,l.parent,c)}function wl(o,l,c,h,p){o.insertBefore(l,c,h,p)}function oE(o,l,c){o.appendChild(l,c)}function Rv(o,l,c,h,p){null!==h?wl(o,l,c,h,p):oE(o,l,c)}function Ng(o,l){return o.parentNode(l)}function lE(o,l,c){return Fg(o,l,c)}let cE,Pv,gE,Nv,Fg=function Ax(o,l,c){return 40&o.type?Lr(o,c):null};function kv(o,l,c,h){const p=sE(o,h,l),g=l[kt],w=lE(h.parent||l[Nr],h,l);if(null!=p)if(Array.isArray(c))for(let S=0;S<c.length;S++)Rv(g,p,c[S],w,!1);else Rv(g,p,c,w,!1);void 0!==cE&&cE(g,h,l,c,p)}function Lg(o,l){if(null!==l){const c=l.type;if(3&c)return Lr(l,o);if(4&c)return uE(-1,o[l.index]);if(8&c){const h=l.child;if(null!==h)return Lg(o,h);{const p=o[l.index];return Sr(p)?uE(-1,p):xn(p)}}if(32&c)return Mg(l,o)()||xn(o[l.index]);{const h=kx(o,l);return null!==h?Array.isArray(h)?h[0]:Lg(Og(o[$i]),h):Lg(o,l.next)}}return null}function kx(o,l){return null!==l?o[$i][Nr].projection[l.projection]:null}function uE(o,l){const c=Wi+o+1;if(c<l.length){const h=l[c],p=h[tt].firstChild;if(null!==p)return Lg(h,p)}return l[pr]}function dE(o,l,c,h,p,g,v){for(;null!=c;){const w=h[c.index],S=c.type;if(v&&0===l&&(w&&vs(xn(w),h),c.flags|=2),32!=(32&c.flags))if(8&S)dE(o,l,c.child,h,p,g,!1),Zf(l,o,p,w,g);else if(32&S){const R=Mg(c,h);let P;for(;P=R();)Zf(l,o,p,P,g);Zf(l,o,p,w,g)}else 16&S?Ov(o,l,h,c,p,g):Zf(l,o,p,w,g);c=v?c.projectionNext:c.next}}function bs(o,l,c,h,p,g){dE(c,h,o.firstChild,l,p,g,!1)}function Ov(o,l,c,h,p,g){const v=c[$i],S=v[Nr].projection[h.projection];if(Array.isArray(S))for(let R=0;R<S.length;R++)Zf(l,o,p,S[R],g);else{let R=S;const P=v[Wn];Cv(h)&&(R.flags|=128),dE(o,l,R,P,p,g,!0)}}function fE(o,l,c){""===c?o.removeAttribute(l,"class"):o.setAttribute(l,"class",c)}function Nx(o,l,c){const{mergedAttrs:h,classes:p,styles:g}=c;null!==h&&ba(o,l,h),null!==p&&fE(o,l,p),null!==g&&function Px(o,l,c){o.setAttribute(l,"style",c)}(o,l,g)}function to(o){return function pE(){if(void 0===Pv&&(Pv=null,Kt.trustedTypes))try{Pv=Kt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Pv}()?.createHTML(o)||o}function no(o){gE=o}function _E(o){return function lh(){if(void 0===Nv&&(Nv=null,Kt.trustedTypes))try{Nv=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Nv}()?.createScriptURL(o)||o}class ch{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ft})`}}class yE extends ch{getTypeName(){return"HTML"}}class Vx extends ch{getTypeName(){return"Style"}}class Bx extends ch{getTypeName(){return"Script"}}class FN extends ch{getTypeName(){return"URL"}}class LN extends ch{getTypeName(){return"ResourceURL"}}function es(o){return o instanceof ch?o.changingThisBreaksApplicationSecurity:o}function io(o,l){const c=function Fv(o){return o instanceof ch&&o.getTypeName()||null}(o);if(null!=c&&c!==l){if("ResourceURL"===c&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${c} (see ${ft})`)}return c===l}function UN(o){return new yE(o)}function VN(o){return new Vx(o)}function ep(o){return new Bx(o)}function Ug(o){return new FN(o)}function Hx(o){return new LN(o)}class zx{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const c=(new window.DOMParser).parseFromString(to(l),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(l):(c.removeChild(c.firstChild),c)}catch{return null}}}class BN{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const c=this.inertDocument.createElement("template");return c.innerHTML=to(l),c}}const jN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Lv(o){return(o=String(o)).match(jN)?o:"unsafe:"+o}function El(o){const l={};for(const c of o.split(","))l[c]=!0;return l}function tp(...o){const l={};for(const c of o)for(const h in c)c.hasOwnProperty(h)&&(l[h]=!0);return l}const Vg=El("area,br,col,hr,img,wbr"),Uv=El("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gx=El("rp,rt"),vE=tp(Vg,tp(Uv,El("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tp(Gx,El("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tp(Gx,Uv)),ws=El("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uh=tp(ws,El("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),El("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wx=El("script,style,template");class GN{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let c=l.firstChild,h=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?h=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,h&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let p=this.checkClobberedElement(c,c.nextSibling);if(p){c=p;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(l){const c=l.nodeName.toLowerCase();if(!vE.hasOwnProperty(c))return this.sanitizedSomething=!0,!Wx.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const h=l.attributes;for(let p=0;p<h.length;p++){const g=h.item(p),v=g.name,w=v.toLowerCase();if(!uh.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let S=g.value;ws[w]&&(S=Lv(S)),this.buf.push(" ",v,'="',qx(S),'"')}return this.buf.push(">"),!0}endElement(l){const c=l.nodeName.toLowerCase();vE.hasOwnProperty(c)&&!Vg.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(l){this.buf.push(qx(l))}checkClobberedElement(l,c){if(c&&(l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return c}}const $N=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ba=/([^\#-~ |!])/g;function qx(o){return o.replace(/&/g,"&amp;").replace($N,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Ba,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vv;function Kx(o,l){let c=null;try{Vv=Vv||function jx(o){const l=new BN(o);return function HN(){try{return!!(new window.DOMParser).parseFromString(to(""),"text/html")}catch{return!1}}()?new zx(l):l}(o);let h=l?String(l):"";c=Vv.getInertBodyElement(h);let p=5,g=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=g,g=c.innerHTML,c=Vv.getInertBodyElement(h)}while(h!==g);return to((new GN).sanitizeChildren(bE(c)||c))}finally{if(c){const h=bE(c)||c;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function bE(o){return"content"in o&&function Yx(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Fo=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Fo||{});function Bv(o){const l=Bg();return l?l.sanitize(Fo.URL,o)||"":io(o,"URL")?es(o):Lv(pe(o))}function Zx(o){const l=Bg();if(l)return _E(l.sanitize(Fo.RESOURCE_URL,o)||"");if(io(o,"ResourceURL"))return _E(es(o));throw new le(904,!1)}function EE(o,l,c){return function wE(o,l){return"src"===l&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===l&&("base"===o||"link"===o)?Zx:Bv}(l,c)(o)}function Bg(){const o=Ne();return o&&o[Ko].sanitizer}class zn{constructor(l,c){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=_t({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const np=new zn("ENVIRONMENT_INITIALIZER"),Xx=new zn("INJECTOR",-1),Jx=new zn("INJECTOR_DEF_TYPES");class Hv{get(l,c=Ge){if(c===Ge){const h=new Error(`NullInjectorError: No provider for ${ae(l)}!`);throw h.name="NullInjectorError",h}return c}}function tD(...o){return{\u0275providers:nD(0,o),\u0275fromNgModule:!0}}function nD(o,...l){const c=[],h=new Set;let p;const g=v=>{c.push(v)};return Va(l,v=>{const w=v;Hg(w,g,[],h)&&(p||=[],p.push(w))}),void 0!==p&&jv(p,g),c}function jv(o,l){for(let c=0;c<o.length;c++){const{ngModule:h,providers:p}=o[c];zv(p,g=>{l(g,h)})}}function Hg(o,l,c,h){if(!(o=Fe(o)))return!1;let p=null,g=Di(o);const v=!g&&sn(o);if(g||v){if(v&&!v.standalone)return!1;p=o}else{const S=o.ngModule;if(g=Di(S),!g)return!1;p=S}const w=h.has(p);if(v){if(w)return!1;if(h.add(p),v.dependencies){const S="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of S)Hg(R,l,c,h)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let R;h.add(p);try{Va(g.imports,P=>{Hg(P,l,c,h)&&(R||=[],R.push(P))})}finally{}void 0!==R&&jv(R,l)}if(!w){const R=Oo(p)||(()=>new p);l({provide:p,useFactory:R,deps:un},p),l({provide:Jx,useValue:p,multi:!0},p),l({provide:np,useValue:()=>Qe(p),multi:!0},p)}const S=g.providers;if(null!=S&&!w){const R=o;zv(S,P=>{l(P,R)})}}}return p!==o&&void 0!==o.providers}function zv(o,l){for(let c of o)Pe(c)&&(c=c.\u0275providers),Array.isArray(c)?zv(c,l):l(c)}const hz=G({provide:String,useValue:G});function iD(o){return null!==o&&"object"==typeof o&&hz in o}function dh(o){return"function"==typeof o}const CE=new zn("Set Injector scope."),jg={},rD={};let Gv;function Mu(){return void 0===Gv&&(Gv=new Hv),Gv}class Il{}class ip extends Il{get destroyed(){return this._destroyed}constructor(l,c,h,p){super(),this.parent=c,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ha(l,v=>this.processProvider(v)),this.records.set(Xx,rp(void 0,this)),p.has("environment")&&this.records.set(Il,rp(void 0,this));const g=this.records.get(CE);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Jx.multi,un,Ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const l=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of l)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(l){return this.assertNotDestroyed(),this._onDestroyHooks.push(l),()=>this.removeOnDestroy(l)}runInContext(l){this.assertNotDestroyed();const c=se(this),h=Jt(void 0);try{return l()}finally{se(c),Jt(h)}}get(l,c=Ge,h=Ct.Default){if(this.assertNotDestroyed(),l.hasOwnProperty(el))return l[el](this);h=In(h);const g=se(this),v=Jt(void 0);try{if(!(h&Ct.SkipSelf)){let S=this.records.get(l);if(void 0===S){const R=function aD(o){return"function"==typeof o||"object"==typeof o&&o instanceof zn}(l)&&Fn(l);S=R&&this.injectableDefInScope(R)?rp($v(l),jg):null,this.records.set(l,S)}if(null!=S)return this.hydrate(l,S)}return(h&Ct.Self?Mu():this.parent).get(l,c=h&Ct.Optional&&c===Ge?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[yt]=w[yt]||[]).unshift(ae(l)),g)throw w;return function qr(o,l,c,h){const p=o[yt];throw l[B]&&p.unshift(l[B]),o.message=function va(o,l,c,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let p=ae(l);if(Array.isArray(l))p=l.map(ae).join(" -> ");else if("object"==typeof l){let g=[];for(let v in l)if(l.hasOwnProperty(v)){let w=l[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):ae(w)))}p=`{${g.join(", ")}}`}return`${c}${h?"("+h+")":""}[${p}]: ${o.replace(K,"\n  ")}`}("\n"+o.message,p,c,h),o.ngTokenPath=p,o[yt]=null,o}(w,l,"R3InjectorError",this.source)}throw w}finally{Jt(v),se(g)}}resolveInjectorInitializers(){const l=se(this),c=Jt(void 0);try{const p=this.get(np.multi,un,Ct.Self);for(const g of p)g()}finally{se(l),Jt(c)}}toString(){const l=[],c=this.records;for(const h of c.keys())l.push(ae(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(l){let c=dh(l=Fe(l))?l:Fe(l&&l.provide);const h=function pz(o){return iD(o)?rp(void 0,o.useValue):rp(sD(o),jg)}(l);if(dh(l)||!0!==l.multi)this.records.get(c);else{let p=this.records.get(c);p||(p=rp(void 0,jg,!0),p.factory=()=>Vt(p.multi),this.records.set(c,p)),c=l,p.multi.push(l)}this.records.set(c,h)}hydrate(l,c){return c.value===jg&&(c.value=rD,c.value=c.factory()),"object"==typeof c.value&&c.value&&function oD(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(l){if(!l.providedIn)return!1;const c=Fe(l.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(l){const c=this._onDestroyHooks.indexOf(l);-1!==c&&this._onDestroyHooks.splice(c,1)}}function $v(o){const l=Fn(o),c=null!==l?l.factory:Oo(o);if(null!==c)return c;if(o instanceof zn)throw new le(204,!1);if(o instanceof Function)return function fz(o){const l=o.length;if(l>0)throw bl(l,"?"),new le(204,!1);const c=function Or(o){return o&&(o[Xn]||o[dr])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new le(204,!1)}function sD(o,l,c){let h;if(dh(o)){const p=Fe(o);return Oo(p)||$v(p)}if(iD(o))h=()=>Fe(o.useValue);else if(function IE(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...Vt(o.deps||[]));else if(function QN(o){return!(!o||!o.useExisting)}(o))h=()=>Qe(Fe(o.useExisting));else{const p=Fe(o&&(o.useClass||o.provide));if(!function Wv(o){return!!o.deps}(o))return Oo(p)||$v(p);h=()=>new p(...Vt(o.deps))}return h}function rp(o,l,c=!1){return{factory:o,value:l,multi:c?[]:void 0}}function Ha(o,l){for(const c of o)Array.isArray(c)?Ha(c,l):c&&Pe(c)?Ha(c.\u0275providers,l):l(c)}const TE=new zn("AppId",{providedIn:"root",factory:()=>lD}),lD="ng",cD=new zn("Platform Initializer"),SE=new zn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),JN=new zn("AnimationModuleType"),e1=new zn("CSP nonce",{providedIn:"root",factory:()=>function bc(){if(void 0!==gE)return gE;if(typeof document<"u")return document;throw new le(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let s1=(o,l,c)=>null;function OE(o,l,c=!1){return s1(o,l,c)}class Ns{}class Gg{}class pD{resolveComponentFactory(l){throw function ts(o){const l=Error(`No component factory found for ${ae(o)}.`);return l.ngComponent=o,l}(l)}}let fh=(()=>{class o{static#e=this.NULL=new pD}return o})();function mD(){return _r(mr(),Ne())}function _r(o,l){return new $g(Lr(o,l))}let $g=(()=>{class o{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=mD}return o})();function Wg(o){return o instanceof $g?o.nativeElement:o}class qg{}let Tl=(()=>{class o{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function UE(){const o=Ne(),c=Dr(mr().index,o);return(Tr(c)?c:o)[kt]}()}return o})(),o1=(()=>{class o{static#e=this.\u0275prov=_t({token:o,providedIn:"root",factory:()=>null})}return o})();class gD{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const ph=new gD("16.2.10"),Zv={};function ap(o,l=null,c=null,h){const p=wD(o,l,c,h);return p.resolveInjectorInitializers(),p}function wD(o,l=null,c=null,h,p=new Set){const g=[c||un,tD(o)];return h=h||("object"==typeof o?void 0:ae(o)),new ip(g,l||Mu(),h||null,p)}let ro=(()=>{class o{static#e=this.THROW_IF_NOT_FOUND=Ge;static#t=this.NULL=new Hv;static create(c,h){if(Array.isArray(c))return ap({name:""},h,c,"");{const p=c.name??"";return ap({name:p},c.parent,c.providers,p)}}static#n=this.\u0275prov=_t({token:o,providedIn:"any",factory:()=>Qe(Xx)});static#i=this.__NG_ELEMENT_ID__=-1}return o})();function lp(o){return o.ngOriginalError}class Sl{constructor(){this._console=console}handleError(l){const c=this._findOriginalError(l);this._console.error("ERROR",l),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(l){let c=l&&lp(l);for(;c&&lp(c);)c=lp(c);return c||null}}function cp(o){return l=>{setTimeout(o,void 0,l)}}const sa=class CD extends u.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,c,h){let p=l,g=c||(()=>null),v=h;if(l&&"object"==typeof l){const S=l;p=S.next?.bind(S),g=S.error?.bind(S),v=S.complete?.bind(S)}this.__isAsync&&(g=cp(g),p&&(p=cp(p)),v&&(v=cp(v)));const w=super.subscribe({next:p,error:g,complete:v});return l instanceof $.w0&&l.add(w),w}};function eb(...o){}class Hr{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sa(!1),this.onMicrotaskEmpty=new sa(!1),this.onStable=new sa(!1),this.onError=new sa(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&c,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function zE(){const o="function"==typeof Kt.requestAnimationFrame;let l=Kt[o?"requestAnimationFrame":"setTimeout"],c=Kt[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&l&&c){const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h);const p=c[Zone.__symbol__("OriginalDelegate")];p&&(c=p)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function DD(o){const l=()=>{!function xD(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Kt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Kg(o),o.isCheckStableRunning=!0,GE(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Kg(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,p,g,v,w)=>{if(function ns(o){return!(!Array.isArray(o)||1!==o.length)&&!0===o[0].data?.__ignore_ng_zone__}(w))return c.invokeTask(p,g,v,w);try{return $E(o),c.invokeTask(p,g,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&l(),AD(o)}},onInvoke:(c,h,p,g,v,w,S)=>{try{return $E(o),c.invoke(p,g,v,w,S)}finally{o.shouldCoalesceRunChangeDetection&&l(),AD(o)}},onHasTask:(c,h,p,g)=>{c.hasTask(p,g),h===p&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,Kg(o),GE(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,h,p,g)=>(c.handleError(p,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hr.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(Hr.isInAngularZone())throw new le(909,!1)}run(l,c,h){return this._inner.run(l,c,h)}runTask(l,c,h,p){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+p,l,SD,eb,eb);try{return g.runTask(v,c,h)}finally{g.cancelTask(v)}}runGuarded(l,c,h){return this._inner.runGuarded(l,c,h)}runOutsideAngular(l){return this._outer.run(l)}}const SD={};function GE(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Kg(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function $E(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function AD(o){o._nesting--,GE(o)}class WE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sa,this.onMicrotaskEmpty=new sa,this.onStable=new sa,this.onError=new sa}run(l,c,h){return l.apply(c,h)}runGuarded(l,c,h){return l.apply(c,h)}runOutsideAngular(l){return l()}runTask(l,c,h,p){return l.apply(c,h)}}const tb=new zn("",{providedIn:"root",factory:nb});function nb(){const o=lt(Hr);let l=!0;const c=new N.y(p=>{l=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{p.next(l),p.complete()})}),h=new N.y(p=>{let g;o.runOutsideAngular(()=>{g=o.onStable.subscribe(()=>{Hr.assertNotInAngularZone(),queueMicrotask(()=>{!l&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(l=!0,p.next(!0))})})});const v=o.onUnstable.subscribe(()=>{Hr.assertInAngularZone(),l&&(l=!1,o.runOutsideAngular(()=>{p.next(!1)}))});return()=>{g.unsubscribe(),v.unsubscribe()}});return(0,te.T)(c,h.pipe((0,Ie.B)()))}function Yg(o){return o.ownerDocument}function Ec(o){return o instanceof Function?o():o}let mh=(()=>{class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=_t({token:o,providedIn:"root",factory:()=>new o})}return o})();function Ic(o){for(;o;){o[Bt]|=64;const l=Og(o);if(xa(o)&&!l)return o;o=l}return null}const OD=new zn("",{providedIn:"root",factory:()=>!1});let Cc=null;function UD(o,l){return o[l]??Qg()}function VD(o,l){const c=Qg();c.producerNode?.length&&(o[l]=Cc,c.lView=o,Cc=ZE())}const gh={...ic,consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{Ic(o.lView)},lView:null};function ZE(){return Object.create(gh)}function Qg(){return Cc??=ZE(),Cc}const qt={};function fp(o){QE(dn(),Ne(),ot()+o,!1)}function QE(o,l,c,h){if(!h)if(3==(3&l[Bt])){const g=o.preOrderCheckHooks;null!==g&&vu(l,g,c)}else{const g=o.preOrderHooks;null!==g&&fl(l,g,0,c)}Qs(c)}function Rr(o,l=Ct.Default){const c=Ne();return null===c?Qe(o,l):na(mr(),c,Fe(o),l)}function XE(){throw new Error("invalid")}function _h(o,l,c,h,p,g,v,w,S,R,P){const z=l.blueprint.slice();return z[mi]=p,z[Bt]=140|h,(null!==R||o&&2048&o[Bt])&&(z[Bt]|=2048),hg(z),z[Wn]=z[hs]=o,z[Jn]=c,z[Ko]=v||o&&o[Ko],z[kt]=w||o&&o[kt],z[ko]=S||o&&o[ko]||null,z[Nr]=g,z[Yo]=function EN(){return Ag++}(),z[qs]=P,z[tu]=R,z[$i]=2==l.type?o[$i]:z,z}function yh(o,l,c,h,p){let g=o.data[l];if(null===g)g=function Jg(o,l,c,h,p){const g=gu(),v=Nf(),S=o.data[l]=function jD(o,l,c,h,p,g){let v=l?l.injectorIndex:-1,w=0;return Jo()&&(w|=128),{type:c,index:h,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:p,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,c,l,h,p);return null===o.firstChild&&(o.firstChild=S),null!==g&&(v?null==g.child&&null!==S.parent&&(g.child=S):null===g.next&&(g.next=S,S.prev=g)),S}(o,l,c,h,p),function gg(){return Pt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=c,g.value=h,g.attrs=p;const v=function fc(){const o=Pt.lFrame,l=o.currentTNode;return o.isParent?l:l.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return mo(g,!0),g}function pp(o,l,c,h){if(0===c)return-1;const p=l.length;for(let g=0;g<c;g++)l.push(h),o.blueprint.push(h),o.data.push(null);return p}function JE(o,l,c,h,p){const g=UD(l,nu),v=ot(),w=2&h;try{Qs(-1),w&&l.length>en&&QE(o,l,en,!1),Ms(w?2:0,p);const R=w?g:null,P=wf(R);try{null!==R&&(R.dirty=!1),c(h,p)}finally{Mi(R,P)}}finally{w&&null===l[nu]&&VD(l,nu),Qs(v),Ms(w?3:1,p)}}function vh(o,l,c){if(Fd(l)){const h=xr(null);try{const g=l.directiveEnd;for(let v=l.directiveStart;v<g;v++){const w=o.data[v];w.contentQueries&&w.contentQueries(1,c[v],v)}}finally{xr(h)}}}function e_(o,l,c){Oi()&&(function h1(o,l,c,h){const p=c.directiveStart,g=c.directiveEnd;Mo(c)&&function o_(o,l,c){const h=Lr(l,o),p=ob(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const w=ja(o,_h(o,p,null,v,h,l,null,o[Ko].rendererFactory.createRenderer(h,c),null,null,null));o[l.index]=w}(l,c,o.data[p+c.componentOffset]),o.firstCreatePass||gi(c,l),vs(h,l);const v=c.initialInputs;for(let w=p;w<g;w++){const S=o.data[w],R=ml(l,o,w,c);vs(R,l),null!==v&&f1(0,w-p,R,S,0,v),Zr(S)&&(Dr(c.index,l)[Jn]=ml(l,o,w,c))}}(o,l,c,Lr(c,l)),64==(64&c.flags)&&Lu(o,l,c))}function t_(o,l,c=Lr){const h=l.localNames;if(null!==h){let p=l.index+1;for(let g=0;g<h.length;g+=2){const v=h[g+1],w=-1===v?c(l,o):o[v];o[p++]=w}}}function ob(o){const l=o.tView;return null===l||l.incompleteFirstPass?o.tView=mp(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):l}function mp(o,l,c,h,p,g,v,w,S,R,P){const z=en+h,J=z+p,ne=function n_(o,l){const c=[];for(let h=0;h<l;h++)c.push(h<o?null:qt);return c}(z,J),Te="function"==typeof R?R():R;return ne[tt]={type:o,blueprint:ne,template:c,queries:null,viewQuery:w,declTNode:l,data:ne.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:S,consts:Te,incompleteFirstPass:!1,ssrId:P}}let ab=o=>null;function tI(o,l,c,h){for(let p in o)if(o.hasOwnProperty(p)){c=null===c?{}:c;const g=o[p];null===h?zD(c,l,p,g):h.hasOwnProperty(p)&&zD(c,l,h[p],g)}return c}function zD(o,l,c,h){o.hasOwnProperty(c)?o[c].push(l,h):o[c]=[l,h]}function Fs(o,l,c,h,p,g,v,w){const S=Lr(l,c);let P,R=l.inputs;!w&&null!=R&&(P=R[h])?(fb(o,c,P,h,p),Mo(l)&&function r_(o,l){const c=Dr(l,o);16&c[Bt]||(c[Bt]|=64)}(c,l.index)):3&l.type&&(h=function GD(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),p=null!=v?v(p,l.value||"",h):p,g.setProperty(S,h,p))}function nI(o,l,c,h){if(Oi()){const p=null===h?null:{"":-1},g=function cb(o,l){const c=o.directiveRegistry;let h=null,p=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];if(nl(l,v.selectors,!1))if(h||(h=[]),Zr(v))if(null!==v.findHostDirectiveDefs){const w=[];p=p||new Map,v.findHostDirectiveDefs(v,w,p),h.unshift(...w,v),gp(o,l,w.length)}else h.unshift(v),gp(o,l,0);else p=p||new Map,v.findHostDirectiveDefs?.(v,h,p),h.push(v)}return null===h?null:[h,p]}(o,c);let v,w;null===g?v=w=null:[v,w]=g,null!==v&&WD(o,l,c,v,p,w),p&&function YD(o,l,c){if(l){const h=o.localNames=[];for(let p=0;p<l.length;p+=2){const g=c[l[p+1]];if(null==g)throw new le(-301,!1);h.push(l[p],g)}}}(c,h,p)}c.mergedAttrs=Ql(c.mergedAttrs,c.attrs)}function WD(o,l,c,h,p,g){for(let R=0;R<h.length;R++)Na(gi(c,l),o,h[R].type);!function ub(o,l,c){o.flags|=1,o.directiveStart=l,o.directiveEnd=l+c,o.providerIndexes=l}(c,o.data.length,h.length);for(let R=0;R<h.length;R++){const P=h[R];P.providersResolver&&P.providersResolver(P)}let v=!1,w=!1,S=pp(o,l,h.length,null);for(let R=0;R<h.length;R++){const P=h[R];c.mergedAttrs=Ql(c.mergedAttrs,P.hostAttrs),s_(o,c,l,S,P),bi(S,P,p),null!==P.contentQueries&&(c.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(c.flags|=64);const z=P.type.prototype;!v&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((o.preOrderHooks??=[]).push(c.index),v=!0),!w&&(z.ngOnChanges||z.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(c.index),w=!0),S++}!function i_(o,l,c){const p=l.directiveEnd,g=o.data,v=l.attrs,w=[];let S=null,R=null;for(let P=l.directiveStart;P<p;P++){const z=g[P],J=c?c.get(z):null,Te=J?J.outputs:null;S=tI(z.inputs,P,S,J?J.inputs:null),R=tI(z.outputs,P,R,Te);const We=null===S||null===v||$s(l)?null:p1(S,P,v);w.push(We)}null!==S&&(S.hasOwnProperty("class")&&(l.flags|=8),S.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=w,l.inputs=S,l.outputs=R}(o,c,g)}function Lu(o,l,c){const h=c.directiveStart,p=c.directiveEnd,g=c.index,v=function dv(){return Pt.lFrame.currentDirectiveIndex}();try{Qs(g);for(let w=h;w<p;w++){const S=o.data[w],R=l[w];yu(w),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Tc(S,R)}}finally{Qs(-1),yu(v)}}function Tc(o,l){null!==o.hostBindings&&o.hostBindings(1,l)}function gp(o,l,c){l.componentOffset=c,(o.components??=[]).push(l.index)}function bi(o,l,c){if(c){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)c[l.exportAs[h]]=o;Zr(l)&&(c[""]=o)}}function s_(o,l,c,h,p){o.data[h]=p;const g=p.factory||(p.factory=Oo(p.type)),v=new Gt(g,Zr(p),Rr);o.blueprint[h]=v,c[h]=v,function qD(o,l,c,h,p){const g=p.hostBindings;if(g){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const w=~l.index;(function KD(o){let l=o.length;for(;l>0;){const c=o[--l];if("number"==typeof c&&c<0)return c}return 0})(v)!=w&&v.push(w),v.push(c,h,g)}}(o,l,h,pp(o,c,p.hostVars,qt),p)}function xl(o,l,c,h,p,g){const v=Lr(o,l);!function db(o,l,c,h,p,g,v){if(null==g)o.removeAttribute(l,p,c);else{const w=null==v?pe(g):v(g,h||"",p);o.setAttribute(l,p,w,c)}}(l[kt],v,g,o.value,c,h,p)}function f1(o,l,c,h,p,g){const v=g[l];if(null!==v)for(let w=0;w<v.length;)ZD(h,c,v[w++],v[w++],v[w++])}function ZD(o,l,c,h,p){const g=xr(null);try{const v=o.inputTransforms;null!==v&&v.hasOwnProperty(h)&&(p=v[h].call(l,p)),null!==o.setInput?o.setInput(l,p,c,h):l[h]=p}finally{xr(g)}}function p1(o,l,c){let h=null,p=0;for(;p<c.length;){const g=c[p];if(0!==g)if(5!==g){if("number"==typeof g)break;if(o.hasOwnProperty(g)){null===h&&(h=[]);const v=o[g];for(let w=0;w<v.length;w+=2)if(v[w]===l){h.push(g,v[w+1],c[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function QD(o,l,c,h){return[o,!0,!1,l,null,0,h,c,null,null,null]}function _p(o,l){const c=o.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const g=c[h+1];if(-1!==g){const v=o.data[g];Lf(c[h]),v.contentQueries(2,l[g],g)}}}function ja(o,l){return o[Ws]?o[gf][ds]=l:o[Ws]=l,o[gf]=l,l}function hb(o,l,c){Lf(0);const h=xr(null);try{l(o,c)}finally{xr(h)}}function iI(o){return o[Ca]||(o[Ca]=[])}function wh(o){return o.cleanup||(o.cleanup=[])}function JD(o,l){const c=o[ko],h=c?c.get(Sl,null):null;h&&h.handleError(l)}function fb(o,l,c,h,p){for(let g=0;g<c.length;){const v=c[g++],w=c[g++];ZD(o.data[v],l[v],h,w,p)}}function eA(o,l){const c=Dr(l,o),h=c[tt];!function tA(o,l){for(let c=l.length;c<o.blueprint.length;c++)l.push(o.blueprint[c])}(h,c);const p=c[mi];null!==p&&null===c[qs]&&(c[qs]=OE(p,c[ko])),a_(h,c,c[Jn])}function a_(o,l,c){li(l);try{const h=o.viewQuery;null!==h&&hb(1,h,c);const p=o.template;null!==p&&JE(o,l,p,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&_p(o,l),o.staticViewQueries&&hb(2,o.viewQuery,c);const g=o.components;null!==g&&function rI(o,l){for(let c=0;c<l.length;c++)eA(o,l[c])}(l,g)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{l[Bt]&=-5,Zi()}}let sI=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(c,h,p){const g=typeof Zone>"u"?null:Zone.current,v=function ug(o,l,c){const h=Object.create(ov);c&&(h.consumerAllowSignalWrites=!0),h.fn=o,h.schedule=l;const p=v=>{h.cleanupFn=v};return h.ref={notify:()=>Hd(h),run:()=>{if(h.dirty=!1,h.hasRun&&!ag(h))return;h.hasRun=!0;const v=wf(h);try{h.cleanupFn(),h.cleanupFn=$d,h.fn(p)}finally{Mi(h,v)}},cleanup:()=>h.cleanupFn()},h.ref}(c,R=>{this.all.has(R)&&this.queue.set(R,g)},p);let w;this.all.add(v),v.notify();const S=()=>{v.cleanup(),w?.(),this.all.delete(v),this.queue.delete(v)};return w=h?.onDestroy(S),{destroy:S}}flush(){if(0!==this.queue.size)for(const[c,h]of this.queue)this.queue.delete(c),h?h.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=_t({token:o,providedIn:"root",factory:()=>new o})}return o})();function pb(o,l,c){let h=c?o.styles:null,p=c?o.classes:null,g=0;if(null!==l)for(let v=0;v<l.length;v++){const w=l[v];"number"==typeof w?g=w:1==g?p=Be(p,w):2==g&&(h=Be(h,w+": "+l[++v]+";"))}c?o.styles=h:o.stylesWithoutHost=h,c?o.classes=p:o.classesWithoutHost=p}function l_(o,l,c,h,p=!1){for(;null!==c;){const g=l[c.index];null!==g&&h.push(xn(g)),Sr(g)&&iA(g,h);const v=c.type;if(8&v)l_(o,l,c.child,h);else if(32&v){const w=Mg(c,l);let S;for(;S=w();)h.push(S)}else if(16&v){const w=kx(l,c);if(Array.isArray(w))h.push(...w);else{const S=Og(l[$i]);l_(S[tt],S,w,h,!0)}}c=p?c.projectionNext:c.next}return h}function iA(o,l){for(let c=Wi;c<o.length;c++){const h=o[c],p=h[tt].firstChild;null!==p&&l_(h[tt],h,p,l)}o[pr]!==o[mi]&&l.push(o[pr])}function mb(o,l,c,h=!0){const p=l[Ko],g=p.rendererFactory,v=p.afterRenderEventManager;g.begin?.(),v?.begin();try{u_(o,l,o.template,c)}catch(S){throw h&&JD(l,S),S}finally{g.end?.(),p.effectManager?.flush(),v?.end()}}function u_(o,l,c,h){const p=l[Bt];if(256!=(256&p)){l[Ko].effectManager?.flush(),li(l);try{hg(l),function Ff(o){return Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&JE(o,l,c,2,h);const v=3==(3&p);if(v){const R=o.preOrderCheckHooks;null!==R&&vu(l,R,null)}else{const R=o.preOrderHooks;null!==R&&fl(l,R,0,null),Pa(l,0)}if(function rA(o){for(let l=Cx(o);null!==l;l=tE(l)){if(!l[al])continue;const c=l[Zo];for(let h=0;h<c.length;h++){ka(c[h])}}}(l),gb(l,2),null!==o.contentQueries&&_p(o,l),v){const R=o.contentCheckHooks;null!==R&&vu(l,R)}else{const R=o.contentHooks;null!==R&&fl(l,R,1),Pa(l,1)}!function Xg(o,l){const c=o.hostBindingOpCodes;if(null===c)return;const h=UD(l,ps);try{for(let p=0;p<c.length;p++){const g=c[p];if(g<0)Qs(~g);else{const v=g,w=c[++p],S=c[++p];_u(w,v),h.dirty=!1;const R=wf(h);try{S(2,l[v])}finally{Mi(h,R)}}}}finally{null===l[ps]&&VD(l,ps),Qs(-1)}}(o,l);const w=o.components;null!==w&&sA(l,w,0);const S=o.viewQuery;if(null!==S&&hb(2,S,h),v){const R=o.viewCheckHooks;null!==R&&vu(l,R)}else{const R=o.viewHooks;null!==R&&fl(l,R,2),Pa(l,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),l[Bt]&=-73,cv(l)}finally{Zi()}}}function gb(o,l){for(let c=Cx(o);null!==c;c=tE(c))for(let h=Wi;h<c.length;h++)yp(c[h],l)}function d_(o,l,c){yp(Dr(l,o),c)}function yp(o,l){if(!function kf(o){return 128==(128&o[Bt])}(o))return;const c=o[tt],h=o[Bt];if(80&h&&0===l||1024&h||2===l)u_(c,o,c.template,o[Jn]);else if(o[Ro]>0){gb(o,1);const p=c.components;null!==p&&sA(o,p,1)}}function sA(o,l,c){for(let h=0;h<l.length;h++)d_(o,l[h],c)}class _i{get rootNodes(){const l=this._lView,c=l[tt];return l_(c,l,c.firstChild,[])}constructor(l,c){this._lView=l,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(l){this._lView[Jn]=l}get destroyed(){return 256==(256&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[Wn];if(Sr(l)){const c=l[8],h=c?c.indexOf(this):-1;h>-1&&(Br(l,h),vl(c,h))}this._attachedToViewContainer=!1}iE(this._lView[tt],this._lView)}onDestroy(l){!function hl(o,l){if(256==(256&o[Bt]))throw new le(911,!1);null===o[Ta]&&(o[Ta]=[]),o[Ta].push(l)}(this._lView,l)}markForCheck(){Ic(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-129}reattach(){this._lView[Bt]|=128}detectChanges(){mb(this._lView[tt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qf(o,l){bs(o,l,l[kt],2,null,null)}(this._lView[tt],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=l}}class oA extends _i{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;mb(l[tt],l,l[Jn],!1)}checkNoChanges(){}get context(){return null}}class aA extends fh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const c=sn(l);return new vp(c,this.ngModule)}}function lA(o){const l=[];for(let c in o)o.hasOwnProperty(c)&&l.push({propName:o[c],templateName:c});return l}class cA{constructor(l,c){this.injector=l,this.parentInjector=c}get(l,c,h){h=In(h);const p=this.injector.get(l,Zv,h);return p!==Zv||c===Zv?p:this.parentInjector.get(l,c,h)}}class vp extends Gg{get inputs(){const l=this.componentDef,c=l.inputTransforms,h=lA(l.inputs);if(null!==c)for(const p of h)c.hasOwnProperty(p.propName)&&(p.transform=c[p.propName]);return h}get outputs(){return lA(this.componentDef.outputs)}constructor(l,c){super(),this.componentDef=l,this.ngModule=c,this.componentType=l.type,this.selector=function nv(o){return o.map(ec).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!c}create(l,c,h,p){let g=(p=p||this.ngModule)instanceof Il?p:p?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new cA(l,g):l,w=v.get(qg,null);if(null===w)throw new le(407,!1);const z={rendererFactory:w,sanitizer:v.get(o1,null),effectManager:v.get(sI,null),afterRenderEventManager:v.get(mh,null)},J=w.createRenderer(null,this.componentDef),ne=this.componentDef.selectors[0][0]||"div",Te=h?function BD(o,l,c,h){const g=h.get(OD,!1)||c===ho.ShadowDom,v=o.selectRootElement(l,g);return function d1(o){ab(o)}(v),v}(J,h,this.componentDef.encapsulation,v):Av(J,ne,function g1(o){const l=o.toLowerCase();return"svg"===l?Rf:"math"===l?"math":null}(ne)),St=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ue=null;null!==Te&&(Ue=OE(Te,v,!0));const Ht=mp(0,null,null,1,0,null,null,null,null,null,null),an=_h(null,Ht,null,St,null,null,z,J,v,null,Ue);let ni,Bo;li(an);try{const Fc=this.componentDef;let lm,Fw=null;Fc.findHostDirectiveDefs?(lm=[],Fw=new Map,Fc.findHostDirectiveDefs(Fc,lm,Fw),lm.push(Fc)):lm=[Fc];const oy=function _b(o,l){const c=o[tt],h=en;return o[h]=l,yh(c,h,2,"#host",null)}(an,Te),nL=function dA(o,l,c,h,p,g,v){const w=p[tt];!function Dl(o,l,c,h){for(const p of o)l.mergedAttrs=Ql(l.mergedAttrs,p.hostAttrs);null!==l.mergedAttrs&&(pb(l,l.mergedAttrs,!0),null!==c&&Nx(h,c,l))}(h,o,l,v);let S=null;null!==l&&(S=OE(l,p[ko]));const R=g.rendererFactory.createRenderer(l,c);let P=16;c.signals?P=4096:c.onPush&&(P=64);const z=_h(p,ob(c),null,P,p[o.index],o,g,R,null,null,S);return w.firstCreatePass&&gp(w,o,h.length-1),ja(p,z),p[o.index]=z}(oy,Te,Fc,lm,an,z,J);Bo=qd(Ht,en),Te&&function _1(o,l,c,h){if(h)ba(o,c,["ng-version",ph.full]);else{const{attrs:p,classes:g}=function Yr(o){const l=[],c=[];let h=1,p=2;for(;h<o.length;){let g=o[h];if("string"==typeof g)2===p?""!==g&&l.push(g,o[++h]):8===p&&c.push(g);else{if(!Kr(p))break;p=g}h++}return{attrs:l,classes:c}}(l.selectors[0]);p&&ba(o,c,p),g&&g.length>0&&fE(o,c,g.join(" "))}}(J,Fc,Te,h),void 0!==c&&function fA(o,l,c){const h=o.projection=[];for(let p=0;p<l.length;p++){const g=c[p];h.push(null!=g?Array.from(g):null)}}(Bo,this.ngContentSelectors,c),ni=function hA(o,l,c,h,p,g){const v=mr(),w=p[tt],S=Lr(v,p);WD(w,p,v,c,null,h);for(let P=0;P<c.length;P++)vs(ml(p,w,v.directiveStart+P,v),p);Lu(w,p,v),S&&vs(S,p);const R=ml(p,w,v.directiveStart+v.componentOffset,v);if(o[Jn]=p[Jn]=R,null!==g)for(const P of g)P(R,l);return vh(w,v,o),R}(nL,Fc,lm,Fw,an,[aI]),a_(Ht,an,null)}finally{Zi()}return new uA(this.componentType,ni,_r(Bo,an),an,Bo)}}class uA extends Ns{constructor(l,c,h,p,g){super(),this.location=h,this._rootLView=p,this._tNode=g,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new oA(p),this.componentType=l}setInput(l,c){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){if(this.previousInputValues??=new Map,this.previousInputValues.has(l)&&Object.is(this.previousInputValues.get(l),c))return;const g=this._rootLView;fb(g[tt],g,p,l,c),this.previousInputValues.set(l,c),Ic(Dr(this._tNode.index,g))}}get injector(){return new fn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function aI(){const o=mr();Xs(Ne()[tt],o)}function yb(o){let l=function bp(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const h=[o];for(;l;){let p;if(Zr(o))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new le(903,!1);p=l.\u0275dir}if(p){if(c){h.push(p);const v=o;v.inputs=Eh(o.inputs),v.inputTransforms=Eh(o.inputTransforms),v.declaredInputs=Eh(o.declaredInputs),v.outputs=Eh(o.outputs);const w=p.hostBindings;w&&y1(o,w);const S=p.viewQuery,R=p.contentQueries;if(S&&pA(o,S),R&&vb(o,R),Z(o.inputs,p.inputs),Z(o.declaredInputs,p.declaredInputs),Z(o.outputs,p.outputs),null!==p.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),Z(v.inputTransforms,p.inputTransforms)),Zr(p)&&p.data.animation){const P=o.data;P.animation=(P.animation||[]).concat(p.data.animation)}}const g=p.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(o),w===yb&&(c=!1)}}l=Object.getPrototypeOf(l)}!function lI(o){let l=0,c=null;for(let h=o.length-1;h>=0;h--){const p=o[h];p.hostVars=l+=p.hostVars,p.hostAttrs=Ql(p.hostAttrs,c=Ql(c,p.hostAttrs))}}(h)}function Eh(o){return o===ks?{}:o===un?[]:o}function pA(o,l){const c=o.viewQuery;o.viewQuery=c?(h,p)=>{l(h,p),c(h,p)}:l}function vb(o,l){const c=o.contentQueries;o.contentQueries=c?(h,p,g)=>{l(h,p,g),c(h,p,g)}:l}function y1(o,l){const c=o.hostBindings;o.hostBindings=c?(h,p)=>{l(h,p),c(h,p)}:l}function dI(o){const l=o.inputConfig,c={};for(const h in l)if(l.hasOwnProperty(h)){const p=l[h];Array.isArray(p)&&p[2]&&(c[h]=p[2])}o.inputTransforms=c}function f_(o){return!!Eb(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function Eb(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Cs(o,l,c){return!Object.is(o[l],c)&&(o[l]=c,!0)}function p_(o,l,c,h){const p=Ne();return Cs(p,Oa(),l)&&(dn(),xl(ci(),p,o,l,c,h)),p_}function Ip(o,l,c,h){return Cs(o,Oa(),c)?l+pe(c)+h:qt}function D1(o,l,c,h,p,g,v,w){const S=Ne(),R=dn(),P=o+en,z=R.firstCreatePass?function x1(o,l,c,h,p,g,v,w,S){const R=l.consts,P=yh(l,o,4,v||null,Ra(R,w));nI(l,c,P,Ra(R,S)),Xs(l,P);const z=P.tView=mp(2,P,h,p,g,l.directiveRegistry,l.pipeRegistry,null,l.schemas,R,null);return null!==l.queries&&(l.queries.template(l,P),z.queries=l.queries.embeddedTView(P)),P}(P,R,S,l,c,h,p,g,v):R.data[P];mo(z,!1);const J=xA(R,S,z,o);Pn()&&kv(R,S,J,z),vs(J,S),ja(S,S[P]=QD(J,S,J,z)),ms(z)&&e_(R,S,z),null!=v&&t_(S,z,w)}let xA=function mI(o,l,c,h){return Ar(!0),l[kt].createComment("")};function wi(o){return Aa(function mg(){return Pt.lFrame.contextLView}(),en+o)}function It(o,l,c){const h=Ne();return Cs(h,Oa(),l)&&Fs(dn(),ci(),h,o,l,h[kt],c,!1),It}function xh(o,l,c,h,p){const v=p?"class":"style";fb(o,c,l.inputs[v],v,h)}function Sb(o,l,c,h){const p=Ne(),g=dn(),v=en+o,w=p[kt],S=g.firstCreatePass?function kn(o,l,c,h,p,g){const v=l.consts,S=yh(l,o,2,h,Ra(v,p));return nI(l,c,S,Ra(v,g)),null!==S.attrs&&pb(S,S.attrs,!1),null!==S.mergedAttrs&&pb(S,S.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,S),S}(v,g,p,l,c,h):g.data[v],R=y_(g,p,S,w,l,o);p[v]=R;const P=ms(S);return mo(S,!0),Nx(w,R,S),32!=(32&S.flags)&&Pn()&&kv(g,p,R,S),0===function mu(){return Pt.lFrame.elementDepthCount}()&&vs(R,p),function Ki(){Pt.lFrame.elementDepthCount++}(),P&&(e_(g,p,S),vh(g,S,p)),null!==h&&t_(p,S),Sb}function Ei(){let o=mr();Nf()?Qd():(o=o.parent,mo(o,!1));const l=o;(function Ma(o){return Pt.skipHydrationRootTNode===o})(l)&&function Pf(){Pt.skipHydrationRootTNode=null}(),function fg(){Pt.lFrame.elementDepthCount--}();const c=dn();return c.firstCreatePass&&(Xs(c,o),Fd(o)&&c.queries.elementEnd(o)),null!=l.classesWithoutHost&&function fv(o){return 0!=(8&o.flags)}(l)&&xh(c,l,Ne(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function ih(o){return 0!=(16&o.flags)}(l)&&xh(c,l,Ne(),l.stylesWithoutHost,!1),Ei}function rt(o,l,c,h){return Sb(o,l,c,h),Ei(),rt}let y_=(o,l,c,h,p,g)=>(Ar(!0),Av(h,p,function Pi(){return Pt.lFrame.currentNamespace}()));function Ah(o,l,c){const h=Ne(),p=dn(),g=o+en,v=p.firstCreatePass?function A1(o,l,c,h,p){const g=l.consts,v=Ra(g,h),w=yh(l,o,8,"ng-container",v);return null!==v&&pb(w,v,!0),nI(l,c,w,Ra(g,p)),null!==l.queries&&l.queries.elementStart(l,w),w}(g,p,h,l,c):p.data[g];mo(v,!0);const w=_I(p,h,v,o);return h[g]=w,Pn()&&kv(p,h,w,v),vs(w,h),ms(v)&&(e_(p,h,v),vh(p,v,h)),null!=c&&t_(h,v),Ah}function xb(){let o=mr();const l=dn();return Nf()?Qd():(o=o.parent,mo(o,!1)),l.firstCreatePass&&(Xs(l,o),Fd(o)&&l.queries.elementEnd(o)),xb}let _I=(o,l,c,h)=>(Ar(!0),Dv(l[kt],""));function Db(){return Ne()}function Ab(o){return!!o&&"function"==typeof o.then}function yI(o){return!!o&&"function"==typeof o.subscribe}function Ml(o,l,c,h){const p=Ne(),g=dn(),v=mr();return function v_(o,l,c,h,p,g,v){const w=ms(h),R=o.firstCreatePass&&wh(o),P=l[Jn],z=iI(l);let J=!0;if(3&h.type||v){const We=Lr(h,l),ut=v?v(We):We,St=z.length,Ue=v?an=>v(xn(an[h.index])):h.index;let Ht=null;if(!v&&w&&(Ht=function fe(o,l,c,h){const p=o.cleanup;if(null!=p)for(let g=0;g<p.length-1;g+=2){const v=p[g];if(v===c&&p[g+1]===h){const w=l[Ca],S=p[g+2];return w.length>S?w[S]:null}"string"==typeof v&&(g+=2)}return null}(o,l,p,h.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=g,Ht.__ngLastListenerFn__=g,J=!1;else{g=RA(h,l,P,g,!1);const an=c.listen(ut,p,g);z.push(g,an),R&&R.push(p,Ue,St,St+1)}}else g=RA(h,l,P,g,!1);const ne=h.outputs;let Te;if(J&&null!==ne&&(Te=ne[p])){const We=Te.length;if(We)for(let ut=0;ut<We;ut+=2){const ni=l[Te[ut]][Te[ut+1]].subscribe(g),Bo=z.length;z.push(g,ni),R&&R.push(p,h.index,Bo,-(Bo+1))}}}(g,p,p[kt],v,o,l,h),Ml}function la(o,l,c,h){try{return Ms(6,l,c),!1!==c(h)}catch(p){return JD(o,p),!1}finally{Ms(7,l,c)}}function RA(o,l,c,h,p){return function g(v){if(v===Function)return h;Ic(o.componentOffset>-1?Dr(o.index,l):l);let S=la(l,c,h,v),R=g.__ngNextListenerFn__;for(;R;)S=la(l,c,R,v)&&S,R=R.__ngNextListenerFn__;return p&&!1===S&&v.preventDefault(),S}}function Ap(o=1){return function ea(o){return(Pt.lFrame.contextLView=function jn(o,l){for(;o>0;)l=l[hs],o--;return l}(o,Pt.lFrame.contextLView))[Jn]}(o)}function Hu(o,l){let c=null;const h=function Xm(o){const l=o.attrs;if(null!=l){const c=l.indexOf(5);if(!(1&c))return l[c+1]}return null}(o);for(let p=0;p<l.length;p++){const g=l[p];if("*"!==g){if(null===h?nl(o,g,!0):Rd(h,g))return p}else c=p}return c}function kA(o){const l=Ne()[$i][Nr];if(!l.projection){const h=l.projection=bl(o?o.length:1,null),p=h.slice();let g=l.child;for(;null!==g;){const v=o?Hu(g,o):0;null!==v&&(p[v]?p[v].projectionNext=g:h[v]=g,p[v]=g),g=g.next}}}function ju(o,l=0,c){const h=Ne(),p=dn(),g=yh(p,en+o,16,null,c||null);null===g.projection&&(g.projection=l),Qd(),(!h[qs]||Jo())&&32!=(32&g.flags)&&function hE(o,l,c){Ov(l[kt],0,l,c,sE(o,c,l),lE(c.parent||l[Nr],c,l))}(p,h,g)}function kb(o,l,c){return b_(o,"",l,"",c),kb}function b_(o,l,c,h,p){const g=Ne(),v=Ip(g,l,c,h);return v!==qt&&Fs(dn(),ci(),g,o,v,g[kt],p,!1),b_}function w_(o,l){return o<<17|l<<2}function Ss(o){return o>>17&32767}function Ob(o){return 2|o}function Rh(o){return(131068&o)>>2}function bI(o,l){return-131069&o|l<<2}function wI(o){return 1|o}function FA(o,l,c,h,p){const g=o[c+1],v=null===l;let w=h?Ss(g):Rh(g),S=!1;for(;0!==w&&(!1===S||v);){const P=o[w+1];O1(o[w],l)&&(S=!0,o[w+1]=h?wI(P):Ob(P)),w=h?Ss(P):Rh(P)}S&&(o[c+1]=h?Ob(g):wI(g))}function O1(o,l){return null===o||null==l||(Array.isArray(o)?o[1]:o)===l||!(!Array.isArray(o)||"string"!=typeof l)&&yc(o,l)>=0}function Mp(o,l){return function Li(o,l,c,h){const p=Ne(),g=dn(),v=function _s(o){const l=Pt.lFrame,c=l.bindingIndex;return l.bindingIndex=l.bindingIndex+o,c}(2);g.firstUpdatePass&&function Mr(o,l,c,h){const p=o.data;if(null===p[c+1]){const g=p[ot()],v=function zA(o,l){return l>=o.expandoStartIndex}(o,c);(function Rc(o,l){return 0!=(o.flags&(l?8:16))})(g,h)&&null===l&&!v&&(l=!1),l=function U1(o,l,c,h){const p=function eh(o){const l=Pt.lFrame.currentDirectiveIndex;return-1===l?null:o[l]}(o);let g=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(c=Gu(c=Op(null,o,l,c,h),l.attrs,h),g=null);else{const v=l.directiveStylingLast;if(-1===v||o[v]!==p)if(c=Op(p,o,l,c,h),null===g){let S=function zu(o,l,c){const h=c?l.classBindings:l.styleBindings;if(0!==Rh(h))return o[Ss(h)]}(o,l,h);void 0!==S&&Array.isArray(S)&&(S=Op(null,o,l,S[1],h),S=Gu(S,l.attrs,h),function rr(o,l,c,h){o[Ss(c?l.classBindings:l.styleBindings)]=h}(o,l,h,S))}else g=function Dc(o,l,c){let h;const p=l.directiveEnd;for(let g=1+l.directiveStylingLast;g<p;g++)h=Gu(h,o[g].hostAttrs,c);return Gu(h,l.attrs,c)}(o,l,h)}return void 0!==g&&(h?l.residualClasses=g:l.residualStyles=g),c}(p,g,l,h),function k1(o,l,c,h,p,g){let v=g?l.classBindings:l.styleBindings,w=Ss(v),S=Rh(v);o[h]=c;let P,R=!1;if(Array.isArray(c)?(P=c[1],(null===P||yc(c,P)>0)&&(R=!0)):P=c,p)if(0!==S){const J=Ss(o[w+1]);o[h+1]=w_(J,w),0!==J&&(o[J+1]=bI(o[J+1],h)),o[w+1]=function Mb(o,l){return 131071&o|l<<17}(o[w+1],h)}else o[h+1]=w_(w,0),0!==w&&(o[w+1]=bI(o[w+1],h)),w=h;else o[h+1]=w_(S,0),0===w?w=h:o[S+1]=bI(o[S+1],h),S=h;R&&(o[h+1]=Ob(o[h+1])),FA(o,P,h,!0),FA(o,P,h,!1),function M1(o,l,c,h,p){const g=p?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof l&&yc(g,l)>=0&&(c[h+1]=wI(c[h+1]))}(l,P,o,h,g),v=w_(w,S),g?l.classBindings=v:l.styleBindings=v}(p,g,l,c,v,h)}}(g,o,v,h),l!==qt&&Cs(p,v,l)&&function I_(o,l,c,h,p,g,v,w){if(!(3&l.type))return;const S=o.data,R=S[w+1],P=function R1(o){return 1==(1&o)}(R)?Ac(S,l,c,p,Rh(R),v):void 0;Vo(P)||(Vo(g)||function NA(o){return 2==(2&o)}(R)&&(g=Ac(S,null,c,p,w,v)),function PN(o,l,c,h,p){if(l)p?o.addClass(c,h):o.removeClass(c,h);else{let g=-1===h.indexOf("-")?void 0:Kf.DashCase;null==p?o.removeStyle(c,h,g):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),g|=Kf.Important),o.setStyle(c,h,p,g))}}(h,v,po(ot(),c),p,g))}(g,g.data[ot()],p,p[kt],o,p[v+1]=function C_(o,l){return null==o||""===o||("string"==typeof l?o+=l:"object"==typeof o&&(o=ae(es(o)))),o}(l,c),h,v)}(o,l,null,!0),Mp}function Op(o,l,c,h,p){let g=null;const v=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<v&&(g=l[w],h=Gu(h,g.hostAttrs,p),g!==o);)w++;return null!==o&&(c.directiveStylingLast=w),h}function Gu(o,l,c){const h=c?1:2;let p=-1;if(null!==l)for(let g=0;g<l.length;g++){const v=l[g];"number"==typeof v?p=v:p===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Xr(o,v,!!c||l[++g]))}return void 0===o?null:o}function Ac(o,l,c,h,p,g){const v=null===l;let w;for(;p>0;){const S=o[p],R=Array.isArray(S),P=R?S[1]:S,z=null===P;let J=c[p+1];J===qt&&(J=z?un:void 0);let ne=z?sh(J,h):P===h?J:void 0;if(R&&!Vo(ne)&&(ne=sh(S,h)),Vo(ne)&&(w=ne,v))return w;const Te=o[p+1];p=v?Ss(Te):Rh(Te)}if(null!==l){let S=g?l.residualClasses:l.residualStyles;null!=S&&(w=sh(S,h))}return w}function Vo(o){return void 0!==o}function CI(o,l=""){const c=Ne(),h=dn(),p=o+en,g=h.firstCreatePass?yh(h,p,1,l,null):h.data[p],v=Mh(h,c,g,l,o);c[p]=v,Pn()&&kv(h,c,v,g),mo(g,!1)}let Mh=(o,l,c,h,p)=>(Ar(!0),function xv(o,l){return o.createText(l)}(l[kt],h));function kc(o){return Pp("",o,""),kc}function Pp(o,l,c){const h=Ne(),p=Ip(h,o,l,c);return p!==qt&&function Sc(o,l,c){const h=po(l,o);!function Tx(o,l,c){o.setValue(l,c)}(o[kt],h,c)}(h,ot(),p),Pp}function LI(o,l,c){const h=Ne();return Cs(h,Oa(),l)&&Fs(dn(),ci(),h,o,l,h[kt],c,!0),LI}const Oh=void 0;var Ph=["en",[["a","p"],["AM","PM"],Oh],[["AM","PM"],Oh,Oh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Oh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Oh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Oh,"{1} 'at' {0}",Oh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UI(o){const c=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let Ol={};function Vp(o){const l=function sR(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Pl(l);if(c)return c;const h=l.split("-")[0];if(c=Pl(h),c)return c;if("en"===h)return Ph;throw new le(701,!1)}function BI(o){return Vp(o)[Ga.PluralCase]}function Pl(o){return o in Ol||(Ol[o]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[o]),Ol[o]}var Ga=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(Ga||{});const Ku="en-US";let jI=Ku;function Gb(o,l,c,h,p){if(o=Fe(o),Array.isArray(o))for(let g=0;g<o.length;g++)Gb(o[g],l,c,h,p);else{const g=dn(),v=Ne(),w=mr();let S=dh(o)?o:Fe(o.provide);const R=sD(o),P=1048575&w.providerIndexes,z=w.directiveStart,J=w.providerIndexes>>20;if(dh(o)||!o.multi){const ne=new Gt(R,p,Rr),Te=O_(S,l,p?P:P+J,z);-1===Te?(Na(gi(w,v),g,S),nC(g,o,l.length),l.push(S),w.directiveStart++,w.directiveEnd++,p&&(w.providerIndexes+=1048576),c.push(ne),v.push(ne)):(c[Te]=ne,v[Te]=ne)}else{const ne=O_(S,l,P+J,z),Te=O_(S,l,P,P+J),ut=Te>=0&&c[Te];if(p&&!ut||!p&&!(ne>=0&&c[ne])){Na(gi(w,v),g,S);const St=function iC(o,l,c,h,p){const g=new Gt(o,c,Rr);return g.multi=[],g.index=l,g.componentProviders=0,or(g,p,h&&!c),g}(p?P_:AR,c.length,p,h,R);!p&&ut&&(c[Te].providerFactory=St),nC(g,o,l.length,0),l.push(S),w.directiveStart++,w.directiveEnd++,p&&(w.providerIndexes+=1048576),c.push(St),v.push(St)}else nC(g,o,ne>-1?ne:Te,or(c[p?Te:ne],R,!p&&h));!p&&h&&ut&&c[Te].componentProviders++}}}function nC(o,l,c,h){const p=dh(l),g=function XN(o){return!!o.useClass}(l);if(p||g){const S=(g?Fe(l.useClass):l).prototype.ngOnDestroy;if(S){const R=o.destroyHooks||(o.destroyHooks=[]);if(!p&&l.multi){const P=R.indexOf(c);-1===P?R.push(c,[h,S]):R[P+1].push(h,S)}else R.push(c,S)}}}function or(o,l,c){return c&&o.componentProviders++,o.multi.push(l)-1}function O_(o,l,c,h){for(let p=c;p<h;p++)if(l[p]===o)return p;return-1}function AR(o,l,c,h){return ua(this.multi,[])}function P_(o,l,c,h){const p=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=ml(c,c[tt],this.providerFactory.index,h);g=w.slice(0,v),ua(p,g);for(let S=v;S<w.length;S++)g.push(w[S])}else g=[],ua(p,g);return g}function ua(o,l){for(let c=0;c<o.length;c++)l.push((0,o[c])());return l}function rC(o,l=[]){return c=>{c.providersResolver=(h,p)=>function qp(o,l,c){const h=dn();if(h.firstCreatePass){const p=Zr(o);Gb(c,h.data,h.blueprint,p,!0),Gb(l,h.data,h.blueprint,p,!1)}}(h,p?p(o):o,l)}}class $a{}class sC{}function RR(o,l){return new oC(o,l??null,[])}class oC extends $a{constructor(l,c,h){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aA(this);const p=fr(l);this._bootstrapComponents=Ec(p.bootstrap),this._r3Injector=wD(l,c,[{provide:$a,useValue:this},{provide:fh,useValue:this.componentFactoryResolver},...h],ae(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class aC extends sC{constructor(l){super(),this.moduleType=l}create(l){return new oC(this.moduleType,l,[])}}class $b extends $a{constructor(l){super(),this.componentFactoryResolver=new aA(this),this.instance=null;const c=new ip([...l.providers,{provide:$a,useValue:this},{provide:fh,useValue:this.componentFactoryResolver}],l.parent||Mu(),l.debugName,new Set(["environment"]));this.injector=c,l.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function kR(o,l,c=null){return new $b({providers:o,parent:l,debugName:c,runEnvironmentInitializers:!0}).injector}let MR=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const h=nD(0,c.type),p=h.length>0?kR([h],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,p)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=_t({token:o,providedIn:"environment",factory:()=>new o(Qe(Il))})}return o})();function Wb(o){o.getStandaloneInjector=l=>l.get(MR).getOrCreateStandaloneInjector(o)}function L_(o,l,c,h,p,g){const v=l+c;return Cs(o,v,p)?function er(o,l,c){return o[l]=c}(o,v+1,g?h.call(g,p):h(p)):function Yp(o,l){const c=o[l];return c===qt?void 0:c}(o,v+1)}function GR(o,l){const c=dn();let h;const p=o+en;c.firstCreatePass?(h=function aF(o,l){if(l)for(let c=l.length-1;c>=0;c--){const h=l[c];if(o===h.name)return h}}(l,c.pipeRegistry),c.data[p]=h,h.onDestroy&&(c.destroyHooks??=[]).push(p,h.onDestroy)):h=c.data[p];const g=h.factory||(h.factory=Oo(h.type)),w=Jt(Rr);try{const S=_c(!1),R=g();return _c(S),function DA(o,l,c,h){c>=o.data.length&&(o.data[c]=null,o.blueprint[c]=null),l[c]=h}(c,Ne(),p,R),R}finally{Jt(w)}}function ed(o,l,c){const h=o+en,p=Ne(),g=Aa(p,h);return function U_(o,l){return o[tt].data[l].pure}(p,h)?L_(p,function gr(){const o=Pt.lFrame;let l=o.bindingRootIndex;return-1===l&&(l=o.bindingRootIndex=o.tView.bindingStartIndex),l}(),l,g.transform,c,g):g.transform(c)}function hC(){return this._results[Symbol.iterator]()}class Qp{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new sa)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Qp.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=hC)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,c){return this._results.reduce(l,c)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,c){const h=this;h.dirty=!1;const p=function ui(o){return o.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function ys(o,l,c){if(o.length!==l.length)return!1;for(let h=0;h<o.length;h++){let p=o[h],g=l[h];if(c&&(p=c(p),g=c(g)),g!==p)return!1}return!0}(h._results,p,c))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function fC(o,l,c,h=!0){const p=l[tt];if(function xx(o,l,c,h){const p=Wi+h,g=c.length;h>0&&(c[p-1][ds]=l),h<g-Wi?(l[ds]=c[p],vg(c,Wi+h,l)):(c.push(l),l[ds]=null),l[Wn]=c;const v=l[ol];null!==v&&c!==v&&function Pg(o,l){const c=o[Zo];l[$i]!==l[Wn][Wn][$i]&&(o[al]=!0),null===c?o[Zo]=[l]:c.push(l)}(v,l);const w=l[Fr];null!==w&&w.insertView(o),l[Bt]|=128}(p,l,o,c),h){const g=uE(c,o),v=l[kt],w=Ng(v,o[pr]);null!==w&&function kN(o,l,c,h,p,g){h[mi]=p,h[Nr]=l,bs(o,h,c,1,p,g)}(p,o[Nr],v,l,w,g)}}let nd=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=Zb}return o})();const uF=nd,pC=class extends uF{constructor(l,c,h){super(),this._declarationLView=l,this._declarationTContainer=c,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(l,c){return this.createEmbeddedViewImpl(l,c)}createEmbeddedViewImpl(l,c,h){const p=function qR(o,l,c,h){const p=l.tView,w=_h(o,p,c,4096&o[Bt]?4096:16,null,l,null,null,null,h?.injector??null,h?.hydrationInfo??null);w[ol]=o[l.index];const R=o[Fr];return null!==R&&(w[Fr]=R.createEmbeddedView(p)),a_(p,w,c),w}(this._declarationLView,this._declarationTContainer,l,{injector:c,hydrationInfo:h});return new _i(p)}};function Zb(){return Qb(mr(),Ne())}function Qb(o,l){return 4&o.type?new pC(l,o,_r(o,l)):null}let j_=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=rd}return o})();function rd(){return Hh(mr(),Ne())}const Xp=j_,gC=class extends Xp{constructor(l,c,h){super(),this._lContainer=l,this._hostTNode=c,this._hostLView=h}get element(){return _r(this._hostTNode,this._hostLView)}get injector(){return new fn(this._hostTNode,this._hostLView)}get parentInjector(){const l=ta(this._hostTNode,this._hostLView);if(bu(l)){const c=wu(l,this._hostLView),h=pl(l);return new fn(c[tt].data[h+8],c)}return new fn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const c=sd(this._lContainer);return null!==c&&c[l]||null}get length(){return this._lContainer.length-Wi}createEmbeddedView(l,c,h){let p,g;"number"==typeof h?p=h:null!=h&&(p=h.index,g=h.injector);const w=l.createEmbeddedViewImpl(c||{},g,null);return this.insertImpl(w,p,false),w}createComponent(l,c,h,p,g){const v=l&&!function bo(o){return"function"==typeof o}(l);let w;if(v)w=c;else{const We=c||{};w=We.index,h=We.injector,p=We.projectableNodes,g=We.environmentInjector||We.ngModuleRef}const S=v?l:new vp(sn(l)),R=h||this.parentInjector;if(!g&&null==S.ngModule){const ut=(v?R:this.parentInjector).get(Il,null);ut&&(g=ut)}sn(S.componentType??{});const ne=S.create(R,p,null,g);return this.insertImpl(ne.hostView,w,false),ne}insert(l,c){return this.insertImpl(l,c,!1)}insertImpl(l,c,h){const p=l._lView;if(function fu(o){return Sr(o[Wn])}(p)){const S=this.indexOf(l);if(-1!==S)this.detach(S);else{const R=p[Wn],P=new gC(R,R[Nr],R[Wn]);P.detach(P.indexOf(l))}}const v=this._adjustIndex(c),w=this._lContainer;return fC(w,p,v,!h),l.attachToViewContainerRef(),vg(_C(w),v,l),l}move(l,c){return this.insert(l,c)}indexOf(l){const c=sd(this._lContainer);return null!==c?c.indexOf(l):-1}remove(l){const c=this._adjustIndex(l,-1),h=Br(this._lContainer,c);h&&(vl(_C(this._lContainer),c),iE(h[tt],h))}detach(l){const c=this._adjustIndex(l,-1),h=Br(this._lContainer,c);return h&&null!=vl(_C(this._lContainer),c)?new _i(h):null}_adjustIndex(l,c=0){return l??this.length+c}};function sd(o){return o[8]}function _C(o){return o[8]||(o[8]=[])}function Hh(o,l){let c;const h=l[o.index];return Sr(h)?c=h:(c=QD(h,l,null,o),l[o.index]=c,ja(l,c)),Oc(c,l,o,h),new gC(c,o,l)}let Oc=function yC(o,l,c,h){if(o[pr])return;let p;p=8&c.type?xn(h):function XR(o,l){const c=o[kt],h=c.createComment(""),p=Lr(l,o);return wl(c,Ng(c,p),h,function Jf(o,l){return o.nextSibling(l)}(c,p),!1),h}(l,c),o[pr]=p};class vC{constructor(l){this.queryList=l,this.matches=null}clone(){return new vC(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jb{constructor(l=[]){this.queries=l}createEmbeddedView(l){const c=l.queries;if(null!==c){const h=null!==l.contentQueries?l.contentQueries[0]:c.length,p=[];for(let g=0;g<h;g++){const v=c.getByIndex(g);p.push(this.queries[v.indexInDeclarationView].clone())}return new Jb(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let c=0;c<this.queries.length;c++)null!==sk(l,c).matches&&this.queries[c].setDirty()}}class ek{constructor(l,c,h=null){this.predicate=l,this.flags=c,this.read=h}}class Jp{constructor(l=[]){this.queries=l}elementStart(l,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,c)}elementEnd(l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(l)}embeddedTView(l){let c=null;for(let h=0;h<this.length;h++){const p=null!==c?c.length:0,g=this.getByIndex(h).embeddedTView(l,p);g&&(g.indexInDeclarationView=h,null!==c?c.push(g):c=[g])}return null!==c?new Jp(c):null}template(l,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,c)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class ew{constructor(l,c=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(l,c){this.isApplyingToNode(c)&&this.matchTNode(l,c)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,c){this.elementStart(l,c)}embeddedTView(l,c){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,c),new ew(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const g=h[p];this.matchTNodeWithReadOption(l,c,hF(c,g)),this.matchTNodeWithReadOption(l,c,rh(c,l,g,!1,!1))}else h===nd?4&c.type&&this.matchTNodeWithReadOption(l,c,-1):this.matchTNodeWithReadOption(l,c,rh(c,l,h,!1,!1))}matchTNodeWithReadOption(l,c,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===$g||p===j_||p===nd&&4&c.type)this.addMatch(c.index,-2);else{const g=rh(c,l,p,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,h)}}addMatch(l,c){null===this.matches?this.matches=[l,c]:this.matches.push(l,c)}}function hF(o,l){const c=o.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===l)return c[h+1];return null}function fF(o,l,c,h){return-1===c?function tk(o,l){return 11&o.type?_r(o,l):4&o.type?Qb(o,l):null}(l,o):-2===c?function nk(o,l,c){return c===$g?_r(l,o):c===nd?Qb(l,o):c===j_?Hh(l,o):void 0}(o,l,h):ml(o,o[tt],c,l)}function od(o,l,c,h){const p=l[Fr].queries[h];if(null===p.matches){const g=o.data,v=c.matches,w=[];for(let S=0;S<v.length;S+=2){const R=v[S];w.push(R<0?null:fF(l,g[R],v[S+1],c.metadata.read))}p.matches=w}return p.matches}function jh(o,l,c,h){const p=o.queries.getByIndex(c),g=p.matches;if(null!==g){const v=od(o,l,p,c);for(let w=0;w<g.length;w+=2){const S=g[w];if(S>0)h.push(v[w/2]);else{const R=g[w+1],P=l[-S];for(let z=Wi;z<P.length;z++){const J=P[z];J[ol]===J[Wn]&&jh(J[tt],J,R,h)}if(null!==P[Zo]){const z=P[Zo];for(let J=0;J<z.length;J++){const ne=z[J];jh(ne[tt],ne,R,h)}}}}}return h}function bC(o){const l=Ne(),c=dn(),h=th();Lf(h+1);const p=sk(c,h);if(o.dirty&&function Kd(o){return 4==(4&o[Bt])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const g=p.crossesNgTemplate?jh(c,l,h,[]):od(c,l,p,h);o.reset(g,Wg),o.notifyOnChanges()}return!0}return!1}function wC(o,l,c){const h=dn();h.firstCreatePass&&(tw(h,new ek(o,l,c),-1),2==(2&l)&&(h.staticViewQueries=!0)),rk(h,Ne(),l)}function ik(o,l,c,h){const p=dn();if(p.firstCreatePass){const g=mr();tw(p,new ek(l,c,h),g.index),function ss(o,l){const c=o.contentQueries||(o.contentQueries=[]);l!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,l)}(p,o),2==(2&c)&&(p.staticContentQueries=!0)}rk(p,Ne(),c)}function EC(){return function pF(o,l){return o[Fr].queries[l].queryList}(Ne(),th())}function rk(o,l,c){const h=new Qp(4==(4&c));(function HD(o,l,c,h){const p=iI(l);p.push(c),o.firstCreatePass&&wh(o).push(h,p.length-1)})(o,l,h,h.destroy),null===l[Fr]&&(l[Fr]=new Jb),l[Fr].queries.push(new vC(h))}function tw(o,l,c){null===o.queries&&(o.queries=new Jp),o.queries.track(new ew(l,c))}function sk(o,l){return o.queries.getByIndex(l)}function ok(o,l){return Qb(o,l)}function nw(o){return!!fr(o)}const Sk=new zn("Application Initializer");let $h=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h}),this.appInits=lt(Sk,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const p of this.appInits){const g=p();if(Ab(g))c.push(g);else if(yI(g)){const v=new Promise((w,S)=>{g.subscribe({complete:w,error:S})});c.push(v)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{h()}).catch(p=>{this.reject(p)}),0===c.length&&h(),this.initialized=!0}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),cw=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();const im=new zn("LocaleId",{providedIn:"root",factory:()=>lt(im,Ct.Optional|Ct.SkipSelf)||function nm(){return typeof $localize<"u"&&$localize.locale||Ku}()}),uw=new zn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let hw=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ue.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class FC{constructor(l,c){this.ngModuleFactory=l,this.componentFactories=c}}let ld=(()=>{class o{compileModuleSync(c){return new aC(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),g=Ec(fr(c).declarations).reduce((v,w)=>{const S=sn(w);return S&&v.push(new vp(S)),v},[]);return new FC(h,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const Pc=new zn(""),_w=new zn("");let cd,om=(()=>{class o{constructor(c,h,p){this._ngZone=c,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cd||(function Nk(o){cd=o}(p),p.addToWindow(h)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,p){let g=-1;h&&h>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:p})}whenStable(c,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,h,p){return[]}static#e=this.\u0275fac=function(h){return new(h||o)(Qe(Hr),Qe(Wh),Qe(_w))};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac})}return o})(),Wh=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return cd?.findTestabilityInTree(this,c,h)??null}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})(),ud=null;const Fk=new zn("AllowMultipleToken"),X_=new zn("PlatformDestroyListeners"),J_=new zn("appBootstrapListener");class $C{constructor(l,c){this.name=l,this.token=c}}function KC(o,l,c=[]){const h=`Platform: ${l}`,p=new zn(h);return(g=[])=>{let v=ZC();if(!v||v.injector.get(Fk,!1)){const w=[...c,...g,{provide:p,useValue:!0}];o?o(w):function WC(o){if(ud&&!ud.get(Fk,!1))throw new le(400,!1);(function Uk(){!function Sf(o){Tf=o}(()=>{throw new le(600,!1)})})(),ud=o;const l=o.get(Bk);(function qC(o){o.get(cD,null)?.forEach(c=>c())})(o)}(function YC(o=[],l){return ro.create({name:l,providers:[{provide:CE,useValue:"platform"},{provide:X_,useValue:new Set([()=>ud=null])},...o]})}(w,h))}return function Vk(o){const l=ZC();if(!l)throw new le(401,!1);return l}()}}function ZC(){return ud?.get(Bk)??null}let Bk=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const p=function RF(o="zone.js",l){return"noop"===o?new WE:"zone.js"===o?new Hr(l):o}(h?.ngZone,function Hk(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return p.run(()=>{const g=function N_(o,l,c){return new oC(o,l,c)}(c.moduleType,this.injector,function XC(o){return[{provide:Hr,useFactory:o},{provide:np,multi:!0,useFactory:()=>{const l=lt(zk,{optional:!0});return()=>l.initialize()}},{provide:jk,useFactory:QC},{provide:tb,useFactory:nb}]}(()=>p)),v=g.injector.get(Sl,null);return p.runOutsideAngular(()=>{const w=p.onError.subscribe({next:S=>{v.handleError(S)}});g.onDestroy(()=>{bw(this._modules,g),w.unsubscribe()})}),function yw(o,l,c){try{const h=c();return Ab(h)?h.catch(p=>{throw l.runOutsideAngular(()=>o.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>o.handleError(h)),h}}(v,p,()=>{const w=g.injector.get($h);return w.runInitializers(),w.donePromise.then(()=>(function Lb(o){et(o,"Expected localeId to be defined"),"string"==typeof o&&(jI=o.toLowerCase().replace(/_/g,"-"))}(g.injector.get(im,Ku)||Ku),this._moduleDoBootstrap(g),g))})})}bootstrapModule(c,h=[]){const p=vw({},h);return function GC(o,l,c){const h=new aC(c);return Promise.resolve(h)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,p))}_moduleDoBootstrap(c){const h=c.injector.get(dd);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!c.instance.ngDoBootstrap)throw new le(-403,!1);c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const c=this._injector.get(X_,null);c&&(c.forEach(h=>h()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(h){return new(h||o)(Qe(ro))};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();function vw(o,l){return Array.isArray(l)?l.reduce(vw,o):{...o,...l}}let dd=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=lt(jk),this.zoneIsStable=lt(tb),this.componentTypes=[],this.components=[],this.isStable=lt(hw).hasPendingTasks.pipe((0,Ae.w)(c=>c?(0,ce.of)(!1):this.zoneIsStable),(0,ye.x)(),(0,Ie.B)()),this._injector=lt(Il)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,h){const p=c instanceof Gg;if(!this._injector.get($h).done)throw!p&&rl(c),new le(405,!1);let v;v=p?c:this._injector.get(fh).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const w=function xF(o){return o.isBoundToModule}(v)?void 0:this._injector.get($a),R=v.create(ro.NULL,[],h||v.selector,w),P=R.location.nativeElement,z=R.injector.get(Pc,null);return z?.registerApplication(P),R.onDestroy(()=>{this.detachView(R.hostView),bw(this.components,R),z?.unregisterApplication(P)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;bw(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const h=this._injector.get(J_,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>bw(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new le(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function bw(o,l){const c=o.indexOf(l);c>-1&&o.splice(c,1)}const jk=new zn("",{providedIn:"root",factory:()=>lt(Sl).handleError.bind(void 0)});function QC(){const o=lt(Hr),l=lt(Sl);return c=>o.runOutsideAngular(()=>l.handleError(c))}let zk=(()=>{class o{constructor(){this.zone=lt(Hr),this.applicationRef=lt(dd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=_t({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function JC(){return!1}let MF=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=eT}return o})();function eT(o){return function tT(o,l,c){if(Mo(o)&&!c){const h=Dr(o.index,l);return new _i(h,h)}return 47&o.type?new _i(l[$i],l):null}(mr(),Ne(),16==(16&o))}class aT{constructor(){}supports(l){return f_(l)}create(l){return new LF(l)}}const FF=(o,l)=>l;class LF{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||FF}forEachItem(l){let c;for(c=this._itHead;null!==c;c=c._next)l(c)}forEachOperation(l){let c=this._itHead,h=this._removalsHead,p=0,g=null;for(;c||h;){const v=!h||c&&c.currentIndex<Sw(h,p,g)?c:h,w=Sw(v,p,g),S=v.currentIndex;if(v===h)p--,h=h._nextRemoved;else if(c=c._next,null==v.previousIndex)p++;else{g||(g=[]);const R=w-p,P=S-p;if(R!=P){for(let J=0;J<R;J++){const ne=J<g.length?g[J]:g[J]=0,Te=ne+J;P<=Te&&Te<R&&(g[J]=ne+1)}g[v.previousIndex]=P-R}}w!==S&&l(v,w,S)}}forEachPreviousItem(l){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachMovedItem(l){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}forEachIdentityChange(l){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)l(c)}diff(l){if(null==l&&(l=[]),!f_(l))throw new le(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,g,v,c=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let w=0;w<this.length;w++)g=l[w],v=this._trackByFn(w,g),null!==c&&Object.is(c.trackById,v)?(h&&(c=this._verifyReinsertion(c,g,v,w)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,v,w),h=!0),c=c._next}else p=0,function bA(o,l){if(Array.isArray(o))for(let c=0;c<o.length;c++)l(o[c]);else{const c=o[Symbol.iterator]();let h;for(;!(h=c.next()).done;)l(h.value)}}(l,w=>{v=this._trackByFn(p,w),null!==c&&Object.is(c.trackById,v)?(h&&(c=this._verifyReinsertion(c,w,v,p)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,v,p),h=!0),c=c._next,p++}),this.length=p;return this._truncate(c),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,c,h,p){let g;return null===l?g=this._itTail:(g=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._reinsertAfter(l,g,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._moveAfter(l,g,p)):l=this._addAfter(new lT(c,h),g,p),l}_verifyReinsertion(l,c,h,p){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==g?l=this._reinsertAfter(g,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const c=l._next;this._addToRemovals(this._unlink(l)),l=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,g=l._nextRemoved;return null===p?this._removalsHead=g:p._nextRemoved=g,null===g?this._removalsTail=p:g._prevRemoved=p,this._insertAfter(l,c,h),this._addToMoves(l,h),l}_moveAfter(l,c,h){return this._unlink(l),this._insertAfter(l,c,h),this._addToMoves(l,h),l}_addAfter(l,c,h){return this._insertAfter(l,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,c,h){const p=null===c?this._itHead:c._next;return l._next=p,l._prev=c,null===p?this._itTail=l:p._prev=l,null===c?this._itHead=l:c._next=l,null===this._linkedRecords&&(this._linkedRecords=new Tw),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const c=l._prev,h=l._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,l}_addToMoves(l,c){return l.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tw),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,c){return l.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class lT{constructor(l,c){this.item=l,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UF{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const c=l._prevDup,h=l._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class Tw{constructor(){this.map=new Map}put(l){const c=l.trackById;let h=this.map.get(c);h||(h=new UF,this.map.set(c,h)),h.add(l)}get(l,c){const p=this.map.get(l);return p?p.get(l,c):null}remove(l){const c=l.trackById;return this.map.get(c).remove(l)&&this.map.delete(c),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sw(o,l,c){const h=o.previousIndex;if(null===h)return h;let p=0;return c&&h<c.length&&(p=c[h]),h+l+p}class xw{constructor(){}supports(l){return l instanceof Map||Eb(l)}create(){return new VF}}class VF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let c;for(c=this._mapHead;null!==c;c=c._next)l(c)}forEachPreviousItem(l){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)l(c)}forEachChangedItem(l){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}diff(l){if(l){if(!(l instanceof Map||Eb(l)))throw new le(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(c&&c.key===p)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(p,h);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,c){if(l){const h=l._prev;return c._next=l,c._prev=h,l._prev=c,h&&(h._next=c),l===this._mapHead&&(this._mapHead=c),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(l,c){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,c);const g=p._prev,v=p._next;return g&&(g._next=v),v&&(v._prev=g),p._next=null,p._prev=null,p}const h=new iy(l);return this._records.set(l,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,c){Object.is(c,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=c,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,c){l instanceof Map?l.forEach(c):Object.keys(l).forEach(h=>c(l[h],h))}}class iy{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qk(){return new ry([new aT])}let ry=(()=>{class o{static#e=this.\u0275prov=_t({token:o,providedIn:"root",factory:Qk});constructor(c){this.factories=c}static create(c,h){if(null!=h){const p=h.factories.slice();c=c.concat(p)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||Qk()),deps:[[o,new st,new me]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(null!=h)return h;throw new le(901,!1)}}return o})();function Kh(){return new Dw([new xw])}let Dw=(()=>{class o{static#e=this.\u0275prov=_t({token:o,providedIn:"root",factory:Kh});constructor(c){this.factories=c}static create(c,h){if(h){const p=h.factories.slice();c=c.concat(p)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||Kh()),deps:[[o,new st,new me]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(h)return h;throw new le(901,!1)}}return o})();const jF=KC(null,"core",[]);let Rw=(()=>{class o{constructor(c){}static#e=this.\u0275fac=function(h){return new(h||o)(Qe(dd))};static#t=this.\u0275mod=Xc({type:o});static#n=this.\u0275inj=Qn({})}return o})();function iM(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function Ti(o){const l=sn(o);if(!l)return null;const c=new vp(l);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return l.standalone},get isSignal(){return l.signals}}}},3399:(gt,Se,U)=>{U.d(Se,{Z:()=>Xe});var u=U(9058),$=U(4537),N=U(7592),te=U(7879);class ue{constructor(Je,Pe){this._delegate=Je,this.firebase=Pe,(0,N._addComponent)(Je,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Je,Pe=N._DEFAULT_ENTRY_NAME){var vt;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(Je);return!ft.isInitialized()&&"EXPLICIT"===(null===(vt=ft.getComponent())||void 0===vt?void 0:vt.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:Pe})}_removeServiceInstance(Je,Pe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(Pe)}_addComponent(Je){(0,N._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,N._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ye(){const Fe=function Ae(Fe){const Je={},Pe={__esModule:!0,initializeApp:function le(Ve,Y={}){const ke=N.initializeApp(Ve,Y);if((0,u.r3)(Je,ke.name))return Je[ke.name];const qe=new Fe(ke,Pe);return Je[ke.name]=qe,qe},app:ft,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function pe(Ve){const Y=Ve.name,ke=Y.replace("-compat","");if(N._registerComponent(Ve)&&"PUBLIC"===Ve.type){const qe=(wt=ft())=>{if("function"!=typeof wt[ke])throw Ie.create("invalid-app-argument",{appName:Y});return wt[ke]()};void 0!==Ve.serviceProps&&(0,u.ZB)(qe,Ve.serviceProps),Pe[ke]=qe,Fe.prototype[ke]=function(...wt){return this._getService.bind(this,Y).apply(this,Ve.multipleInstances?wt:[])}}return"PUBLIC"===Ve.type?Pe[ke]:null},removeApp:function vt(Ve){delete Je[Ve]},useAsService:function Ce(Ve,Y){return"serverAuth"===Y?null:Y},modularAPIs:N}};function ft(Ve){if(!(0,u.r3)(Je,Ve=Ve||N._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Ve});return Je[Ve]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function xe(){return Object.keys(Je).map(Ve=>Je[Ve])}}),ft.App=Fe,Pe}(ue);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function Je(Pe){(0,u.ZB)(Fe,Pe)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Fe}(),Z=new te.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=G;!function Oe(Fe){(0,N.registerVersion)("@firebase/app-compat","0.2.13",Fe)}()},7592:(gt,Se,U)=>{U.r(Se),U.d(Se,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Qn,_DEFAULT_ENTRY_NAME:()=>de,_addComponent:()=>De,_addOrOverwriteComponent:()=>$e,_apps:()=>ve,_clearComponents:()=>At,_components:()=>he,_getProvider:()=>Ke,_registerComponent:()=>et,_removeServiceInstance:()=>mn,deleteApp:()=>Or,getApp:()=>gn,getApps:()=>oi,initializeApp:()=>Fn,onLog:()=>ii,registerVersion:()=>Xn,setLogLevel:()=>dr});var u=U(5861),$=U(4537),N=U(7879),te=U(9058),ue=U(1878);class ce{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Ee=>{if(function Ie(be){const Q=be.getComponent();return"VERSION"===Q?.type}(Ee)){const Ge=Ee.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(Ee=>Ee).join(" ")}}const Ae="@firebase/app",G=new N.Yd("@firebase/app"),de="[DEFAULT]",_e={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ve=new Map,he=new Map;function De(be,Q){try{be.container.addComponent(Q)}catch(Ee){G.debug(`Component ${Q.name} failed to register with FirebaseApp ${be.name}`,Ee)}}function $e(be,Q){be.container.addOrOverwriteComponent(Q)}function et(be){const Q=be.name;if(he.has(Q))return G.debug(`There were multiple attempts to register component ${Q}.`),!1;he.set(Q,be);for(const Ee of ve.values())De(Ee,be);return!0}function Ke(be,Q){const Ee=be.container.getProvider("heartbeat").getImmediate({optional:!0});return Ee&&Ee.triggerHeartbeat(),be.container.getProvider(Q)}function mn(be,Q,Ee=de){Ke(be,Q).clearInstance(Ee)}function At(){he.clear()}const _t=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class En{constructor(Q,Ee,Ge){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Ee),this._name=Ee.name,this._automaticDataCollectionEnabled=Ee.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw _t.create("app-deleted",{appName:this._name})}}const Qn="9.23.0";function Fn(be,Q={}){let Ee=be;"object"!=typeof Q&&(Q={name:Q});const Ge=Object.assign({name:de,automaticDataCollectionEnabled:!1},Q),ht=Ge.name;if("string"!=typeof ht||!ht)throw _t.create("bad-app-name",{appName:String(ht)});if(Ee||(Ee=(0,te.aH)()),!Ee)throw _t.create("no-options");const yt=ve.get(ht);if(yt){if((0,te.vZ)(Ee,yt.options)&&(0,te.vZ)(Ge,yt.config))return yt;throw _t.create("duplicate-app",{appName:ht})}const _n=new $.H0(ht);for(const q of he.values())_n.addComponent(q);const K=new En(Ee,Ge,_n);return ve.set(ht,K),K}function gn(be=de){const Q=ve.get(be);if(!Q&&be===de&&(0,te.aH)())return Fn();if(!Q)throw _t.create("no-app",{appName:be});return Q}function oi(){return Array.from(ve.values())}function Or(be){return Di.apply(this,arguments)}function Di(){return(Di=(0,u.Z)(function*(be){const Q=be.name;ve.has(Q)&&(ve.delete(Q),yield Promise.all(be.container.getProviders().map(Ee=>Ee.delete())),be.isDeleted=!0)})).apply(this,arguments)}function Xn(be,Q,Ee){var Ge;let ht=null!==(Ge=_e[be])&&void 0!==Ge?Ge:be;Ee&&(ht+=`-${Ee}`);const yt=ht.match(/\s|\//),_n=Q.match(/\s|\//);if(yt||_n){const K=[`Unable to register library "${ht}" with version "${Q}":`];return yt&&K.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),yt&&_n&&K.push("and"),_n&&K.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void G.warn(K.join(" "))}et(new $.wA(`${ht}-version`,()=>({library:ht,version:Q}),"VERSION"))}function ii(be,Q){if(null!==be&&"function"!=typeof be)throw _t.create("invalid-log-argument");(0,N.Am)(be,Q)}function dr(be){(0,N.Ub)(be)}const Rs="firebase-heartbeat-database",Ct=1,Rt="firebase-heartbeat-store";let Lt=null;function Jt(){return Lt||(Lt=(0,ue.X3)(Rs,Ct,{upgrade:(be,Q)=>{0===Q&&be.createObjectStore(Rt)}}).catch(be=>{throw _t.create("idb-open",{originalErrorMessage:be.message})})),Lt}function Ai(){return(Ai=(0,u.Z)(function*(be){try{return yield(yield Jt()).transaction(Rt).objectStore(Rt).get(Pr(be))}catch(Q){if(Q instanceof te.ZR)G.warn(Q.message);else{const Ee=_t.create("idb-get",{originalErrorMessage:Q?.message});G.warn(Ee.message)}}})).apply(this,arguments)}function Kt(be,Q){return $n.apply(this,arguments)}function $n(){return($n=(0,u.Z)(function*(be,Q){try{const Ge=(yield Jt()).transaction(Rt,"readwrite");yield Ge.objectStore(Rt).put(Q,Pr(be)),yield Ge.done}catch(Ee){if(Ee instanceof te.ZR)G.warn(Ee.message);else{const Ge=_t.create("idb-set",{originalErrorMessage:Ee?.message});G.warn(Ge.message)}}})).apply(this,arguments)}function Pr(be){return`${be.name}!${be.options.appId}`}class Qt{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Ee=this.container.getProvider("app").getImmediate();this._storage=new us(Ee),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var Q=this;return(0,u.Z)(function*(){const Ge=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=Hn();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==ht&&!Q._heartbeatsCache.heartbeats.some(yt=>yt.date===ht))return Q._heartbeatsCache.heartbeats.push({date:ht,agent:Ge}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(yt=>{const _n=new Date(yt.date).valueOf();return Date.now()-_n<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,u.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Ee=Hn(),{heartbeatsToSend:Ge,unsentEntries:ht}=function Wr(be,Q=1024){const Ee=[];let Ge=be.slice();for(const ht of be){const yt=Ee.find(_n=>_n.agent===ht.agent);if(yt){if(yt.dates.push(ht.date),Ri(Ee)>Q){yt.dates.pop();break}}else if(Ee.push({agent:ht.agent,dates:[ht.date]}),Ri(Ee)>Q){Ee.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:Ee,unsentEntries:Ge}}(Q._heartbeatsCache.heartbeats),yt=(0,te.L)(JSON.stringify({version:2,heartbeats:Ge}));return Q._heartbeatsCache.lastSentHeartbeatDate=Ee,ht.length>0?(Q._heartbeatsCache.heartbeats=ht,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),yt})()}}function Hn(){return(new Date).toISOString().substring(0,10)}class us{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,u.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function vi(be){return Ai.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Ee=this;return(0,u.Z)(function*(){var Ge;if(yield Ee._canUseIndexedDBPromise){const yt=yield Ee.read();return Kt(Ee.app,{lastSentHeartbeatDate:null!==(Ge=Q.lastSentHeartbeatDate)&&void 0!==Ge?Ge:yt.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Ee=this;return(0,u.Z)(function*(){var Ge;if(yield Ee._canUseIndexedDBPromise){const yt=yield Ee.read();return Kt(Ee.app,{lastSentHeartbeatDate:null!==(Ge=Q.lastSentHeartbeatDate)&&void 0!==Ge?Ge:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...Q.heartbeats]})}})()}}function Ri(be){return(0,te.L)(JSON.stringify({version:2,heartbeats:be})).length}!function fi(be){et(new $.wA("platform-logger",Q=>new ce(Q),"PRIVATE")),et(new $.wA("heartbeat",Q=>new Qt(Q),"PRIVATE")),Xn(Ae,"0.9.13",be),Xn(Ae,"0.9.13","esm2017"),Xn("fire-js","")}("")},4097:(gt,Se,U)=>{U.d(Se,{C6:()=>u.getApps,KN:()=>u.registerVersion,Mq:()=>u.getApp});var u=U(7592);(0,u.registerVersion)("firebase","9.23.0","app")},120:(gt,Se,U)=>{U.d(Se,{Z:()=>u.Z});var u=U(3399);u.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(gt,Se,U)=>{U.r(Se);var u=U(5861),$=U(3399),N=U(6710),te=U(9058),Ie=(U(7592),U(7879),U(4537));function Ae(){return window}function Z(){return Z=(0,u.Z)(function*(B,H,F){var se;const{BuildInfo:Re}=Ae();(0,N.as)(H.sessionId,"AuthEvent did not contain a session ID");const Qe=yield function Pe(B){return vt.apply(this,arguments)}(H.sessionId),Nt={};return(0,N.at)()?Nt.ibi=Re.packageName:(0,N.au)()?Nt.apn=Re.packageName:(0,N.av)(B,"operation-not-supported-in-this-environment"),Re.displayName&&(Nt.appDisplayName=Re.displayName),Nt.sessionId=Qe,(0,N.aw)(B,F,H.type,void 0,null!==(se=H.eventId)&&void 0!==se?se:void 0,Nt)}),Z.apply(this,arguments)}function Be(){return(Be=(0,u.Z)(function*(B){const{BuildInfo:H}=Ae(),F={};(0,N.at)()?F.iosBundleId=H.packageName:(0,N.au)()?F.androidPackageName=H.packageName:(0,N.av)(B,"operation-not-supported-in-this-environment"),yield(0,N.ax)(B,F)})).apply(this,arguments)}function Fe(){return(Fe=(0,u.Z)(function*(B,H,F){const{cordova:se}=Ae();let Re=()=>{};try{yield new Promise((Qe,Nt)=>{let lt=null;function In(){var Yt;Qe();const qr=null===(Yt=se.plugins.browsertab)||void 0===Yt?void 0:Yt.close;"function"==typeof qr&&qr(),"function"==typeof F?.close&&F.close()}function Vt(){lt||(lt=window.setTimeout(()=>{Nt((0,N.az)(B,"redirect-cancelled-by-user"))},2e3))}function Ln(){"visible"===document?.visibilityState&&Vt()}H.addPassiveListener(In),document.addEventListener("resume",Vt,!1),(0,N.au)()&&document.addEventListener("visibilitychange",Ln,!1),Re=()=>{H.removePassiveListener(In),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",Ln,!1),lt&&window.clearTimeout(lt)}})}finally{Re()}})).apply(this,arguments)}function vt(){return(vt=(0,u.Z)(function*(B){const H=function ft(B){if((0,N.as)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const H=new ArrayBuffer(B.length),F=new Uint8Array(H);for(let se=0;se<B.length;se++)F[se]=B.charCodeAt(se);return F}(B),F=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(F)).map(Re=>Re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class xe extends N.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(F=>F(H)),super.onEvent(H)}initialized(){var H=this;return(0,u.Z)(function*(){yield H.initPromise})()}}function Ve(B){return Y.apply(this,arguments)}function Y(){return(Y=(0,u.Z)(function*(B){const H=yield wt()._get(hn(B));return H&&(yield wt()._remove(hn(B))),H})).apply(this,arguments)}function qe(){const B=[];for(let F=0;F<20;F++){const se=Math.floor(62*Math.random());B.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(se))}return B.join("")}function wt(){return(0,N.aC)(N.b)}function hn(B){return(0,N.aD)("authEvent",B.config.apiKey,B.name)}function Bn(B){if(!B?.includes("?"))return{};const[H,...F]=B.split("?");return(0,te.zd)(F.join("?"))}const de=class Ji{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(H){var F=this;return(0,u.Z)(function*(){const se=H._key();let Re=F.eventManagers.get(se);return Re||(Re=new xe(H),F.eventManagers.set(se,Re),F.attachCallbackListeners(H,Re)),Re})()}_openPopup(H){(0,N.av)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,F,se,Re){var Qe=this;return(0,u.Z)(function*(){!function Je(B){var H,F,se,Re,Qe,Nt,lt,In,Vt,Ln;const Yt=Ae();(0,N.aA)("function"==typeof(null===(H=Yt?.universalLinks)||void 0===H?void 0:H.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aA)(typeof(null===(F=Yt?.BuildInfo)||void 0===F?void 0:F.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aA)("function"==typeof(null===(Qe=null===(Re=null===(se=Yt?.cordova)||void 0===se?void 0:se.plugins)||void 0===Re?void 0:Re.browsertab)||void 0===Qe?void 0:Qe.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(In=null===(lt=null===(Nt=Yt?.cordova)||void 0===Nt?void 0:Nt.plugins)||void 0===lt?void 0:lt.browsertab)||void 0===In?void 0:In.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(Ln=null===(Vt=Yt?.cordova)||void 0===Vt?void 0:Vt.InAppBrowser)||void 0===Ln?void 0:Ln.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const Nt=yield Qe._initialize(H);yield Nt.initialized(),Nt.resetRedirect(),(0,N.aG)(),yield Qe._originValidation(H);const lt=function pe(B,H,F=null){return{type:H,eventId:F,urlResponse:null,sessionId:qe(),postBody:null,tenantId:B.tenantId,error:(0,N.az)(B,"no-auth-event")}}(H,se,Re);yield function Ce(B,H){return wt()._set(hn(B),H)}(H,lt);const In=yield function G(B,H,F){return Z.apply(this,arguments)}(H,lt,F),Vt=yield function Oe(B){const{cordova:H}=Ae();return new Promise(F=>{H.plugins.browsertab.isAvailable(se=>{let Re=null;se?H.plugins.browsertab.openUrl(B):Re=H.InAppBrowser.open(B,(0,N.ay)()?"_blank":"_system","location=yes"),F(Re)})})}(In);return function Xe(B,H,F){return Fe.apply(this,arguments)}(H,Nt,Vt)})()}_isIframeWebStorageSupported(H,F){throw new Error("Method not implemented.")}_originValidation(H){const F=H._key();return this.originValidationPromises[F]||(this.originValidationPromises[F]=function ae(B){return Be.apply(this,arguments)}(H)),this.originValidationPromises[F]}attachCallbackListeners(H,F){const{universalLinks:se,handleOpenURL:Re,BuildInfo:Qe}=Ae(),Nt=setTimeout((0,u.Z)(function*(){yield Ve(H),F.onEvent(_e())}),500),lt=function(){var Ln=(0,u.Z)(function*(Yt){clearTimeout(Nt);const qr=yield Ve(H);let va=null;qr&&Yt?.url&&(va=function ke(B,H){var F,se;const Re=function Vn(B){const H=Bn(B),F=H.link?decodeURIComponent(H.link):void 0,se=Bn(F).link,Re=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return Bn(Re).link||Re||se||F||B}(H);if(Re.includes("/__/auth/callback")){const Qe=Bn(Re),Nt=Qe.firebaseError?function Un(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(Qe.firebaseError)):null,lt=null===(se=null===(F=Nt?.code)||void 0===F?void 0:F.split("auth/"))||void 0===se?void 0:se[1],In=lt?(0,N.az)(lt):null;return In?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:In,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:Re,postBody:null}}return null}(qr,Yt.url)),F.onEvent(va||_e())});return function(qr){return Ln.apply(this,arguments)}}();typeof se<"u"&&"function"==typeof se.subscribe&&se.subscribe(null,lt);const In=Re,Vt=`${Qe.packageName.toLowerCase()}://`;Ae().handleOpenURL=function(){var Ln=(0,u.Z)(function*(Yt){if(Yt.toLowerCase().startsWith(Vt)&&lt({url:Yt}),"function"==typeof In)try{In(Yt)}catch(qr){console.error(qr)}});return function(Yt){return Ln.apply(this,arguments)}}()}};function _e(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.az)("no-auth-event")}}function et(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function mn(B=(0,te.z$)()){return!("file:"!==et()&&"ionic:"!==et()&&"capacitor:"!==et()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qn(){try{const B=self.localStorage,H=N.aL();if(B)return B.setItem(H,"1"),B.removeItem(H),!function En(B=(0,te.z$)()){return function rn(){return(0,te.w1)()&&11===document?.documentMode}()||function _t(B=(0,te.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,te.hl)()}catch{return Fn()&&(0,te.hl)()}return!1}function Fn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gn(){return(function Ke(){return"http:"===et()||"https:"===et()}()||(0,te.ru)()||mn())&&!function At(){return(0,te.b$)()||(0,te.UG)()}()&&Qn()&&!Fn()}function oi(){return mn()&&typeof document<"u"}function Di(){return(Di=(0,u.Z)(function*(){return!!oi()&&new Promise(B=>{const H=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(H),B(!0)})})})).apply(this,arguments)}const ii={LOCAL:"local",NONE:"none",SESSION:"session"},dr=N.aA,Rs="persistence";function Rt(B){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,u.Z)(function*(B){yield B._initializationPromise;const H=vi(),F=N.aD(Rs,B.config.apiKey,B.name);H&&H.setItem(F,B._getPersistence())})).apply(this,arguments)}function vi(){var B;try{return(null===(B=function Xn(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const Ai=N.aA;class Kt{constructor(){this.browserResolver=N.aC(N.k),this.cordovaResolver=N.aC(de),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(H){var F=this;return(0,u.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,F,se,Re){var Qe=this;return(0,u.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openPopup(H,F,se,Re)})()}_openRedirect(H,F,se,Re){var Qe=this;return(0,u.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openRedirect(H,F,se,Re)})()}_isIframeWebStorageSupported(H,F){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,F)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return oi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ai(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,u.Z)(function*(){if(H.underlyingResolver)return;const F=yield function Or(){return Di.apply(this,arguments)}();H.underlyingResolver=F?H.cordovaResolver:H.browserResolver})()}}function $n(B){return B.unwrap()}function cn(B){return Qt(B)}function Qt(B){const{_tokenResponse:H}=B instanceof te.ZR?B.customData:B;if(!H)return null;if(!(B instanceof te.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return N.P.credentialFromResult(B);const F=H.providerId;if(!F||F===N.p.PASSWORD)return null;let se;switch(F){case N.p.GOOGLE:se=N.V;break;case N.p.FACEBOOK:se=N.U;break;case N.p.GITHUB:se=N.W;break;case N.p.TWITTER:se=N.Z;break;default:const{oauthIdToken:Re,oauthAccessToken:Qe,oauthTokenSecret:Nt,pendingToken:lt,nonce:In}=H;return Qe||Nt||Re||lt?lt?F.startsWith("saml.")?N.aO._create(F,lt):N.L._fromParams({providerId:F,signInMethod:F,pendingToken:lt,idToken:Re,accessToken:Qe}):new N.X(F).credential({idToken:Re,accessToken:Qe,rawNonce:In}):null}return B instanceof te.ZR?se.credentialFromError(B):se.credentialFromResult(B)}function Hn(B,H){return H.catch(F=>{throw F instanceof te.ZR&&function Er(B,H){var F;const se=null===(F=H.customData)||void 0===F?void 0:F._tokenResponse;if("auth/multi-factor-auth-required"===H?.code)H.resolver=new Ri(B,N.aq(B,H));else if(se){const Re=Qt(H),Qe=H;Re&&(Qe.credential=Re,Qe.tenantId=se.tenantId||void 0,Qe.email=se.email||void 0,Qe.phoneNumber=se.phoneNumber||void 0)}}(B,F),F}).then(F=>{const Re=F.user;return{operationType:F.operationType,credential:cn(F),additionalUserInfo:N.ao(F),user:fi.getOrCreate(Re)}})}function Wr(B,H){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(B,H){const F=yield H;return{verificationId:F.verificationId,confirm:se=>Hn(B,F.confirm(se))}})).apply(this,arguments)}class Ri{constructor(H,F){this.resolver=F,this.auth=function Pr(B){return B.wrapped()}(H)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return Hn($n(this.auth),this.resolver.resolveSignIn(H))}}class fi{constructor(H){this._delegate=H,this.multiFactor=N.ar(H)}static getOrCreate(H){return fi.USER_MAP.has(H)||fi.USER_MAP.set(H,new fi(H)),fi.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var F=this;return(0,u.Z)(function*(){return Hn(F.auth,N.a0(F._delegate,H))})()}linkWithPhoneNumber(H,F){var se=this;return(0,u.Z)(function*(){return Wr(se.auth,N.l(se._delegate,H,F))})()}linkWithPopup(H){var F=this;return(0,u.Z)(function*(){return Hn(F.auth,N.d(F._delegate,H,Kt))})()}linkWithRedirect(H){var F=this;return(0,u.Z)(function*(){return yield Rt(N.aH(F.auth)),N.g(F._delegate,H,Kt)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var F=this;return(0,u.Z)(function*(){return Hn(F.auth,N.a1(F._delegate,H))})()}reauthenticateWithPhoneNumber(H,F){return Wr(this.auth,N.r(this._delegate,H,F))}reauthenticateWithPopup(H){return Hn(this.auth,N.e(this._delegate,H,Kt))}reauthenticateWithRedirect(H){var F=this;return(0,u.Z)(function*(){return yield Rt(N.aH(F.auth)),N.h(F._delegate,H,Kt)})()}sendEmailVerification(H){return N.ae(this._delegate,H)}unlink(H){var F=this;return(0,u.Z)(function*(){return yield N.an(F._delegate,H),F})()}updateEmail(H){return N.aj(this._delegate,H)}updatePassword(H){return N.ak(this._delegate,H)}updatePhoneNumber(H){return N.u(this._delegate,H)}updateProfile(H){return N.ai(this._delegate,H)}verifyBeforeUpdateEmail(H,F){return N.af(this._delegate,H,F)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fi.USER_MAP=new WeakMap;const be=N.aA;let Q=(()=>{class B{constructor(F,se){if(this.app=F,se.isInitialized())return this._delegate=se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Re}=F.options;be(Re,"invalid-api-key",{appName:F.name}),be(Re,"invalid-api-key",{appName:F.name});const Qe=typeof window<"u"?Kt:void 0;this._delegate=se.initialize({options:{persistence:Ge(Re,F.name),popupRedirectResolver:Qe}}),this._delegate._updateErrorMap(N.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(F){this._delegate.languageCode=F}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(F){this._delegate.tenantId=F}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(F,se){N.I(this._delegate,F,se)}applyActionCode(F){return N.a5(this._delegate,F)}checkActionCode(F){return N.a6(this._delegate,F)}confirmPasswordReset(F,se){return N.a4(this._delegate,F,se)}createUserWithEmailAndPassword(F,se){var Re=this;return(0,u.Z)(function*(){return Hn(Re._delegate,N.a8(Re._delegate,F,se))})()}fetchProvidersForEmail(F){return this.fetchSignInMethodsForEmail(F)}fetchSignInMethodsForEmail(F){return N.ad(this._delegate,F)}isSignInWithEmailLink(F){return N.ab(this._delegate,F)}getRedirectResult(){var F=this;return(0,u.Z)(function*(){be(gn(),F._delegate,"operation-not-supported-in-this-environment");const se=yield N.j(F._delegate,Kt);return se?Hn(F._delegate,Promise.resolve(se)):{credential:null,user:null}})()}addFrameworkForLogging(F){!function ve(B,H){(0,N.aH)(B)._logFramework(H)}(this._delegate,F)}onAuthStateChanged(F,se,Re){const{next:Qe,error:Nt,complete:lt}=Ee(F,se,Re);return this._delegate.onAuthStateChanged(Qe,Nt,lt)}onIdTokenChanged(F,se,Re){const{next:Qe,error:Nt,complete:lt}=Ee(F,se,Re);return this._delegate.onIdTokenChanged(Qe,Nt,lt)}sendSignInLinkToEmail(F,se){return N.aa(this._delegate,F,se)}sendPasswordResetEmail(F,se){return N.a3(this._delegate,F,se||void 0)}setPersistence(F){var se=this;return(0,u.Z)(function*(){let Re;switch(function Ct(B,H){dr(Object.values(ii).includes(H),B,"invalid-persistence-type"),(0,te.b$)()?dr(H!==ii.SESSION,B,"unsupported-persistence-type"):(0,te.UG)()?dr(H===ii.NONE,B,"unsupported-persistence-type"):Fn()?dr(H===ii.NONE||H===ii.LOCAL&&(0,te.hl)(),B,"unsupported-persistence-type"):dr(H===ii.NONE||Qn(),B,"unsupported-persistence-type")}(se._delegate,F),F){case ii.SESSION:Re=N.a;break;case ii.LOCAL:Re=(yield N.aC(N.i)._isAvailable())?N.i:N.b;break;case ii.NONE:Re=N.N;break;default:return N.av("argument-error",{appName:se._delegate.name})}return se._delegate.setPersistence(Re)})()}signInAndRetrieveDataWithCredential(F){return this.signInWithCredential(F)}signInAnonymously(){return Hn(this._delegate,N._(this._delegate))}signInWithCredential(F){return Hn(this._delegate,N.$(this._delegate,F))}signInWithCustomToken(F){return Hn(this._delegate,N.a2(this._delegate,F))}signInWithEmailAndPassword(F,se){return Hn(this._delegate,N.a9(this._delegate,F,se))}signInWithEmailLink(F,se){return Hn(this._delegate,N.ac(this._delegate,F,se))}signInWithPhoneNumber(F,se){return Wr(this._delegate,N.s(this._delegate,F,se))}signInWithPopup(F){var se=this;return(0,u.Z)(function*(){return be(gn(),se._delegate,"operation-not-supported-in-this-environment"),Hn(se._delegate,N.c(se._delegate,F,Kt))})()}signInWithRedirect(F){var se=this;return(0,u.Z)(function*(){return be(gn(),se._delegate,"operation-not-supported-in-this-environment"),yield Rt(se._delegate),N.f(se._delegate,F,Kt)})()}updateCurrentUser(F){return this._delegate.updateCurrentUser(F)}verifyPasswordResetCode(F){return N.a7(this._delegate,F)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=ii,B})();function Ee(B,H,F){let se=B;"function"!=typeof B&&({next:se,error:H,complete:F}=B);const Re=se;return{next:Nt=>Re(Nt&&fi.getOrCreate(Nt)),error:H,complete:F}}function Ge(B,H){const F=function Jt(B,H){const F=vi();if(!F)return[];const se=N.aD(Rs,B,H);switch(F.getItem(se)){case ii.NONE:return[N.N];case ii.LOCAL:return[N.i,N.a];case ii.SESSION:return[N.a];default:return[]}}(B,H);if(typeof self<"u"&&!F.includes(N.i)&&F.push(N.i),typeof window<"u")for(const se of[N.b,N.a])F.includes(se)||F.push(se);return F.includes(N.N)||F.push(N.N),F}class ht{constructor(){this.providerId="phone",this._delegate=new N.P($n($.Z.auth()))}static credential(H,F){return N.P.credential(H,F)}verifyPhoneNumber(H,F){return this._delegate.verifyPhoneNumber(H,F)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=N.P.PROVIDER_ID;const yt=N.aA;class _n{constructor(H,F,se=$.Z.app()){var Re;yt(null===(Re=se.options)||void 0===Re?void 0:Re.apiKey,"invalid-api-key",{appName:se.name}),this._delegate=new N.R(H,F,se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function q(B){B.INTERNAL.registerComponent(new Ie.wA("auth-compat",H=>{const F=H.getProvider("app-compat").getImmediate(),se=H.getProvider("auth");return new Q(F,se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.Q,FacebookAuthProvider:N.U,GithubAuthProvider:N.W,GoogleAuthProvider:N.V,OAuthProvider:N.X,SAMLAuthProvider:N.Y,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:_n,TwitterAuthProvider:N.Z,Auth:Q,AuthCredential:N.J,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},4303:(gt,Se,U)=>{U.r(Se),U.d(Se,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Qn,_DEFAULT_ENTRY_NAME:()=>de,_addComponent:()=>De,_addOrOverwriteComponent:()=>$e,_apps:()=>ve,_clearComponents:()=>At,_components:()=>he,_getProvider:()=>Ke,_registerComponent:()=>et,_removeServiceInstance:()=>mn,deleteApp:()=>Or,getApp:()=>gn,getApps:()=>oi,initializeApp:()=>Fn,onLog:()=>ii,registerVersion:()=>Xn,setLogLevel:()=>dr});var u=U(5861),$=U(4537),N=U(7879),te=U(9058),ue=U(1878);class ce{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Ee=>{if(function Ie(be){const Q=be.getComponent();return"VERSION"===Q?.type}(Ee)){const Ge=Ee.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(Ee=>Ee).join(" ")}}const Ae="@firebase/app",G=new N.Yd("@firebase/app"),de="[DEFAULT]",_e={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ve=new Map,he=new Map;function De(be,Q){try{be.container.addComponent(Q)}catch(Ee){G.debug(`Component ${Q.name} failed to register with FirebaseApp ${be.name}`,Ee)}}function $e(be,Q){be.container.addOrOverwriteComponent(Q)}function et(be){const Q=be.name;if(he.has(Q))return G.debug(`There were multiple attempts to register component ${Q}.`),!1;he.set(Q,be);for(const Ee of ve.values())De(Ee,be);return!0}function Ke(be,Q){const Ee=be.container.getProvider("heartbeat").getImmediate({optional:!0});return Ee&&Ee.triggerHeartbeat(),be.container.getProvider(Q)}function mn(be,Q,Ee=de){Ke(be,Q).clearInstance(Ee)}function At(){he.clear()}const _t=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class En{constructor(Q,Ee,Ge){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Ee),this._name=Ee.name,this._automaticDataCollectionEnabled=Ee.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw _t.create("app-deleted",{appName:this._name})}}const Qn="10.4.0";function Fn(be,Q={}){let Ee=be;"object"!=typeof Q&&(Q={name:Q});const Ge=Object.assign({name:de,automaticDataCollectionEnabled:!1},Q),ht=Ge.name;if("string"!=typeof ht||!ht)throw _t.create("bad-app-name",{appName:String(ht)});if(Ee||(Ee=(0,te.aH)()),!Ee)throw _t.create("no-options");const yt=ve.get(ht);if(yt){if((0,te.vZ)(Ee,yt.options)&&(0,te.vZ)(Ge,yt.config))return yt;throw _t.create("duplicate-app",{appName:ht})}const _n=new $.H0(ht);for(const q of he.values())_n.addComponent(q);const K=new En(Ee,Ge,_n);return ve.set(ht,K),K}function gn(be=de){const Q=ve.get(be);if(!Q&&be===de&&(0,te.aH)())return Fn();if(!Q)throw _t.create("no-app",{appName:be});return Q}function oi(){return Array.from(ve.values())}function Or(be){return Di.apply(this,arguments)}function Di(){return(Di=(0,u.Z)(function*(be){const Q=be.name;ve.has(Q)&&(ve.delete(Q),yield Promise.all(be.container.getProviders().map(Ee=>Ee.delete())),be.isDeleted=!0)})).apply(this,arguments)}function Xn(be,Q,Ee){var Ge;let ht=null!==(Ge=_e[be])&&void 0!==Ge?Ge:be;Ee&&(ht+=`-${Ee}`);const yt=ht.match(/\s|\//),_n=Q.match(/\s|\//);if(yt||_n){const K=[`Unable to register library "${ht}" with version "${Q}":`];return yt&&K.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),yt&&_n&&K.push("and"),_n&&K.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void G.warn(K.join(" "))}et(new $.wA(`${ht}-version`,()=>({library:ht,version:Q}),"VERSION"))}function ii(be,Q){if(null!==be&&"function"!=typeof be)throw _t.create("invalid-log-argument");(0,N.Am)(be,Q)}function dr(be){(0,N.Ub)(be)}const Rs="firebase-heartbeat-database",Ct=1,Rt="firebase-heartbeat-store";let Lt=null;function Jt(){return Lt||(Lt=(0,ue.X3)(Rs,Ct,{upgrade:(be,Q)=>{0===Q&&be.createObjectStore(Rt)}}).catch(be=>{throw _t.create("idb-open",{originalErrorMessage:be.message})})),Lt}function Ai(){return(Ai=(0,u.Z)(function*(be){try{return yield(yield Jt()).transaction(Rt).objectStore(Rt).get(Pr(be))}catch(Q){if(Q instanceof te.ZR)G.warn(Q.message);else{const Ee=_t.create("idb-get",{originalErrorMessage:Q?.message});G.warn(Ee.message)}}})).apply(this,arguments)}function Kt(be,Q){return $n.apply(this,arguments)}function $n(){return($n=(0,u.Z)(function*(be,Q){try{const Ge=(yield Jt()).transaction(Rt,"readwrite");yield Ge.objectStore(Rt).put(Q,Pr(be)),yield Ge.done}catch(Ee){if(Ee instanceof te.ZR)G.warn(Ee.message);else{const Ge=_t.create("idb-set",{originalErrorMessage:Ee?.message});G.warn(Ge.message)}}})).apply(this,arguments)}function Pr(be){return`${be.name}!${be.options.appId}`}class Qt{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Ee=this.container.getProvider("app").getImmediate();this._storage=new us(Ee),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var Q=this;return(0,u.Z)(function*(){const Ge=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=Hn();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==ht&&!Q._heartbeatsCache.heartbeats.some(yt=>yt.date===ht))return Q._heartbeatsCache.heartbeats.push({date:ht,agent:Ge}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(yt=>{const _n=new Date(yt.date).valueOf();return Date.now()-_n<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,u.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Ee=Hn(),{heartbeatsToSend:Ge,unsentEntries:ht}=function Wr(be,Q=1024){const Ee=[];let Ge=be.slice();for(const ht of be){const yt=Ee.find(_n=>_n.agent===ht.agent);if(yt){if(yt.dates.push(ht.date),Ri(Ee)>Q){yt.dates.pop();break}}else if(Ee.push({agent:ht.agent,dates:[ht.date]}),Ri(Ee)>Q){Ee.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:Ee,unsentEntries:Ge}}(Q._heartbeatsCache.heartbeats),yt=(0,te.L)(JSON.stringify({version:2,heartbeats:Ge}));return Q._heartbeatsCache.lastSentHeartbeatDate=Ee,ht.length>0?(Q._heartbeatsCache.heartbeats=ht,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),yt})()}}function Hn(){return(new Date).toISOString().substring(0,10)}class us{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,u.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function vi(be){return Ai.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Ee=this;return(0,u.Z)(function*(){var Ge;if(yield Ee._canUseIndexedDBPromise){const yt=yield Ee.read();return Kt(Ee.app,{lastSentHeartbeatDate:null!==(Ge=Q.lastSentHeartbeatDate)&&void 0!==Ge?Ge:yt.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Ee=this;return(0,u.Z)(function*(){var Ge;if(yield Ee._canUseIndexedDBPromise){const yt=yield Ee.read();return Kt(Ee.app,{lastSentHeartbeatDate:null!==(Ge=Q.lastSentHeartbeatDate)&&void 0!==Ge?Ge:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...Q.heartbeats]})}})()}}function Ri(be){return(0,te.L)(JSON.stringify({version:2,heartbeats:be})).length}!function fi(be){et(new $.wA("platform-logger",Q=>new ce(Q),"PRIVATE")),et(new $.wA("heartbeat",Q=>new Qt(Q),"PRIVATE")),Xn(Ae,"0.9.19",be),Xn(Ae,"0.9.19","esm2017"),Xn("fire-js","")}("")},4537:(gt,Se,U)=>{U.d(Se,{H0:()=>Ae,wA:()=>N,zt:()=>ue});var u=U(5861),$=U(9058);class N{constructor(G,Z,ae){this.name=G,this.instanceFactory=Z,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const te="[DEFAULT]";class ue{constructor(G,Z){this.name=G,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const Z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(Z)){const ae=new $.BH;if(this.instancesDeferred.set(Z,ae),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:Z});Be&&ae.resolve(Be)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(G){var Z;const ae=this.normalizeInstanceIdentifier(G?.identifier),Be=null!==(Z=G?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Oe){if(Be)return null;throw Oe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function Ie(ye){return"EAGER"===ye.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[Z,ae]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(Z);try{const Oe=this.getOrInitializeService({instanceIdentifier:Be});ae.resolve(Oe)}catch{}}}}clearInstance(G=te){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,u.Z)(function*(){const Z=Array.from(G.instances.values());yield Promise.all([...Z.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...Z.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=te){return this.instances.has(G)}getOptions(G=te){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:Z={}}=G,ae=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:ae,options:Z});for(const[Oe,Xe]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Oe)&&Xe.resolve(Be);return Be}onInit(G,Z){var ae;const Be=this.normalizeInstanceIdentifier(Z),Oe=null!==(ae=this.onInitCallbacks.get(Be))&&void 0!==ae?ae:new Set;Oe.add(G),this.onInitCallbacks.set(Be,Oe);const Xe=this.instances.get(Be);return Xe&&G(Xe,Be),()=>{Oe.delete(G)}}invokeOnInitCallbacks(G,Z){const ae=this.onInitCallbacks.get(Z);if(ae)for(const Be of ae)try{Be(G,Z)}catch{}}getOrInitializeService({instanceIdentifier:G,options:Z={}}){let ae=this.instances.get(G);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=G,ye===te?void 0:ye),options:Z}),this.instances.set(G,ae),this.instancesOptions.set(G,Z),this.invokeOnInitCallbacks(ae,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ae)}catch{}var ye;return ae||null}normalizeInstanceIdentifier(G=te){return this.component?this.component.multipleInstances?G:te:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const Z=this.getProvider(G.name);if(Z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);Z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const Z=new ue(G,this);return this.providers.set(G,Z),Z}getProviders(){return Array.from(this.providers.values())}}},7879:(gt,Se,U)=>{U.d(Se,{Am:()=>ye,Ub:()=>Ae,Yd:()=>Ie,in:()=>$});const u=[];var $=function(G){return G[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",G}($||{});const N={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},te=$.INFO,ue={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ce=(G,Z,...ae)=>{if(Z<G.logLevel)return;const Be=(new Date).toISOString(),Oe=ue[Z];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Oe](`[${Be}]  ${G.name}:`,...ae)};class Ie{constructor(Z){this.name=Z,this._logLevel=te,this._logHandler=ce,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in $))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?N[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...Z),this._logHandler(this,$.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...Z),this._logHandler(this,$.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...Z),this._logHandler(this,$.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...Z),this._logHandler(this,$.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...Z),this._logHandler(this,$.ERROR,...Z)}}function Ae(G){u.forEach(Z=>{Z.setLogLevel(G)})}function ye(G,Z){for(const ae of u){let Be=null;Z&&Z.level&&(Be=N[Z.level]),ae.userLogHandler=null===G?null:(Oe,Xe,...Fe)=>{const Je=Fe.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");Xe>=(Be??Oe.logLevel)&&G({level:$[Xe].toLowerCase(),message:Je,args:Fe,type:Oe.name})}}}},1878:(gt,Se,U)=>{U.d(Se,{X3:()=>ft});var u=U(5861);const $=(Y,ke)=>ke.some(qe=>Y instanceof qe);let N,te;const Ie=new WeakMap,Ae=new WeakMap,ye=new WeakMap,G=new WeakMap,Z=new WeakMap;let Oe={get(Y,ke,qe){if(Y instanceof IDBTransaction){if("done"===ke)return Ae.get(Y);if("objectStoreNames"===ke)return Y.objectStoreNames||ye.get(Y);if("store"===ke)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return Pe(Y[ke])},set:(Y,ke,qe)=>(Y[ke]=qe,!0),has:(Y,ke)=>Y instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in Y};function Je(Y){return"function"==typeof Y?function Fe(Y){return Y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Y)?function(...ke){return Y.apply(vt(this),ke),Pe(Ie.get(this))}:function(...ke){return Pe(Y.apply(vt(this),ke))}:function(ke,...qe){const wt=Y.call(vt(this),ke,...qe);return ye.set(wt,ke.sort?ke.sort():[ke]),Pe(wt)}}(Y):(Y instanceof IDBTransaction&&function Be(Y){if(Ae.has(Y))return;const ke=new Promise((qe,wt)=>{const hn=()=>{Y.removeEventListener("complete",Un),Y.removeEventListener("error",Vn),Y.removeEventListener("abort",Vn)},Un=()=>{qe(),hn()},Vn=()=>{wt(Y.error||new DOMException("AbortError","AbortError")),hn()};Y.addEventListener("complete",Un),Y.addEventListener("error",Vn),Y.addEventListener("abort",Vn)});Ae.set(Y,ke)}(Y),$(Y,function ue(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Y,Oe):Y)}function Pe(Y){if(Y instanceof IDBRequest)return function ae(Y){const ke=new Promise((qe,wt)=>{const hn=()=>{Y.removeEventListener("success",Un),Y.removeEventListener("error",Vn)},Un=()=>{qe(Pe(Y.result)),hn()},Vn=()=>{wt(Y.error),hn()};Y.addEventListener("success",Un),Y.addEventListener("error",Vn)});return ke.then(qe=>{qe instanceof IDBCursor&&Ie.set(qe,Y)}).catch(()=>{}),Z.set(ke,Y),ke}(Y);if(G.has(Y))return G.get(Y);const ke=Je(Y);return ke!==Y&&(G.set(Y,ke),Z.set(ke,Y)),ke}const vt=Y=>Z.get(Y);function ft(Y,ke,{blocked:qe,upgrade:wt,blocking:hn,terminated:Un}={}){const Vn=indexedDB.open(Y,ke),Bn=Pe(Vn);return wt&&Vn.addEventListener("upgradeneeded",An=>{wt(Pe(Vn.result),An.oldVersion,An.newVersion,Pe(Vn.transaction),An)}),qe&&Vn.addEventListener("blocked",An=>qe(An.oldVersion,An.newVersion,An)),Bn.then(An=>{Un&&An.addEventListener("close",()=>Un()),hn&&An.addEventListener("versionchange",Ji=>hn(Ji.oldVersion,Ji.newVersion,Ji))}).catch(()=>{}),Bn}const xe=["get","getKey","getAll","getAllKeys","count"],pe=["put","add","delete","clear"],Ce=new Map;function Ve(Y,ke){if(!(Y instanceof IDBDatabase)||ke in Y||"string"!=typeof ke)return;if(Ce.get(ke))return Ce.get(ke);const qe=ke.replace(/FromIndex$/,""),wt=ke!==qe,hn=pe.includes(qe);if(!(qe in(wt?IDBIndex:IDBObjectStore).prototype)||!hn&&!xe.includes(qe))return;const Un=function(){var Vn=(0,u.Z)(function*(Bn,...An){const Ji=this.transaction(Bn,hn?"readwrite":"readonly");let de=Ji.store;return wt&&(de=de.index(An.shift())),(yield Promise.all([de[qe](...An),hn&&Ji.done]))[0]});return function(An){return Vn.apply(this,arguments)}}();return Ce.set(ke,Un),Un}!function Xe(Y){Oe=Y(Oe)}(Y=>({...Y,get:(ke,qe,wt)=>Ve(ke,qe)||Y.get(ke,qe,wt),has:(ke,qe)=>!!Ve(ke,qe)||Y.has(ke,qe)}))},5861:(gt,Se,U)=>{function u(N,te,ue,ce,Ie,Ae,ye){try{var G=N[Ae](ye),Z=G.value}catch(ae){return void ue(ae)}G.done?te(Z):Promise.resolve(Z).then(ce,Ie)}function $(N){return function(){var te=this,ue=arguments;return new Promise(function(ce,Ie){var Ae=N.apply(te,ue);function ye(Z){u(Ae,ce,Ie,ye,G,"next",Z)}function G(Z){u(Ae,ce,Ie,ye,G,"throw",Z)}ye(void 0)})}}U.d(Se,{Z:()=>$})},7582:(gt,Se,U)=>{function te(de,_e){var ve={};for(var he in de)Object.prototype.hasOwnProperty.call(de,he)&&_e.indexOf(he)<0&&(ve[he]=de[he]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(he=Object.getOwnPropertySymbols(de);De<he.length;De++)_e.indexOf(he[De])<0&&Object.prototype.propertyIsEnumerable.call(de,he[De])&&(ve[he[De]]=de[he[De]])}return ve}function ae(de,_e,ve,he){return new(ve||(ve=Promise))(function($e,et){function Ke(rn){try{At(he.next(rn))}catch(_t){et(_t)}}function mn(rn){try{At(he.throw(rn))}catch(_t){et(_t)}}function At(rn){rn.done?$e(rn.value):function De($e){return $e instanceof ve?$e:new ve(function(et){et($e)})}(rn.value).then(Ke,mn)}At((he=he.apply(de,_e||[])).next())})}function le(de){return this instanceof le?(this.v=de,this):new le(de)}function xe(de,_e,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,he=ve.apply(de,_e||[]),$e=[];return De={},et("next"),et("throw"),et("return"),De[Symbol.asyncIterator]=function(){return this},De;function et(En){he[En]&&(De[En]=function(Qn){return new Promise(function(Fn,gn){$e.push([En,Qn,Fn,gn])>1||Ke(En,Qn)})})}function Ke(En,Qn){try{!function mn(En){En.value instanceof le?Promise.resolve(En.value.v).then(At,rn):_t($e[0][2],En)}(he[En](Qn))}catch(Fn){_t($e[0][3],Fn)}}function At(En){Ke("next",En)}function rn(En){Ke("throw",En)}function _t(En,Qn){En(Qn),$e.shift(),$e.length&&Ke($e[0][0],$e[0][1])}}function Ce(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,_e=de[Symbol.asyncIterator];return _e?_e.call(de):(de=function Fe(de){var _e="function"==typeof Symbol&&Symbol.iterator,ve=_e&&de[_e],he=0;if(ve)return ve.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&he>=de.length&&(de=void 0),{value:de&&de[he++],done:!de}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),ve={},he("next"),he("throw"),he("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function he($e){ve[$e]=de[$e]&&function(et){return new Promise(function(Ke,mn){!function De($e,et,Ke,mn){Promise.resolve(mn).then(function(At){$e({value:At,done:Ke})},et)}(Ke,mn,(et=de[$e](et)).done,et.value)})}}}U.d(Se,{FC:()=>xe,KL:()=>Ce,_T:()=>te,mG:()=>ae,qq:()=>le}),"function"==typeof SuppressedError&&SuppressedError}},gt=>{gt(gt.s=1545)}]);