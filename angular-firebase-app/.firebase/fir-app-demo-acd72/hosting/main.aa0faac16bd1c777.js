"use strict";(self.webpackChunkangular_firebase_app=self.webpackChunkangular_firebase_app||[]).push([[179],{6304:(ht,Se,O)=>{O.d(Se,{Dh:()=>xe,GT:()=>_e,cc:()=>Ne,hO:()=>Ve,on:()=>B,pX:()=>se,xv:()=>de});var _=O(5879),ee=O(120),L=O(2793);ht=O.hmd(ht);const J=["ngOnDestroy"],se=(Oe,pt,gt,oe={})=>new Proxy(Oe,{get:(Te,ie)=>gt.runOutsideAngular(()=>{var be;if(Oe[ie])return!(null===(be=oe?.spy)||void 0===be)&&be.get&&oe.spy.get(ie,Oe[ie]),Oe[ie];if(J.indexOf(ie)>-1)return()=>{};const Fe=pt.toPromise().then(ce=>{const Z=ce&&ce[ie];return"function"==typeof Z?Z.bind(ce):Z&&Z.then?Z.then($e=>gt.run(()=>$e)):gt.run(()=>Z)});return new Proxy(()=>{},{get:(ce,Z)=>Fe[Z],apply:(ce,Z,$e)=>Fe.then(yt=>{var sn;const En=yt&&yt(...$e);return!(null===(sn=oe?.spy)||void 0===sn)&&sn.apply&&oe.spy.apply(ie,$e,En),En})})})}),_e=(Oe,pt)=>{pt.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(oe=>{Object.defineProperty(Oe.prototype,oe,Object.getOwnPropertyDescriptor(gt.prototype||gt,oe))})})};class ye{constructor(pt){return pt}}const xe=new _.OlP("angularfire2.app.options"),de=new _.OlP("angularfire2.app.name");function B(Oe,pt,gt){const Te="object"==typeof gt&&gt||{};Te.name=Te.name||"string"==typeof gt&&gt||"[DEFAULT]";const be=ee.Z.apps.filter(Fe=>Fe&&Fe.name===Te.name)[0]||pt.runOutsideAngular(()=>ee.Z.initializeApp(Oe,Te));try{JSON.stringify(Oe)!==JSON.stringify(be.options)&&G("error",`${be.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(be)}const G=(Oe,...pt)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Oe](...pt)},ne={provide:ye,useFactory:B,deps:[xe,_.R0b,[new _.FiY,de]]};let Ve=(()=>{class Oe{constructor(gt){ee.Z.registerVersion("angularfire",L.q4.full,"core"),ee.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ee.Z.registerVersion("angular",_.q4F.full,gt.toString())}static initializeApp(gt,oe){return{ngModule:Oe,providers:[{provide:xe,useValue:gt},{provide:de,useValue:oe}]}}}return Oe.\u0275fac=function(gt){return new(gt||Oe)(_.LFG(_.Lbi))},Oe.\u0275mod=_.oAB({type:Oe}),Oe.\u0275inj=_.cJS({providers:[ne]}),Oe})();function Ne(Oe,pt,gt,oe,Te){const[,ie,be]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Oe)||[];if(ie)return function Ke(Oe,pt){try{return Oe.toString()===pt.toString()}catch{return Oe===pt}}(Te,be)||(We("error",`${pt} was already initialized on the ${gt} Firebase App with different settings.${Me?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:Te,was:be})),ie;{const Fe=oe();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Fe,Te]),Fe}}const Me=!!ht.hot,We=(Oe,...pt)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Oe](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(ht,Se,O)=>{O.d(Se,{q4:()=>M,iC:()=>Ma,fc:()=>Su,HU:()=>sf,vb:()=>rf,JM:()=>ta});var _=O(5879),ee=O(4097),L=O(5861),J=O(4303),se=O(9058),_e=O(4537),ye=O(7879);const xe=(T,D)=>D.some(N=>T instanceof N);let de,B;const Ve=new WeakMap,Ne=new WeakMap,Ke=new WeakMap,Me=new WeakMap,We=new WeakMap;let gt={get(T,D,N){if(T instanceof IDBTransaction){if("done"===D)return Ne.get(T);if("objectStoreNames"===D)return T.objectStoreNames||Ke.get(T);if("store"===D)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return be(T[D])},set:(T,D,N)=>(T[D]=N,!0),has:(T,D)=>T instanceof IDBTransaction&&("done"===D||"store"===D)||D in T};function ie(T){return"function"==typeof T?function Te(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...D){return T.apply(Fe(this),D),be(Ve.get(this))}:function(...D){return be(T.apply(Fe(this),D))}:function(D,...N){const F=T.call(Fe(this),D,...N);return Ke.set(F,D.sort?D.sort():[D]),be(F)}}(T):(T instanceof IDBTransaction&&function pt(T){if(Ne.has(T))return;const D=new Promise((N,F)=>{const q=()=>{T.removeEventListener("complete",X),T.removeEventListener("error",me),T.removeEventListener("abort",me)},X=()=>{N(),q()},me=()=>{F(T.error||new DOMException("AbortError","AbortError")),q()};T.addEventListener("complete",X),T.addEventListener("error",me),T.addEventListener("abort",me)});Ne.set(T,D)}(T),xe(T,function G(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,gt):T)}function be(T){if(T instanceof IDBRequest)return function Oe(T){const D=new Promise((N,F)=>{const q=()=>{T.removeEventListener("success",X),T.removeEventListener("error",me)},X=()=>{N(be(T.result)),q()},me=()=>{F(T.error),q()};T.addEventListener("success",X),T.addEventListener("error",me)});return D.then(N=>{N instanceof IDBCursor&&Ve.set(N,T)}).catch(()=>{}),We.set(D,T),D}(T);if(Me.has(T))return Me.get(T);const D=ie(T);return D!==T&&(Me.set(T,D),We.set(D,T)),D}const Fe=T=>We.get(T),$e=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],sn=new Map;function En(T,D){if(!(T instanceof IDBDatabase)||D in T||"string"!=typeof D)return;if(sn.get(D))return sn.get(D);const N=D.replace(/FromIndex$/,""),F=D!==N,q=yt.includes(N);if(!(N in(F?IDBIndex:IDBObjectStore).prototype)||!q&&!$e.includes(N))return;const X=function(){var me=(0,L.Z)(function*(Xe,...qe){const _t=this.transaction(Xe,q?"readwrite":"readonly");let kt=_t.store;return F&&(kt=kt.index(qe.shift())),(yield Promise.all([kt[N](...qe),q&&_t.done]))[0]});return function(qe){return me.apply(this,arguments)}}();return sn.set(D,X),X}!function oe(T){gt=T(gt)}(T=>({...T,get:(D,N,F)=>En(D,N)||T.get(D,N,F),has:(D,N)=>!!En(D,N)||T.has(D,N)}));const wn="@firebase/installations",Hn="0.6.4",Pn=1e4,Ir=`w:${Hn}`,ae="FIS_v2",pe="https://firebaseinstallations.googleapis.com/v1",ge=36e5,Ye=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(T){return T instanceof se.ZR&&T.code.includes("request-failed")}function xn({projectId:T}){return`${pe}/projects/${T}/installations`}function It(T){return{token:T.token,requestStatus:2,expiresIn:Er(T.expiresIn),creationTime:Date.now()}}function Xt(T,D){return ft.apply(this,arguments)}function ft(){return(ft=(0,L.Z)(function*(T,D){const F=(yield D.json()).error;return Ye.create("request-failed",{requestName:T,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Tn({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Gn(T){return fn.apply(this,arguments)}function fn(){return(fn=(0,L.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function Er(T){return Number(T.replace("s","000"))}function Kn(){return(Kn=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:N}){const F=xn(T),q=Tn(T),X=D.getImmediate({optional:!0});if(X){const _t=yield X.getHeartbeatsHeader();_t&&q.append("x-firebase-client",_t)}const Xe={method:"POST",headers:q,body:JSON.stringify({fid:N,authVersion:ae,appId:T.appId,sdkVersion:Ir})},qe=yield Gn(()=>fetch(F,Xe));if(qe.ok){const _t=yield qe.json();return{fid:_t.fid||N,registrationStatus:2,refreshToken:_t.refreshToken,authToken:It(_t.authToken)}}throw yield Xt("Create Installation",qe)})).apply(this,arguments)}function ri(T){return new Promise(D=>{setTimeout(D,T)})}const ko=/^[cdef][\w-]{21}$/,bt="";function Rt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const N=function xt(T){return function _s(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return ko.test(N)?N:bt}catch{return bt}}function yn(T){return`${T.appName}!${T.appId}`}const kn=new Map;function rr(T,D){const N=yn(T);ys(N,D),function Jt(T,D){const N=function en(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=T=>{ys(T.data.key,T.data.fid)}),Zr}();N&&N.postMessage({key:T,fid:D}),function mi(){0===kn.size&&Zr&&(Zr.close(),Zr=null)}()}(N,D)}function ys(T,D){const N=kn.get(T);if(N)for(const F of N)F(D)}let Zr=null;const vs="firebase-installations-database",Vs=1,Yr="firebase-installations-store";let Is=null;function we(){return Is||(Is=function ce(T,D,{blocked:N,upgrade:F,blocking:q,terminated:X}={}){const me=indexedDB.open(T,D),Xe=be(me);return F&&me.addEventListener("upgradeneeded",qe=>{F(be(me.result),qe.oldVersion,qe.newVersion,be(me.transaction))}),N&&me.addEventListener("blocked",()=>N()),Xe.then(qe=>{X&&qe.addEventListener("close",()=>X()),q&&qe.addEventListener("versionchange",()=>q())}).catch(()=>{}),Xe}(vs,Vs,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Yr)}})),Is}function W(T,D){return ve.apply(this,arguments)}function ve(){return(ve=(0,L.Z)(function*(T,D){const N=yn(T),q=(yield we()).transaction(Yr,"readwrite"),X=q.objectStore(Yr),me=yield X.get(N);return yield X.put(D,N),yield q.done,(!me||me.fid!==D.fid)&&rr(T,D.fid),D})).apply(this,arguments)}function Ge(T){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,L.Z)(function*(T){const D=yn(T),F=(yield we()).transaction(Yr,"readwrite");yield F.objectStore(Yr).delete(D),yield F.done})).apply(this,arguments)}function Et(T,D){return on.apply(this,arguments)}function on(){return(on=(0,L.Z)(function*(T,D){const N=yn(T),q=(yield we()).transaction(Yr,"readwrite"),X=q.objectStore(Yr),me=yield X.get(N),Xe=D(me);return void 0===Xe?yield X.delete(N):yield X.put(Xe,N),yield q.done,Xe&&(!me||me.fid!==Xe.fid)&&rr(T,Xe.fid),Xe})).apply(this,arguments)}function $(T){return j.apply(this,arguments)}function j(){return j=(0,L.Z)(function*(T){let D;const N=yield Et(T.appConfig,F=>{const q=function Q(T){return Ft(T||{fid:Rt(),registrationStatus:0})}(F),X=function Ae(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ye.create("app-offline"))};const N={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function le(T,D){return st.apply(this,arguments)}(T,N);return{installationEntry:N,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ot(T)}:{installationEntry:D}}(T,q);return D=X.registrationPromise,X.installationEntry});return N.fid===bt?{installationEntry:yield D}:{installationEntry:N,registrationPromise:D}}),j.apply(this,arguments)}function st(){return st=(0,L.Z)(function*(T,D){try{const N=yield function gi(T,D){return Kn.apply(this,arguments)}(T,D);return W(T.appConfig,N)}catch(N){throw ze(N)&&409===N.customData.serverCode?yield Ge(T.appConfig):yield W(T.appConfig,{fid:D.fid,registrationStatus:0}),N}}),st.apply(this,arguments)}function Ot(T){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,L.Z)(function*(T){let D=yield Qr(T.appConfig);for(;1===D.registrationStatus;)yield ri(100),D=yield Qr(T.appConfig);if(0===D.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield $(T);return F||N}return D})).apply(this,arguments)}function Qr(T){return Et(T,D=>{if(!D)throw Ye.create("installation-not-found");return Ft(D)})}function Ft(T){return function ir(T){return 1===T.registrationStatus&&T.registrationTime+Pn<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Mr(){return(Mr=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:D},N){const F=function so(T,{fid:D}){return`${xn(T)}/${D}/authTokens:generate`}(T,N),q=function Cn(T,{refreshToken:D}){const N=Tn(T);return N.append("Authorization",function ni(T){return`${ae} ${T}`}(D)),N}(T,N),X=D.getImmediate({optional:!0});if(X){const _t=yield X.getHeartbeatsHeader();_t&&q.append("x-firebase-client",_t)}const Xe={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:Ir,appId:T.appId}})},qe=yield Gn(()=>fetch(F,Xe));if(qe.ok)return It(yield qe.json());throw yield Xt("Generate Auth Token",qe)})).apply(this,arguments)}function pa(T){return kl.apply(this,arguments)}function kl(){return kl=(0,L.Z)(function*(T,D=!1){let N;const F=yield Et(T.appConfig,X=>{if(!ao(X))throw Ye.create("not-registered");const me=X.authToken;if(!D&&function ga(T){return 2===T.requestStatus&&!function su(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+ge}(T)}(me))return X;if(1===me.requestStatus)return N=function Es(T,D){return oo.apply(this,arguments)}(T,D),X;{if(!navigator.onLine)throw Ye.create("app-offline");const Xe=function bh(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}(X);return N=function ns(T,D){return Kt.apply(this,arguments)}(T,Xe),Xe}});return N?yield N:F.authToken}),kl.apply(this,arguments)}function oo(){return(oo=(0,L.Z)(function*(T,D){let N=yield ts(T.appConfig);for(;1===N.authToken.requestStatus;)yield ri(100),N=yield ts(T.appConfig);const F=N.authToken;return 0===F.requestStatus?pa(T,D):F})).apply(this,arguments)}function ts(T){return Et(T,D=>{if(!ao(D))throw Ye.create("not-registered");return function ws(T){return 1===T.requestStatus&&T.requestTime+Pn<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Kt(){return Kt=(0,L.Z)(function*(T,D){try{const N=yield function tn(T,D){return Mr.apply(this,arguments)}(T,D),F=Object.assign(Object.assign({},D),{authToken:N});return yield W(T.appConfig,F),N}catch(N){if(!ze(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield W(T.appConfig,F)}else yield Ge(T.appConfig);throw N}}),Kt.apply(this,arguments)}function ao(T){return void 0!==T&&2===T.registrationStatus}function _a(){return(_a=(0,L.Z)(function*(T){const D=T,{installationEntry:N,registrationPromise:F}=yield $(D);return F?F.catch(console.error):pa(D).catch(console.error),N.fid})).apply(this,arguments)}function ou(){return ou=(0,L.Z)(function*(T,D=!1){const N=T;return yield function Ol(T){return Gi.apply(this,arguments)}(N),(yield pa(N,D)).token}),ou.apply(this,arguments)}function Gi(){return(Gi=(0,L.Z)(function*(T){const{registrationPromise:D}=yield $(T);D&&(yield D)})).apply(this,arguments)}function ya(T){return Ye.create("missing-app-config-values",{valueName:T})}const Fl="installations",P_=T=>{const D=T.getProvider("app").getImmediate(),N=function _i(T){if(!T||!T.options)throw ya("App Configuration");if(!T.name)throw ya("App Name");const D=["projectId","apiKey","appId"];for(const N of D)if(!T.options[N])throw ya(N);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:N,heartbeatServiceProvider:(0,J._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Lo=T=>{const D=T.getProvider("app").getImmediate(),N=(0,J._getProvider)(D,Fl).getImmediate();return{getId:()=>function ma(T){return _a.apply(this,arguments)}(N),getToken:q=>function Ml(T){return ou.apply(this,arguments)}(N,q)}};(function Qp(){(0,J._registerComponent)(new _e.wA(Fl,P_,"PUBLIC")),(0,J._registerComponent)(new _e.wA("installations-internal",Lo,"PRIVATE"))})(),(0,J.registerVersion)(wn,Hn),(0,J.registerVersion)(wn,Hn,"esm2017");const au="@firebase/remote-config",Xr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dt{constructor(D,N,F,q){this.client=D,this.storage=N,this.storageCache=F,this.logger=q}isCachedDataFresh(D,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,q=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${q}.`),q}fetch(D){var N=this;return(0,L.Z)(function*(){const[F,q]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(q&&N.isCachedDataFresh(D.cacheMaxAgeMillis,F))return q;D.eTag=q&&q.eTag;const X=yield N.client.fetch(D),me=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&me.push(N.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(me),X})()}}function On(T=navigator){return T.languages&&T.languages[0]||T.language}class oi{constructor(D,N,F,q,X,me){this.firebaseInstallations=D,this.sdkVersion=N,this.namespace=F,this.projectId=q,this.apiKey=X,this.appId=me}fetch(D){var N=this;return(0,L.Z)(function*(){const[F,q]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},qe={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:q,app_id:N.appId,language_code:On()},_t={method:"POST",headers:Xe,body:JSON.stringify(qe)},kt=fetch(me,_t),Mt=new Promise((ui,as)=>{D.signal.addEventListener(()=>{const ci=new Error("The operation was aborted.");ci.name="AbortError",as(ci)})});let mr;try{yield Promise.race([kt,Mt]),mr=yield kt}catch(ui){let as="fetch-client-network";throw"AbortError"===ui?.name&&(as="fetch-timeout"),Xr.create(as,{originalErrorMessage:ui?.message})}let ur=mr.status;const Io=mr.headers.get("ETag")||void 0;let Wn,os;if(200===mr.status){let ui;try{ui=yield mr.json()}catch(as){throw Xr.create("fetch-client-parse",{originalErrorMessage:as?.message})}Wn=ui.entries,os=ui.state}if("INSTANCE_STATE_UNSPECIFIED"===os?ur=500:"NO_CHANGE"===os?ur=304:("NO_TEMPLATE"===os||"EMPTY_CONFIG"===os)&&(Wn={}),304!==ur&&200!==ur)throw Xr.create("fetch-status",{httpStatus:ur});return{status:ur,eTag:Io,config:Wn}})()}}class lu{constructor(D,N){this.client=D,this.storage=N}fetch(D){var N=this;return(0,L.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:N,backoffCount:F}){var q=this;return(0,L.Z)(function*(){yield function Fo(T,D){return new Promise((N,F)=>{const q=Math.max(D-Date.now(),0),X=setTimeout(N,q);T.addEventListener(()=>{clearTimeout(X),F(Xr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,N);try{const X=yield q.client.fetch(D);return yield q.storage.deleteThrottleMetadata(),X}catch(X){if(!function Or(T){if(!(T instanceof se.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(X))throw X;const me={throttleEndTimeMillis:Date.now()+(0,se.$s)(F),backoffCount:F+1};return yield q.storage.setThrottleMetadata(me),q.attemptFetch(D,me)}})()}}class Ia{constructor(D,N,F,q,X){this.app=D,this._client=N,this._storageCache=F,this._storage=q,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function St(T,D){const N=T.target.error||void 0;return Xr.create(D,{originalErrorMessage:N&&N?.message})}const Lr="app_namespace_store";class jl{constructor(D,N,F,q=function Ln(){return new Promise((T,D)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{D(St(F,"storage-open"))},N.onsuccess=F=>{T(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Lr,{keyPath:"compositeKey"})}}catch(N){D(Xr.create("storage-open",{originalErrorMessage:N?.message}))}})}()){this.appId=D,this.appName=N,this.namespace=F,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var N=this;return(0,L.Z)(function*(){const F=yield N.openDbPromise;return new Promise((q,X)=>{const Xe=F.transaction([Lr],"readonly").objectStore(Lr),qe=N.createCompositeKey(D);try{const _t=Xe.get(qe);_t.onerror=kt=>{X(St(kt,"storage-get"))},_t.onsuccess=kt=>{const Mt=kt.target.result;q(Mt?Mt.value:void 0)}}catch(_t){X(Xr.create("storage-get",{originalErrorMessage:_t?.message}))}})})()}set(D,N){var F=this;return(0,L.Z)(function*(){const q=yield F.openDbPromise;return new Promise((X,me)=>{const qe=q.transaction([Lr],"readwrite").objectStore(Lr),_t=F.createCompositeKey(D);try{const kt=qe.put({compositeKey:_t,value:N});kt.onerror=Mt=>{me(St(Mt,"storage-set"))},kt.onsuccess=()=>{X()}}catch(kt){me(Xr.create("storage-set",{originalErrorMessage:kt?.message}))}})})()}delete(D){var N=this;return(0,L.Z)(function*(){const F=yield N.openDbPromise;return new Promise((q,X)=>{const Xe=F.transaction([Lr],"readwrite").objectStore(Lr),qe=N.createCompositeKey(D);try{const _t=Xe.delete(qe);_t.onerror=kt=>{X(St(kt,"storage-delete"))},_t.onsuccess=()=>{q()}}catch(_t){X(Xr.create("storage-delete",{originalErrorMessage:_t?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Uo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const N=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),q=D.storage.getActiveConfig(),X=yield N;X&&(D.lastFetchStatus=X);const me=yield F;me&&(D.lastSuccessfulFetchTimestampMillis=me);const Xe=yield q;Xe&&(D.activeConfig=Xe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function co(){return qi.apply(this,arguments)}function qi(){return(qi=(0,L.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function wr(){(0,J._registerComponent)(new _e.wA("remote-config",function T(D,{instanceIdentifier:N}){const F=D.getProvider("app").getImmediate(),q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xr.create("registration-window");if(!(0,se.hl)())throw Xr.create("indexed-db-unavailable");const{projectId:X,apiKey:me,appId:Xe}=F.options;if(!X)throw Xr.create("registration-project-id");if(!me)throw Xr.create("registration-api-key");if(!Xe)throw Xr.create("registration-app-id");const qe=new jl(Xe,F.name,N=N||"firebase"),_t=new Uo(qe),kt=new ye.Yd(au);kt.logLevel=ye.in.ERROR;const Mt=new oi(q,J.SDK_VERSION,N,X,me,Xe),mr=new lu(Mt,qe),ur=new Dt(mr,qe,_t,kt),Io=new Ia(F,ur,_t,qe,kt);return function ii(T){const D=(0,se.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Io),Io},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(au,"0.4.4"),(0,J.registerVersion)(au,"0.4.4","esm2017")}();const du=(T,D)=>D.some(N=>T instanceof N);let lo,Bt;const fc=new WeakMap,Tr=new WeakMap,Vo=new WeakMap,Cr=new WeakMap,ho=new WeakMap;let br={get(T,D,N){if(T instanceof IDBTransaction){if("done"===D)return Tr.get(T);if("objectStoreNames"===D)return T.objectStoreNames||Vo.get(T);if("store"===D)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return ki(T[D])},set:(T,D,N)=>(T[D]=N,!0),has:(T,D)=>T instanceof IDBTransaction&&("done"===D||"store"===D)||D in T};function Bo(T){return"function"==typeof T?function pc(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ea(){return Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...D){return T.apply(yi(this),D),ki(fc.get(this))}:function(...D){return ki(T.apply(yi(this),D))}:function(D,...N){const F=T.call(yi(this),D,...N);return Vo.set(F,D.sort?D.sort():[D]),ki(F)}}(T):(T instanceof IDBTransaction&&function eg(T){if(Tr.has(T))return;const D=new Promise((N,F)=>{const q=()=>{T.removeEventListener("complete",X),T.removeEventListener("error",me),T.removeEventListener("abort",me)},X=()=>{N(),q()},me=()=>{F(T.error||new DOMException("AbortError","AbortError")),q()};T.addEventListener("complete",X),T.addEventListener("error",me),T.addEventListener("abort",me)});Tr.set(T,D)}(T),du(T,function x_(){return lo||(lo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,br):T)}function ki(T){if(T instanceof IDBRequest)return function Fr(T){const D=new Promise((N,F)=>{const q=()=>{T.removeEventListener("success",X),T.removeEventListener("error",me)},X=()=>{N(ki(T.result)),q()},me=()=>{F(T.error),q()};T.addEventListener("success",X),T.addEventListener("error",me)});return D.then(N=>{N instanceof IDBCursor&&fc.set(N,T)}).catch(()=>{}),ho.set(D,T),D}(T);if(Cr.has(T))return Cr.get(T);const D=Bo(T);return D!==T&&(Cr.set(T,D),ho.set(D,T)),D}const yi=T=>ho.get(T);function wa(T,D,{blocked:N,upgrade:F,blocking:q,terminated:X}={}){const me=indexedDB.open(T,D),Xe=ki(me);return F&&me.addEventListener("upgradeneeded",qe=>{F(ki(me.result),qe.oldVersion,qe.newVersion,ki(me.transaction))}),N&&me.addEventListener("blocked",()=>N()),Xe.then(qe=>{X&&qe.addEventListener("close",()=>X()),q&&qe.addEventListener("versionchange",()=>q())}).catch(()=>{}),Xe}function Ta(T,{blocked:D}={}){const N=indexedDB.deleteDatabase(T);return D&&N.addEventListener("blocked",()=>D()),ki(N).then(()=>{})}const $l=["get","getKey","getAll","getAllKeys","count"],k_=["put","add","delete","clear"],gc=new Map;function Hl(T,D){if(!(T instanceof IDBDatabase)||D in T||"string"!=typeof D)return;if(gc.get(D))return gc.get(D);const N=D.replace(/FromIndex$/,""),F=D!==N,q=k_.includes(N);if(!(N in(F?IDBIndex:IDBObjectStore).prototype)||!q&&!$l.includes(N))return;const X=function(){var me=(0,L.Z)(function*(Xe,...qe){const _t=this.transaction(Xe,q?"readwrite":"readonly");let kt=_t.store;return F&&(kt=kt.index(qe.shift())),(yield Promise.all([kt[N](...qe),q&&_t.done]))[0]});return function(qe){return me.apply(this,arguments)}}();return gc.set(D,X),X}!function Jr(T){br=T(br)}(T=>({...T,get:(D,N,F)=>Hl(D,N)||T.get(D,N,F),has:(D,N)=>!!Hl(D,N)||T.has(D,N)}));const Nh="/firebase-messaging-sw.js",Gl="/firebase-cloud-messaging-push-scope",Ph="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",M_="https://fcmregistrations.googleapis.com/v1",Fn="google.c.a.c_id",O_="google.c.a.c_l",tg="google.c.a.ts";var xh=function(T){return T.PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",T}(xh||{});function Gs(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zl(T){const N=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),q=new Uint8Array(F.length);for(let X=0;X<F.length;++X)q[X]=F.charCodeAt(X);return q}const Ca="fcm_token_details_db",Wl=5,hu="fcm_token_object_Store";function fu(){return fu=(0,L.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Ca))return null;let D=null;return(yield wa(Ca,Wl,{upgrade:(F=(0,L.Z)(function*(q,X,me,Xe){var qe;if(X<2||!q.objectStoreNames.contains(hu))return;const _t=Xe.objectStore(hu),kt=yield _t.index("fcmSenderId").get(T);if(yield _t.clear(),kt)if(2===X){const Mt=kt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;D={token:Mt.fcmToken,createTime:null!==(qe=Mt.createTime)&&void 0!==qe?qe:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:Gs(Mt.vapidKey)}}}else if(3===X){const Mt=kt;D={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Gs(Mt.auth),p256dh:Gs(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Gs(Mt.vapidKey)}}}else if(4===X){const Mt=kt;D={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Gs(Mt.auth),p256dh:Gs(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Gs(Mt.vapidKey)}}}}),function(X,me,Xe,qe){return F.apply(this,arguments)})})).close(),yield Ta(Ca),yield Ta("fcm_vapid_details_db"),yield Ta("undefined"),function jo(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var F}),fu.apply(this,arguments)}const Ts="firebase-messaging-database",kh=1,Ki="firebase-messaging-store";let pr=null;function $o(){return pr||(pr=wa(Ts,kh,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Ki)}})),pr}function vi(T){return Ho.apply(this,arguments)}function Ho(){return Ho=(0,L.Z)(function*(T){const D=gu(T),F=yield(yield $o()).transaction(Ki).objectStore(Ki).get(D);if(F)return F;{const q=yield function XI(T){return fu.apply(this,arguments)}(T.appConfig.senderId);if(q)return yield ql(T,q),q}}),Ho.apply(this,arguments)}function ql(T,D){return pu.apply(this,arguments)}function pu(){return(pu=(0,L.Z)(function*(T,D){const N=gu(T),q=(yield $o()).transaction(Ki,"readwrite");return yield q.objectStore(Ki).put(D,N),yield q.done,D})).apply(this,arguments)}function ba(){return(ba=(0,L.Z)(function*(T){const D=gu(T),F=(yield $o()).transaction(Ki,"readwrite");yield F.objectStore(Ki).delete(D),yield F.done})).apply(this,arguments)}function gu({appConfig:T}){return T.appId}const Dr=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kl(T,D){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,L.Z)(function*(T,D){const N=yield Lh(T),F=L_(D),q={method:"POST",headers:N,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(_u(T.appConfig),q)).json()}catch(me){throw Dr.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(X.error)throw Dr.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Dr.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function mu(){return(mu=(0,L.Z)(function*(T,D){const N=yield Lh(T),F=L_(D.subscriptionOptions),q={method:"PATCH",headers:N,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${_u(T.appConfig)}/${D.token}`,q)).json()}catch(me){throw Dr.create("token-update-failed",{errorInfo:me?.toString()})}if(X.error)throw Dr.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Dr.create("token-update-no-token");return X.token})).apply(this,arguments)}function Go(T,D){return fo.apply(this,arguments)}function fo(){return(fo=(0,L.Z)(function*(T,D){const F={method:"DELETE",headers:yield Lh(T)};try{const X=yield(yield fetch(`${_u(T.appConfig)}/${D}`,F)).json();if(X.error)throw Dr.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(q){throw Dr.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function _u({projectId:T}){return`${M_}/projects/${T}/registrations`}function Lh(T){return mc.apply(this,arguments)}function mc(){return(mc=(0,L.Z)(function*({appConfig:T,installations:D}){const N=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function L_({p256dh:T,auth:D,endpoint:N,vapidKey:F}){const q={web:{endpoint:N,auth:D,p256dh:T}};return F!==Ph&&(q.web.applicationPubKey=F),q}const Fh=6048e5;function Ql(){return Ql=(0,L.Z)(function*(T){const D=yield function yu(T,D){return Xl.apply(this,arguments)}(T.swRegistration,T.vapidKey),N={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:Gs(D.getKey("auth")),p256dh:Gs(D.getKey("p256dh"))},F=yield vi(T.firebaseDependencies);if(F){if(function Vh(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}(F.subscriptionOptions,N))return Date.now()>=F.createTime+Fh?function rg(T,D){return Da.apply(this,arguments)}(T,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield Go(T.firebaseDependencies,F.token)}catch(q){console.warn(q)}return U_(T.firebaseDependencies,N)}return U_(T.firebaseDependencies,N)}),Ql.apply(this,arguments)}function _c(){return _c=(0,L.Z)(function*(T){const D=yield vi(T.firebaseDependencies);D&&(yield Go(T.firebaseDependencies,D.token),yield function Mh(T){return ba.apply(this,arguments)}(T.firebaseDependencies));const N=yield T.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()}),_c.apply(this,arguments)}function Da(){return Da=(0,L.Z)(function*(T,D){try{const N=yield function Yl(T,D){return mu.apply(this,arguments)}(T.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:N,createTime:Date.now()});return yield ql(T.firebaseDependencies,F),N}catch(N){throw yield function Uh(T){return _c.apply(this,arguments)}(T),N}}),Da.apply(this,arguments)}function U_(T,D){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,L.Z)(function*(T,D){const F={token:yield Kl(T,D),createTime:Date.now(),subscriptionOptions:D};return yield ql(T,F),F.token})).apply(this,arguments)}function Xl(){return(Xl=(0,L.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zl(D)})})).apply(this,arguments)}function yc(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function vu(T,D){if(!D.notification)return;T.notification={};const N=D.notification.title;N&&(T.notification.title=N);const F=D.notification.body;F&&(T.notification.body=F);const q=D.notification.image;q&&(T.notification.image=q);const X=D.notification.icon;X&&(T.notification.icon=X)}(D,T),function ig(T,D){D.data&&(T.data=D.data)}(D,T),function Jl(T,D){var N,F,q,X,me;if(!(D.fcmOptions||null!==(N=D.notification)&&void 0!==N&&N.click_action))return;T.fcmOptions={};const Xe=null!==(q=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==q?q:null===(X=D.notification)||void 0===X?void 0:X.click_action;Xe&&(T.fcmOptions.link=Xe);const qe=null===(me=D.fcmOptions)||void 0===me?void 0:me.analytics_label;qe&&(T.fcmOptions.analyticsLabel=qe)}(D,T),D}function ed(T,D){const N=[];for(let F=0;F<T.length;F++)N.push(T.charAt(F)),F<D.length&&N.push(D.charAt(F));return N.join("")}function td(T){return Dr.create("missing-app-config-values",{valueName:T})}ed("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ed("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class og{constructor(D,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function sg(T){if(!T||!T.options)throw td("App Configuration Object");if(!T.name)throw td("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:N}=T;for(const F of D)if(!N[F])throw td(F);return{appName:T.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:q,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Iu(){return(Iu=(0,L.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Nh,{scope:Gl}),T.swRegistration.update().catch(()=>{})}catch(D){throw Dr.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function zo(){return(zo=(0,L.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield function vc(T){return Iu.apply(this,arguments)}(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Dr.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function Wo(){return(Wo=(0,L.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=Ph)})).apply(this,arguments)}function Eu(){return Eu=(0,L.Z)(function*(T,D){if(!navigator)throw Dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dr.create("permission-blocked");return yield function Cs(T,D){return Wo.apply(this,arguments)}(T,D?.vapidKey),yield function ag(T,D){return zo.apply(this,arguments)}(T,D?.serviceWorkerRegistration),function F_(T){return Ql.apply(this,arguments)}(T)}),Eu.apply(this,arguments)}function rs(){return(rs=(0,L.Z)(function*(T,D,N){const F=function jh(T){switch(T){case xh.NOTIFICATION_CLICKED:return"notification_open";case xh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[Fn],message_name:N[O_],message_time:N[tg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gn(){return gn=(0,L.Z)(function*(T,D){const N=D.data;if(!N.isFirebaseMessaging)return;T.onMessageHandler&&N.messageType===xh.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(yc(N)):T.onMessageHandler.next(yc(N)));const F=N.data;(function V_(T){return"object"==typeof T&&!!T&&Fn in T})(F)&&"1"===F["google.c.a.e"]&&(yield function ug(T,D,N){return rs.apply(this,arguments)}(T,N.messageType,F))}),gn.apply(this,arguments)}const qo="@firebase/messaging",Ur=T=>{const D=new og(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function $h(T,D){return gn.apply(this,arguments)}(D,N)),D},cg=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:F=>function Bh(T,D){return Eu.apply(this,arguments)}(D,F)}};function Zo(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,L.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nd(){(0,J._registerComponent)(new _e.wA("messaging",Ur,"PUBLIC")),(0,J._registerComponent)(new _e.wA("messaging-internal",cg,"PRIVATE")),(0,J.registerVersion)(qo,"0.12.4"),(0,J.registerVersion)(qo,"0.12.4","esm2017")}();const Sn="analytics",j_="firebase_id",At="origin",Hh=6e4,Gh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ec="https://www.googletagmanager.com/gtag/js",Sr=new ye.Yd("@firebase/analytics"),Br=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function bs(T){if(!T.startsWith(Ec)){const D=Br.create("invalid-gtag-resource",{gtagURL:T});return Sr.warn(D.message),""}return T}function id(T){return Promise.all(T.map(D=>D.catch(N=>N)))}function Pe(){return(Pe=(0,L.Z)(function*(T,D,N,F,q,X){const me=F[q];try{if(me)yield D[me];else{const qe=(yield id(N)).find(_t=>_t.measurementId===q);qe&&(yield D[qe.appId])}}catch(Xe){Sr.error(Xe)}T("config",q,X)})).apply(this,arguments)}function is(){return(is=(0,L.Z)(function*(T,D,N,F,q){try{let X=[];if(q&&q.send_to){let me=q.send_to;Array.isArray(me)||(me=[me]);const Xe=yield id(N);for(const qe of me){const _t=Xe.find(Mt=>Mt.measurementId===qe),kt=_t&&D[_t.appId];if(!kt){X=[];break}X.push(kt)}}0===X.length&&(X=Object.values(D)),yield Promise.all(X),T("event",F,q||{})}catch(X){Sr.error(X)}})).apply(this,arguments)}const Ra=30,od=new class Yo{constructor(D={},N=1e3){this.throttleMetadata=D,this.intervalMillis=N}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,N){this.throttleMetadata[D]=N}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function fg(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function ad(){return(ad=(0,L.Z)(function*(T){var D;const{appId:N,apiKey:F}=T,q={method:"GET",headers:fg(F)},X=Gh.replace("{app-id}",N),me=yield fetch(X,q);if(200!==me.status&&304!==me.status){let Xe="";try{const qe=yield me.json();null!==(D=qe.error)&&void 0!==D&&D.message&&(Xe=qe.error.message)}catch{}throw Br.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Xe})}return me.json()})).apply(this,arguments)}function Mi(){return(Mi=(0,L.Z)(function*(T,D=od,N){const{appId:F,apiKey:q,measurementId:X}=T.options;if(!F)throw Br.create("no-app-id");if(!q){if(X)return{measurementId:X,appId:F};throw Br.create("no-api-key")}const me=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Kh;return setTimeout((0,L.Z)(function*(){Xe.abort()}),void 0!==N?N:Hh),Wh({appId:F,apiKey:q,measurementId:X},me,Xe,D)})).apply(this,arguments)}function Wh(T,D,N){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,L.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:N},F,q=od){var X;const{appId:me,measurementId:Xe}=T;try{yield function go(T,D){return new Promise((N,F)=>{const q=Math.max(D-Date.now(),0),X=setTimeout(N,q);T.addEventListener(()=>{clearTimeout(X),F(Br.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(F,D)}catch(qe){if(Xe)return Sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${qe?.message}]`),{appId:me,measurementId:Xe};throw qe}try{const qe=yield function JI(T){return ad.apply(this,arguments)}(T);return q.deleteThrottleMetadata(me),qe}catch(qe){const _t=qe;if(!function qh(T){if(!(T instanceof se.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(_t)){if(q.deleteThrottleMetadata(me),Xe)return Sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${_t?.message}]`),{appId:me,measurementId:Xe};throw qe}const kt=503===Number(null===(X=_t?.customData)||void 0===X?void 0:X.httpStatus)?(0,se.$s)(N,q.intervalMillis,Ra):(0,se.$s)(N,q.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+kt,backoffCount:N+1};return q.setThrottleMetadata(me,Mt),Sr.debug(`Calling attemptFetch again in ${kt} millis`),Wh(T,Mt,F,q)}}),Qo.apply(this,arguments)}class Kh{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Dc,Xo;function Sc(){return(Sc=(0,L.Z)(function*(T,D,N,F,q){if(q&&q.global)T("event",N,F);else{const X=yield D;T("event",N,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function zs(){return(zs=(0,L.Z)(function*(){if(!(0,se.hl)())return Sr.warn(Br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(T){return Sr.warn(Br.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function mo(){return mo=(0,L.Z)(function*(T,D,N,F,q,X,me){var Xe;const qe=function Ei(T){return Mi.apply(this,arguments)}(T);qe.then(ur=>{N[ur.measurementId]=ur.appId,T.options.measurementId&&ur.measurementId!==T.options.measurementId&&Sr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ur=>Sr.error(ur)),D.push(qe);const _t=function mt(){return zs.apply(this,arguments)}().then(ur=>{if(ur)return F.getId()}),[kt,Mt]=yield Promise.all([qe,_t]);(function bc(T){const D=window.document.getElementsByTagName("script");for(const N of Object.values(D))if(N.src&&N.src.includes(Ec)&&N.src.includes(T))return N;return null})(X)||function Tc(T,D){const N=function wc(T,D){let N;return window.trustedTypes&&(N=window.trustedTypes.createPolicy(T,D)),N}("firebase-js-sdk-policy",{createScriptURL:bs}),F=document.createElement("script"),q=`${Ec}?l=${T}&id=${D}`;F.src=N?N?.createScriptURL(q):q,F.async=!0,document.head.appendChild(F)}(X,kt.measurementId),Xo&&(q("consent","default",Xo),function Jo(T){Xo=T}(void 0)),q("js",new Date);const mr=null!==(Xe=me?.config)&&void 0!==Xe?Xe:{};return mr[At]="firebase",mr.update=!0,null!=Mt&&(mr[j_]=Mt),q("config",kt.measurementId,mr),Dc&&(q("set",Dc),function Un(T){Dc=T}(void 0)),kt.measurementId}),mo.apply(this,arguments)}class _o{constructor(D){this.app=D}_delete(){return delete Zi[this.app.options.appId],Promise.resolve()}}let Zi={},wu=[];const Rr={};let $r,ai,or="dataLayer",Ws=!1;function qs(T,D,N){!function Rc(){const T=[];if((0,se.ru)()&&T.push("This is a browser extension environment."),(0,se.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((F,q)=>`(${q+1}) ${F}`).join(" "),N=Br.create("invalid-analytics-context",{errorInfo:D});Sr.warn(N.message)}}();const F=T.options.appId;if(!F)throw Br.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Br.create("no-api-key");Sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zi[F])throw Br.create("already-exists",{id:F});if(!Ws){!function $_(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(or);const{wrappedGtag:X,gtagCore:me}=function Ar(T,D,N,F,q){let X=function(...me){window[F].push(arguments)};return window[q]&&"function"==typeof window[q]&&(X=window[q]),window[q]=function Cc(T,D,N,F){function X(){return X=(0,L.Z)(function*(me,...Xe){try{if("event"===me){const[qe,_t]=Xe;yield function zt(T,D,N,F,q){return is.apply(this,arguments)}(T,D,N,qe,_t)}else if("config"===me){const[qe,_t]=Xe;yield function sd(T,D,N,F,q,X){return Pe.apply(this,arguments)}(T,D,N,F,qe,_t)}else if("consent"===me){const[qe]=Xe;T("consent","update",qe)}else if("get"===me){const[qe,_t,kt]=Xe;T("get",qe,_t,kt)}else if("set"===me){const[qe]=Xe;T("set",qe)}else T(me,...Xe)}catch(qe){Sr.error(qe)}}),X.apply(this,arguments)}return function q(me){return X.apply(this,arguments)}}(X,T,D,N),{gtagCore:X,wrappedGtag:window[q]}}(Zi,wu,Rr,or,"gtag");ai=X,$r=me,Ws=!0}return Zi[F]=function Rn(T,D,N,F,q,X,me){return mo.apply(this,arguments)}(T,wu,Rr,D,$r,or,N),new _o(T)}function Nc(){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,L.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Cu="@firebase/analytics";!function z_(){(0,J._registerComponent)(new _e.wA(Sn,(D,{options:N})=>qs(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,J._registerComponent)(new _e.wA("analytics-internal",function T(D){try{const N=D.getProvider(Sn).getImmediate();return{logEvent:(F,q,X)=>function mg(T,D,N,F){T=(0,se.m9)(T),function H_(T,D,N,F,q){return Sc.apply(this,arguments)}(ai,Zi[T.app.options.appId],D,N,F).catch(q=>Sr.error(q))}(N,F,q,X)}}catch(N){throw Br.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,J.registerVersion)(Cu,"0.10.0"),(0,J.registerVersion)(Cu,"0.10.0","esm2017")}();var xa=O(1954),ud=O(2631);const yg=new class _g extends ud.v{}(class ef extends xa.o{constructor(D,N){super(D,N),this.scheduler=D,this.work=N}schedule(D,N=0){return N>0?super.schedule(D,N):(this.delay=N,this.state=D,this.scheduler.flush(this),this)}execute(D,N){return N>0||this.closed?super.execute(D,N):this._execute(D,N)}requestAsyncId(D,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,N,F):(D.flush(this),0)}});var tf=O(6321),Y=O(9397),an=O(3093),ar=O(5137);const M=new _.GfV("7.6.1"),gr="__angularfire_symbol__analyticsIsSupportedValue",As="__angularfire_symbol__analyticsIsSupported",ka="__angularfire_symbol__remoteConfigIsSupportedValue",xc="__angularfire_symbol__remoteConfigIsSupported",bn="__angularfire_symbol__messagingIsSupportedValue",bu="__angularfire_symbol__messagingIsSupported";function ta(T,D,N){if(D){if(1===D.length)return D[0];const X=D.filter(me=>me.app===N);if(1===X.length)return X[0]}return N.container.getProvider(T).getImmediate({optional:!0})}globalThis[As]||(globalThis[As]=Nc().then(T=>globalThis[gr]=T).catch(()=>globalThis[gr]=!1)),globalThis[bu]||(globalThis[bu]=Zo().then(T=>globalThis[bn]=T).catch(()=>globalThis[bn]=!1)),globalThis[xc]||(globalThis[xc]=co().then(T=>globalThis[ka]=T).catch(()=>globalThis[ka]=!1));const rf=(T,D)=>{const N=D?[D]:(0,ee.C6)(),F=[];return N.forEach(q=>{q.container.getProvider(T).instances.forEach(me=>{F.includes(me)||F.push(me)})}),F};function Ks(){}class ld{constructor(D,N=yg){this.zone=D,this.delegate=N}now(){return this.delegate.now()}schedule(D,N,F){const q=this.zone;return this.delegate.schedule(function(me){q.runGuarded(()=>{D.apply(this,[me])})},N,F)}}class Du{constructor(D){this.zone=D,this.task=null}call(D,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ks,{},Ks,Ks)),N.pipe((0,Y.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sf=(()=>{class T{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new ld(Zone.current)),this.insideAngular=N.run(()=>new ld(Zone.current,tf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(N){return new(N||T)(_.LFG(_.R0b))},T.\u0275prov=_.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Wt(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Su(T){return T.pipe((0,an.Q)(Wt().outsideAngular))}function Ma(T){return Wt(),function Au(T){return function(N){return(N=N.lift(new Du(T.ngZone))).pipe((0,ar.R)(T.outsideAngular),(0,an.Q)(T.insideAngular))}}(Wt())(T)}},9058:(ht,Se,O)=>{O.d(Se,{$s:()=>Ge,BH:()=>ie,DV:()=>Er,Dv:()=>ys,G6:()=>Ir,GJ:()=>Gn,L:()=>de,LL:()=>Re,Pz:()=>Te,Sg:()=>be,UG:()=>Z,UI:()=>gi,US:()=>_e,Wj:()=>en,Wl:()=>It,Yr:()=>Pn,ZB:()=>ne,ZR:()=>De,aH:()=>oe,b$:()=>sn,cI:()=>xn,dS:()=>vs,eu:()=>pe,g5:()=>L,gK:()=>Jt,gQ:()=>xt,h$:()=>xe,hl:()=>ae,hu:()=>ee,jU:()=>$e,lb:()=>mi,m9:()=>on,ne:()=>yn,p$:()=>G,pd:()=>Rt,r3:()=>fn,ru:()=>yt,tV:()=>B,uI:()=>ce,ug:()=>Vs,vZ:()=>Kn,w1:()=>wn,w9:()=>Cn,xO:()=>ko,xb:()=>ni,z$:()=>Fe,zI:()=>ge,zd:()=>bt});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ee=function($,j){if(!$)throw L(j)},L=function($){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$)},J=function($){const j=[];let Q=0;for(let Ae=0;Ae<$.length;Ae++){let le=$.charCodeAt(Ae);le<128?j[Q++]=le:le<2048?(j[Q++]=le>>6|192,j[Q++]=63&le|128):55296==(64512&le)&&Ae+1<$.length&&56320==(64512&$.charCodeAt(Ae+1))?(le=65536+((1023&le)<<10)+(1023&$.charCodeAt(++Ae)),j[Q++]=le>>18|240,j[Q++]=le>>12&63|128,j[Q++]=le>>6&63|128,j[Q++]=63&le|128):(j[Q++]=le>>12|224,j[Q++]=le>>6&63|128,j[Q++]=63&le|128)}return j},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let le=0;le<$.length;le+=3){const st=$[le],Ot=le+1<$.length,Nt=Ot?$[le+1]:0,Qr=le+2<$.length,Ft=Qr?$[le+2]:0;let Mr=(15&Nt)<<2|Ft>>6,so=63&Ft;Qr||(so=64,Ot||(Mr=64)),Ae.push(Q[st>>2],Q[(3&st)<<4|Nt>>4],Q[Mr],Q[so])}return Ae.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(J($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let Q=0,Ae=0;for(;Q<$.length;){const le=$[Q++];if(le<128)j[Ae++]=String.fromCharCode(le);else if(le>191&&le<224){const st=$[Q++];j[Ae++]=String.fromCharCode((31&le)<<6|63&st)}else if(le>239&&le<365){const Qr=((7&le)<<18|(63&$[Q++])<<12|(63&$[Q++])<<6|63&$[Q++])-65536;j[Ae++]=String.fromCharCode(55296+(Qr>>10)),j[Ae++]=String.fromCharCode(56320+(1023&Qr))}else{const st=$[Q++],Ot=$[Q++];j[Ae++]=String.fromCharCode((15&le)<<12|(63&st)<<6|63&Ot)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const Q=j?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let le=0;le<$.length;){const st=Q[$.charAt(le++)],Nt=le<$.length?Q[$.charAt(le)]:0;++le;const Ft=le<$.length?Q[$.charAt(le)]:64;++le;const tn=le<$.length?Q[$.charAt(le)]:64;if(++le,null==st||null==Nt||null==Ft||null==tn)throw new ye;Ae.push(st<<2|Nt>>4),64!==Ft&&(Ae.push(Nt<<4&240|Ft>>2),64!==tn&&Ae.push(Ft<<6&192|tn))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function($){const j=J($);return _e.encodeByteArray(j,!0)},de=function($){return xe($).replace(/\./g,"")},B=function($){try{return _e.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G($){return ne(void 0,$)}function ne($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const Q in j)!j.hasOwnProperty(Q)||!Ve(Q)||($[Q]=ne($[Q],j[Q]));return $}function Ve($){return"__proto__"!==$}const Oe=()=>{try{return function Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=$&&B($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},oe=()=>{var $;return null===($=Oe())||void 0===$?void 0:$.config},Te=$=>{var j;return null===(j=Oe())||void 0===j?void 0:j[`_${$}`]};class ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Q)=>{this.resolve=j,this.reject=Q})}wrapCallback(j){return(Q,Ae)=>{Q?this.reject(Q):this.resolve(Ae),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Q):j(Q,Ae))}}}function be($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=j||"demo-project",le=$.iat||0,st=$.sub||$.user_id;if(!st)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ot=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:le,exp:le+3600,auth_time:le,sub:st,user_id:st,firebase:{sign_in_provider:"custom",identities:{}}},$);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(Ot)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Z(){var $;const j=null===($=Oe())||void 0===$?void 0:$.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $e(){return"object"==typeof self&&self.self===self}function yt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function sn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wn(){const $=Fe();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Pn(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Ir(){return!Z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function pe(){return new Promise(($,j)=>{try{let Q=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(Ae);le.onsuccess=()=>{le.result.close(),Q||self.indexedDB.deleteDatabase(Ae),$(!0)},le.onupgradeneeded=()=>{Q=!1},le.onerror=()=>{var st;j((null===(st=le.error)||void 0===st?void 0:st.message)||"")}}catch(Q){j(Q)}})}function ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class De extends Error{constructor(j,Q,Ae){super(Q),this.code=j,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,De.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor(j,Q,Ae){this.service=j,this.serviceName=Q,this.errors=Ae}create(j,...Q){const Ae=Q[0]||{},le=`${this.service}/${j}`,st=this.errors[j],Ot=st?function Ye($,j){return $.replace(ze,(Q,Ae)=>{const le=j[Ae];return null!=le?String(le):`<${Ae}?>`})}(st,Ae):"Error";return new De(le,`${this.serviceName}: ${Ot} (${le}).`,Ae)}}const ze=/\{\$([^}]+)}/g;function xn($){return JSON.parse($)}function It($){return JSON.stringify($)}const Xt=function($){let j={},Q={},Ae={},le="";try{const st=$.split(".");j=xn(B(st[0])||""),Q=xn(B(st[1])||""),le=st[2],Ae=Q.d||{},delete Q.d}catch{}return{header:j,claims:Q,data:Ae,signature:le}},Cn=function($){const Q=Xt($).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Gn=function($){const j=Xt($).claims;return"object"==typeof j&&!0===j.admin};function fn($,j){return Object.prototype.hasOwnProperty.call($,j)}function Er($,j){if(Object.prototype.hasOwnProperty.call($,j))return $[j]}function ni($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function gi($,j,Q){const Ae={};for(const le in $)Object.prototype.hasOwnProperty.call($,le)&&(Ae[le]=j.call(Q,$[le],le,$));return Ae}function Kn($,j){if($===j)return!0;const Q=Object.keys($),Ae=Object.keys(j);for(const le of Q){if(!Ae.includes(le))return!1;const st=$[le],Ot=j[le];if(ri(st)&&ri(Ot)){if(!Kn(st,Ot))return!1}else if(st!==Ot)return!1}for(const le of Ae)if(!Q.includes(le))return!1;return!0}function ri($){return null!==$&&"object"==typeof $}function ko($){const j=[];for(const[Q,Ae]of Object.entries($))Array.isArray(Ae)?Ae.forEach(le=>{j.push(encodeURIComponent(Q)+"="+encodeURIComponent(le))}):j.push(encodeURIComponent(Q)+"="+encodeURIComponent(Ae));return j.length?"&"+j.join("&"):""}function bt($){const j={};return $.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[le,st]=Ae.split("=");j[decodeURIComponent(le)]=decodeURIComponent(st)}}),j}function Rt($){const j=$.indexOf("?");if(!j)return"";const Q=$.indexOf("#",j);return $.substring(j,Q>0?Q:void 0)}class xt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,Q){Q||(Q=0);const Ae=this.W_;if("string"==typeof j)for(let tn=0;tn<16;tn++)Ae[tn]=j.charCodeAt(Q)<<24|j.charCodeAt(Q+1)<<16|j.charCodeAt(Q+2)<<8|j.charCodeAt(Q+3),Q+=4;else for(let tn=0;tn<16;tn++)Ae[tn]=j[Q]<<24|j[Q+1]<<16|j[Q+2]<<8|j[Q+3],Q+=4;for(let tn=16;tn<80;tn++){const Mr=Ae[tn-3]^Ae[tn-8]^Ae[tn-14]^Ae[tn-16];Ae[tn]=4294967295&(Mr<<1|Mr>>>31)}let Ft,ir,le=this.chain_[0],st=this.chain_[1],Ot=this.chain_[2],Nt=this.chain_[3],Qr=this.chain_[4];for(let tn=0;tn<80;tn++){tn<40?tn<20?(Ft=Nt^st&(Ot^Nt),ir=1518500249):(Ft=st^Ot^Nt,ir=1859775393):tn<60?(Ft=st&Ot|Nt&(st|Ot),ir=2400959708):(Ft=st^Ot^Nt,ir=3395469782);const Mr=(le<<5|le>>>27)+Ft+Qr+ir+Ae[tn]&4294967295;Qr=Nt,Nt=Ot,Ot=4294967295&(st<<30|st>>>2),st=le,le=Mr}this.chain_[0]=this.chain_[0]+le&4294967295,this.chain_[1]=this.chain_[1]+st&4294967295,this.chain_[2]=this.chain_[2]+Ot&4294967295,this.chain_[3]=this.chain_[3]+Nt&4294967295,this.chain_[4]=this.chain_[4]+Qr&4294967295}update(j,Q){if(null==j)return;void 0===Q&&(Q=j.length);const Ae=Q-this.blockSize;let le=0;const st=this.buf_;let Ot=this.inbuf_;for(;le<Q;){if(0===Ot)for(;le<=Ae;)this.compress_(j,le),le+=this.blockSize;if("string"==typeof j){for(;le<Q;)if(st[Ot]=j.charCodeAt(le),++Ot,++le,Ot===this.blockSize){this.compress_(st),Ot=0;break}}else for(;le<Q;)if(st[Ot]=j[le],++Ot,++le,Ot===this.blockSize){this.compress_(st),Ot=0;break}}this.inbuf_=Ot,this.total_+=Q}digest(){const j=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&Q,Q/=256;this.compress_(this.buf_);let Ae=0;for(let le=0;le<5;le++)for(let st=24;st>=0;st-=8)j[Ae]=this.chain_[le]>>st&255,++Ae;return j}}function yn($,j){const Q=new kn($,j);return Q.subscribe.bind(Q)}class kn{constructor(j,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{j(this)}).catch(Ae=>{this.error(Ae)})}next(j){this.forEachObserver(Q=>{Q.next(j)})}error(j){this.forEachObserver(Q=>{Q.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Q,Ae){let le;if(void 0===j&&void 0===Q&&void 0===Ae)throw new Error("Missing Observer.");le=function pn($,j){if("object"!=typeof $||null===$)return!1;for(const Q of j)if(Q in $&&"function"==typeof $[Q])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:Q,complete:Ae},void 0===le.next&&(le.next=zn),void 0===le.error&&(le.error=zn),void 0===le.complete&&(le.complete=zn);const st=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch{}}),this.observers.push(le),st}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,j)}sendOne(j,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Q(this.observers[j])}catch(Ae){typeof console<"u"&&console.error&&console.error(Ae)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}const ys=function($,j,Q,Ae){let le;if(Ae<j?le="at least "+j:Ae>Q&&(le=0===Q?"none":"no more than "+Q),le)throw new Error($+" failed: Was called with "+Ae+(1===Ae?" argument.":" arguments.")+" Expects "+le+".")};function Jt($,j){return`${$} failed: ${j} argument `}function en($,j,Q,Ae){if((!Ae||Q)&&"function"!=typeof Q)throw new Error(Jt($,j)+"must be a valid function.")}function mi($,j,Q,Ae){if((!Ae||Q)&&("object"!=typeof Q||null===Q))throw new Error(Jt($,j)+"must be a valid context object.")}const vs=function($){const j=[];let Q=0;for(let Ae=0;Ae<$.length;Ae++){let le=$.charCodeAt(Ae);if(le>=55296&&le<=56319){const st=le-55296;Ae++,ee(Ae<$.length,"Surrogate pair missing trail surrogate."),le=65536+(st<<10)+($.charCodeAt(Ae)-56320)}le<128?j[Q++]=le:le<2048?(j[Q++]=le>>6|192,j[Q++]=63&le|128):le<65536?(j[Q++]=le>>12|224,j[Q++]=le>>6&63|128,j[Q++]=63&le|128):(j[Q++]=le>>18|240,j[Q++]=le>>12&63|128,j[Q++]=le>>6&63|128,j[Q++]=63&le|128)}return j},Vs=function($){let j=0;for(let Q=0;Q<$.length;Q++){const Ae=$.charCodeAt(Q);Ae<128?j++:Ae<2048?j+=2:Ae>=55296&&Ae<=56319?(j+=4,Q++):j+=3}return j},Is=1e3,we=2,W=144e5,ve=.5;function Ge($,j=Is,Q=we){const Ae=j*Math.pow(Q,$),le=Math.round(ve*Ae*(Math.random()-.5)*2);return Math.min(W,Ae+le)}function on($){return $&&$._delegate?$._delegate:$}},2270:(ht,Se,O)=>{var _=O(5879);let ee=null;function L(){return ee}class se{}const _e=new _.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(de)},providedIn:"platform"})}return n})();const xe=new _.OlP("Location Initialized");let de=(()=>{class n extends ye{constructor(){super(),this._doc=(0,_.f3M)(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ne(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(Ke)},providedIn:"root"})}return n})();const Ne=new _.OlP("appBaseHref");let Ke=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,_.f3M)(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ne(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+ne(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+ne(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(ye),_.LFG(Ne,8))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Me=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+ne(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+ne(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(ye),_.LFG(Ne,8))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})(),We=(()=>{class n{constructor(t){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function oe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(gt(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ne(r))}normalize(t){return n.stripTrailingSlash(function pt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=ne;static#t=this.joinWithSlash=B;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(_.LFG(Ve))};static#i=this.\u0275prov=_.Yz7({token:n,factory:function(){return function Oe(){return new We((0,_.LFG)(Ve))}()},providedIn:"root"})}return n})();function gt(n){return n.replace(/\/index.html$/,"")}let Oo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new N_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Yp("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Yp("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(_.Y36(_.s_b),_.Y36(_.Rgc))};static#t=this.\u0275dir=_.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class N_{constructor(){this.$implicit=null,this.ngIf=null}}function Yp(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,_.AaK)(e)}'.`)}let jn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=_.oAB({type:n});static#n=this.\u0275inj=_.cJS({})}return n})();function js(n){return"server"===n}let wr=(()=>{class n{static#e=this.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new $s((0,_.LFG)(_e),window)})}return n})();class $s{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Vh extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class yc extends Vh{static makeCurrent(){!function J(n){ee||(ee=n)}(new yc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ig(){return vu=vu||document.querySelector("base"),vu?vu.getAttribute("href"):null}();return null==t?null:function V_(n){Jl=Jl||document.createElement("a"),Jl.setAttribute("href",n);const e=Jl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ma(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Jl,vu=null,sg=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();const td=new _.OlP("EventManagerPlugins");let og=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new _.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(td),_.LFG(_.R0b))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();class vc{constructor(e){this._doc=e}}const Iu="ng-app-id";let ag=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=js(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Iu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Iu),a;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Iu,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,c=a.get(r)?.elements;c?c.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(_e),_.LFG(_.AFp),_.LFG(_.Ojb,8),_.LFG(_.Lbi))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();const zo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cs=/%COMP%/g,rs=new _.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function gn(n,e){return e.map(t=>t.replace(Cs,n))}let qo=(()=>{class n{constructor(t,r,i,a,c,h,g,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=h,this.ngZone=g,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=js(h),this.defaultRenderer=new Ko(t,c,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_.ifc.ShadowDom&&(r={...r,encapsulation:_.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof lg?i.applyToHost(t):i instanceof Vr&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.doc,h=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case _.ifc.Emulated:a=new lg(g,v,r,this.appId,b,c,h,S);break;case _.ifc.ShadowDom:return new Zo(g,v,t,r,c,h,this.nonce,S);default:a=new Vr(g,v,r,b,c,h,S)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(og),_.LFG(ag),_.LFG(_.AFp),_.LFG(rs),_.LFG(_e),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(_.Ojb))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();class Ko{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(zo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(nd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(nd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new _.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=zo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=zo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function nd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Zo extends Ko{constructor(e,t,r,i,a,c,h,g){super(e,a,c,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=gn(i.id,i.styles);for(const b of v){const S=document.createElement("style");h&&S.setAttribute("nonce",h),S.textContent=b,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Vr extends Ko{constructor(e,t,r,i,a,c,h,g){super(e,a,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?gn(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class lg extends Vr{constructor(e,t,r,i,a,c,h,g){const v=i+"-"+r.id;super(e,t,r,a,c,h,g,v),this.contentAttr=function jh(n){return"_ngcontent-%COMP%".replace(Cs,n)}(v),this.hostAttr=function $h(n){return"_nghost-%COMP%".replace(Cs,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Aa=(()=>{class n extends vc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(_e))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();const dg=["alt","control","meta","shift"],Ii={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rd=(()=>{class n extends vc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),dg.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),c+=v+".")}),c+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=c,g}static matchEventFullKeyCode(t,r){let i=Ii[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),dg.forEach(c=>{c!==i&&(0,hg[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(_e))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();const Sr=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function At(){yc.makeCurrent()},multi:!0},{provide:_e,useFactory:function Gh(){return(0,_.RDi)(document),document},deps:[]}]),zh=new _.OlP(""),Br=[{provide:_.rWj,useClass:class ed{addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new _.vHH(5103,!1);return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(g){c=c||g,a--,0==a&&r(c)};i.forEach(g=>{g.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:_.lri,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]}],bs=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function Hh(){return new _.qLn},deps:[]},{provide:td,useClass:Aa,multi:!0,deps:[_e,_.R0b,_.Lbi]},{provide:td,useClass:rd,multi:!0,deps:[_e]},qo,ag,og,{provide:_.FYo,useExisting:qo},{provide:class qi{},useClass:sg,deps:[]},[]];let id=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(zh,12))};static#t=this.\u0275mod=_.oAB({type:n});static#n=this.\u0275inj=_.cJS({providers:[...bs,...Br],imports:[jn,_.hGG]})}return n})(),Pe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(_e))};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function sd(){return new Pe((0,_.LFG)(_e))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var An=O(6304),Ds=O(8645),vt=O(2096),ss=O(5592),mn=O(2459),Xo=O(3019),Jo=O(3093),Un=O(4664),mt=O(7398),zs=O(4552);class Rn extends Ds.x{constructor(e=1/0,t=1/0,r=zs.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)h=g;h&&r.splice(0,h+1)}}}var mo=O(3020);function _o(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,mo.B)({connector:()=>new Rn(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const wu=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Rr=O(9360),or=O(8251);function jr(n,e){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,or.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var $r=O(6232);function ai(n){return n<=0?()=>$r.E:(0,Rr.e)((e,t)=>{let r=0;e.subscribe((0,or.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ws(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Na(n=Rc){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Rc(){return new wu}var qs=O(2737);function yo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((i,a)=>n(i,a,r)):qs.y,ai(1),t?Ws(e):Na(()=>new wu))}var vo=O(4674);function Nc(n,e){return(0,vo.m)(e)?(0,Un.w)(()=>n,e):(0,Un.w)(()=>n)}var Ss=O(5137),Ht=O(2793);O(4097);var Y=O(5861),an=O(4303),ar=O(4537),M=O(9058),gr=O(7879);const As=new Map,ka={activated:!1,tokenObservers:[]},xc={initialized:!1,enabled:!1};function bn(n){return As.get(n)||Object.assign({},ka)}function ea(){return xc}const kc="https://content-firebaseappcheck.googleapis.com/v1",ta="exchangeDebugToken",rf={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ld{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Y.Z)(function*(){t.stop();try{t.pending=new M.BH,yield function Du(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new M.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Wt=new M.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Rs(n){if(!bn(n).activated)throw Wt.create("use-before-activation",{appName:n.name})}function Ma(n,e){return Au.apply(this,arguments)}function Au(){return(Au=(0,Y.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,a)}catch(S){throw Wt.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw Wt.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw Wt.create("fetch-parse-error",{originalErrorMessage:S?.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Wt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(g[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}})).apply(this,arguments)}function T(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${kc}/projects/${t}/apps/${r}:${ta}?key=${i}`,body:{debug_token:e}}}const D="firebase-app-check-database",N=1,F="firebase-app-check-store";let X=null;function mr(){return(mr=(0,Y.Z)(function*(n,e){const r=(yield function me(){return X||(X=new Promise((n,e)=>{try{const t=indexedDB.open(D,N);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Wt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(F,{keyPath:"compositeKey"})}}catch(t){e(Wt.create("storage-open",{originalErrorMessage:t?.message}))}}),X)}()).transaction(F,"readwrite"),a=r.objectStore(F).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=g=>{c()},r.onerror=g=>{var v;h(Wt.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const os=new gr.Yd("@firebase/app-check");function ci(n,e){return(0,M.hl)()?function qe(n,e){return function Mt(n,e){return mr.apply(this,arguments)}(function Wn(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{os.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hd(){return ea().enabled}function ra(){return uf.apply(this,arguments)}function uf(){return(uf=(0,Y.Z)(function*(){const n=ea();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const q_={error:"UNKNOWN_ERROR"};function tE(n){return M.US.encodeString(JSON.stringify(n),!1)}function wi(n){return fd.apply(this,arguments)}function fd(){return(fd=(0,Y.Z)(function*(n,e=!1){const t=n.app;Rs(t);const r=bn(t);let a,i=r.token;if(i&&!Mc(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Mc(g)?i=g:yield ci(t,void 0))}if(!e&&i&&Mc(i))return{token:i.token};let h,c=!1;if(hd()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ma(T(t,yield ra()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const g=yield r.exchangeTokenPromise;return yield ci(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield bn(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?os.warn(g.message):os.error(g),a=g}return i?a?h=Mc(i)?{token:i.token,internalError:a}:Y_(a):(h={token:i.token},r.token=i,yield ci(t,i)):h=Y_(a),c&&function Fa(n,e){const t=bn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function Nu(n){return K_.apply(this,arguments)}function K_(){return(K_=(0,Y.Z)(function*(n){const e=n.app;Rs(e);const{provider:t}=bn(e);if(hd()){const r=yield ra(),{token:i}=yield Ma(T(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function lf(n,e){const t=bn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Z_(n){const{app:e}=n,t=bn(e);let r=t.tokenRefresher;r||(r=function rb(n){const{app:e}=n;return new ld((0,Y.Z)(function*(){let r;if(r=bn(e).token?yield wi(n,!0):yield wi(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=bn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},rf.RETRIAL_MIN_WAIT,rf.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Mc(n){return n.expireTimeMillis-Date.now()>0}function Y_(n){return{token:tE(q_),error:n}}class pd{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bn(this.app);for(const t of e)lf(this.app,t.next);return Promise.resolve()}}const oE="app-check-internal";!function aE(){(0,an._registerComponent)(new ar.wA("app-check",n=>function df(n,e){return new pd(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oE).initialize()})),(0,an._registerComponent)(new ar.wA(oE,n=>function Ig(n){return{getToken:e=>wi(n,e),getLimitedUseToken:()=>Nu(n),addTokenListener:e=>function cf(n,e,t,r){const{app:i}=n,a=bn(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Mc(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),Z_(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Z_(n))}(n,"INTERNAL",e),removeTokenListener:e=>lf(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,an.registerVersion)("@firebase/app-check","0.8.0")}();class _d{constructor(){return(0,Ht.vb)("app-check")}}typeof window<"u"&&window;var xu=O(120);const $c=new _.OlP("angularfire2.auth.use-emulator"),ku=new _.OlP("angularfire2.auth.settings"),Rg=new _.OlP("angularfire2.auth.tenant-id"),Eo=new _.OlP("angularfire2.auth.langugage-code"),gf=new _.OlP("angularfire2.auth.use-device-language"),mf=new _.OlP("angularfire.auth.persistence"),Id=(n,e,t,r,i,a,c,h)=>(0,An.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),c)for(const[v,b]of Object.entries(c))g.settings[v]=b;return h&&g.setPersistence(h),g},[t,r,i,a,c,h]);let Ed=(()=>{class n{constructor(t,r,i,a,c,h,g,v,b,S,k,V){const K=new Ds.x,fe=(0,vt.of)(void 0).pipe((0,Jo.Q)(c.outsideAngular),(0,Un.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8977)))),(0,mt.U)(()=>(0,An.on)(t,a,r)),(0,mt.U)(Ee=>Id(Ee,a,h,v,b,S,g,k)),_o({bufferSize:1,refCount:!1}));if(js(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,vt.of)(null);else{fe.pipe(yo()).subscribe();const Ze=fe.pipe((0,Un.w)(lt=>lt.getRedirectResult().then(Pt=>Pt,()=>null)),Ht.iC,_o({bufferSize:1,refCount:!1})),at=fe.pipe((0,Un.w)(lt=>new ss.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>lt.onAuthStateChanged($t=>Pt.next($t),$t=>Pt.error($t),()=>Pt.complete()))})))),et=fe.pipe((0,Un.w)(lt=>new ss.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>lt.onIdTokenChanged($t=>Pt.next($t),$t=>Pt.error($t),()=>Pt.complete()))}))));this.authState=Ze.pipe(Nc(at),(0,Ss.R)(c.outsideAngular),(0,Jo.Q)(c.insideAngular)),this.user=Ze.pipe(Nc(et),(0,Ss.R)(c.outsideAngular),(0,Jo.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Un.w)(lt=>lt?(0,mn.D)(lt.getIdToken()):(0,vt.of)(null))),this.idTokenResult=this.user.pipe((0,Un.w)(lt=>lt?(0,mn.D)(lt.getIdTokenResult()):(0,vt.of)(null))),this.credential=(0,Xo.T)(Ze,K,this.authState.pipe(jr(lt=>!lt))).pipe((0,mt.U)(lt=>lt?.user?lt:null),(0,Ss.R)(c.outsideAngular),(0,Jo.Q)(c.insideAngular))}return(0,An.pX)(this,fe,a,{spy:{apply:(Ee,Ze,at)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&at.then(et=>K.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(An.Dh),_.LFG(An.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ht.HU),_.LFG($c,8),_.LFG(ku,8),_.LFG(Rg,8),_.LFG(Eo,8),_.LFG(gf,8),_.LFG(mf,8),_.LFG(_d,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iy=(()=>{class n{constructor(){xu.Z.registerVersion("angularfire",Ht.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[Ed]}),n})();var Ti=O(6321);class Ng{constructor(e,t){this._delegate=e,this.firebase=t,(0,an._addComponent)(e,new ar.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,an.deleteApp)(this._delegate)))}_getService(e,t=an._DEFAULT_ENTRY_NAME){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=an._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,an._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,an._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Yn=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),vf=function yf(){const n=function Mu(n){const e={},t={__esModule:!0,initializeApp:function a(v,b={}){const S=an.initializeApp(v,b);if((0,M.r3)(e,S.name))return e[S.name];const k=new n(S,t);return e[S.name]=k,k},app:i,registerVersion:an.registerVersion,setLogLevel:an.setLogLevel,onLog:an.onLog,apps:null,SDK_VERSION:an.SDK_VERSION,INTERNAL:{registerComponent:function h(v){const b=v.name,S=b.replace("-compat","");if(an._registerComponent(v)&&"PUBLIC"===v.type){const k=(V=i())=>{if("function"!=typeof V[S])throw Yn.create("invalid-app-argument",{appName:b});return V[S]()};void 0!==v.serviceProps&&(0,M.ZB)(k,v.serviceProps),t[S]=k,n.prototype[S]=function(...V){return this._getService.bind(this,b).apply(this,v.multipleInstances?V:[])}}return"PUBLIC"===v.type?t[S]:null},removeApp:function r(v){delete e[v]},useAsService:function g(v,b){return"serverAuth"===b?null:b},modularAPIs:an}};function i(v){if(!(0,M.r3)(e,v=v||an._DEFAULT_ENTRY_NAME))throw Yn.create("no-app",{appName:v});return e[v]}return t.default=t,Object.defineProperty(t,"apps",{get:function c(){return Object.keys(e).map(v=>e[v])}}),i.App=n,t}(Ng);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:yf,extendNamespace:function e(t){(0,M.ZB)(n,t)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),n}(),li=new gr.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){li.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&li.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const hE=vf;!function oy(n){(0,an.registerVersion)("@firebase/app-compat","0.2.19",n)}();const Pg="firebasestorage.googleapis.com",I="storageBucket";class A extends M.ZR{constructor(e,t,r=0){super(H(e),`Firebase Storage: ${t} (${H(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,A.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return H(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var P=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(P||{});function H(n){return"storage/"+n}function re(){return new A(P.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function cs(){return new A(P.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hc(){return new A(P.CANCELED,"User canceled the upload/download.")}function wd(){return new A(P.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ua(n){return new A(P.INVALID_ARGUMENT,n)}function kg(){return new A(P.APP_DELETED,"The Firebase app was deleted.")}function cy(n){return new A(P.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fu(n,e){return new A(P.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Wc(n){throw new A(P.INTERNAL_ERROR,"Internal error: "+n)}class di{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=di.makeFromUrl(e,t)}catch{return new di(e,"")}if(""===r.path)return r;throw function Gc(n){return new A(P.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(lt){lt.path_=decodeURIComponent(lt.path)}const S=t.replace(/[.]/g,"\\."),et=[{regex:h,indices:{bucket:1,path:3},postModify:function a(lt){"/"===lt.path.charAt(lt.path.length-1)&&(lt.path_=lt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===Pg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let lt=0;lt<et.length;lt++){const Pt=et[lt],$t=Pt.regex.exec(e);if($t){let io=$t[Pt.indices.path];io||(io=""),r=new di($t[Pt.indices.bucket],io),Pt.postModify(r);break}}if(null==r)throw function Lu(n){return new A(P.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class fE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Va(n){return"string"==typeof n||n instanceof String}function mE(n){return ly()&&n instanceof Blob}function ly(){return typeof Blob<"u"&&!(0,M.UG)()}function _E(n,e,t,r){if(r<e)throw Ua(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ua(`Invalid value for '${n}'. Expected ${t} or less.`)}function qc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Mg(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var If=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(If||{});function yE(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class ub{constructor(e,t,r,i,a,c,h,g,v,b,S,k=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=S,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,K)=>{this.resolve_=V,this.reject_=K,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function UN(n){return void 0!==n}(g)?a():a(g)}catch(g){c(g)}else if(null!==h){const g=re();g.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,g):g)}else c(i.canceled?this.appDelete_?kg():Hc():cs())};this.canceled_?t(0,new Og(!1,null,!0)):this.backoffId_=function pE(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function g(){return 2===h}let v=!1;function b(...Ee){v||(v=!0,e.apply(null,Ee))}function S(Ee){i=setTimeout(()=>{i=null,n(V,g())},Ee)}function k(){a&&clearTimeout(a)}function V(Ee,...Ze){if(v)return void k();if(Ee)return k(),void b.call(null,Ee,...Ze);if(g()||c)return k(),void b.call(null,Ee,...Ze);let et;r<64&&(r*=2),1===h?(h=2,et=0):et=1e3*(r+Math.random()),S(et)}let K=!1;function fe(Ee){K||(K=!0,k(),!v&&(null!==i?(Ee||(h=2),clearTimeout(i),S(0)):Ee||(h=1)))}return S(0),a=setTimeout(()=>{c=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new Og(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===If.NO_ERROR,g=a.getStatus();if(!h||yE(g,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===If.ABORT;return void r(!1,new Og(!1,null,b))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new Og(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function FN(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Og{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function hy(...n){const e=function IE(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(ly())return new Blob(n);throw new A(P.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Oi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wE{constructor(e,t){this.data=e,this.contentType=t||null}}function fy(n,e){switch(n){case Oi.RAW:return new wE(hb(e));case Oi.BASE64:case Oi.BASE64URL:return new wE(fb(n,e));case Oi.DATA_URL:return new wE(function pb(n){const e=new TE(n);return e.base64?fb(Oi.BASE64,e.rest):function VN(n){let e;try{e=decodeURIComponent(n)}catch{throw Fu(Oi.DATA_URL,"Malformed data URL.")}return hb(e)}(e.rest)}(e),function py(n){return new TE(n).contentType}(e))}throw re()}function hb(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function fb(n,e){switch(n){case Oi.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Fu(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Oi.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Fu(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function EE(n){if(typeof atob>"u")throw function uy(n){return new A(P.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Fu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class TE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Fu(Oi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function CE(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ls{constructor(e,t){let r=0,i="";mE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(mE(this.data_)){const i=function db(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ls(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ls(r,!0)}}static getBlob(...e){if(ly()){const t=e.map(r=>r instanceof ls?r.data_:r);return new ls(hy.apply(null,t))}{const t=e.map(c=>Va(c)?fy(Oi.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new ls(i,!0)}}uploadData(){return this.data_}}function bE(n){let e;try{e=JSON.parse(n)}catch{return null}return function ab(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function gb(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function DE(n,e){return e}class ds{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||DE}}let Uu=null;function Td(){if(Uu)return Uu;const n=[];n.push(new ds("bucket")),n.push(new ds("generation")),n.push(new ds("metageneration")),n.push(new ds("name","fullPath",!0));const t=new ds("name");t.xform=function e(a,c){return function gy(n){return!Va(n)||n.length<2?n:gb(n)}(c)},n.push(t);const i=new ds("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new ds("timeCreated")),n.push(new ds("updated")),n.push(new ds("md5Hash",null,!0)),n.push(new ds("cacheControl",null,!0)),n.push(new ds("contentDisposition",null,!0)),n.push(new ds("contentEncoding",null,!0)),n.push(new ds("contentLanguage",null,!0)),n.push(new ds("contentType",null,!0)),n.push(new ds("metadata","customMetadata",!0)),Uu=n,Uu}function SE(n,e,t){const r=bE(e);return null===r?null:function _b(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function mb(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new di(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function AE(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const vb="prefixes",Ib="items";class Li{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ns(n){if(!n)throw re()}function my(n,e){return function t(r,i){const a=SE(n,i,e);return Ns(null!==a),a}}function Fg(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dt(){return new A(P.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function ct(){return new A(P.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function He(n){return new A(P.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function qn(n){return new A(P.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function _y(n){const e=Fg(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function Ue(n){return new A(P.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function HN(n,e,t){const i=qc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Li(i,"GET",my(n,t),c);return h.errorHandler=_y(e),h}function Eb(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=qc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,b=new Li(h,"GET",function cL(n,e){return function t(r,i){const a=function $N(n,e,t){const r=bE(t);return null===r?null:function jN(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[vb])for(const i of t[vb]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new di(e,a));r.prefixes.push(c)}if(t[Ib])for(const i of t[Ib]){const a=n._makeStorageReference(new di(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ns(null!==a),a}}(n,e.bucket),v);return b.urlParams=a,b.errorHandler=Fg(e),b}function Ba(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function RE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Ug{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function yy(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ns(!1)}return Ns(!!t&&-1!==(e||["active"]).indexOf(t)),t}const NE={STATE_CHANGED:"state_changed"},Fi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Cb(n){switch(n){case"running":case"pausing":case"canceling":return Fi.RUNNING;case"paused":return Fi.PAUSED;case"success":return Fi.SUCCESS;case"canceled":return Fi.CANCELED;default:return Fi.ERROR}}class fL{constructor(e,t,r){if(function gE(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Cd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let bb=null;class KN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=If.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=If.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=If.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Wc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ZN extends KN{initXhr(){this.xhr_.responseType="text"}}function ia(){return bb?bb():new ZN}class Sb{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Td(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(P.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(yE(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=cs()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(P.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Tb(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=Ba(e,r,i),h={name:c.fullPath},g=qc(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=AE(c,t),K=new Li(g,"POST",function V(fe){let Ee;yy(fe);try{Ee=fe.getResponseHeader("X-Goog-Upload-URL")}catch{Ns(!1)}return Ns(Va(Ee)),Ee},n.maxUploadRetryTime);return K.urlParams=h,K.headers=b,K.body=S,K.errorHandler=Fg(e),K}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ia,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function dL(n,e,t,r){const g=new Li(t,"POST",function a(v){const b=yy(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ns(!1)}S||Ns(!1);const k=Number(S);return Ns(!isNaN(k)),new Ug(k,r.size(),"final"===b)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Fg(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ia,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Ug(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function hL(n,e,t,r,i,a,c,h){const g=new Ug(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function zc(){return new A(P.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let b=v;i>0&&(b=Math.min(b,i));const S=g.current;let V="";V=0===b?"finalize":v===b?"upload, finalize":"upload";const K={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${g.current}`},fe=r.slice(S,S+b);if(null===fe)throw wd();const et=new Li(t,"POST",function Ee(lt,Pt){const $t=yy(lt,["active","final"]),Kr=g.current+b,io=r.size();let xl;return xl="final"===$t?my(e,a)(lt,Pt):null,new Ug(Kr,io,"final"===$t,xl)},e.maxUploadRetryTime);return et.headers=K,et.body=fe.uploadData(),et.progressCallback=h||null,et.errorHandler=Fg(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(c,ia,i,a,!1);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=HN(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ia,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Ef(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let et="";for(let lt=0;lt<2;lt++)et+=Math.random().toString().slice(2);return et}();c["Content-Type"]="multipart/related; boundary="+g;const v=Ba(e,r,i),b=AE(v,t),V=ls.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===V)throw wd();const K={name:v.fullPath},fe=qc(a,n.host,n._protocol),Ze=n.maxUploadRetryTime,at=new Li(fe,"POST",my(n,t),Ze);return at.urlParams=K,at.headers=c,at.body=V.uploadData(),at.errorHandler=Fg(e),at}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ia,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Hc(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Cb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new fL(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Cb(this._state)){case Fi.SUCCESS:Cd(this._resolve.bind(null,this.snapshot))();break;case Fi.CANCELED:case Fi.ERROR:Cd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Cb(this._state)){case Fi.RUNNING:case Fi.PAUSED:e.next&&Cd(e.next.bind(e,this.snapshot))();break;case Fi.SUCCESS:e.complete&&Cd(e.complete.bind(e))();break;default:e.error&&Cd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class wo{constructor(e,t){this._service=e,this._location=t instanceof di?t:di.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wo(e,t)}get root(){const e=new di(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gb(this._location.path)}get storage(){return this._service}get parent(){const e=function BN(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new di(this._location.bucket,e);return new wo(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw cy(e)}}function Rb(n,e,t){return xE.apply(this,arguments)}function xE(){return(xE=(0,Y.Z)(function*(n,e,t){const i=yield kE(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Rb(n,e,i.nextPageToken))})).apply(this,arguments)}function kE(n,e){null!=e&&"number"==typeof e.maxResults&&_E("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Eb(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ia)}function Vg(n){n._throwIfRoot("getDownloadURL");const e=function GN(n,e,t){const i=qc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Li(i,"GET",function lL(n,e){return function t(r,i){const a=SE(n,i,e);return Ns(null!==a),function yb(n,e,t,r){const i=bE(e);if(null===i||!Va(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return qc("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+Mg({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=_y(e),h}(n.storage,n._location,Td());return n.storage.makeRequestWithTokens(e,ia).then(t=>{if(null===t)throw function ay(){return new A(P.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function wf(n,e){const t=function uL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new di(n._location.bucket,t);return new wo(n.storage,r)}function Ey(n,e){if(n instanceof wy){const t=n;if(null==t._bucket)throw function xg(){return new A(P.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+I+"' property when initializing the app?")}();const r=new wo(t,t._bucket);return null!=e?Ey(r,e):r}return void 0!==e?wf(n,e):n}function xb(n,e){if(e&&function Nb(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof wy)return function Pb(n,e){return new wo(n,e)}(n,e);throw Ua("To use ref(service, url), the first argument must be a Storage instance.")}return Ey(n,e)}function kb(n,e){const t=e?.[I];return null==t?null:di.makeFromBucketSpec(t,n)}class wy{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Pg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?di.makeFromBucketSpec(i,this._host):kb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?di.makeFromBucketSpec(this._url,e):kb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_E("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_E("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Y.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Y.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wo(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new fE(kg());{const c=function lb(n,e,t,r,i,a,c=!0){const h=Mg(n.urlParams),g=n.url+h,v=Object.assign({},n.headers);return function dy(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function vE(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function cb(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function Lg(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new ub(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Y.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Bg="@firebase/storage";function jg(n,e){return xb(n=(0,M.m9)(n),e)}function Fb(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new wy(t,r,i,e,an.SDK_VERSION)}!function Tf(){(0,an._registerComponent)(new ar.wA("storage",Fb,"PUBLIC").setMultipleInstances(!0)),(0,an.registerVersion)(Bg,"0.11.2",""),(0,an.registerVersion)(Bg,"0.11.2","esm2017")}();class Dy{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ub{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Dy(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Dy(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new Dy(c,this,this._ref)):{next:t.next?c=>t.next(new Dy(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Vb{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sa(e,this._service))}get items(){return this._delegate.items.map(e=>new sa(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sa{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function ja(n,e){return wf(n,e)}(this._delegate,e);return new sa(t,this.storage)}get root(){return new sa(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sa(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Ub(function Lb(n,e,t){return function Ab(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Sb(n,new ls(e),t)}(n=(0,M.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Oi.RAW,r){this._throwIfRoot("putString");const i=fy(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Ub(new Sb(this._delegate,new ls(i.data,!0),a),this)}listAll(){return function Cy(n){return function eP(n){const e={prefixes:[],items:[]};return Rb(n,e).then(()=>e)}(n=(0,M.m9)(n))}(this._delegate).then(e=>new Vb(e,this.storage))}list(e){return function ME(n,e){return kE(n=(0,M.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Vb(t,this.storage))}getMetadata(){return function bd(n){return function pL(n){n._throwIfRoot("getMetadata");const e=HN(n.storage,n._location,Td());return n.storage.makeRequestWithTokens(e,ia)}(n=(0,M.m9)(n))}(this._delegate)}updateMetadata(e){return function rP(n,e){return function gL(n,e){n._throwIfRoot("updateMetadata");const t=function zN(n,e,t,r){const a=qc(e.fullServerUrl(),n.host,n._protocol),h=AE(t,r),v=n.maxOperationRetryTime,b=new Li(a,"PATCH",my(n,r),v);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=_y(e),b}(n.storage,n._location,e,Td());return n.storage.makeRequestWithTokens(t,ia)}(n=(0,M.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function iP(n){return Vg(n=(0,M.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function OE(n){return function vn(n){n._throwIfRoot("deleteObject");const e=function WN(n,e){const r=qc(e.fullServerUrl(),n.host,n._protocol),h=new Li(r,"DELETE",function c(g,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=_y(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ia)}(n=(0,M.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw cy(e)}}class FE{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Bb(e))throw Ua("ref() expected a child path but got a URL, use refFromURL instead.");return new sa(jg(this._delegate,e),this)}refFromURL(e){if(!Bb(e))throw Ua("refFromURL() expected a full URL but got a child path, use ref() instead.");try{di.makeFromUrl(e,this._delegate.host)}catch{throw Ua("refFromUrl() expected a valid full URL but got an invalid one.")}return new sa(jg(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function by(n,e,t,r={}){!function Mb(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,M.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Bb(n){return/^[A-Za-z]+:\/\//.test(n)}function IL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new FE(t,r)}function aP(n){const e=function oP(n){return new ss.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function _f(n,e=Ti.z){return(0,Rr.e)((t,r)=>{let i=null,a=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function g(){const v=c+n,b=e.now();if(b<v)return i=this.schedule(void 0,v-b),void r.add(i);h()}t.subscribe((0,or.x)(r,v=>{a=v,c=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function VE(n){return{getDownloadURL:()=>(0,vt.of)(void 0).pipe(Ht.fc,(0,Un.w)(()=>n.getDownloadURL()),Ht.iC),getMetadata:()=>(0,vt.of)(void 0).pipe(Ht.fc,(0,Un.w)(()=>n.getMetadata()),Ht.iC),delete:()=>(0,mn.D)(n.delete()),child:e=>VE(n.child(e)),updateMetadata:e=>(0,mn.D)(n.updateMetadata(e)),put:(e,t)=>aP(n.put(e,t)),putString:(e,t,r)=>aP(n.putString(e,t,r)),list:e=>(0,mn.D)(n.list(e)),listAll:()=>(0,mn.D)(n.listAll())}}!function sP(n){const e={TaskState:Fi,TaskEvent:NE,StringFormat:Oi,Storage:FE,Reference:sa};n.INTERNAL.registerComponent(new ar.wA("storage-compat",IL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(hE);const Sy=new _.OlP("angularfire2.storageBucket"),uP=new _.OlP("angularfire2.storage.maxUploadRetryTime"),BE=new _.OlP("angularfire2.storage.maxOperationRetryTime"),jE=new _.OlP("angularfire2.storage.use-emulator");let Cf=(()=>{class n{constructor(t,r,i,a,c,h,g,v,b,S){const k=(0,An.on)(t,c,r);this.storage=(0,An.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const V=c.runOutsideAngular(()=>k.storage(i||void 0)),K=b;return K&&V.useEmulator(...K),g&&V.setMaxUploadRetryTime(g),v&&V.setMaxOperationRetryTime(v),V},[g,v])}ref(t){return VE(this.storage.ref(t))}refFromURL(t){return VE(this.storage.refFromURL(t))}upload(t,r,i){return VE(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(An.Dh),_.LFG(An.xv,8),_.LFG(Sy,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ht.HU),_.LFG(uP,8),_.LFG(BE,8),_.LFG(jE,8),_.LFG(_d,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})(),$g=(()=>{class n{constructor(){xu.Z.registerVersion("angularfire",Ht.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[Cf],imports:[$E]}),n})();var Kc=O(7537),Dd=O(4564);function Hg(...n){return function bf(){return(0,Kc.J)(1)}()((0,mn.D)(n,(0,Dd.yG)(n)))}function Sd(...n){const e=(0,Dd.yG)(n);return(0,Rr.e)((t,r)=>{(e?Hg(n,t,e):Hg(n,t)).subscribe(r)})}function Hb(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,or.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function $a(n,e){return(0,Rr.e)(function HE(n,e,t,r,i){return(a,c)=>{let h=t,g=e,v=0;a.subscribe((0,or.x)(c,b=>{const S=v++;g=h?n(g,b,S):(h=!0,b),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}(n,e,arguments.length>=2,!0))}var ot,Gb=O(3997),zb=(O(8977),O(3399)),Zc=O(7592),GE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},To={},zE=zE||{},jt=GE||self;function Ay(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var qE="closure_uid_"+(1e9*Math.random()>>>0),Wb=0;function KE(n,e,t){return n.call.apply(n.bind,arguments)}function Ry(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yi(n,e,t){return(Yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?KE:Ry).apply(null,arguments)}function Gg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ci(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Vu(){this.s=this.s,this.o=this.o}Vu.prototype.s=!1,Vu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function WE(n){Object.prototype.hasOwnProperty.call(n,qE)&&n[qE]||(n[qE]=++Wb)}(this)},Vu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Df(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Kb(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ay(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hr.prototype.h=function(){this.defaultPrevented=!0};var zg=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",()=>{},e),jt.removeEventListener("test",()=>{},e)}catch{}return n}();function Wg(n){return/^[\s\xa0]*$/.test(n)}function qg(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function Ha(n){return-1!=qg().indexOf(n)}function ZE(n){return ZE[" "](n),n}ZE[" "]=function(){};var YE,n,Zb=Ha("Opera"),Ad=Ha("Trident")||Ha("MSIE"),Ny=Ha("Edge"),Yb=Ny||Ad,Py=Ha("Gecko")&&!(-1!=qg().toLowerCase().indexOf("webkit")&&!Ha("Edge"))&&!(Ha("Trident")||Ha("MSIE"))&&!Ha("Edge"),Qb=-1!=qg().toLowerCase().indexOf("webkit")&&!Ha("Edge");function Xb(){var n=jt.document;return n?n.documentMode:void 0}e:{var xy="",QE=(n=qg(),Py?/rv:([^\);]+)(\)|;)/.exec(n):Ny?/Edge\/([\d\.]+)/.exec(n):Ad?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Qb?/WebKit\/(\S+)/.exec(n):Zb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(QE&&(xy=QE?QE[1]:""),Ad){var ky=Xb();if(null!=ky&&ky>parseFloat(xy)){YE=String(ky);break e}}YE=xy}var wL=jt.document&&Ad&&(Xb()||parseInt(YE,10))||void 0;function Sf(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Py){e:{try{ZE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:eD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sf.$.h.call(this)}}Ci(Sf,Hr);var eD={2:"touch",3:"pen",4:"mouse"};Sf.prototype.h=function(){Sf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var hs="closure_listenable_"+(1e6*Math.random()|0),tD=0;function TL(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++tD,this.fa=this.ia=!1}function Af(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ga(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nD(n){const e={};for(const t in n)e[t]=n[t];return e}const dP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rD(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<dP.length;a++)t=dP[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Rf(n){this.src=n,this.g={},this.h=0}function Co(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=qb(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Af(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function My(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Rf.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=My(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new TL(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var ew="closure_lm_"+(1e6*Math.random()|0),iD={};function hi(n,e,t,r,i){if(r&&r.once)return oD(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)hi(n,e[a],t,r,i);return null}return t=Ly(t),n&&n[hs]?n.O(e,t,Yc(r)?!!r.capture:!!r,i):sD(n,e,t,!1,r,i)}function sD(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Yc(i)?!!i.capture:!!i,h=rw(n);if(h||(n[ew]=h=new Rf(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function tw(){const e=uD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zg||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(nw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function oD(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)oD(n,e[a],t,r,i);return null}return t=Ly(t),n&&n[hs]?n.P(e,t,Yc(r)?!!r.capture:!!r,i):sD(n,e,t,!0,r,i)}function aD(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)aD(n,e[a],t,r,i);else r=Yc(r)?!!r.capture:!!r,t=Ly(t),n&&n[hs]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=My(a=n.g[e],t,r,i))&&(Af(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=rw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=My(e,t,r,i)),(t=-1<n?e[n]:null)&&Kg(t))}function Kg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[hs])Co(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(nw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rw(e))?(Co(t,n),0==t.h&&(t.src=null,e[ew]=null)):Af(n)}}}function nw(n){return n in iD?iD[n]:iD[n]="on"+n}function uD(n,e){if(n.fa)n=!0;else{e=new Sf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Kg(n),n=t.call(r,e)}return n}function rw(n){return(n=n[ew])instanceof Rf?n:null}var Oy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ly(n){return"function"==typeof n?n:(n[Oy]||(n[Oy]=function(e){return n.handleEvent(e)}),n[Oy])}function bi(){Vu.call(this),this.i=new Rf(this),this.S=this,this.J=null}function Ui(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var i=e;rD(e=new Hr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Fy(c,r,!0,e)&&i}if(i=Fy(c=e.g=n,r,!0,e)&&i,i=Fy(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Fy(c=e.g=t[a],r,!1,e)&&i}function Fy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var h=c.listener,g=c.la||c.src;c.ia&&Co(n.i,c),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}Ci(bi,Vu),bi.prototype[hs]=!0,bi.prototype.removeEventListener=function(n,e,t,r){aD(this,n,e,t,r)},bi.prototype.N=function(){if(bi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Af(t[r]);delete n.g[e],n.h--}}this.J=null},bi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},bi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Uy=jt.JSON.stringify;function Bu(){var n=xf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cD=new class Nf{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new hP,n=>n.reset());class hP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function dD(n){jt.setTimeout(()=>{throw n},0)}let Rd,ju=!1,xf=new class Pf{constructor(){this.h=this.g=null}add(e,t){const r=cD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},iw=()=>{const n=jt.Promise.resolve(void 0);Rd=()=>{n.then(hD)}};var hD=()=>{for(var n;n=Bu();){try{n.h.call(n.g)}catch(t){dD(t)}var e=cD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ju=!1};function Vy(n,e){bi.call(this),this.h=n||1,this.g=e||jt,this.j=Yi(this.qb,this),this.l=Date.now()}function sw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ow(n,e,t){if("function"==typeof n)t&&(n=Yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function fD(n){n.g=ow(()=>{n.g=null,n.i&&(n.i=!1,fD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ci(Vy,bi),(ot=Vy.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ui(this,"tick"),this.ga&&(sw(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){Vy.$.N.call(this),sw(this),delete this.g};class pD extends Vu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fD(this)}N(){super.N(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function By(n){Vu.call(this),this.h=n,this.g={}}Ci(By,Vu);var gD=[];function fP(n,e,t,r){Array.isArray(t)||(t&&(gD[0]=t.toString()),t=gD);for(var i=0;i<t.length;i++){var a=hi(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function pP(n){Ga(n.g,function(e,t){this.g.hasOwnProperty(t)&&Kg(e)},n),n.g={}}function Zg(){this.g=!0}function $u(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _D(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Uy(t)}catch{return e}}(n,t)+(r?" "+r:"")})}By.prototype.N=function(){By.$.N.call(this),pP(this)},By.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zg.prototype.Ea=function(){this.g=!1},Zg.prototype.info=function(){};var Qc={},yD=null;function Yg(){return yD=yD||new bi}function aw(n){Hr.call(this,Qc.Ta,n)}function Lt(n){const e=Yg();Ui(e,new aw(e))}function uw(n,e){Hr.call(this,Qc.STAT_EVENT,n),this.stat=e}function Qi(n){const e=Yg();Ui(e,new uw(e,n))}function Nd(n,e){Hr.call(this,Qc.Ua,n),this.size=e}function kf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}Qc.Ta="serverreachability",Ci(aw,Hr),Qc.STAT_EVENT="statevent",Ci(uw,Hr),Qc.Ua="timingevent",Ci(Nd,Hr);var jy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xc(){}function Mf(){}Xc.prototype.h=null;var em,Of={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xg(){Hr.call(this,"d")}function Jg(){Hr.call(this,"c")}function tm(){}function Pd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new By(this),this.P=gP,this.V=new Vy(n=Yb?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vD}function vD(){this.i=null,this.g="",this.h=!1}Ci(Xg,Hr),Ci(Jg,Hr),Ci(tm,Xc),tm.prototype.g=function(){return new XMLHttpRequest},tm.prototype.i=function(){return{}},em=new tm;var gP=45e3,cw={},nm={};function lw(n,e,t){n.L=1,n.v=qy(za(e)),n.s=t,n.S=!0,ID(n,null)}function ID(n,e){n.G=Date.now(),Lf(n),n.A=za(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),IP(t.i,"t",r),n.C=0,t=n.l.J,n.h=new vD,n.g=HD(n.l,t?e:null,!n.s),0<n.O&&(n.M=new pD(Yi(n.Pa,n,n.g),n.O)),fP(n.U,n.g,"readystatechange",n.nb),e=n.I?nD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Lt(),function mD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),g=0;g<h.length;g++){var v=h[g].split("=");if(1<v.length){var b=v[0];v=v[1];var S=b.split("_");c=2<=S.length&&"type"==S[1]?c+(b+"=")+v+"&":c+(b+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function ED(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function wD(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=TD(n,t),i==nm){4==e&&(n.o=4,Qi(14),r=!1),$u(n.j,n.m,null,"[Incomplete Response]");break}if(i==cw){n.o=4,Qi(15),$u(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$u(n.j,n.m,i,null),dw(n,i)}ED(n)&&i!=nm&&i!=cw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),rv(e),e.M=!0,Qi(11))):($u(n.j,n.m,t,"[Invalid Chunked Response]"),xd(n),Vi(n))}function TD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?nm:(t=Number(e.substring(t,r)),isNaN(t)?cw:(r+=1)+t>e.length?nm:(e=e.slice(r,r+t),n.C=r+t,e))}function Lf(n){n.Y=Date.now()+n.P,CD(n,n.P)}function CD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kf(Yi(n.lb,n),e)}function Hy(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function Vi(n){0==n.l.H||n.J||bP(n.l,n)}function xd(n){Hy(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,sw(n.V),pP(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function dw(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||_w(t.i,n)))if(!n.K&&_w(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;iv(t),tv(t)}ww(t),Qi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=kf(Yi(t.ib,t),6e3));if(1>=RD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Jc(t,11)}else if((n.K||t.g==n)&&iv(t),!Wg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const b=v[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const S=v[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const k=v[5];null!=k&&"number"==typeof k&&0<k&&(t.L=r=1.5*k,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const K=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var a=r.i;a.g||-1==K.indexOf("spdy")&&-1==K.indexOf("quic")&&-1==K.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(om(a,a.h),a.h=null))}if(r.F){const fe=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.Da=fe,Qn(r.I,r.F,fe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=fm(r,r.J?r.pa:null,r.Y),c.K){ND(r.i,c);var h=c,g=r.L;g&&h.setTimeout(g),h.B&&(Hy(h),Lf(h)),r.g=c}else $D(r);0<t.j.length&&nv(t)}else"stop"!=v[0]&&"close"!=v[0]||Jc(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Jc(t,7):ev(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Lt()}catch{}}function fw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ay(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function hw(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ay(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function DL(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ay(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ot=Pd.prototype).setTimeout=function(n){this.P=n},ot.nb=function(n){n=n.target;const e=this.M;e&&3==qa(n)?e.l():this.Pa(n)},ot.Pa=function(n){try{if(n==this.g)e:{const b=qa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||Yb||this.g&&(this.h.h||this.g.ja()||UD(this.g)))){this.J||4!=b||7==e||Lt(),Hy(this);var t=this.g.da();this.ca=t;t:if(ED(this)){var r=UD(this.g);n="";var i=r.length,a=4==qa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xd(this),Vi(this);var c="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function CL(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wg(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Qi(12),xd(this),Vi(this);break e}$u(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dw(this,t)}this.S?(wD(this,b,c),Yb&&this.i&&3==b&&(fP(this.U,this.V,"tick",this.mb),this.V.start())):($u(this.j,this.m,c,null),dw(this,c)),4==b&&xd(this),this.i&&!this.J&&(4==b?bP(this.l,this):(this.i=!1,Lf(this)))}else(function TP(n){const e={};n=(n.g&&2<=qa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Wg(n[r]))continue;var t=lD(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function JE(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Qi(12)):(this.o=0,Qi(13)),xd(this),Vi(this)}}}catch{}},ot.mb=function(){if(this.g){var n=qa(this.g),e=this.g.ja();this.C<e.length&&(Hy(this),wD(this,n,e),this.i&&4!=n&&Lf(this))}},ot.cancel=function(){this.J=!0,xd(this)},ot.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function bL(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Lt(),Qi(17)),xd(this),this.o=2,Vi(this)):CD(this,this.Y-n)};var bD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof kd){this.h=n.h,Gy(this,n.j),this.s=n.s,this.g=n.g,zy(this,n.m),this.l=n.l;var e=n.i,t=new Ff;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Wy(this,t),this.o=n.o}else n&&(e=String(n).match(bD))?(this.h=!1,Gy(this,e[1]||"",!0),this.s=rm(e[2]||""),this.g=rm(e[3]||"",!0),zy(this,e[4]),this.l=rm(e[5]||"",!0),Wy(this,e[6]||"",!0),this.o=rm(e[7]||"")):(this.h=!1,this.i=new Ff(null,this.h))}function za(n){return new kd(n)}function Gy(n,e,t){n.j=t?rm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Wy(n,e,t){e instanceof Ff?(n.i=e,function SD(n,e){e&&!n.j&&(Hu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(sm(this,r),IP(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=im(e,DD)),n.i=new Ff(e,n.h))}function Qn(n,e,t){n.i.set(e,t)}function qy(n){return Qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function im(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_P),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _P(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(im(e,oa,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(im(e,oa,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(im(t,"/"==t.charAt(0)?yP:pw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",im(t,vP)),n.join("")};var oa=/[#\/\?@]/g,pw=/[#\?:]/g,yP=/[#\?]/g,DD=/[#\?@]/g,vP=/#/g;function Ff(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Hu(n){n.g||(n.g=new Map,n.h=0,n.i&&function mP(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function sm(n,e){Hu(n),e=Md(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Ky(n,e){return Hu(n),e=Md(n,e),n.g.has(e)}function IP(n,e,t){sm(n,e),0<t.length&&(n.i=null,n.g.set(Md(n,e),Df(t)),n.h+=t.length)}function Md(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function gw(n){this.l=n||mw,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ka&&jt.g.Ka()&&jt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Ff.prototype).add=function(n,e){Hu(this),this.i=null,n=Md(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Hu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.ta=function(){Hu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ot.Z=function(n){Hu(this);let e=[];if("string"==typeof n)Ky(this,n)&&(e=e.concat(this.g.get(Md(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Hu(this),this.i=null,Ky(this,n=Md(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var mw=10;function Wa(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RD(n){return n.h?1:n.g?n.g.size:0}function _w(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function om(n,e){n.g?n.g.add(e):n.h=e}function ND(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function yw(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Df(n.i)}gw.prototype.cancel=function(){if(this.i=yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var EP=class{stringify(n){return jt.JSON.stringify(n,void 0)}parse(n){return jt.JSON.parse(n,void 0)}};function Zy(){this.g=new EP}function am(n,e,t){const r=t||"";try{fw(n,function(i,a){let c=i;Yc(i)&&(c=Uy(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Od(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yy(n){this.l=n.fc||null,this.j=n.ob||!1}function Qy(n,e){bi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Xy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ci(Yy,Xc),Yy.prototype.g=function(){return new Qy(this.l,this.j)},Yy.prototype.i=function(n){return function(){return n}}({}),Ci(Qy,bi);var Xy=0;function vw(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function um(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cm(n)}function cm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=Qy.prototype).open=function(n,e){if(this.readyState!=Xy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cm(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||jt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,um(this)),this.readyState=Xy},ot.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cm(this)),this.g&&(this.readyState=3,cm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vw(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?um(this):cm(this),3==this.readyState&&vw(this)}},ot.Za=function(n){this.g&&(this.response=this.responseText=n,um(this))},ot.Ya=function(n){this.g&&(this.response=n,um(this))},ot.ka=function(){this.g&&um(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xD=jt.JSON.parse;function _r(n){bi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Uf,this.L=this.M=!1}Ci(_r,bi);var Uf="",wP=/^https?$/i,kD=["POST","PUT"];function OD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,LD(n),Jy(n)}function LD(n){n.F||(n.F=!0,Ui(n,"complete"),Ui(n,"error"))}function Vf(n){if(n.h&&typeof zE<"u"&&(!n.C[1]||4!=qa(n)||2!=n.da()))if(n.v&&4==qa(n))ow(n.La,0,n);else if(Ui(n,"readystatechange"),4==qa(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(bD)[1]||null;!i&&jt.self&&jt.self.location&&(i=jt.self.location.protocol.slice(0,-1)),r=!wP.test(i?i.toLowerCase():"")}t=r}if(t)Ui(n,"complete"),Ui(n,"success");else{n.m=6;try{var a=2<qa(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",LD(n)}}finally{Jy(n)}}}function Jy(n,e){if(n.g){FD(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ui(n,"ready");try{t.onreadystatechange=r}catch{}}}function FD(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function qa(n){return n.g?n.g.readyState:0}function UD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Uf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function VD(n){let e="";return Ga(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Iw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=VD(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Qn(n,e,t))}function lm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ew(n){this.Ga=0,this.j=[],this.l=new Zg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=lm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=lm("baseRetryDelayMs",5e3,n),this.hb=lm("retryDelaySeedMs",1e4,n),this.eb=lm("forwardChannelMaxRetries",2,n),this.xa=lm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new gw(n&&n.concurrentRequestLimit),this.Ja=new Zy,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ev(n){if(dm(n),3==n.H){var e=n.W++,t=za(n.I);if(Qn(t,"SID",n.K),Qn(t,"RID",e),Qn(t,"TYPE","terminate"),hm(n,t),(e=new Pd(n,n.l,e)).L=2,e.v=qy(za(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon)try{t=jt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=HD(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Lf(e)}DP(n)}function tv(n){n.g&&(rv(n),n.g.cancel(),n.g=null)}function dm(n){tv(n),n.u&&(jt.clearTimeout(n.u),n.u=null),iv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function nv(n){if(!Wa(n.i)&&!n.m){n.m=!0;var e=n.Na;Rd||iw(),ju||(Rd(),ju=!0),xf.add(e,n),n.C=0}}function BD(n,e){var t;t=e?e.m:n.W++;const r=za(n.I);Qn(r,"SID",n.K),Qn(r,"RID",t),Qn(r,"AID",n.V),hm(n,r),n.o&&n.s&&Iw(r,n.o,n.s),t=new Pd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=jD(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),om(n.i,t),lw(t,r,e)}function hm(n,e){n.na&&Ga(n.na,function(t,r){Qn(e,r,t)}),n.h&&fw({},function(t,r){Qn(e,r,t)})}function jD(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Yi(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let v=i[g].g;const b=i[g].map;if(v-=a,0>v)a=Math.max(0,i[g].g-100),h=!1;else try{am(b,c,"req"+v+"_")}catch{r&&r(b)}}if(h){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function $D(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Rd||iw(),ju||(Rd(),ju=!0),xf.add(e,n),n.A=0}}function ww(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kf(Yi(n.Ma,n),Cw(n,n.A)),n.A++,0))}function rv(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function Tw(n){n.g=new Pd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=za(n.wa);Qn(e,"RID","rpc"),Qn(e,"SID",n.K),Qn(e,"AID",n.V),Qn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Qn(e,"TO",n.qa),Qn(e,"TYPE","xmlhttp"),hm(n,e),n.o&&n.s&&Iw(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=qy(za(e)),t.s=null,t.S=!0,ID(t,n)}function iv(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function bP(n,e){var t=null;if(n.g==e){iv(n),rv(n),n.g=null;var r=2}else{if(!_w(n.i,e))return;t=e.F,ND(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ui(r=Yg(),new Nd(r,t)),nv(n)}else $D(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function CP(n,e){return!(RD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kf(Yi(n.Na,n,e),Cw(n,n.C)),n.C++,0)))}(n,e)||2==r&&ww(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Jc(n,5);break;case 4:Jc(n,10);break;case 3:Jc(n,6);break;default:Jc(n,2)}}function Cw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Jc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Yi(n.pb,n);t||(t=new kd("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||Gy(t,"https"),qy(t)),function PD(n,e){const t=new Zg;if(jt.Image){const r=new Image;r.onload=Gg(Od,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Gg(Od,t,r,"TestLoadImage: error",!1,e),r.onabort=Gg(Od,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gg(Od,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qi(2);n.H=0,n.h&&n.h.za(e),DP(n),dm(n)}function DP(n){if(n.H=0,n.ma=[],n.h){const e=yw(n.i);(0!=e.length||0!=n.j.length)&&(Kb(n.ma,e),Kb(n.ma,n.j),n.i.i.length=0,Df(n.j),n.j.length=0),n.h.ya()}}function fm(n,e,t){var r=t instanceof kd?za(t):new kd(t);if(""!=r.g)e&&(r.g=e+"."+r.g),zy(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new kd(null);r&&Gy(a,r),e&&(a.g=e),i&&zy(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Qn(r,t,e),Qn(r,"VER",n.ra),hm(n,r),r}function HD(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _r(t&&n.Ha&&!n.va?new Yy({ob:!0}):n.va)).Oa(n.J),e}function GD(){}function Bf(){if(Ad&&!(10<=Number(wL)))throw Error("Environmental error: no available transport.")}function Zs(n,e){bi.call(this),this.g=new Ew(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Wg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gr(this)}function aa(n){Xg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jf(){Jg.call(this),this.status=1}function Gr(n){this.g=n}function Ps(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xs(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function In(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(ot=_r.prototype).Oa=function(n){this.M=n},ot.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():em.g(),this.C=function $y(n){return n.h||(n.h=n.i())}(this.u?this.u:em),this.g.onreadystatechange=Yi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void OD(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=qb(kD,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{FD(this),0<this.B&&((this.L=function MD(n){return Ad&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yi(this.ua,this)):this.A=ow(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){OD(this,a)}},ot.ua=function(){typeof zE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ui(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ui(this,"complete"),Ui(this,"abort"),Jy(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jy(this,!0)),_r.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?Vf(this):this.kb())},ot.kb=function(){Vf(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<qa(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xD(e)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=Ew.prototype).ra=8,ot.H=1,ot.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Pd(this,this.l,n);let a=this.s;if(this.U&&(a?(a=nD(a),rD(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jD(this,i,e),Qn(t=za(this.I),"RID",n),Qn(t,"CVER",22),this.F&&Qn(t,"X-HTTP-Session-Id",this.F),hm(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(VD(a)))+"&"+e:this.o&&Iw(t,this.o,a)),om(this.i,i),this.bb&&Qn(t,"TYPE","init"),this.P?(Qn(t,"$req",e),Qn(t,"SID","null"),i.aa=!0,lw(i,t,null)):lw(i,t,e),this.H=2}}else 3==this.H&&(n?BD(this,n):0==this.j.length||Wa(this.i)||BD(this))},ot.Ma=function(){if(this.u=null,Tw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kf(Yi(this.jb,this),n)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qi(10),tv(this),Tw(this))},ot.ib=function(){null!=this.v&&(this.v=null,tv(this),ww(this),Qi(19))},ot.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Qi(2)):(this.l.info("Failed to ping google.com"),Qi(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=GD.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},Bf.prototype.g=function(n,e){return new Zs(n,e)},Ci(Zs,bi),Zs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Qi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=fm(n,null,n.Y),nv(n)},Zs.prototype.close=function(){ev(this.g)},Zs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Uy(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&nv(e)},Zs.prototype.N=function(){this.g.h=null,delete this.j,ev(this.g),delete this.g,Zs.$.N.call(this)},Ci(aa,Xg),Ci(jf,Jg),Ci(Gr,GD),Gr.prototype.Ba=function(){Ui(this.g,"a")},Gr.prototype.Aa=function(n){Ui(this.g,new aa(n))},Gr.prototype.za=function(n){Ui(this.g,new jf)},Gr.prototype.ya=function(){Ui(this.g,"b")},Ci(Ps,function Ld(){this.blockSize=-1}),Ps.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ps.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)xs(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){xs(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){xs(this,r),i=0;break}}this.h=i,this.i+=e},Ps.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var $f={};function el(n){return-128<=n&&128>n?function lP(n,e){var t=$f;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new In([0|e],0>e?-1:0)}):new In([0|n],0>n?-1:0)}function fs(n){if(isNaN(n)||!isFinite(n))return ua;if(0>n)return Di(fs(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=tl;return new In(e,0)}var tl=4294967296,ua=el(0),nl=el(1),Ud=el(16777216);function ks(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ys(n){return-1==n.h}function Di(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new In(t,~n.h).add(nl)}function pm(n,e){return n.add(Di(e))}function gm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Hf(n,e){this.g=n,this.h=e}function mm(n,e){if(ks(e))throw Error("division by zero");if(ks(n))return new Hf(ua,ua);if(Ys(n))return e=mm(Di(n),e),new Hf(Di(e.g),Di(e.h));if(Ys(e))return e=mm(n,Di(e)),new Hf(Di(e.g),e.h);if(30<n.g.length){if(Ys(n)||Ys(e))throw Error("slowDivide_ only works with positive integers.");for(var t=nl,r=e;0>=r.X(n);)t=bw(t),r=bw(r);var i=Vd(t,1),a=Vd(r,1);for(r=Vd(r,2),t=Vd(t,2);!ks(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=Vd(r,1),t=Vd(t,1)}return e=pm(n,i.R(e)),new Hf(i,e)}for(i=ua;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=fs(t)).R(e);Ys(c)||0<c.X(n);)c=(a=fs(t-=r)).R(e);ks(a)&&(a=nl),i=i.add(a),n=pm(n,c)}return new Hf(i,n)}function bw(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new In(t,n.h)}function Vd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new In(i,n.h)}(ot=In.prototype).ea=function(){if(Ys(this))return-Di(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:tl+r)*e,e*=tl}return n},ot.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ks(this))return"0";if(Ys(this))return"-"+Di(this).toString(n);for(var e=fs(Math.pow(n,6)),t=this,r="";;){var i=mm(t,e).g,a=((0<(t=pm(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ks(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},ot.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ot.X=function(n){return Ys(n=pm(this,n))?-1:ks(n)?0:1},ot.abs=function(){return Ys(this)?Di(this):this},ot.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new In(t,-2147483648&t[t.length-1]?-1:0)},ot.R=function(n){if(ks(this)||ks(n))return ua;if(Ys(this))return Ys(n)?Di(this).R(Di(n)):Di(Di(this).R(n));if(Ys(n))return Di(this.R(Di(n)));if(0>this.X(Ud)&&0>n.X(Ud))return fs(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),h=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=c*g,gm(t,2*r+2*i),t[2*r+2*i+1]+=a*g,gm(t,2*r+2*i+1),t[2*r+2*i+1]+=c*h,gm(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,gm(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new In(t,0)},ot.gb=function(n){return mm(this,n).h},ot.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new In(t,this.h&n.h)},ot.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new In(t,this.h|n.h)},ot.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new In(t,this.h^n.h)},Bf.prototype.createWebChannel=Bf.prototype.g,Zs.prototype.send=Zs.prototype.u,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,jy.NO_ERROR=0,jy.TIMEOUT=8,jy.HTTP_ERROR=6,Qg.COMPLETE="complete",Mf.EventType=Of,Of.OPEN="a",Of.CLOSE="b",Of.ERROR="c",Of.MESSAGE="d",bi.prototype.listen=bi.prototype.O,_r.prototype.listenOnce=_r.prototype.P,_r.prototype.getLastError=_r.prototype.Sa,_r.prototype.getLastErrorCode=_r.prototype.Ia,_r.prototype.getStatus=_r.prototype.da,_r.prototype.getResponseJson=_r.prototype.Wa,_r.prototype.getResponseText=_r.prototype.ja,_r.prototype.send=_r.prototype.ha,_r.prototype.setWithCredentials=_r.prototype.Oa,Ps.prototype.digest=Ps.prototype.l,Ps.prototype.reset=Ps.prototype.reset,Ps.prototype.update=Ps.prototype.j,In.prototype.add=In.prototype.add,In.prototype.multiply=In.prototype.R,In.prototype.modulo=In.prototype.gb,In.prototype.compare=In.prototype.X,In.prototype.toNumber=In.prototype.ea,In.prototype.toString=In.prototype.toString,In.prototype.getBits=In.prototype.D,In.fromNumber=fs,In.fromString=function Fd(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Di(Fd(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=fs(Math.pow(e,8)),r=ua,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=fs(Math.pow(e,a)),r=r.R(a).add(fs(c))):r=(r=r.R(t)).add(fs(c))}return r};var zD=To.createWebChannelTransport=function(){return new Bf},Dw=To.getStatEventTarget=function(){return Yg()},Sw=To.ErrorCode=jy,SL=To.EventType=Qg,AL=To.Event=Qc,WD=To.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},SP=To.FetchXmlHttpFactory=Yy,Aw=To.WebChannel=Mf,AP=To.XhrIo=_r,RL=To.Md5=Ps,Gf=To.Integer=In;const qD="@firebase/firestore";class Si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");let rl="9.23.0";const bo=new gr.Yd("@firebase/firestore");function _m(){return bo.logLevel}function Be(n,...e){if(bo.logLevel<=gr.in.DEBUG){const t=e.map(Rw);bo.debug(`Firestore (${rl}): ${n}`,...t)}}function Xn(n,...e){if(bo.logLevel<=gr.in.ERROR){const t=e.map(Rw);bo.error(`Firestore (${rl}): ${n}`,...t)}}function Qs(n,...e){if(bo.logLevel<=gr.in.WARN){const t=e.map(Rw);bo.warn(`Firestore (${rl}): ${n}`,...t)}}function Rw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: `+n;throw Xn(e),new Error(e)}function wt(n,e){n||ut()}function it(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends M.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ym{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Si.UNAUTHENTICATED))}shutdown(){}}class NP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PP{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Nr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=c;e.enqueueRetryable((0,Y.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Nr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new ym(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Si(e)}}class Nw{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class xP{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Nw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kP{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new Pw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function KD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xw{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=KD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function zf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ZD(n){return n+"\0"}class cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new cr(0,0))}static max(){return new Tt(new cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bd{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends Bd{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const MP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends Bd{construct(e,t,r){return new Jn(e,t,r)}static isValidIdentifier(e){return MP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new ke(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ke(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new ke(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(t)}static emptyPath(){return new Jn([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(un.fromString(e))}static fromName(e){return new Je(un.fromString(e).popFirst(5))}static empty(){return new Je(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new un(e.slice()))}}class Wf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ov(n){return n.fields.find(e=>2===e.kind)}function jd(n){return n.fields.filter(e=>2!==e.kind)}Wf.UNKNOWN_ID=-1;class av{constructor(e,t){this.fieldPath=e,this.kind=t}}class $d{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $d(0,Xs.min())}}function Mw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new cr(t+1,0):new cr(t,r));return new Xs(i,Je.empty(),e)}function Ow(n){return new Xs(n.readTime,n.key,-1)}class Xs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xs(Tt.min(),Je.empty(),-1)}static max(){return new Xs(Tt.max(),Je.empty(),-1)}}function Lw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const Fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Gu(n){return vm.apply(this,arguments)}function vm(){return vm=(0,Y.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==Fw)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),vm.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},g=>r(g))}),c=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(b=>{c[v]=b,++h,h===a&&r(c)},b=>i(b))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class cv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Nr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new qf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Im(r.target.error);this.v.reject(new qf(e,i))}}static open(e,t,r,i){try{return new cv(t,e.transaction(i,r))}catch(a){throw new qf(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new LP(t)}}class Do{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Do.S((0,M.z$)())&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Hd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,M.hl)())return!1;if(Do.C())return!0;const e=(0,M.z$)(),t=Do.S(e),r=0<t&&t<10,i=Do.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Y.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new qf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new ke(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new qf(e,h))},a.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Y.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.$(e);const g=cv.open(a.db,e,c?"readonly":"readwrite",r),v=i(g).next(b=>(g.P(),b)).catch(b=>(g.abort(b),ue.reject(b))).toPromise();return v.catch(()=>{}),yield g.R,v}catch(g){const v=g,b="FirebaseError"!==v.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class YD{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Hd(this.L.delete())}}class qf extends ke{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function il(n){return"IndexedDbTransactionError"===n.name}class LP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hd(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Hd(this.store.add(e))}get(e){return Hd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Hd(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Hd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const c=Im(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}W(e,t){const r=[];return new ue((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const g=new YD(h),v=t(h.primaryKey,h.value,g);if(v instanceof ue){const b=v.catch(S=>(g.done(),ue.reject(S)));r.push(b)}g.isDone?i():null===g.K?h.continue():h.continue(g.K)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hd(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Im(r.target.error);t(i)}})}let QD=!1;function Im(n){const e=Do.S((0,M.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QD||(QD=!0,setTimeout(()=>{throw r},0)),r}}return n}class Uw{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Y.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){il(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Gu(r)}yield t.et(6e4)}))}}class XD{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Y.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Be("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(h=>{i-=h,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=Ow(a);Lw(c,r)>0&&(r=c)}),new Xs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ms=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Kf(n){return null==n}function Zf(n){return 0===n&&1/n==-1/0}function Vw(n){return"number"==typeof n&&Number.isInteger(n)&&!Zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bw(e)),e=JD(n.get(t),e);return Bw(e)}function JD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Bw(n){return n+"\x01\x01"}function Js(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ut(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ut()}a=c+2}return new un(r)}const zu=["userId","batchId"];function lv(n,e){return[n,Bi(e)]}function eS(n,e,t){return[n,Bi(e),t]}const jw={},Gd=["prefixPath","collectionGroup","readTime","documentId"],$w=["prefixPath","collectionGroup","documentId"],FP=["collectionGroup","readTime","prefixPath","documentId"],Hw=["canonicalId","targetId"],xL=["targetId","path"],kL=["path","targetId"],UP=["collectionId","parent"],VP=["indexId","uid"],tS=["uid","sequenceNumber"],BP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fi=["indexId","uid","orderedDocumentKey"],nS=["userId","collectionPath","documentId"],jP=["userId","collectionPath","largestBatchId"],$P=["userId","collectionGroup","largestBatchId"],Gw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HP=[...Gw,"documentOverlays"],zw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ww=zw,Yf=[...Ww,"indexConfiguration","indexState","indexEntries"];class qw extends uv{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ai(n,e){const t=it(n);return Do.M(t.ht,e)}function Kw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class er{constructor(e,t){this.comparator=e,this.root=t||Ri.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Em(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Em(this.root,e,this.comparator,!1)}getReverseIterator(){return new Em(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Em(this.root,e,this.comparator,!0)}}class Em{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ri{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ri.RED,this.left=i??Ri.EMPTY,this.right=a??Ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ri(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ri.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1,Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rS(this.data.getIterator())}getIteratorFrom(e){return new rS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class rS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qf(n){return n.hasNext()?n.getNext():void 0}class yr{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new yr([])}unionWith(e){let t=new _n(Jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class So extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new So("Invalid base64 string: "+i):i}}(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const iS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ol(n){if(wt(!!n),"string"==typeof n){let e=0;const t=iS.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(n.seconds),nanos:Pr(n.nanos)}}function Pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wu(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function dv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xf(n){const e=n.mapValue.fields.__previous_value__;return dv(e)?Xf(e):e}function qu(n){const e=ol(n.mapValue.fields.__local_write_time__.timestampValue);return new cr(e.seconds,e.nanos)}class GP{constructor(e,t,r,i,a,c,h,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=v}}class Ku{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ku("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ku&&e.projectId===this.projectId&&e.database===this.database}}const al={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hv={nullValue:"NULL_VALUE"};function Zu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dv(n)?4:Jw(n)?9007199254740991:10:ut()}function la(n,e){if(n===e)return!0;const t=Zu(n);if(t!==Zu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qu(n).isEqual(qu(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ol(r.timestampValue),c=ol(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Wu(n.bytesValue).isEqual(Wu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pr(r.geoPointValue.latitude)===Pr(i.geoPointValue.latitude)&&Pr(r.geoPointValue.longitude)===Pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pr(r.integerValue)===Pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Pr(r.doubleValue),c=Pr(i.doubleValue);return a===c?Zf(a)===Zf(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return zf(n.arrayValue.values||[],e.arrayValue.values||[],la);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Kw(a)!==Kw(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!la(a[h],c[h])))return!1;return!0}(n,e);default:return ut()}var i}function ul(n,e){return void 0!==(n.values||[]).find(t=>la(t,e))}function cl(n,e){if(n===e)return 0;const t=Zu(n),r=Zu(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Pr(i.integerValue||i.doubleValue),h=Pr(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Yw(n.timestampValue,e.timestampValue);case 4:return Yw(qu(n),qu(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Wu(i),h=Wu(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let g=0;g<c.length&&g<h.length;g++){const v=Ut(c[g],h[g]);if(0!==v)return v}return Ut(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Ut(Pr(i.latitude),Pr(a.latitude));return 0!==c?c:Ut(Pr(i.longitude),Pr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let g=0;g<c.length&&g<h.length;++g){const v=cl(c[g],h[g]);if(v)return v}return Ut(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===al.mapValue&&a===al.mapValue)return 0;if(i===al.mapValue)return 1;if(a===al.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),g=a.fields||{},v=Object.keys(g);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){const S=Ut(h[b],v[b]);if(0!==S)return S;const k=cl(c[h[b]],g[v[b]]);if(0!==k)return k}return Ut(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ut()}}function Yw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=ol(n),r=ol(e),i=Ut(t.seconds,r.seconds);return 0!==i?i:Ut(t.nanos,r.nanos)}function zd(n){return fv(n)}function fv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ol(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wu(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=fv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${fv(r.fields[h])}`;return a+"}"}(n.mapValue):ut();var e}function Wd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wm(n){return!!n&&"integerValue"in n}function qd(n){return!!n&&"arrayValue"in n}function Qw(n){return!!n&&"nullValue"in n}function Xw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tm(n){return!!n&&"mapValue"in n}function Jf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return sl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Jw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sS(n){return"nullValue"in n?hv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wd(Ku.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function oS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wd(Ku.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?al:ut()}function e0(n,e){const t=cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function aS(n,e){const t=cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ji{constructor(e){this.value=e}static empty(){return new ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jf(t)}setAll(e){let t=Jn.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Jf(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Tm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return la(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Tm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){sl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ji(Jf(this.value))}}function uS(n){const e=[];return sl(n.fields,(t,r)=>{const i=new Jn([t]);if(Tm(r)){const a=uS(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new yr(e)}class tr{constructor(e,t,r,i,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new tr(e,0,Tt.min(),Tt.min(),Tt.min(),ji.empty(),0)}static newFoundDocument(e,t,r,i){return new tr(e,1,t,Tt.min(),r,i,0)}static newNoDocument(e,t){return new tr(e,2,t,Tt.min(),Tt.min(),ji.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,Tt.min(),Tt.min(),ji.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ll{constructor(e,t){this.position=e,this.inclusive=t}}function cS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Je.comparator(Je.fromName(c.referenceValue),t.key):cl(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function lS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!la(n.position[t],e.position[t]))return!1;return!0}class ep{constructor(e,t="asc"){this.field=e,this.dir=t}}function zP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class dS{}class cn extends dS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new pS(e,t,r):"array-contains"===t?new _S(e,r):"in"===t?new u0(e,r):"not-in"===t?new yS(e,r):"array-contains-any"===t?new vS(e,r):new cn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new gS(e,r):new mS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cl(t,this.value)):null!==t&&Zu(this.value)===Zu(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Nn extends dS{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Nn(e,t)}matches(e){return tp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tp(n){return"and"===n.op}function t0(n){return"or"===n.op}function n0(n){return hS(n)&&tp(n)}function hS(n){for(const e of n.filters)if(e instanceof Nn)return!1;return!0}function r0(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+zd(n.value);if(n0(n))return n.filters.map(e=>r0(e)).join(",");{const e=n.filters.map(t=>r0(t)).join(",");return`${n.op}(${e})`}}function fS(n,e){return n instanceof cn?(t=n,(r=e)instanceof cn&&t.op===r.op&&t.field.isEqual(r.field)&&la(t.value,r.value)):n instanceof Nn?function(t,r){return r instanceof Nn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&fS(a,r.filters[c]),!0)}(n,e):void ut();var t,r}function s0(n,e){const t=n.filters.concat(e);return Nn.create(t,n.op)}function o0(n){return n instanceof cn?`${(e=n).field.canonicalString()} ${e.op} ${zd(e.value)}`:n instanceof Nn?function(e){return e.op.toString()+" {"+e.getFilters().map(o0).join(" ,")+"}"}(n):"Filter";var e}class pS extends cn{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class gS extends cn{constructor(e,t){super(e,"in",t),this.keys=a0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mS extends cn{constructor(e,t){super(e,"not-in",t),this.keys=a0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function a0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class _S extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qd(t)&&ul(t.arrayValue,this.value)}}class u0 extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ul(this.value.arrayValue,t)}}class yS extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ul(this.value.arrayValue,t)}}class vS extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ul(this.value.arrayValue,r))}}class IS{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.dt=null}}function Yu(n,e=null,t=[],r=[],i=null,a=null,c=null){return new IS(n,e,t,r,i,a,c)}function Kd(n){const e=it(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>r0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Kf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),e.dt=t}return e.dt}function Cm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lS(n.startAt,e.startAt)&&lS(n.endAt,e.endAt)}function Qu(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function c0(n,e){return n.filters.filter(t=>t instanceof cn&&t.field.isEqual(e))}function gv(n,e,t){let r=hv,i=!0;for(const a of c0(n,e)){let c=hv,h=!0;switch(a.op){case"<":case"<=":c=sS(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=hv}e0({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];e0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function WP(n,e,t){let r=al,i=!0;for(const a of c0(n,e)){let c=al,h=!0;switch(a.op){case">=":case">":c=oS(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=al}aS({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];aS({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ka{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=g,this.wt=null,this._t=null}}function l0(n,e,t,r,i,a,c,h){return new Ka(n,e,t,r,i,a,c,h)}function bm(n){return new Ka(n)}function Zd(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function d0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h0(n){return null!==n.collectionGroup}function Ao(n){const e=it(n);if(null===e.wt){e.wt=[];const t=mv(e),r=d0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ep(t)),e.wt.push(new ep(Jn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ep(Jn.keyField(),a))}}}return e.wt}function ps(n){const e=it(n);if(!e._t)if("F"===e.limitType)e._t=Yu(e.path,e.collectionGroup,Ao(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Ao(e))t.push(new ep(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ll(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ll(e.startAt.position,e.startAt.inclusive):null;e._t=Yu(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function np(n,e){e.getFirstInequalityField(),mv(n);const t=n.filters.concat([e]);return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yd(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ni(n,e){return Cm(ps(n),ps(e))&&n.limitType===e.limitType}function qP(n){return`${Kd(ps(n))}|lt:${n.limitType}`}function _v(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>o0(r)).join(", ")}]`),Kf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),`Target(${t})`}(ps(n))}; limitType=${n.limitType})`}function rp(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ao(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=cS(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,Ao(t),r)||t.endAt&&!function(i,a,c){const h=cS(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,Ao(t),r)));var t,r}function ES(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f0(n){return(e,t)=>{let r=!1;for(const i of Ao(n)){const a=wS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function wS(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),g=c.data.field(i);return null!==h&&null!==g?cl(h,g):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}class Za{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Zw(this.inner)}size(){return this.innerSize}}const TS=new er(Je.comparator);function Os(){return TS}const CS=new er(Je.comparator);function Dm(...n){let e=CS;for(const t of n)e=e.insert(t.key,t);return e}function ip(n){let e=CS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ya(){return Sm()}function bS(){return Sm()}function Sm(){return new Za(n=>n.toString(),(n,e)=>n.isEqual(e))}const yv=new er(Je.comparator),DS=new _n(Je.comparator);function Gt(...n){let e=DS;for(const t of n)e=e.add(t);return e}const SS=new _n(Ut);function p0(){return SS}function sp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zf(e)?"-0":e}}function op(n){return{integerValue:""+n}}function AS(n,e){return Vw(e)?op(e):sp(n,e)}class vv{constructor(){this._=void 0}}function KP(n,e,t){return n instanceof Qd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&dv(i)&&(i=Xf(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Xd?m0(n,e):n instanceof Jd?NS(n,e):function(r,i){const a=g0(r,i),c=ZP(a)+ZP(r.gt);return wm(a)&&wm(r.gt)?op(c):sp(r.serializer,c)}(n,e)}function RS(n,e,t){return n instanceof Xd?m0(n,e):n instanceof Jd?NS(n,e):t}function g0(n,e){return n instanceof Am?wm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qd extends vv{}class Xd extends vv{constructor(e){super(),this.elements=e}}function m0(n,e){const t=YP(e);for(const r of n.elements)t.some(i=>la(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jd extends vv{constructor(e){super(),this.elements=e}}function NS(n,e){let t=YP(e);for(const r of n.elements)t=t.filter(i=>!la(i,r));return{arrayValue:{values:t}}}class Am extends vv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ZP(n){return Pr(n.integerValue||n.doubleValue)}function YP(n){return qd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Iv{constructor(e,t){this.field=e,this.transform=t}}class Ev{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Rm{}function ap(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Qa(n.key,lr.none()):new Pm(n.key,n.data,lr.none());{const t=n.data,r=ji.empty();let i=new _n(Jn.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Xu(n.key,r,new yr(i.toArray()),lr.none())}}function QP(n,e,t){n instanceof Pm?function(r,i,a){const c=r.value.clone(),h=kS(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Xu?function(r,i,a){if(!wv(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=kS(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(_0(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Nm(n,e,t,r){return n instanceof Pm?function(i,a,c,h){if(!wv(i.precondition,a))return c;const g=i.value.clone(),v=MS(i.fieldTransforms,h,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xu?function(i,a,c,h){if(!wv(i.precondition,a))return c;const g=MS(i.fieldTransforms,h,a),v=a.data;return v.setAll(_0(i)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,wv(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function XP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=g0(r.transform,i||null);null!=a&&(null===t&&(t=ji.empty()),t.set(r.field,a))}return t||null}function xS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&zf(t,r,(i,a)=>function PS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xd&&r instanceof Xd||t instanceof Jd&&r instanceof Jd?zf(t.elements,r.elements,la):t instanceof Am&&r instanceof Am?la(t.gt,r.gt):t instanceof Qd&&r instanceof Qd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Pm extends Rm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xu extends Rm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function _0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kS(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,RS(c,h,t[i]))}return r}function MS(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,KP(a,c,e))}return r}class Qa extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y0 extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&QP(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bS();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const g=ap(c,h);null!==g&&r.set(i.key,g),c.isValidDocument()||c.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&zf(this.mutations,e.mutations,(t,r)=>xS(t,r))&&zf(this.baseMutations,e.baseMutations,(t,r)=>xS(t,r))}}class v0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=yv;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new v0(e,t,r,i)}}class Cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class OS{constructor(e,t){this.count=e,this.unchangedNames=t}}var ti,ln;function LS(n){switch(n){default:return ut();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function I0(n){if(void 0===n)return Xn("GRPC error has no .code"),he.UNKNOWN;switch(n){case ti.OK:return he.OK;case ti.CANCELLED:return he.CANCELLED;case ti.UNKNOWN:return he.UNKNOWN;case ti.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case ti.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case ti.INTERNAL:return he.INTERNAL;case ti.UNAVAILABLE:return he.UNAVAILABLE;case ti.UNAUTHENTICATED:return he.UNAUTHENTICATED;case ti.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case ti.NOT_FOUND:return he.NOT_FOUND;case ti.ALREADY_EXISTS:return he.ALREADY_EXISTS;case ti.PERMISSION_DENIED:return he.PERMISSION_DENIED;case ti.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case ti.ABORTED:return he.ABORTED;case ti.OUT_OF_RANGE:return he.OUT_OF_RANGE;case ti.UNIMPLEMENTED:return he.UNIMPLEMENTED;case ti.DATA_LOSS:return he.DATA_LOSS;default:return ut()}}(ln=ti||(ti={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class bv{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Dv}static getOrCreateInstance(){return null===Dv&&(Dv=new bv),Dv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Dv=null;function FS(){return new TextEncoder}const ex=new Gf([4294967295,4294967295],0);function Sv(n){const e=FS().encode(n),t=new RL;return t.update(e),new Uint8Array(t.digest())}function US(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Gf([t,r],0),new Gf([i,a],0)]}class Av{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xm(`Invalid padding: ${t}`);if(r<0)throw new xm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new xm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new xm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Gf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Gf.fromNumber(r)));return 1===i.compare(ex)&&(i=new Gf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Sv(e),[r,i]=US(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Av(a,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(0===this.It)return;const t=Sv(e),[r,i]=US(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class xm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class km{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Mm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new km(Tt.min(),i,new er(Ut),Os(),Gt())}}class Mm{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mm(r,t,Gt(),Gt(),Gt())}}class Rv{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class VS{constructor(e,t){this.targetId=e,this.Vt=t}}class BS{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class jS{constructor(){this.St=0,this.Dt=w0(),this.Ct=ei.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gt(),t=Gt(),r=Gt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new Mm(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=w0()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class tx{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Os(),this.zt=E0(),this.Wt=new er(Ut)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(Qu(c))if(0===i){const h=new Je(c.path);this.Yt(r,h,tr.newNoDocument(h,Tt.min()))}else wt(1===i);else{const h=this.ie(r);if(h!==i){const g=this.re(e,h);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=bv.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,b,S){var k,V,K,fe,Ee,Ze;const at={localCacheCount:b,existenceFilterCount:S.count},et=S.unchangedNames;return et&&(at.bloomFilter={applied:0===v,hashCount:null!==(k=et?.hashCount)&&void 0!==k?k:0,bitmapLength:null!==(fe=null===(K=null===(V=et?.bits)||void 0===V?void 0:V.bitmap)||void 0===K?void 0:K.length)&&void 0!==fe?fe:0,padding:null!==(Ze=null===(Ee=et?.bits)||void 0===Ee?void 0:Ee.padding)&&void 0!==Ze?Ze:0}),at}(g,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:h=0}=r;let g,v;try{g=Wu(a).toUint8Array()}catch(b){if(b instanceof So)return Qs("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{v=new Av(g,c,h)}catch(b){return Qs(b instanceof xm?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(h)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const h=this.se(c);if(h){if(a.current&&Qu(h.target)){const g=new Je(h.target.path);null!==this.jt.get(g)||this.ae(c,g)||this.Yt(c,g,tr.newNoDocument(g,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=Gt();this.zt.forEach((a,c)=>{let h=!0;c.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new km(e,t,this.Wt,this.jt,r);return this.jt=Os(),this.zt=E0(),this.Wt=new er(Ut),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new jS,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new _n(Ut),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new jS),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function E0(){return new er(Je.comparator)}function w0(){return new er(Je.comparator)}const nx={asc:"ASCENDING",desc:"DESCENDING"},rx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$S={and:"AND",or:"OR"};class ix{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function T0(n,e){return n.useProto3Json||Kf(e)?e:{value:e}}function up(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C0(n,e){return up(n,e.toTimestamp())}function vr(n){return wt(!!n),Tt.fromTimestamp(function(e){const t=ol(e);return new cr(t.seconds,t.nanos)}(n))}function Nv(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Pv(n){const e=un.fromString(n);return wt(k0(e)),e}function Om(n,e){return Nv(n.databaseId,e.path)}function Xa(n,e){const t=Pv(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(dl(t))}function Lm(n,e){return Nv(n.databaseId,e)}function GS(n){const e=Pv(n);return 4===e.length?un.emptyPath():dl(e)}function Fm(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dl(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function b0(n,e,t){return{name:Om(n,e),fields:t.value.mapValue.fields}}function zS(n,e,t){const r=Xa(n,e.name),i=vr(e.updateTime),a=e.createTime?vr(e.createTime):Tt.min(),c=new ji({mapValue:{fields:e.fields}}),h=tr.newFoundDocument(r,i,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function eh(n,e){let t;if(e instanceof Pm)t={update:b0(n,e.key,e.value)};else if(e instanceof Qa)t={delete:Om(n,e.key)};else if(e instanceof Xu)t={update:b0(n,e.key,e.data),updateMask:sx(e.fieldMask)};else{if(!(e instanceof y0))return ut();t={verify:Om(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Xd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Jd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Am)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:C0(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function S0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?lr.updateTime(vr(i.updateTime)):void 0!==i.exists?lr.exists(i.exists):lr.none():lr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(wt("REQUEST_TIME"===c.setToServerValue),h=new Qd):"appendMissingElements"in c?h=new Xd(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Jd(c.removeAllFromArray.values||[]):"increment"in c?h=new Am(a,c.increment):ut();const g=Jn.fromServerFormat(c.fieldPath);return new Iv(g,h)}(n,i)):[];var i;if(e.update){const i=Xa(n,e.update.name),a=new ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new yr((e.updateMask.fieldPaths||[]).map(v=>Jn.fromServerFormat(v)));return new Xu(i,a,c,t,r)}return new Pm(i,a,t,r)}if(e.delete){const i=Xa(n,e.delete);return new Qa(i,t)}if(e.verify){const i=Xa(n,e.verify);return new y0(i,t)}return ut()}function A0(n,e){return{documents:[Lm(n,e.path)]}}function R0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Lm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Lm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return YS(Nn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:hl((b=v).field),direction:qS(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=T0(n,e.limit);var h,g;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function N0(n){let e=GS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const S=x0(b);return S instanceof Nn&&n0(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new ep(cp((S=b).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(b){let S;return S="object"==typeof b?b.value:b,Kf(S)?null:S}(t.limit));let g=null;var b;t.startAt&&(g=new ll((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new ll(b.values||[],!b.before)}(t.endAt)),l0(e,i,c,a,h,"F",g,v)}function x0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cp(e.unaryFilter.field);return cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=cp(e.unaryFilter.field);return cn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cp(e.unaryFilter.field);return cn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=cp(e.unaryFilter.field);return cn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?cn.create(cp((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Nn.create(e.compositeFilter.filters.map(t=>x0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function qS(n){return nx[n]}function KS(n){return rx[n]}function ZS(n){return $S[n]}function hl(n){return{fieldPath:n.canonicalString()}}function cp(n){return Jn.fromServerFormat(n.fieldPath)}function YS(n){return n instanceof cn?function(e){if("=="===e.op){if(Xw(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NAN"}};if(Qw(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xw(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NOT_NAN"}};if(Qw(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(e.field),op:KS(e.op),value:e.value}}}(n):n instanceof Nn?function(e){const t=e.getFilters().map(r=>YS(r));return 1===t.length?t[0]:{compositeFilter:{op:ZS(e.op),filters:t}}}(n):ut()}function sx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function k0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class fl{constructor(e,t,r,i,a=Tt.min(),c=Tt.min(),h=ei.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class M0{constructor(e){this.fe=e}}function QS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:O0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Om(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:up(i,a.version.toTimestamp()),createTime:up(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:th(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:th(e.version)}}var i,a;return r}function O0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function th(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nh(n){const e=new cr(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function rh(n,e){const t=(e.baseMutations||[]).map(a=>S0(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>S0(n.fe,a)),i=cr.fromMillis(e.localWriteTimeMs);return new Tv(e.batchId,i,t,r)}function Um(n){const e=nh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?nh(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=ps(bm(GS(i.documents[0])))):r=ps(N0(n.query)),new fl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function XS(n,e){const t=th(e.snapshotVersion),r=th(e.lastLimboFreeSnapshotVersion);let i;i=Qu(e.target)?A0(n.fe,e.target):R0(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kd(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function L0(n){const e=N0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Yd(e,e.limit,"L"):e}function F0(n,e){return new Cv(e.largestBatchId,S0(n.fe,e.overlayMutation))}function JS(n,e){const t=e.path.lastSegment();return[n,Bi(e.path.popLast()),t]}function eA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:th(r.readTime),documentKey:Bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class ax{getBundleMetadata(e,t){return tA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:nh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return tA(e).put({bundleId:(r=t).id,createTime:th(vr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return nA(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:L0(i.bundledQuery),readTime:nh(i.readTime)};var i})}saveNamedQuery(e,t){return nA(e).put({name:(r=t).name,readTime:th(vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function tA(n){return Ai(n,"bundles")}function nA(n){return Ai(n,"namedQueries")}class pl{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new pl(e,t.uid||"")}getOverlay(e,t){return lp(e).get(JS(this.userId,t)).next(r=>r?F0(this.serializer,r):null)}getOverlays(e,t){const r=Ya();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const h=new Cv(t,c);i.push(this.we(e,h))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Bi(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(lp(e).J("collectionPathOverlayIndex",h))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ya(),a=Bi(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return lp(e).j("collectionPathOverlayIndex",c).next(h=>{for(const g of h){const v=F0(this.serializer,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ya();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lp(e).X({index:"collectionGroupOverlayIndex",range:h},(g,v,b)=>{const S=F0(this.serializer,v);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):b.done()}).next(()=>a)}we(e,t){return lp(e).put(function(r,i,a){const[c,h,g]=JS(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:eh(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function lp(n){return Ai(n,"documentOverlays")}class gl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Pr(e.integerValue));else if("doubleValue"in e){const r=Pr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Zf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Wu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Jw(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ut()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Je.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function rA(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function U0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=rA(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}gl.Ve=new gl;class iA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=U0(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=U0(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ux{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class cx{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class xv{constructor(){this.je=new iA,this.ze=new ux(this.je),this.We=new cx(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class dp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new dp(this.indexId,this.documentKey,this.arrayValue,r)}}function ml(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sA(n.arrayValue,e.arrayValue),0!==t?t:(t=sA(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function sA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class lx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=ov(e);if(void 0!==t&&!this.en(t))return!1;const r=jd(e);let i=new Set,a=0,c=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[a];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[c++],h))return!1}++a}for(;a<r.length;++a)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function oA(n){var e,t;if(wt(n instanceof cn||n instanceof Nn),n instanceof cn){if(n instanceof u0){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>cn.create(n.field,"==",a)))||[];return Nn.create(i,"or")}return n}const r=n.filters.map(i=>oA(i));return Nn.create(r,n.op)}function dx(n){if(0===n.getFilters().length)return[];const e=B0(oA(n));return wt(kv(e)),ih(e)||V0(e)?[e]:e.getFilters()}function ih(n){return n instanceof cn}function V0(n){return n instanceof Nn&&n0(n)}function kv(n){return ih(n)||V0(n)||function(e){if(e instanceof Nn&&t0(e)){for(const t of e.getFilters())if(!ih(t)&&!V0(t))return!1;return!0}return!1}(n)}function B0(n){if(wt(n instanceof cn||n instanceof Nn),n instanceof cn)return n;if(1===n.filters.length)return B0(n.filters[0]);const e=n.filters.map(r=>B0(r));let t=Nn.create(e,n.op);return t=j0(t),kv(t)?t:(wt(t instanceof Nn),wt(tp(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>aA(r,i)))}function aA(n,e){let t;return wt(n instanceof cn||n instanceof Nn),wt(e instanceof cn||e instanceof Nn),t=n instanceof cn?e instanceof cn?Nn.create([n,e],"and"):uA(n,e):e instanceof cn?uA(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),tp(r)&&tp(i))return s0(r,i.getFilters());const a=t0(r)?r:i,c=t0(r)?i:r,h=a.filters.map(g=>aA(g,c));return Nn.create(h,"or")}(n,e),j0(t)}function uA(n,e){if(tp(e))return s0(e,n.getFilters());{const t=e.filters.map(r=>aA(n,r));return Nn.create(t,"or")}}function j0(n){if(wt(n instanceof cn||n instanceof Nn),n instanceof cn)return n;const e=n.getFilters();if(1===e.length)return j0(e[0]);if(hS(n))return n;const t=e.map(i=>j0(i)),r=[];return t.forEach(i=>{i instanceof cn?r.push(i):i instanceof Nn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Nn.create(r,n.op)}class Vm{constructor(){this.rn=new $0}addToCollectionParentIndex(e,t){return this.rn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Xs.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class $0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(un.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(un.comparator)).toArray()}}const Mv=new Uint8Array(0);class hx{constructor(e,t){this.user=e,this.databaseId=t,this.on=new $0,this.un=new Za(r=>Kd(r),(r,i)=>Cm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Bi(i)};return Bm(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ZD(t),""],!1,!0);return Bm(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Js(c.parent))}return r})}addFieldIndex(e,t){const r=Ov(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=fp(e);return a.next(h=>{c.put(eA(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Ov(e),i=fp(e),a=hp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=hp(e);let i=!0;const a=new Map;return ue.forEach(this.cn(t),c=>this.an(e,c).next(h=>{i&&(i=!!h),a.set(c,h)})).next(()=>{if(i){let c=Gt();const h=[];return ue.forEach(a,(g,v)=>{var b;Be("IndexedDbIndexManager",`Using index ${b=g,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${Kd(t)}`);const S=function(et,lt){const Pt=ov(lt);if(void 0===Pt)return null;for(const $t of c0(et,Pt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(v,g),k=function(et,lt){const Pt=new Map;for(const $t of jd(lt))for(const Kr of c0(et,$t.fieldPath))switch(Kr.op){case"==":case"in":Pt.set($t.fieldPath.canonicalString(),Kr.value);break;case"not-in":case"!=":return Pt.set($t.fieldPath.canonicalString(),Kr.value),Array.from(Pt.values())}return null}(v,g),V=function(et,lt){const Pt=[];let $t=!0;for(const Kr of jd(lt)){const io=0===Kr.kind?gv(et,Kr.fieldPath,et.startAt):WP(et,Kr.fieldPath,et.startAt);Pt.push(io.value),$t&&($t=io.inclusive)}return new ll(Pt,$t)}(v,g),K=function(et,lt){const Pt=[];let $t=!0;for(const Kr of jd(lt)){const io=0===Kr.kind?WP(et,Kr.fieldPath,et.endAt):gv(et,Kr.fieldPath,et.endAt);Pt.push(io.value),$t&&($t=io.inclusive)}return new ll(Pt,$t)}(v,g),fe=this.hn(g,v,V),Ee=this.hn(g,v,K),Ze=this.ln(g,v,k),at=this.fn(g.indexId,S,fe,V.inclusive,Ee,K.inclusive,Ze);return ue.forEach(at,et=>r.H(et,t.limit).next(lt=>{lt.forEach(Pt=>{const $t=Je.fromSegments(Pt.documentKey);c.has($t)||(c=c.add($t),h.push($t))})}))}).next(()=>h)}return ue.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:dx(Nn.create(e.filters,"and")).map(r=>Yu(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,h){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),v=g/(null!=t?t.length:1),b=[];for(let S=0;S<g;++S){const k=t?this.dn(t[S/v]):Mv,V=this.wn(e,k,r[S%v],i),K=this._n(e,k,a[S%v],c),fe=h.map(Ee=>this.wn(e,k,Ee,!0));b.push(...this.createRange(V,K,fe))}return b}wn(e,t,r,i){const a=new dp(e,Je.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new dp(e,Je.empty(),t,r);return i?a.Je():a}an(e,t){const r=new lx(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const h of a)r.tn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ue.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let g=new _n(Jn.comparator),v=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:g=g.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new xv;for(const i of jd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);gl.Ve._e(a,c)}return r.Qe()}dn(e){const t=new xv;return gl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new xv;return gl.Ve._e(Wd(this.databaseId,t),r.He(function(i){const a=jd(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new xv);let a=0;for(const c of jd(e)){const h=r[a++];for(const g of i)if(this.yn(t,c.fieldPath)&&qd(h))i=this.pn(i,c,h);else{const v=g.He(c.kind);gl.Ve._e(h,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const h of i){const g=new xv;g.seed(h.Qe()),gl.Ve._e(c,g.He(t.kind)),a.push(g)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof cn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ov(e),i=fp(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return ue.forEach(a,h=>i.get([h.indexId,this.uid]).next(g=>{c.push(function(v,b){const S=b?new $d(b.sequenceNumber,new Xs(nh(b.readTime),new Je(Js(b.documentKey)),b.largestBatchId)):$d.empty(),k=v.fields.map(([V,K])=>new av(Jn.fromServerFormat(V),K));return new Wf(v.indexId,v.collectionGroup,k,S)}(h,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ut(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ov(e),a=fp(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ue.forEach(h,g=>a.put(eA(g.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ue.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ue.forEach(h,g=>this.En(e,i,g).next(v=>{const b=this.An(a,g);return v.isEqual(b)?ue.resolve():this.vn(e,a,g,v,b)}))))})}Rn(e,t,r,i){return hp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return hp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=hp(e);let a=new _n(ml);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,h)=>{a=a.add(new dp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}An(e,t){let r=new _n(ml);const i=this.mn(t,e);if(null==i)return r;const a=ov(t);if(null!=a){const c=e.data.field(a.fieldPath);if(qd(c))for(const h of c.arrayValue.values||[])r=r.add(new dp(t.indexId,e.key,this.dn(h),i))}else r=r.add(new dp(t.indexId,e.key,Mv,i));return r}vn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,g,v,b,S){const k=h.getIterator(),V=g.getIterator();let K=Qf(k),fe=Qf(V);for(;K||fe;){let Ee=!1,Ze=!1;if(K&&fe){const at=v(K,fe);at<0?Ze=!0:at>0&&(Ee=!0)}else null!=K?Ze=!0:Ee=!0;Ee?(b(fe),fe=Qf(V)):Ze?(S(K),K=Qf(k)):(K=Qf(k),fe=Qf(V))}}(i,a,ml,h=>{c.push(this.Rn(e,t,r,h))},h=>{c.push(this.Pn(e,t,r,h))}),ue.waitFor(c)}Tn(e){let t=1;return fp(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>ml(c,h)).filter((c,h,g)=>!h||0!==ml(c,g[h-1]));const i=[];i.push(e);for(const c of r){const h=ml(c,e),g=ml(c,t);if(0===h)i[0]=e.Je();else if(h>0&&g<0)i.push(c),i.push(c.Je());else if(g>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Mv,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Mv,[]]))}return a}bn(e,t){return ml(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jm)}getMinOffset(e,t){return ue.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ut())).next(jm)}}function Bm(n){return Ai(n,"collectionParents")}function hp(n){return Ai(n,"indexEntries")}function Ov(n){return Ai(n,"indexConfiguration")}function fp(n){return Ai(n,"indexState")}function jm(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Lw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xs(e.readTime,e.documentKey,t)}const cA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function H0(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const g=r.X({range:c},(b,S,k)=>(h++,k.delete()));a.push(g.next(()=>{wt(1===h)}));const v=[];for(const b of t.mutations){const S=eS(e,b.key.path,t.batchId);a.push(i.delete(S)),v.push(b.key)}return ue.waitFor(a).next(()=>v)}function Lv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class Fv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){wt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Fv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return da(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=pp(e),c=da(e);return c.add({}).next(h=>{wt("number"==typeof h);const g=new Tv(h,t,r,i),v=function(k,V,K){const fe=K.baseMutations.map(Ze=>eh(k.fe,Ze)),Ee=K.mutations.map(Ze=>eh(k.fe,Ze));return{userId:V,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:fe,mutations:Ee}}(this.serializer,this.userId,g),b=[];let S=new _n((k,V)=>Ut(k.canonicalString(),V.canonicalString()));for(const k of i){const V=eS(this.userId,k.key.path,h);S=S.add(k.key.path.popLast()),b.push(c.put(v)),b.push(a.put(V,jw))}return S.forEach(k=>{b.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Vn[h]=g.keys()}),ue.waitFor(b).next(()=>g)})}lookupMutationBatch(e,t){return da(e).get(t).next(r=>r?(wt(r.userId===this.userId),rh(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ue.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return da(e).X({index:"userMutationsIndex",range:i},(c,h,g)=>{h.userId===this.userId&&(wt(h.batchId>=r),a=rh(this.serializer,h)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return da(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return da(e).j("userMutationsIndex",t).next(r=>r.map(i=>rh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=lv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return pp(e).X({range:i},(c,h,g)=>{const[v,b,S]=c,k=Js(b);if(v===this.userId&&t.path.isEqual(k))return da(e).get(S).next(V=>{if(!V)throw ut();wt(V.userId===this.userId),a.push(rh(this.serializer,V))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ut);const i=[];return t.forEach(a=>{const c=lv(this.userId,a.path),h=IDBKeyRange.lowerBound(c),g=pp(e).X({range:h},(v,b,S)=>{const[k,V,K]=v,fe=Js(V);k===this.userId&&a.path.isEqual(fe)?r=r.add(K):S.done()});i.push(g)}),ue.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=lv(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new _n(Ut);return pp(e).X({range:c},(g,v,b)=>{const[S,k,V]=g,K=Js(k);S===this.userId&&r.isPrefixOf(K)?K.length===i&&(h=h.add(V)):b.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(da(e).get(a).next(c=>{if(null===c)throw ut();wt(c.userId===this.userId),r.push(rh(this.serializer,c))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return H0(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return pp(e).X({range:r},(a,c,h)=>{if(a[0]===this.userId){const g=Js(a[1]);i.push(g)}else h.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return G0(e,this.userId,t)}xn(e){return lA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function G0(n,e,t){const r=lv(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return pp(n).X({range:a,Y:!0},(h,g,v)=>{const[b,S,k]=h;b===e&&S===i&&(c=!0),v.done()}).next(()=>c)}function da(n){return Ai(n,"mutations")}function pp(n){return Ai(n,"documentMutations")}function lA(n){return Ai(n,"mutationQueues")}class _l{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new _l(0)}static Mn(){return new _l(-1)}}class dA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new _l(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Tt.fromTimestamp(new cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yl(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return yl(e).X((c,h)=>{const g=Um(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return yl(e).X((r,i)=>{const a=Um(i);t(a)})}$n(e){return z0(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return z0(e).put("targetGlobalKey",t)}Fn(e,t){return yl(e).put(XS(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Kd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return yl(e).X({range:i,index:"queryTargetsIndex"},(c,h,g)=>{const v=Um(h);Cm(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=vl(e);return t.forEach(c=>{const h=Bi(c.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=vl(e);return ue.forEach(t,a=>{const c=Bi(a.path);return ue.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=vl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=vl(e);let a=Gt();return i.X({range:r,Y:!0},(c,h,g)=>{const v=Js(c[1]),b=new Je(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Bi(t.path),i=IDBKeyRange.bound([r],[ZD(r)],!1,!0);let a=0;return vl(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,h],g,v)=>{0!==c&&(a++,v.done())}).next(()=>a>0)}le(e,t){return yl(e).get(t).next(r=>r?Um(r):null)}}function yl(n){return Ai(n,"targets")}function z0(n){return Ai(n,"targetGlobal")}function vl(n){return Ai(n,"targetDocuments")}function W0([n,e],[t,r]){const i=Ut(n,t);return 0===i?Ut(e,r):i}class hA{constructor(e){this.Ln=e,this.buffer=new _n(W0),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();W0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Y.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){il(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Gu(r)}yield t.Qn(3e5)}))}}class fx{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Ms.ct);const r=new hA(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(cA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cA):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,h,g,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),_m()<=gr.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(v-g)+`ms\nTotal Duration: ${v-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class q0{constructor(e,t){this.db=e,this.garbageCollector=function Uv(n,e){return new fx(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return $m(e,r)}removeReference(e,t,r){return $m(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $m(e,t)}Xn(e,t){return function(r,i){let a=!1;return lA(r).Z(c=>G0(r,c,i).next(h=>(h&&(a=!0),ue.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,h)=>{if(h<=t){const g=this.Xn(e,c).next(v=>{if(!v)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),vl(e).delete([0,Bi(c.path)])))});i.push(g)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $m(e,t)}Yn(e,t){const r=vl(e);let i,a=Ms.ct;return r.X({index:"documentTargetsIndex"},([c,h],{path:g,sequenceNumber:v})=>{0===c?(a!==Ms.ct&&t(new Je(Js(i)),a),a=v,i=g):a=Ms.ct}).next(()=>{a!==Ms.ct&&t(new Je(Js(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $m(n,e){return vl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Bi(e.path),sequenceNumber:r}));var r}class Vv{constructor(){this.changes=new Za(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class K0{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sh(e).put(r)}removeEntry(e,t,r){return sh(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],O0(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return sh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gp(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return sh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gp(t))},(i,a)=>{r={document:this.ts(t,a),size:Lv(a)}}).next(()=>r)}getEntries(e,t){let r=Os();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Os(),i=new er(Je.comparator);return this.ns(e,t,(a,c)=>{const h=this.ts(a,c);r=r.insert(a,h),i=i.insert(a,Lv(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ue.resolve();let i=new _n(Z0);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(gp(i.first()),gp(i.last())),c=i.getIterator();let h=c.getNext();return sh(e).X({index:"documentKeyIndex",range:a},(g,v,b)=>{const S=Je.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&Z0(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,v),h=c.hasNext()?c.getNext():null),h?b.G(gp(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),O0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sh(e).j(IDBKeyRange.bound(c,h,!0)).next(g=>{let v=Os();for(const b of g){const S=this.ts(Je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(rp(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=Os();const c=Bv(t,r),h=Bv(t,Xs.max());return sh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(g,v,b)=>{const S=this.ts(Je.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new px(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gA(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return gA(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function ox(n,e){let t;if(e.document)t=zS(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=nh(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Je.fromSegments(e.unknownDocument.path),i=nh(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new cr(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return tr.newInvalidDocument(e)}}function pA(n){return new K0(n)}class px extends Vv{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Za(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _n((a,c)=>Ut(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.us.get(a);if(t.push(this.os.removeEntry(e,a,h.readTime)),c.isValidDocument()){const g=QS(this.os.serializer,c);i=i.add(a.path.popLast());const v=Lv(g);r+=v-h.size,t.push(this.os.addEntry(e,a,g))}else if(r-=h.size,this.trackRemovals){const g=QS(this.os.serializer,c.convertToNoDocument(Tt.min()));t.push(this.os.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function gA(n){return Ai(n,"remoteDocumentGlobal")}function sh(n){return Ai(n,"remoteDocumentsV14")}function gp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bv(n,e){const t=e.documentKey.path.toArray();return[n,O0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Z0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ut(t[a],r[a]),i)return i;return i=Ut(t.length,r.length),i||(i=Ut(t[t.length-2],r[r.length-2]),i||Ut(t[t.length-1],r[r.length-1]))}class gx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Y0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Nm(r.mutation,i,yr.empty(),cr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=Ya();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Dm();return a.forEach((h,g)=>{c=c.insert(h,g.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ya();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Os();const c=Sm(),h=Sm();return t.forEach((g,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof Xu)?a=a.insert(v.key,v):void 0!==b?(c.set(v.key,b.mutation.getFieldMask()),Nm(b.mutation,v,b.mutation.getFieldMask(),cr.now())):c.set(v.key,yr.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,b)=>c.set(v,b)),t.forEach((v,b)=>{var S;return h.set(v,new gx(b,null!==(S=c.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Sm();let i=new er((c,h)=>c-h),a=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let b=r.get(g)||yr.empty();b=h.applyToLocalView(v,b),r.set(g,b);const S=(i.get(h.batchId)||Gt()).add(g);i=i.insert(h.batchId,S)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),v=g.key,b=g.value,S=bS();b.forEach(k=>{if(!a.has(k)){const V=ap(t.get(k),r.get(k));null!==V&&S.set(k,V),a=a.add(k)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ue.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(Ya());let h=-1,g=a;return c.next(v=>ue.forEach(v,(b,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(b)?ue.resolve():this.remoteDocumentCache.getEntry(e,b).next(k=>{g=g.insert(b,k)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,Gt())).next(b=>({batchId:h,changes:ip(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let i=Dm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Dm();return this.indexManager.getCollectionParents(e,i).next(c=>ue.forEach(c,h=>{const g=(v=t,b=h.child(i),new Ka(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((b,S)=>{a=a.insert(b,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,g)=>{const v=g.getKey();null===a.get(v)&&(a=a.insert(v,tr.newInvalidDocument(v)))});let c=Dm();return a.forEach((h,g)=>{const v=i.get(h);void 0!==v&&Nm(v.mutation,g,yr.empty(),cr.now()),rp(t,g)&&(c=c.insert(h,g))}),c})}}class mA{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ue.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:vr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:L0(r.bundledQuery),readTime:vr(r.readTime)}),ue.resolve();var r}}class mx{constructor(){this.overlays=new er(Je.comparator),this.ls=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ya();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=Ya(),a=t.length+1,c=new Je(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new er((v,b)=>v-b);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=Ya(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const h=Ya(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,b)=>h.set(v,b)),!(h.size()>=i)););return ue.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Cv(t,r));let a=this.ls.get(t);void 0===a&&(a=Gt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class jv{constructor(){this.fs=new _n(pi.ds),this.ws=new _n(pi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new pi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new pi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Je(new un([])),r=new pi(t,e),i=new pi(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Je(new un([])),r=new pi(t,e),i=new pi(t,e+1);let a=Gt();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new pi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Je.comparator(e.key,t.key)||Ut(e.As,t.As)}static _s(e,t){return Ut(e.As,t.As)||Je.comparator(e.key,t.key)}}class _x{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new _n(pi.ds)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new Tv(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Rs=this.Rs.add(new pi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pi(t,0),i=new pi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const h=this.Ps(c.As);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ut);return t.forEach(i=>{const a=new pi(i,0),c=new pi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],h=>{r=r.add(h.As)})}),ue.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const c=new pi(new Je(a),0);let h=new _n(Ut);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(g.As)),!0)},c),ue.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ue.forEach(t.mutations,i=>{const a=new pi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new pi(t,0),i=this.Rs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _A{constructor(e){this.Ds=e,this.docs=new er(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=Os();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Os();const c=t.path,h=new Je(c.child("")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:v,value:{document:b}}=g.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Lw(Ow(b),r)<=0||(i.has(b.key)||rp(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ut()}Cs(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yx(this)}getSize(e){return ue.resolve(this.size)}}class yx extends Vv{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class gs{constructor(e){this.persistence=e,this.xs=new Za(t=>Kd(t),Cm),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new jv,this.targetCount=0,this.Ms=_l.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ue.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new _l(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Fn(t),ue.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.ks.containsKey(t))}}class Il{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ms(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new gs(this),this.indexManager=new Vm,this.remoteDocumentCache=new _A(r=>this.referenceDelegate.Ls(r)),this.serializer=new M0(t),this.qs=new mA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new _x(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new vx(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ue.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class vx extends uv{constructor(e){super(),this.currentSequenceNumber=e}}class $v{constructor(e){this.persistence=e,this.Qs=new jv,this.js=null}static zs(e){return new $v(e)}get Ws(){if(this.js)return this.js;throw ut()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ws,r=>{const i=Je.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Tt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ue.or([()=>ue.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class OL{constructor(e){this.serializer=e}O(e,t,r,i){const a=new cv("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zu,{unique:!0}),h.createObjectStore("documentMutations"),X0(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),X0(e)),c=c.next(()=>function(h){const g=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,g){return g.store("mutations").j().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zu,{unique:!0});const b=g.store("mutations"),S=v.map(k=>b.put(k));return ue.waitFor(S)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:nS});g.createIndex("collectionPathOverlayIndex",jP,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",$P,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:Gd});g.createIndex("documentKeyIndex",$w),g.createIndex("collectionGroupIndex",FP)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:VP}).createIndex("sequenceNumberIndex",tS,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:BP}).createIndex("documentKeyIndex",fi,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Lv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ue.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(h=>ue.forEach(h,g=>{wt(g.userId===a.userId);const v=rh(this.serializer,g);return H0(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,h)=>{const g=new un(c),v=[0,Bi(g)];a.push(t.get(v).next(b=>b?ue.resolve():t.put({targetId:0,path:Bi(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:UP});const r=t.store("collectionParents"),i=new $0,a=c=>{if(i.add(c)){const h=c.lastSegment(),g=c.popLast();return r.put({collectionId:h,parent:Bi(g)})}};return t.store("remoteDocuments").X({Y:!0},(c,h)=>{const g=new un(c);return a(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,h,g],v)=>{const b=Js(h);return a(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=Um(i),c=XS(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const h=t.store("remoteDocumentsV14"),g=(v=c,v.document?new Je(un.fromString(v.document.name).popFirst(5)):v.noDocument?Je.fromSegments(v.noDocument.path):v.unknownDocument?Je.fromSegments(v.unknownDocument.path):ut()).path.toArray();var v;const b={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(b))}).next(()=>ue.waitFor(i))}si(e,t){const r=t.store("mutations"),i=pA(this.serializer),a=new Il($v.zs,this.serializer.fe);return r.j().next(c=>{const h=new Map;return c.forEach(g=>{var v;let b=null!==(v=h.get(g.userId))&&void 0!==v?v:Gt();rh(this.serializer,g).keys().forEach(S=>b=b.add(S)),h.set(g.userId,b)}),ue.forEach(h,(g,v)=>{const b=new Si(v),S=pl.de(this.serializer,b),k=a.getIndexManager(b),V=Fv.de(b,this.serializer,k,a.referenceDelegate);return new Y0(i,V,S,k).recalculateAndSaveOverlaysForDocumentKeys(new qw(t,Ms.ct),g).next()})})}}function X0(n){n.createObjectStore("targetDocuments",{keyPath:xL}).createIndex("documentTargetsIndex",kL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hw,{unique:!0}),n.createObjectStore("targetGlobal")}const Hm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yA{constructor(e,t,r,i,a,c,h,g,v,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=h,this.ri=v,this.oi=b,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=k=>Promise.resolve(),!yA.D())throw new ke(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new q0(this,i),this.di=t+"main",this.serializer=new M0(g),this.wi=new Do(this.di,this.ui,new OL(this.serializer)),this.Bs=new dA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pA(this.serializer),this.qs=new ax,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Hm);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ms(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Y.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Y.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Y.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>J0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(il(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Hv(e).get("owner").next(t=>ue.resolve(this.Ri(t)))}Pi(e){return J0(e).delete(this.clientId)}bi(){var e=this;return(0,Y.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ai(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),h=a.filter(g=>-1===c.indexOf(g));return ue.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ue.resolve(!0):Hv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Hm);return!1}}return!(!this.networkEnabled||!this.inForeground)||J0(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Y.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new qw(t,Ms.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>J0(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Fv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hx(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return pl.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?Yf:14===c?Ww:13===c?zw:12===c?HP:11===c?Gw:void ut();var c;let h;return this.wi.runTransaction(e,i,a,g=>(h=new qw(g,this.Os?this.Os.next():Ms.ct),"readwrite-primary"===t?this.Ti(h).next(v=>!!v||this.Ei(h)).next(v=>{if(!v)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ke(he.FAILED_PRECONDITION,Fw);return r(h)}).next(v=>this.vi(h).next(()=>v)):this.Oi(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Oi(e){return Hv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(he.FAILED_PRECONDITION,Hm)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hv(e).put("owner",t)}static D(){return Do.D()}Ai(e){const t=Hv(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,M.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hv(n){return Ai(n,"owner")}function J0(n){return Ai(n,"clientMetadata")}function oh(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Gt(),i=Gt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new eT(e,t.fromCache,r,i)}}class Gv{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(Zd(t))return ue.resolve(null);let r=ps(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Yd(t,null,"F"),r=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Gt(...a);return this.Ui.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ji(t,h);return this.zi(t,v,c,g.readTime)?this.Ki(e,Yd(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,r,i){return Zd(t)||i.isEqual(Tt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(_m()<=gr.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_v(t)),this.Wi(e,c,t,Mw(i,-1)))})}ji(e,t){let r=new _n(f0(e));return t.forEach((i,a)=>{rp(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return _m()<=gr.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",_v(t)),this.Ui.getDocumentsMatchingQuery(e,t,Xs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class Ix{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new er(Ut),this.Yi=new Za(a=>Kd(a),Cm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function tT(n,e,t,r){return new Ix(n,e,t,r)}function vA(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,Y.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let g=Gt();for(const v of i){c.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}for(const v of a){h.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next(v=>({er:v,removedBatchIds:c,addedBatchIds:h}))})})}),nT.apply(this,arguments)}function zv(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function EA(n,e,t){let r=Gt(),i=Gt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Os();return t.forEach((h,g)=>{const v=a.get(h);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),g.isNoDocument()&&g.version.isEqual(Tt.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",g.version)}),{nr:c,sr:i}})}function Wv(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function El(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new fl(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Gm(n,e,t){return qv.apply(this,arguments)}function qv(){return qv=(0,Y.Z)(function*(n,e,t){const r=it(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!il(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),qv.apply(this,arguments)}function Kv(n,e,t){const r=it(n);let i=Tt.min(),a=Gt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,g,v){const b=it(h),S=b.Yi.get(v);return void 0!==S?ue.resolve(b.Ji.get(S)):b.Bs.getTargetData(g,v)}(r,c,ps(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,h.targetId).next(g=>{a=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:Tt.min(),t?a:Gt())).next(h=>(wA(r,ES(e),h),{documents:h,ir:a})))}function rT(n,e){const t=it(n),r=it(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function ah(n,e){const t=it(n),r=t.Xi.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Mw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wA(t,e,i),i))}function wA(n,e,t){let r=n.Xi.get(e)||Tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function zm(){return zm=(0,Y.Z)(function*(n,e,t,r){const i=it(n);let a=Gt(),c=Os();for(const v of t){const b=e.rr(v.metadata.name);v.document&&(a=a.add(b));const S=e.ur(v);S.setReadTime(e.cr(v.metadata.readTime)),c=c.insert(b,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield El(i,(v=r,ps(bm(un.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>EA(v,h,c).next(b=>(h.apply(v),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Bs.addMatchingKeys(v,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.nr,b.sr)).next(()=>b.nr)))}),zm.apply(this,arguments)}function LL(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,Y.Z)(function*(n,e,t=Gt()){const r=yield El(n,ps(L0(e.bundledQuery))),i=it(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=vr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const h=r.withResumeToken(ei.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(a,h).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),iT.apply(this,arguments)}function wx(n,e){return`firestore_clients_${n}_${e}`}function CA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sT(n,e){return`firestore_targets_${n}_${e}`}class Zv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new ke(i.error.code,i.error.message))),c?new Zv(e,t,i.state,a):(Xn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new mp(e,r.state,i):(Xn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=p0();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Vw(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new Wm(e,a):(Xn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oT{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oT(t.clientId,t.onlineState):(Xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yv{constructor(){this.activeTargetIds=p0()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qv{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new er(Ut),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=wx(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Yv),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Y.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(wx(e.persistenceKey,i));if(a){const c=Wm.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sT(this.persistenceKey,e));if(r){const i=mp.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sT(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Y.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=Ms.ct;if(null!=a)try{const h=JSON.parse(a);wt("number"==typeof h),c=h}catch(h){Xn("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Ms.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new Zv(this.currentUser,e,t,r),a=CA(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=CA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=sT(this.persistenceKey,e),a=new mp(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Wm.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return Zv.ar(new Si(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return mp.ar(i,t)}br(e){return oT.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Y.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],h=[];return a.forEach(g=>{i.has(g)||c.push(g)}),i.forEach(g=>{a.has(g)||h.push(g)}),this.syncEngine.Wr(c,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=p0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class bA{constructor(){this.Hr=new Yv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Yv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tx{Yr(e){}shutdown(){}}class aT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xv=null;function Jv(){return null===Xv?Xv=268435456+Math.round(2147483648*Math.random()):Xv++,"0x"+Xv.toString(16)}const DA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SA{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const $i="WebChannelConnection";class Cx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=Jv(),h=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const g={};return this.Eo(g,i,a),this.Ao(e,h,g,r).then(v=>(Be("RestConnection",`Received RPC '${e}' ${c}: `,v),v),v=>{throw Qs("RestConnection",`RPC '${e}' ${c} failed with error: `,v,"url: ",h,"request:",r),v})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+rl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${DA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=Jv();return new Promise((c,h)=>{const g=new AP;g.setWithCredentials(!0),g.listenOnce(SL.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Sw.NO_ERROR:const b=g.getResponseJson();Be($i,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),c(b);break;case Sw.TIMEOUT:Be($i,`RPC '${e}' ${a} timed out`),h(new ke(he.DEADLINE_EXCEEDED,"Request time out"));break;case Sw.HTTP_ERROR:const S=g.getStatus();if(Be($i,`RPC '${e}' ${a} failed with status:`,S,"response text:",g.getResponseText()),S>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const V=k?.error;if(V&&V.status&&V.message){const K=function(fe){const Ee=fe.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(Ee)>=0?Ee:he.UNKNOWN}(V.status);h(new ke(K,V.message))}else h(new ke(he.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new ke(he.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Be($i,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);Be($i,`RPC '${e}' ${a} sending request:`,i),g.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=Jv(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zD(),h=Dw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new SP({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const b=a.join("");Be($i,`Creating RPC '${e}' stream ${i}: ${b}`,g);const S=c.createWebChannel(b,g);let k=!1,V=!1;const K=new SA({ro:Ee=>{V?Be($i,`Not sending because RPC '${e}' stream ${i} is closed:`,Ee):(k||(Be($i,`Opening RPC '${e}' stream ${i} transport.`),S.open(),k=!0),Be($i,`RPC '${e}' stream ${i} sending:`,Ee),S.send(Ee))},oo:()=>S.close()}),fe=(Ee,Ze,at)=>{Ee.listen(Ze,et=>{try{at(et)}catch(lt){setTimeout(()=>{throw lt},0)}})};return fe(S,Aw.EventType.OPEN,()=>{V||Be($i,`RPC '${e}' stream ${i} transport opened.`)}),fe(S,Aw.EventType.CLOSE,()=>{V||(V=!0,Be($i,`RPC '${e}' stream ${i} transport closed`),K.wo())}),fe(S,Aw.EventType.ERROR,Ee=>{V||(V=!0,Qs($i,`RPC '${e}' stream ${i} transport errored:`,Ee),K.wo(new ke(he.UNAVAILABLE,"The operation could not be completed")))}),fe(S,Aw.EventType.MESSAGE,Ee=>{var Ze;if(!V){const at=Ee.data[0];wt(!!at);const lt=at.error||(null===(Ze=at[0])||void 0===Ze?void 0:Ze.error);if(lt){Be($i,`RPC '${e}' stream ${i} received error:`,lt);const Pt=lt.status;let $t=function(io){const xl=ti[io];if(void 0!==xl)return I0(xl)}(Pt),Kr=lt.message;void 0===$t&&($t=he.INTERNAL,Kr="Unknown error status: "+Pt+" with message "+lt.message),V=!0,K.wo(new ke($t,Kr)),S.close()}else Be($i,`RPC '${e}' stream ${i} received:`,at),K._o(at)}}),fe(h,AL.STAT_EVENT,Ee=>{Ee.stat===WD.PROXY?Be($i,`RPC '${e}' stream ${i} detected buffering proxy`):Ee.stat===WD.NOPROXY&&Be($i,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{K.fo()},0),K}}function AA(){return typeof window<"u"?window:null}function uT(){return typeof document<"u"?document:null}function _p(n){return new ix(n,!0)}class RA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class bx{constructor(e,t,r,i,a,c,h,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new RA(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Y.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Y.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Y.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new ke(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Y.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FL extends bx{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function D0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ut(),i=e.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(wt(void 0===v||"string"==typeof v),ei.fromBase64String(v||"")):(wt(void 0===v||v instanceof Uint8Array),ei.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const v=void 0===g.code?he.UNKNOWN:I0(g.code);return new ke(v,g.message||"")}(c);t=new BS(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Xa(n,r.document.name),a=vr(r.document.updateTime),c=r.document.createTime?vr(r.document.createTime):Tt.min(),h=new ji({mapValue:{fields:r.document.fields}}),g=tr.newFoundDocument(i,a,c,h);t=new Rv(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=Xa(n,r.document),a=r.readTime?vr(r.readTime):Tt.min(),c=tr.newNoDocument(i,a);t=new Rv([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Xa(n,r.document);t=new Rv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new OS(i,a);t=new VS(r.targetId,c)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Tt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?vr(a.readTime):Tt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Fm(this.serializer),t.addTarget=function(i,a){let c;const h=a.target;if(c=Qu(h)?{documents:A0(i,h)}:{query:R0(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=HS(i,a.resumeToken);const g=T0(i,a.expectedCount);null!==g&&(c.expectedCount=g)}else if(a.snapshotVersion.compareTo(Tt.min())>0){c.readTime=up(i,a.snapshotVersion.toTimestamp());const g=T0(i,a.expectedCount);null!==g&&(c.expectedCount=g)}return c}(this.serializer,e);const r=function P0(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Fm(this.serializer),t.removeTarget=e,this.Wo(t)}}class UL extends bx{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function WS(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let a=vr(r.updateTime?r.updateTime:i);return a.isEqual(Tt.min())&&(a=vr(i)),new Ev(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Fm(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>eh(this.serializer,r))};this.Wo(t)}}class VL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(he.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(he.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class jL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Xn(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class $L{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(h=>{r.enqueueAndForget((0,Y.Z)(function*(){var g;wl(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Y.Z)(function*(v){const b=it(v);b.vu.add(4),yield uh(b),b.bu.set("Unknown"),b.vu.delete(4),yield yp(b)}),function(v){return g.apply(this,arguments)})(c))}))}),this.bu=new jL(r,i)}}function yp(n){return qm.apply(this,arguments)}function qm(){return qm=(0,Y.Z)(function*(n){if(wl(n))for(const e of n.Ru)yield e(!0)}),qm.apply(this,arguments)}function uh(n){return cT.apply(this,arguments)}function cT(){return cT=(0,Y.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),cT.apply(this,arguments)}function ch(n,e){const t=it(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),eI(t)?lT(t):Ym(t).Ko()&&PA(t,e))}function Km(n,e){const t=it(n),r=Ym(t);t.Au.delete(e),r.Ko()&&Dx(t,e),0===t.Au.size&&(r.Ko()?r.jo():wl(t)&&t.bu.set("Unknown"))}function PA(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ym(n).su(e)}function Dx(n,e){n.Vu.qt(e),Ym(n).iu(e)}function lT(n){n.Vu=new tx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Ym(n).start(),n.bu.gu()}function eI(n){return wl(n)&&!Ym(n).Uo()&&n.Au.size>0}function wl(n){return 0===it(n).vu.size}function xA(n){n.Vu=void 0}function Sx(n){return kA.apply(this,arguments)}function kA(){return kA=(0,Y.Z)(function*(n){n.Au.forEach((e,t)=>{PA(n,e)})}),kA.apply(this,arguments)}function Ax(n,e){return lh.apply(this,arguments)}function lh(){return lh=(0,Y.Z)(function*(n,e){xA(n),eI(n)?(n.bu.Iu(e),lT(n)):n.bu.set("Unknown")}),lh.apply(this,arguments)}function tI(n,e,t){return dT.apply(this,arguments)}function dT(){return dT=(0,Y.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof BS&&2===e.state&&e.cause)try{yield(r=(0,Y.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nI(n,r)}else if(e instanceof Rv?n.Vu.Ht(e):e instanceof VS?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Tt.min()))try{const r=yield zv(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.Au.get(g);v&&i.Au.set(g,v.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,g)=>{const v=i.Au.get(h);if(!v)return;i.Au.set(h,v.withResumeToken(ei.EMPTY_BYTE_STRING,v.snapshotVersion)),Dx(i,h);const b=new fl(v.target,h,g,v.sequenceNumber);PA(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield nI(n,r)}var r}),dT.apply(this,arguments)}function nI(n,e,t){return hT.apply(this,arguments)}function hT(){return hT=(0,Y.Z)(function*(n,e,t){if(!il(e))throw e;n.vu.add(1),yield uh(n),n.bu.set("Offline"),t||(t=()=>zv(n.localStore)),n.asyncQueue.enqueueRetryable((0,Y.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield yp(n)}))}),hT.apply(this,arguments)}function MA(n,e){return e().catch(t=>nI(n,t,e))}function vp(n){return fT.apply(this,arguments)}function fT(){return fT=(0,Y.Z)(function*(n){const e=it(n),t=zr(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;pT(e);)try{const i=yield Wv(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Rx(e,i)}catch(i){yield nI(e,i)}OA(e)&&LA(e)}),fT.apply(this,arguments)}function pT(n){return wl(n)&&n.Eu.length<10}function Rx(n,e){n.Eu.push(e);const t=zr(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function OA(n){return wl(n)&&!zr(n).Uo()&&n.Eu.length>0}function LA(n){zr(n).start()}function Nx(n){return gT.apply(this,arguments)}function gT(){return gT=(0,Y.Z)(function*(n){zr(n).hu()}),gT.apply(this,arguments)}function Px(n){return mT.apply(this,arguments)}function mT(){return mT=(0,Y.Z)(function*(n){const e=zr(n);for(const t of n.Eu)e.uu(t.mutations)}),mT.apply(this,arguments)}function xx(n,e,t){return _T.apply(this,arguments)}function _T(){return _T=(0,Y.Z)(function*(n,e,t){const r=n.Eu.shift(),i=v0.from(r,e,t);yield MA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vp(n)}),_T.apply(this,arguments)}function FA(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,Y.Z)(function*(n,e){var t;e&&zr(n).ou&&(yield(t=(0,Y.Z)(function*(r,i){if(LS(a=i.code)&&a!==he.ABORTED){const c=r.Eu.shift();zr(r).Qo(),yield MA(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield vp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),OA(n)&&LA(n)}),Zm.apply(this,arguments)}function UA(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,Y.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=wl(t);t.vu.add(3),yield uh(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield yp(t)}),yT.apply(this,arguments)}function rI(n,e){return iI.apply(this,arguments)}function iI(){return iI=(0,Y.Z)(function*(n,e){const t=it(n);e?(t.vu.delete(2),yield yp(t)):e||(t.vu.add(2),yield uh(t),t.bu.set("Unknown"))}),iI.apply(this,arguments)}function Ym(n){return n.Su||(n.Su=function(e,t,r){const i=it(e);return i.fu(),new FL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Sx.bind(null,n),ao:Ax.bind(null,n),nu:tI.bind(null,n)}),n.Ru.push(function(){var e=(0,Y.Z)(function*(t){t?(n.Su.Qo(),eI(n)?lT(n):n.bu.set("Unknown")):(yield n.Su.stop(),xA(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function zr(n){return n.Du||(n.Du=function(e,t,r){const i=it(e);return i.fu(),new UL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Nx.bind(null,n),ao:FA.bind(null,n),au:Px.bind(null,n),cu:xx.bind(null,n)}),n.Ru.push(function(){var e=(0,Y.Z)(function*(t){t?(n.Du.Qo(),yield vp(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class sI{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new sI(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dh(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),il(n))return new ke(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Ip{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=Dm(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new Ip(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ip)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ip;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class vT{constructor(){this.Cu=new er(Je.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ut():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ep{constructor(e,t,r,i,a,c,h,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Ep(e,t,Ip.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ni(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class IT{constructor(){this.Nu=void 0,this.listeners=[]}}class Tl{constructor(){this.queries=new Za(e=>qP(e),Ni),this.onlineState="Unknown",this.ku=new Set}}function oI(n,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Y.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new IT),i)try{a.Nu=yield t.onListen(r)}catch(c){const h=dh(c,`Initialization of query '${_v(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&wT(t)}),Qm.apply(this,arguments)}function Xm(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,Y.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ET.apply(this,arguments)}function HL(n,e){const t=it(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.$u(i)&&(r=!0);c.Nu=i}}r&&wT(t)}function VA(n,e,t){const r=it(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function wT(n){n.ku.forEach(e=>{e.next()})}class TT{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ep(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ep.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class kx{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class BA{constructor(e){this.serializer=e}rr(e){return Xa(this.serializer,e)}ur(e){return e.metadata.exists?zS(this.serializer,e.document,!1):tr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return vr(e)}}class jA{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mx(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=un.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new BA(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Gt()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,Y.Z)(function*(){const t=yield function TA(n,e,t,r){return zm.apply(this,arguments)}(e.localStore,new BA(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield LL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Mx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class CT{constructor(e){this.key=e}}class $A{constructor(e){this.key=e}}class bT{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gt(),this.mutatedKeys=Gt(),this.tc=f0(e),this.ec=new Ip(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new vT,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const k=i.get(b),V=rp(this.query,S)?S:null,K=!!k&&this.mutatedKeys.has(k.key),fe=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ee=!1;k&&V?k.data.isEqual(V.data)?K!==fe&&(r.track({type:3,doc:V}),Ee=!0):this.rc(k,V)||(r.track({type:2,doc:V}),Ee=!0,(g&&this.tc(V,g)>0||v&&this.tc(V,v)<0)&&(h=!0)):!k&&V?(r.track({type:0,doc:V}),Ee=!0):k&&!V&&(r.track({type:1,doc:k}),Ee=!0,(g||v)&&(h=!0)),Ee&&(V?(c=c.add(V),a=fe?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{ec:c,ic:r,zi:h,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,b)=>function(S,k){const V=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return V(S)-V(k)}(v.type,b.type)||this.tc(v.doc,b.doc)),this.oc(r);const c=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,g=h!==this.Xu;return this.Xu=h,0!==a.length||g?{snapshot:new Ep(this.query,e.ec,i,a,e.mutatedKeys,0===h,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new vT,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new $A(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new CT(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Gt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ep.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class GL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DT{constructor(e){this.key=e,this.fc=!1}}class HA{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Za(h=>qP(h),Ni),this._c=new Map,this.mc=new Set,this.gc=new er(Je.comparator),this.yc=new Map,this.Ic=new jv,this.Tc={},this.Ec=new Map,this.Ac=_l.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function GA(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,Y.Z)(function*(n,e){const t=dI(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield El(t.localStore,ps(e)),h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield aI(t,e,r,"current"===h,c.resumeToken),t.isPrimaryClient&&ch(t.remoteStore,c)}return i}),ST.apply(this,arguments)}function aI(n,e,t,r,i){return uI.apply(this,arguments)}function uI(){return uI=(0,Y.Z)(function*(n,e,t,r,i){n.Rc=(S,k,V)=>{return(K=(0,Y.Z)(function*(fe,Ee,Ze,at){let et=Ee.view.sc(Ze);et.zi&&(et=yield Kv(fe.localStore,Ee.query,!1).then(({documents:$t})=>Ee.view.sc($t,et)));const lt=at&&at.targetChanges.get(Ee.targetId),Pt=Ee.view.applyChanges(et,fe.isPrimaryClient,lt);return QA(fe,Ee.targetId,Pt.cc),Pt.snapshot}),function(fe,Ee,Ze,at){return K.apply(this,arguments)})(n,S,k,V);var K};const a=yield Kv(n.localStore,e,!0),c=new bT(e,a.ir),h=c.sc(a.documents),g=Mm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=c.applyChanges(h,n.isPrimaryClient,g);QA(n,t,v.cc);const b=new GL(e,t,c);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),uI.apply(this,arguments)}function wp(n,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Y.Z)(function*(n,e){const t=it(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Ni(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Km(t.remoteStore,r.targetId),Jm(t,r.targetId)}).catch(Gu))):(Jm(t,r.targetId),yield Gm(t.localStore,r.targetId,!0))}),Tp.apply(this,arguments)}function cI(){return cI=(0,Y.Z)(function*(n,e,t){const r=hI(n);try{const i=yield function(a,c){const h=it(a),g=cr.now(),v=c.reduce((k,V)=>k.add(V.key),Gt());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let V=Os(),K=Gt();return h.Zi.getEntries(k,v).next(fe=>{V=fe,V.forEach((Ee,Ze)=>{Ze.isValidDocument()||(K=K.add(Ee))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,V)).next(fe=>{b=fe;const Ee=[];for(const Ze of c){const at=XP(Ze,b.get(Ze.key).overlayedDocument);null!=at&&Ee.push(new Xu(Ze.key,at,uS(at.value.mapValue),lr.exists(!0)))}return h.mutationQueue.addMutationBatch(k,g,Ee,c)}).next(fe=>{S=fe;const Ee=fe.applyToLocalDocumentSet(b,K);return h.documentOverlayCache.saveOverlays(k,fe.batchId,Ee)})}).then(()=>({batchId:S.batchId,changes:ip(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let g=a.Tc[a.currentUser.toKey()];g||(g=new er(Ut)),g=g.insert(c,h),a.Tc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Ju(r,i.changes),yield vp(r.remoteStore)}catch(i){const a=dh(i,"Failed to persist write");t.reject(a)}}),cI.apply(this,arguments)}function WA(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,Y.Z)(function*(n,e){const t=it(n);try{const r=yield function IA(n,e){const t=it(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((b,S)=>{const k=i.get(S);if(!k)return;h.push(t.Bs.removeMatchingKeys(a,b.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(a,b.addedDocuments,S)));let V=k.withSequenceNumber(a.currentSequenceNumber);var K,fe,Ee;null!==e.targetMismatches.get(S)?V=V.withResumeToken(ei.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(S,V),fe=V,Ee=b,(0===(K=k).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(a,V))});let g=Os(),v=Gt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(EA(a,c,e.documentUpdates).next(b=>{g=b.nr,v=b.sr})),!r.isEqual(Tt.min())){const b=t.Bs.getLastRemoteSnapshotVersion(a).next(S=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return ue.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?wt(c.fc):i.removedDocuments.size>0&&(wt(c.fc),c.fc=!1))}),yield Ju(t,r,e)}catch(r){yield Gu(r)}}),AT.apply(this,arguments)}function Ox(n,e,t){const r=it(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const h=c.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=it(a);h.onlineState=c;let g=!1;h.queries.forEach((v,b)=>{for(const S of b.listeners)S.Mu(c)&&(g=!0)}),g&&wT(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qA(n,e,t){return RT.apply(this,arguments)}function RT(){return RT=(0,Y.Z)(function*(n,e,t){const r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new er(Je.comparator);c=c.insert(a,tr.newNoDocument(a,Tt.min()));const h=Gt().add(a),g=new km(Tt.min(),new Map,new er(Ut),c,h);yield WA(r,g),r.gc=r.gc.remove(a),r.yc.delete(e),XA(r)}else yield Gm(r.localStore,e,!1).then(()=>Jm(r,e,t)).catch(Gu)}),RT.apply(this,arguments)}function Lx(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,Y.Z)(function*(n,e){const t=it(n),r=e.batch.batchId;try{const i=yield function Ex(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,g,v){const b=g.batch,S=b.keys();let k=ue.resolve();return S.forEach(V=>{k=k.next(()=>v.getEntry(h,V)).next(K=>{const fe=g.docVersions.get(V);wt(null!==fe),K.version.compareTo(fe)<0&&(b.applyToRemoteDocument(K,g),K.isValidDocument()&&(K.setReadTime(g.commitVersion),v.addEntry(K)))})}),k.next(()=>c.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Gt();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(h=h.add(c.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);xT(t,r,null),PT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ju(t,i)}catch(i){yield Gu(i)}}),KA.apply(this,arguments)}function zL(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,Y.Z)(function*(n,e,t){const r=it(n);try{const i=yield function(a,c){const h=it(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return h.mutationQueue.lookupMutationBatch(g,c).next(b=>(wt(null!==b),v=b.keys(),h.mutationQueue.removeMutationBatch(g,b))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,v,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>h.localDocuments.getDocuments(g,v))})}(r.localStore,e);xT(r,e,t),PT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ju(r,i)}catch(i){yield Gu(i)}}),ZA.apply(this,arguments)}function NT(){return NT=(0,Y.Z)(function*(n,e){const t=it(n);wl(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=it(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=dh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),NT.apply(this,arguments)}function PT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function xT(n,e,t){const r=it(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Fx(n,r)})}function Fx(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Km(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),XA(n))}function QA(n,e,t){for(const r of t)r instanceof CT?(n.Ic.addReference(r.key,e),WL(n,r)):r instanceof $A?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Fx(n,r.key)):ut()}function WL(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),XA(n))}function XA(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Je(un.fromString(e)),r=n.Ac.next();n.yc.set(r,new DT(t)),n.gc=n.gc.insert(t,r),ch(n.remoteStore,new fl(ps(bm(t.path)),r,"TargetPurposeLimboResolution",Ms.ct))}}function Ju(n,e,t){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,Y.Z)(function*(n,e,t){const r=it(n),i=[],a=[],c=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,g)=>{c.push(r.Rc(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=eT.Li(g.targetId,v);a.push(b)}}))}),yield Promise.all(c),r.dc.nu(i),yield(h=(0,Y.Z)(function*(g,v){const b=it(g);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ue.forEach(v,k=>ue.forEach(k.Fi,V=>b.persistence.referenceDelegate.addReference(S,k.targetId,V)).next(()=>ue.forEach(k.Bi,V=>b.persistence.referenceDelegate.removeReference(S,k.targetId,V)))))}catch(S){if(!il(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const k=S.targetId;if(!S.fromCache){const V=b.Ji.get(k),fe=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);b.Ji=b.Ji.insert(k,fe)}}}),function(g,v){return h.apply(this,arguments)})(r.localStore,a))}),Cp.apply(this,arguments)}function Ux(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,Y.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield vA(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(h=>{h.reject(new ke(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ju(t,r.er)}var i}),kT.apply(this,arguments)}function JA(n,e){const t=it(n),r=t.yc.get(e);if(r&&r.fc)return Gt().add(r.key);{let i=Gt();const a=t._c.get(e);if(!a)return i;for(const c of a){const h=t.wc.get(c);i=i.unionWith(h.view.nc)}return i}}function hh(n,e){return lI.apply(this,arguments)}function lI(){return lI=(0,Y.Z)(function*(n,e){const t=it(n),r=yield Kv(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&QA(t,e.targetId,i.cc),i}),lI.apply(this,arguments)}function MT(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,Y.Z)(function*(n,e){const t=it(n);return ah(t.localStore,e).then(r=>Ju(t,r))}),e_.apply(this,arguments)}function Vx(n,e,t,r){return t_.apply(this,arguments)}function t_(){return t_=(0,Y.Z)(function*(n,e,t,r){const i=it(n),a=yield function(c,h){const g=it(c),v=it(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Sn(b,h).next(S=>S?g.localDocuments.getDocuments(b,S):ue.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield vp(i.remoteStore):"acknowledged"===t||"rejected"===t?(xT(i,e,r||null),PT(i,e),h=e,it(it(i.localStore).mutationQueue).Cn(h)):ut(),yield Ju(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),t_.apply(this,arguments)}function bp(){return bp=(0,Y.Z)(function*(n,e){const t=it(n);if(dI(t),hI(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Bx(t,r.toArray());t.vc=!0,yield rI(t.remoteStore,!0);for(const a of i)ch(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Jm(t,c),Gm(t.localStore,c,!0))),Km(t.remoteStore,c)}),yield i,yield Bx(t,r),function(a){const c=it(a);c.yc.forEach((h,g)=>{Km(c.remoteStore,g)}),c.Ic.Ts(),c.yc=new Map,c.gc=new er(Je.comparator)}(t),t.vc=!1,yield rI(t.remoteStore,!1)}}),bp.apply(this,arguments)}function Bx(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=(0,Y.Z)(function*(n,e,t){const r=it(n),i=[],a=[];for(const c of e){let h;const g=r._c.get(c);if(g&&0!==g.length){h=yield El(r.localStore,ps(g[0]));for(const v of g){const b=r.wc.get(v),S=yield hh(r,b);S.snapshot&&a.push(S.snapshot)}}else{const v=yield rT(r.localStore,c);h=yield El(r.localStore,v),yield aI(r,jx(v),c,!1,h.resumeToken)}i.push(h)}return r.dc.nu(a),i}),eR.apply(this,arguments)}function jx(n){return l0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tR(n){const e=it(n);return it(it(e.localStore).persistence).$i()}function $x(n,e,t,r){return LT.apply(this,arguments)}function LT(){return LT=(0,Y.Z)(function*(n,e,t,r){const i=it(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield ah(i.localStore,ES(a[0])),h=km.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ei.EMPTY_BYTE_STRING);yield Ju(i,c,h);break}case"rejected":yield Gm(i.localStore,e,!0),Jm(i,e,r);break;default:ut()}}),LT.apply(this,arguments)}function Hx(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,Y.Z)(function*(n,e,t){const r=dI(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield rT(r.localStore,i),c=yield El(r.localStore,a);yield aI(r,jx(a),c.targetId,!1,c.resumeToken),ch(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield Gm(r.localStore,i,!1).then(()=>{Km(r.remoteStore,i),Jm(r,i)}).catch(Gu))}}),FT.apply(this,arguments)}function dI(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qA.bind(null,e),e.dc.nu=HL.bind(null,e.eventManager),e.dc.Pc=VA.bind(null,e.eventManager),e}function hI(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zL.bind(null,e),e}class n_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Y.Z)(function*(){t.serializer=_p(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return tT(this.persistence,new Gv,e.initialUser,this.serializer)}createPersistence(e){return new Il($v.zs,this.serializer)}createSharedClientState(e){return new bA}terminate(){var e=this;return(0,Y.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fI extends n_{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield hI(r.Vc.syncEngine),yield vp(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return tT(this.persistence,new Gv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new fA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new XD(t,this.persistence);return new Uw(e.asyncQueue,r)}createPersistence(e){const t=oh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new yA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,AA(),uT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bA}}class pI extends fI{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof Qv&&(r.sharedClientState.syncEngine={jr:Vx.bind(null,i),zr:$x.bind(null,i),Wr:Hx.bind(null,i),$i:tR.bind(null,i),Qr:MT.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,Y.Z)(function*(c){yield function OT(n,e){return bp.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=AA();if(!Qv.D(t))throw new ke(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class r_{initialize(e,t){var r=this;return(0,Y.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Ox(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ux.bind(null,r.syncEngine),yield rI(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tl}createDatastore(e){const t=_p(e.databaseInfo.databaseId),r=new Cx(e.databaseInfo);return new VL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>Ox(this.syncEngine,h,0),c=aT.D()?new aT:new Tx,new $L(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,g,v){const b=new HA(r,i,a,c,h,g);return v&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Y.Z)(function*(t){const r=it(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield uh(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function UT(n,e=10240){let t=0;return{read:()=>(0,Y.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Y.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zx{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Y.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Y.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Y.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new kx(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Y.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Y.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Y.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Wx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Y.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Y.Z)(function*(a,c){const h=it(a),g=Fm(h.serializer)+"/documents",v={documents:c.map(V=>Om(h.serializer,V))},b=yield h.vo("BatchGetDocuments",g,v,c.length),S=new Map;b.forEach(V=>{const K=function ML(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=Xa(t,r.found.name),a=vr(r.found.updateTime),c=r.found.createTime?vr(r.found.createTime):Tt.min(),h=new ji({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,a,c,h)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=Xa(t,r.missing),a=vr(r.readTime);return tr.newNoDocument(i,a)}(n,e):ut()}(h.serializer,V);S.set(K.key.toString(),K)});const k=[];return c.forEach(V=>{const K=S.get(V.toString());wt(!!K),k.push(K)}),k}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Je.fromPath(i);e.mutations.push(new y0(a,e.precondition(a)))}),yield(r=(0,Y.Z)(function*(i,a){const c=it(i),h=Fm(c.serializer)+"/documents",g={writes:a.map(v=>eh(c.serializer,v))};yield c.Io("Commit",h,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?lr.exists(!1):lr.updateTime(t):lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new ke(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(t)}return lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qL{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new RA(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Y.Z)(function*(){const t=new Wx(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Kf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!LS(t)}return!1}}class KL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Si.UNAUTHENTICATED,this.clientId=xw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Y.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Y.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=dh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function gI(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,Y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Y.Z)(function*(a){r.isEqual(a)||(yield vA(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),VT.apply(this,arguments)}function BT(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,Y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield mI(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>UA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>UA(e.remoteStore,a)),n._onlineComponents=e}),jT.apply(this,arguments)}function $T(n){return"FirebaseError"===n.name?n.code===he.FAILED_PRECONDITION||n.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function mI(n){return HT.apply(this,arguments)}function HT(){return HT=(0,Y.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!$T(t))throw t;Qs("Error using user provided cache. Falling back to memory cache: "+t),yield gI(n,new n_)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield gI(n,new n_);return n._offlineComponents}),HT.apply(this,arguments)}function i_(n){return _I.apply(this,arguments)}function _I(){return _I=(0,Y.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield BT(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield BT(n,new r_))),n._onlineComponents}),_I.apply(this,arguments)}function qx(n){return mI(n).then(e=>e.persistence)}function yI(n){return mI(n).then(e=>e.localStore)}function vI(n){return i_(n).then(e=>e.remoteStore)}function II(n){return i_(n).then(e=>e.syncEngine)}function Sp(n){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,Y.Z)(function*(n){const e=yield i_(n),t=e.eventManager;return t.onListen=GA.bind(null,e.syncEngine),t.onUnlisten=wp.bind(null,e.syncEngine),t}),Ap.apply(this,arguments)}function zT(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(i,a,c,h,g){const v=new Dp({next:S=>{a.enqueueAndForget(()=>Xm(i,b));const k=S.docs.has(c);!k&&S.fromCache?g.reject(new ke(he.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&h&&"server"===h.source?g.reject(new ke(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new TT(bm(c.path),v,{includeMetadataChanges:!0,Ku:!0});return oI(i,b)}(yield Sp(n),n.asyncQueue,e,t,r)})),r.promise}function iR(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(i,a,c,h,g){const v=new Dp({next:S=>{a.enqueueAndForget(()=>Xm(i,b)),S.fromCache&&"server"===h.source?g.reject(new ke(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new TT(c,v,{includeMetadataChanges:!0,Ku:!0});return oI(i,b)}(yield Sp(n),n.asyncQueue,e,t,r)})),r.promise}function sR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const oR=new Map;function aR(n,e,t){if(!t)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Qx(n,e,t,r){if(!0===e&&!0===r)throw new ke(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Xx(n){if(!Je.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Jx(n){if(Je.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WT(n);throw new ke(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ek(n,e){if(e<=0)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tk{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new ke(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ke(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ke(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NL;switch(t.type){case"firstParty":return new xP(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ke(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=oR.get(e);t&&(Be("ComponentProvider","Removing Datastore"),oR.delete(e),t.terminate())}(this),Promise.resolve()}}class dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class ec extends Hi{constructor(e,t,r){super(e,t,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new Je(e))}withConverter(e){return new ec(this.firestore,e,this._path)}}function s(n,e,...t){if(n=(0,M.m9)(n),aR("collection","path",e),n instanceof EI){const r=un.fromString(e,...t);return Jx(r),new ec(n,null,r)}{if(!(n instanceof dr||n instanceof ec))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return Jx(r),new ec(n.firestore,null,r)}}function u(n,e,...t){if(n=(0,M.m9)(n),1===arguments.length&&(e=xw.A()),aR("doc","path",e),n instanceof EI){const r=un.fromString(e,...t);return Xx(r),new dr(n,null,new Je(r))}{if(!(n instanceof dr||n instanceof ec))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return Xx(r),new dr(n.firestore,n instanceof ec?n.converter:null,new Je(r))}}function l(n,e){return n=(0,M.m9)(n),e=(0,M.m9)(e),(n instanceof dr||n instanceof ec)&&(e instanceof dr||e instanceof ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function d(n,e){return n=(0,M.m9)(n),e=(0,M.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&Ni(n._query,e._query)&&n.converter===e.converter}class p{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new RA(this,"async_queue_retry"),this.Xc=()=>{const t=uT();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=uT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=uT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Nr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Y.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!il(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Xn("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=sI.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&ut()}verifyOperationInProgress(){}sa(){var e=this;return(0,Y.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function y(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class w{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class R extends EI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new p,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||te(this),this._firestoreClient.terminate()}}function z(n){return n._firestoreClient||te(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function te(n){var e,t,r;const i=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new GP(n._databaseId,h,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,sR(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new KL(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function nt(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,Y.Z)(function*(){try{yield gI(n,t),yield BT(n,e),r.resolve()}catch(i){const a=i;if(!$T(a))throw a;Qs("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function fh(n){if(n._initialized||n._terminated)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ja(ei.fromBase64String(e))}catch(t){throw new ke(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ja(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class s_{constructor(e){this._methodName=e}}class uR{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const uj=/^__.*__$/;class cj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pm(e,this.data,t,this.fieldTransforms)}}class JL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class cR{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new cR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return hR(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(eF(this.ca)&&uj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class lj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_p(e)}ya(e,t,r,i=!1){return new cR({ca:e,methodName:t,ga:r,path:Jn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o_(n){const e=n._freezeSettings(),t=_p(n._databaseId);return new lj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lR(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);ak("Data must be an object, but it was:",c,r);const h=rF(r,c);let g,v;if(a.merge)g=new yr(c.fieldMask),v=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const S of a.mergeFields){const k=KT(e,S,t);if(!c.contains(k))throw new ke(he.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);sF(b,k)||b.push(k)}g=new yr(b),v=c.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,v=c.fieldTransforms;return new cj(new ji(h),g,v)}class qT extends s_{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qT}}function tF(n,e,t){return new cR({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ik extends s_{_toFieldTransform(e){return new Iv(e.path,new Qd)}isEqual(e){return e instanceof ik}}class dj extends s_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=tF(this,e,!0),r=this.pa.map(a=>a_(a,t)),i=new Xd(r);return new Iv(e.path,i)}isEqual(e){return this===e}}class hj extends s_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=tF(this,e,!0),r=this.pa.map(a=>a_(a,t)),i=new Jd(r);return new Iv(e.path,i)}isEqual(e){return this===e}}class fj extends s_{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Am(e.serializer,AS(e.serializer,this.Ia));return new Iv(e.path,t)}isEqual(e){return this===e}}function sk(n,e,t,r){const i=n.ya(1,e,t);ak("Data must be an object, but it was:",i,r);const a=[],c=ji.empty();sl(r,(g,v)=>{const b=dR(e,g,t);v=(0,M.m9)(v);const S=i.da(b);if(v instanceof qT)a.push(b);else{const k=a_(v,S);null!=k&&(a.push(b),c.set(b,k))}});const h=new yr(a);return new JL(c,h,i.fieldTransforms)}function ok(n,e,t,r,i,a){const c=n.ya(1,e,t),h=[KT(e,r,t)],g=[i];if(a.length%2!=0)throw new ke(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)h.push(KT(e,a[k])),g.push(a[k+1]);const v=[],b=ji.empty();for(let k=h.length-1;k>=0;--k)if(!sF(v,h[k])){const V=h[k];let K=g[k];K=(0,M.m9)(K);const fe=c.da(V);if(K instanceof qT)v.push(V);else{const Ee=a_(K,fe);null!=Ee&&(v.push(V),b.set(V,Ee))}}const S=new yr(v);return new JL(b,S,c.fieldTransforms)}function nF(n,e,t,r=!1){return a_(t,n.ya(r?4:3,e))}function a_(n,e){if(iF(n=(0,M.m9)(n)))return ak("Unsupported field value:",e,n),rF(n,e);if(n instanceof s_)return function(t,r){if(!eF(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=a_(c,r.wa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,M.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return AS(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=cr.fromDate(t);return{timestampValue:up(r.serializer,i)}}if(t instanceof cr){const i=new cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:up(r.serializer,i)}}if(t instanceof uR)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ja)return{bytesValue:HS(r.serializer,t._byteString)};if(t instanceof dr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${WT(t)}`)}(n,e)}function rF(n,e){const t={};return Zw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sl(n,(r,i)=>{const a=a_(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function iF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof uR||n instanceof Ja||n instanceof dr||n instanceof s_)}function ak(n,e,t){if(!iF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=WT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function KT(n,e,t){if((e=(0,M.m9)(e))instanceof gh)return e._internalPath;if("string"==typeof e)return dR(n,e);throw hR("Field path arguments must be of type string or ",n,!1,void 0,t)}const pj=new RegExp("[~\\*/\\[\\]]");function dR(n,e,t){if(e.search(pj)>=0)throw hR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gh(...e.split("."))._internalPath}catch{throw hR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hR(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||c)&&(g+=" (found",a&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new ke(he.INVALID_ARGUMENT,h+n+g)}function sF(n,e){return n.some(t=>t.isEqual(e))}class ZT{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fR("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gj extends ZT{data(){return super.data()}}function fR(n,e){return"string"==typeof e?dR(n,e):e instanceof gh?e._internalPath:e._delegate._internalPath}function oF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uk{}class YT extends uk{}function Rp(n,e,...t){let r=[];e instanceof uk&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof wI).length,c=i.filter(h=>h instanceof QT).length;if(a>1||a>0&&c>0)throw new ke(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class QT extends YT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new QT(e,t,r)}_apply(e){const t=this._parse(e);return lF(e._query,t),new Hi(e.firestore,e.converter,np(e._query,t))}_parse(e){const t=o_(e.firestore);return function(i,a,c,h,g,v,b){let S;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){cF(b,v);const k=[];for(const V of b)k.push(uF(h,i,V));S={arrayValue:{values:k}}}else S=uF(h,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||cF(b,v),S=nF(c,"where",b,"in"===v||"not-in"===v);return cn.create(g,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class wI extends uk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wI(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Nn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const h of c)lF(a,h),a=np(a,h)}(e._query,t),new Hi(e.firestore,e.converter,np(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ck extends YT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ck(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new ep(i,a);return function(h,g){if(null===d0(h)){const v=mv(h);null!==v&&dF(0,v,g.field)}}(r,c),c}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ka(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class pR extends YT{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new pR(e,t,r)}_apply(e){return new Hi(e.firestore,e.converter,Yd(e._query,this._limit,this._limitType))}}class gR extends YT{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gR(e,t,r)}_apply(e){const t=aF(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(i=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class mR extends YT{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mR(e,t,r)}_apply(e){const t=aF(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(i=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function aF(n,e,t,r){if(t[0]=(0,M.m9)(t[0]),t[0]instanceof ZT)return function(i,a,c,h,g){if(!h)throw new ke(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const b of Ao(i))if(b.field.isKeyField())v.push(Wd(a,h.key));else{const S=h.data.field(b.field);if(dv(S))throw new ke(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=b.field.canonicalString();throw new ke(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}v.push(S)}return new ll(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=o_(n.firestore);return function(a,c,h,g,v,b){const S=a.explicitOrderBy;if(v.length>S.length)throw new ke(he.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let V=0;V<v.length;V++){const K=v[V];if(S[V].field.isKeyField()){if("string"!=typeof K)throw new ke(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof K}`);if(!h0(a)&&-1!==K.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${K}' contains a slash.`);const fe=a.path.child(un.fromString(K));if(!Je.isDocumentKey(fe))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Ee=new Je(fe);k.push(Wd(c,Ee))}else{const fe=nF(h,g,K);k.push(fe)}}return new ll(k,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function uF(n,e,t){if("string"==typeof(t=(0,M.m9)(t))){if(""===t)throw new ke(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h0(e)&&-1!==t.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Je.isDocumentKey(r))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wd(n,new Je(r))}if(t instanceof dr)return Wd(n,t._key);throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${WT(t)}.`)}function cF(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lF(n,e){if(e.isInequality()){const r=mv(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ke(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=d0(n);null!==a&&dF(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dF(n,e,t){if(!t.isEqual(e))throw new ke(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class lk{convertValue(e,t="none"){switch(Zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return sl(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new uR(Pr(e.latitude),Pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){const t=ol(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);wt(k0(r));const i=new Ku(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(t)||Xn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function _R(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Cj extends lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}class u_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mh extends ZT{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new XT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fR("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class XT extends mh{data(e={}){return super.data(e)}}class Np{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new u_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new XT(this._firestore,this._userDataWriter,r.key,r,new u_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new XT(r._firestore,r._userDataWriter,c.doc.key,c.doc,new u_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new XT(r._firestore,r._userDataWriter,c.doc.key,c.doc,new u_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==c.type&&(g=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),v=a.indexOf(c.doc.key)),{type:Dj(c.type),doc:h,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Dj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function fF(n,e){return n instanceof mh&&e instanceof mh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Np&&e instanceof Np&&n._firestore===e._firestore&&d(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Pp extends lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}function pF(n,e,t){n=dn(n,dr);const r=dn(n.firestore,R),i=_R(n.converter,e,t);return TI(r,[lR(o_(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,lr.none())])}function gF(n,e,t,...r){n=dn(n,dr);const i=dn(n.firestore,R),a=o_(i);let c;return c="string"==typeof(e=(0,M.m9)(e))||e instanceof gh?ok(a,"updateDoc",n._key,e,t,r):sk(a,"updateDoc",n._key,e),TI(i,[c.toMutation(n._key,lr.exists(!0))])}function mF(n,...e){var t,r,i;n=(0,M.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||y(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(y(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,v,b;if(n instanceof dr)v=dn(n.firestore,R),b=bm(n._key.path),g={next:S=>{e[c]&&e[c](dk(v,n,S))},error:e[c+1],complete:e[c+2]};else{const S=dn(n,Hi);v=dn(S.firestore,R),b=S._query;const k=new Pp(v);g={next:V=>{e[c]&&e[c](new Np(v,k,S,V))},error:e[c+1],complete:e[c+2]},oF(n._query)}return function(S,k,V,K){const fe=new Dp(K),Ee=new TT(k,fe,V);return S.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return oI(yield Sp(S),Ee)})),()=>{fe.Dc(),S.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return Xm(yield Sp(S),Ee)}))}}(z(v),b,h,g)}function TI(n,e){return function(t,r){const i=new Nr;return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function zA(n,e,t){return cI.apply(this,arguments)}(yield II(t),r,i)})),i.promise}(z(n),e)}function dk(n,e,t){const r=t.docs.get(e._key),i=new Pp(n);return new mh(n,i,e._key,r,new u_(t.hasPendingWrites,t.fromCache),e.converter)}const Gj={maxAttempts:5};class _F{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=o_(e)}set(e,t,r){this._verifyNotCommitted();const i=xp(e,this._firestore),a=_R(i.converter,t,r),c=lR(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,lr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=xp(e,this._firestore);let c;return c="string"==typeof(t=(0,M.m9)(t))||t instanceof gh?ok(this._dataReader,"WriteBatch.update",a._key,t,r,i):sk(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xp(e,this._firestore);return this._mutations=this._mutations.concat(new Qa(t._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xp(n,e){if((n=(0,M.m9)(n)).firestore!==e)throw new ke(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=o_(e)}get(e){const t=xp(e,this._firestore),r=new Cj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new ZT(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new ZT(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=xp(e,this._firestore),a=_R(i.converter,t,r),c=lR(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=xp(e,this._firestore);let c;return c="string"==typeof(t=(0,M.m9)(t))||t instanceof gh?ok(this._dataReader,"Transaction.update",a._key,t,r,i):sk(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=xp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xp(e,this._firestore),r=new Pp(this._firestore);return super.get(e).then(i=>new mh(this._firestore,r,t._key,i._document,new u_(!1,!1),t.converter))}}function hk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vF(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function IF(){if(!function ca(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){rl=Zc.SDK_VERSION,(0,Zc._registerComponent)(new ar.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new R(new PP(t.getProvider("auth-internal")),new kP(t.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(h.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Zc.registerVersion)(qD,"3.13.0",n),(0,Zc.registerVersion)(qD,"3.13.0","esm2017")}();class JT{constructor(e){this._delegate=e}static fromBase64String(e){return IF(),new JT(Ja.fromBase64String(e))}static fromUint8Array(e){return vF(),new JT(Ja.fromUint8Array(e))}toBase64(){return IF(),this._delegate.toBase64()}toUint8Array(){return vF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fk(n){return function e$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class t${enableIndexedDbPersistence(e,t){return function Ce(n,e){fh(n=dn(n,R));const t=z(n);if(t._uninitializedComponentsProvider)throw new ke(he.FAILED_PRECONDITION,"SDK cache is already specified.");Qs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new r_;return nt(t,i,new fI(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function je(n){fh(n=dn(n,R));const e=z(n);if(e._uninitializedComponentsProvider)throw new ke(he.FAILED_PRECONDITION,"SDK cache is already specified.");Qs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new r_;return nt(e,r,new pI(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ct(n){if(n._initialized&&!n._terminated)throw new ke(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{yield(t=(0,Y.Z)(function*(r){if(!Do.D())return Promise.resolve();const i=r+"main";yield Do.delete(i)}),function(r){return t.apply(this,arguments)})(oh(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class EF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ku||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function nk(n,e,t,r={}){var i;const a=(n=dn(n,EI))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let h,g;if("string"==typeof r.mockUserToken)h=r.mockUserToken,g=Si.MOCK_USER;else{h=(0,M.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ke(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Si(v)}n._authCredentials=new NP(new ym(h,g))}}(this._delegate,e,t,r)}enableNetwork(){return function Vt(n){return function Kx(n){return n.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield qx(n),t=yield vI(n);return e.setNetworkEnabled(!0),function(r){const i=it(r);return i.vu.delete(0),yp(i)}(t)}))}(z(n=dn(n,R)))}(this._delegate)}disableNetwork(){return function Yt(n){return function Zx(n){return n.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield qx(n),t=yield vI(n);return e.setNetworkEnabled(!1),(r=(0,Y.Z)(function*(i){const a=it(i);a.vu.add(0),yield uh(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(z(n=dn(n,R)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Qx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Le(n){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function YA(n,e){return NT.apply(this,arguments)}(yield II(e),t)})),t.promise}(z(n=dn(n,R)))}(this._delegate)}onSnapshotsInSync(e){return function Oj(n,e){return function YL(n,e){const t=new Dp(e);return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return r=yield Sp(n),i=t,it(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return r=yield Sp(n),i=t,void it(r).ku.delete(i);var r,i}))}}(z(n=dn(n,R)),y(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new CI(this,s(this._delegate,e))}catch(t){throw eo(t,"collection()","Firestore.collection()")}}doc(e){try{return new eu(this,u(this._delegate,e))}catch(t){throw eo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new to(this,function o(n,e){if(n=dn(n,EI),aR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(t=e,new Ka(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw eo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Wj(n,e,t){n=dn(n,R);const r=Object.assign(Object.assign({},Gj),t);return function(i){if(i.maxAttempts<1)throw new ke(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const h=new Nr;return i.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){const g=yield function GT(n){return i_(n).then(e=>e.datastore)}(i);new qL(i.asyncQueue,g,c,a,h).run()})),h.promise}(z(n),i=>e(new zj(n,i)),r)}(this._delegate,t=>e(new wF(this,t)))}batch(){return z(this._delegate),new TF(new _F(this._delegate,e=>TI(this._delegate,e)))}loadBundle(e){return function Ls(n,e){const t=z(n=dn(n,R)),r=new w;return function Yx(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?FS().encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return UT(g,v);if(g instanceof ArrayBuffer)return UT(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new zx(g,c);var g}(t,_p(e));n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){!function nR(n,e,t){const r=it(n);var i;(i=(0,Y.Z)(function*(a,c,h){try{const g=yield c.getMetadata();if(yield function(k,V){const K=it(k),fe=vr(V.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",Ee=>K.qs.getBundleMetadata(Ee,V.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(fe)>=0)}(a.localStore,g))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=g).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(Mx(g));const v=new jA(g,a.localStore,c.serializer);let b=yield c.bc();for(;b;){const k=yield v.zu(b);k&&h._updateProgress(k),b=yield c.bc()}const S=yield v.complete();return yield Ju(a,S.Ju,void 0),yield function(k,V){const K=it(k);return K.persistence.runTransaction("Save bundle","readwrite",fe=>K.qs.saveBundleMetadata(fe,V))}(a.localStore,g),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(g){return Qs("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var k}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield II(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function tc(n,e){return function QL(n,e){return n.asyncQueue.enqueue((0,Y.Z)(function*(){return function(t,r){const i=it(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield yI(n),e)}))}(z(n=dn(n,R)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new to(this,t):null)}}class yR extends lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new JT(new Ja(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return eu.forKey(t,this.firestore,null)}}class wF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yR(e)}get(e){const t=l_(e);return this._delegate.get(t).then(r=>new eC(this._firestore,new mh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=l_(e);return r?(hk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=l_(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=l_(e);return this._delegate.delete(t),this}}class TF{constructor(e){this._delegate=e}set(e,t,r){const i=l_(e);return r?(hk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=l_(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=l_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class c_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new XT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=c_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new c_(e,new yR(e),t),i.set(t,a)),a}}c_.INSTANCES=new WeakMap;class eu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yR(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new eu(t,new dr(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new eu(t,new dr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new CI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new CI(this.firestore,s(this._delegate,e))}catch(t){throw eo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,M.m9)(e))instanceof dr&&l(this._delegate,e)}set(e,t){t=hk("DocumentReference.set",t);try{return t?pF(this._delegate,e,t):pF(this._delegate,e)}catch(r){throw eo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?gF(this._delegate,e):gF(this._delegate,e,t,...r)}catch(i){throw eo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function kj(n){return TI(dn(n.firestore,R),[new Qa(n._key,lr.none())])}(this._delegate)}onSnapshot(...e){const t=CF(e),r=bF(e,i=>new eC(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return mF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Aj(n){n=dn(n,dr);const e=dn(n.firestore,R),t=z(e),r=new Pp(e);return function rR(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(i,a,c){try{const h=yield function(g,v){const b=it(g);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new ke(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=dh(h,`Failed to get document '${a} from cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield yI(n),e,t);var r})),t.promise}(t,n._key).then(i=>new mh(e,r,n._key,i,new u_(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Rj(n){n=dn(n,dr);const e=dn(n.firestore,R);return zT(z(e),n._key,{source:"server"}).then(t=>dk(e,n,t))}(this._delegate):function Sj(n){n=dn(n,dr);const e=dn(n.firestore,R);return zT(z(e),n._key).then(t=>dk(e,n,t))}(this._delegate),t.then(r=>new eC(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new eu(this.firestore,this._delegate.withConverter(e?c_.getInstance(this.firestore,e):null))}}function eo(n,e,t){return n.message=n.message.replace(e,t),n}function CF(n){for(const e of n)if("object"==typeof e&&!fk(e))return e;return{}}function bF(n,e){var t,r;let i;return i=fk(n[0])?n[0]:fk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class eC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new eu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fF(this._delegate,e._delegate)}}class tC extends eC{data(e){const t=this._delegate.data(e);return function RP(n,e){n||ut()}(void 0!==t),t}}class to{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yR(e)}where(e,t,r){try{return new to(this.firestore,Rp(this._delegate,function mj(n,e,t){const r=e,i=fR("where",n);return QT._create(i,r,t)}(e,t,r)))}catch(i){throw eo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new to(this.firestore,Rp(this._delegate,function _j(n,e="asc"){const t=e,r=fR("orderBy",n);return ck._create(r,t)}(e,t)))}catch(r){throw eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new to(this.firestore,Rp(this._delegate,function yj(n){return ek("limit",n),pR._create("limit",n,"F")}(e)))}catch(t){throw eo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new to(this.firestore,Rp(this._delegate,function vj(n){return ek("limitToLast",n),pR._create("limitToLast",n,"L")}(e)))}catch(t){throw eo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new to(this.firestore,Rp(this._delegate,function Ij(...n){return gR._create("startAt",n,!0)}(...e)))}catch(t){throw eo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new to(this.firestore,Rp(this._delegate,function Ej(...n){return gR._create("startAfter",n,!1)}(...e)))}catch(t){throw eo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new to(this.firestore,Rp(this._delegate,function wj(...n){return mR._create("endBefore",n,!1)}(...e)))}catch(t){throw eo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new to(this.firestore,Rp(this._delegate,function Tj(...n){return mR._create("endAt",n,!0)}(...e)))}catch(t){throw eo(t,"endAt()","Query.endAt()")}}isEqual(e){return d(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Pj(n){n=dn(n,Hi);const e=dn(n.firestore,R),t=z(e),r=new Pp(e);return function ZL(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(i,a,c){try{const h=yield Kv(i,a,!0),g=new bT(a,h.ir),v=g.sc(h.documents),b=g.applyChanges(v,!1);c.resolve(b.snapshot)}catch(h){const g=dh(h,`Failed to execute query '${a} against cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield yI(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Np(e,r,n,i))}(this._delegate):"server"===e?.source?function xj(n){n=dn(n,Hi);const e=dn(n.firestore,R),t=z(e),r=new Pp(e);return iR(t,n._query,{source:"server"}).then(i=>new Np(e,r,n,i))}(this._delegate):function Nj(n){n=dn(n,Hi);const e=dn(n.firestore,R),t=z(e),r=new Pp(e);return oF(n._query),iR(t,n._query).then(i=>new Np(e,r,n,i))}(this._delegate),t.then(r=>new pk(this.firestore,new Np(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CF(e),r=bF(e,i=>new pk(this.firestore,new Np(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return mF(this._delegate,t,r)}withConverter(e){return new to(this.firestore,this._delegate.withConverter(e?c_.getInstance(this.firestore,e):null))}}class r${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new tC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new to(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new tC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new r$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new tC(this._firestore,r))})}isEqual(e){return fF(this._delegate,e._delegate)}}class CI extends to{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new eu(this.firestore,e):null}doc(e){try{return new eu(this.firestore,void 0===e?u(this._delegate):u(this._delegate,e))}catch(t){throw eo(t,"doc()","CollectionReference.doc()")}}add(e){return function Mj(n,e){const t=dn(n.firestore,R),r=u(n),i=_R(n.converter,e);return TI(t,[lR(o_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new eu(this.firestore,t))}isEqual(e){return l(this._delegate,e._delegate)}withConverter(e){return new CI(this.firestore,this._delegate.withConverter(e?c_.getInstance(this.firestore,e):null))}}function l_(n){return dn(n,dr)}class gk{constructor(...e){this._delegate=new gh(...e)}static documentId(){return new gk(Jn.keyField().canonicalString())}isEqual(e){return(e=(0,M.m9)(e))instanceof gh&&this._delegate._internalPath.isEqual(e._internalPath)}}class d_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Kj(){return new ik("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new d_(e)}static delete(){const e=function qj(){return new qT("deleteField")}();return e._methodName="FieldValue.delete",new d_(e)}static arrayUnion(...e){const t=function Zj(...n){return new dj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new d_(t)}static arrayRemove(...e){const t=function Yj(...n){return new hj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new d_(t)}static increment(e){const t=function Qj(n){return new fj("increment",n)}(e);return t._methodName="FieldValue.increment",new d_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const i$={Firestore:EF,GeoPoint:uR,Timestamp:cr,Blob:JT,Transaction:wF,WriteBatch:TF,DocumentReference:eu,DocumentSnapshot:eC,Query:to,QueryDocumentSnapshot:tC,QuerySnapshot:pk,CollectionReference:CI,FieldPath:gk,FieldValue:d_,setLogLevel:function n$(n){!function sv(n){bo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function DF(n,e){return function a$(n,e=Ti.z){return new ss.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function mk(n,e){return DF(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function vR(n,e){return mk(n,e).pipe(Sd(void 0),Hb(),(0,mt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const g=i.find(b=>b.doc.ref.isEqual(c.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function SF(n,e,t){return vR(n,t).pipe($a((r,i)=>function c$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function l$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _k(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _k(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _k(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,Gb.x)(),(0,mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function _k(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function AF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function o$(n){(function s$(n,e){n.INTERNAL.registerComponent(new ar.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},i$)))})(n,(e,t)=>new EF(e,t,new t$)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(zb.Z);class RF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vR(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Sd(void 0),Hb(),jr(([r,i])=>i.length>0||!r),(0,mt.U)(([r,i])=>i),Ht.iC)}auditTrail(e){return this.stateChanges(e).pipe($a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AF(e);return SF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(e={}){return mk(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ht.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(Ht.iC)}add(e){return this.ref.add(e)}doc(e){return new NF(this.ref.doc(e),this.afs)}}class NF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=kF(r,t);return new RF(i,a,this.afs)}snapshotChanges(){return function u$(n,e){return DF(n,e).pipe(Sd(void 0),Hb(),(0,mt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(Ht.iC)}}class d${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vR(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),jr(t=>t.length>0),Ht.iC):vR(this.query,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}auditTrail(e){return this.stateChanges(e).pipe($a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AF(e);return SF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(e={}){return mk(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ht.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(Ht.iC)}}const PF=new _.OlP("angularfire2.enableFirestorePersistence"),xF=new _.OlP("angularfire2.firestore.persistenceSettings"),h$=new _.OlP("angularfire2.firestore.settings"),f$=new _.OlP("angularfire2.firestore.use-emulator");function kF(n,e=(t=>t)){return{query:e(n),ref:n}}let MF=(()=>{class n{constructor(t,r,i,a,c,h,g,v,b,S,k,V,K,fe,Ee,Ze,at){this.schedulers=g;const et=(0,An.on)(t,h,r),lt=b;S&&Id(et,h,k,K,fe,Ee,V,Ze),[this.firestore,this.persistenceEnabled$]=(0,An.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Pt=h.runOutsideAngular(()=>et.firestore());if(a&&Pt.settings(a),lt&&Pt.useEmulator(...lt),i&&!js(c)){const $t=()=>{try{return(0,mn.D)(Pt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Kr){return typeof console<"u"&&console.warn(Kr),(0,vt.of)(!1)}};return[Pt,h.runOutsideAngular($t)]}return[Pt,(0,vt.of)(!1)]},[a,lt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=kF(i,r),h=this.schedulers.ngZone.run(()=>a);return new RF(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new d$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(An.Dh),_.LFG(An.xv,8),_.LFG(PF,8),_.LFG(h$,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ht.HU),_.LFG(xF,8),_.LFG(f$,8),_.LFG(Ed,8),_.LFG($c,8),_.LFG(ku,8),_.LFG(Rg,8),_.LFG(Eo,8),_.LFG(gf,8),_.LFG(mf,8),_.LFG(_d,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),p$=(()=>{class n{constructor(){xu.Z.registerVersion("angularfire",Ht.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:PF,useValue:!0},{provide:xF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[MF]}),n})();var IR=O(4829),OF=O(2420);const LF="@firebase/database";let yk="";function UF(n){yk=n}class _${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,M.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,M.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class y${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,M.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _$(e)}}catch{}return new y$},h_=VF("localStorage"),vk=VF("sessionStorage"),bI=new gr.Yd("@firebase/database"),BF=function(){let n=1;return function(){return n++}}(),jF=function(n){const e=(0,M.dS)(n),t=new M.gQ;t.update(e);const r=t.digest();return M.US.encodeByteArray(r)},nC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=nC.apply(null,r):e+="object"==typeof r?(0,M.Wl)(r):r,e+=" "}return e};let f_=null,$F=!0;const HF=function(n,e){(0,M.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(bI.logLevel=gr.in.VERBOSE,f_=bI.log.bind(bI),e&&vk.set("logging_enabled",!0)):"function"==typeof n?f_=n:(f_=null,vk.remove("logging_enabled"))},Ji=function(...n){if(!0===$F&&($F=!1,null===f_&&!0===vk.get("logging_enabled")&&HF(!0)),f_){const e=nC.apply(null,n);f_(e)}},rC=function(n){return function(...e){Ji(n,...e)}},Ik=function(...n){const e="FIREBASE INTERNAL ERROR: "+nC(...n);bI.error(e)},Cl=function(...n){const e=`FIREBASE FATAL ERROR: ${nC(...n)}`;throw bI.error(e),new Error(e)},Fs=function(...n){const e="FIREBASE WARNING: "+nC(...n);bI.warn(e)},ER=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},kp="[MIN_NAME]",_h="[MAX_NAME]",p_=function(n,e){if(n===e)return 0;if(n===kp||e===_h)return-1;if(e===kp||n===_h)return 1;{const t=WF(n),r=WF(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},E$=function(n,e){return n===e?0:n<e?-1:1},iC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,M.Wl)(e))},Ek=function(n){if("object"!=typeof n||null===n)return(0,M.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,M.Wl)(e[r]),t+=":",t+=Ek(n[e[r]]);return t+="}",t},GF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function es(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zF=function(n){(0,M.hu)(!ER(n),"Invalid JSON number");const r=1023;let i,a,c,h,g;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let S="";for(g=0;g<64;g+=8){let k=parseInt(b.substr(g,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},b$=new RegExp("^-?(0*)\\d{1,10}$"),WF=function(n){if(b$.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},DI=function(n){try{n()}catch(e){setTimeout(()=>{throw Fs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},sC=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class R${constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Fs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class N${constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fs(e)}}let oC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const QF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eU="websocket",tU="long_polling";class Tk{constructor(e,t,r,i,a=!1,c="",h=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&h_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nU(n,e,t){let r;if((0,M.hu)("string"==typeof e,"typeof type must == string"),(0,M.hu)("object"==typeof t,"typeof params must == object"),e===eU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==tU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function P$(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return es(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class x${constructor(){this.counters_={}}incrementCounter(e,t=1){(0,M.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,M.p$)(this.counters_)}}const Ck={},bk={};function Dk(n){const e=n.toString();return Ck[e]||(Ck[e]=new x$),Ck[e]}class M${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&DI(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Mp{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rC(e),this.stats_=Dk(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),nU(t,tU,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new M$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,M.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sk((...a)=>{const[c,h,g,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&QF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mp.forceAllow_=!0}static forceDisallow(){Mp.forceDisallow_=!0}static isAvailable(){return!((0,M.Yr)()||!Mp.forceAllow_&&(Mp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,M.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,M.h$)(t),i=GF(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,M.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,M.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Sk{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,M.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=BF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Sk.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Ji("frame writing exception"),h.stack&&Ji(h.stack),Ji(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ji("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,M.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ji("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let TR=null;typeof MozWebSocket<"u"?TR=MozWebSocket:typeof WebSocket<"u"&&(TR=WebSocket);let SI=(()=>{class n{constructor(t,r,i,a,c,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rC(this.connId),this.stats_=Dk(r),this.connURL=n.connectionURL_(r,h,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const h={v:"5"};return!(0,M.Yr)()&&typeof location<"u"&&location.hostname&&QF.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),c&&(h.p=c),nU(t,eU,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h_.set("previous_websocket_failure",!0);try{let i;if((0,M.Yr)()){i={headers:{"User-Agent":`Firebase/5/${yk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new TR(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==TR&&!n.forceDisallow_}static previouslyFailed(){return h_.isInMemoryStorage||!0===h_.get("previous_websocket_failure")}markConnectionHealthy(){h_.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,M.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,M.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,M.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=GF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Mp,SI]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=SI&&SI.isAvailable();let i=r&&!SI.previouslyFailed();if(t.webSocketOnly&&(r||Fs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[SI];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class mU{constructor(e,t,r,i,a,c,h,g,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rC("c:"+this.id+":"),this.transportManager_=new cU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=sC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=iC("t",e),r=iC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=iC("t",e),r=iC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=iC("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Ik("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ik("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Fs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),sC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _U{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class yU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,M.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,M.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class CR extends yU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,M.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new CR}getInitialEvent(e){return(0,M.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Dn(){return new Bn("")}function nn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Op(n){return n.pieces_.length-n.pieceNum_}function nr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Bn(n.pieces_,e)}function Rk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function aC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function EU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Bn(e,0)}function xr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Bn(t,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function no(n,e){const t=nn(n),r=nn(e);if(null===t)return e;if(t===r)return no(nr(n),nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function nH(n,e){const t=aC(n,0),r=aC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=p_(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Nk(n,e){if(Op(n)!==Op(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function tu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Op(n)>Op(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class rH{constructor(e,t){this.errorPrefix_=t,this.parts_=aC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,M.ug)(this.parts_[r]);wU(this)}}function wU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+g_(n))}function g_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Pk extends yU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Pk}getInitialEvent(e){return(0,M.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const uC=1e3;let DR,m_=(()=>{class n extends _U{constructor(t,r,i,a,c,h,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=rC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=uC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,M.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&CR.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,M.Wl)(c)),(0,M.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new M.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const g=h.d;"ok"===h.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,M.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,M.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,g=>{const v=g.d,b=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,M.r3)(t,"w")){const i=(0,M.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Fs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,M.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,M.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,M.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,M.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Ik("Unrecognized action received from server: "+(0,M.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,M.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=uC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=uC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Y.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,v=null;const b=function(){v?v.close():(g=!0,a())};t.realtime_={close:b,sendRequest:function(V){(0,M.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,K]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);g?Ji("getToken() completed but was canceled"):(Ji("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=K&&K.token,v=new mU(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{Fs(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),g||(t.repoInfo_.nodeAdmin&&Fs(V),b())}}})()}interrupt(t){Ji("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ji("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,M.xb)(this.interruptReasons_)&&(this.reconnectDelay_=uC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>Ek(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Bn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ji("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ji("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,M.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+yk.replace(/\./g,"-")]=1,(0,M.uI)()?t["framework.cordova"]=1:(0,M.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=CR.getInstance().currentlyOnline();return(0,M.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new hn(e,t)}}class bR{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new hn(kp,e),i=new hn(kp,t);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class bU extends bR{static get __EMPTY_NODE(){return DR}static set __EMPTY_NODE(e){DR=e}compare(e,t){return p_(e.name,t.name)}isDefinedOn(e){throw(0,M.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return hn.MIN}maxPost(){return new hn(_h,DR)}makePost(e,t){return(0,M.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new hn(e,DR)}toString(){return".key"}}const bl=new bU;class SR{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let kk,nc=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ro.EMPTY_NODE,this.right=c??Ro.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ro.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ro.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ro{constructor(e,t=Ro.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ro(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,nc.BLACK,null,null))}remove(e){return new Ro(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SR(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new SR(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new SR(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new SR(this.root_,null,this.comparator_,!0,e)}}function dH(n,e){return p_(n.name,e.name)}function xk(n,e){return p_(n,e)}Ro.EMPTY_NODE=new class lH{copy(e,t,r,i,a){return this}insert(e,t,r){return new nc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const DU=function(n){return"number"==typeof n?"number:"+zF(n):"string:"+n},SU=function(n){if(n.isLeafNode()){const e=n.val();(0,M.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,M.r3)(e,".sv"),"Priority must be a string or number.")}else(0,M.hu)(n===kk||n.isEmpty(),"priority of unexpected type.");(0,M.hu)(n===kk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AU,RU,NU,AI=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,M.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SU(this.priorityNode_)}static set __childrenNodeConstructor(t){AU=t}static get __childrenNodeConstructor(){return AU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rn(t)?this:".priority"===nn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=nn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,M.hu)(".priority"!==i||1===Op(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(nr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+DU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?zF(this.value_):this.value_,this.lazyHash_=jF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,M.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,M.hu)(a>=0,"Unknown leaf type: "+r),(0,M.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const hr=new class gH extends bR{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?p_(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(_h,new AI("[PRIORITY-POST]",NU))}makePost(e,t){const r=RU(e);return new hn(t,new AI("[PRIORITY-POST]",r))}toString(){return".priority"}},mH=Math.log(2);class _H{constructor(e){this.count=parseInt(Math.log(e+1)/mH,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const AR=function(n,e,t,r){n.sort(e);const i=function(g,v){const b=v-g;let S,k;if(0===b)return null;if(1===b)return S=n[g],k=t?t(S):S,new nc(k,S.node,nc.BLACK,null,null);{const V=parseInt(b/2,10)+g,K=i(g,V),fe=i(V+1,v);return S=n[V],k=t?t(S):S,new nc(k,S.node,nc.BLACK,K,fe)}},h=function(g){let v=null,b=null,S=n.length;const k=function(K,fe){const Ee=S-K,Ze=S;S-=K;const at=i(Ee+1,Ze),et=n[Ee],lt=t?t(et):et;V(new nc(lt,et.node,fe,null,at))},V=function(K){v?(v.left=K,v=K):(b=K,v=K)};for(let K=0;K<g.count;++K){const fe=g.nextBitIsOne(),Ee=Math.pow(2,g.count-(K+1));fe?k(Ee,nc.BLACK):(k(Ee,nc.BLACK),k(Ee,nc.RED))}return b}(new _H(n.length));return new Ro(r||e,h)};let Mk;const RI={};class yh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,M.hu)(RI&&hr,"ChildrenNode.ts has not been loaded"),Mk=Mk||new yh({".priority":RI},{".priority":hr}),Mk}get(e){const t=(0,M.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ro?t:null}hasIndex(e){return(0,M.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,M.hu)(e!==bl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(hn.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?AR(r,e.getCompare()):RI;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const b=Object.assign({},this.indexes_);return b[g]=h,new yh(b,v)}addToIndexes(e,t){const r=(0,M.UI)(this.indexes_,(i,a)=>{const c=(0,M.DV)(this.indexSet_,a);if((0,M.hu)(c,"Missing index implementation for "+a),i===RI){if(c.isDefinedOn(e.node)){const h=[],g=t.getIterator(hn.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&h.push(v),v=g.getNext();return h.push(e),AR(h,c.getCompare())}return RI}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new hn(e.name,h))),g.insert(e,e.node)}});return new yh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,M.UI)(this.indexes_,i=>{if(i===RI)return i;{const a=t.get(e.name);return a?i.remove(new hn(e.name,a)):i}});return new yh(r,this.indexSet_)}}let cC,qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SU(this.priorityNode_),this.children_.isEmpty()&&(0,M.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cC||(cC=new n(new Ro(xk),null,yh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?cC:r}}getChild(t){const r=nn(t);return null===r?this:this.getImmediateChild(r).getChild(nr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,M.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new hn(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?cC:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=nn(t);if(null===i)return r;{(0,M.hu)(".priority"!==nn(t)||1===Op(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(nr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(hr,(h,g)=>{r[h]=g.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+DU(this.getPriority().val())+":"),this.forEachChild(hr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":jF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new hn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new hn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new hn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,hn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,hn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===lC?-1:0}withIndex(t){if(t===bl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===bl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(hr),a=r.getIterator(hr);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===bl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const lC=new class yH extends qt{constructor(){super(new Ro(xk),qt.EMPTY_NODE,yh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(hn,{MIN:{value:new hn(kp,qt.EMPTY_NODE)},MAX:{value:new hn(_h,lC)}}),bU.__EMPTY_NODE=qt.EMPTY_NODE,AI.__childrenNodeConstructor=qt,function hH(n){kk=n}(lC),function pH(n){NU=n}(lC);const vH=!0;function Wr(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,M.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new AI(n,Wr(e));if(n instanceof Array||!vH){let t=qt.EMPTY_NODE;return es(n,(r,i)=>{if((0,M.r3)(n,r)&&"."!==r.substring(0,1)){const a=Wr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Wr(e))}{const t=[];let r=!1;if(es(n,(c,h)=>{if("."!==c.substring(0,1)){const g=Wr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new hn(c,g)))}}),0===t.length)return qt.EMPTY_NODE;const a=AR(t,dH,c=>c.name,xk);if(r){const c=AR(t,hr.getCompare());return new qt(a,Wr(e),new yh({".priority":c},{".priority":hr}))}return new qt(a,Wr(e),yh.Default)}}!function fH(n){RU=n}(Wr);class Ok extends bR{constructor(e){super(),this.indexPath_=e,(0,M.hu)(!rn(e)&&".priority"!==nn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?p_(e.name,t.name):a}makePost(e,t){const r=Wr(e),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(t,i)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,lC);return new hn(_h,e)}toString(){return aC(this.indexPath_,0).join("/")}}const Lk=new class IH extends bR{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?p_(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,t){const r=Wr(e);return new hn(t,r)}toString(){return".value"}};function PU(n){return{type:"value",snapshotNode:n}}function NI(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function dC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function hC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Fk{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,M.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(dC(t,h)):(0,M.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(NI(t,r)):c.trackChildChange(hC(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(hr,(i,a)=>{t.hasChild(i)||r.trackChildChange(dC(i,a))}),t.isLeafNode()||t.forEachChild(hr,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(hC(i,a,c))}else r.trackChildChange(NI(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class fC{constructor(e){this.indexedFilter_=new Fk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=fC.getStartPost_(e),this.endPost_=fC.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new hn(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const a=this;return t.forEachChild(hr,(c,h)=>{a.matches(new hn(c,h))||(i=i.updateImmediateChild(c,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class wH{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new fC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new hn(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=qt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(k,V)=>S(V,k)}else c=this.index_.getCompare();const h=e;(0,M.hu)(h.numChildren()===this.limit_,"");const g=new hn(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const V=null==k?1:c(k,g);if(b&&!r.isEmpty()&&V>=0)return a?.trackChildChange(hC(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(dC(t,S));const fe=h.updateImmediateChild(t,qt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(a?.trackChildChange(NI(k.name,k.node)),fe.updateImmediateChild(k.name,k.node)):fe}}return r.isEmpty()?e:b&&c(v,g)>=0?(null!=a&&(a.trackChildChange(dC(v.name,v.node)),a.trackChildChange(NI(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,qt.EMPTY_NODE)):e}}class RR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_h}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,M.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hr}copy(){const e=new RR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Uk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Vk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function NR(n,e){const t=n.copy();return t.index_=e,t}function xU(n){const e={};if(n.isDefault())return e;let t;if(n.index_===hr?t="$priority":n.index_===Lk?t="$value":n.index_===bl?t="$key":((0,M.hu)(n.index_ instanceof Ok,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,M.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,M.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,M.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,M.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,M.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function kU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==hr&&(e.i=n.index_.toString()),e}class PR extends _U{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=rC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,M.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=PR.getListenId_(e,r),h={};this.listens_[c]=h;const g=xU(e._queryParams);this.restRequest_(a+".json",g,(v,b)=>{let S=b;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,M.DV)(this.listens_,c)===h){let k;k=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(k,null)}})}unlisten(e,t){const r=PR.getListenId_(e,t);delete this.listens_[r]}get(e){const t=xU(e._queryParams),r=e._path.toString(),i=new M.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,M.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,M.cI)(h.responseText)}catch{Fs("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&Fs("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class AH{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xR(){return{value:null,children:new Map}}function PI(n,e,t){if(rn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=nn(e);n.children.has(r)||n.children.set(r,xR()),PI(n.children.get(r),e=nr(e),t)}}function Bk(n,e){if(rn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(hr,(r,i)=>{PI(n,new Bn(r),i)}),Bk(n,e)}}if(n.children.size>0){const t=nn(e);return e=nr(e),n.children.has(t)&&Bk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function jk(n,e,t){null!==n.value?t(e,n.value):function RH(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{jk(i,new Bn(e.toString()+"/"+r),t)})}class NH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&es(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class kH{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new NH(e);const r=1e4+2e4*Math.random();sC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;es(e,(i,a)=>{a>0&&(0,M.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),sC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Dl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Dl||{});function Gk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kR{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Dl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,M.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Bn(e));return new kR(Dn(),t,this.revert)}}return(0,M.hu)(nn(this.path)===e,"operationForChild called for unrelated child."),new kR(nr(this.path),this.affectedTree,this.revert)}}class pC{constructor(e,t){this.source=e,this.path=t,this.type=Dl.LISTEN_COMPLETE}operationForChild(e){return rn(this.path)?new pC(this.source,Dn()):new pC(this.source,nr(this.path))}}class __{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Dl.OVERWRITE}operationForChild(e){return rn(this.path)?new __(this.source,Dn(),this.snap.getImmediateChild(e)):new __(this.source,nr(this.path),this.snap)}}class xI{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Dl.MERGE}operationForChild(e){if(rn(this.path)){const t=this.children.subtree(new Bn(e));return t.isEmpty()?null:t.value?new __(this.source,Dn(),t.value):new xI(this.source,Dn(),t)}return(0,M.hu)(nn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xI(this.source,nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Lp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rn(e))return this.isFullyInitialized()&&!this.filtered_;const t=nn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class MH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gC(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,g)=>function FH(n,e,t){if(null==e.childName||null==t.childName)throw(0,M.g5)("Should only compare child_ events.");const r=new hn(e.childName,e.snapshotNode),i=new hn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),c.forEach(h=>{const g=function LH(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(g,n.query_))})})}function MR(n,e){return{eventCache:n,serverCache:e}}function mC(n,e,t,r){return MR(new Lp(e,t,r),n.serverCache)}function OU(n,e,t,r){return MR(n.eventCache,new Lp(e,t,r))}function OR(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function y_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let zk;class fr{constructor(e,t=(()=>(zk||(zk=new Ro(E$)),zk))()){this.value=e,this.children=t}static fromObject(e){let t=new fr(null);return es(e,(r,i)=>{t=t.set(new Bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Dn(),value:this.value};if(rn(e))return null;{const r=nn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(nr(e),t);return null!=a?{path:xr(new Bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rn(e))return this;{const t=nn(e),r=this.children.get(t);return null!==r?r.subtree(nr(e)):new fr(null)}}set(e,t){if(rn(e))return new fr(t,this.children);{const r=nn(e),a=(this.children.get(r)||new fr(null)).set(nr(e),t),c=this.children.insert(r,a);return new fr(this.value,c)}}remove(e){if(rn(e))return this.children.isEmpty()?new fr(null):new fr(null,this.children);{const t=nn(e),r=this.children.get(t);if(r){const i=r.remove(nr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new fr(null):new fr(this.value,a)}return this}}get(e){if(rn(e))return this.value;{const t=nn(e),r=this.children.get(t);return r?r.get(nr(e)):null}}setTree(e,t){if(rn(e))return t;{const r=nn(e),a=(this.children.get(r)||new fr(null)).setTree(nr(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new fr(this.value,c)}}fold(e){return this.fold_(Dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(xr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(rn(e))return null;{const a=nn(e),c=this.children.get(a);return c?c.findOnPath_(nr(e),xr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Dn(),t)}foreachOnPath_(e,t,r){if(rn(e))return this;{this.value&&r(t,this.value);const i=nn(e),a=this.children.get(i);return a?a.foreachOnPath_(nr(e),xr(t,i),r):new fr(null)}}foreach(e){this.foreach_(Dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(xr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class rc{constructor(e){this.writeTree_=e}static empty(){return new rc(new fr(null))}}function _C(n,e,t){if(rn(e))return new rc(new fr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=no(i,e);return a=a.updateChild(c,t),new rc(n.writeTree_.set(i,a))}{const i=new fr(t),a=n.writeTree_.setTree(e,i);return new rc(a)}}}function Wk(n,e,t){let r=n;return es(t,(i,a)=>{r=_C(r,xr(e,i),a)}),r}function LU(n,e){if(rn(e))return rc.empty();{const t=n.writeTree_.setTree(e,new fr(null));return new rc(t)}}function qk(n,e){return null!=v_(n,e)}function v_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(no(t.path,e)):null}function FU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(hr,(r,i)=>{e.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new hn(r,i.value))}),e}function Fp(n,e){if(rn(e))return n;{const t=v_(n,e);return new rc(null!=t?new fr(t):n.writeTree_.subtree(e))}}function Kk(n){return n.writeTree_.isEmpty()}function kI(n,e){return UU(Dn(),n.writeTree_,e)}function UU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,M.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=UU(xr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(xr(n,".priority"),r)),t}}function LR(n,e){return HU(e,n)}function HH(n,e){if(n.snap)return tu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&tu(xr(n.path,t),e))return!0;return!1}function zH(n){return n.visible}function VU(n,e,t){let r=rc.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)tu(t,c)?(h=no(t,c),r=_C(r,h,a.snap)):tu(c,t)&&(h=no(c,t),r=_C(r,Dn(),a.snap.getChild(h)));else{if(!a.children)throw(0,M.g5)("WriteRecord should have .snap or .children");if(tu(t,c))h=no(t,c),r=Wk(r,h,a.children);else if(tu(c,t))if(h=no(c,t),rn(h))r=Wk(r,Dn(),a.children);else{const g=(0,M.DV)(a.children,nn(h));if(g){const v=g.getChild(nr(h));r=_C(r,Dn(),v)}}}}}return r}function BU(n,e,t,r,i){if(r||i){const a=Fp(n.visibleWrites,e);return!i&&Kk(a)?t:i||null!=t||qk(a,Dn())?kI(VU(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(tu(v.path,e)||tu(e,v.path))},e),t||qt.EMPTY_NODE):null}{const a=v_(n.visibleWrites,e);if(null!=a)return a;{const c=Fp(n.visibleWrites,e);return Kk(c)?t:null!=t||qk(c,Dn())?kI(c,t||qt.EMPTY_NODE):null}}}function FR(n,e,t,r){return BU(n.writeTree,n.treePath,e,t,r)}function Zk(n,e){return function WH(n,e,t){let r=qt.EMPTY_NODE;const i=v_(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(hr,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Fp(n.visibleWrites,e);return t.forEachChild(hr,(c,h)=>{const g=kI(Fp(a,new Bn(c)),h);r=r.updateImmediateChild(c,g)}),FU(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return FU(Fp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function jU(n,e,t,r){return function qH(n,e,t,r,i){(0,M.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=xr(e,t);if(qk(n.visibleWrites,a))return null;{const c=Fp(n.visibleWrites,a);return Kk(c)?i.getChild(t):kI(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function UR(n,e){return function ZH(n,e){return v_(n.visibleWrites,e)}(n.writeTree,xr(n.treePath,e))}function Yk(n,e,t){return function KH(n,e,t,r){const i=xr(e,t),a=v_(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?kI(Fp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function $U(n,e){return HU(xr(n.treePath,e),n.writeTree)}function HU(n,e){return{treePath:n,writeTree:e}}class JH{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,M.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,M.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,hC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,dC(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,NI(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,M.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,hC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const GU=new class eG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Qk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Lp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:y_(this.viewCache_),a=function XH(n,e,t,r,i,a){return function YH(n,e,t,r,i,a,c){let h;const g=Fp(n.visibleWrites,e),v=v_(g,Dn());if(null!=v)h=v;else{if(null==t)return[];h=kI(g,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const b=[],S=c.getCompare(),k=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let V=k.getNext();for(;V&&b.length<i;)0!==S(V,r)&&b.push(V),V=k.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function zU(n,e,t,r,i,a){const c=e.eventCache;if(null!=UR(r,t))return e;{let h,g;if(rn(t))if((0,M.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=y_(e),S=Zk(r,v instanceof qt?v:qt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=FR(r,y_(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=nn(t);if(".priority"===v){(0,M.hu)(1===Op(t),"Can't have a priority with additional path components");const b=c.getNode();g=e.serverCache.getNode();const S=jU(r,t,b,g);h=null!=S?n.filter.updatePriority(b,S):c.getNode()}else{const b=nr(t);let S;if(c.isCompleteForChild(v)){g=e.serverCache.getNode();const k=jU(r,t,c.getNode(),g);S=null!=k?c.getNode().getImmediateChild(v).updateChild(b,k):c.getNode().getImmediateChild(v)}else S=Yk(r,v,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),v,S,b,i,a):c.getNode()}}return mC(e,h,c.isFullyInitialized()||rn(t),n.filter.filtersNodes())}}function VR(n,e,t,r,i,a,c,h){const g=e.serverCache;let v;const b=c?n.filter:n.filter.getIndexedFilter();if(rn(t))v=b.updateFullNode(g.getNode(),r,null);else if(b.filtersNodes()&&!g.isFiltered()){const V=g.getNode().updateChild(t,r);v=b.updateFullNode(g.getNode(),V,null)}else{const V=nn(t);if(!g.isCompleteForPath(t)&&Op(t)>1)return e;const K=nr(t),Ee=g.getNode().getImmediateChild(V).updateChild(K,r);v=".priority"===V?b.updatePriority(g.getNode(),Ee):b.updateChild(g.getNode(),V,Ee,K,GU,null)}const S=OU(e,v,g.isFullyInitialized()||rn(t),b.filtersNodes());return zU(n,S,t,i,new Qk(i,S,a),h)}function Xk(n,e,t,r,i,a,c){const h=e.eventCache;let g,v;const b=new Qk(i,e,a);if(rn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,c),g=mC(e,v,!0,n.filter.filtersNodes());else{const S=nn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=mC(e,v,h.isFullyInitialized(),h.isFiltered());else{const k=nr(t),V=h.getNode().getImmediateChild(S);let K;if(rn(k))K=r;else{const fe=b.getCompleteChild(S);K=null!=fe?".priority"===Rk(k)&&fe.getChild(EU(k)).isEmpty()?fe:fe.updateChild(k,r):qt.EMPTY_NODE}g=V.equals(K)?e:mC(e,n.filter.updateChild(h.getNode(),S,K,k,b,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function WU(n,e){return n.eventCache.isCompleteForChild(e)}function qU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Jk(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=rn(t)?r:new fr(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((S,k)=>{if(b.hasChild(S)){const K=qU(0,e.serverCache.getNode().getImmediateChild(S),k);g=VR(n,g,new Bn(S),K,i,a,c,h)}}),v.children.inorderTraversal((S,k)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===k.value;if(!b.hasChild(S)&&!V){const fe=qU(0,e.serverCache.getNode().getImmediateChild(S),k);g=VR(n,g,new Bn(S),fe,i,a,c,h)}}),g}class cG{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Fk(r.getIndex()),a=function TH(n){return n.loadsAllData()?new Fk(n.getIndex()):n.hasLimit()?new wH(n):new fC(n)}(r);this.processor_=function tG(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,g=i.updateFullNode(qt.EMPTY_NODE,c.getNode(),null),v=a.updateFullNode(qt.EMPTY_NODE,h.getNode(),null),b=new Lp(g,c.isFullyInitialized(),i.filtersNodes()),S=new Lp(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=MR(S,b),this.eventGenerator_=new MH(this.query_)}get query(){return this.query_}}function hG(n,e){const t=y_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rn(e)&&!t.getImmediateChild(nn(e)).isEmpty())?t.getChild(e):null}function KU(n){return 0===n.eventRegistrations_.length}function ZU(n,e,t){const r=[];if(t){(0,M.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function YU(n,e,t,r){e.type===Dl.MERGE&&null!==e.source.queryId&&((0,M.hu)(y_(n.viewCache_),"We should always have a full cache before handling merges"),(0,M.hu)(OR(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function rG(n,e,t,r,i){const a=new JH;let c,h;if(t.type===Dl.OVERWRITE){const v=t;v.source.fromUser?c=Xk(n,e,v.path,v.snap,r,i,a):((0,M.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!rn(v.path),c=VR(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Dl.MERGE){const v=t;v.source.fromUser?c=function sG(n,e,t,r,i,a,c){let h=e;return r.foreach((g,v)=>{const b=xr(t,g);WU(e,nn(b))&&(h=Xk(n,h,b,v,i,a,c))}),r.foreach((g,v)=>{const b=xr(t,g);WU(e,nn(b))||(h=Xk(n,h,b,v,i,a,c))}),h}(n,e,v.path,v.children,r,i,a):((0,M.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),c=Jk(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Dl.ACK_USER_WRITE){const v=t;c=v.revert?function uG(n,e,t,r,i,a){let c;if(null!=UR(r,t))return e;{const h=new Qk(r,e,i),g=e.eventCache.getNode();let v;if(rn(t)||".priority"===nn(t)){let b;if(e.serverCache.isFullyInitialized())b=FR(r,y_(e));else{const S=e.serverCache.getNode();(0,M.hu)(S instanceof qt,"serverChildren would be complete if leaf node"),b=Zk(r,S)}v=n.filter.updateFullNode(g,b,a)}else{const b=nn(t);let S=Yk(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=g.getImmediateChild(b)),v=null!=S?n.filter.updateChild(g,b,S,nr(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(g,b,qt.EMPTY_NODE,nr(t),h,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=FR(r,y_(e)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=UR(r,Dn()),mC(e,v,c,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function oG(n,e,t,r,i,a,c){if(null!=UR(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(rn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return VR(n,e,t,g.getNode().getChild(t),i,a,h,c);if(rn(t)){let v=new fr(null);return g.getNode().forEachChild(bl,(b,S)=>{v=v.set(new Bn(b),S)}),Jk(n,e,t,v,i,a,h,c)}return e}{let v=new fr(null);return r.foreach((b,S)=>{const k=xr(t,b);g.isCompleteForPath(k)&&(v=v.set(b,g.getNode().getChild(k)))}),Jk(n,e,t,v,i,a,h,c)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Dl.LISTEN_COMPLETE)throw(0,M.g5)("Unknown operation type: "+t.type);c=function aG(n,e,t,r,i){const a=e.serverCache;return zU(n,OU(e,a.getNode(),a.isFullyInitialized()||rn(t),a.isFiltered()),t,r,GU,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function iG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=OR(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(PU(OR(e)))}}(e,c,g),{viewCache:c,changes:g}}(n.processor_,i,e,t,r);return function nG(n,e){(0,M.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,M.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,M.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,QU(n,a.changes,a.viewCache.eventCache.getNode(),null)}function QU(n,e,t,r){return function OH(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function EH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),gC(n,i,"child_removed",e,r,t),gC(n,i,"child_added",e,r,t),gC(n,i,"child_moved",a,r,t),gC(n,i,"child_changed",e,r,t),gC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let BR,$R;class XU{constructor(){this.views=new Map}}function eM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,M.hu)(null!=a,"SyncTree gave us an op for an invalid query."),YU(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(YU(c,e,t,r));return a}}function JU(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=FR(t,i?r:null),g=!1;h?g=!0:r instanceof qt?(h=Zk(t,r),g=!1):(h=qt.EMPTY_NODE,g=!1);const v=MR(new Lp(h,g,!1),new Lp(r,i,!1));return new cG(e,v)}return c}function e2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Up(n,e){let t=null;for(const r of n.views.values())t=t||hG(r,e);return t}function t2(n,e){return e._queryParams.loadsAllData()?jR(n):n.views.get(e._queryIdentifier)}function n2(n,e){return null!=t2(n,e)}function Vp(n){return null!=jR(n)}function jR(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let wG=1;class r2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fr(null),this.pendingWriteTree_=function QH(){return{visibleWrites:rc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tM(n,e,t,r,i){return function VH(n,e,t,r,i){(0,M.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=_C(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?MI(n,new __({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Bp(n,e,t=!1){const r=function jH(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function $H(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,M.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&HH(h,r.path)?i=!1:tu(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function GH(n){n.visibleWrites=VU(n.allWrites,zH,Dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=LU(n.visibleWrites,r.path):es(r.children,g=>{n.visibleWrites=LU(n.visibleWrites,xr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new fr(null);return null!=r.snap?a=a.set(Dn(),!0):es(r.children,c=>{a=a.set(new Bn(c),!0)}),MI(n,new kR(r.path,a,t))}return[]}function yC(n,e,t){return MI(n,new __({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function HR(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let h=[];if(c&&("default"===e._queryIdentifier||n2(c,e))){const g=function vG(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const h=Vp(n);if("default"===i)for(const[g,v]of n.views.entries())c=c.concat(ZU(v,t,r)),KU(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||a.push(v.query));else{const g=n.views.get(i);g&&(c=c.concat(ZU(g,t,r)),KU(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!Vp(n)&&a.push(new(function mG(){return(0,M.hu)(BR,"Reference.ts has not been loaded"),BR}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function _G(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=g.removed;if(h=g.events,!i){const b=-1!==v.findIndex(k=>k._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(k,V)=>Vp(V));if(b&&!S){const k=n.syncPointTree_.subtree(a);if(!k.isEmpty()){const V=function RG(n){return n.fold((e,t,r)=>{if(t&&Vp(t))return[jR(t)];{let i=[];return t&&(i=e2(t)),es(r,(a,c)=>{i=i.concat(c)}),i}})}(k);for(let K=0;K<V.length;++K){const fe=V[K],Ee=fe.query,Ze=a2(n,fe);n.listenProvider_.startListening(IC(Ee),vC(n,Ee),Ze.hashFn,Ze.onComplete)}}}!S&&v.length>0&&!r&&(b?n.listenProvider_.stopListening(IC(e),null):v.forEach(k=>{const V=n.queryToTagMap.get(zR(k));n.listenProvider_.stopListening(IC(k),V)}))}!function NG(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=zR(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return h}function i2(n,e,t,r){const i=rM(n,r);if(null!=i){const a=iM(i),c=a.path,h=a.queryId,g=no(c,e);return sM(n,c,new __(Gk(h),g,t))}return[]}function nM(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(k,V)=>{const K=no(k,i);a=a||Up(V,K),c=c||Vp(V)});let g,h=n.syncPointTree_.get(i);h?(c=c||Vp(h),a=a||Up(h,Dn())):(h=new XU,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?g=!0:(g=!1,a=qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,K)=>{const fe=Up(K,Dn());fe&&(a=a.updateImmediateChild(V,fe))}));const v=n2(h,e);if(!v&&!e._queryParams.loadsAllData()){const k=zR(e);(0,M.hu)(!n.queryToTagMap.has(k),"View does not exist, but we have a tag");const V=function PG(){return wG++}();n.queryToTagMap.set(k,V),n.tagToQueryMap.set(V,k)}let S=function yG(n,e,t,r,i,a){const c=JU(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function fG(n,e){n.eventRegistrations_.push(e)}(c,t),function pG(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(hr,(a,c)=>{r.push(NI(a,c))}),t.isFullyInitialized()&&r.push(PU(t.getNode())),QU(n,r,t.getNode(),e)}(c,t)}(h,e,t,LR(n.pendingWriteTree_,i),a,g);if(!v&&!c&&!r){const k=t2(h,e);S=S.concat(function xG(n,e,t){const r=e._path,i=vC(n,e),a=a2(n,t),c=n.listenProvider_.startListening(IC(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,M.hu)(!Vp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((v,b,S)=>{if(!rn(v)&&b&&Vp(b))return[jR(b).query];{let k=[];return b&&(k=k.concat(e2(b).map(V=>V.query))),es(S,(V,K)=>{k=k.concat(K)}),k}});for(let v=0;v<g.length;++v){const b=g[v];n.listenProvider_.stopListening(IC(b),vC(n,b))}}return c}(n,e,k))}return S}function GR(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const v=Up(h,no(c,e));if(v)return v});return BU(i,e,a,t,!0)}function MI(n,e){return s2(e,n.syncPointTree_,null,LR(n.pendingWriteTree_,Dn()))}function s2(n,e,t,r){if(rn(n.path))return o2(n,e,t,r);{const i=e.get(Dn());null==t&&null!=i&&(t=Up(i,Dn()));let a=[];const c=nn(n.path),h=n.operationForChild(c),g=e.children.get(c);if(g&&h){const v=t?t.getImmediateChild(c):null,b=$U(r,c);a=a.concat(s2(h,g,v,b))}return i&&(a=a.concat(eM(i,n,r,t))),a}}function o2(n,e,t,r){const i=e.get(Dn());null==t&&null!=i&&(t=Up(i,Dn()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=t?t.getImmediateChild(c):null,v=$U(r,c),b=n.operationForChild(c);b&&(a=a.concat(o2(b,h,g,v)))}),i&&(a=a.concat(eM(i,n,r,t))),a}function a2(n,e){const t=e.query,r=vC(n,t);return{hashFn:()=>(function lG(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function DG(n,e,t){const r=rM(n,t);if(r){const i=iM(r),a=i.path,c=i.queryId,h=no(a,e);return sM(n,a,new pC(Gk(c),h))}return[]}(n,t._path,r):function bG(n,e){return MI(n,new pC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function C$(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return HR(n,t,null,a)}}}}function vC(n,e){const t=zR(e);return n.queryToTagMap.get(t)}function zR(n){return n._path.toString()+"$"+n._queryIdentifier}function rM(n,e){return n.tagToQueryMap.get(e)}function iM(n){const e=n.indexOf("$");return(0,M.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Bn(n.substr(0,e))}}function sM(n,e,t){const r=n.syncPointTree_.get(e);return(0,M.hu)(r,"Missing sync point for query tag that we're tracking"),eM(r,t,LR(n.pendingWriteTree_,e),null)}function IC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function EG(){return(0,M.hu)($R,"Reference.ts has not been loaded"),$R}())(n._repo,n._path):n}class oM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new oM(t)}node(){return this.node_}}class aM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xr(this.path_,e);return new aM(this.syncTree_,t)}node(){return GR(this.syncTree_,this.path_)}}const kG=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},u2=function(n,e,t){return n&&"object"==typeof n?((0,M.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?MG(n[".sv"],e,t):"object"==typeof n[".sv"]?OG(n[".sv"],e):void(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},MG=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,M.hu)(!1,"Unexpected server value: "+n)},OG=function(n,e,t){n.hasOwnProperty("increment")||(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,M.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,M.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},c2=function(n,e,t,r){return cM(e,new aM(t,n),r)},uM=function(n,e,t){return cM(n,new oM(e),t)};function cM(n,e,t){const r=n.getPriority().val(),i=u2(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=u2(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new AI(h,Wr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new AI(i))),c.forEachChild(hr,(h,g)=>{const v=cM(g,e.getImmediateChild(h),t);v!==g&&(a=a.updateImmediateChild(h,v))}),a}}class lM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function WR(n,e){let t=e instanceof Bn?e:new Bn(e),r=n,i=nn(t);for(;null!==i;){const a=(0,M.DV)(r.node.children,i)||{children:{},childCount:0};r=new lM(i,r,a),t=nr(t),i=nn(t)}return r}function I_(n){return n.node.value}function dM(n,e){n.node.value=e,hM(n)}function l2(n){return n.node.childCount>0}function qR(n,e){es(n.node.children,(t,r)=>{e(new lM(t,n,r))})}function d2(n,e,t,r){t&&!r&&e(n),qR(n,i=>{d2(i,e,!0,r)}),t&&r&&e(n)}function EC(n){return new Bn(null===n.parent?n.name:EC(n.parent)+"/"+n.name)}function hM(n){null!==n.parent&&function UG(n,e,t){const r=function LG(n){return void 0===I_(n)&&!l2(n)}(t),i=(0,M.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,hM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,hM(n))}(n.parent,n.name,n)}const VG=/[\[\].#$\/\u0000-\u001F\u007F]/,BG=/[\[\].#$\u0000-\u001F\u007F]/,fM=10485760,KR=function(n){return"string"==typeof n&&0!==n.length&&!VG.test(n)},h2=function(n){return"string"==typeof n&&0!==n.length&&!BG.test(n)},wC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ER(n)||n&&"object"==typeof n&&(0,M.r3)(n,".sv")},Sl=function(n,e,t,r){r&&void 0===e||TC((0,M.gK)(n,"value"),e,t)},TC=function(n,e,t){const r=t instanceof Bn?new rH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+g_(r));if("function"==typeof e)throw new Error(n+"contains a function "+g_(r)+" with contents = "+e.toString());if(ER(e))throw new Error(n+"contains "+e.toString()+" "+g_(r));if("string"==typeof e&&e.length>fM/3&&(0,M.ug)(e)>fM)throw new Error(n+"contains a string greater than "+fM+" utf8 bytes "+g_(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(es(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!KR(c)))throw new Error(n+" contains an invalid key ("+c+") "+g_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function iH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,M.ug)(e),wU(n)})(r,c),TC(n,h,r),function sH(n){const e=n.parts_.pop();n.byteLength_-=(0,M.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+g_(r)+" in addition to actual children.")}},f2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,M.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];es(e,(c,h)=>{const g=new Bn(c);if(TC(i,h,xr(t,g)),".priority"===Rk(g)&&!wC(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=aC(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!KR(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(nH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&tu(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},pM=function(n,e,t){if(!t||void 0!==e){if(ER(e))throw new Error((0,M.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wC(e))throw new Error((0,M.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},CC=function(n,e,t,r){if(!(r&&void 0===t||KR(t)))throw new Error((0,M.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},bC=function(n,e,t,r){if(!(r&&void 0===t||h2(t)))throw new Error((0,M.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},HG=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bC(n,e,t,r)},nu=function(n,e){if(".info"===nn(e))throw new Error(n+" failed = Can't modify data under /.info/")},p2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!KR(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),h2(n)}(t))throw new Error((0,M.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class GG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ZR(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Nk(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function g2(n,e,t){ZR(n,t),m2(n,r=>Nk(r,e))}function ha(n,e,t){ZR(n,t),m2(n,r=>tu(r,e)||tu(e,r))}function m2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(zG(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function zG(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();f_&&Ji("event: "+t.toString()),DI(r)}}}const _2="repo_interrupt",WG=25;class qG{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xR(),this.transactionQueueTree_=new lM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function y2(n){const t=n.infoData_.getNode(new Bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function DC(n){return kG({timestamp:y2(n)})}function v2(n,e,t,r,i){n.dataUpdateCount++;const a=new Bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const g=(0,M.UI)(t,v=>Wr(v));c=function SG(n,e,t,r){const i=rM(n,r);if(i){const a=iM(i),c=a.path,h=a.queryId,g=no(c,e),v=fr.fromObject(t);return sM(n,c,new xI(Gk(h),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Wr(t);c=i2(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,M.UI)(t,v=>Wr(v));c=function CG(n,e,t){const r=fr.fromObject(t);return MI(n,new xI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Wr(t);c=yC(n.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=LI(n,a)),ha(n.eventQueue_,h,c)}function I2(n,e){gM(n,"connected",e),!1===e&&function XG(n){OI(n,"onDisconnectEvents");const e=DC(n),t=xR();jk(n.onDisconnect_,Dn(),(i,a)=>{const c=c2(i,a,n.serverSyncTree_,e);PI(t,i,c)});let r=[];jk(t,Dn(),(i,a)=>{r=r.concat(yC(n.serverSyncTree_,i,a));const c=vM(n,i);LI(n,c)}),n.onDisconnect_=xR(),ha(n.eventQueue_,Dn(),r)}(n)}function gM(n,e,t){const r=new Bn("/.info/"+e),i=Wr(t);n.infoData_.updateSnapshot(r,i);const a=yC(n.infoSyncTree_,r,i);ha(n.eventQueue_,r,a)}function YR(n){return n.nextWriteId_++}function mM(n,e,t,r,i){OI(n,"set",{path:e.toString(),value:t,priority:r});const a=DC(n),c=Wr(t,r),h=GR(n.serverSyncTree_,e),g=uM(c,h,a),v=YR(n),b=tM(n.serverSyncTree_,e,g,v,!0);ZR(n.eventQueue_,b),n.server_.put(e.toString(),c.val(!0),(k,V)=>{const K="ok"===k;K||Fs("set at "+e+" failed: "+k);const fe=Bp(n.serverSyncTree_,v,!K);ha(n.eventQueue_,e,fe),jp(0,i,k,V)});const S=vM(n,e);LI(n,S),ha(n.eventQueue_,S,[])}function JG(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Bk(n.onDisconnect_,e),jp(0,t,r,i)})}function E2(n,e,t,r){const i=Wr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&PI(n.onDisconnect_,e,i),jp(0,r,a,c)})}function _M(n,e,t){let r;r=".info"===nn(e._path)?HR(n.infoSyncTree_,e,t):HR(n.serverSyncTree_,e,t),g2(n.eventQueue_,e._path,r)}function w2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_2)}function OI(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ji(t,...e)}function jp(n,e,t,r){e&&DI(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function yM(n,e,t){return GR(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function QR(n,e=n.transactionQueueTree_){if(e||XR(n,e),I_(e)){const t=C2(n,e);(0,M.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function s4(n,e,t){const r=t.map(v=>v.currentWriteId),i=yM(n,e,r);let a=i;const c=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,M.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=no(e,b.path);a=a.updateChild(S,b.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;n.server_.put(g.toString(),h,v=>{OI(n,"transaction put response",{path:g.toString(),status:v});let b=[];if("ok"===v){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,b=b.concat(Bp(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();XR(n,WR(n.transactionQueueTree_,e)),QR(n,n.transactionQueueTree_),ha(n.eventQueue_,e,b);for(let k=0;k<S.length;k++)DI(S[k])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Fs("transaction at "+g.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}LI(n,e)}},c)}(n,EC(e),t)}else l2(e)&&qR(e,t=>{QR(n,t)})}function LI(n,e){const t=T2(n,e),r=EC(t);return function o4(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],v=no(t,g.path);let S,b=!1;if((0,M.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)b=!0,S=g.abortReason,i=i.concat(Bp(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=WG)b=!0,S="maxretry",i=i.concat(Bp(n.serverSyncTree_,g.currentWriteId,!0));else{const k=yM(n,g.path,c);g.currentInputSnapshot=k;const V=e[h].update(k.val());if(void 0!==V){TC("transaction failed: Data returned ",V,g.path);let K=Wr(V);"object"==typeof V&&null!=V&&(0,M.r3)(V,".priority")||(K=K.updatePriority(k.getPriority()));const Ee=g.currentWriteId,Ze=DC(n),at=uM(K,k,Ze);g.currentOutputSnapshotRaw=K,g.currentOutputSnapshotResolved=at,g.currentWriteId=YR(n),c.splice(c.indexOf(Ee),1),i=i.concat(tM(n.serverSyncTree_,g.path,at,g.currentWriteId,g.applyLocally)),i=i.concat(Bp(n.serverSyncTree_,Ee,!0))}else b=!0,S="nodata",i=i.concat(Bp(n.serverSyncTree_,g.currentWriteId,!0))}ha(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}XR(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)DI(r[h]);QR(n,n.transactionQueueTree_)}(n,C2(n,t),r),r}function T2(n,e){let t,r=n.transactionQueueTree_;for(t=nn(e);null!==t&&void 0===I_(r);)r=WR(r,t),t=nn(e=nr(e));return r}function C2(n,e){const t=[];return b2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function b2(n,e,t){const r=I_(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);qR(e,i=>{b2(n,i,t)})}function XR(n,e){const t=I_(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,dM(e,t.length>0?t:void 0)}qR(e,r=>{XR(n,r)})}function vM(n,e){const t=EC(T2(n,e)),r=WR(n.transactionQueueTree_,e);return function FG(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{IM(n,i)}),IM(n,r),d2(r,i=>{IM(n,i)}),t}function IM(n,e){const t=I_(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,M.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,M.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Bp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?dM(e,void 0):t.length=a+1,ha(n.eventQueue_,EC(e),i);for(let c=0;c<r.length;c++)DI(r[c])}}const EM=function(n,e){const t=c4(n),r=t.namespace;return"firebase.com"===t.domain&&Cl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Cl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Tk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Bn(t.pathString)}},c4=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function a4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const k=function u4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Fs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(c="https"===h||"wss"===h,g=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const K=e.indexOf(".");r=e.substring(0,K).toLowerCase(),t=e.substring(K+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}},D2="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",l4=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=D2.charAt(t%64),t=Math.floor(t/64);(0,M.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=D2.charAt(e[i]);return(0,M.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class S2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,M.Wl)(this.snapshot.exportVal())}}class A2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wM{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,M.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class R2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new M.BH;return JG(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){nu("OnDisconnect.remove",this._path);const e=new M.BH;return E2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){nu("OnDisconnect.set",this._path),Sl("OnDisconnect.set",e,this._path,!1);const t=new M.BH;return E2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){nu("OnDisconnect.setWithPriority",this._path),Sl("OnDisconnect.setWithPriority",e,this._path,!1),pM("OnDisconnect.setWithPriority",t,!1);const r=new M.BH;return function e4(n,e,t,r,i){const a=Wr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&PI(n.onDisconnect_,e,a),jp(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){nu("OnDisconnect.update",this._path),f2("OnDisconnect.update",e,this._path,!1);const t=new M.BH;return function t4(n,e,t,r){if((0,M.xb)(t))return Ji("onDisconnect().update() called with empty data.  Don't do anything."),void jp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&es(t,(c,h)=>{const g=Wr(h);PI(n.onDisconnect_,xr(e,c),g)}),jp(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class No{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return rn(this._path)?null:Rk(this._path)}get ref(){return new ru(this._repo,this._path)}get _queryIdentifier(){const e=kU(this._queryParams),t=Ek(e);return"{}"===t?"default":t}get _queryObject(){return kU(this._queryParams)}isEqual(e){if(!((e=(0,M.m9)(e))instanceof No))return!1;const t=this._repo===e._repo,r=Nk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function tH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function JR(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $p(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===bl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==kp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==_h)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===hr){if(null!=e&&!wC(e)||null!=t&&!wC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,M.hu)(n.getIndex()instanceof Ok||n.getIndex()===Lk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eN(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ru extends No{constructor(e,t){super(e,t,new RR,!1)}get parent(){const e=EU(this._path);return null===e?null:new ru(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class E_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Bn(e),r=w_(this.ref,e);return new E_(this._node.getChild(t),r,hr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new E_(i,w_(this.ref,r),hr)))}hasChild(e){const t=new Bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function N2(n,e){return(n=(0,M.m9)(n))._checkNotDeleted("ref"),void 0!==e?w_(n._root,e):n._root}function P2(n,e){(n=(0,M.m9)(n))._checkNotDeleted("refFromURL");const t=EM(e,n._repo.repoInfo_.nodeAdmin);p2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Cl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),N2(n,t.path.toString())}function w_(n,e){return null===nn((n=(0,M.m9)(n))._path)?HG("child","path",e,!1):bC("child","path",e,!1),new ru(n._repo,xr(n._path,e))}function TM(n,e){n=(0,M.m9)(n),nu("set",n._path),Sl("set",e,n._path,!1);const t=new M.BH;return mM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function g4(n,e){f2("update",e,n._path,!1);const t=new M.BH;return function QG(n,e,t,r){OI(n,"update",{path:e.toString(),value:t});let i=!0;const a=DC(n),c={};if(es(t,(h,g)=>{i=!1,c[h]=c2(xr(e,h),Wr(g),n.serverSyncTree_,a)}),i)Ji("update() called with empty data.  Don't do anything."),jp(0,r,"ok",void 0);else{const h=YR(n),g=function TG(n,e,t,r){!function BH(n,e,t,r){(0,M.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Wk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=fr.fromObject(t);return MI(n,new xI({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);ZR(n.eventQueue_,g),n.server_.merge(e.toString(),t,(v,b)=>{const S="ok"===v;S||Fs("update at "+e+" failed: "+v);const k=Bp(n.serverSyncTree_,h,!S),V=k.length>0?LI(n,e):e;ha(n.eventQueue_,V,k),jp(0,r,v,b)}),es(t,v=>{const b=vM(n,xr(e,v));LI(n,b)}),ha(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function m4(n){n=(0,M.m9)(n);const e=new wM(()=>{}),t=new SC(e);return function YG(n,e,t){const r=function AG(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,b)=>{const S=no(v,t);r=r||Up(b,S)});let i=n.syncPointTree_.get(t);i?r=r||Up(i,Dn()):(i=new XU,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Lp(r,!0,!1):null;return function dG(n){return OR(n.viewCache_)}(JU(i,e,LR(n.pendingWriteTree_,e._path),a?c.getNode():qt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Wr(i).withIndex(e._queryParams.getIndex());let c;if(nM(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=yC(n.serverSyncTree_,e._path,a);else{const h=vC(n.serverSyncTree_,e);c=i2(n.serverSyncTree_,e._path,a,h)}return ha(n.eventQueue_,e._path,c),HR(n.serverSyncTree_,e,t,null,!0),a},i=>(OI(n,"get for query "+(0,M.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new E_(r,new ru(n._repo,n._path),n._queryParams.getIndex()))}class SC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new S2("value",this,new E_(e.snapshotNode,new ru(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A2(this,e,t):null}matches(e){return e instanceof SC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tN{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A2(this,e,t):null}createEvent(e,t){(0,M.hu)(null!=e.childName,"Child events should have a childName.");const r=w_(new ru(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new S2(e.type,this,new E_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof tN&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function AC(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,v=(b,S)=>{_M(n._repo,n,h),g(b,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const c=new wM(t,a||void 0),h="value"===e?new SC(c):new tN(e,c);return function n4(n,e,t){let r;r=".info"===nn(e._path)?nM(n.infoSyncTree_,e,t):nM(n.serverSyncTree_,e,t),g2(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>_M(n._repo,n,h)}function CM(n,e,t,r){return AC(n,"value",e,t,r)}function x2(n,e,t,r){return AC(n,"child_added",e,t,r)}function k2(n,e,t,r){return AC(n,"child_changed",e,t,r)}function M2(n,e,t,r){return AC(n,"child_moved",e,t,r)}function O2(n,e,t,r){return AC(n,"child_removed",e,t,r)}function L2(n,e,t){let r=null;const i=t?new wM(t):null;"value"===e?r=new SC(i):e&&(r=new tN(e,i)),_M(n._repo,n,r)}class ic{}class F2 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("endAt",this._value,e._path,!0);const t=Vk(e._queryParams,this._value,this._key);if(eN(t),$p(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class y4 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("endBefore",this._value,e._path,!1);const t=function SH(n,e,t){let r;return r=Vk(n,e,n.index_===bl||t?t:kp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(eN(t),$p(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class U2 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("startAt",this._value,e._path,!0);const t=Uk(e._queryParams,this._value,this._key);if(eN(t),$p(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class E4 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("startAfter",this._value,e._path,!1);const t=function DH(n,e,t){let r;return r=Uk(n,e,n.index_===bl||t?t:_h),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(eN(t),$p(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class T4 extends ic{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(e._repo,e._path,function CH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class b4 extends ic{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(e._repo,e._path,function bH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class S4 extends ic{constructor(e){super(),this._path=e}_apply(e){JR(e,"orderByChild");const t=new Bn(this._path);if(rn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ok(t),i=NR(e._queryParams,r);return $p(i),new No(e._repo,e._path,i,!0)}}class R4 extends ic{_apply(e){JR(e,"orderByKey");const t=NR(e._queryParams,bl);return $p(t),new No(e._repo,e._path,t,!0)}}class P4 extends ic{_apply(e){JR(e,"orderByPriority");const t=NR(e._queryParams,hr);return $p(t),new No(e._repo,e._path,t,!0)}}class k4 extends ic{_apply(e){JR(e,"orderByValue");const t=NR(e._queryParams,Lk);return $p(t),new No(e._repo,e._path,t,!0)}}class O4 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Sl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new F2(this._value,this._key)._apply(new U2(this._value,this._key)._apply(e))}}function sc(n,...e){let t=(0,M.m9)(n);for(const r of e)t=r._apply(t);return t}(function gG(n){(0,M.hu)(!BR,"__referenceConstructor has already been defined"),BR=n})(ru),function IG(n){(0,M.hu)(!$R,"__referenceConstructor has already been defined"),$R=n}(ru);const bM={};function B2(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Cl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ji("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,c=EM(a,i),h=c.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${h.namespace}`,c=EM(a,i),h=c.repoInfo):g=!c.repoInfo.secure;const b=i&&g?new oC(oC.OWNER):new N$(n.name,n.options,e);p2("Invalid Firebase Database URL",c),rn(c.path)||Cl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function B4(n,e,t,r){let i=bM[e.name];i||(i={},bM[e.name]=i);let a=i[n.toURLString()];return a&&Cl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new qG(n,false,t,r),i[n.toURLString()]=a,a}(h,n,b,new R$(n.name,t));return new $4(S,n)}class $4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function KG(n,e,t){if(n.stats_=Dk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new PR(n.repoInfo_,(r,i,a,c)=>{v2(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>I2(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,M.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new m_(n.repoInfo_,e,(r,i,a,c)=>{v2(n,r,i,a,c)},r=>{I2(n,r)},r=>{!function ZG(n,e){es(e,(t,r)=>{gM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function k$(n,e){const t=n.toString();return bk[t]||(bk[t]=e()),bk[t]}(n.repoInfo_,()=>new kH(n.stats_,n.server_)),n.infoData_=new AH,n.infoSyncTree_=new r2({startListening:(r,i,a,c)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=yC(n.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),gM(n,"connected",!1),n.serverSyncTree_=new r2({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,g)=>{const v=c(h,g);ha(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ru(this._repo,Dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function V4(n,e){const t=bM[e];(!t||t[n.key]!==n)&&Cl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),w2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Cl("Cannot call "+e+" on a deleted database.")}}function j2(){cU.IS_TRANSPORT_INITIALIZED&&Fs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function H4(){j2(),Mp.forceDisallow()}function G4(){j2(),SI.forceDisallow(),Mp.forceAllow()}function q4(n,e){HF(n,e)}const Z4={".sv":"timestamp"};class X4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}m_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},m_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function K4(n){UF(Zc.SDK_VERSION),(0,Zc._registerComponent)(new ar.wA("database",(e,{instanceIdentifier:t})=>B2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Zc.registerVersion)(LF,"0.14.4",n),(0,Zc.registerVersion)(LF,"0.14.4","esm2017")}();const nz=new gr.Yd("@firebase/database-compat"),H2=function(n){nz.warn("FIREBASE WARNING: "+n)};class sz{constructor(e){this._delegate=e}cancel(e){(0,M.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,M.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,M.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,M.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,M.Dv)("OnDisconnect.set",1,2,arguments.length),(0,M.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,M.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,M.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,M.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,H2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,M.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class oz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,M.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,M.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,M.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,M.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,M.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,M.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),bC("DataSnapshot.child","path",e,!1),new Hp(this._database,this._delegate.child(e))}hasChild(e){return(0,M.Dv)("DataSnapshot.hasChild",1,1,arguments.length),bC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,M.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,M.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,M.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Hp(this._database,t)))}hasChildren(){return(0,M.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,M.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,M.Dv)("DataSnapshot.ref",0,0,arguments.length),new fa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ms{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,M.Dv)("Query.on",2,4,arguments.length),(0,M.Wj)("Query.on","callback",t,!1);const c=ms.getCancelAndContextArgs_("Query.on",r,i),h=(v,b)=>{t.call(c.context,new Hp(this.database,v),b)};h.userCallback=t,h.context=c.context;const g=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return CM(this._delegate,h,g),t;case"child_added":return x2(this._delegate,h,g),t;case"child_removed":return O2(this._delegate,h,g),t;case"child_changed":return k2(this._delegate,h,g),t;case"child_moved":return M2(this._delegate,h,g),t;default:throw new Error((0,M.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,M.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,M.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,M.Wj)("Query.off","callback",t,!0),(0,M.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,L2(this._delegate,e,i)}else L2(this._delegate,e)}get(){return m4(this._delegate).then(e=>new Hp(this.database,e))}once(e,t,r,i){(0,M.Dv)("Query.once",1,4,arguments.length),(0,M.Wj)("Query.once","callback",t,!0);const a=ms.getCancelAndContextArgs_("Query.once",r,i),c=new M.BH,h=(v,b)=>{const S=new Hp(this.database,v);t&&t.call(a.context,S,b),c.resolve(S)};h.userCallback=t,h.context=a.context;const g=v=>{a.cancel&&a.cancel.call(a.context,v),c.reject(v)};switch(e){case"value":CM(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":x2(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":O2(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":k2(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":M2(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,M.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,M.Dv)("Query.limitToFirst",1,1,arguments.length),new ms(this.database,sc(this._delegate,function C4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new T4(n)}(e)))}limitToLast(e){return(0,M.Dv)("Query.limitToLast",1,1,arguments.length),new ms(this.database,sc(this._delegate,function D4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new b4(n)}(e)))}orderByChild(e){return(0,M.Dv)("Query.orderByChild",1,1,arguments.length),new ms(this.database,sc(this._delegate,function A4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return bC("orderByChild","path",n,!1),new S4(n)}(e)))}orderByKey(){return(0,M.Dv)("Query.orderByKey",0,0,arguments.length),new ms(this.database,sc(this._delegate,function N4(){return new R4}()))}orderByPriority(){return(0,M.Dv)("Query.orderByPriority",0,0,arguments.length),new ms(this.database,sc(this._delegate,function x4(){return new P4}()))}orderByValue(){return(0,M.Dv)("Query.orderByValue",0,0,arguments.length),new ms(this.database,sc(this._delegate,function M4(){return new k4}()))}startAt(e=null,t){return(0,M.Dv)("Query.startAt",0,2,arguments.length),new ms(this.database,sc(this._delegate,function I4(n=null,e){return CC("startAt","key",e,!0),new U2(n,e)}(e,t)))}startAfter(e=null,t){return(0,M.Dv)("Query.startAfter",0,2,arguments.length),new ms(this.database,sc(this._delegate,function w4(n,e){return CC("startAfter","key",e,!0),new E4(n,e)}(e,t)))}endAt(e=null,t){return(0,M.Dv)("Query.endAt",0,2,arguments.length),new ms(this.database,sc(this._delegate,function _4(n,e){return CC("endAt","key",e,!0),new F2(n,e)}(e,t)))}endBefore(e=null,t){return(0,M.Dv)("Query.endBefore",0,2,arguments.length),new ms(this.database,sc(this._delegate,function v4(n,e){return CC("endBefore","key",e,!0),new y4(n,e)}(e,t)))}equalTo(e,t){return(0,M.Dv)("Query.equalTo",1,2,arguments.length),new ms(this.database,sc(this._delegate,function L4(n,e){return CC("equalTo","key",e,!0),new O4(n,e)}(e,t)))}toString(){return(0,M.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,M.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,M.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,M.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,M.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,M.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new fa(this.database,new ru(this._delegate._repo,this._delegate._path))}}class fa extends ms{constructor(e,t){super(e,new No(t._repo,t._path,new RR,!1)),this.database=e,this._delegate=t}getKey(){return(0,M.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,M.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new fa(this.database,w_(this._delegate,e))}getParent(){(0,M.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new fa(this.database,e):null}getRoot(){return(0,M.Dv)("Reference.root",0,0,arguments.length),new fa(this.database,this._delegate.root)}set(e,t){(0,M.Dv)("Reference.set",1,2,arguments.length),(0,M.Wj)("Reference.set","onComplete",t,!0);const r=TM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,M.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,H2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nu("Reference.update",this._delegate._path),(0,M.Wj)("Reference.update","onComplete",t,!0);const r=g4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,M.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,M.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function p4(n,e,t){if(nu("setWithPriority",n._path),Sl("setWithPriority",e,n._path,!1),pM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new M.BH;return mM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,M.Dv)("Reference.remove",0,1,arguments.length),(0,M.Wj)("Reference.remove","onComplete",e,!0);const t=function h4(n){return nu("remove",n._path),TM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,M.Dv)("Reference.transaction",1,3,arguments.length),(0,M.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,M.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,M.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function J4(n,e,t){var r;if(n=(0,M.m9)(n),nu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new M.BH,h=CM(n,()=>{});return function i4(n,e,t,r,i,a){OI(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:BF(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=yM(n,e,void 0);c.currentInputSnapshot=h;const g=c.update(h.val());if(void 0===g)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{TC("transaction failed: Data returned ",g,c.path),c.status=0;const v=WR(n.transactionQueueTree_,e),b=I_(v)||[];let S;b.push(c),dM(v,b),"object"==typeof g&&null!==g&&(0,M.r3)(g,".priority")?(S=(0,M.DV)(g,".priority"),(0,M.hu)(wC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(GR(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const k=DC(n),V=Wr(g,S),K=uM(V,h,k);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=K,c.currentWriteId=YR(n);const fe=tM(n.serverSyncTree_,e,K,c.currentWriteId,c.applyLocally);ha(n.eventQueue_,e,fe),QR(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,v,b)=>{let S=null;g?a.reject(g):(S=new E_(b,new ru(n._repo,n._path),hr),a.resolve(new X4(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new oz(a.committed,new Hp(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,M.Dv)("Reference.setPriority",1,2,arguments.length),(0,M.Wj)("Reference.setPriority","onComplete",t,!0);const r=function f4(n,e){n=(0,M.m9)(n),nu("setPriority",n._path),pM("setPriority",e,!1);const t=new M.BH;return mM(n._repo,xr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,M.Dv)("Reference.push",0,2,arguments.length),(0,M.Wj)("Reference.push","onComplete",t,!0);const r=function d4(n,e){n=(0,M.m9)(n),nu("push",n._path),Sl("push",e,n._path,!0);const t=y2(n._repo),r=l4(t),i=w_(n,r),a=w_(n,r);let c;return c=null!=e?TM(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new fa(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new fa(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return nu("Reference.onDisconnect",this._delegate._path),new sz(new R2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class RC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:H4,forceLongPolling:G4}}useEmulator(e,t,r={}){!function $2(n,e,t,r={}){(n=(0,M.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Cl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Cl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new oC(oC.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,M.Sg)(r.mockUserToken,n.app.options.projectId);a=new oC(c)}!function U4(n,e,t,r){n.repoInfo_=new Tk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,M.Dv)("database.ref",0,1,arguments.length),e instanceof fa){const t=P2(this._delegate,e.toString());return new fa(this,t)}{const t=N2(this._delegate,e);return new fa(this,t)}}refFromURL(e){(0,M.Dv)("database.refFromURL",1,1,arguments.length);const r=P2(this._delegate,e);return new fa(this,r)}goOffline(){return(0,M.Dv)("database.goOffline",0,0,arguments.length),function z4(n){(n=(0,M.m9)(n))._checkNotDeleted("goOffline"),w2(n._repo)}(this._delegate)}goOnline(){return(0,M.Dv)("database.goOnline",0,0,arguments.length),function W4(n){(n=(0,M.m9)(n))._checkNotDeleted("goOnline"),function r4(n){n.persistentConnection_&&n.persistentConnection_.resume(_2)}(n._repo)}(this._delegate)}}RC.ServerValue={TIMESTAMP:function Y4(){return Z4}(),increment:n=>function Q4(n){return{".sv":{increment:n}}}(n)};var uz=Object.freeze({__proto__:null,initStandalone:function az({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){UF(t);const c=new ar.zt("auth-internal",new ar.H0("database-standalone"));return c.setComponent(new ar.wA("auth-internal",()=>r,"PRIVATE")),{instance:new RC(B2(n,c,void 0,e,a),n),namespace:i}}});const cz=RC.ServerValue;function G2(n){return null==n}function z2(n){return"function"==typeof n.set}function W2(n,e){return z2(e)?e:n.ref(e)}function q2(n,e){if(function dz(n){return"string"==typeof n}(n))return e.stringCase();if(z2(n))return e.firebaseCase();if(function hz(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function NC(n,e,t="on",r=Ti.z){return new ss.y(i=>{let a=null;return a=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,mt.U)(i=>{const{snapshot:a,prevKey:c}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,mo.B)())}function K2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function gz(n,e){const{payload:t,prevKey:r,key:i}=e,a=K2(n,i),c=function pz(n,e){if(G2(e))return 0;{const t=K2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function Z2(n){return(G2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Y2(n,e,t){return function fz(n,e,t){return NC(n,"value","once",t).pipe((0,Un.w)(r=>{const i=[(0,vt.of)(r)];return e.forEach(a=>i.push(NC(n,a,"on",t))),(0,Xo.T)(...i).pipe($a(gz,[]))}),(0,Gb.x)())}(n,e=Z2(e),t)}function Q2(n,e,t){const r=(e=Z2(e)).map(i=>NC(n,i,"on",t));return(0,Xo.T)(...r)}function X2(n,e){return function(r,i){return q2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function vz(n){return function(t){return t?q2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function J2(n,e){return function(){return NC(n,"value","on",e)}}!function lz(n){n.INTERNAL.registerComponent(new ar.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new RC(i,r)},"PUBLIC").setServiceProps({Reference:fa,Query:ms,Database:RC,DataSnapshot:Hp,enableLogging:q4,INTERNAL:uz,ServerValue:cz}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(zb.Z);const wz=new _.OlP("angularfire2.realtimeDatabaseURL"),Tz=new _.OlP("angularfire2.database.use-emulator");let Cz=(()=>{class n{constructor(t,r,i,a,c,h,g,v,b,S,k,V,K,fe,Ee){this.schedulers=h;const Ze=g,at=(0,An.on)(t,c,r);v&&Id(at,c,b,k,V,K,S,fe),this.database=(0,An.cc)(`${at.name}.database.${i}`,"AngularFireDatabase",at.name,()=>{const et=c.runOutsideAngular(()=>at.database(i||void 0));return Ze&&et.useEmulator(...Ze),et},[Ze])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>W2(this.database,t));let a=i;return r&&(a=r(i)),function Iz(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:X2(r,"update"),set:X2(r,"set"),push:i=>r.push(i),remove:vz(r),snapshotChanges:i=>Y2(n,i,t).pipe(Ht.iC),stateChanges:i=>Q2(n,i,t).pipe(Ht.iC),auditTrail:i=>function mz(n,e,t){return function yz(n,e,t){return function _z(n,e){return NC(n,"value","on",e).pipe((0,mt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function g$(...n){const e=(0,Dd.jO)(n);return(0,Rr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,IR.Xf)(n[g]).subscribe((0,or.x)(r,v=>{a[g]=v,!h&&!c[g]&&(c[g]=!0,(h=c.every(qs.y))&&(c=null))},OF.Z));t.subscribe((0,or.x)(r,g=>{if(h){const v=[g,...a];r.next(e?e(...v):v)}}))})}(e),(0,mt.U)(([i,a])=>{const c=i.lastKeyToLoad,h=a.map(g=>g.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function m$(n){return(0,Rr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,or.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,mt.U)(i=>i.actions))}(n,Q2(n,e).pipe($a((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Ht.iC),valueChanges:(i,a)=>Y2(n,i,t).pipe((0,mt.U)(h=>h.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),Ht.iC)}}(a,this)}object(t){return function Ez(n,e){return{query:n,snapshotChanges:()=>J2(n,e.schedulers.outsideAngular)().pipe(Ht.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>J2(n,e.schedulers.outsideAngular)().pipe(Ht.iC,(0,mt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>W2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(An.Dh),_.LFG(An.xv,8),_.LFG(wz,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ht.HU),_.LFG(Tz,8),_.LFG(Ed,8),_.LFG($c,8),_.LFG(ku,8),_.LFG(Rg,8),_.LFG(Eo,8),_.LFG(gf,8),_.LFG(mf,8),_.LFG(_d,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bz=(()=>{class n{constructor(){xu.Z.registerVersion("angularfire",Ht.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[Cz]}),n})();const Dz_firebase={apiKey:"AIzaSyCpKvN8eYnVGjGmnUFS70UhxqP9SQZ2HIk",authDomain:"fir-app-demo-acd72.firebaseapp.com",databaseURL:"https://fir-app-demo-acd72-default-rtdb.firebaseio.com",projectId:"fir-app-demo-acd72",storageBucket:"fir-app-demo-acd72.appspot.com",messagingSenderId:"315780365463",appId:"1:315780365463:web:42e83c38ef17d42b8b7dd2",measurementId:"G-91Y2LEH5BC"};var oc=O(5619);const{isArray:Az}=Array,{getPrototypeOf:Rz,prototype:Nz,keys:Pz}=Object;const{isArray:Mz}=Array;var Uz=O(7103);function DM(...n){const e=(0,Dd.yG)(n),t=(0,Dd.jO)(n),{args:r,keys:i}=function xz(n){if(1===n.length){const e=n[0];if(Az(e))return{args:e,keys:null};if(function kz(n){return n&&"object"==typeof n&&Rz(n)===Nz}(e)){const t=Pz(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,mn.D)([],e);const a=new ss.y(function Vz(n,e,t=qs.y){return r=>{eV(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let g=0;g<i;g++)eV(e,()=>{const v=(0,mn.D)(n[g],e);let b=!1;v.subscribe((0,or.x)(r,S=>{a[g]=S,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function Fz(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):qs.y));return t?a.pipe(function Lz(n){return(0,mt.U)(e=>function Oz(n,e){return Mz(e)?n(...e):n(e)}(n,e))}(t)):a}function eV(n,e,t){n?(0,Uz.f)(t,n,e):e()}function tV(n){return new ss.y(e=>{(0,IR.Xf)(n()).subscribe(e)})}var Bz=O(8407);function PC(n,e){const t=(0,vo.m)(n)?n:()=>n,r=i=>i.error(t());return new ss.y(e?i=>e.schedule(r,0,i):r)}var SM=O(7394);function AM(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,or.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class nV extends ss.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new SM.w0;const t=this.getSubject();e.add(this.source.subscribe((0,or.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=SM.w0.EMPTY)}return e}refCount(){return AM()(this)}}var ro=O(1631);function xC(n,e){return(0,vo.m)(e)?(0,ro.z)(n,e,1):(0,ro.z)(n,1)}var Us=O(9397);function T_(n){return(0,Rr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,or.x)(t,void 0,void 0,c=>{a=(0,IR.Xf)(n(c,T_(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function RM(n){return n<=0?()=>$r.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,or.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function NM(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",kC=Symbol("RouteTitle");class Gz{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function FI(n){return new Gz(n)}function zz(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Al(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!rV(n[i],e[i]))return!1;return!0}function rV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function iV(n){return n.length>0?n[n.length-1]:null}function Gp(n){return function Sz(n){return!!n&&(n instanceof ss.y||(0,vo.m)(n.lift)&&(0,vo.m)(n.subscribe))}(n)?n:(0,_.QGY)(n)?(0,mn.D)(Promise.resolve(n)):(0,vt.of)(n)}const qz={exact:function aV(n,e,t){if(!C_(n.segments,e.segments)||!nN(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!aV(n.children[r],e.children[r],t))return!1;return!0},subset:uV},sV={exact:function Kz(n,e){return Al(n,e)},subset:function Zz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rV(n[t],e[t]))},ignored:()=>!0};function oV(n,e,t){return qz[t.paths](n.root,e.root,t.matrixParams)&&sV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uV(n,e,t){return cV(n,e,e.segments,t)}function cV(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!C_(i,t)||e.hasChildren()||!nN(i,t,r))}if(n.segments.length===t.length){if(!C_(n.segments,t)||!nN(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!uV(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(C_(n.segments,i)&&nN(n.segments,i,r)&&n.children[Qt])&&cV(n.children[Qt],e,a,r)}}function nN(n,e,t){return e.every((r,i)=>sV[t](n[i].parameters,r.parameters))}class UI{constructor(e=new $n([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=FI(this.queryParams)),this._queryParamMap}toString(){return Xz.serialize(this)}}class $n{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rN(this)}}class MC{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=FI(this.parameters)),this._parameterMap}toString(){return hV(this)}}function C_(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let OC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(){return new PM},providedIn:"root"})}return n})();class PM{parse(e){const t=new c3(e);return new UI(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${LC(e.root,!0)}`,r=function t3(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${iN(t)}=${iN(i)}`).join("&"):`${iN(t)}=${iN(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Jz(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Xz=new PM;function rN(n){return n.segments.map(e=>hV(e)).join("/")}function LC(n,e){if(!n.hasChildren())return rN(n);if(e){const t=n.children[Qt]?LC(n.children[Qt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Qt&&r.push(`${i}:${LC(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Qz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Qt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Qt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Qt?[LC(n.children[Qt],!1)]:[`${i}:${LC(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${rN(n)}/${t[0]}`:`${rN(n)}/(${t.join("//")})`}}function lV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function iN(n){return lV(n).replace(/%3B/gi,";")}function xM(n){return lV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sN(n){return decodeURIComponent(n)}function dV(n){return sN(n.replace(/\+/g,"%20"))}function hV(n){return`${xM(n.path)}${function e3(n){return Object.keys(n).map(e=>`;${xM(e)}=${xM(n[e])}`).join("")}(n.parameters)}`}const n3=/^[^\/()?;#]+/;function kM(n){const e=n.match(n3);return e?e[0]:""}const r3=/^[^\/()?;=#]+/,s3=/^[^=?&#]+/,a3=/^[^&#]+/;class c3{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $n([],{}):new $n([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new $n(e,t)),r}parseSegment(){const e=kM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _.vHH(4009,!1);return this.capture(e),new MC(sN(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function i3(n){const e=n.match(r3);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=kM(this.remaining);i&&(r=i,this.capture(r))}e[sN(t)]=sN(r)}parseQueryParam(e){const t=function o3(n){const e=n.match(s3);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function u3(n){const e=n.match(a3);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=dV(t),a=dV(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=kM(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new _.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Qt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Qt]:new $n([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _.vHH(4011,!1)}}function fV(n){return n.segments.length>0?new $n([],{[Qt]:n}):n}function pV(n){const e={};for(const r of Object.keys(n.children)){const a=pV(n.children[r]);if(r===Qt&&0===a.segments.length&&a.hasChildren())for(const[c,h]of Object.entries(a.children))e[c]=h;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function l3(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new $n(n.segments.concat(e.segments),e.children)}return n}(new $n(n.segments,e))}function b_(n){return n instanceof UI}function gV(n){let e;const i=fV(function t(a){const c={};for(const g of a.children){const v=t(g);c[g.outlet]=v}const h=new $n(a.url,c);return a===n&&(e=h),h}(n.root));return e??i}function mV(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return MM(i,i,i,t,r);const a=function h3(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Object.entries(a.outlets).forEach(([g,v])=>{h[g]="string"==typeof v?v.split("/"):v}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new yV(t,e,r)}(e);if(a.toRoot())return MM(i,i,new $n([],{}),t,r);const c=function f3(n,e,t){if(n.isAbsolute)return new aN(e,!0,0);if(!t)return new aN(e,!1,NaN);if(null===t.parent)return new aN(t,!0,0);const r=oN(n.commands[0])?0:1;return function p3(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new _.vHH(4005,!1);i=r.segments.length}return new aN(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),h=c.processChildren?UC(c.segmentGroup,c.index,a.commands):vV(c.segmentGroup,c.index,a.commands);return MM(i,c.segmentGroup,h,t,r)}function oN(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function FC(n){return"object"==typeof n&&null!=n&&n.outlets}function MM(n,e,t,r,i){let c,a={};r&&Object.entries(r).forEach(([g,v])=>{a[g]=Array.isArray(v)?v.map(b=>`${b}`):`${v}`}),c=n===e?t:_V(n,e,t);const h=fV(pV(c));return new UI(h,a,i)}function _V(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:_V(a,e,t)}),new $n(n.segments,r)}class yV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oN(r[0]))throw new _.vHH(4003,!1);const i=r.find(FC);if(i&&i!==iV(r))throw new _.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class aN{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vV(n,e,t){if(n||(n=new $n([],{})),0===n.segments.length&&n.hasChildren())return UC(n,e,t);const r=function m3(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(FC(h))break;const g=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!EV(g,v,c))return a;r+=2}else{if(!EV(g,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new $n(n.segments.slice(0,r.pathIndex),{});return a.children[Qt]=new $n(n.segments.slice(r.pathIndex),n.children),UC(a,0,i)}return r.match&&0===i.length?new $n(n.segments,{}):r.match&&!n.hasChildren()?OM(n,e,t):r.match?UC(n,0,i):OM(n,e,t)}function UC(n,e,t){if(0===t.length)return new $n(n.segments,{});{const r=function g3(n){return FC(n[0])?n[0].outlets:{[Qt]:n}}(t),i={};if(Object.keys(r).some(a=>a!==Qt)&&n.children[Qt]&&1===n.numberOfChildren&&0===n.children[Qt].segments.length){const a=UC(n.children[Qt],e,t);return new $n(n.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[a]=vV(n.children[a],e,c))}),Object.entries(n.children).forEach(([a,c])=>{void 0===r[a]&&(i[a]=c)}),new $n(n.segments,i)}}function OM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(FC(a)){const g=_3(a.outlets);return new $n(r,g)}if(0===i&&oN(t[0])){r.push(new MC(n.segments[e].path,IV(t[0]))),i++;continue}const c=FC(a)?a.outlets[Qt]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&oN(h)?(r.push(new MC(c,IV(h))),i+=2):(r.push(new MC(c,{})),i++)}return new $n(r,{})}function _3(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=OM(new $n([],{}),0,r))}),e}function IV(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function EV(n,e,t){return n==t.path&&Al(e,t.parameters)}const VC="imperative";class Rl{constructor(e,t){this.id=e,this.url=t}}class uN extends Rl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zp extends Rl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class BC extends Rl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class VI extends Rl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class cN extends Rl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wV extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y3 extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v3 extends Rl{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class I3 extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E3 extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w3{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T3{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class C3{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b3{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D3{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S3{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TV{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class LM{}class FM{constructor(e){this.url=e}}class A3{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new jC,this.attachRef=null}}let jC=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new A3,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class CV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=UM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=UM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=VM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return VM(e,this._root).map(t=>t.value)}}function UM(n,e){if(n===e.value)return e;for(const t of e.children){const r=UM(n,t);if(r)return r}return null}function VM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=VM(n,t);if(r.length)return r.unshift(e),r}return[]}class vh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function BI(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bV extends CV{constructor(e,t){super(e),this.snapshot=t,BM(this,e)}toString(){return this.snapshot.toString()}}function DV(n,e){const t=function R3(n,e){const c=new lN([],{},{},"",{},Qt,e,null,{});return new AV("",new vh(c,[]))}(0,e),r=new oc.X([new MC("",{})]),i=new oc.X({}),a=new oc.X({}),c=new oc.X({}),h=new oc.X(""),g=new jI(r,i,c,h,a,Qt,e,t.root);return g.snapshot=t.root,new bV(new vh(g,[]),t)}class jI{constructor(e,t,r,i,a,c,h,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,mt.U)(v=>v[kC]))??(0,vt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>FI(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>FI(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function SV(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function N3(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lN{get title(){return this.data?.[kC]}constructor(e,t,r,i,a,c,h,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=FI(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=FI(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AV extends CV{constructor(e,t){super(t),this.url=e,BM(this,t)}toString(){return RV(this._root)}}function BM(n,e){e.value._routerState=n,e.children.forEach(t=>BM(n,t))}function RV(n){const e=n.children.length>0?` { ${n.children.map(RV).join(", ")} } `:"";return`${n.value}${e}`}function jM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Al(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Al(e.params,t.params)||n.paramsSubject.next(t.params),function Wz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Al(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Al(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $M(n,e){const t=Al(n.params,e.params)&&function Yz(n,e){return C_(n,e)&&n.every((t,r)=>Al(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$M(n.parent,e.parent))}let HM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(jC),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb),this.inputBinder=(0,_.f3M)(dN,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new P3(t,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]})}return n})();class P3{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jI?this.route:e===jC?this.childContexts:this.parent.get(e,t)}}const dN=new _.OlP("");let NV=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=DM([r.queryParams,r.params,r.data]).pipe((0,Un.w)(([a,c,h],g)=>(h={...a,...c,...h},0===g?(0,vt.of)(h):Promise.resolve(h)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,_.qFp)(r.component);if(c)for(const{templateName:h}of c.inputs)t.activatedComponentRef.setInput(h,a[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();function $C(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function k3(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $C(n,r,i);return $C(n,r)})}(n,e,t);return new vh(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>$C(n,h)),c}}const r=function M3(n){return new jI(new oc.X(n.url),new oc.X(n.params),new oc.X(n.queryParams),new oc.X(n.fragment),new oc.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>$C(n,a));return new vh(r,i)}}const GM="ngNavigationCancelingError";function PV(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=b_(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xV(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function xV(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[GM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function kV(n){return n&&n[GM]}let MV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(r,i){1&r&&_._UZ(0,"router-outlet")},dependencies:[HM],encapsulation:2})}return n})();function zM(n){const e=n.children&&n.children.map(zM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=MV),t}function ac(n){return n.outlet||Qt}function HC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $3{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=BI(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=BI(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=BI(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=BI(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new S3(a.value.snapshot))}),e.children.length&&this.forwardEvent(new b3(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(jM(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),jM(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=HC(i.snapshot);c.attachRef=null,c.route=i,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class OV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hN{constructor(e,t){this.component=e,this.route=t}}function H3(n,e,t){const r=n._root;return GC(r,e?e._root:null,t,[r.value])}function $I(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,_.Z0I)(n)?e.get(n):n:r}function GC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=BI(e);return n.children.forEach(c=>{(function z3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const g=function W3(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!C_(n.url,e.url);case"pathParamsOrQueryParamsChange":return!C_(n.url,e.url)||!Al(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$M(n,e)||!Al(n.queryParams,e.queryParams);default:return!$M(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new OV(r)):(a.data=c.data,a._resolvedData=c._resolvedData),GC(n,e,a.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new hN(h.outlet.component,c))}else c&&zC(e,h,i),i.canActivateChecks.push(new OV(r)),GC(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,h])=>zC(h,t.getContext(c),i)),i}function zC(n,e,t){const r=BI(n),i=n.value;Object.entries(r).forEach(([a,c])=>{zC(c,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new hN(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function WC(n){return"function"==typeof n}function LV(n){return n instanceof wu||"EmptyError"===n?.name}const fN=Symbol("INITIAL_VALUE");function HI(){return(0,Un.w)(n=>DM(n.map(e=>e.pipe(ai(1),Sd(fN)))).pipe((0,mt.U)(e=>{for(const t of e)if(!0!==t){if(t===fN)return fN;if(!1===t||t instanceof UI)return t}return!0}),jr(e=>e!==fN),ai(1)))}function FV(n){return(0,Bz.z)((0,Us.b)(e=>{if(b_(e))throw PV(0,e)}),(0,mt.U)(e=>!0===e))}class pN{constructor(e){this.segmentGroup=e||null}}class UV{constructor(e){this.urlTree=e}}function GI(n){return PC(new pN(n))}function VV(n){return PC(new UV(n))}class hW{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new _.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,vt.of)(r);if(i.numberOfChildren>1||!i.children[Qt])return PC(new _.vHH(4e3,!1));i=i.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new UI(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const h=a.substring(1);r[i]=t[h]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([h,g])=>{c[h]=this.createSegmentGroup(e,g,r,i)}),new $n(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new _.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const WM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fW(n,e,t,r,i){const a=qM(n,e,t);return a.matched?(r=function L3(n,e){return n.providers&&!n._injector&&(n._injector=(0,_.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function cW(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,vt.of)(!0);const a=i.map(c=>{const h=$I(c,n);return Gp(function X3(n){return n&&WC(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,vt.of)(a).pipe(HI(),FV())}(r,e,t).pipe((0,mt.U)(c=>!0===c?a:{...WM}))):(0,vt.of)(a)}function qM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...WM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||zz)(t,n,e);if(!i)return{...WM};const a={};Object.entries(i.posParams??{}).forEach(([h,g])=>{a[h]=g.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function BV(n,e,t,r){return t.length>0&&function mW(n,e,t){return t.some(r=>gN(n,e,r)&&ac(r)!==Qt)}(n,t,r)?{segmentGroup:new $n(e,gW(r,new $n(t,n.children))),slicedSegments:[]}:0===t.length&&function _W(n,e,t){return t.some(r=>gN(n,e,r))}(n,t,r)?{segmentGroup:new $n(n.segments,pW(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new $n(n.segments,n.children),slicedSegments:t}}function pW(n,e,t,r,i){const a={};for(const c of r)if(gN(n,t,c)&&!i[ac(c)]){const h=new $n([],{});a[ac(c)]=h}return{...i,...a}}function gW(n,e){const t={};t[Qt]=e;for(const r of n)if(""===r.path&&ac(r)!==Qt){const i=new $n([],{});t[ac(r)]=i}return t}function gN(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class EW{constructor(e,t,r,i,a,c,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new hW(this.urlSerializer,this.urlTree)}noMatchError(e){return new _.vHH(4002,!1)}recognize(){const e=BV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe(T_(t=>{if(t instanceof UV)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof pN?this.noMatchError(t):t}),(0,mt.U)(t=>{const r=new lN([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,{}),i=new vh(r,t),a=new AV("",i),c=function d3(n,e,t=null,r=null){return mV(gV(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(a._root),{state:a,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Qt).pipe(T_(r=>{throw r instanceof pN?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=SV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,mn.D)(i).pipe(xC(a=>{const c=r.children[a],h=function B3(n,e){const t=n.filter(r=>ac(r)===e);return t.push(...n.filter(r=>ac(r)!==e)),t}(t,a);return this.processSegmentGroup(e,h,c,a)}),$a((a,c)=>(a.push(...c),a)),Ws(null),function jz(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((i,a)=>n(i,a,r)):qs.y,RM(1),t?Ws(e):Na(()=>new wu))}(),(0,ro.z)(a=>{if(null===a)return GI(r);const c=jV(a);return function wW(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,vt.of)(c)}))}processSegment(e,t,r,i,a,c){return(0,mn.D)(t).pipe(xC(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,a,c).pipe(T_(g=>{if(g instanceof pN)return(0,vt.of)(null);throw g}))),yo(h=>!!h),T_(h=>{if(LV(h))return function vW(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,vt.of)([]):GI(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,a,c,h){return function yW(n,e,t,r){return!!(ac(n)===r||r!==Qt&&gN(e,t,n))&&("**"===n.path||qM(e,n,t).matched)}(r,i,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,c):GI(i):GI(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?VV(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,ro.z)(c=>{const h=new $n(c,{});return this.processSegment(e,t,h,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:g,remainingSegments:v,positionalParamSegments:b}=qM(t,i,a);if(!h)return GI(t);const S=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,b);return i.redirectTo.startsWith("/")?VV(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,ro.z)(k=>this.processSegment(e,r,t,k.concat(v),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,c){let h;if("**"===r.path){const g=i.length>0?iV(i).parameters:{},v=new lN(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$V(r),ac(r),r.component??r._loadedComponent??null,r,HV(r));h=(0,vt.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=fW(t,r,i,e).pipe((0,mt.U)(({matched:g,consumedSegments:v,remainingSegments:b,parameters:S})=>g?{snapshot:new lN(v,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$V(r),ac(r),r.component??r._loadedComponent??null,r,HV(r)),consumedSegments:v,remainingSegments:b}:null));return h.pipe((0,Un.w)(g=>null===g?GI(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Un.w)(({routes:v})=>{const b=r._loadedInjector??e,{snapshot:S,consumedSegments:k,remainingSegments:V}=g,{segmentGroup:K,slicedSegments:fe}=BV(t,k,V,v);if(0===fe.length&&K.hasChildren())return this.processChildren(b,v,K).pipe((0,mt.U)(Ze=>null===Ze?null:[new vh(S,Ze)]));if(0===v.length&&0===fe.length)return(0,vt.of)([new vh(S,[])]);const Ee=ac(r)===a;return this.processSegment(b,v,K,fe,Ee?Qt:a,!0).pipe((0,mt.U)(Ze=>[new vh(S,Ze)]))}))))}getChildConfig(e,t,r){return t.children?(0,vt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,vt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function uW(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,vt.of)(!0);const a=i.map(c=>{const h=$I(c,n);return Gp(function K3(n){return n&&WC(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,vt.of)(a).pipe(HI(),FV())}(e,t,r).pipe((0,ro.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Us.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function dW(n){return PC(xV(!1,3))}())):(0,vt.of)({routes:[],injector:e})}}function TW(n){const e=n.value.routeConfig;return e&&""===e.path}function jV(n){const e=[],t=new Set;for(const r of n){if(!TW(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=jV(r.children);e.push(new vh(r.value,i))}return e.filter(r=>!t.has(r))}function $V(n){return n.data||{}}function HV(n){return n.resolve||{}}function GV(n){return"string"==typeof n.title||null===n.title}function KM(n){return(0,Un.w)(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,mt.U)(()=>e)):(0,vt.of)(e)})}const zI=new _.OlP("ROUTES");let ZM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,vt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gp(t.loadComponent()).pipe((0,mt.U)(zV),(0,Us.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),NM(()=>{this.componentLoaders.delete(t)})),i=new nV(r,()=>new Ds.x).pipe(AM());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,vt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function NW(n,e,t,r){return Gp(n.loadChildren()).pipe((0,mt.U)(zV),(0,ro.z)(i=>i instanceof _.YKP||Array.isArray(i)?(0,vt.of)(i):(0,mn.D)(e.compileModuleAsync(i))),(0,mt.U)(i=>{r&&r(n);let a,c,h=!1;return Array.isArray(i)?(c=i,!0):(a=i.create(t).injector,c=a.get(zI,[],{optional:!0,self:!0}).flat()),{routes:c.map(zM),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(NM(()=>{this.childrenLoaders.delete(r)})),c=new nV(a,()=>new Ds.x).pipe(AM());return this.childrenLoaders.set(r,c),c}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zV(n){return function PW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let mN=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ds.x,this.transitionAbortSubject=new Ds.x,this.configLoader=(0,_.f3M)(ZM),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(OC),this.rootContexts=(0,_.f3M)(jC),this.inputBindingEnabled=null!==(0,_.f3M)(dN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,vt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new T3(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new w3(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new oc.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:VC,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(jr(a=>0!==a.id),(0,mt.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Un.w)(a=>{this.currentTransition=a;let c=!1,h=!1;return(0,vt.of)(a).pipe((0,Us.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Un.w)(g=>{const v=g.currentBrowserUrl.toString(),b=!t.navigated||g.extractedUrl.toString()!==v||v!==g.currentUrlTree.toString();if(!b&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const k="";return this.events.next(new VI(g.id,this.urlSerializer.serialize(g.rawUrl),k,0)),g.resolve(null),$r.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,vt.of)(g).pipe((0,Un.w)(k=>{const V=this.transitions?.getValue();return this.events.next(new uN(k.id,this.urlSerializer.serialize(k.extractedUrl),k.source,k.restoredState)),V!==this.transitions?.getValue()?$r.E:Promise.resolve(k)}),function CW(n,e,t,r,i,a){return(0,ro.z)(c=>function IW(n,e,t,r,i,a,c="emptyOnly"){return new EW(n,e,t,r,i,c,a).recognize()}(n,e,t,r,c.extractedUrl,i,a).pipe((0,mt.U)(({state:h,tree:g})=>({...c,targetSnapshot:h,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Us.b)(k=>{a.targetSnapshot=k.targetSnapshot,a.urlAfterRedirects=k.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:k.urlAfterRedirects};const V=new wV(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(V)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:k,extractedUrl:V,source:K,restoredState:fe,extras:Ee}=g,Ze=new uN(k,this.urlSerializer.serialize(V),K,fe);this.events.next(Ze);const at=DV(0,this.rootComponentType).snapshot;return this.currentTransition=a={...g,targetSnapshot:at,urlAfterRedirects:V,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}},(0,vt.of)(a)}{const k="";return this.events.next(new VI(g.id,this.urlSerializer.serialize(g.extractedUrl),k,1)),g.resolve(null),$r.E}}),(0,Us.b)(g=>{const v=new y3(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),(0,mt.U)(g=>(this.currentTransition=a={...g,guards:H3(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},a)),function eW(n,e){return(0,ro.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?(0,vt.of)({...t,guardsResult:!0}):function tW(n,e,t,r){return(0,mn.D)(n).pipe((0,ro.z)(i=>function aW(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,vt.of)(!0);const c=a.map(h=>{const g=HC(e)??i,v=$I(h,g);return Gp(function Q3(n){return n&&WC(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(yo())});return(0,vt.of)(c).pipe(HI())}(i.component,i.route,t,e,r)),yo(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ro.z)(h=>h&&function q3(n){return"boolean"==typeof n}(h)?function nW(n,e,t,r){return(0,mn.D)(e).pipe(xC(i=>Hg(function iW(n,e){return null!==n&&e&&e(new C3(n)),(0,vt.of)(!0)}(i.route.parent,r),function rW(n,e){return null!==n&&e&&e(new D3(n)),(0,vt.of)(!0)}(i.route,r),function oW(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function G3(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>tV(()=>{const h=c.guards.map(g=>{const v=HC(c.node)??t,b=$I(g,v);return Gp(function Y3(n){return n&&WC(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(yo())});return(0,vt.of)(h).pipe(HI())}));return(0,vt.of)(a).pipe(HI())}(n,i.path,t),function sW(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,vt.of)(!0);const i=r.map(a=>tV(()=>{const c=HC(e)??t,h=$I(a,c);return Gp(function Z3(n){return n&&WC(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(yo())}));return(0,vt.of)(i).pipe(HI())}(n,i.route,t))),yo(i=>!0!==i,!0))}(r,a,n,e):(0,vt.of)(h)),(0,mt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,g=>this.events.next(g)),(0,Us.b)(g=>{if(a.guardsResult=g.guardsResult,b_(g.guardsResult))throw PV(0,g.guardsResult);const v=new v3(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(v)}),jr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),KM(g=>{if(g.guards.canActivateChecks.length)return(0,vt.of)(g).pipe((0,Us.b)(v=>{const b=new I3(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}),(0,Un.w)(v=>{let b=!1;return(0,vt.of)(v).pipe(function bW(n,e){return(0,ro.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,vt.of)(t);let a=0;return(0,mn.D)(i).pipe(xC(c=>function DW(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!GV(i)&&(a[kC]=i.title),function SW(n,e,t,r){const i=function AW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,vt.of)({});const a={};return(0,mn.D)(i).pipe((0,ro.z)(c=>function RW(n,e,t,r){const i=HC(e)??r,a=$I(n,i);return Gp(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(yo(),(0,Us.b)(h=>{a[c]=h}))),RM(1),function $z(n){return(0,mt.U)(()=>n)}(a),T_(c=>LV(c)?$r.E:PC(c)))}(a,n,e,r).pipe((0,mt.U)(c=>(n._resolvedData=c,n.data=SV(n,t).resolve,i&&GV(i)&&(n.data[kC]=i.title),null)))}(c.route,r,n,e)),(0,Us.b)(()=>a++),RM(1),(0,ro.z)(c=>a===i.length?(0,vt.of)(t):$r.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Us.b)({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(v,"",2)}}))}),(0,Us.b)(v=>{const b=new E3(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}))}),KM(g=>{const v=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Us.b)(k=>{b.component=k}),(0,mt.U)(()=>{})));for(const k of b.children)S.push(...v(k));return S};return DM(v(g.targetSnapshot.root)).pipe(Ws(),ai(1))}),KM(()=>this.afterPreactivation()),(0,mt.U)(g=>{const v=function x3(n,e,t){const r=$C(n,e._root,t?t._root:void 0);return new bV(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=a={...g,targetRouterState:v},a}),(0,Us.b)(()=>{this.events.next(new LM)}),((n,e,t,r)=>(0,mt.U)(i=>(new $3(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),ai(1),(0,Us.b)({next:g=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zp(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{c=!0}}),function Hz(n){return(0,Rr.e)((e,t)=>{(0,IR.Xf)(n).subscribe((0,or.x)(t,()=>t.complete(),OF.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Us.b)(g=>{throw g}))),NM(()=>{c||h||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),T_(g=>{if(h=!0,kV(g))this.events.next(new BC(a.id,this.urlSerializer.serialize(a.extractedUrl),g.message,g.cancellationCode)),function O3(n){return kV(n)&&b_(n.url)}(g)?this.events.next(new FM(g.url)):a.resolve(!1);else{this.events.next(new cN(a.id,this.urlSerializer.serialize(a.extractedUrl),g,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(g))}catch(v){a.reject(v)}}return $r.E}))}))}cancelNavigationTransition(t,r,i){const a=new BC(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WV(n){return n!==VC}let qV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[kC]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(xW)},providedIn:"root"})}return n})(),xW=(()=>{class n extends qV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(Pe))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(OW)},providedIn:"root"})}return n})();class MW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let OW=(()=>{class n extends MW{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=_.n5z(n)))(i||n)}}();static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _N=new _.OlP("",{providedIn:"root",factory:()=>({})});let LW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(FW)},providedIn:"root"})}return n})(),FW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qC=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(qC||{});function KV(n,e){n.events.pipe(jr(t=>t instanceof zp||t instanceof BC||t instanceof cN||t instanceof VI),(0,mt.U)(t=>t instanceof zp||t instanceof VI?qC.COMPLETE:t instanceof BC&&(0===t.code||1===t.code)?qC.REDIRECTING:qC.FAILED),jr(t=>t!==qC.REDIRECTING),ai(1)).subscribe(()=>{e()})}function UW(n){throw n}function VW(n,e,t){return e.parse("/")}const BW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Po=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this._events=new Ds.x,this.options=(0,_.f3M)(_N,{optional:!0})||{},this.pendingTasks=(0,_.f3M)(_.HDt),this.errorHandler=this.options.errorHandler||UW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||VW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(LW),this.routeReuseStrategy=(0,_.f3M)(kW),this.titleStrategy=(0,_.f3M)(qV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,_.f3M)(zI,{optional:!0})?.flat()??[],this.navigationTransitions=(0,_.f3M)(mN),this.urlSerializer=(0,_.f3M)(OC),this.location=(0,_.f3M)(We),this.componentInputBindingEnabled=!!(0,_.f3M)(dN,{optional:!0}),this.eventsSubscription=new SM.w0,this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new UI,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=DV(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(ZV(r)&&this._events.next(r));if(r instanceof uN)WV(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof VI)this.rawUrlTree=i.rawUrl;else if(r instanceof wV){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof LM)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof BC)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof FM){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||WV(i.source)};this.scheduleNavigation(a,VC,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof cN&&this.restoreHistory(i,!0),r instanceof zp&&(this.navigated=!0),ZV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),VC,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(zM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,v=g?this.currentUrlTree.fragment:c;let S,b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}null!==b&&(b=this.removeEmptyProps(b));try{S=gV(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return mV(S,t,b,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=b_(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,VC,null,r)}navigate(t,r={skipLocationChange:!1}){return function $W(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new _.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...BW}:!1===r?{...jW}:r,b_(t))return oV(this.currentUrlTree,t,i);const a=this.parseUrl(t);return oV(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,g,v;c?(h=c.resolve,g=c.reject,v=c.promise):v=new Promise((S,k)=>{h=S,g=k});const b=this.pendingTasks.add();return KV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:h,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZV(n){return!(n instanceof LM||n instanceof FM)}let D_=(()=>{class n{constructor(t,r,i,a,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new Ds.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof zp&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(_.Y36(Po),_.Y36(jI),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Ve))};static#t=this.\u0275dir=_.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&_.NdJ("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&_.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",_.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",_.VuI],replaceUrl:["replaceUrl","replaceUrl",_.VuI],routerLink:"routerLink"},standalone:!0,features:[_.Xq5,_.TTD]})}return n})();class YV{}let zW=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(jr(t=>t instanceof zp),xC(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,_.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,mn.D)(i).pipe((0,Kc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,vt.of)(null);const a=i.pipe((0,ro.z)(c=>null===c?(0,vt.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,mn.D)([a,c]).pipe((0,Kc.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(Po),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(YV),_.LFG(ZM))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const YM=new _.OlP("");let QV=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof uN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zp?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof VI&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof TV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new TV(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){_.$Z()};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac})}return n})();function Ih(n,e){return{\u0275kind:n,\u0275providers:e}}function JV(){const n=(0,_.f3M)(_.zs3);return e=>{const t=n.get(_.z2F);if(e!==t.components[0])return;const r=n.get(Po),i=n.get(eB);1===n.get(QM)&&r.initialNavigation(),n.get(tB,null,_.XFs.Optional)?.setUpPreloading(),n.get(YM,null,_.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const eB=new _.OlP("",{factory:()=>new Ds.x}),QM=new _.OlP("",{providedIn:"root",factory:()=>1}),tB=new _.OlP("");function ZW(n){return Ih(0,[{provide:tB,useExisting:zW},{provide:YV,useExisting:n}])}const nB=new _.OlP("ROUTER_FORROOT_GUARD"),QW=[We,{provide:OC,useClass:PM},Po,jC,{provide:jI,useFactory:function XV(n){return n.routerState.root},deps:[Po]},ZM,[]];function XW(){return new _.PXZ("Router",Po)}let rB=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[QW,[],{provide:zI,multi:!0,useValue:t},{provide:nB,useFactory:n6,deps:[[Po,new _.FiY,new _.tp0]]},{provide:_N,useValue:r||{}},r?.useHash?{provide:Ve,useClass:Me}:{provide:Ve,useClass:Ke},{provide:YM,useFactory:()=>{const n=(0,_.f3M)(wr),e=(0,_.f3M)(_.R0b),t=(0,_.f3M)(_N),r=(0,_.f3M)(mN),i=(0,_.f3M)(OC);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QV(i,r,n,e,t)}},r?.preloadingStrategy?ZW(r.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:XW},r?.initialNavigation?r6(r):[],r?.bindToComponentInputs?Ih(8,[NV,{provide:dN,useExisting:NV}]).\u0275providers:[],[{provide:iB,useFactory:JV},{provide:_.tb,multi:!0,useExisting:iB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:zI,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(nB,8))};static#t=this.\u0275mod=_.oAB({type:n});static#n=this.\u0275inj=_.cJS({})}return n})();function n6(n){return"guarded"}function r6(n){return["disabled"===n.initialNavigation?Ih(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const e=(0,_.f3M)(Po);return()=>{e.setUpLocationChangeListener()}}},{provide:QM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ih(2,[{provide:QM,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:e=>{const t=e.get(xe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Po),a=e.get(eB);KV(i,()=>{r(!0)}),e.get(mN).afterPreactivation=()=>(r(!0),a.closed?(0,vt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const iB=new _.OlP("");var XM=O(7582);const s6=function uB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},cB=new M.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yN=new gr.Yd("@firebase/auth");function vN(n,...e){yN.logLevel<=gr.in.ERROR&&yN.error(`Auth (${an.SDK_VERSION}): ${n}`,...e)}function xo(n,...e){throw JM(n,...e)}function Nl(n,...e){return JM(n,...e)}function JM(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cB.create(n,...e)}function tt(n,e,...t){if(!n)throw JM(e,...t)}function Pl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vN(e),new Error(e)}function Wp(n,e){n||Pl(e)}function dB(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class ZC{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wp(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,M.uI)()||(0,M.b$)()}get(){return function a6(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function eO(){return"http:"===dB()||"https:"===dB()}()||(0,M.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class hB{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const c6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},l6=new ZC(3e4,6e4);function kr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function qr(n,e,t,r){return nO.apply(this,arguments)}function nO(){return nO=(0,Y.Z)(function*(n,e,t,r,i={}){return fB(n,i,(0,Y.Z)(function*(){let a={},c={};r&&("GET"===e?c=r:a={body:JSON.stringify(r)});const h=(0,M.xO)(Object.assign({key:n.config.apiKey},c)).slice(1),g=yield n._getAdditionalHeaders();return g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode),hB.fetch()(pB(n,n.config.apiHost,t,h),Object.assign({method:e,headers:g,referrerPolicy:"no-referrer"},a))}))}),nO.apply(this,arguments)}function fB(n,e,t){return rO.apply(this,arguments)}function rO(){return rO=(0,Y.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},c6),e);try{const i=new d6(n),a=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=yield a.json();if("needConfirmation"in c)throw YC(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[g,v]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===g)throw YC(n,"credential-already-in-use",c);if("EMAIL_EXISTS"===g)throw YC(n,"email-already-in-use",c);if("USER_DISABLED"===g)throw YC(n,"user-disabled",c);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw function lB(n,e,t){const r=Object.assign(Object.assign({},s6()),{[e]:t});return new M.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,b,v);xo(n,b)}}catch(i){if(i instanceof M.ZR)throw i;xo(n,"network-request-failed",{message:String(i)})}}),rO.apply(this,arguments)}function iO(){return iO=(0,Y.Z)(function*(n,e,t,r,i={}){const a=yield qr(n,e,t,r,i);return"mfaPendingCredential"in a&&xo(n,"multi-factor-auth-required",{_serverResponse:a}),a}),iO.apply(this,arguments)}function pB(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function tO(n,e){Wp(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class d6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Nl(this.auth,"network-request-failed")),l6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function YC(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Nl(n,e,r);return i.customData._tokenResponse=t,i}function aO(){return aO=(0,Y.Z)(function*(n,e){return qr(n,"POST","/v1/accounts:delete",e)}),aO.apply(this,arguments)}function cO(){return cO=(0,Y.Z)(function*(n,e){return qr(n,"POST","/v1/accounts:lookup",e)}),cO.apply(this,arguments)}function QC(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lO(){return lO=(0,Y.Z)(function*(n,e=!1){const t=(0,M.m9)(n),r=yield t.getIdToken(e),i=IN(r);tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:QC(dO(i.auth_time)),issuedAtTime:QC(dO(i.iat)),expirationTime:QC(dO(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}),lO.apply(this,arguments)}function dO(n){return 1e3*Number(n)}function IN(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return vN("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,M.tV)(t);return i?JSON.parse(i):(vN("Failed to decode base64 JWT payload"),null)}catch(i){return vN("Caught error parsing JWT payload as JSON",i?.toString()),null}}function wh(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,Y.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof M.ZR&&function y6({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),hO.apply(this,arguments)}class v6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,Y.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,Y.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class mB{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=QC(this.lastLoginAt),this.creationTime=QC(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function XC(n){return fO.apply(this,arguments)}function fO(){return fO=(0,Y.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield wh(n,function g6(n,e){return cO.apply(this,arguments)}(t,{idToken:r}));tt(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const c=null!==(e=a.providerUserInfo)&&void 0!==e&&e.length?function w6(n){return n.map(e=>{var{providerId:t}=e,r=(0,XM._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(a.providerUserInfo):[],h=function E6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,c),b=!!n.isAnonymous&&!(n.email&&a.passwordHash||h?.length),S={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new mB(a.createdAt,a.lastLoginAt),isAnonymous:b};Object.assign(n,S)}),fO.apply(this,arguments)}function pO(){return pO=(0,Y.Z)(function*(n){const e=(0,M.m9)(n);yield XC(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),pO.apply(this,arguments)}function gO(){return gO=(0,Y.Z)(function*(n,e){const t=yield fB(n,{},(0,Y.Z)(function*(){const r=(0,M.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=pB(n,i,"/v1/token",`key=${a}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",hB.fetch()(c,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),gO.apply(this,arguments)}class JC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function _6(n){const e=IN(n);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,Y.Z)(function*(){return tt(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,Y.Z)(function*(){const{accessToken:i,refreshToken:a,expiresIn:c}=yield function T6(n,e){return gO.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,a,Number(c))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new JC;return r&&(tt("string"==typeof r,"internal-error",{appName:e}),c.refreshToken=r),i&&(tt("string"==typeof i,"internal-error",{appName:e}),c.accessToken=i),a&&(tt("number"==typeof a,"internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new JC,this.toJSON())}_performRefresh(){return Pl("not implemented")}}function qp(n,e){tt("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class S_{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=(0,XM._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new mB(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,Y.Z)(function*(){const r=yield wh(t,t.stsTokenManager.getToken(t.auth,e));return tt(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function m6(n){return lO.apply(this,arguments)}(this,e)}reload(){return function I6(n){return pO.apply(this,arguments)}(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new S_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,Y.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield XC(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,Y.Z)(function*(){const t=yield e.getIdToken();return yield wh(e,function f6(n,e){return aO.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,c,h,g,v,b;const S=null!==(r=t.displayName)&&void 0!==r?r:void 0,k=null!==(i=t.email)&&void 0!==i?i:void 0,V=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,K=null!==(c=t.photoURL)&&void 0!==c?c:void 0,fe=null!==(h=t.tenantId)&&void 0!==h?h:void 0,Ee=null!==(g=t._redirectEventId)&&void 0!==g?g:void 0,Ze=null!==(v=t.createdAt)&&void 0!==v?v:void 0,at=null!==(b=t.lastLoginAt)&&void 0!==b?b:void 0,{uid:et,emailVerified:lt,isAnonymous:Pt,providerData:$t,stsTokenManager:Kr}=t;tt(et&&Kr,e,"internal-error");const io=JC.fromJSON(this.name,Kr);tt("string"==typeof et,e,"internal-error"),qp(S,e.name),qp(k,e.name),tt("boolean"==typeof lt,e,"internal-error"),tt("boolean"==typeof Pt,e,"internal-error"),qp(V,e.name),qp(K,e.name),qp(fe,e.name),qp(Ee,e.name),qp(Ze,e.name),qp(at,e.name);const xl=new S_({uid:et,auth:e,email:k,emailVerified:lt,displayName:S,isAnonymous:Pt,photoURL:K,phoneNumber:V,tenantId:fe,stsTokenManager:io,createdAt:Ze,lastLoginAt:at});return $t&&Array.isArray($t)&&(xl.providerData=$t.map(G9=>Object.assign({},G9))),Ee&&(xl._redirectEventId=Ee),xl}static _fromIdTokenResponse(e,t,r=!1){return(0,Y.Z)(function*(){const i=new JC;i.updateFromServerResponse(t);const a=new S_({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield XC(a),a})()}}const _B=new Map;function Th(n){Wp(n instanceof Function,"Expected a class definition");let e=_B.get(n);return e?(Wp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_B.set(n,e),e)}const yB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,Y.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,Y.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,Y.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,Y.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function EN(n,e,t){return`firebase:${n}:${e}:${t}`}class qI{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=EN(this.userKey,i.apiKey,a),this.fullPersistenceKey=EN("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,Y.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?S_._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,Y.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,Y.Z)(function*(){if(!t.length)return new qI(Th(yB),e,r);const i=(yield Promise.all(t.map(function(){var v=(0,Y.Z)(function*(b){if(yield b._isAvailable())return b});return function(b){return v.apply(this,arguments)}}()))).filter(v=>v);let a=i[0]||Th(yB);const c=EN(r,e.config.apiKey,e.name);let h=null;for(const v of t)try{const b=yield v._get(c);if(b){const S=S_._fromJSON(e,b);v!==a&&(h=S),a=v;break}}catch{}const g=i.filter(v=>v._shouldAllowMigration);return a._shouldAllowMigration&&g.length?(a=g[0],h&&(yield a._set(c,h.toJSON())),yield Promise.all(t.map(function(){var v=(0,Y.Z)(function*(b){if(b!==a)try{yield b._remove(c)}catch{}});return function(b){return v.apply(this,arguments)}}())),new qI(a,e,r)):new qI(a,e,r)})()}}function vB(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function wB(n=(0,M.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function IB(n=(0,M.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function CB(n=(0,M.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function bB(n=(0,M.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function mO(n=(0,M.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function EB(n=(0,M.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function TB(n=(0,M.z$)()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function DB(n,e=[]){let t;switch(n){case"Browser":t=vB((0,M.z$)());break;case"Worker":t=`${vB((0,M.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${an.SDK_VERSION}/${r}`}class D6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,h)=>{try{c(e(a))}catch(g){h(g)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,Y.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const a of r)try{a()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function _O(){return _O=(0,Y.Z)(function*(n,e={}){return qr(n,"GET","/v2/passwordPolicy",kr(n,e))}),_O.apply(this,arguments)}class R6{constructor(e){var t,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=c.minPasswordLength)&&void 0!==t?t:6,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),void 0!==c.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),void 0!==c.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),void 0!==c.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),void 0!==c.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,c,h;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=null===(t=g.meetsMinPasswordLength)||void 0===t||t),g.isValid&&(g.isValid=null===(r=g.meetsMaxPasswordLength)||void 0===r||r),g.isValid&&(g.isValid=null===(i=g.containsLowercaseLetter)||void 0===i||i),g.isValid&&(g.isValid=null===(a=g.containsUppercaseLetter)||void 0===a||a),g.isValid&&(g.isValid=null===(c=g.containsNumericCharacter)||void 0===c||c),g.isValid&&(g.isValid=null===(h=g.containsNonAlphanumericCharacter)||void 0===h||h),g}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class N6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SB(this),this.idTokenSubscription=new SB(this),this.beforeStateQueue=new D6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Th(t)),this._initializationPromise=this.queue((0,Y.Z)(function*(){var i,a;if(!r._deleted&&(r.persistenceManager=yield qI.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(a=r.currentUser)||void 0===a?void 0:a.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,Y.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,Y.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let a=i,c=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,g=a?._redirectEventId,v=yield t.tryRedirectSignIn(e);(!h||h===g)&&v?.user&&(a=v.user,c=!0)}if(!a)return t.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{yield t.beforeStateQueue.runMiddleware(a)}catch(h){a=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null)}return tt(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a)})()}tryRedirectSignIn(e){var t=this;return(0,Y.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,Y.Z)(function*(){try{yield XC(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function u6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,Y.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,Y.Z)(function*(){const r=e?(0,M.m9)(e):null;return r&&tt(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,Y.Z)(function*(){if(!r._deleted)return e&&tt(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,Y.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,Y.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,Y.Z)(function*(){yield t.assertedPersistence.setPersistence(Th(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,Y.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,Y.Z)(function*(){const t=yield function S6(n){return _O.apply(this,arguments)}(e),r=new R6(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new M.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,Y.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,Y.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&Th(e)||t._popupRedirectResolver;tt(r,t,"argument-error"),t.redirectPersistenceManager=yield qI.create(t,[Th(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,Y.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,Y.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,Y.Z)(function*(){if(e===t.currentUser)return t.queue((0,Y.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),"function"==typeof t){const g=e.addObserver(t,r,i);return()=>{c=!0,g()}}{const g=e.addObserver(t);return()=>{c=!0,g()}}}directlySetCurrentUser(e){var t=this;return(0,Y.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,Y.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const a=yield e._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r})()}_getAppCheckToken(){var e=this;return(0,Y.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function o6(n,...e){yN.logLevel<=gr.in.WARN&&yN.warn(`Auth (${an.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class SB{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,M.ne)(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class j6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pl("not implemented")}_getIdTokenResponse(e){return Pl("not implemented")}_linkToIdToken(e,t){return Pl("not implemented")}_getReauthenticationResolver(e){return Pl("not implemented")}}function Ch(n,e){return LO.apply(this,arguments)}function LO(){return LO=(0,Y.Z)(function*(n,e){return function Eh(n,e,t,r){return iO.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",kr(n,e))}),LO.apply(this,arguments)}class KI extends j6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new KI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=(0,XM._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new KI(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){return Ch(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ch(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ch(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,M.xO)(t)}return e}}class Zp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class OB extends Zp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let tq=(()=>{class n extends OB{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return KI._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();(function AB(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new ZC(3e4,6e4),new ZC(2e3,1e4),new ZC(3e4,6e4),new ZC(5e3,15e3),encodeURIComponent("fac");var sj="@firebase/auth";class A9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,Y.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,M.Pz)("authIdTokenMaxAge"),function N9(n){(0,an._registerComponent)(new ar.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;tt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DB(n)},v=new N6(r,i,a,g);return function F6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Th);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,an._registerComponent)(new ar.wA("auth-internal",e=>{const t=function Pi(n){return(0,M.m9)(n)}(e.getProvider("auth").getImmediate());return new A9(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,an.registerVersion)(sj,"1.3.0",function R9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,an.registerVersion)(sj,"1.3.0","esm2017")}("Browser");let YI=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new tq).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(MF),_.LFG(Ed),_.LFG(Po),_.LFG(_.R0b))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M9=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(_.Y36(YI))};static#t=this.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(r,i){if(1&r){const a=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign In"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(a);const h=_.MAs(7),g=_.MAs(10);return _.KtG(i.authService.SignIn(h.value,g.value))}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",11)(18,"span",12),_._uU(19,"Forgot Password?"),_.qZA()()(),_.TgZ(20,"div",13)(21,"span"),_._uU(22,"Don't have an account?"),_.TgZ(23,"span",14),_._uU(24," Sign Up"),_.qZA()()()()()}},dependencies:[D_]})}return n})(),O9=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(_.Y36(YI))};static#t=this.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(r,i){if(1&r){const a=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign Up"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(a);const h=_.MAs(7),g=_.MAs(10);return _.KtG(i.authService.SignUp(h.value,g.value))}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",11)(18,"span"),_._uU(19,"Already have an account? "),_.TgZ(20,"span",12),_._uU(21,"Log In"),_.qZA()()()()()()}},dependencies:[D_]})}return n})();function L9(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"div",18)(2,"div",19),_._UZ(3,"img",20),_.TgZ(4,"div",21)(5,"h1"),_._uU(6,"Hello: "),_.TgZ(7,"strong"),_._uU(8),_.qZA()(),_.TgZ(9,"p"),_._uU(10,"User ID: "),_.TgZ(11,"strong"),_._uU(12),_.qZA()(),_.TgZ(13,"p"),_._uU(14,"Email: "),_.TgZ(15,"strong"),_._uU(16),_.qZA()(),_.TgZ(17,"p"),_._uU(18,"Email Verified: "),_.TgZ(19,"strong"),_._uU(20),_.qZA()()()()()()),2&n){const t=e.ngIf;_.xp6(3),_.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",_.LSH),_.s9C("alt",t.displayName),_.xp6(5),_.Oqu(t.displayName?t.displayName:"User"),_.xp6(4),_.Oqu(t.uid),_.xp6(4),_.Oqu(t.email),_.xp6(4),_.Oqu(t.emailVerified)}}let F9=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(_.Y36(YI))};static#t=this.\u0275cmp=_.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(r,i){1&r&&(_.TgZ(0,"nav",0)(1,"a",1),_._UZ(2,"img",2),_.qZA()(),_.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),_._UZ(10,"i",10),_._uU(11,"User Profile "),_.qZA()(),_.TgZ(12,"li",8)(13,"a",11),_.NdJ("click",function(){return i.authService.SignOut()}),_._UZ(14,"i",12),_._uU(15,"Log out "),_.qZA()()()()(),_.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),_._uU(20,"User Profile"),_.qZA()(),_.YNc(21,L9,21,6,"div",17),_.qZA()()()()),2&r&&(_.xp6(21),_.Q6J("ngIf",i.authService.userData))},dependencies:[Oo]})}return n})(),U9=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(_.Y36(YI))};static#t=this.\u0275cmp=_.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(r,i){if(1&r){const a=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Reset Password"),_.qZA(),_.TgZ(5,"p",3),_._uU(6,"Please enter your email address to request a password reset."),_.qZA(),_.TgZ(7,"div",4),_._UZ(8,"input",5,6),_.qZA(),_.TgZ(10,"div",4)(11,"input",7),_.NdJ("click",function(){_.CHM(a);const h=_.MAs(9);return _.KtG(i.authService.ForgotPassword(h.value))}),_.qZA()()(),_.TgZ(12,"div",8)(13,"span"),_._uU(14,"Go back to ? "),_.TgZ(15,"span",9),_._uU(16,"Log In"),_.qZA()()()()()}},dependencies:[D_]})}return n})();function V9(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"p",9),_._uU(2,"We have sent a confirmation email to "),_.TgZ(3,"strong"),_._uU(4),_.qZA(),_._uU(5,"."),_.qZA(),_.TgZ(6,"p",9),_._uU(7,"Please check your email and click on the link to verfiy your email address."),_.qZA()()),2&n){const t=e.ngIf;_.xp6(4),_.Oqu(t.email)}}const B9=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:M9},{path:"register-user",component:O9},{path:"dashboard",component:F9,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}static#e=this.\u0275fac=function(r){return new(r||n)(_.LFG(YI),_.LFG(Po))};static#t=this.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"forgot-password",component:U9},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(_.Y36(YI))};static#t=this.\u0275cmp=_.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(r,i){1&r&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Thank You for Registering"),_.qZA(),_.YNc(5,V9,8,1,"div",3),_.TgZ(6,"div",4)(7,"button",5),_.NdJ("click",function(){return i.authService.SendVerificationMail()}),_._UZ(8,"i",6),_._uU(9," Resend Verification Email "),_.qZA()()(),_.TgZ(10,"div",7)(11,"span"),_._uU(12,"Go back to?"),_.TgZ(13,"span",8),_._uU(14," Sign in"),_.qZA()()()()()),2&r&&(_.xp6(5),_.Q6J("ngIf",i.authService.userData))},dependencies:[Oo,D_]})}return n})()}];let j9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=_.oAB({type:n});static#n=this.\u0275inj=_.cJS({imports:[rB.forRoot(B9),rB]})}return n})(),$9=(()=>{class n{constructor(){this.title="angular-firebase-app"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&_._UZ(0,"router-outlet")},dependencies:[HM]})}return n})(),H9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=_.oAB({type:n,bootstrap:[$9]});static#n=this.\u0275inj=_.cJS({imports:[id,j9,An.hO.initializeApp(Dz_firebase),iy,p$,$g,bz]})}return n})();Sr().bootstrapModule(H9).catch(n=>console.error(n))},5619:(ht,Se,O)=>{O.d(Se,{X:()=>ee});var _=O(8645);class ee extends _.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const se=super._subscribe(J);return!se.closed&&J.next(this._value),se}getValue(){const{hasError:J,thrownError:se,_value:_e}=this;if(J)throw se;return this._throwIfClosed(),_e}next(J){super.next(this._value=J)}}},5592:(ht,Se,O)=>{O.d(Se,{y:()=>xe});var _=O(305),ee=O(7394),L=O(4850),J=O(8407),se=O(2653),_e=O(4674),ye=O(1441);let xe=(()=>{class ne{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Ke=new ne;return Ke.source=this,Ke.operator=Ne,Ke}subscribe(Ne,Ke,Me){const We=function G(ne){return ne&&ne instanceof _.Lv||function B(ne){return ne&&(0,_e.m)(ne.next)&&(0,_e.m)(ne.error)&&(0,_e.m)(ne.complete)}(ne)&&(0,ee.Nn)(ne)}(Ne)?Ne:new _.Hp(Ne,Ke,Me);return(0,ye.x)(()=>{const{operator:Oe,source:pt}=this;We.add(Oe?Oe.call(We,pt):pt?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ke){Ne.error(Ke)}}forEach(Ne,Ke){return new(Ke=de(Ke))((Me,We)=>{const Oe=new _.Hp({next:pt=>{try{Ne(pt)}catch(gt){We(gt),Oe.unsubscribe()}},error:We,complete:Me});this.subscribe(Oe)})}_subscribe(Ne){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Ne)}[L.L](){return this}pipe(...Ne){return(0,J.U)(Ne)(this)}toPromise(Ne){return new(Ne=de(Ne))((Ke,Me)=>{let We;this.subscribe(Oe=>We=Oe,Oe=>Me(Oe),()=>Ke(We))})}}return ne.create=Ve=>new ne(Ve),ne})();function de(ne){var Ve;return null!==(Ve=ne??se.config.Promise)&&void 0!==Ve?Ve:Promise}},8645:(ht,Se,O)=>{O.d(Se,{x:()=>ye});var _=O(5592),ee=O(7394);const J=(0,O(2306).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=O(9039),_e=O(1441);let ye=(()=>{class de extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ne=new xe(this,this);return ne.operator=G,ne}_throwIfClosed(){if(this.closed)throw new J}next(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(G)}})}error(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ne}=this;for(;ne.length;)ne.shift().error(G)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ne,isStopped:Ve,observers:Ne}=this;return ne||Ve?ee.Lc:(this.currentObservers=null,Ne.push(G),new ee.w0(()=>{this.currentObservers=null,(0,se.P)(Ne,G)}))}_checkFinalizedStatuses(G){const{hasError:ne,thrownError:Ve,isStopped:Ne}=this;ne?G.error(Ve):Ne&&G.complete()}asObservable(){const G=new _.y;return G.source=this,G}}return de.create=(B,G)=>new xe(B,G),de})();class xe extends ye{constructor(B,G){super(),this.destination=B,this.source=G}next(B){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ne||ne.call(G,B)}error(B){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ne||ne.call(G,B)}complete(){var B,G;null===(G=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===G||G.call(B)}_subscribe(B){var G,ne;return null!==(ne=null===(G=this.source)||void 0===G?void 0:G.subscribe(B))&&void 0!==ne?ne:ee.Lc}}},305:(ht,Se,O)=>{O.d(Se,{Hp:()=>Me,Lv:()=>ne});var _=O(4674),ee=O(7394),L=O(2653),J=O(3894),se=O(2420);const _e=de("C",void 0,void 0);function de(oe,Te,ie){return{kind:oe,value:Te,error:ie}}var B=O(7599),G=O(1441);class ne extends ee.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,ee.Nn)(Te)&&Te.add(this)):this.destination=gt}static create(Te,ie,be){return new Me(Te,ie,be)}next(Te){this.isStopped?pt(function xe(oe){return de("N",oe,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?pt(function ye(oe){return de("E",void 0,oe)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?pt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Ne(oe,Te){return Ve.call(oe,Te)}class Ke{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:ie}=this;if(ie.next)try{ie.next(Te)}catch(be){We(be)}}error(Te){const{partialObserver:ie}=this;if(ie.error)try{ie.error(Te)}catch(be){We(be)}else We(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(ie){We(ie)}}}class Me extends ne{constructor(Te,ie,be){let Fe;if(super(),(0,_.m)(Te)||!Te)Fe={next:Te??void 0,error:ie??void 0,complete:be??void 0};else{let ce;this&&L.config.useDeprecatedNextContext?(ce=Object.create(Te),ce.unsubscribe=()=>this.unsubscribe(),Fe={next:Te.next&&Ne(Te.next,ce),error:Te.error&&Ne(Te.error,ce),complete:Te.complete&&Ne(Te.complete,ce)}):Fe=Te}this.destination=new Ke(Fe)}}function We(oe){L.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(oe):(0,J.h)(oe)}function pt(oe,Te){const{onStoppedNotification:ie}=L.config;ie&&B.z.setTimeout(()=>ie(oe,Te))}const gt={closed:!0,next:se.Z,error:function Oe(oe){throw oe},complete:se.Z}},7394:(ht,Se,O)=>{O.d(Se,{Lc:()=>_e,w0:()=>se,Nn:()=>ye});var _=O(4674);const L=(0,O(2306).d)(de=>function(G){de(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ne,Ve)=>`${Ve+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var J=O(9039);class se{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ne of G)Ne.remove(this);else G.remove(this);const{initialTeardown:ne}=this;if((0,_.m)(ne))try{ne()}catch(Ne){B=Ne instanceof L?Ne.errors:[Ne]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Ne of Ve)try{xe(Ne)}catch(Ke){B=B??[],Ke instanceof L?B=[...B,...Ke.errors]:B.push(Ke)}}if(B)throw new L(B)}}add(B){var G;if(B&&B!==this)if(this.closed)xe(B);else{if(B instanceof se){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(B)}}_hasParent(B){const{_parentage:G}=this;return G===B||Array.isArray(G)&&G.includes(B)}_addParent(B){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(B),G):G?[G,B]:B}_removeParent(B){const{_parentage:G}=this;G===B?this._parentage=null:Array.isArray(G)&&(0,J.P)(G,B)}remove(B){const{_finalizers:G}=this;G&&(0,J.P)(G,B),B instanceof se&&B._removeParent(this)}}se.EMPTY=(()=>{const de=new se;return de.closed=!0,de})();const _e=se.EMPTY;function ye(de){return de instanceof se||de&&"closed"in de&&(0,_.m)(de.remove)&&(0,_.m)(de.add)&&(0,_.m)(de.unsubscribe)}function xe(de){(0,_.m)(de)?de():de.unsubscribe()}},2653:(ht,Se,O)=>{O.d(Se,{config:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ht,Se,O)=>{O.d(Se,{E:()=>ee});const ee=new(O(5592).y)(se=>se.complete())},2459:(ht,Se,O)=>{O.d(Se,{D:()=>Te});var _=O(4829),ee=O(3093),L=O(5137),_e=O(5592),xe=O(4971),de=O(4674),B=O(7103);function ne(ie,be){if(!ie)throw new Error("Iterable cannot be null");return new _e.y(Fe=>{(0,B.f)(Fe,be,()=>{const ce=ie[Symbol.asyncIterator]();(0,B.f)(Fe,be,()=>{ce.next().then(Z=>{Z.done?Fe.complete():Fe.next(Z.value)})},0,!0)})})}var Ve=O(8382),Ne=O(4026),Ke=O(4266),Me=O(3664),We=O(5726),Oe=O(9853),pt=O(541);function Te(ie,be){return be?function oe(ie,be){if(null!=ie){if((0,Ve.c)(ie))return function J(ie,be){return(0,_.Xf)(ie).pipe((0,L.R)(be),(0,ee.Q)(be))}(ie,be);if((0,Ke.z)(ie))return function ye(ie,be){return new _e.y(Fe=>{let ce=0;return be.schedule(function(){ce===ie.length?Fe.complete():(Fe.next(ie[ce++]),Fe.closed||this.schedule())})})}(ie,be);if((0,Ne.t)(ie))return function se(ie,be){return(0,_.Xf)(ie).pipe((0,L.R)(be),(0,ee.Q)(be))}(ie,be);if((0,We.D)(ie))return ne(ie,be);if((0,Me.T)(ie))return function G(ie,be){return new _e.y(Fe=>{let ce;return(0,B.f)(Fe,be,()=>{ce=ie[xe.h](),(0,B.f)(Fe,be,()=>{let Z,$e;try{({value:Z,done:$e}=ce.next())}catch(yt){return void Fe.error(yt)}$e?Fe.complete():Fe.next(Z)},0,!0)}),()=>(0,de.m)(ce?.return)&&ce.return()})}(ie,be);if((0,pt.L)(ie))return function gt(ie,be){return ne((0,pt.Q)(ie),be)}(ie,be)}throw(0,Oe.z)(ie)}(ie,be):(0,_.Xf)(ie)}},4829:(ht,Se,O)=>{O.d(Se,{Xf:()=>Ve});var _=O(7582),ee=O(4266),L=O(4026),J=O(5592),se=O(8382),_e=O(5726),ye=O(9853),xe=O(3664),de=O(541),B=O(4674),G=O(3894),ne=O(4850);function Ve(oe){if(oe instanceof J.y)return oe;if(null!=oe){if((0,se.c)(oe))return function Ne(oe){return new J.y(Te=>{const ie=oe[ne.L]();if((0,B.m)(ie.subscribe))return ie.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,ee.z)(oe))return function Ke(oe){return new J.y(Te=>{for(let ie=0;ie<oe.length&&!Te.closed;ie++)Te.next(oe[ie]);Te.complete()})}(oe);if((0,L.t)(oe))return function Me(oe){return new J.y(Te=>{oe.then(ie=>{Te.closed||(Te.next(ie),Te.complete())},ie=>Te.error(ie)).then(null,G.h)})}(oe);if((0,_e.D)(oe))return Oe(oe);if((0,xe.T)(oe))return function We(oe){return new J.y(Te=>{for(const ie of oe)if(Te.next(ie),Te.closed)return;Te.complete()})}(oe);if((0,de.L)(oe))return function pt(oe){return Oe((0,de.Q)(oe))}(oe)}throw(0,ye.z)(oe)}function Oe(oe){return new J.y(Te=>{(function gt(oe,Te){var ie,be,Fe,ce;return(0,_.mG)(this,void 0,void 0,function*(){try{for(ie=(0,_.KL)(oe);!(be=yield ie.next()).done;)if(Te.next(be.value),Te.closed)return}catch(Z){Fe={error:Z}}finally{try{be&&!be.done&&(ce=ie.return)&&(yield ce.call(ie))}finally{if(Fe)throw Fe.error}}Te.complete()})})(oe,Te).catch(ie=>Te.error(ie))})}},3019:(ht,Se,O)=>{O.d(Se,{T:()=>_e});var _=O(7537),ee=O(4829),L=O(6232),J=O(4564),se=O(2459);function _e(...ye){const xe=(0,J.yG)(ye),de=(0,J._6)(ye,1/0),B=ye;return B.length?1===B.length?(0,ee.Xf)(B[0]):(0,_.J)(de)((0,se.D)(B,xe)):L.E}},2096:(ht,Se,O)=>{O.d(Se,{of:()=>L});var _=O(4564),ee=O(2459);function L(...J){const se=(0,_.yG)(J);return(0,ee.D)(J,se)}},8251:(ht,Se,O)=>{O.d(Se,{x:()=>ee});var _=O(305);function ee(J,se,_e,ye,xe){return new L(J,se,_e,ye,xe)}class L extends _.Lv{constructor(se,_e,ye,xe,de,B){super(se),this.onFinalize=de,this.shouldUnsubscribe=B,this._next=_e?function(G){try{_e(G)}catch(ne){se.error(ne)}}:super._next,this._error=xe?function(G){try{xe(G)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},3997:(ht,Se,O)=>{O.d(Se,{x:()=>J});var _=O(2737),ee=O(9360),L=O(8251);function J(_e,ye=_.y){return _e=_e??se,(0,ee.e)((xe,de)=>{let B,G=!0;xe.subscribe((0,L.x)(de,ne=>{const Ve=ye(ne);(G||!_e(B,Ve))&&(G=!1,B=Ve,de.next(ne))}))})}function se(_e,ye){return _e===ye}},7398:(ht,Se,O)=>{O.d(Se,{U:()=>L});var _=O(9360),ee=O(8251);function L(J,se){return(0,_.e)((_e,ye)=>{let xe=0;_e.subscribe((0,ee.x)(ye,de=>{ye.next(J.call(se,de,xe++))}))})}},7537:(ht,Se,O)=>{O.d(Se,{J:()=>L});var _=O(1631),ee=O(2737);function L(J=1/0){return(0,_.z)(ee.y,J)}},1631:(ht,Se,O)=>{O.d(Se,{z:()=>xe});var _=O(7398),ee=O(4829),L=O(9360),J=O(7103),se=O(8251),ye=O(4674);function xe(de,B,G=1/0){return(0,ye.m)(B)?xe((ne,Ve)=>(0,_.U)((Ne,Ke)=>B(ne,Ne,Ve,Ke))((0,ee.Xf)(de(ne,Ve))),G):("number"==typeof B&&(G=B),(0,L.e)((ne,Ve)=>function _e(de,B,G,ne,Ve,Ne,Ke,Me){const We=[];let Oe=0,pt=0,gt=!1;const oe=()=>{gt&&!We.length&&!Oe&&B.complete()},Te=be=>Oe<ne?ie(be):We.push(be),ie=be=>{Ne&&B.next(be),Oe++;let Fe=!1;(0,ee.Xf)(G(be,pt++)).subscribe((0,se.x)(B,ce=>{Ve?.(ce),Ne?Te(ce):B.next(ce)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Oe--;We.length&&Oe<ne;){const ce=We.shift();Ke?(0,J.f)(B,Ke,()=>ie(ce)):ie(ce)}oe()}catch(ce){B.error(ce)}}))};return de.subscribe((0,se.x)(B,Te,()=>{gt=!0,oe()})),()=>{Me?.()}}(ne,Ve,de,G)))}},3093:(ht,Se,O)=>{O.d(Se,{Q:()=>J});var _=O(7103),ee=O(9360),L=O(8251);function J(se,_e=0){return(0,ee.e)((ye,xe)=>{ye.subscribe((0,L.x)(xe,de=>(0,_.f)(xe,se,()=>xe.next(de),_e),()=>(0,_.f)(xe,se,()=>xe.complete(),_e),de=>(0,_.f)(xe,se,()=>xe.error(de),_e)))})}},3020:(ht,Se,O)=>{O.d(Se,{B:()=>se});var _=O(4829),ee=O(8645),L=O(305),J=O(9360);function se(ye={}){const{connector:xe=(()=>new ee.x),resetOnError:de=!0,resetOnComplete:B=!0,resetOnRefCountZero:G=!0}=ye;return ne=>{let Ve,Ne,Ke,Me=0,We=!1,Oe=!1;const pt=()=>{Ne?.unsubscribe(),Ne=void 0},gt=()=>{pt(),Ve=Ke=void 0,We=Oe=!1},oe=()=>{const Te=Ve;gt(),Te?.unsubscribe()};return(0,J.e)((Te,ie)=>{Me++,!Oe&&!We&&pt();const be=Ke=Ke??xe();ie.add(()=>{Me--,0===Me&&!Oe&&!We&&(Ne=_e(oe,G))}),be.subscribe(ie),!Ve&&Me>0&&(Ve=new L.Hp({next:Fe=>be.next(Fe),error:Fe=>{Oe=!0,pt(),Ne=_e(gt,de,Fe),be.error(Fe)},complete:()=>{We=!0,pt(),Ne=_e(gt,B),be.complete()}}),(0,_.Xf)(Te).subscribe(Ve))})(ne)}}function _e(ye,xe,...de){if(!0===xe)return void ye();if(!1===xe)return;const B=new L.Hp({next:()=>{B.unsubscribe(),ye()}});return(0,_.Xf)(xe(...de)).subscribe(B)}},5137:(ht,Se,O)=>{O.d(Se,{R:()=>ee});var _=O(9360);function ee(L,J=0){return(0,_.e)((se,_e)=>{_e.add(L.schedule(()=>se.subscribe(_e),J))})}},4664:(ht,Se,O)=>{O.d(Se,{w:()=>J});var _=O(4829),ee=O(9360),L=O(8251);function J(se,_e){return(0,ee.e)((ye,xe)=>{let de=null,B=0,G=!1;const ne=()=>G&&!de&&xe.complete();ye.subscribe((0,L.x)(xe,Ve=>{de?.unsubscribe();let Ne=0;const Ke=B++;(0,_.Xf)(se(Ve,Ke)).subscribe(de=(0,L.x)(xe,Me=>xe.next(_e?_e(Ve,Me,Ke,Ne++):Me),()=>{de=null,ne()}))},()=>{G=!0,ne()}))})}},9397:(ht,Se,O)=>{O.d(Se,{b:()=>se});var _=O(4674),ee=O(9360),L=O(8251),J=O(2737);function se(_e,ye,xe){const de=(0,_.m)(_e)||ye||xe?{next:_e,error:ye,complete:xe}:_e;return de?(0,ee.e)((B,G)=>{var ne;null===(ne=de.subscribe)||void 0===ne||ne.call(de);let Ve=!0;B.subscribe((0,L.x)(G,Ne=>{var Ke;null===(Ke=de.next)||void 0===Ke||Ke.call(de,Ne),G.next(Ne)},()=>{var Ne;Ve=!1,null===(Ne=de.complete)||void 0===Ne||Ne.call(de),G.complete()},Ne=>{var Ke;Ve=!1,null===(Ke=de.error)||void 0===Ke||Ke.call(de,Ne),G.error(Ne)},()=>{var Ne,Ke;Ve&&(null===(Ne=de.unsubscribe)||void 0===Ne||Ne.call(de)),null===(Ke=de.finalize)||void 0===Ke||Ke.call(de)}))}):J.y}},1954:(ht,Se,O)=>{O.d(Se,{o:()=>se});var _=O(7394);class ee extends _.w0{constructor(ye,xe){super()}schedule(ye,xe=0){return this}}const L={setInterval(_e,ye,...xe){const{delegate:de}=L;return de?.setInterval?de.setInterval(_e,ye,...xe):setInterval(_e,ye,...xe)},clearInterval(_e){const{delegate:ye}=L;return(ye?.clearInterval||clearInterval)(_e)},delegate:void 0};var J=O(9039);class se extends ee{constructor(ye,xe){super(ye,xe),this.scheduler=ye,this.work=xe,this.pending=!1}schedule(ye,xe=0){var de;if(this.closed)return this;this.state=ye;const B=this.id,G=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(G,B,xe)),this.pending=!0,this.delay=xe,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId(G,this.id,xe),this}requestAsyncId(ye,xe,de=0){return L.setInterval(ye.flush.bind(ye,this),de)}recycleAsyncId(ye,xe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return xe;null!=xe&&L.clearInterval(xe)}execute(ye,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ye,xe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,xe){let B,de=!1;try{this.work(ye)}catch(G){de=!0,B=G||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ye,scheduler:xe}=this,{actions:de}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(de,this),null!=ye&&(this.id=this.recycleAsyncId(xe,ye,null)),this.delay=null,super.unsubscribe()}}}},2631:(ht,Se,O)=>{O.d(Se,{v:()=>L});var _=O(4552);class ee{constructor(se,_e=ee.now){this.schedulerActionCtor=se,this.now=_e}schedule(se,_e=0,ye){return new this.schedulerActionCtor(this,se).schedule(ye,_e)}}ee.now=_.l.now;class L extends ee{constructor(se,_e=ee.now){super(se,_e),this.actions=[],this._active=!1}flush(se){const{actions:_e}=this;if(this._active)return void _e.push(se);let ye;this._active=!0;do{if(ye=se.execute(se.state,se.delay))break}while(se=_e.shift());if(this._active=!1,ye){for(;se=_e.shift();)se.unsubscribe();throw ye}}}},6321:(ht,Se,O)=>{O.d(Se,{z:()=>L});var _=O(1954);const L=new(O(2631).v)(_.o)},4552:(ht,Se,O)=>{O.d(Se,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},7599:(ht,Se,O)=>{O.d(Se,{z:()=>_});const _={setTimeout(ee,L,...J){const{delegate:se}=_;return se?.setTimeout?se.setTimeout(ee,L,...J):setTimeout(ee,L,...J)},clearTimeout(ee){const{delegate:L}=_;return(L?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},4971:(ht,Se,O)=>{O.d(Se,{h:()=>ee});const ee=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ht,Se,O)=>{O.d(Se,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ht,Se,O)=>{O.d(Se,{_6:()=>_e,jO:()=>J,yG:()=>se});var _=O(4674);function L(ye){return ye[ye.length-1]}function J(ye){return(0,_.m)(L(ye))?ye.pop():void 0}function se(ye){return function ee(ye){return ye&&(0,_.m)(ye.schedule)}(L(ye))?ye.pop():void 0}function _e(ye,xe){return"number"==typeof L(ye)?ye.pop():xe}},9039:(ht,Se,O)=>{function _(ee,L){if(ee){const J=ee.indexOf(L);0<=J&&ee.splice(J,1)}}O.d(Se,{P:()=>_})},2306:(ht,Se,O)=>{function _(ee){const J=ee(se=>{Error.call(se),se.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}O.d(Se,{d:()=>_})},1441:(ht,Se,O)=>{O.d(Se,{O:()=>J,x:()=>L});var _=O(2653);let ee=null;function L(se){if(_.config.useDeprecatedSynchronousErrorHandling){const _e=!ee;if(_e&&(ee={errorThrown:!1,error:null}),se(),_e){const{errorThrown:ye,error:xe}=ee;if(ee=null,ye)throw xe}}else se()}function J(se){_.config.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=se)}},7103:(ht,Se,O)=>{function _(ee,L,J,se=0,_e=!1){const ye=L.schedule(function(){J(),_e?ee.add(this.schedule(null,se)):this.unsubscribe()},se);if(ee.add(ye),!_e)return ye}O.d(Se,{f:()=>_})},2737:(ht,Se,O)=>{function _(ee){return ee}O.d(Se,{y:()=>_})},4266:(ht,Se,O)=>{O.d(Se,{z:()=>_});const _=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},5726:(ht,Se,O)=>{O.d(Se,{D:()=>ee});var _=O(4674);function ee(L){return Symbol.asyncIterator&&(0,_.m)(L?.[Symbol.asyncIterator])}},4674:(ht,Se,O)=>{function _(ee){return"function"==typeof ee}O.d(Se,{m:()=>_})},8382:(ht,Se,O)=>{O.d(Se,{c:()=>L});var _=O(4850),ee=O(4674);function L(J){return(0,ee.m)(J[_.L])}},3664:(ht,Se,O)=>{O.d(Se,{T:()=>L});var _=O(4971),ee=O(4674);function L(J){return(0,ee.m)(J?.[_.h])}},4026:(ht,Se,O)=>{O.d(Se,{t:()=>ee});var _=O(4674);function ee(L){return(0,_.m)(L?.then)}},541:(ht,Se,O)=>{O.d(Se,{L:()=>J,Q:()=>L});var _=O(7582),ee=O(4674);function L(se){return(0,_.FC)(this,arguments,function*(){const ye=se.getReader();try{for(;;){const{value:xe,done:de}=yield(0,_.qq)(ye.read());if(de)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(xe)}}finally{ye.releaseLock()}})}function J(se){return(0,ee.m)(se?.getReader)}},9360:(ht,Se,O)=>{O.d(Se,{A:()=>ee,e:()=>L});var _=O(4674);function ee(J){return(0,_.m)(J?.lift)}function L(J){return se=>{if(ee(se))return se.lift(function(_e){try{return J(_e,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ht,Se,O)=>{function _(){}O.d(Se,{Z:()=>_})},8407:(ht,Se,O)=>{O.d(Se,{U:()=>L,z:()=>ee});var _=O(2737);function ee(...J){return L(J)}function L(J){return 0===J.length?_.y:1===J.length?J[0]:function(_e){return J.reduce((ye,xe)=>xe(ye),_e)}}},3894:(ht,Se,O)=>{O.d(Se,{h:()=>L});var _=O(2653),ee=O(7599);function L(J){ee.z.setTimeout(()=>{const{onUnhandledError:se}=_.config;if(!se)throw J;se(J)})}},9853:(ht,Se,O)=>{function _(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Se,{z:()=>_})},5879:(ht,Se,O)=>{O.d(Se,{$8M:()=>Au,$WT:()=>uo,$Z:()=>kf,AFp:()=>FE,AaK:()=>ne,CHM:()=>is,CRH:()=>mA,EJc:()=>Km,EpF:()=>Fw,F4k:()=>Gu,FYo:()=>qg,FiY:()=>hf,GfV:()=>Zb,HDt:()=>eI,JOm:()=>ku,KtG:()=>Cc,LFG:()=>Nt,LSH:()=>Iy,Lbi:()=>UE,Lck:()=>zS,MAs:()=>Tt,MMx:()=>A0,NdJ:()=>vm,Ojb:()=>sP,OlP:()=>vn,Oqu:()=>wm,P3R:()=>kE,PXZ:()=>TT,Q6J:()=>Bd,QGY:()=>uv,Qsj:()=>Ha,R0b:()=>hi,RDi:()=>ds,Rgc:()=>Vm,SBq:()=>zg,Sil:()=>xA,Suo:()=>Y0,TTD:()=>vc,TgZ:()=>Jn,VuI:()=>oR,X6Q:()=>Lx,XFs:()=>bt,Xpm:()=>cc,Xq5:()=>Jc,Xts:()=>wf,Y36:()=>Nd,YKP:()=>b0,YNc:()=>KD,Yjl:()=>Vl,Yz7:()=>ft,Z0I:()=>fn,ZZ4:()=>pI,_UZ:()=>Wf,_c5:()=>gI,_uU:()=>zd,aQg:()=>Dp,c2e:()=>uh,cJS:()=>Cn,cg1:()=>gv,dDg:()=>Ip,dqk:()=>pn,eFA:()=>CT,eJc:()=>Hm,eoX:()=>vT,f3M:()=>Ft,g9A:()=>jb,h0i:()=>dl,hGG:()=>VT,iGM:()=>Z0,ifc:()=>ts,ip1:()=>yp,jDz:()=>N0,kL8:()=>Ka,lG2:()=>va,lqb:()=>ja,lri:()=>sI,n5z:()=>Rs,oAB:()=>uu,q4F:()=>Ad,qFp:()=>Hi,qLn:()=>Ga,qZA:()=>Je,rWj:()=>dh,rg0:()=>Jl,s9C:()=>Im,sBO:()=>NT,s_b:()=>da,soG:()=>ch,tb:()=>Xm,tp0:()=>Oc,uIk:()=>In,vHH:()=>oe,vpe:()=>Co,wAp:()=>Zd,xp6:()=>uw,z2F:()=>wp,zSh:()=>ME,zs3:()=>hs});var _=O(8645),ee=O(7394),L=O(5592),J=O(3019),se=O(5619),_e=O(2096),ye=O(3020),xe=O(4664),de=O(3997);function B(s){for(let o in s)if(s[o]===B)return o;throw Error("Could not find renamed property on target object.")}function ne(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ne).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Ne=B({__forward_ref__:B});function Ke(s){return s.__forward_ref__=Ke,s.toString=function(){return ne(this())},s}function Me(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(Ne)&&s.__forward_ref__===Ke}function Oe(s){return s&&!!s.\u0275providers}const gt="https://g.co/ng/security#xss";class oe extends Error{constructor(o,u){super(function Te(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ie(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,o){throw new oe(-201,!1)}function Ye(s,o){null==s&&function ze(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function ft(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Cn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Gn(s){return Er(s,Kn)||Er(s,_s)}function fn(s){return null!==Gn(s)}function Er(s,o){return s.hasOwnProperty(o)?s[o]:null}function gi(s){return s&&(s.hasOwnProperty(ri)||s.hasOwnProperty(ko))?s[ri]:null}const Kn=B({\u0275prov:B}),ri=B({\u0275inj:B}),_s=B({ngInjectableDef:B}),ko=B({ngInjectorDef:B});var bt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(bt||{});let Rt;function yn(s){const o=Rt;return Rt=s,o}function kn(s,o,u){const l=Gn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&bt.Optional?null:void 0!==o?o:void $e(ne(s))}const pn=globalThis,Ge={},Qe="__NG_DI_FLAG__",Et="ngTempTokenPath",$=/\n/gm,Q="__source";let Ae;function st(s){const o=Ae;return Ae=s,o}function Ot(s,o=bt.Default){if(void 0===Ae)throw new oe(-203,!1);return null===Ae?kn(s,void 0,o):Ae.get(s,o&bt.Optional?null:void 0,o)}function Nt(s,o=bt.Default){return(function xt(){return Rt}()||Ot)(Me(s),o)}function Ft(s,o=bt.Default){return Nt(s,ir(o))}function ir(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function tn(s){const o=[];for(let u=0;u<s.length;u++){const l=Me(s[u]);if(Array.isArray(l)){if(0===l.length)throw new oe(900,!1);let d,p=bt.Default;for(let y=0;y<l.length;y++){const w=l[y],C=so(w);"number"==typeof C?-1===C?d=w.token:p|=C:d=w}o.push(Nt(d,p))}else o.push(Nt(l))}return o}function Mr(s,o){return s[Qe]=o,s.prototype[Qe]=o,s}function so(s){return s[Qe]}function Es(s){return{toString:s}.toString()}var oo=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(oo||{}),ts=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(ts||{});const ns={},Kt=[],ao=B({\u0275cmp:B}),ga=B({\u0275dir:B}),su=B({\u0275pipe:B}),bh=B({\u0275mod:B}),ws=B({\u0275fac:B}),ma=B({__NG_ELEMENT_ID__:B}),_a=B({__NG_ENV_ID__:B});function Ml(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}u=d+1}}function ou(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const p=u[l++],y=u[l++],w=u[l++];s.setAttribute(o,y,w,p)}else{const p=d,y=u[++l];Gi(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),l++}}return l}function Ol(s){return 3===s||4===s||6===s}function Gi(s){return 64===s.charCodeAt(0)}function Mo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||uc(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function uc(s,o,u,l,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===u){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}const Ll="ng-template";function sr(s,o,u){let l=0,d=!0;for(;l<s.length;){let p=s[l++];if("string"==typeof p&&d){const y=s[l++];if(u&&"class"===p&&-1!==Ml(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<s.length&&"string"==typeof(p=s[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function Oo(s){return 4===s.type&&s.value!==Ll}function N_(s,o,u){return o===(4!==s.type||u?s.value:Ll)}function Yp(s,o,u){let l=4;const d=s.attrs||[],p=function P_(s){for(let o=0;o<s.length;o++)if(Ol(s[o]))return o;return s.length}(d);let y=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!y)if(4&l){if(l=2|1&l,""!==C&&!N_(s,C,u)||""===C&&1===o.length){if(_i(l))return!1;y=!0}}else{const R=8&l?C:o[++w];if(8&l&&null!==s.attrs){if(!sr(s.attrs,R,u)){if(_i(l))return!1;y=!0}continue}const U=ya(8&l?"class":C,d,Oo(s),u);if(-1===U){if(_i(l))return!1;y=!0;continue}if(""!==R){let z;z=U>p?"":d[U+1].toLowerCase();const te=8&l?z:null;if(te&&-1!==Ml(te,R,0)||2&l&&R!==z){if(_i(l))return!1;y=!0}}}}else{if(!y&&!_i(l)&&!_i(C))return!1;if(y&&_i(C))continue;y=!1,l=C|1&l}}return _i(l)||y}function _i(s){return 0==(1&s)}function ya(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function Lo(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function Fl(s,o,u=!1){for(let l=0;l<o.length;l++)if(Yp(s,o[l],u))return!0;return!1}function au(s,o){return s?":not("+o.trim()+")":o}function Sh(s){let o=s[0],u=1,l=2,d="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&l){const w=s[++u];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!_i(y)&&(o+=au(p,d),d=""),l=y,p=p||!_i(l);u++}return""!==d&&(o+=au(p,d)),o}function cc(s){return Es(()=>{const o=Bl(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===oo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||ts.Emulated,styles:s.styles||Kt,_:null,schemas:s.schemas||null,tView:null,id:""};Xp(u);const l=s.dependencies;return u.directiveDefs=cu(l,!1),u.pipeDefs=cu(l,!0),u.id=function Wi(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function Ul(s){return Zt(s)||Zn(s)}function lc(s){return null!==s}function uu(s){return Es(()=>({type:s.type,bootstrap:s.bootstrap||Kt,declarations:s.declarations||Kt,imports:s.imports||Kt,exports:s.exports||Kt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function dc(s,o){if(null==s)return ns;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=l,o&&(o[d]=p)}return u}function va(s){return Es(()=>{const o=Bl(s);return Xp(o),o})}function Vl(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Zt(s){return s[ao]||null}function Zn(s){return s[ga]||null}function ii(s){return s[su]||null}function uo(s){const o=Zt(s)||Zn(s)||ii(s);return null!==o&&o.standalone}function si(s,o){const u=s[bh]||null;if(!u&&!0===o)throw new Error(`Type ${ne(s)} does not have '\u0275mod' property.`);return u}function Bl(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||ns,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Kt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dc(s.inputs,o),outputs:dc(s.outputs)}}function Xp(s){s.features?.forEach(o=>o(s))}function cu(s,o){if(!s)return null;const u=o?ii:Ul;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(lc)}const Mn=0,rt=1,Dt=2,On=3,oi=4,Fo=5,Or=6,lu=7,jn=8,Bs=9,Ia=10,St=11,Lr=12,Jp=13,js=14,Ln=15,jl=16,Uo=17,wr=18,$s=19,Hs=20,co=21,qi=22,du=23,lo=24,Bt=25,Ea=1,fc=2,Tr=7,Cr=9,Fr=11;function br(s){return Array.isArray(s)&&"object"==typeof s[Ea]}function Jr(s){return Array.isArray(s)&&!0===s[Ea]}function pc(s){return 0!=(4&s.flags)}function Bo(s){return s.componentOffset>-1}function ki(s){return 1==(1&s.flags)}function yi(s){return!!s.template}function wa(s){return 0!=(512&s[Dt])}function jo(s,o){return s.hasOwnProperty(ws)?s[ws]:null}let pr=null,$o=!1;function vi(s){const o=pr;return pr=s,o}const Ho={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function pu(s){if(!Go(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Kl(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function gu(s){s.dirty=!0,function Mh(s){if(void 0===s.liveConsumerNode)return;const o=$o;$o=!0;try{for(const u of s.liveConsumerNode)u.dirty||gu(u)}finally{$o=o}}(s),s.consumerMarkedDirty?.(s)}function Oh(s){return s&&(s.nextProducerIndex=0),vi(s)}function Dr(s,o){if(vi(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Go(s))for(let u=s.nextProducerIndex;u<s.producerNode.length;u++)mu(s.producerNode[u],s.producerIndexOfThis[u]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Kl(s){fo(s);for(let o=0;o<s.producerNode.length;o++){const u=s.producerNode[o],l=s.producerLastReadVersion[o];if(l!==u.version||(pu(u),l!==u.version))return!0}return!1}function Zl(s){if(fo(s),Go(s))for(let o=0;o<s.producerNode.length;o++)mu(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function mu(s,o){if(function _u(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),fo(s),1===s.liveConsumerNode.length)for(let l=0;l<s.producerNode.length;l++)mu(s.producerNode[l],s.producerIndexOfThis[l]);const u=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[u],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[u],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const l=s.liveConsumerIndexOfThis[o],d=s.liveConsumerNode[o];fo(d),d.producerIndexOfThis[l]=o}}function Go(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function fo(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Uh=null;function Jl(s){const o=vi(null);try{return s()}finally{vi(o)}}const ed=()=>{},sg=(()=>({...Ho,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:ed}))();class og{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function vc(){return Iu}function Iu(s){return s.type.prototype.ngOnChanges&&(s.setInput=zo),ag}function ag(){const s=Wo(this),o=s?.current;if(o){const u=s.previous;if(u===ns)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function zo(s,o,u,l){const d=this.declaredInputs[u],p=Wo(s)||function Bh(s,o){return s[Cs]=o}(s,{previous:ns,current:null}),y=p.current||(p.current={}),w=p.previous,C=w[d];y[d]=new og(C&&C.currentValue,o,w===ns),s[l]=o}vc.ngInherit=!0;const Cs="__ngSimpleChanges__";function Wo(s){return s[Cs]||null}const rs=function(s,o,u){};function gn(s){for(;Array.isArray(s);)s=s[Mn];return s}function Ur(s,o){return gn(o[s.index])}function nd(s,o){return s.data[o]}function Vr(s,o){const u=o[s];return br(u)?u:u[Mn]}function Ii(s,o){return null==o?null:s[o]}function hg(s){s[Uo]=0}function rd(s){1024&s[Dt]||(s[Dt]|=1024,B_(s,1))}function Ic(s){1024&s[Dt]&&(s[Dt]&=-1025,B_(s,-1))}function B_(s,o){let u=s[On];if(null===u)return;u[Fo]+=o;let l=u;for(u=u[On];null!==u&&(1===o&&1===l[Fo]||-1===o&&0===l[Fo]);)u[Fo]+=o,l=u,u=u[On]}const At={lFrame:vt(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Br(){return At.bindingsEnabled}function Pe(){return At.lFrame.lView}function zt(){return At.lFrame.tView}function is(s){return At.lFrame.contextLView=s,s[jn]}function Cc(s){return At.lFrame.contextLView=null,s}function Ar(){let s=bc();for(;null!==s&&64===s.type;)s=s.parent;return s}function bc(){return At.lFrame.currentTNode}function po(s,o){const u=At.lFrame;u.currentTNode=s,u.isParent=o}function Yo(){return At.lFrame.isParent}function Qo(){return At.lFrame.bindingIndex++}function Dc(s,o){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=s,Sc(o)}function Sc(s){At.lFrame.currentDirectiveIndex=s}function Ac(){return At.lFrame.currentQueryIndex}function Yh(s){At.lFrame.currentQueryIndex=s}function Qh(s){const o=s[rt];return 2===o.type?o.declTNode:1===o.type?s[Or]:null}function pg(s,o,u){if(u&bt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&bt.Host||(d=Qh(p),null===d||(p=p[js],10&d.type))););if(null===d)return!1;o=d,s=p}const l=At.lFrame=Ds();return l.currentTNode=o,l.lView=s,!0}function An(s){const o=Ds(),u=s[rt];At.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Ds(){const s=At.lFrame,o=null===s?null:s.child;return null===o?vt(s):o}function vt(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ss(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const mn=ss;function Xo(){const s=ss();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function mt(){return At.lFrame.selectedIndex}function zs(s){At.lFrame.selectedIndex=s}function Rn(){const s=At.lFrame;return nd(s.tView,s.selectedIndex)}let or=!0;function jr(){return or}function $r(s){or=s}function Ws(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:R,ngOnDestroy:x}=p;y&&(s.contentHooks??=[]).push(-u,y),w&&((s.contentHooks??=[]).push(u,w),(s.contentCheckHooks??=[]).push(u,w)),C&&(s.viewHooks??=[]).push(-u,C),R&&((s.viewHooks??=[]).push(u,R),(s.viewCheckHooks??=[]).push(u,R)),null!=x&&(s.destroyHooks??=[]).push(u,x)}}function Na(s,o,u){yo(s,o,3,u)}function Rc(s,o,u,l){(3&s[Dt])===u&&yo(s,o,u,l)}function qs(s,o){let u=s[Dt];(3&u)===o&&(u&=8191,u+=1,s[Dt]=u)}function yo(s,o,u,l){const p=l??-1,y=o.length-1;let w=0;for(let C=void 0!==l?65535&s[Uo]:0;C<y;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=l&&w>=l)break}else o[C]<0&&(s[Uo]+=65536),(w<p||-1==p)&&(Nc(s,u,o,C),s[Uo]=(4294901760&s[Uo])+C+2),C++}function vo(s,o){rs(4,s,o);const u=vi(null);try{o.call(s)}finally{vi(u),rs(5,s,o)}}function Nc(s,o,u,l){const d=u[l]<0,p=u[l+1],w=s[d?-u[l]:u[l]];d?s[Dt]>>13<s[Uo]>>16&&(3&s[Dt])===o&&(s[Dt]+=8192,vo(w,p)):vo(w,p)}const Ss=-1;class Ht{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Cu(s){return s!==Ss}function Pa(s){return 32767&s}function xa(s,o){let u=function z_(s){return s>>16}(s),l=o;for(;u>0;)l=l[js],u--;return l}let ef=!0;function ud(s){const o=ef;return ef=s,o}const yg=255,W_=5;let tf=0;const Y={};function ar(s,o){const u=gr(s,o);if(-1!==u)return u;const l=o[rt];l.firstCreatePass&&(s.injectorIndex=o.length,M(l.data,s),M(o,null),M(l.blueprint,null));const d=As(s,o),p=s.injectorIndex;if(Cu(d)){const y=Pa(d),w=xa(d,o),C=w[rt].data;for(let R=0;R<8;R++)o[p+R]=w[y+R]|C[y+R]}return o[p+8]=d,p}function M(s,o){s.push(0,0,0,0,0,0,0,0,o)}function gr(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function As(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=Ma(d),null===l)return Ss;if(u++,d=d[js],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return Ss}function ka(s,o,u){!function an(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(ma)&&(l=u[ma]),null==l&&(l=u[ma]=tf++);const d=l&yg;o.data[s+(d>>W_)]|=1<<d}(s,o,u)}function bn(s,o,u){if(u&bt.Optional||void 0!==s)return s;$e()}function bu(s,o,u,l){if(u&bt.Optional&&void 0===l&&(l=null),!(u&(bt.Self|bt.Host))){const d=s[Bs],p=yn(void 0);try{return d?d.get(o,l,u&bt.Optional):kn(o,l,u&bt.Optional)}finally{yn(p)}}return bn(l,0,u)}function ea(s,o,u,l=bt.Default,d){if(null!==s){if(2048&o[Dt]&&!(l&bt.Self)){const y=function dd(s,o,u,l,d){let p=s,y=o;for(;null!==p&&null!==y&&2048&y[Dt]&&!(512&y[Dt]);){const w=kc(p,y,u,l|bt.Self,Y);if(w!==Y)return w;let C=p.parent;if(!C){const R=y[Hs];if(R){const x=R.get(u,Y,l);if(x!==Y)return x}C=Ma(y),y=y[js]}p=C}return d}(s,o,u,l,Y);if(y!==Y)return y}const p=kc(s,o,u,l,Y);if(p!==Y)return p}return bu(o,u,l,d)}function kc(s,o,u,l,d){const p=function rf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ma)?s[ma]:void 0;return"number"==typeof o?o>=0?o&yg:na:o}(u);if("function"==typeof p){if(!pg(o,s,l))return l&bt.Host?bn(d,0,l):bu(o,u,l,d);try{let y;if(y=p(l),null!=y||l&bt.Optional)return y;$e()}finally{mn()}}else if("number"==typeof p){let y=null,w=gr(s,o),C=Ss,R=l&bt.Host?o[Ln][Or]:null;for((-1===w||l&bt.SkipSelf)&&(C=-1===w?As(s,o):o[w+8],C!==Ss&&ld(l,!1)?(y=o[rt],w=Pa(C),o=xa(C,o)):w=-1);-1!==w;){const x=o[rt];if(Ks(p,w,x.data)){const U=nf(w,o,u,y,l,R);if(U!==Y)return U}C=o[w+8],C!==Ss&&ld(l,o[rt].data[w+8]===R)&&Ks(p,w,o)?(y=x,w=Pa(C),o=xa(C,o)):w=-1}}return d}function nf(s,o,u,l,d,p){const y=o[rt],w=y.data[s+8],x=cd(w,y,u,null==l?Bo(w)&&ef:l!=y&&0!=(3&w.type),d&bt.Host&&p===w);return null!==x?ta(o,y,x,w):Y}function cd(s,o,u,l,d){const p=s.providerIndexes,y=o.data,w=1048575&p,C=s.directiveStart,x=p>>20,z=d?w+x:s.directiveEnd;for(let te=l?w:w+x;te<z;te++){const Ce=y[te];if(te<C&&u===Ce||te>=C&&Ce.type===u)return te}if(d){const te=y[C];if(te&&yi(te)&&te.type===u)return C}return null}function ta(s,o,u,l){let d=s[u];const p=o.data;if(function gg(s){return s instanceof Ht}(d)){const y=d;y.resolving&&function Fe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new oe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ie(s)}(p[u]));const w=ud(y.canSeeViewProviders);y.resolving=!0;const R=y.injectImpl?yn(y.injectImpl):null;pg(s,l,bt.Default);try{d=s[u]=y.factory(void 0,p,s,l),o.firstCreatePass&&u>=l.directiveStart&&function ai(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const y=Iu(o);(u.preOrderHooks??=[]).push(s,y),(u.preOrderCheckHooks??=[]).push(s,y)}d&&(u.preOrderHooks??=[]).push(0-s,d),p&&((u.preOrderHooks??=[]).push(s,p),(u.preOrderCheckHooks??=[]).push(s,p))}(u,p[u],o)}finally{null!==R&&yn(R),ud(w),y.resolving=!1,mn()}}return d}function Ks(s,o,u){return!!(u[o+(s>>W_)]&1<<s)}function ld(s,o){return!(s&bt.Self||s&bt.Host&&o)}class Wt{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return ea(this._tNode,this._lView,o,ir(l),u)}}function na(){return new Wt(Ar(),Pe())}function Rs(s){return Es(()=>{const o=s.prototype.constructor,u=o[ws]||Su(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[ws]||Su(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Su(s){return We(s)?()=>{const o=Su(Me(s));return o&&o()}:jo(s)}function Ma(s){const o=s[rt],u=o.type;return 2===u?o.declTNode:1===u?s[Or]:null}function Au(s){return function xc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const p=u[d];if(Ol(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Ar(),s)}const Ru="__parameters__";function F(s,o,u){return Es(()=>{const l=function N(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const y=new d(...p);return w.annotation=y,w;function w(C,R,x){const U=C.hasOwnProperty(Ru)?C[Ru]:Object.defineProperty(C,Ru,{value:[]})[Ru];for(;U.length<=x;)U.push(null);return(U[x]=U[x]||[]).push(y),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function La(s,o){s.forEach(u=>Array.isArray(u)?La(u,o):o(u))}function af(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function hd(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const hf=Mr(F("Optional"),8),Oc=Mr(F("SkipSelf"),4);function jc(s){return 128==(128&s.flags)}var ku=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(ku||{});const Id=new Map;let Ed=0;const vf="__ngContext__";function li(s,o){br(o)?(s[vf]=o[$s],function Ti(s){Id.set(s[$s],s)}(o)):s[vf]=o}let H;function re(s,o){return H(s,o)}function He(s){const o=s[On];return Jr(o)?o[On]:o}function qn(s){return Hc(s[Lr])}function cs(s){return Hc(s[oi])}function Hc(s){for(;null!==s&&!Jr(s);)s=s[oi];return s}function Lu(s,o,u,l,d){if(null!=l){let p,y=!1;Jr(l)?p=l:br(l)&&(y=!0,l=l[Mn]);const w=gn(l);0===s&&null!==u?null==d?mE(o,u,w):Va(o,u,w,d||null,!0):1===s&&null!==u?Va(o,u,w,d||null,!0):2===s?function hy(s,o,u){const l=Mg(s,o);l&&function _E(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,w,y):3===s&&o.destroyNode(w),null!=p&&function hb(s,o,u,l,d){const p=u[Tr];p!==gn(u)&&Lu(o,s,l,p,d);for(let w=Fr;w<u.length;w++){const C=u[w];Oi(C[rt],C,s,o,l,p)}}(o,s,p,u,d)}}function zc(s,o,u){return s.createElement(o,u)}function Wc(s,o){const u=s[Cr],l=u.indexOf(o);Ic(o),u.splice(l,1)}function di(s,o){if(s.length<=Fr)return;const u=Fr+o,l=s[u];if(l){const d=l[jl];null!==d&&d!==s&&Wc(d,l),o>0&&(s[u-1][oi]=l[oi]);const p=hd(s,Fr+o);!function ay(s,o){Oi(s,o,o[St],2,null,null),o[Mn]=null,o[Or]=null}(l[rt],l);const y=p[wr];null!==y&&y.detachView(p[rt]),l[On]=null,l[oi]=null,l[Dt]&=-129}return l}function fE(s,o){if(!(256&o[Dt])){const u=o[St];o[du]&&Zl(o[du]),o[lo]&&Zl(o[lo]),u.destroyNode&&Oi(s,o,u,3,null,null),function kg(s){let o=s[Lr];if(!o)return pE(s[rt],s);for(;o;){let u=null;if(br(o))u=o[Lr];else{const l=o[Fr];l&&(u=l)}if(!u){for(;o&&!o[oi]&&o!==s;)br(o)&&pE(o[rt],o),o=o[On];null===o&&(o=s),br(o)&&pE(o[rt],o),u=o&&o[oi]}o=u}}(o)}}function pE(s,o){if(!(256&o[Dt])){o[Dt]&=-129,o[Dt]|=256,function UN(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof Ht)){const p=u[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=d[p[y]],C=p[y+1];rs(4,w,C);try{C.call(w)}finally{rs(5,w,C)}}else{rs(4,d,p);try{p.call(d)}finally{rs(5,d,p)}}}}}(s,o),function FN(s,o){const u=s.cleanup,l=o[lu];if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+3];y>=0?l[y]():l[-y].unsubscribe(),p+=2}else u[p].call(l[u[p+1]]);null!==l&&(o[lu]=null);const d=o[co];if(null!==d){o[co]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(s,o),1===o[rt].type&&o[St].destroy();const u=o[jl];if(null!==u&&Jr(o[On])){u!==o[On]&&Wc(u,o);const l=o[wr];null!==l&&l.detachView(s)}!function Ng(s){Id.delete(s[$s])}(o)}}function gE(s,o,u){return function ab(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[Mn];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:p}=s.data[l.directiveStart+d];if(p===ts.None||p===ts.Emulated)return null}return Ur(l,u)}}(s,o.parent,u)}function Va(s,o,u,l,d){s.insertBefore(o,u,l,d)}function mE(s,o,u){s.appendChild(o,u)}function ly(s,o,u,l,d){null!==l?Va(s,o,u,l,d):mE(s,o,u)}function Mg(s,o){return s.parentNode(o)}let vE,DE,gy,Og=function ub(s,o,u){return 40&s.type?Ur(s,u):null};function dy(s,o,u,l){const d=gE(s,l,o),p=o[St],w=function yE(s,o,u){return Og(s,o,u)}(l.parent||o[Or],l,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)ly(p,d,u[C],w,!1);else ly(p,d,u,w,!1);void 0!==vE&&vE(p,l,o,u,d)}function Lg(s,o){if(null!==o){const u=o.type;if(3&u)return Ur(o,s);if(4&u)return IE(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return Lg(s,l);{const d=s[o.index];return Jr(d)?IE(-1,d):gn(d)}}if(32&u)return re(o,s)()||gn(s[o.index]);{const l=lb(s,o);return null!==l?Array.isArray(l)?l[0]:Lg(He(s[Ln]),l):Lg(s,o.next)}}return null}function lb(s,o){return null!==o?s[Ln][Or].projection[o.projection]:null}function IE(s,o){const u=Fr+s+1;if(u<o.length){const l=o[u],d=l[rt].firstChild;if(null!==d)return Lg(l,d)}return o[Tr]}function EE(s,o,u,l,d,p,y){for(;null!=u;){const w=l[u.index],C=u.type;if(y&&0===o&&(w&&li(gn(w),l),u.flags|=2),32!=(32&u.flags))if(8&C)EE(s,o,u.child,l,d,p,!1),Lu(o,s,d,w,p);else if(32&C){const R=re(u,l);let x;for(;x=R();)Lu(o,s,d,x,p);Lu(o,s,d,w,p)}else 16&C?fy(s,o,l,u,d,p):Lu(o,s,d,w,p);u=y?u.projectionNext:u.next}}function Oi(s,o,u,l,d,p){EE(u,l,s.firstChild,o,d,p,!1)}function fy(s,o,u,l,d,p){const y=u[Ln],C=y[Or].projection[l.projection];if(Array.isArray(C))for(let R=0;R<C.length;R++)Lu(o,s,d,C[R],p);else{let R=C;const x=y[On];jc(l)&&(R.flags|=128),EE(s,o,R,x,d,p,!0)}}function TE(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function pb(s,o,u){const{mergedAttrs:l,classes:d,styles:p}=u;null!==l&&ou(s,o,l),null!==d&&TE(s,o,d),null!==p&&function fb(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function ds(s){DE=s}function SE(s){return function Td(){if(void 0===gy&&(gy=null,pn.trustedTypes))try{gy=pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return gy}()?.createScriptURL(s)||s}class yb{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}function Li(s){return s instanceof yb?s.changingThisBreaksApplicationSecurity:s}function Ns(s,o){const u=function my(s){return s instanceof yb&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${gt})`)}return u===o}const WN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var wo=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(wo||{});function Iy(s){const o=Vg();return o?o.sanitize(wo.URL,s)||"":Ns(s,"URL")?Li(s):function RE(s){return(s=String(s)).match(WN)?s:"unsafe:"+s}(ie(s))}function Ab(s){const o=Vg();if(o)return SE(o.sanitize(wo.RESOURCE_URL,s)||"");if(Ns(s,"ResourceURL"))return SE(Li(s));throw new oe(904,!1)}function kE(s,o,u){return function xE(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Ab:Iy}(o,u)(s)}function Vg(){const s=Pe();return s&&s[Ia].sanitizer}class vn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ft({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const wf=new vn("ENVIRONMENT_INITIALIZER"),Nb=new vn("INJECTOR",-1),Pb=new vn("INJECTOR_DEF_TYPES");class Ey{get(o,u=Ge){if(u===Ge){const l=new Error(`NullInjectorError: No provider for ${ne(o)}!`);throw l.name="NullInjectorError",l}return u}}function kb(...s){return{\u0275providers:Mb(0,s),\u0275fromNgModule:!0}}function Mb(s,...o){const u=[],l=new Set;let d;const p=y=>{u.push(y)};return La(o,y=>{const w=y;Bg(w,p,[],l)&&(d||=[],d.push(w))}),void 0!==d&&wy(d,p),u}function wy(s,o){for(let u=0;u<s.length;u++){const{ngModule:l,providers:d}=s[u];Ty(d,p=>{o(p,l)})}}function Bg(s,o,u,l){if(!(s=Me(s)))return!1;let d=null,p=gi(s);const y=!p&&Zt(s);if(p||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(p=gi(C),!p)return!1;d=C}const w=l.has(d);if(y){if(w)return!1;if(l.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const R of C)Bg(R,o,u,l)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let R;l.add(d);try{La(p.imports,x=>{Bg(x,o,u,l)&&(R||=[],R.push(x))})}finally{}void 0!==R&&wy(R,o)}if(!w){const R=jo(d)||(()=>new d);o({provide:d,useFactory:R,deps:Kt},d),o({provide:Pb,useValue:d,multi:!0},d),o({provide:wf,useValue:()=>Nt(d),multi:!0},d)}const C=p.providers;if(null!=C&&!w){const R=s;Ty(C,x=>{o(x,R)})}}}return d!==s&&void 0!==s.providers}function Ty(s,o){for(let u of s)Oe(u)&&(u=u.\u0275providers),Array.isArray(u)?Ty(u,o):o(u)}const mL=B({provide:String,useValue:B});function Ob(s){return null!==s&&"object"==typeof s&&mL in s}function bd(s){return"function"==typeof s}const ME=new vn("Set Injector scope."),Cy={},iP={};let OE;function jg(){return void 0===OE&&(OE=new Ey),OE}class ja{}class LE extends ja{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sa(o,y=>this.processProvider(y)),this.records.set(Nb,Tf(void 0,this)),d.has("environment")&&this.records.set(ja,Tf(void 0,this));const p=this.records.get(ME);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Pb.multi,Kt,bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=st(this),l=yn(void 0);try{return o()}finally{st(u),yn(l)}}get(o,u=Ge,l=bt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(_a))return o[_a](this);l=ir(l);const p=st(this),y=yn(void 0);try{if(!(l&bt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const R=function Vb(s){return"function"==typeof s||"object"==typeof s&&s instanceof vn}(o)&&Gn(o);C=R&&this.injectableDefInScope(R)?Tf(by(o),Cy):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(l&bt.Self?jg():this.parent).get(o,u=l&bt.Optional&&u===Ge?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[Et]=w[Et]||[]).unshift(ne(o)),p)throw w;return function pa(s,o,u,l){const d=s[Et];throw o[Q]&&d.unshift(o[Q]),s.message=function kl(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=ne(o);if(Array.isArray(o))d=o.map(ne).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):ne(w)))}d=`{${p.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace($,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[Et]=null,s}(w,o,"R3InjectorError",this.source)}throw w}finally{yn(y),st(p)}}resolveInjectorInitializers(){const o=st(this),u=yn(void 0);try{const d=this.get(wf.multi,Kt,bt.Self);for(const p of d)p()}finally{st(o),yn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(ne(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(o){let u=bd(o=Me(o))?o:Me(o&&o.provide);const l=function yL(s){return Ob(s)?Tf(void 0,s.useValue):Tf(function Fb(s,o,u){let l;if(bd(s)){const d=Me(s);return jo(d)||by(d)}if(Ob(s))l=()=>Me(s.useValue);else if(function Lb(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...tn(s.deps||[]));else if(function nP(s){return!(!s||!s.useExisting)}(s))l=()=>Nt(Me(s.useExisting));else{const d=Me(s&&(s.useClass||s.provide));if(!function Dy(s){return!!s.deps}(s))return jo(d)||by(d);l=()=>new d(...tn(s.deps))}return l}(s),Cy)}(o);if(bd(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Tf(void 0,Cy,!0),d.factory=()=>tn(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===Cy&&(u.value=iP,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Ub(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Me(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function by(s){const o=Gn(s),u=null!==o?o.factory:jo(s);if(null!==u)return u;if(s instanceof vn)throw new oe(204,!1);if(s instanceof Function)return function _L(s){const o=s.length;if(o>0)throw function ra(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new oe(204,!1);const u=function ni(s){return s&&(s[Kn]||s[_s])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new oe(204,!1)}function Tf(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function sa(s,o){for(const u of s)Array.isArray(u)?sa(u,o):u&&Oe(u)?sa(u.\u0275providers,o):o(u)}const FE=new vn("AppId",{providedIn:"root",factory:()=>Bb}),Bb="ng",jb=new vn("Platform Initializer"),UE=new vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sP=new vn("CSP nonce",{providedIn:"root",factory:()=>function Uu(){if(void 0!==DE)return DE;if(typeof document<"u")return document;throw new oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let cP=(s,o,u)=>null;function GE(s,o,u=!1){return cP(s,o,u)}class Yi{}class Gg{}class qb{resolveComponentFactory(o){throw function Ci(s){const o=Error(`No component factory found for ${ne(s)}.`);return o.ngComponent=s,o}(o)}}let Df=(()=>{class s{static#e=this.NULL=new qb}return s})();function Kb(){return Hr(Ar(),Pe())}function Hr(s,o){return new zg(Ur(s,o))}let zg=(()=>{class s{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=Kb}return s})();function Wg(s){return s instanceof zg?s.nativeElement:s}class qg{}let Ha=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ZE(){const s=Pe(),u=Vr(Ar().index,s);return(br(u)?u:s)[St]}()}return s})(),lP=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>null})}return s})();class Zb{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ad=new Zb("16.2.8"),Ny={};function Sf(s,o=null,u=null,l){const d=eD(s,o,u,l);return d.resolveInjectorInitializers(),d}function eD(s,o=null,u=null,l,d=new Set){const p=[u||Kt,kb(s)];return l=l||("object"==typeof s?void 0:ne(s)),new LE(p,o||jg(),l||null,d)}let hs=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=Ge;static#t=this.NULL=new Ey;static create(u,l){if(Array.isArray(u))return Sf({name:""},l,u,"");{const d=u.name??"";return Sf({name:d},u.parent,u.providers,d)}}static#n=this.\u0275prov=ft({token:s,providedIn:"any",factory:()=>Nt(Nb)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function Af(s){return s.ngOriginalError}class Ga{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Af(o);for(;u&&Af(u);)u=Af(u);return u||null}}function Rf(s){return o=>{setTimeout(s,void 0,o)}}const Co=class rD extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,p=u||(()=>null),y=l;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=Rf(p),d&&(d=Rf(d)),y&&(y=Rf(y)));const w=super.subscribe({next:d,error:p,complete:y});return o instanceof ee.w0&&o.add(w),w}};function My(...s){}class hi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Co(!1),this.onMicrotaskEmpty=new Co(!1),this.onStable=new Co(!1),this.onError=new Co(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ew(){const s="function"==typeof pn.requestAnimationFrame;let o=pn[s?"requestAnimationFrame":"setTimeout"],u=pn[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function aD(s){const o=()=>{!function oD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(pn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Kg(s),s.isCheckStableRunning=!0,tw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Kg(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,p,y,w)=>{if(function bi(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(w))return u.invokeTask(d,p,y,w);try{return nw(s),u.invokeTask(d,p,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),uD(s)}},onInvoke:(u,l,d,p,y,w,C)=>{try{return nw(s),u.invoke(d,p,y,w,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),uD(s)}},onHasTask:(u,l,d,p)=>{u.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Kg(s),tw(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,l,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hi.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(hi.isInAngularZone())throw new oe(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,sD,My,My);try{return p.runTask(y,u,l)}finally{p.cancelTask(y)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const sD={};function tw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Kg(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function nw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function uD(s){s._nesting--,tw(s)}class rw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Co,this.onMicrotaskEmpty=new Co,this.onStable=new Co,this.onError=new Co}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const Oy=new vn("",{providedIn:"root",factory:Ly});function Ly(){const s=Ft(hi);let o=!0;const u=new L.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new L.y(d=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{hi.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=s.onUnstable.subscribe(()=>{hi.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,J.T)(u,l.pipe((0,ye.B)()))}function Bu(s){return s instanceof Function?s():s}let Rd=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function ju(s){for(;s;){s[Dt]|=64;const o=He(s);if(wa(s)&&!o)return s;s=o}return null}const hD=new vn("",{providedIn:"root",factory:()=>!1});let $u=null;function _D(s,o){return s[o]??aw()}function Qc(s,o){const u=aw();u.producerNode?.length&&(s[o]=$u,u.lView=s,$u=Yg())}const yD={...Ho,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{ju(s.lView)},lView:null};function Yg(){return Object.create(yD)}function aw(){return $u??=Yg(),$u}const Lt={};function uw(s){Qi(zt(),Pe(),mt()+s,!1)}function Qi(s,o,u,l){if(!l)if(3==(3&o[Dt])){const p=s.preOrderCheckHooks;null!==p&&Na(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Rc(o,p,0,u)}zs(u)}function Nd(s,o=bt.Default){const u=Pe();return null===u?Nt(s,o):ea(Ar(),u,Me(s),o)}function kf(){throw new Error("invalid")}function Qg(s,o,u,l,d,p,y,w,C,R,x){const U=o.blueprint.slice();return U[Mn]=d,U[Dt]=140|l,(null!==R||s&&2048&s[Dt])&&(U[Dt]|=2048),hg(U),U[On]=U[js]=s,U[jn]=u,U[Ia]=y||s&&s[Ia],U[St]=w||s&&s[St],U[Bs]=C||s&&s[Bs]||null,U[Or]=p,U[$s]=function iy(){return Ed++}(),U[qi]=x,U[Hs]=R,U[Ln]=2==o.type?s[Ln]:U,U}function Xc(s,o,u,l,d){let p=s.data[o];if(null===p)p=function $y(s,o,u,l,d){const p=bc(),y=Yo(),C=s.data[o]=function wD(s,o,u,l,d,p){let y=o?o.injectorIndex:-1,w=0;return function bs(){return null!==At.skipHydrationRootTNode}()&&(w|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C,C.prev=p)),C}(s,o,u,l,d),function qh(){return At.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=l,p.attrs=d;const y=function Ra(){const s=At.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return po(p,!0),p}function Mf(s,o,u,l){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Of(s,o,u,l,d){const p=_D(o,du),y=mt(),w=2&l;try{zs(-1),w&&o.length>Bt&&Qi(s,o,Bt,!1),rs(w?2:0,d);const R=w?p:null,x=Oh(R);try{null!==R&&(R.dirty=!1),u(l,d)}finally{Dr(R,x)}}finally{w&&null===o[du]&&Qc(o,du),zs(y),rs(w?3:1,d)}}function Xg(s,o,u){if(pc(o)){const l=vi(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const w=s.data[y];w.contentQueries&&w.contentQueries(1,u[y],y)}}finally{vi(l)}}}function Jg(s,o,u){Br()&&(function kd(s,o,u,l){const d=u.directiveStart,p=u.directiveEnd;Bo(u)&&function _P(s,o,u){const l=Ur(o,s),d=tm(u);let y=16;u.signals?y=4096:u.onPush&&(y=64);const w=sm(s,Qg(s,d,null,y,l,o,null,s[Ia].rendererFactory.createRenderer(l,u),null,null,null));s[o.index]=w}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||ar(u,o),li(l,o);const y=u.initialInputs;for(let w=d;w<p;w++){const C=s.data[w],R=ta(o,s,w,u);li(R,o),null!==y&&yP(0,w-d,R,C,0,y),yi(C)&&(Vr(u.index,o)[jn]=ta(o,s,w,u))}}(s,o,u,Ur(u,o)),64==(64&u.flags)&&za(s,o,u))}function em(s,o,u=Ur){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],w=-1===y?u(o,s):s[y];s[d++]=w}}}function tm(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Pd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Pd(s,o,u,l,d,p,y,w,C,R,x){const U=Bt+l,z=U+d,te=function vD(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Lt);return u}(U,z),Ce="function"==typeof R?R():R;return te[rt]={type:s,blueprint:te,template:u,queries:null,viewQuery:w,declTNode:o,data:te.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:Ce,incompleteFirstPass:!1,ssrId:x}}let nm=s=>null;function TD(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const p=s[d];null===l?Lf(u,o,d,p):l.hasOwnProperty(d)&&Lf(u,o,l[d],p)}return u}function Lf(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function Vi(s,o,u,l,d,p,y,w){const C=Ur(o,u);let x,R=o.inputs;!w&&null!=R&&(x=R[l])?(mw(s,u,x,l,d),Bo(o)&&function xd(s,o){const u=Vr(o,s);16&u[Dt]||(u[Dt]|=64)}(u,o.index)):3&o.type&&(l=function Hy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,p.setProperty(C,l,d))}function hw(s,o,u,l){if(Br()){const d=null===l?null:{"":-1},p=function zy(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let p=0;p<u.length;p++){const y=u[p];if(Fl(o,y.selectors,!1))if(l||(l=[]),yi(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),l.unshift(...w,y),Wy(s,o,w.length)}else l.unshift(y),Wy(s,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(s,u);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&fw(s,o,u,y,d,w),d&&function Qn(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new oe(-301,!1);l.push(o[d],p)}}}(u,l,d)}u.mergedAttrs=Mo(u.mergedAttrs,u.attrs)}function fw(s,o,u,l,d,p){for(let R=0;R<l.length;R++)ka(ar(u,o),s,l[R].type);!function rm(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let R=0;R<l.length;R++){const x=l[R];x.providersResolver&&x.providersResolver(x)}let y=!1,w=!1,C=Mf(s,o,l.length,null);for(let R=0;R<l.length;R++){const x=l[R];u.mergedAttrs=Mo(u.mergedAttrs,x.hostAttrs),im(s,u,o,C,x),qy(C,x,d),null!==x.contentQueries&&(u.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(u.flags|=64);const U=x.type.prototype;!y&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),y=!0),!w&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),w=!0),C++}!function CD(s,o,u){const d=o.directiveEnd,p=s.data,y=o.attrs,w=[];let C=null,R=null;for(let x=o.directiveStart;x<d;x++){const U=p[x],z=u?u.get(U):null,Ce=z?z.outputs:null;C=TD(U.inputs,x,C,z?z.inputs:null),R=TD(U.outputs,x,R,Ce);const je=null===C||null===y||Oo(o)?null:vP(C,x,y);w.push(je)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=C,o.outputs=R}(s,u,p)}function za(s,o,u){const l=u.directiveStart,d=u.directiveEnd,p=u.index,y=function H_(){return At.lFrame.currentDirectiveIndex}();try{zs(p);for(let w=l;w<d;w++){const C=s.data[w],R=o[w];Sc(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Gy(C,R)}}finally{zs(-1),Sc(y)}}function Gy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Wy(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function qy(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;yi(o)&&(u[""]=s)}}function im(s,o,u,l,d){s.data[l]=d;const p=d.factory||(d.factory=jo(d.type)),y=new Ht(p,yi(d),Nd);s.blueprint[l]=y,u[l]=y,function bD(s,o,u,l,d){const p=d.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const w=~o.index;(function mP(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=w&&y.push(w),y.push(u,l,p)}}(s,o,l,Mf(s,u,d.hostVars,Lt),d)}function oa(s,o,u,l,d,p){const y=Ur(s,o);!function pw(s,o,u,l,d,p,y){if(null==p)s.removeAttribute(o,d,u);else{const w=null==y?ie(p):y(p,l||"",d);s.setAttribute(o,d,w,u)}}(o[St],y,p,s.value,u,l,d)}function yP(s,o,u,l,d,p){const y=p[o];if(null!==y)for(let w=0;w<y.length;)DD(l,u,y[w++],y[w++],y[w++])}function DD(s,o,u,l,d){const p=vi(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(d=y[l].call(o,d)),null!==s.setInput?s.setInput(o,d,u,l):o[l]=d}finally{vi(p)}}function vP(s,o,u){let l=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===l&&(l=[]);const y=s[p];for(let w=0;w<y.length;w+=2)if(y[w]===o){l.push(p,y[w+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function Ff(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null,null]}function Hu(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const p=u[l+1];if(-1!==p){const y=s.data[p];Yh(u[l]),y.contentQueries(2,o[p],p)}}}function sm(s,o){return s[Lr]?s[Jp][oi]=o:s[Lr]=o,s[Jp]=o,o}function Ky(s,o,u){Yh(0);const l=vi(null);try{o(s,u)}finally{vi(l)}}function Md(s){return s[lu]||(s[lu]=[])}function SD(s){return s.cleanup||(s.cleanup=[])}function gw(s,o){const u=s[Bs],l=u?u.get(Ga,null):null;l&&l.handleError(o)}function mw(s,o,u,l,d){for(let p=0;p<u.length;){const y=u[p++],w=u[p++];DD(s.data[y],o[y],l,w,d)}}function Wa(s,o,u){const l=function Ko(s,o){return gn(o[s])}(o,s);!function xg(s,o,u){s.setValue(o,u)}(s[St],l,u)}function RD(s,o){const u=Vr(o,s),l=u[rt];!function _w(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(l,u);const d=u[Mn];null!==d&&null===u[qi]&&(u[qi]=GE(d,u[Bs])),om(l,u,u[jn])}function om(s,o,u){An(o);try{const l=s.viewQuery;null!==l&&Ky(1,l,u);const d=s.template;null!==d&&Of(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Hu(s,o),s.staticViewQueries&&Ky(2,s.viewQuery,u);const p=s.components;null!==p&&function ND(s,o){for(let u=0;u<o.length;u++)RD(s,o[u])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Dt]&=-5,Xo()}}let yw=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,l,d){const p=typeof Zone>"u"?null:Zone.current,y=function V_(s,o,u){const l=Object.create(sg);u&&(l.consumerAllowSignalWrites=!0),l.fn=s,l.schedule=o;const d=y=>{l.cleanupFn=y};return l.ref={notify:()=>gu(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Kl(l))return;l.hasRun=!0;const y=Oh(l);try{l.cleanupFn(),l.cleanupFn=ed,l.fn(d)}finally{Dr(l,y)}},cleanup:()=>l.cleanupFn()},l.ref}(u,R=>{this.all.has(R)&&this.queue.set(R,p)},d);let w;this.all.add(y),y.notify();const C=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=l?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function Zy(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?p=w:1==p?d=Ve(d,w):2==p&&(l=Ve(l,w+": "+o[++y]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function am(s,o,u,l,d=!1){for(;null!==u;){const p=o[u.index];null!==p&&l.push(gn(p)),Jr(p)&&PD(p,l);const y=u.type;if(8&y)am(s,o,u.child,l);else if(32&y){const w=re(u,o);let C;for(;C=w();)l.push(C)}else if(16&y){const w=lb(o,u);if(Array.isArray(w))l.push(...w);else{const C=He(o[Ln]);am(C[rt],C,w,l,!0)}}u=d?u.projectionNext:u.next}return l}function PD(s,o){for(let u=Fr;u<s.length;u++){const l=s[u],d=l[rt].firstChild;null!==d&&am(l[rt],l,d,o)}s[Tr]!==s[Mn]&&o.push(s[Tr])}function Od(s,o,u,l=!0){const d=o[Ia],p=d.rendererFactory,y=d.afterRenderEventManager;p.begin?.(),y?.begin();try{Xy(s,o,s.template,u)}catch(C){throw l&&gw(o,C),C}finally{p.end?.(),d.effectManager?.flush(),y?.end()}}function Xy(s,o,u,l){const d=o[Dt];if(256!=(256&d)){o[Ia].effectManager?.flush(),An(o);try{hg(o),function Wh(s){return At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Of(s,o,u,2,l);const y=3==(3&d);if(y){const R=s.preOrderCheckHooks;null!==R&&Na(o,R,null)}else{const R=s.preOrderHooks;null!==R&&Rc(o,R,0,null),qs(o,0)}if(function um(s){for(let o=qn(s);null!==o;o=cs(o)){if(!o[fc])continue;const u=o[Cr];for(let l=0;l<u.length;l++){rd(u[l])}}}(o),vw(o,2),null!==s.contentQueries&&Hu(s,o),y){const R=s.contentCheckHooks;null!==R&&Na(o,R)}else{const R=s.contentHooks;null!==R&&Rc(o,R,1),qs(o,1)}!function jy(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const l=_D(o,lo);try{for(let d=0;d<u.length;d++){const p=u[d];if(p<0)zs(~p);else{const y=p,w=u[++d],C=u[++d];Dc(w,y),l.dirty=!1;const R=Oh(l);try{C(2,o[y])}finally{Dr(l,R)}}}}finally{null===o[lo]&&Qc(o,lo),zs(-1)}}(s,o);const w=s.components;null!==w&&_r(o,w,0);const C=s.viewQuery;if(null!==C&&Ky(2,C,l),y){const R=s.viewCheckHooks;null!==R&&Na(o,R)}else{const R=s.viewHooks;null!==R&&Rc(o,R,2),qs(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Dt]&=-73,Ic(o)}finally{Xo()}}}function vw(s,o){for(let u=qn(s);null!==u;u=cs(u))for(let l=Fr;l<u.length;l++)xD(u[l],o)}function cm(s,o,u){xD(Vr(o,s),u)}function xD(s,o){if(!function Aa(s){return 128==(128&s[Dt])}(s))return;const u=s[rt],l=s[Dt];if(80&l&&0===o||1024&l||2===o)Xy(u,s,u.template,s[jn]);else if(s[Fo]>0){vw(s,1);const d=u.components;null!==d&&_r(s,d,1)}}function _r(s,o,u){for(let l=0;l<o.length;l++)cm(s,o[l],u)}class Uf{get rootNodes(){const o=this._lView,u=o[rt];return am(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(o){this._lView[jn]=o}get destroyed(){return 256==(256&this._lView[Dt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[On];if(Jr(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(di(o,l),hd(u,l))}this._attachedToViewContainer=!1}fE(this._lView[rt],this._lView)}onDestroy(o){!function Sn(s,o){if(256==(256&s[Dt]))throw new oe(911,!1);null===s[co]&&(s[co]=[]),s[co].push(o)}(this._lView,o)}markForCheck(){ju(this._cdRefInjectingView||this._lView)}detach(){this._lView[Dt]&=-129}reattach(){this._lView[Dt]|=128}detectChanges(){Od(this._lView[rt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ua(s,o){Oi(s,o,o[St],2,null,null)}(this._lView[rt],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=o}}class wP extends Uf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Od(o[rt],o,o[jn],!1)}checkNoChanges(){}get context(){return null}}class kD extends Df{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Zt(o);return new Vf(u,this.ngModule)}}function MD(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class LD{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=ir(l);const d=this.injector.get(o,Ny,l);return d!==Ny||u===Ny?d:this.parentInjector.get(o,u,l)}}class Vf extends Gg{get inputs(){const o=this.componentDef,u=o.inputTransforms,l=MD(o.inputs);if(null!==u)for(const d of l)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return l}get outputs(){return MD(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Ah(s){return s.map(Sh).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let p=(d=d||this.ngModule)instanceof ja?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new LD(o,p):o,w=y.get(qg,null);if(null===w)throw new oe(407,!1);const U={rendererFactory:w,sanitizer:y.get(lP,null),effectManager:y.get(yw,null),afterRenderEventManager:y.get(Rd,null)},z=w.createRenderer(null,this.componentDef),te=this.componentDef.selectors[0][0]||"div",Ce=l?function gP(s,o,u,l){const p=l.get(hD,!1)||u===ts.ShadowDom,y=s.selectRootElement(o,p);return function cw(s){nm(s)}(y),y}(z,l,this.componentDef.encapsulation,y):zc(z,te,function OD(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(te)),Ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Le=null;null!==Ce&&(Le=GE(Ce,y,!0));const Vt=Pd(0,null,null,1,0,null,null,null,null,null,null),Yt=Qg(null,Vt,null,Ct,null,null,U,z,y,null,Le);let Vn,Ls;An(Yt);try{const tc=this.componentDef;let fh,ph=null;tc.findHostDirectiveDefs?(fh=[],ph=new Map,tc.findHostDirectiveDefs(tc,fh,ph),fh.push(tc)):fh=[tc];const rk=function FD(s,o){const u=s[rt],l=Bt;return s[l]=o,Xc(u,l,2,"#host",null)}(Yt,Ce),Ja=function qa(s,o,u,l,d,p,y){const w=d[rt];!function UD(s,o,u,l){for(const d of s)o.mergedAttrs=Mo(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Zy(o,o.mergedAttrs,!0),null!==u&&pb(l,u,o))}(l,s,o,y);let C=null;null!==o&&(C=GE(o,d[Bs]));const R=p.rendererFactory.createRenderer(o,u);let x=16;u.signals?x=4096:u.onPush&&(x=64);const U=Qg(d,tm(u),null,x,d[s.index],s,p,R,null,null,C);return w.firstCreatePass&&Wy(w,s,l.length-1),sm(d,U),d[s.index]=U}(rk,Ce,tc,fh,Yt,U,z);Ls=nd(Vt,Bt),Ce&&function VD(s,o,u,l){if(l)ou(s,u,["ng-version",Ad.full]);else{const{attrs:d,classes:p}=function zi(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&u.push(p);else{if(!_i(d))break;d=p}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&ou(s,u,d),p&&p.length>0&&TE(s,u,p.join(" "))}}(z,tc,Ce,l),void 0!==u&&function Iw(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const p=u[d];l.push(null!=p?Array.from(p):null)}}(Ls,this.ngContentSelectors,u),Vn=function TP(s,o,u,l,d,p){const y=Ar(),w=d[rt],C=Ur(y,d);fw(w,d,y,u,null,l);for(let x=0;x<u.length;x++)li(ta(d,w,y.directiveStart+x,y),d);za(w,d,y),C&&li(C,d);const R=ta(d,w,y.directiveStart+y.componentOffset,y);if(s[jn]=d[jn]=R,null!==p)for(const x of p)x(R,o);return Xg(w,y,s),R}(Ja,tc,fh,ph,Yt,[lm]),om(Vt,Yt,null)}finally{Xo()}return new Jy(this.componentType,Vn,Hr(Ls,Yt),Yt,Ls)}}class Jy extends Yi{constructor(o,u,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new wP(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const p=this._rootLView;mw(p[rt],p,d,o,u),this.previousInputValues.set(o,u),ju(Vr(this._tNode.index,p))}}get injector(){return new Wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function lm(){const s=Ar();Ws(Pe()[rt],s)}function Jc(s){const o=s.inputConfig,u={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(u[l]=d[2])}s.inputTransforms=u}function fm(s){return!!Bf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Bf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Gr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function In(s,o,u,l){const d=Pe();return Gr(d,Qo(),o)&&(zt(),oa(Rn(),d,s,o,u,l)),In}function el(s,o,u,l){return Gr(s,Qo(),u)?o+ie(u)+l:Lt}function KD(s,o,u,l,d,p,y,w){const C=Pe(),R=zt(),x=s+Bt,U=R.firstCreatePass?function PL(s,o,u,l,d,p,y,w,C){const R=o.consts,x=Xc(o,s,4,y||null,Ii(R,w));hw(o,u,x,Ii(R,C)),Ws(o,x);const U=x.tView=Pd(2,x,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,R,null);return null!==o.queries&&(o.queries.template(o,x),U.queries=o.queries.embeddedTView(x)),x}(x,R,C,o,u,l,d,p,y):R.data[x];po(U,!1);const z=xw(R,C,U,s);jr()&&dy(R,C,z,U),li(z,C),sm(C,C[x]=Ff(z,C,z,U)),ki(U)&&Jg(R,C,U),null!=y&&em(C,U,w)}let xw=function Ut(s,o,u,l){return $r(!0),o[St].createComment("")};function Tt(s){return function Zo(s,o){return s[o]}(function fg(){return At.lFrame.contextLView}(),Bt+s)}function Bd(s,o,u){const l=Pe();return Gr(l,Qo(),o)&&Vi(zt(),Rn(),l,s,o,l[St],u,!1),Bd}function un(s,o,u,l,d){const y=d?"class":"style";mw(s,u,o.inputs[y],y,l)}function Jn(s,o,u,l){const d=Pe(),p=zt(),y=Bt+s,w=d[St],C=p.firstCreatePass?function MP(s,o,u,l,d,p){const y=o.consts,C=Xc(o,s,2,l,Ii(y,d));return hw(o,u,C,Ii(y,p)),null!==C.attrs&&Zy(C,C.attrs,!1),null!==C.mergedAttrs&&Zy(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,p,d,o,u,l):p.data[y],R=ov(p,d,C,w,o,s);d[y]=R;const x=ki(C);return po(C,!0),pb(w,R,C),32!=(32&C.flags)&&jr()&&dy(p,d,R,C),0===function Ec(){return At.lFrame.elementDepthCount}()&&li(R,d),function Sr(){At.lFrame.elementDepthCount++}(),x&&(Jg(p,d,C),Xg(p,C,d)),null!==l&&em(d,C),Jn}function Je(){let s=Ar();Yo()?function od(){At.lFrame.isParent=!1}():(s=s.parent,po(s,!1));const o=s;(function id(s){return At.skipHydrationRootTNode===s})(o)&&function sd(){At.skipHydrationRootTNode=null}(),function zh(){At.lFrame.elementDepthCount--}();const u=zt();return u.firstCreatePass&&(Ws(u,s),pc(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Xh(s){return 0!=(8&s.flags)}(o)&&un(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Jh(s){return 0!=(16&s.flags)}(o)&&un(u,o,Pe(),o.stylesWithoutHost,!1),Je}function Wf(s,o,u,l){return Jn(s,o,u,l),Je(),Wf}let ov=(s,o,u,l,d,p)=>($r(!0),zc(l,d,function Rr(){return At.lFrame.currentNamespace}()));function Fw(){return Pe()}function uv(s){return!!s&&"function"==typeof s.then}function Gu(s){return!!s&&"function"==typeof s.subscribe}function vm(s,o,u,l){const d=Pe(),p=zt(),y=Ar();return function Do(s,o,u,l,d,p,y){const w=ki(l),R=s.firstCreatePass&&SD(s),x=o[jn],U=Md(o);let z=!0;if(3&l.type||y){const je=Ur(l,o),nt=y?y(je):je,Ct=U.length,Le=y?Yt=>y(gn(Yt[l.index])):l.index;let Vt=null;if(!y&&w&&(Vt=function cv(s,o,u,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===u&&d[p+1]===l){const w=o[lu],C=d[p+2];return w.length>C?w[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,l.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=p,Vt.__ngLastListenerFn__=p,z=!1;else{p=qf(l,o,x,p,!1);const Yt=u.listen(nt,d,p);U.push(p,Yt),R&&R.push(d,Le,Ct,Ct+1)}}else p=qf(l,o,x,p,!1);const te=l.outputs;let Ce;if(z&&null!==te&&(Ce=te[d])){const je=Ce.length;if(je)for(let nt=0;nt<je;nt+=2){const Vn=o[Ce[nt]][Ce[nt+1]].subscribe(p),Ls=U.length;U.push(p,Vn),R&&R.push(d,l.index,Ls,-(Ls+1))}}}(p,d,d[St],y,s,o,l),vm}function YD(s,o,u,l){try{return rs(6,o,u),!1!==u(l)}catch(d){return gw(s,d),!1}finally{rs(7,o,u)}}function qf(s,o,u,l,d){return function p(y){if(y===Function)return l;ju(s.componentOffset>-1?Vr(s.index,o):o);let C=YD(o,u,l,y),R=p.__ngNextListenerFn__;for(;R;)C=YD(o,u,R,y)&&C,R=R.__ngNextListenerFn__;return d&&!1===C&&y.preventDefault(),C}}function Im(s,o,u){return Uw(s,"",o,"",u),Im}function Uw(s,o,u,l,d){const p=Pe(),y=el(p,o,u,l);return y!==Lt&&Vi(zt(),Rn(),p,s,y,p[St],d,!1),Uw}function zd(s,o=""){const u=Pe(),l=zt(),d=s+Bt,p=l.firstCreatePass?Xc(l,d,1,o,null):l.data[d],y=fv(l,u,p,o,s);u[d]=y,jr()&&dy(l,u,y,p),po(p,!1)}let fv=(s,o,u,l,d)=>($r(!0),function Gc(s,o){return s.createText(o)}(o[St],l));function wm(s){return qd("",s,""),wm}function qd(s,o,u){const l=Pe(),d=el(l,s,o,u);return d!==Lt&&Wa(l,mt(),d),qd}const Yu=void 0;var Cm=["en",[["a","p"],["AM","PM"],Yu],[["AM","PM"],Yu,Yu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yu,"{1} 'at' {0}",Yu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kd(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Qu={};function gv(s){const o=function d0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=l0(o);if(u)return u;const l=o.split("-")[0];if(u=l0(l),u)return u;if("en"===l)return Cm;throw new oe(701,!1)}function Ka(s){return gv(s)[Zd.PluralCase]}function l0(s){return s in Qu||(Qu[s]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[s]),Qu[s]}var Zd=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Zd||{});const Ao="en-US";let _v=Ao;class dl{}class b0{}function zS(s,o){return new D0(s,o??null,[])}class D0 extends dl{constructor(o,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kD(this);const d=si(o);this._bootstrapComponents=Bu(d.bootstrap),this._r3Injector=eD(o,u,[{provide:dl,useValue:this},{provide:Df,useValue:this.componentFactoryResolver},...l],ne(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class eh extends b0{constructor(o){super(),this.moduleType=o}create(o){return new D0(this.moduleType,o,[])}}class WS extends dl{constructor(o){super(),this.componentFactoryResolver=new kD(this),this.instance=null;const u=new LE([...o.providers,{provide:dl,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],o.parent||jg(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function A0(s,o,u=null){return new WS({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let R0=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const l=Mb(0,u.type),d=l.length>0?A0([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:s,providedIn:"environment",factory:()=>new s(Nt(ja))})}return s})();function N0(s){s.getStandaloneInjector=o=>o.get(R0).getOrCreateStandaloneInjector(s)}function V0(){return this._results[Symbol.iterator]()}class kv{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Co)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=kv.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=V0)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function ci(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function as(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function uA(s,o,u,l=!0){const d=o[rt];if(function cy(s,o,u,l){const d=Fr+l,p=u.length;l>0&&(u[d-1][oi]=o),l<p-Fr?(o[oi]=u[d],af(u,Fr+l,o)):(u.push(o),o[oi]=null),o[On]=u;const y=o[jl];null!==y&&u!==y&&function Fu(s,o){const u=s[Cr];o[Ln]!==o[On][On][Ln]&&(s[fc]=!0),null===u?s[Cr]=[o]:u.push(o)}(y,o);const w=o[wr];null!==w&&w.insertView(s),o[Dt]|=128}(d,o,s,u),l){const p=IE(u,s),y=o[St],w=Mg(y,s[Tr]);null!==w&&function uy(s,o,u,l,d,p){l[Mn]=d,l[Or]=o,Oi(s,l,u,1,d,p)}(d,s[Or],y,o,w,p)}}let Vm=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=hx}return s})();const $0=Vm,Mv=class extends $0{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u)}createEmbeddedViewImpl(o,u,l){const d=function B0(s,o,u,l){const d=o.tView,w=Qg(s,d,u,4096&s[Dt]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);w[jl]=s[o.index];const R=s[wr];return null!==R&&(w[wr]=R.createEmbeddedView(d)),om(d,w,u),w}(this._declarationLView,this._declarationTContainer,o,{injector:u,hydrationInfo:l});return new Uf(d)}};function hx(){return Bm(Ar(),Pe())}function Bm(s,o){return 4&s.type?new Mv(o,s,Hr(s,o)):null}let da=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=pp}return s})();function pp(){return z0(Ar(),Pe())}const lA=da,_l=class extends lA{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return Hr(this._hostTNode,this._hostLView)}get injector(){return new Wt(this._hostTNode,this._hostLView)}get parentInjector(){const o=As(this._hostTNode,this._hostLView);if(Cu(o)){const u=xa(o,this._hostLView),l=Pa(o);return new Wt(u[rt].data[l+8],u)}return new Wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=dA(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-Fr}createEmbeddedView(o,u,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const w=o.createEmbeddedViewImpl(u||{},p,null);return this.insertImpl(w,d,false),w}createComponent(o,u,l,d,p){const y=o&&!function ui(s){return"function"==typeof s}(o);let w;if(y)w=u;else{const je=u||{};w=je.index,l=je.injector,d=je.projectableNodes,p=je.environmentInjector||je.ngModuleRef}const C=y?o:new Vf(Zt(o)),R=l||this.parentInjector;if(!p&&null==C.ngModule){const nt=(y?R:this.parentInjector).get(ja,null);nt&&(p=nt)}Zt(C.componentType??{});const te=C.create(R,d,null,p);return this.insertImpl(te.hostView,w,false),te}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,l){const d=o._lView;if(function dg(s){return Jr(s[On])}(d)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const R=d[On],x=new _l(R,R[Or],R[On]);x.detach(x.indexOf(o))}}const y=this._adjustIndex(u),w=this._lContainer;return uA(w,d,y,!l),o.attachToViewContainerRef(),af(yl(w),y,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=dA(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=di(this._lContainer,u);l&&(hd(yl(this._lContainer),u),fE(l[rt],l))}detach(o){const u=this._adjustIndex(o,-1),l=di(this._lContainer,u);return l&&null!=hd(yl(this._lContainer),u)?new Uf(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function dA(s){return s[8]}function yl(s){return s[8]||(s[8]=[])}function z0(s,o){let u;const l=o[s.index];return Jr(l)?u=l:(u=Ff(l,o,null,s),o[s.index]=u,sm(o,u)),W0(u,o,s,l),new _l(u,s,o)}let W0=function hA(s,o,u,l){if(s[Tr])return;let d;d=8&u.type?gn(l):function vl(s,o){const u=s[St],l=u.createComment(""),d=Ur(o,s);return Va(u,Mg(u,d),l,function If(s,o){return s.nextSibling(o)}(u,d),!1),l}(o,u),s[Tr]=d};class Uv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class q0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<l;p++){const y=u.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new q0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==_A(o,u).matches&&this.queries[u].setDirty()}}class $m{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class Vv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==u?u.push(p):u=[p])}return null!==u?new Vv(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class K0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new K0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,u,pA(u,p)),this.matchTNodeWithReadOption(o,u,cd(u,o,p,!1,!1))}else l===Vm?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,cd(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===zg||d===da||d===Vm&&4&u.type)this.addMatch(u.index,-2);else{const p=cd(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function pA(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function gA(s,o,u,l){return-1===u?function px(s,o){return 11&s.type?Hr(s,o):4&s.type?Bm(s,o):null}(o,s):-2===u?function sh(s,o,u){return u===zg?Hr(o,s):u===Vm?Bm(o,s):u===da?z0(o,s):void 0}(s,o,l):ta(s,s[rt],u,o)}function gp(s,o,u,l){const d=o[wr].queries[l];if(null===d.matches){const p=s.data,y=u.matches,w=[];for(let C=0;C<y.length;C+=2){const R=y[C];w.push(R<0?null:gA(o,p[R],y[C+1],u.metadata.read))}d.matches=w}return d.matches}function Bv(s,o,u,l){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const y=gp(s,o,d,u);for(let w=0;w<p.length;w+=2){const C=p[w];if(C>0)l.push(y[w/2]);else{const R=p[w+1],x=o[-C];for(let U=Fr;U<x.length;U++){const z=x[U];z[jl]===z[On]&&Bv(z[rt],z,R,l)}if(null!==x[Cr]){const U=x[Cr];for(let z=0;z<U.length;z++){const te=U[z];Bv(te[rt],te,R,l)}}}}}return l}function Z0(s){const o=Pe(),u=zt(),l=Ac();Yh(l+1);const d=_A(u,l);if(s.dirty&&function lg(s){return 4==(4&s[Dt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Bv(u,o,l,[]):gp(u,o,d,l);s.reset(p,Wg),s.notifyOnChanges()}return!0}return!1}function Y0(s,o,u,l){const d=zt();if(d.firstCreatePass){const p=Ar();(function pi(s,o,u){null===s.queries&&(s.queries=new Vv),s.queries.track(new K0(o,u))})(d,new $m(o,u,l),p.index),function _x(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function jv(s,o,u){const l=new kv(4==(4&u));(function ED(s,o,u,l){const d=Md(o);d.push(u),s.firstCreatePass&&SD(s).push(l,d.length-1)})(s,o,l,l.destroy),null===o[wr]&&(o[wr]=new q0),o[wr].queries.push(new Uv(l))}(d,Pe(),u)}function mA(){return function mx(s,o){return s[wr].queries[o].queryList}(Pe(),Ac())}function _A(s,o){return s.queries.getByIndex(o)}function Hm(s){return!!si(s)}const yp=new vn("Application Initializer");let qm=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=Ft(yp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const p=d();if(uv(p))u.push(p);else if(Gu(p)){const y=new Promise((w,C)=>{p.subscribe({complete:w,error:C})});u.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),uh=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const ch=new vn("LocaleId",{providedIn:"root",factory:()=>Ft(ch,bt.Optional|bt.SkipSelf)||function cT(){return typeof $localize<"u"&&$localize.locale||Ao}()}),Km=new vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let eI=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class wl{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let xA=(()=>{class s{compileModuleSync(u){return new eh(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),p=Bu(si(u).declarations).reduce((y,w)=>{const C=Zt(w);return C&&y.push(new Vf(C)),y},[]);return new wl(l,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const sI=new vn(""),dh=new vn("");let IT,Ip=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,IT||(function Ep(s){IT=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||s)(Nt(hi),Nt(vT),Nt(dh))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac})}return s})(),vT=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return IT?.findTestabilityInTree(this,u,l)??null}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),Tl=null;const oI=new vn("AllowMultipleToken"),Qm=new vn("PlatformDestroyListeners"),Xm=new vn("appBootstrapListener");class TT{constructor(o,u){this.name=o,this.token=u}}function CT(s,o,u=[]){const l=`Platform: ${o}`,d=new vn(l);return(p=[])=>{let y=DT();if(!y||y.injector.get(oI,!1)){const w=[...u,...p,{provide:d,useValue:!0}];s?s(w):function kx(s){if(Tl&&!Tl.get(oI,!1))throw new oe(400,!1);(function VA(){!function rg(s){Uh=s}(()=>{throw new oe(600,!1)})})(),Tl=s;const o=s.get(HA);(function jA(s){s.get(jb,null)?.forEach(u=>u())})(s)}(function bT(s=[],o){return hs.create({name:o,providers:[{provide:ME,useValue:"platform"},{provide:Qm,useValue:new Set([()=>Tl=null])},...s]})}(w,l))}return function $A(s){const o=DT();if(!o)throw new oe(401,!1);return o}()}}function DT(){return Tl?.get(HA)??null}let HA=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function ST(s="zone.js",o){return"noop"===s?new rw:"zone.js"===s?new hi(o):s}(l?.ngZone,function GA(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const p=function S0(s,o,u){return new D0(s,o,u)}(u.moduleType,this.injector,function qA(s){return[{provide:hi,useFactory:s},{provide:wf,multi:!0,useFactory:()=>{const o=Ft(AT,{optional:!0});return()=>o.initialize()}},{provide:cI,useFactory:WA},{provide:Oy,useFactory:Ly}]}(()=>d)),y=p.injector.get(Ga,null);return d.runOutsideAngular(()=>{const w=d.onError.subscribe({next:C=>{y.handleError(C)}});p.onDestroy(()=>{Tp(this._modules,p),w.unsubscribe()})}),function aI(s,o,u){try{const l=u();return uv(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(y,d,()=>{const w=p.injector.get(qm);return w.runInitializers(),w.donePromise.then(()=>(function rp(s){Ye(s,"Expected localeId to be defined"),"string"==typeof s&&(_v=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(ch,Ao)||Ao),this._moduleDoBootstrap(p),p))})})}bootstrapModule(u,l=[]){const d=uI({},l);return function ET(s,o,u){const l=new eh(u);return Promise.resolve(l)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const l=u.injector.get(wp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new oe(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Qm,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||s)(Nt(hs))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function uI(s,o){return Array.isArray(o)?o.reduce(uI,s):{...s,...o}}let wp=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ft(cI),this.zoneIsStable=Ft(Oy),this.componentTypes=[],this.components=[],this.isStable=Ft(eI).hasPendingTasks.pipe((0,xe.w)(u=>u?(0,_e.of)(!1):this.zoneIsStable),(0,de.x)(),(0,ye.B)()),this._injector=Ft(ja)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const d=u instanceof Gg;if(!this._injector.get(qm).done)throw!d&&uo(u),new oe(405,!1);let y;y=d?u:this._injector.get(Df).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const w=function wT(s){return s.isBoundToModule}(y)?void 0:this._injector.get(dl),R=y.create(hs.NULL,[],l||y.selector,w),x=R.location.nativeElement,U=R.injector.get(sI,null);return U?.registerApplication(x),R.onDestroy(()=>{this.detachView(R.hostView),Tp(this.components,R),U?.unregisterApplication(x)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Tp(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(Xm,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Tp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new oe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Tp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const cI=new vn("",{providedIn:"root",factory:()=>Ft(Ga).handleError.bind(void 0)});function WA(){const s=Ft(hi),o=Ft(Ga);return u=>s.runOutsideAngular(()=>o.handleError(u))}let AT=(()=>{class s{constructor(){this.zone=Ft(hi),this.applicationRef=Ft(wp)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Lx(){return!1}let NT=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=PT}return s})();function PT(s){return function xT(s,o,u){if(Bo(s)&&!u){const l=Vr(s.index,o);return new Uf(l,l)}return 47&s.type?new Uf(o[Ln],o):null}(Ar(),Pe(),16==(16&s))}class tR{constructor(){}supports(o){return fm(o)}create(o){return new LT(o)}}const $x=(s,o)=>o;class LT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||$x}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,p=null;for(;u||l;){const y=!l||u&&u.currentIndex<hI(l,d,p)?u:l,w=hI(y,d,p),C=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{p||(p=[]);const R=w-d,x=C-d;if(R!=x){for(let z=0;z<R;z++){const te=z<p.length?p[z]:p[z]=0,Ce=te+z;x<=Ce&&Ce<R&&(p[z]=te+1)}p[y.previousIndex]=x-R}}w!==C&&o(y,w,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!fm(o))throw new oe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],y=this._trackByFn(w,p),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,p,y,w)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,w),l=!0),u=u._next}else d=0,function GD(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(d,w),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,w,y,d)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,y,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new Hx(u,l),p,d),o}_verifyReinsertion(o,u,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new dI),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Hx{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class dI{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new FT,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hI(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class nR{constructor(){}supports(o){return o instanceof Map||Bf(o)}create(){return new n_}}class n_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Bf(o)))throw new oe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const l=new Gx(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class Gx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fI(){return new pI([new tR])}let pI=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:fI});constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||fI()),deps:[[s,new Oc,new hf]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new oe(901,!1)}}return s})();function UT(){return new Dp([new nR])}let Dp=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:UT});constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||UT()),deps:[[s,new Oc,new hf]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new oe(901,!1)}}return s})();const gI=CT(null,"core",[]);let VT=(()=>{class s{constructor(u){}static#e=this.\u0275fac=function(l){return new(l||s)(Nt(wp))};static#t=this.\u0275mod=uu({type:s});static#n=this.\u0275inj=Cn({})}return s})();function oR(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Hi(s){const o=Zt(s);if(!o)return null;const u=new Vf(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(ht,Se,O)=>{O.d(Se,{Z:()=>Ke});var _=O(9058),ee=O(4537),L=O(7592),J=O(7879);class se{constructor(We,Oe){this._delegate=We,this.firebase=Oe,(0,L._addComponent)(We,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(We,Oe=L._DEFAULT_ENTRY_NAME){var pt;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(We);return!gt.isInitialized()&&"EXPLICIT"===(null===(pt=gt.getComponent())||void 0===pt?void 0:pt.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:Oe})}_removeServiceInstance(We,Oe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Oe)}_addComponent(We){(0,L._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,L._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function de(){const Me=function xe(Me){const We={},Oe={__esModule:!0,initializeApp:function oe(Fe,ce={}){const Z=L.initializeApp(Fe,ce);if((0,_.r3)(We,Z.name))return We[Z.name];const $e=new Me(Z,Oe);return We[Z.name]=$e,$e},app:gt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function ie(Fe){const ce=Fe.name,Z=ce.replace("-compat","");if(L._registerComponent(Fe)&&"PUBLIC"===Fe.type){const $e=(yt=gt())=>{if("function"!=typeof yt[Z])throw ye.create("invalid-app-argument",{appName:ce});return yt[Z]()};void 0!==Fe.serviceProps&&(0,_.ZB)($e,Fe.serviceProps),Oe[Z]=$e,Me.prototype[Z]=function(...yt){return this._getService.bind(this,ce).apply(this,Fe.multipleInstances?yt:[])}}return"PUBLIC"===Fe.type?Oe[Z]:null},removeApp:function pt(Fe){delete We[Fe]},useAsService:function be(Fe,ce){return"serverAuth"===ce?null:ce},modularAPIs:L}};function gt(Fe){if(!(0,_.r3)(We,Fe=Fe||L._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Fe});return We[Fe]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Te(){return Object.keys(We).map(Fe=>We[Fe])}}),gt.App=Me,Oe}(se);return Me.INTERNAL=Object.assign(Object.assign({},Me.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function We(Oe){(0,_.ZB)(Me,Oe)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Me}(),G=new J.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=B;!function Ne(Me){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Me)}()},7592:(ht,Se,O)=>{O.r(Se),O.d(Se,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>Cn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>De,_addOrOverwriteComponent:()=>Re,_apps:()=>ge,_clearComponents:()=>It,_components:()=>Ie,_getProvider:()=>ze,_registerComponent:()=>Ye,_removeServiceInstance:()=>xn,deleteApp:()=>ni,getApp:()=>fn,getApps:()=>Er,initializeApp:()=>Gn,onLog:()=>ri,registerVersion:()=>Kn,setLogLevel:()=>_s});var _=O(5861),ee=O(4537),L=O(7879),J=O(9058),se=O(1878);class _e{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(ve=>{if(function ye(we){const W=we.getComponent();return"VERSION"===W?.type}(ve)){const Ge=ve.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(ve=>ve).join(" ")}}const xe="@firebase/app",B=new L.Yd("@firebase/app"),ae="[DEFAULT]",pe={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ge=new Map,Ie=new Map;function De(we,W){try{we.container.addComponent(W)}catch(ve){B.debug(`Component ${W.name} failed to register with FirebaseApp ${we.name}`,ve)}}function Re(we,W){we.container.addOrOverwriteComponent(W)}function Ye(we){const W=we.name;if(Ie.has(W))return B.debug(`There were multiple attempts to register component ${W}.`),!1;Ie.set(W,we);for(const ve of ge.values())De(ve,we);return!0}function ze(we,W){const ve=we.container.getProvider("heartbeat").getImmediate({optional:!0});return ve&&ve.triggerHeartbeat(),we.container.getProvider(W)}function xn(we,W,ve=ae){ze(we,W).clearInstance(ve)}function It(){Ie.clear()}const ft=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tn{constructor(W,ve,Ge){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},ve),this._name=ve.name,this._automaticDataCollectionEnabled=ve.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Cn="9.23.0";function Gn(we,W={}){let ve=we;"object"!=typeof W&&(W={name:W});const Ge=Object.assign({name:ae,automaticDataCollectionEnabled:!1},W),Qe=Ge.name;if("string"!=typeof Qe||!Qe)throw ft.create("bad-app-name",{appName:String(Qe)});if(ve||(ve=(0,J.aH)()),!ve)throw ft.create("no-options");const Et=ge.get(Qe);if(Et){if((0,J.vZ)(ve,Et.options)&&(0,J.vZ)(Ge,Et.config))return Et;throw ft.create("duplicate-app",{appName:Qe})}const on=new ee.H0(Qe);for(const j of Ie.values())on.addComponent(j);const $=new Tn(ve,Ge,on);return ge.set(Qe,$),$}function fn(we=ae){const W=ge.get(we);if(!W&&we===ae&&(0,J.aH)())return Gn();if(!W)throw ft.create("no-app",{appName:we});return W}function Er(){return Array.from(ge.values())}function ni(we){return gi.apply(this,arguments)}function gi(){return(gi=(0,_.Z)(function*(we){const W=we.name;ge.has(W)&&(ge.delete(W),yield Promise.all(we.container.getProviders().map(ve=>ve.delete())),we.isDeleted=!0)})).apply(this,arguments)}function Kn(we,W,ve){var Ge;let Qe=null!==(Ge=pe[we])&&void 0!==Ge?Ge:we;ve&&(Qe+=`-${ve}`);const Et=Qe.match(/\s|\//),on=W.match(/\s|\//);if(Et||on){const $=[`Unable to register library "${Qe}" with version "${W}":`];return Et&&$.push(`library name "${Qe}" contains illegal characters (whitespace or "/")`),Et&&on&&$.push("and"),on&&$.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void B.warn($.join(" "))}Ye(new ee.wA(`${Qe}-version`,()=>({library:Qe,version:W}),"VERSION"))}function ri(we,W){if(null!==we&&"function"!=typeof we)throw ft.create("invalid-log-argument");(0,L.Am)(we,W)}function _s(we){(0,L.Ub)(we)}const ko="firebase-heartbeat-database",bt=1,Rt="firebase-heartbeat-store";let xt=null;function yn(){return xt||(xt=(0,se.X3)(ko,bt,{upgrade:(we,W)=>{0===W&&we.createObjectStore(Rt)}}).catch(we=>{throw ft.create("idb-open",{originalErrorMessage:we.message})})),xt}function rr(){return(rr=(0,_.Z)(function*(we){try{return yield(yield yn()).transaction(Rt).objectStore(Rt).get(ys(we))}catch(W){if(W instanceof J.ZR)B.warn(W.message);else{const ve=ft.create("idb-get",{originalErrorMessage:W?.message});B.warn(ve.message)}}})).apply(this,arguments)}function pn(we,W){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(we,W){try{const Ge=(yield yn()).transaction(Rt,"readwrite");yield Ge.objectStore(Rt).put(W,ys(we)),yield Ge.done}catch(ve){if(ve instanceof J.ZR)B.warn(ve.message);else{const Ge=ft.create("idb-set",{originalErrorMessage:ve?.message});B.warn(Ge.message)}}})).apply(this,arguments)}function ys(we){return`${we.name}!${we.options.appId}`}class en{constructor(W){this.container=W,this._heartbeatsCache=null;const ve=this.container.getProvider("app").getImmediate();this._storage=new Vs(ve),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var W=this;return(0,_.Z)(function*(){const Ge=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qe=mi();if(null===W._heartbeatsCache&&(W._heartbeatsCache=yield W._heartbeatsCachePromise),W._heartbeatsCache.lastSentHeartbeatDate!==Qe&&!W._heartbeatsCache.heartbeats.some(Et=>Et.date===Qe))return W._heartbeatsCache.heartbeats.push({date:Qe,agent:Ge}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(Et=>{const on=new Date(Et.date).valueOf();return Date.now()-on<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,_.Z)(function*(){if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null===W._heartbeatsCache||0===W._heartbeatsCache.heartbeats.length)return"";const ve=mi(),{heartbeatsToSend:Ge,unsentEntries:Qe}=function vs(we,W=1024){const ve=[];let Ge=we.slice();for(const Qe of we){const Et=ve.find(on=>on.agent===Qe.agent);if(Et){if(Et.dates.push(Qe.date),Yr(ve)>W){Et.dates.pop();break}}else if(ve.push({agent:Qe.agent,dates:[Qe.date]}),Yr(ve)>W){ve.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:ve,unsentEntries:Ge}}(W._heartbeatsCache.heartbeats),Et=(0,J.L)(JSON.stringify({version:2,heartbeats:Ge}));return W._heartbeatsCache.lastSentHeartbeatDate=ve,Qe.length>0?(W._heartbeatsCache.heartbeats=Qe,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),Et})()}}function mi(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,_.Z)(function*(){return(yield W._canUseIndexedDBPromise)&&(yield function kn(we){return rr.apply(this,arguments)}(W.app))||{heartbeats:[]}})()}overwrite(W){var ve=this;return(0,_.Z)(function*(){var Ge;if(yield ve._canUseIndexedDBPromise){const Et=yield ve.read();return pn(ve.app,{lastSentHeartbeatDate:null!==(Ge=W.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Et.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var ve=this;return(0,_.Z)(function*(){var Ge;if(yield ve._canUseIndexedDBPromise){const Et=yield ve.read();return pn(ve.app,{lastSentHeartbeatDate:null!==(Ge=W.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...W.heartbeats]})}})()}}function Yr(we){return(0,J.L)(JSON.stringify({version:2,heartbeats:we})).length}!function Is(we){Ye(new ee.wA("platform-logger",W=>new _e(W),"PRIVATE")),Ye(new ee.wA("heartbeat",W=>new en(W),"PRIVATE")),Kn(xe,"0.9.13",we),Kn(xe,"0.9.13","esm2017"),Kn("fire-js","")}("")},4097:(ht,Se,O)=>{O.d(Se,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=O(7592);(0,_.registerVersion)("firebase","9.23.0","app")},120:(ht,Se,O)=>{O.d(Se,{Z:()=>_.Z});var _=O(3399);_.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(ht,Se,O)=>{O.r(Se);var _=O(5861),ee=O(3399),L=O(9058),J=O(7592),se=O(7582),_e=O(7879),ye=O(4537);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ke=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Me=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pt=new _e.Yd("@firebase/auth");function oe(I,...f){pt.logLevel<=_e.in.ERROR&&pt.error(`Auth (${J.SDK_VERSION}): ${I}`,...f)}function Te(I,...f){throw ce(I,...f)}function ie(I,...f){return ce(I,...f)}function be(I,f,m){const E=Object.assign(Object.assign({},Me()),{[f]:m});return new L.LL("auth","Firebase",E).create(f,{appName:I.name})}function Fe(I,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Te(I,"argument-error"),be(I,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ce(I,...f){if("string"!=typeof I){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=I.name),I._errorFactory.create(m,...E)}return We.create(I,...f)}function Z(I,f,...m){if(!I)throw ce(f,...m)}function $e(I){const f="INTERNAL ASSERTION FAILED: "+I;throw oe(f),new Error(f)}function yt(I,f){I||$e(f)}function sn(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function En(){return"http:"===wn()||"https:"===wn()}function wn(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class Ir{constructor(f,m){this.shortDelay=f,this.longDelay=m,yt(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Hn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(En()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ae(I,f){yt(I.emulator,"Emulator should always be set here");const{url:m}=I.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class pe{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ie=new Ir(3e4,6e4);function De(I,f){return I.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:I.tenantId}):f}function Re(I,f,m,E){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,_.Z)(function*(I,f,m,E,A={}){return ze(I,A,(0,_.Z)(function*(){let P={},H={};E&&("GET"===f?H=E:P={body:JSON.stringify(E)});const re=(0,L.xO)(Object.assign({key:I.config.apiKey},H)).slice(1),Ue=yield I._getAdditionalHeaders();return Ue["Content-Type"]="application/json",I.languageCode&&(Ue["X-Firebase-Locale"]=I.languageCode),pe.fetch()(ft(I,I.config.apiHost,m,re),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ze(I,f,m){return xn.apply(this,arguments)}function xn(){return(xn=(0,_.Z)(function*(I,f,m){I._canInitEmulator=!1;const E=Object.assign(Object.assign({},ge),f);try{const A=new Tn(I),P=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const H=yield P.json();if("needConfirmation"in H)throw Cn(I,"account-exists-with-different-credential",H);if(P.ok&&!("errorMessage"in H))return H;{const re=P.ok?H.errorMessage:H.error.message,[Ue,He]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Cn(I,"credential-already-in-use",H);if("EMAIL_EXISTS"===Ue)throw Cn(I,"email-already-in-use",H);if("USER_DISABLED"===Ue)throw Cn(I,"user-disabled",H);const ct=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw be(I,ct,He);Te(I,ct)}}catch(A){if(A instanceof L.ZR)throw A;Te(I,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function It(I,f,m,E){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,_.Z)(function*(I,f,m,E,A={}){const P=yield Re(I,f,m,E,A);return"mfaPendingCredential"in P&&Te(I,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function ft(I,f,m,E){const A=`${f}${m}?${E}`;return I.config.emulator?ae(I.config,A):`${I.config.apiScheme}://${A}`}class Tn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(ie(this.auth,"network-request-failed")),Ie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cn(I,f,m){const E={appName:I.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=ie(I,f,E);return A.customData._tokenResponse=m,A}function fn(){return(fn=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ni(){return(ni=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Kn(){return(Kn=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ri(I){if(I)try{const f=new Date(Number(I));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function bt(){return(bt=(0,_.Z)(function*(I,f=!1){const m=(0,L.m9)(I),E=yield m.getIdToken(f),A=xt(E);Z(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,H=P?.sign_in_provider;return{claims:A,token:E,authTime:ri(Rt(A.auth_time)),issuedAtTime:ri(Rt(A.iat)),expirationTime:ri(Rt(A.exp)),signInProvider:H||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Rt(I){return 1e3*Number(I)}function xt(I){const[f,m,E]=I.split(".");if(void 0===f||void 0===m||void 0===E)return oe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(m);return A?JSON.parse(A):(oe("Failed to decode base64 JWT payload"),null)}catch(A){return oe("Caught error parsing JWT payload as JSON",A?.toString()),null}}function kn(I,f){return rr.apply(this,arguments)}function rr(){return(rr=(0,_.Z)(function*(I,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof L.ZR&&function pn({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(E)&&I.auth.currentUser===I&&(yield I.auth.signOut()),E}})).apply(this,arguments)}class zn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,_.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class ys{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jt(I){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,_.Z)(function*(I){var f;const m=I.auth,E=yield I.getIdToken(),A=yield kn(I,function gi(I,f){return Kn.apply(this,arguments)}(m,{idToken:E}));Z(A?.users.length,m,"internal-error");const P=A.users[0];I._notifyReloadListener(P);const H=null!==(f=P.providerUserInfo)&&void 0!==f&&f.length?function Vs(I){return I.map(f=>{var{providerId:m}=f,E=(0,se._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],re=function vs(I,f){return[...I.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}(I.providerData,H),ct=!!I.isAnonymous&&!(I.email&&P.passwordHash||re?.length),dt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:re,metadata:new ys(P.createdAt,P.lastLoginAt),isAnonymous:ct};Object.assign(I,dt)}),Zr.apply(this,arguments)}function mi(){return(mi=(0,_.Z)(function*(I){const f=(0,L.m9)(I);yield Jt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Is(){return(Is=(0,_.Z)(function*(I,f){const m=yield ze(I,{},(0,_.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:P}=I.config,H=ft(I,A,"/v1/token",`key=${P}`),re=yield I._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",pe.fetch()(H,{method:"POST",headers:re,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class we{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Z(f.idToken,"internal-error"),Z(typeof f.idToken<"u","internal-error"),Z(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function yn(I){const f=xt(I);return Z(f,"internal-error"),Z(typeof f.exp<"u","internal-error"),Z(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,_.Z)(function*(){return Z(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,_.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:H}=yield function Yr(I,f){return Is.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(A,P,Number(H))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:A,expirationTime:P}=m,H=new we;return E&&(Z("string"==typeof E,"internal-error",{appName:f}),H.refreshToken=E),A&&(Z("string"==typeof A,"internal-error",{appName:f}),H.accessToken=A),P&&(Z("number"==typeof P,"internal-error",{appName:f}),H.expirationTime=P),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new we,this.toJSON())}_performRefresh(){return $e("not implemented")}}function W(I,f){Z("string"==typeof I||typeof I>"u","internal-error",{appName:f})}class ve{constructor(f){var{uid:m,auth:E,stsTokenManager:A}=f,P=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ys(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,_.Z)(function*(){const E=yield kn(m,m.stsTokenManager.getToken(m.auth,f));return Z(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function ko(I){return bt.apply(this,arguments)}(this,f)}reload(){return function en(I){return mi.apply(this,arguments)}(this)}_assign(f){this!==f&&(Z(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const m=new ve(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(f){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,_.Z)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield Jt(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,_.Z)(function*(){const m=yield f.getIdToken();return yield kn(f,function Gn(I,f){return fn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,A,P,H,re,Ue,He,ct;const dt=null!==(E=m.displayName)&&void 0!==E?E:void 0,qn=null!==(A=m.email)&&void 0!==A?A:void 0,cs=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Hc=null!==(H=m.photoURL)&&void 0!==H?H:void 0,Lu=null!==(re=m.tenantId)&&void 0!==re?re:void 0,Gc=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,xg=null!==(He=m.createdAt)&&void 0!==He?He:void 0,wd=null!==(ct=m.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:zc,emailVerified:ay,isAnonymous:uy,providerData:Ua,stsTokenManager:kg}=m;Z(zc&&kg,f,"internal-error");const cy=we.fromJSON(this.name,kg);Z("string"==typeof zc,f,"internal-error"),W(dt,f.name),W(qn,f.name),Z("boolean"==typeof ay,f,"internal-error"),Z("boolean"==typeof uy,f,"internal-error"),W(cs,f.name),W(Hc,f.name),W(Lu,f.name),W(Gc,f.name),W(xg,f.name),W(wd,f.name);const Fu=new ve({uid:zc,auth:f,email:qn,emailVerified:ay,displayName:dt,isAnonymous:uy,photoURL:Hc,phoneNumber:cs,tenantId:Lu,stsTokenManager:cy,createdAt:xg,lastLoginAt:wd});return Ua&&Array.isArray(Ua)&&(Fu.providerData=Ua.map(Wc=>Object.assign({},Wc))),Gc&&(Fu._redirectEventId=Gc),Fu}static _fromIdTokenResponse(f,m,E=!1){return(0,_.Z)(function*(){const A=new we;A.updateFromServerResponse(m);const P=new ve({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield Jt(P),P})()}}const Ge=new Map;function Qe(I){yt(I instanceof Function,"Expected a class definition");let f=Ge.get(I);return f?(yt(f instanceof I,"Instance stored in cache mismatched with class"),f):(f=new I,Ge.set(I,f),f)}const on=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,_.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,_.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,_.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return I.type="NONE",I})();function $(I,f,m){return`firebase:${I}:${f}:${m}`}class j{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:A,name:P}=this.auth;this.fullUserKey=$(this.userKey,A.apiKey,P),this.fullPersistenceKey=$("persistence",A.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?ve._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,_.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,_.Z)(function*(){if(!m.length)return new j(Qe(on),f,E);const A=(yield Promise.all(m.map(function(){var He=(0,_.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return He.apply(this,arguments)}}()))).filter(He=>He);let P=A[0]||Qe(on);const H=$(E,f.config.apiKey,f.name);let re=null;for(const He of m)try{const ct=yield He._get(H);if(ct){const dt=ve._fromJSON(f,ct);He!==P&&(re=dt),P=He;break}}catch{}const Ue=A.filter(He=>He._shouldAllowMigration);return P._shouldAllowMigration&&Ue.length?(P=Ue[0],re&&(yield P._set(H,re.toJSON())),yield Promise.all(m.map(function(){var He=(0,_.Z)(function*(ct){if(ct!==P)try{yield ct._remove(H)}catch{}});return function(ct){return He.apply(this,arguments)}}())),new j(P,f,E)):new j(P,f,E)})()}}function Q(I){const f=I.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ot(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ae(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Qr(f))return"Blackberry";if(Ft(f))return"Webos";if(le(f))return"Safari";if((f.includes("chrome/")||st(f))&&!f.includes("edge/"))return"Chrome";if(Nt(f))return"Android";{const E=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ae(I=(0,L.z$)()){return/firefox\//i.test(I)}function le(I=(0,L.z$)()){const f=I.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function st(I=(0,L.z$)()){return/crios\//i.test(I)}function Ot(I=(0,L.z$)()){return/iemobile/i.test(I)}function Nt(I=(0,L.z$)()){return/android/i.test(I)}function Qr(I=(0,L.z$)()){return/blackberry/i.test(I)}function Ft(I=(0,L.z$)()){return/webos/i.test(I)}function ir(I=(0,L.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function pa(I=(0,L.z$)()){return ir(I)||Nt(I)||Ft(I)||Qr(I)||/windows phone/i.test(I)||Ot(I)}function Es(I,f=[]){let m;switch(I){case"Browser":m=Q((0,L.z$)());break;case"Worker":m=`${Q((0,L.z$)())}-${I}`;break;default:m=I}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${J.SDK_VERSION}/${E}`}function ts(){return(ts=(0,_.Z)(function*(I){return(yield Re(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ns(I,f){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,_.Z)(function*(I,f){return Re(I,"GET","/v2/recaptchaConfig",De(I,f))})).apply(this,arguments)}function ao(I){return void 0!==I&&void 0!==I.getResponse}function ga(I){return void 0!==I&&void 0!==I.enterprise}class su{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function ws(I){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",I),E.onload=f,E.onerror=A=>{const P=ie("internal-error");P.customData=A,m(P)},E.type="text/javascript",E.charset="UTF-8",function bh(){var I,f;return null!==(f=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==f?f:document}().appendChild(E)})}function ma(I){return`__${I}${Math.floor(1e6*Math.random())}`}class Ol{constructor(f){this.type="recaptcha-enterprise",this.auth=sr(f)}verify(f="verify",m=!1){var E=this;return(0,_.Z)(function*(){function P(){return P=(0,_.Z)(function*(re){if(!m){if(null==re.tenantId&&null!=re._agentRecaptchaConfig)return re._agentRecaptchaConfig.siteKey;if(null!=re.tenantId&&void 0!==re._tenantRecaptchaConfigs[re.tenantId])return re._tenantRecaptchaConfigs[re.tenantId].siteKey}return new Promise(function(){var Ue=(0,_.Z)(function*(He,ct){ns(re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(dt=>{if(void 0!==dt.recaptchaKey){const qn=new su(dt);return null==re.tenantId?re._agentRecaptchaConfig=qn:re._tenantRecaptchaConfigs[re.tenantId]=qn,He(qn.siteKey)}ct(new Error("recaptcha Enterprise site key undefined"))}).catch(dt=>{ct(dt)})});return function(He,ct){return Ue.apply(this,arguments)}}())}),P.apply(this,arguments)}function H(re,Ue,He){const ct=window.grecaptcha;ga(ct)?ct.enterprise.ready(()=>{ct.enterprise.execute(re,{action:f}).then(dt=>{Ue(dt)}).catch(()=>{Ue("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((re,Ue)=>{(function A(re){return P.apply(this,arguments)})(E.auth).then(He=>{if(!m&&ga(window.grecaptcha))H(He,re,Ue);else{if(typeof window>"u")return void Ue(new Error("RecaptchaVerifier is only supported in browser"));ws("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{H(He,re,Ue)}).catch(ct=>{Ue(ct)})}}).catch(He=>{Ue(He)})})})()}}function Gi(I,f,m){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(I,f,m,E=!1){const A=new Ol(I);let P;try{P=yield A.verify(m)}catch{P=yield A.verify(m,!0)}const H=Object.assign({},f);return Object.assign(H,E?{captchaResp:P}:{captchaResponse:P}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}class uc{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=P=>new Promise((H,re)=>{try{H(f(P))}catch(Ue){re(Ue)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,_.Z)(function*(){if(m.auth.currentUser===f)return;const E=[];try{for(const A of m.queue)yield A(f),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const P of E)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Ll{constructor(f,m,E,A){this.app=f,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oo(this),this.idTokenSubscription=new Oo(this),this.beforeStateQueue=new uc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=Qe(m)),this._initializationPromise=this.queue((0,_.Z)(function*(){var A,P;if(!E._deleted&&(E.persistenceManager=yield j.create(E,f),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,_.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let P=A,H=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const re=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ue=P?._redirectEventId,He=yield m.tryRedirectSignIn(f);(!re||re===Ue)&&He?.user&&(P=He.user,H=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(H)try{yield m.beforeStateQueue.runMiddleware(P)}catch(re){P=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(re))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return Z(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,_.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,_.Z)(function*(){try{yield Jt(f)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Pn(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,_.Z)(function*(){const E=f?(0,L.m9)(f):null;return E&&Z(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,_.Z)(function*(){if(!E._deleted)return f&&Z(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,_.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,_.Z)(function*(){yield m.assertedPersistence.setPersistence(Qe(f))}))}initializeRecaptchaConfig(){var f=this;return(0,_.Z)(function*(){const m=yield ns(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new su(m);null==f.tenantId?f._agentRecaptchaConfig=E:f._tenantRecaptchaConfigs[f.tenantId]=E,E.emailPasswordEnabled&&new Ol(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,_.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,_.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&Qe(f)||m._popupRedirectResolver;Z(E,m,"argument-error"),m.redirectPersistenceManager=yield j.create(m,[Qe(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,_.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,_.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,_.Z)(function*(){if(f===m.currentUser)return m.queue((0,_.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,A){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),H=this._isInitialized?Promise.resolve():this._initializationPromise;return Z(H,this,"internal-error"),H.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,E,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,_.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Es(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();A&&(E["X-Firebase-Client"]=A);const P=yield f._getAppCheckToken();return P&&(E["X-Firebase-AppCheck"]=P),E})()}_getAppCheckToken(){var f=this;return(0,_.Z)(function*(){var m;const E=yield null===(m=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function gt(I,...f){pt.logLevel<=_e.in.WARN&&pt.warn(`Auth (${J.SDK_VERSION}): ${I}`,...f)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function sr(I){return(0,L.m9)(I)}class Oo{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ya(I){const f=I.indexOf(":");return f<0?"":I.substr(0,f+1)}function Dh(I){if(!I)return null;const f=Number(I);return isNaN(f)?null:f}class Lo{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return $e("not implemented")}_getIdTokenResponse(f){return $e("not implemented")}_linkToIdToken(f,m){return $e("not implemented")}_getReauthenticationResolver(f){return $e("not implemented")}}function Qp(I,f){return au.apply(this,arguments)}function au(){return(au=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:resetPassword",De(I,f))})).apply(this,arguments)}function Sh(I,f){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function cc(){return(cc=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:update",De(I,f))})).apply(this,arguments)}function Xr(I,f){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signInWithPassword",De(I,f))})).apply(this,arguments)}function lc(I,f){return uu.apply(this,arguments)}function uu(){return(uu=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:sendOobCode",De(I,f))})).apply(this,arguments)}function dc(){return(dc=(0,_.Z)(function*(I,f){return lc(I,f)})).apply(this,arguments)}function va(I,f){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,_.Z)(function*(I,f){return lc(I,f)})).apply(this,arguments)}function Zt(I,f){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,_.Z)(function*(I,f){return lc(I,f)})).apply(this,arguments)}function uo(){return(uo=(0,_.Z)(function*(I,f){return lc(I,f)})).apply(this,arguments)}function Bl(){return(Bl=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signInWithEmailLink",De(I,f))})).apply(this,arguments)}function cu(){return(cu=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signInWithEmailLink",De(I,f))})).apply(this,arguments)}class hc extends Lo{constructor(f,m,E,A=null){super("password",E),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new hc(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new hc(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,_.Z)(function*(){var E;switch(m.signInMethod){case"password":const A={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=f._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const P=yield Gi(f,A,"signInWithPassword");return Xr(f,P)}return Xr(f,A).catch(function(){var P=(0,_.Z)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const re=yield Gi(f,A,"signInWithPassword");return Xr(f,re)}return Promise.reject(H)});return function(H){return P.apply(this,arguments)}}());case"emailLink":return function si(I,f){return Bl.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,_.Z)(function*(){switch(E.signInMethod){case"password":return Sh(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Xp(I,f){return cu.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Wi(I,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signInWithIdp",De(I,f))})).apply(this,arguments)}class Dt extends Lo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Dt(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=m,P=(0,se._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const H=new Dt(E,A);return H.idToken=P.idToken||void 0,H.accessToken=P.accessToken||void 0,H.secret=P.secret,H.nonce=P.nonce,H.pendingToken=P.pendingToken||null,H}_getIdTokenResponse(f){return Wi(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Wi(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Wi(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,L.xO)(m)}return f}}function oi(){return(oi=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:sendVerificationCode",De(I,f))})).apply(this,arguments)}function Or(){return(Or=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signInWithPhoneNumber",De(I,f))})).apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(I,f){const m=yield It(I,"POST","/v1/accounts:signInWithPhoneNumber",De(I,f));if(m.temporaryProof)throw Cn(I,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Bs={USER_NOT_FOUND:"user-not-found"};function St(){return(St=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signInWithPhoneNumber",De(I,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Bs)})).apply(this,arguments)}class Lr extends Lo{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Lr({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Lr({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Fo(I,f){return Or.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function lu(I,f){return jn.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Ia(I,f){return St.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:P}=f;return E||m||A||P?new Lr({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:P}):null}}class Ln{constructor(f){var m,E,A,P,H,re;const Ue=(0,L.zd)((0,L.pd)(f)),He=null!==(m=Ue.apiKey)&&void 0!==m?m:null,ct=null!==(E=Ue.oobCode)&&void 0!==E?E:null,dt=function Jp(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);Z(He&&ct&&dt,"argument-error"),this.apiKey=He,this.operation=dt,this.code=ct,this.continueUrl=null!==(P=Ue.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(H=Ue.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(re=Ue.tenantId)&&void 0!==re?re:null}static parseLink(f){const m=function js(I){const f=(0,L.zd)((0,L.pd)(I)).link,m=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(I)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||m||f||I}(f);try{return new Ln(m)}catch{return null}}}let Uo=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(m,E){return hc._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Ln.parseLink(E);return Z(A,"argument-error"),hc._fromEmailAndCode(m,A.code,A.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class wr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class $s extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Hs extends $s{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return Z("providerId"in m&&"signInMethod"in m,"argument-error"),Dt._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Z(f.idToken||f.accessToken,"argument-error"),Dt._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Hs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Hs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:P,nonce:H,providerId:re}=f;if(!E&&!A&&!m&&!P||!re)return null;try{return new Hs(re)._credential({idToken:m,accessToken:E,nonce:H,pendingToken:P})}catch{return null}}}let co=(()=>{class I extends $s{constructor(){super("facebook.com")}static credential(m){return Dt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return I.credentialFromTaggedObject(m)}static credentialFromError(m){return I.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return I.credential(m.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),qi=(()=>{class I extends $s{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Dt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return I.credentialFromTaggedObject(m)}static credentialFromError(m){return I.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return I.credential(E,A)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),du=(()=>{class I extends $s{constructor(){super("github.com")}static credential(m){return Dt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return I.credentialFromTaggedObject(m)}static credentialFromError(m){return I.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return I.credential(m.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Bt extends Lo{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Wi(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Wi(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Wi(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:P}=m;return E&&A&&P&&E===A?new Bt(E,P):null}static _create(f,m){return new Bt(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ea extends wr{constructor(f){Z(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ea.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ea.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Bt.fromJSON(f);return Z(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return Bt._create(E,m)}catch{return null}}}let fc=(()=>{class I extends $s{constructor(){super("twitter.com")}static credential(m,E){return Dt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return I.credentialFromTaggedObject(m)}static credentialFromError(m){return I.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return I.credential(E,A)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function Tr(I,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signUp",De(I,f))})).apply(this,arguments)}class Cr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,A=!1){return(0,_.Z)(function*(){const P=yield ve._fromIdTokenResponse(f,E,A),H=ho(E);return new Cr({user:P,providerId:H,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=ho(E);return new Cr({user:f,providerId:A,_tokenResponse:E,operationType:m})})()}}function ho(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function eg(){return(eg=(0,_.Z)(function*(I){var f;const m=sr(I);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Cr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Tr(m,{returnSecureToken:!0}),A=yield Cr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class br extends L.ZR{constructor(f,m,E,A){var P;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,br.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,A){return new br(f,m,E,A)}}function Jr(I,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(I):m._getIdTokenResponse(I)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?br._fromErrorAndOperation(I,P,f,E):P})}function pc(I){return new Set(I.map(({providerId:f})=>f).filter(f=>!!f))}function ki(){return ki=(0,_.Z)(function*(I,f){const m=(0,L.m9)(I);yield Ta(!0,m,f);const{providerUserInfo:E}=yield function Er(I,f){return ni.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=pc(E||[]);return m.providerData=m.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ki.apply(this,arguments)}function yi(I,f){return wa.apply(this,arguments)}function wa(){return(wa=(0,_.Z)(function*(I,f,m=!1){const E=yield kn(I,f._linkToIdToken(I.auth,yield I.getIdToken()),m);return Cr._forOperation(I,"link",E)})).apply(this,arguments)}function Ta(I,f,m){return $l.apply(this,arguments)}function $l(){return($l=(0,_.Z)(function*(I,f,m){yield Jt(f);const A=!1===I?"provider-already-linked":"no-such-provider";Z(pc(f.providerData).has(m)===I,f.auth,A)})).apply(this,arguments)}function k_(I,f){return gc.apply(this,arguments)}function gc(){return(gc=(0,_.Z)(function*(I,f,m=!1){const{auth:E}=I,A="reauthenticate";try{const P=yield kn(I,Jr(E,A,f,I),m);Z(P.idToken,E,"internal-error");const H=xt(P.idToken);Z(H,E,"internal-error");const{sub:re}=H;return Z(I.uid===re,E,"user-mismatch"),Cr._forOperation(I,A,P)}catch(P){throw"auth/user-not-found"===P?.code&&Te(E,"user-mismatch"),P}})).apply(this,arguments)}function Hl(I,f){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,_.Z)(function*(I,f,m=!1){const E="signIn",A=yield Jr(I,E,f),P=yield Cr._fromIdTokenResponse(I,E,A);return m||(yield I._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Gl(I,f){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,_.Z)(function*(I,f){return Hl(sr(I),f)})).apply(this,arguments)}function M_(I,f){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,_.Z)(function*(I,f){const m=(0,L.m9)(I);return yield Ta(!1,m,f.providerId),yi(m,f)})).apply(this,arguments)}function O_(I,f){return tg.apply(this,arguments)}function tg(){return(tg=(0,_.Z)(function*(I,f){return k_((0,L.m9)(I),f)})).apply(this,arguments)}function ng(){return(ng=(0,_.Z)(function*(I,f){return It(I,"POST","/v1/accounts:signInWithCustomToken",De(I,f))})).apply(this,arguments)}function Gs(){return Gs=(0,_.Z)(function*(I,f){const m=sr(I),E=yield function QI(I,f){return ng.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),A=yield Cr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A}),Gs.apply(this,arguments)}class zl{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ca._fromServerResponse(f,m):"totpInfo"in m?Wl._fromServerResponse(f,m):Te(f,"internal-error")}}class Ca extends zl{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ca(m)}}class Wl extends zl{constructor(f){super("totp",f)}static _fromServerResponse(f,m){return new Wl(m)}}function hu(I,f,m){var E;Z((null===(E=m.url)||void 0===E?void 0:E.length)>0,I,"invalid-continue-uri"),Z(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Z(m.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(Z(m.android.packageName.length>0,I,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function fu(){return fu=(0,_.Z)(function*(I,f,m){var E;const A=sr(I),P={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const H=yield Gi(A,P,"getOobCode",!0);m&&hu(A,H,m),yield va(A,H)}else m&&hu(A,P,m),yield va(A,P).catch(function(){var H=(0,_.Z)(function*(re){if("auth/missing-recaptcha-token"!==re.code)return Promise.reject(re);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ue=yield Gi(A,P,"getOobCode",!0);m&&hu(A,Ue,m),yield va(A,Ue)}});return function(re){return H.apply(this,arguments)}}())}),fu.apply(this,arguments)}function Ts(){return(Ts=(0,_.Z)(function*(I,f,m){yield Qp((0,L.m9)(I),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ki(){return Ki=(0,_.Z)(function*(I,f){yield function zi(I,f){return cc.apply(this,arguments)}((0,L.m9)(I),{oobCode:f})}),Ki.apply(this,arguments)}function pr(I,f){return $o.apply(this,arguments)}function $o(){return($o=(0,_.Z)(function*(I,f){const m=(0,L.m9)(I),E=yield Qp(m,{oobCode:f}),A=E.requestType;switch(Z(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(E.mfaInfo,m,"internal-error");default:Z(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=zl._fromServerResponse(sr(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function Ho(){return(Ho=(0,_.Z)(function*(I,f){const{data:m}=yield pr((0,L.m9)(I),f);return m.email})).apply(this,arguments)}function pu(){return pu=(0,_.Z)(function*(I,f,m){var E;const A=sr(I),P={returnSecureToken:!0,email:f,password:m,clientType:"CLIENT_TYPE_WEB"};let H;if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const He=yield Gi(A,P,"signUpPassword");H=Tr(A,He)}else H=Tr(A,P).catch(function(){var He=(0,_.Z)(function*(ct){if("auth/missing-recaptcha-token"===ct.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const dt=yield Gi(A,P,"signUpPassword");return Tr(A,dt)}return Promise.reject(ct)});return function(ct){return He.apply(this,arguments)}}());const re=yield H.catch(He=>Promise.reject(He)),Ue=yield Cr._fromIdTokenResponse(A,"signIn",re);return yield A._updateCurrentUser(Ue.user),Ue}),pu.apply(this,arguments)}function gu(){return gu=(0,_.Z)(function*(I,f,m){var E;const A=sr(I),P={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function H(re,Ue){Z(Ue.handleCodeInApp,A,"argument-error"),Ue&&hu(A,re,Ue)}if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const re=yield Gi(A,P,"getOobCode",!0);H(re,m),yield Zt(A,re)}else H(P,m),yield Zt(A,P).catch(function(){var re=(0,_.Z)(function*(Ue){if("auth/missing-recaptcha-token"!==Ue.code)return Promise.reject(Ue);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield Gi(A,P,"getOobCode",!0);H(He,m),yield Zt(A,He)}});return function(Ue){return re.apply(this,arguments)}}())}),gu.apply(this,arguments)}function Kl(){return(Kl=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I),A=Uo.credentialWithLink(f,m||sn());return Z(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Gl(E,A)})).apply(this,arguments)}function Yl(){return(Yl=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:createAuthUri",De(I,f))})).apply(this,arguments)}function Go(){return Go=(0,_.Z)(function*(I,f){const E={identifier:f,continueUri:En()?sn():"http://localhost"},{signinMethods:A}=yield function Zl(I,f){return Yl.apply(this,arguments)}((0,L.m9)(I),E);return A||[]}),Go.apply(this,arguments)}function _u(){return _u=(0,_.Z)(function*(I,f){const m=(0,L.m9)(I),A={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};f&&hu(m.auth,A,f);const{email:P}=yield function Rh(I,f){return dc.apply(this,arguments)}(m.auth,A);P!==I.email&&(yield I.reload())}),_u.apply(this,arguments)}function mc(){return mc=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:f};m&&hu(E.auth,P,m);const{email:H}=yield function ii(I,f){return uo.apply(this,arguments)}(E.auth,P);H!==I.email&&(yield I.reload())}),mc.apply(this,arguments)}function Fh(){return(Fh=(0,_.Z)(function*(I,f){return Re(I,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ql(){return Ql=(0,_.Z)(function*(I,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,L.m9)(I),P={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},H=yield kn(E,function L_(I,f){return Fh.apply(this,arguments)}(E.auth,P));E.displayName=H.displayName||null,E.photoURL=H.photoUrl||null;const re=E.providerData.find(({providerId:Ue})=>"password"===Ue);re&&(re.displayName=E.displayName,re.photoURL=E.photoURL),yield E._updateTokensIfNecessary(H)}),Ql.apply(this,arguments)}function rg(I,f,m){return Da.apply(this,arguments)}function Da(){return(Da=(0,_.Z)(function*(I,f,m){const{auth:E}=I,P={idToken:yield I.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const H=yield kn(I,Sh(E,P));yield I._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Sa{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class yu extends Sa{constructor(f,m,E,A){super(f,m,E),this.username=A}}class Xl extends Sa{constructor(f,m){super(f,"facebook.com",m)}}class Vh extends yu{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class yc extends Sa{constructor(f,m){super(f,"google.com",m)}}class vu extends yu{constructor(f,m,E){super(f,"twitter.com",m,E)}}function ig(I){const{user:f,_tokenResponse:m}=I;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function U_(I){var f,m;if(!I)return null;const{providerId:E}=I,A=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},P=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!E&&I?.idToken){const H=null===(m=null===(f=xt(I.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(H)return new Sa(P,"anonymous"!==H&&"custom"!==H?H:null)}if(!E)return null;switch(E){case"facebook.com":return new Xl(P,A);case"github.com":return new Vh(P,A);case"google.com":return new yc(P,A);case"twitter.com":return new vu(P,A,I.screenName||null);case"custom":case"anonymous":return new Sa(P,null);default:return new Sa(P,E,A)}}(m)}class Cs{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new Cs("enroll",f,m)}static _fromMfaPendingCredential(f){return new Cs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Cs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return Cs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Wo{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=sr(f),A=m.customData._serverResponse,P=(A.mfaInfo||[]).map(re=>zl._fromServerResponse(E,re));Z(A.mfaPendingCredential,E,"internal-error");const H=Cs._fromMfaPendingCredential(A.mfaPendingCredential);return new Wo(H,P,function(){var re=(0,_.Z)(function*(Ue){const He=yield Ue._process(E,H);delete A.mfaInfo,delete A.mfaPendingCredential;const ct=Object.assign(Object.assign({},A),{idToken:He.idToken,refreshToken:He.refreshToken});switch(m.operationType){case"signIn":const dt=yield Cr._fromIdTokenResponse(E,m.operationType,ct);return yield E._updateCurrentUser(dt.user),dt;case"reauthenticate":return Z(m.user,E,"internal-error"),Cr._forOperation(m.user,m.operationType,ct);default:Te(E,"internal-error")}});return function(Ue){return re.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,_.Z)(function*(){return m.signInResolver(f)})()}}class gn{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>zl._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new gn(f)}getSession(){var f=this;return(0,_.Z)(function*(){return Cs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,_.Z)(function*(){const A=f,P=yield E.getSession(),H=yield kn(E.user,A._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(H),E.user.reload()})()}unenroll(f){var m=this;return(0,_.Z)(function*(){const E="string"==typeof f?f:f.uid,A=yield m.user.getIdToken();try{const P=yield kn(m.user,function $h(I,f){return Re(I,"POST","/v2/accounts/mfaEnrollment:withdraw",De(I,f))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:H})=>H!==E),yield m.user._updateTokensIfNecessary(P),yield m.user.reload()}catch(P){throw P}})()}}const qo=new WeakMap,Ur="__sak";class cg{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ur,"1"),this.storage.removeItem(Ur),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Aa=(()=>{class I extends cg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nd(){const I=(0,L.z$)();return le(I)||ir(I)}()&&function kl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pa(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),P=this.localCache[E];A!==P&&m(E,P,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((re,Ue,He)=>{this.notifyListeners(re,He)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(A);if(m.newValue!==re)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const P=()=>{const re=this.storage.getItem(A);!E&&this.localCache[A]===re||this.notifyListeners(A,re)},H=this.storage.getItem(A);!function so(){return(0,L.w1)()&&10===document.documentMode}()||H===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,P=this;return(0,_.Z)(function*(){yield A().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,_.Z)(function*(){const P=yield E().call(A,m);return A.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,A=this;return(0,_.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return I.type="LOCAL",I})(),Ii=(()=>{class I extends cg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return I.type="SESSION",I})();let rd=(()=>{class I{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const A=new I(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,_.Z)(function*(){const A=m,{eventId:P,eventType:H,data:re}=A.data,Ue=E.handlersMap[H];if(!Ue?.size)return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:H});const He=Array.from(Ue).map(function(){var dt=(0,_.Z)(function*(qn){return qn(A.origin,re)});return function(qn){return dt.apply(this,arguments)}}()),ct=yield function hg(I){return Promise.all(I.map(function(){var f=(0,_.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(He);A.ports[0].postMessage({status:"done",eventId:P,eventType:H,response:ct})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function Ic(I="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return I+m}class B_{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var A=this;return(0,_.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let H,re;return new Promise((Ue,He)=>{const ct=Ic("",20);P.port1.start();const dt=setTimeout(()=>{He(new Error("unsupported_event"))},E);re={messageChannel:P,onMessage(qn){const cs=qn;if(cs.data.eventId===ct)switch(cs.data.status){case"ack":clearTimeout(dt),H=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Ue(cs.data.response);break;default:clearTimeout(dt),clearTimeout(H),He(new Error("invalid_response"))}}},A.handlers.add(re),P.port1.addEventListener("message",re.onMessage),A.target.postMessage({eventType:f,eventId:ct,data:m},[P.port2])}).finally(()=>{re&&A.removeMessageHandler(re)})})()}}function Sn(){return window}function At(){return typeof Sn().WorkerGlobalScope<"u"&&"function"==typeof Sn().importScripts}function Gh(){return(Gh=(0,_.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zh="firebaseLocalStorageDb",bs="firebaseLocalStorage",id="fbase_key";class wc{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Tc(I,f){return I.transaction([bs],f?"readwrite":"readonly").objectStore(bs)}function sd(){const I=indexedDB.open(zh,1);return new Promise((f,m)=>{I.addEventListener("error",()=>{m(I.error)}),I.addEventListener("upgradeneeded",()=>{const E=I.result;try{E.createObjectStore(bs,{keyPath:id})}catch(A){m(A)}}),I.addEventListener("success",(0,_.Z)(function*(){const E=I.result;E.objectStoreNames.contains(bs)?f(E):(E.close(),yield function $_(){const I=indexedDB.deleteDatabase(zh);return new wc(I).toPromise()}(),f(yield sd()))}))})}function Pe(I,f,m){return zt.apply(this,arguments)}function zt(){return(zt=(0,_.Z)(function*(I,f,m){const E=Tc(I,!0).put({[id]:f,value:m});return new wc(E).toPromise()})).apply(this,arguments)}function Cc(){return(Cc=(0,_.Z)(function*(I,f){const m=Tc(I,!1).get(f),E=yield new wc(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ar(I,f){const m=Tc(I,!0).delete(f);return new wc(m).toPromise()}const Yo=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,_.Z)(function*(){return m.db||(m.db=yield sd()),m.db})()}_withRetries(m){var E=this;return(0,_.Z)(function*(){let A=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(A++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,_.Z)(function*(){return At()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,_.Z)(function*(){m.receiver=rd._getInstance(function Sr(){return At()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,_.Z)(function*(A,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(A,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,_.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,_.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function Hh(){return Gh.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new B_(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(A=P[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,_.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ec(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const m=yield sd();return yield Pe(m,Ur,"1"),yield Ar(m,Ur),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,_.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,_.Z)(function*(){return A._withPendingWrite((0,_.Z)(function*(){return yield A._withRetries(P=>Pe(P,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,_.Z)(function*(){const A=yield E._withRetries(P=>function is(I,f){return Cc.apply(this,arguments)}(P,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,_.Z)(function*(){return E._withPendingWrite((0,_.Z)(function*(){return yield E._withRetries(A=>Ar(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,_.Z)(function*(){const E=yield m._withRetries(H=>{const re=Tc(H,!1).getAll();return new wc(re).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:H,value:re}of E)P.add(H),JSON.stringify(m.localCache[H])!==JSON.stringify(re)&&(m.notifyListeners(H,re),A.push(H));for(const H of Object.keys(m.localCache))m.localCache[H]&&!P.has(H)&&(m.notifyListeners(H,null),A.push(H));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),Mi=1e12;class Wh{constructor(f){this.auth=f,this.counter=Mi,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Qo(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||Mi;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Mi))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,_.Z)(function*(){var E;return null===(E=m._widgets.get(f||Mi))||void 0===E||E.execute(),""})()}}class Qo{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;Z(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function go(I){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<I;E++)f.push(m.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qh=ma("rcb"),Kh=new Ir(3e4,6e4);class H_{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Sn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return Z(function Sc(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(m),f,"argument-error"),this.shouldResolveImmediately(m)&&ao(Sn().grecaptcha)?Promise.resolve(Sn().grecaptcha):new Promise((E,A)=>{const P=Sn().setTimeout(()=>{A(ie(f,"network-request-failed"))},Kh.get());Sn()[qh]=()=>{Sn().clearTimeout(P),delete Sn()[qh];const re=Sn().grecaptcha;if(!re||!ao(re))return void A(ie(f,"internal-error"));const Ue=re.render;re.render=(He,ct)=>{const dt=Ue(He,ct);return this.counter++,dt},this.hostLanguage=m,E(re)},ws(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:qh,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),A(ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Sn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zh{load(f){return(0,_.Z)(function*(){return new Wh(f)})()}clearedOneInstance(){}}const Ac="recaptcha",Yh={theme:"light",type:"image"};class Qh{constructor(f,m=Object.assign({},Yh),E){this.parameters=m,this.type=Ac,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sr(E),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;Z(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zh:new H_,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const H=re=>{re&&(f.tokenChangeListeners.delete(H),P(re))};f.tokenChangeListeners.add(H),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=Sn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){Z(En()&&!At(),f.auth,"internal-error"),yield function pg(){let I=null;return new Promise(f=>{"complete"!==document.readyState?(I=()=>f(),window.addEventListener("load",I)):f()}).catch(f=>{throw I&&window.removeEventListener("load",I),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function oo(I){return ts.apply(this,arguments)}(f.auth);Z(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class An{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Lr._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function vt(){return(vt=(0,_.Z)(function*(I,f,m){const E=sr(I),A=yield Un(E,f,(0,L.m9)(m));return new An(A,P=>Gl(E,P))})).apply(this,arguments)}function mn(){return(mn=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I);yield Ta(!1,E,"phone");const A=yield Un(E.auth,f,(0,L.m9)(m));return new An(A,P=>M_(E,P))})).apply(this,arguments)}function Jo(){return(Jo=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I),A=yield Un(E.auth,f,(0,L.m9)(m));return new An(A,P=>O_(E,P))})).apply(this,arguments)}function Un(I,f,m){return mt.apply(this,arguments)}function mt(){return mt=(0,_.Z)(function*(I,f,m){var E;const A=yield m.verify();try{let P;if(Z("string"==typeof A,I,"argument-error"),Z(m.type===Ac,I,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const H=P.session;if("phoneNumber"in P)return Z("enroll"===H.type,I,"internal-error"),(yield function Eu(I,f){return Re(I,"POST","/v2/accounts/mfaEnrollment:start",De(I,f))}(I,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Z("signin"===H.type,I,"internal-error");const re=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return Z(re,I,"missing-multi-factor-info"),(yield function od(I,f){return Re(I,"POST","/v2/accounts/mfaSignIn:start",De(I,f))}(I,{mfaPendingCredential:H.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function On(I,f){return oi.apply(this,arguments)}(I,{phoneNumber:P.phoneNumber,recaptchaToken:A});return H}}finally{m._reset()}}),mt.apply(this,arguments)}function Rn(){return(Rn=(0,_.Z)(function*(I,f){yield yi((0,L.m9)(I),f)})).apply(this,arguments)}let mo=(()=>{class I{constructor(m){this.providerId=I.PROVIDER_ID,this.auth=sr(m)}verifyPhoneNumber(m,E){return Un(this.auth,m,(0,L.m9)(E))}static credential(m,E){return Lr._fromVerification(m,E)}static credentialFromResult(m){return I.credentialFromTaggedObject(m)}static credentialFromError(m){return I.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?Lr._fromTokenResponse(E,A):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function _o(I,f){return f?Qe(f):(Z(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Zi extends Lo{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Wi(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Wi(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Wi(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function wu(I){return Hl(I.auth,new Zi(I),I.bypassAuthState)}function Rr(I){const{auth:f,user:m}=I;return Z(m,f,"internal-error"),k_(m,new Zi(I),I.bypassAuthState)}function or(I){return jr.apply(this,arguments)}function jr(){return(jr=(0,_.Z)(function*(I){const{auth:f,user:m}=I;return Z(m,f,"internal-error"),yi(m,new Zi(I),I.bypassAuthState)})).apply(this,arguments)}class $r{constructor(f,m,E,A,P=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,_.Z)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,_.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:P,tenantId:H,error:re,type:Ue}=f;if(re)return void m.reject(re);const He={auth:m.auth,requestUri:E,sessionId:A,tenantId:H||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(He))}catch(ct){m.reject(ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return wu;case"linkViaPopup":case"linkViaRedirect":return or;case"reauthViaPopup":case"reauthViaRedirect":return Rr;default:Te(this.auth,"internal-error")}}resolve(f){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ai=new Ir(2e3,1e4);function Na(){return(Na=(0,_.Z)(function*(I,f,m){const E=sr(I);Fe(I,f,wr);const A=_o(E,m);return new Nc(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function qs(){return(qs=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I);Fe(E.auth,f,wr);const A=_o(E.auth,m);return new Nc(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function vo(){return(vo=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I);Fe(E.auth,f,wr);const A=_o(E.auth,m);return new Nc(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let Nc=(()=>{class I extends $r{constructor(m,E,A,P,H){super(m,E,P,H),this.provider=A,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var m=this;return(0,_.Z)(function*(){const E=yield m.execute();return Z(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,_.Z)(function*(){yt(1===m.filter.length,"Popup operations only handle one event");const E=Ic();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ai.get())};m()}}return I.currentPopupAction=null,I})();const Ss="pendingRedirect",Ht=new Map;class gg extends $r{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,_.Z)(function*(){let E=Ht.get(m.auth._key());if(!E){try{const P=(yield function Tu(I,f){return Pc.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(P)}catch(A){E=()=>Promise.reject(A)}Ht.set(m.auth._key(),E)}return m.bypassAuthState||Ht.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Pc(){return(Pc=(0,_.Z)(function*(I,f){const m=Cu(f),E=eE(I);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function G_(I,f){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,_.Z)(function*(I,f){return eE(I)._set(Cu(f),"true")})).apply(this,arguments)}function mg(I,f){Ht.set(I._key(),f)}function eE(I){return Qe(I._redirectPersistence)}function Cu(I){return $(Ss,I.config.apiKey,I.name)}function Pa(I,f,m){return function z_(I,f,m){return xa.apply(this,arguments)}(I,f,m)}function xa(){return(xa=(0,_.Z)(function*(I,f,m){const E=sr(I);Fe(I,f,wr),yield E._initializationPromise;const A=_o(E,m);return yield G_(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function ef(I,f,m){return function ud(I,f,m){return _g.apply(this,arguments)}(I,f,m)}function _g(){return(_g=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I);Fe(E.auth,f,wr),yield E.auth._initializationPromise;const A=_o(E.auth,m);yield G_(A,E.auth);const P=yield gr(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function yg(I,f,m){return function W_(I,f,m){return tf.apply(this,arguments)}(I,f,m)}function tf(){return(tf=(0,_.Z)(function*(I,f,m){const E=(0,L.m9)(I);Fe(E.auth,f,wr),yield E.auth._initializationPromise;const A=_o(E.auth,m);yield Ta(!1,E,f.providerId),yield G_(A,E.auth);const P=yield gr(E);return A._openRedirect(E.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(I,f){return yield sr(I)._initializationPromise,ar(I,f,!1)})).apply(this,arguments)}function ar(I,f){return M.apply(this,arguments)}function M(){return(M=(0,_.Z)(function*(I,f,m=!1){const E=sr(I),A=_o(E,f),H=yield new gg(E,A,m).execute();return H&&!m&&(delete H.user._redirectEventId,yield E._persistUserIfCurrent(H.user),yield E._setRedirectUser(null,f)),H})).apply(this,arguments)}function gr(I){return As.apply(this,arguments)}function As(){return(As=(0,_.Z)(function*(I){const f=Ic(`${I.uid}:::`);return I._redirectEventId=f,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),f})).apply(this,arguments)}class xc{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ea(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bu(I);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!bu(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(ie(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bn(f))}saveEventToCache(f){this.cachedEventUids.add(bn(f)),this.lastProcessedEventTime=Date.now()}}function bn(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(f=>f).join("-")}function bu({type:I,error:f}){return"unknown"===I&&"auth/no-auth-event"===f?.code}function kc(I){return nf.apply(this,arguments)}function nf(){return(nf=(0,_.Z)(function*(I,f={}){return Re(I,"GET","/v1/projects",f)})).apply(this,arguments)}const cd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ta=/^https?/;function Ks(){return(Ks=(0,_.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:f}=yield kc(I);for(const m of f)try{if(ld(m))return}catch{}Te(I,"unauthorized-domain")})).apply(this,arguments)}function ld(I){const f=sn(),{protocol:m,hostname:E}=new URL(f);if(I.startsWith("chrome-extension://")){const H=new URL(I);return""===H.hostname&&""===E?"chrome-extension:"===m&&I.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&H.hostname===E}if(!ta.test(m))return!1;if(cd.test(I))return E===I;const A=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Du=new Ir(3e4,6e4);function sf(){const I=Sn().___jsl;if(I?.H)for(const f of Object.keys(I.H))if(I.H[f].r=I.H[f].r||[],I.H[f].L=I.H[f].L||[],I.H[f].r=[...I.H[f].L],I.CP)for(let m=0;m<I.CP.length;m++)I.CP[m]=null}let na=null;const Su=new Ir(5e3,15e3),dd="__/auth/iframe",Ma="emulator/auth/iframe",Au={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ru(I){const f=I.config;Z(f.authDomain,I,"auth-domain-config-required");const m=f.emulator?ae(f,Ma):`https://${I.config.authDomain}/${dd}`,E={apiKey:f.apiKey,appName:I.name,v:J.SDK_VERSION},A=Oa.get(I.config.apiHost);A&&(E.eid=A);const P=I._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,L.xO)(E).slice(1)}`}function D(){return D=(0,_.Z)(function*(I){const f=yield function Rs(I){return na=na||function Wt(I){return new Promise((f,m)=>{var E,A,P;function H(){sf(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{sf(),m(ie(I,"network-request-failed"))},timeout:Du.get()})}if(null!==(A=null===(E=Sn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(P=Sn().gapi)||void 0===P||!P.load){const re=ma("iframefcb");return Sn()[re]=()=>{gapi.load?H():m(ie(I,"network-request-failed"))},ws(`https://apis.google.com/js/api.js?onload=${re}`).catch(Ue=>m(Ue))}H()}}).catch(f=>{throw na=null,f})}(I),na}(I),m=Sn().gapi;return Z(m,I,"internal-error"),f.open({where:document.body,url:Ru(I),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Au,dontclear:!0},E=>new Promise(function(){var A=(0,_.Z)(function*(P,H){yield E.restyle({setHideOnLeave:!1});const re=ie(I,"network-request-failed"),Ue=Sn().setTimeout(()=>{H(re)},Su.get());function He(){Sn().clearTimeout(Ue),P(E)}E.ping(He).then(He,()=>{H(re)})});return function(P,H){return A.apply(this,arguments)}}()))}),D.apply(this,arguments)}const N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xe{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const kt="__/auth/handler",Mt="emulator/auth/handler",mr=encodeURIComponent("fac");function ur(I,f,m,E,A,P){return Io.apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(I,f,m,E,A,P){Z(I.config.authDomain,I,"auth-domain-config-required"),Z(I.config.apiKey,I,"invalid-api-key");const H={apiKey:I.config.apiKey,appName:I.name,authType:m,redirectUrl:E,v:J.SDK_VERSION,eventId:A};if(f instanceof wr){f.setDefaultLanguage(I.languageCode),H.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(H.customParameters=JSON.stringify(f.getCustomParameters()));for(const[ct,dt]of Object.entries(P||{}))H[ct]=dt}if(f instanceof $s){const ct=f.getScopes().filter(dt=>""!==dt);ct.length>0&&(H.scopes=ct.join(","))}I.tenantId&&(H.tid=I.tenantId);const re=H;for(const ct of Object.keys(re))void 0===re[ct]&&delete re[ct];const Ue=yield I._getAppCheckToken(),He=Ue?`#${mr}=${encodeURIComponent(Ue)}`:"";return`${function Wn({config:I}){return I.emulator?ae(I,Mt):`https://${I.authDomain}/${kt}`}(I)}?${(0,L.xO)(re).slice(1)}${He}`})).apply(this,arguments)}const os="webStorageSupport",as=class ui{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ii,this._completeRedirectFn=ar,this._overrideRedirectResult=mg}_openPopup(f,m,E,A){var P=this;return(0,_.Z)(function*(){var H;yt(null===(H=P.eventManagers[f._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const re=yield ur(f,m,E,sn(),A);return function qe(I,f,m,E=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),H=Math.max((window.screen.availWidth-E)/2,0).toString();let re="";const Ue=Object.assign(Object.assign({},N),{width:E.toString(),height:A.toString(),top:P,left:H}),He=(0,L.z$)().toLowerCase();m&&(re=st(He)?"_blank":m),Ae(He)&&(f=f||"http://localhost",Ue.scrollbars="yes");const ct=Object.entries(Ue).reduce((qn,[cs,Hc])=>`${qn}${cs}=${Hc},`,"");if(function Mr(I=(0,L.z$)()){var f;return ir(I)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(He)&&"_self"!==re)return function _t(I,f){const m=document.createElement("a");m.href=I,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",re),new Xe(null);const dt=window.open(f||"",re,ct);Z(dt,I,"popup-blocked");try{dt.focus()}catch{}return new Xe(dt)}(f,re,Ic())})()}_openRedirect(f,m,E,A){var P=this;return(0,_.Z)(function*(){return yield P._originValidation(f),function j_(I){Sn().location.href=I}(yield ur(f,m,E,sn(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:P}=this.eventManagers[m];return A?Promise.resolve(A):(yt(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,_.Z)(function*(){const E=yield function T(I){return D.apply(this,arguments)}(f),A=new xc(f);return E.register("authEvent",P=>(Z(P?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(os,{type:os},A=>{var P;const H=null===(P=A?.[0])||void 0===P?void 0:P[os];void 0!==H&&m(!!H),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function rf(I){return Ks.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return pa()||le()||ir()}};class ci{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return $e("unexpected MultiFactorSessionType")}}}class La extends ci{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new La(f)}_finalizeEnroll(f,m,E){return function ug(I,f){return Re(I,"POST","/v2/accounts/mfaEnrollment:finalize",De(I,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function fg(I,f){return Re(I,"POST","/v2/accounts/mfaSignIn:finalize",De(I,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let af=(()=>{class I{constructor(){}static assertion(m){return La._fromCredential(m)}}return I.FACTOR_ID="phone",I})();var q_="@firebase/auth";class wi{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,_.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fa(){return window}(0,L.Pz)("authIdTokenMaxAge"),function Nu(I){(0,J._registerComponent)(new ye.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),P=f.getProvider("app-check-internal"),{apiKey:H,authDomain:re}=E.options;Z(H&&!H.includes(":"),"invalid-api-key",{appName:E.name});const Ue={apiKey:H,authDomain:re,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Es(I)},He=new Ll(E,A,P,Ue);return function Yp(I,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(Qe);f?.errorMap&&I._updateErrorMap(f.errorMap),I._initializeWithPersistence(E,f?.popupRedirectResolver)}(He,m),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new ye.wA("auth-internal",f=>{const m=sr(f.getProvider("auth").getImmediate());return new wi(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(q_,"0.23.2",function fd(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,J.registerVersion)(q_,"0.23.2","esm2017")}("Browser");function pd(){return pd=(0,_.Z)(function*(I,f,m){var E;const{BuildInfo:A}=Fa();yt(f.sessionId,"AuthEvent did not contain a session ID");const P=yield function Q_(I){return gd.apply(this,arguments)}(f.sessionId),H={};return ir()?H.ibi=A.packageName:Nt()?H.apn=A.packageName:Te(I,"operation-not-supported-in-this-environment"),A.displayName&&(H.appDisplayName=A.displayName),H.sessionId=P,ur(I,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,H)}),pd.apply(this,arguments)}function Ig(){return(Ig=(0,_.Z)(function*(I){const{BuildInfo:f}=Fa(),m={};ir()?m.iosBundleId=f.packageName:Nt()?m.androidPackageName=f.packageName:Te(I,"operation-not-supported-in-this-environment"),yield kc(I,m)})).apply(this,arguments)}function Oc(){return(Oc=(0,_.Z)(function*(I,f,m){const{cordova:E}=Fa();let A=()=>{};try{yield new Promise((P,H)=>{let re=null;function Ue(){var dt;P();const qn=null===(dt=E.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof qn&&qn(),"function"==typeof m?.close&&m.close()}function He(){re||(re=window.setTimeout(()=>{H(ie(I,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===document?.visibilityState&&He()}f.addPassiveListener(Ue),document.addEventListener("resume",He,!1),Nt()&&document.addEventListener("visibilitychange",ct,!1),A=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",ct,!1),re&&window.clearTimeout(re)}})}finally{A()}})).apply(this,arguments)}function gd(){return(gd=(0,_.Z)(function*(I){const f=function Pu(I){if(yt(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const f=new ArrayBuffer(I.length),m=new Uint8Array(f);for(let E=0;E<I.length;E++)m[E]=I.charCodeAt(E);return m}(I),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class X_ extends xc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function Fc(I){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,_.Z)(function*(I){const f=yield ff()._get(bg(I));return f&&(yield ff()._remove(bg(I))),f})).apply(this,arguments)}function Cg(){const I=[];for(let m=0;m<20;m++){const E=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return I.join("")}function ff(){return Qe(Aa)}function bg(I){return $("authEvent",I.config.apiKey,I.name)}function pf(I){if(!I?.includes("?"))return{};const[f,...m]=I.split("?");return(0,L.zd)(m.join("?"))}const Sg=class sE{constructor(){this._redirectPersistence=Ii,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ar,this._overrideRedirectResult=mg}_initialize(f){var m=this;return(0,_.Z)(function*(){const E=f._key();let A=m.eventManagers.get(E);return A||(A=new X_(f),m.eventManagers.set(E,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,A){var P=this;return(0,_.Z)(function*(){!function rE(I){var f,m,E,A,P,H,re,Ue,He,ct;const dt=Fa();Z("function"==typeof(null===(f=dt?.universalLinks)||void 0===f?void 0:f.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Z(typeof(null===(m=dt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Z("function"==typeof(null===(P=null===(A=null===(E=dt?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===P?void 0:P.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(Ue=null===(re=null===(H=dt?.cordova)||void 0===H?void 0:H.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ue?void 0:Ue.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(ct=null===(He=dt?.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===ct?void 0:ct.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const H=yield P._initialize(f);yield H.initialized(),H.resetRedirect(),function Jh(){Ht.clear()}(),yield P._originValidation(f);const re=function wg(I,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Cg(),postBody:null,tenantId:I.tenantId,error:ie(I,"no-auth-event")}}(f,E,A);yield function Lc(I,f){return ff()._set(bg(I),f)}(f,re);const Ue=yield function Y_(I,f,m){return pd.apply(this,arguments)}(f,re,m),He=yield function hf(I){const{cordova:f}=Fa();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let A=null;E?f.plugins.browsertab.openUrl(I):A=f.InAppBrowser.open(I,function tn(I=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),m(A)})})}(Ue);return function nE(I,f,m){return Oc.apply(this,arguments)}(f,H,He)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function df(I){return Ig.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:P}=Fa(),H=setTimeout((0,_.Z)(function*(){yield Fc(f),m.onEvent(ey())}),500),re=function(){var ct=(0,_.Z)(function*(dt){clearTimeout(H);const qn=yield Fc(f);let cs=null;qn&&dt?.url&&(cs=function iE(I,f){var m,E;const A=function ib(I){const f=pf(I),m=f.link?decodeURIComponent(f.link):void 0,E=pf(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return pf(A).link||A||E||m||I}(f);if(A.includes("/__/auth/callback")){const P=pf(A),H=P.firebaseError?function J_(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,re=null===(E=null===(m=H?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ue=re?ie(re):null;return Ue?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:A,postBody:null}}return null}(qn,dt.url)),m.onEvent(cs||ey())});return function(qn){return ct.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,re);const Ue=A,He=`${P.packageName.toLowerCase()}://`;Fa().handleOpenURL=function(){var ct=(0,_.Z)(function*(dt){if(dt.toLowerCase().startsWith(He)&&re({url:dt}),"function"==typeof Ue)try{Ue(dt)}catch(qn){console.error(qn)}});return function(dt){return ct.apply(this,arguments)}}()}};function ey(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ie("no-auth-event")}}function Uc(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function _d(I=(0,L.z$)()){return!("file:"!==Uc()&&"ionic:"!==Uc()&&"capacitor:"!==Uc()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function ob(){try{const I=self.localStorage,f=Ic();if(I)return I.setItem(f,"1"),I.removeItem(f),!function sb(I=(0,L.z$)()){return function yd(){return(0,L.w1)()&&11===document?.documentMode}()||function LN(I=(0,L.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,L.hl)()}catch{return ny()&&(0,L.hl)()}return!1}function ny(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ry(){return(function md(){return"http:"===Uc()||"https:"===Uc()}()||(0,L.ru)()||_d())&&!function ON(){return(0,L.b$)()||(0,L.UG)()}()&&ob()&&!ny()}function uE(){return _d()&&typeof document<"u"}function Vc(){return(Vc=(0,_.Z)(function*(){return!!uE()&&new Promise(I=>{const f=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),I(!0)})})})).apply(this,arguments)}const us={LOCAL:"local",NONE:"none",SESSION:"session"},vd=Z,Bc="persistence";function xu(I){return jc.apply(this,arguments)}function jc(){return(jc=(0,_.Z)(function*(I){yield I._initializationPromise;const f=ku(),m=$(Bc,I.config.apiKey,I.name);f&&f.setItem(m,I._getPersistence())})).apply(this,arguments)}function ku(){var I;try{return(null===(I=function cE(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Rg=Z;class Eo{constructor(){this.browserResolver=Qe(as),this.cordovaResolver=Qe(Sg),this.underlyingResolver=null,this._redirectPersistence=Ii,this._completeRedirectFn=ar,this._overrideRedirectResult=mg}_initialize(f){var m=this;return(0,_.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,A){var P=this;return(0,_.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,m,E,A)})()}_openRedirect(f,m,E,A){var P=this;return(0,_.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,m,E,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return uE()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Ag(){return Vc.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function gf(I){return I.unwrap()}function Id(I){return iy(I)}function iy(I){const{_tokenResponse:f}=I instanceof L.ZR?I.customData:I;if(!f)return null;if(!(I instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return mo.credentialFromResult(I);const m=f.providerId;if(!m||m===de.PASSWORD)return null;let E;switch(m){case de.GOOGLE:E=qi;break;case de.FACEBOOK:E=co;break;case de.GITHUB:E=du;break;case de.TWITTER:E=fc;break;default:const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:H,pendingToken:re,nonce:Ue}=f;return P||H||A||re?re?m.startsWith("saml.")?Bt._create(m,re):Dt._fromParams({providerId:m,signInMethod:m,pendingToken:re,idToken:A,accessToken:P}):new Hs(m).credential({idToken:A,accessToken:P,rawNonce:Ue}):null}return I instanceof L.ZR?E.credentialFromError(I):E.credentialFromResult(I)}function Ti(I,f){return f.catch(m=>{throw m instanceof L.ZR&&function Ed(I,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new dE(I,function Bh(I,f){var m;const E=(0,L.m9)(I),A=f;return Z(f.customData.operationType,E,"argument-error"),Z(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Wo._fromError(E,A)}(I,f));else if(E){const A=iy(f),P=f;A&&(P.credential=A,P.tenantId=E.tenantId||void 0,P.email=E.email||void 0,P.phoneNumber=E.phoneNumber||void 0)}}(I,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:Id(m),additionalUserInfo:ig(m),user:Yn.getOrCreate(A)}})}function _f(I,f){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,_.Z)(function*(I,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>Ti(I,m.confirm(E))}})).apply(this,arguments)}class dE{constructor(f,m){this.resolver=m,this.auth=function mf(I){return I.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ti(gf(this.auth),this.resolver.resolveSignIn(f))}}class Yn{constructor(f){this._delegate=f,this.multiFactor=function Ko(I){const f=(0,L.m9)(I);return qo.has(f)||qo.set(f,gn._fromUser(f)),qo.get(f)}(f)}static getOrCreate(f){return Yn.USER_MAP.has(f)||Yn.USER_MAP.set(f,new Yn(f)),Yn.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,_.Z)(function*(){return Ti(m.auth,M_(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,_.Z)(function*(){return _f(E.auth,function ss(I,f,m){return mn.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,_.Z)(function*(){return Ti(m.auth,function yo(I,f,m){return vo.apply(this,arguments)}(m._delegate,f,Eo))})()}linkWithRedirect(f){var m=this;return(0,_.Z)(function*(){return yield xu(sr(m.auth)),yg(m._delegate,f,Eo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,_.Z)(function*(){return Ti(m.auth,O_(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return _f(this.auth,function Xo(I,f,m){return Jo.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Ti(this.auth,function Rc(I,f,m){return qs.apply(this,arguments)}(this._delegate,f,Eo))}reauthenticateWithRedirect(f){var m=this;return(0,_.Z)(function*(){return yield xu(sr(m.auth)),ef(m._delegate,f,Eo)})()}sendEmailVerification(f){return function fo(I,f){return _u.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,_.Z)(function*(){return yield function Bo(I,f){return ki.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Uh(I,f){return rg((0,L.m9)(I),f,null)}(this._delegate,f)}updatePassword(f){return function _c(I,f){return rg((0,L.m9)(I),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function zs(I,f){return Rn.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function F_(I,f){return Ql.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Lh(I,f,m){return mc.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yn.USER_MAP=new WeakMap;const Mu=Z;let yf=(()=>{class I{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;Mu(A,"invalid-api-key",{appName:m.name}),Mu(A,"invalid-api-key",{appName:m.name});const P=typeof window<"u"?Eo:void 0;this._delegate=E.initialize({options:{persistence:li(A,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function _i(I,f,m){const E=sr(I);Z(E._canInitEmulator,E,"emulator-config-failed"),Z(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!m?.disableWarnings,P=ya(f),{host:H,port:re}=function Fl(I){const f=ya(I),m=/(\/\/)?([^?#/]+)/.exec(I.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const P=A[1];return{host:P,port:Dh(E.substr(P.length+1))}}{const[P,H]=E.split(":");return{host:P,port:Dh(H)}}}(f);E.config.emulator={url:`${P}//${H}${null===re?"":`:${re}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:H,port:re,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function P_(){function I(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,m,E)}applyActionCode(m){return function kh(I,f){return Ki.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return pr(this._delegate,m)}confirmPasswordReset(m,E){return function jo(I,f,m){return Ts.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,_.Z)(function*(){return Ti(A._delegate,function ql(I,f,m){return pu.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function mu(I,f){return Go.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Oh(I,f){const m=Ln.parseLink(f);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,_.Z)(function*(){Mu(ry(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Y(I,f){return an.apply(this,arguments)}(m._delegate,Eo);return E?Ti(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function MN(I,f){sr(I)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:P,error:H,complete:re}=vf(m,E,A);return this._delegate.onAuthStateChanged(P,H,re)}onIdTokenChanged(m,E,A){const{next:P,error:H,complete:re}=vf(m,E,A);return this._delegate.onIdTokenChanged(P,H,re)}sendSignInLinkToEmail(m,E){return function ba(I,f,m){return gu.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function XI(I,f,m){return fu.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,_.Z)(function*(){let A;switch(function lE(I,f){vd(Object.values(us).includes(f),I,"invalid-persistence-type"),(0,L.b$)()?vd(f!==us.SESSION,I,"unsupported-persistence-type"):(0,L.UG)()?vd(f===us.NONE,I,"unsupported-persistence-type"):ny()?vd(f===us.NONE||f===us.LOCAL&&(0,L.hl)(),I,"unsupported-persistence-type"):vd(f===us.NONE||ob(),I,"unsupported-persistence-type")}(E._delegate,m),m){case us.SESSION:A=Ii;break;case us.LOCAL:A=(yield Qe(Yo)._isAvailable())?Yo:Aa;break;case us.NONE:A=on;break;default:return Te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Ti(this._delegate,function Fr(I){return eg.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Ti(this._delegate,Gl(this._delegate,m))}signInWithCustomToken(m){return Ti(this._delegate,function xh(I,f){return Gs.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Ti(this._delegate,function Mh(I,f,m){return Gl((0,L.m9)(I),Uo.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Ti(this._delegate,function Dr(I,f,m){return Kl.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return _f(this._delegate,function Ds(I,f,m){return vt.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,_.Z)(function*(){return Mu(ry(),E._delegate,"operation-not-supported-in-this-environment"),Ti(E._delegate,function Ws(I,f,m){return Na.apply(this,arguments)}(E._delegate,m,Eo))})()}signInWithRedirect(m){var E=this;return(0,_.Z)(function*(){return Mu(ry(),E._delegate,"operation-not-supported-in-this-environment"),yield xu(E._delegate),Pa(E._delegate,m,Eo)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function vi(I,f){return Ho.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=us,I})();function vf(I,f,m){let E=I;"function"!=typeof I&&({next:E,error:f,complete:m}=I);const A=E;return{next:H=>A(H&&Yn.getOrCreate(H)),error:f,complete:m}}function li(I,f){const m=function $c(I,f){const m=ku();if(!m)return[];const E=$(Bc,I,f);switch(m.getItem(E)){case us.NONE:return[on];case us.LOCAL:return[Yo,Ii];case us.SESSION:return[Ii];default:return[]}}(I,f);if(typeof self<"u"&&!m.includes(Yo)&&m.push(Yo),typeof window<"u")for(const E of[Aa,Ii])m.includes(E)||m.push(E);return m.includes(on)||m.push(on),m}class Ou{constructor(){this.providerId="phone",this._delegate=new mo(gf(ee.Z.auth()))}static credential(f,m){return mo.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Ou.PHONE_SIGN_IN_METHOD=mo.PHONE_SIGN_IN_METHOD,Ou.PROVIDER_ID=mo.PROVIDER_ID;const sy=Z;class oy{constructor(f,m,E=ee.Z.app()){var A;sy(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Qh(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pg(I){I.INTERNAL.registerComponent(new ye.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new yf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Uo,FacebookAuthProvider:co,GithubAuthProvider:du,GoogleAuthProvider:qi,OAuthProvider:Hs,SAMLAuthProvider:Ea,PhoneAuthProvider:Ou,PhoneMultiFactorGenerator:af,RecaptchaVerifier:oy,TwitterAuthProvider:fc,Auth:yf,AuthCredential:Lo,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},4303:(ht,Se,O)=>{O.r(Se),O.d(Se,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>Cn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>De,_addOrOverwriteComponent:()=>Re,_apps:()=>ge,_clearComponents:()=>It,_components:()=>Ie,_getProvider:()=>ze,_registerComponent:()=>Ye,_removeServiceInstance:()=>xn,deleteApp:()=>ni,getApp:()=>fn,getApps:()=>Er,initializeApp:()=>Gn,onLog:()=>ri,registerVersion:()=>Kn,setLogLevel:()=>_s});var _=O(5861),ee=O(4537),L=O(7879),J=O(9058),se=O(1878);class _e{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(ve=>{if(function ye(we){const W=we.getComponent();return"VERSION"===W?.type}(ve)){const Ge=ve.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(ve=>ve).join(" ")}}const xe="@firebase/app",B=new L.Yd("@firebase/app"),ae="[DEFAULT]",pe={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ge=new Map,Ie=new Map;function De(we,W){try{we.container.addComponent(W)}catch(ve){B.debug(`Component ${W.name} failed to register with FirebaseApp ${we.name}`,ve)}}function Re(we,W){we.container.addOrOverwriteComponent(W)}function Ye(we){const W=we.name;if(Ie.has(W))return B.debug(`There were multiple attempts to register component ${W}.`),!1;Ie.set(W,we);for(const ve of ge.values())De(ve,we);return!0}function ze(we,W){const ve=we.container.getProvider("heartbeat").getImmediate({optional:!0});return ve&&ve.triggerHeartbeat(),we.container.getProvider(W)}function xn(we,W,ve=ae){ze(we,W).clearInstance(ve)}function It(){Ie.clear()}const ft=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tn{constructor(W,ve,Ge){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},ve),this._name=ve.name,this._automaticDataCollectionEnabled=ve.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Cn="10.4.0";function Gn(we,W={}){let ve=we;"object"!=typeof W&&(W={name:W});const Ge=Object.assign({name:ae,automaticDataCollectionEnabled:!1},W),Qe=Ge.name;if("string"!=typeof Qe||!Qe)throw ft.create("bad-app-name",{appName:String(Qe)});if(ve||(ve=(0,J.aH)()),!ve)throw ft.create("no-options");const Et=ge.get(Qe);if(Et){if((0,J.vZ)(ve,Et.options)&&(0,J.vZ)(Ge,Et.config))return Et;throw ft.create("duplicate-app",{appName:Qe})}const on=new ee.H0(Qe);for(const j of Ie.values())on.addComponent(j);const $=new Tn(ve,Ge,on);return ge.set(Qe,$),$}function fn(we=ae){const W=ge.get(we);if(!W&&we===ae&&(0,J.aH)())return Gn();if(!W)throw ft.create("no-app",{appName:we});return W}function Er(){return Array.from(ge.values())}function ni(we){return gi.apply(this,arguments)}function gi(){return(gi=(0,_.Z)(function*(we){const W=we.name;ge.has(W)&&(ge.delete(W),yield Promise.all(we.container.getProviders().map(ve=>ve.delete())),we.isDeleted=!0)})).apply(this,arguments)}function Kn(we,W,ve){var Ge;let Qe=null!==(Ge=pe[we])&&void 0!==Ge?Ge:we;ve&&(Qe+=`-${ve}`);const Et=Qe.match(/\s|\//),on=W.match(/\s|\//);if(Et||on){const $=[`Unable to register library "${Qe}" with version "${W}":`];return Et&&$.push(`library name "${Qe}" contains illegal characters (whitespace or "/")`),Et&&on&&$.push("and"),on&&$.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void B.warn($.join(" "))}Ye(new ee.wA(`${Qe}-version`,()=>({library:Qe,version:W}),"VERSION"))}function ri(we,W){if(null!==we&&"function"!=typeof we)throw ft.create("invalid-log-argument");(0,L.Am)(we,W)}function _s(we){(0,L.Ub)(we)}const ko="firebase-heartbeat-database",bt=1,Rt="firebase-heartbeat-store";let xt=null;function yn(){return xt||(xt=(0,se.X3)(ko,bt,{upgrade:(we,W)=>{0===W&&we.createObjectStore(Rt)}}).catch(we=>{throw ft.create("idb-open",{originalErrorMessage:we.message})})),xt}function rr(){return(rr=(0,_.Z)(function*(we){try{return yield(yield yn()).transaction(Rt).objectStore(Rt).get(ys(we))}catch(W){if(W instanceof J.ZR)B.warn(W.message);else{const ve=ft.create("idb-get",{originalErrorMessage:W?.message});B.warn(ve.message)}}})).apply(this,arguments)}function pn(we,W){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(we,W){try{const Ge=(yield yn()).transaction(Rt,"readwrite");yield Ge.objectStore(Rt).put(W,ys(we)),yield Ge.done}catch(ve){if(ve instanceof J.ZR)B.warn(ve.message);else{const Ge=ft.create("idb-set",{originalErrorMessage:ve?.message});B.warn(Ge.message)}}})).apply(this,arguments)}function ys(we){return`${we.name}!${we.options.appId}`}class en{constructor(W){this.container=W,this._heartbeatsCache=null;const ve=this.container.getProvider("app").getImmediate();this._storage=new Vs(ve),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var W=this;return(0,_.Z)(function*(){const Ge=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qe=mi();if(null===W._heartbeatsCache&&(W._heartbeatsCache=yield W._heartbeatsCachePromise),W._heartbeatsCache.lastSentHeartbeatDate!==Qe&&!W._heartbeatsCache.heartbeats.some(Et=>Et.date===Qe))return W._heartbeatsCache.heartbeats.push({date:Qe,agent:Ge}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(Et=>{const on=new Date(Et.date).valueOf();return Date.now()-on<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,_.Z)(function*(){if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null===W._heartbeatsCache||0===W._heartbeatsCache.heartbeats.length)return"";const ve=mi(),{heartbeatsToSend:Ge,unsentEntries:Qe}=function vs(we,W=1024){const ve=[];let Ge=we.slice();for(const Qe of we){const Et=ve.find(on=>on.agent===Qe.agent);if(Et){if(Et.dates.push(Qe.date),Yr(ve)>W){Et.dates.pop();break}}else if(ve.push({agent:Qe.agent,dates:[Qe.date]}),Yr(ve)>W){ve.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:ve,unsentEntries:Ge}}(W._heartbeatsCache.heartbeats),Et=(0,J.L)(JSON.stringify({version:2,heartbeats:Ge}));return W._heartbeatsCache.lastSentHeartbeatDate=ve,Qe.length>0?(W._heartbeatsCache.heartbeats=Qe,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),Et})()}}function mi(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,_.Z)(function*(){return(yield W._canUseIndexedDBPromise)&&(yield function kn(we){return rr.apply(this,arguments)}(W.app))||{heartbeats:[]}})()}overwrite(W){var ve=this;return(0,_.Z)(function*(){var Ge;if(yield ve._canUseIndexedDBPromise){const Et=yield ve.read();return pn(ve.app,{lastSentHeartbeatDate:null!==(Ge=W.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Et.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var ve=this;return(0,_.Z)(function*(){var Ge;if(yield ve._canUseIndexedDBPromise){const Et=yield ve.read();return pn(ve.app,{lastSentHeartbeatDate:null!==(Ge=W.lastSentHeartbeatDate)&&void 0!==Ge?Ge:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...W.heartbeats]})}})()}}function Yr(we){return(0,J.L)(JSON.stringify({version:2,heartbeats:we})).length}!function Is(we){Ye(new ee.wA("platform-logger",W=>new _e(W),"PRIVATE")),Ye(new ee.wA("heartbeat",W=>new en(W),"PRIVATE")),Kn(xe,"0.9.19",we),Kn(xe,"0.9.19","esm2017"),Kn("fire-js","")}("")},4537:(ht,Se,O)=>{O.d(Se,{H0:()=>xe,wA:()=>L,zt:()=>se});var _=O(5861),ee=O(9058);class L{constructor(B,G,ne){this.name=B,this.instanceFactory=G,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const J="[DEFAULT]";class se{constructor(B,G){this.name=B,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const G=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(G)){const ne=new ee.BH;if(this.instancesDeferred.set(G,ne),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:G});Ve&&ne.resolve(Ve)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(B){var G;const ne=this.normalizeInstanceIdentifier(B?.identifier),Ve=null!==(G=B?.optional)&&void 0!==G&&G;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ne){if(Ve)return null;throw Ne}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ye(de){return"EAGER"===de.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[G,ne]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(G);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ve});ne.resolve(Ne)}catch{}}}}clearInstance(B=J){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,_.Z)(function*(){const G=Array.from(B.instances.values());yield Promise.all([...G.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...G.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=J){return this.instances.has(B)}getOptions(B=J){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:G={}}=B,ne=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:ne,options:G});for(const[Ne,Ke]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ne)&&Ke.resolve(Ve);return Ve}onInit(B,G){var ne;const Ve=this.normalizeInstanceIdentifier(G),Ne=null!==(ne=this.onInitCallbacks.get(Ve))&&void 0!==ne?ne:new Set;Ne.add(B),this.onInitCallbacks.set(Ve,Ne);const Ke=this.instances.get(Ve);return Ke&&B(Ke,Ve),()=>{Ne.delete(B)}}invokeOnInitCallbacks(B,G){const ne=this.onInitCallbacks.get(G);if(ne)for(const Ve of ne)try{Ve(B,G)}catch{}}getOrInitializeService({instanceIdentifier:B,options:G={}}){let ne=this.instances.get(B);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(de=B,de===J?void 0:de),options:G}),this.instances.set(B,ne),this.instancesOptions.set(B,G),this.invokeOnInitCallbacks(ne,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,ne)}catch{}var de;return ne||null}normalizeInstanceIdentifier(B=J){return this.component?this.component.multipleInstances?B:J:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const G=this.getProvider(B.name);if(G.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);G.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const G=new se(B,this);return this.providers.set(B,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(ht,Se,O)=>{O.d(Se,{Am:()=>de,Ub:()=>xe,Yd:()=>ye,in:()=>ee});const _=[];var ee=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(ee||{});const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},J=ee.INFO,se={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},_e=(B,G,...ne)=>{if(G<B.logLevel)return;const Ve=(new Date).toISOString(),Ne=se[G];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ne](`[${Ve}]  ${B.name}:`,...ne)};class ye{constructor(G){this.name=G,this._logLevel=J,this._logHandler=_e,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function xe(B){_.forEach(G=>{G.setLogLevel(B)})}function de(B,G){for(const ne of _){let Ve=null;G&&G.level&&(Ve=L[G.level]),ne.userLogHandler=null===B?null:(Ne,Ke,...Me)=>{const We=Me.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Ke>=(Ve??Ne.logLevel)&&B({level:ee[Ke].toLowerCase(),message:We,args:Me,type:Ne.name})}}}},1878:(ht,Se,O)=>{O.d(Se,{X3:()=>gt});var _=O(5861);const ee=(ce,Z)=>Z.some($e=>ce instanceof $e);let L,J;const ye=new WeakMap,xe=new WeakMap,de=new WeakMap,B=new WeakMap,G=new WeakMap;let Ne={get(ce,Z,$e){if(ce instanceof IDBTransaction){if("done"===Z)return xe.get(ce);if("objectStoreNames"===Z)return ce.objectStoreNames||de.get(ce);if("store"===Z)return $e.objectStoreNames[1]?void 0:$e.objectStore($e.objectStoreNames[0])}return Oe(ce[Z])},set:(ce,Z,$e)=>(ce[Z]=$e,!0),has:(ce,Z)=>ce instanceof IDBTransaction&&("done"===Z||"store"===Z)||Z in ce};function We(ce){return"function"==typeof ce?function Me(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return J||(J=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...Z){return ce.apply(pt(this),Z),Oe(ye.get(this))}:function(...Z){return Oe(ce.apply(pt(this),Z))}:function(Z,...$e){const yt=ce.call(pt(this),Z,...$e);return de.set(yt,Z.sort?Z.sort():[Z]),Oe(yt)}}(ce):(ce instanceof IDBTransaction&&function Ve(ce){if(xe.has(ce))return;const Z=new Promise(($e,yt)=>{const sn=()=>{ce.removeEventListener("complete",En),ce.removeEventListener("error",wn),ce.removeEventListener("abort",wn)},En=()=>{$e(),sn()},wn=()=>{yt(ce.error||new DOMException("AbortError","AbortError")),sn()};ce.addEventListener("complete",En),ce.addEventListener("error",wn),ce.addEventListener("abort",wn)});xe.set(ce,Z)}(ce),ee(ce,function se(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Ne):ce)}function Oe(ce){if(ce instanceof IDBRequest)return function ne(ce){const Z=new Promise(($e,yt)=>{const sn=()=>{ce.removeEventListener("success",En),ce.removeEventListener("error",wn)},En=()=>{$e(Oe(ce.result)),sn()},wn=()=>{yt(ce.error),sn()};ce.addEventListener("success",En),ce.addEventListener("error",wn)});return Z.then($e=>{$e instanceof IDBCursor&&ye.set($e,ce)}).catch(()=>{}),G.set(Z,ce),Z}(ce);if(B.has(ce))return B.get(ce);const Z=We(ce);return Z!==ce&&(B.set(ce,Z),G.set(Z,ce)),Z}const pt=ce=>G.get(ce);function gt(ce,Z,{blocked:$e,upgrade:yt,blocking:sn,terminated:En}={}){const wn=indexedDB.open(ce,Z),Hn=Oe(wn);return yt&&wn.addEventListener("upgradeneeded",Pn=>{yt(Oe(wn.result),Pn.oldVersion,Pn.newVersion,Oe(wn.transaction),Pn)}),$e&&wn.addEventListener("blocked",Pn=>$e(Pn.oldVersion,Pn.newVersion,Pn)),Hn.then(Pn=>{En&&Pn.addEventListener("close",()=>En()),sn&&Pn.addEventListener("versionchange",Ir=>sn(Ir.oldVersion,Ir.newVersion,Ir))}).catch(()=>{}),Hn}const Te=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],be=new Map;function Fe(ce,Z){if(!(ce instanceof IDBDatabase)||Z in ce||"string"!=typeof Z)return;if(be.get(Z))return be.get(Z);const $e=Z.replace(/FromIndex$/,""),yt=Z!==$e,sn=ie.includes($e);if(!($e in(yt?IDBIndex:IDBObjectStore).prototype)||!sn&&!Te.includes($e))return;const En=function(){var wn=(0,_.Z)(function*(Hn,...Pn){const Ir=this.transaction(Hn,sn?"readwrite":"readonly");let ae=Ir.store;return yt&&(ae=ae.index(Pn.shift())),(yield Promise.all([ae[$e](...Pn),sn&&Ir.done]))[0]});return function(Pn){return wn.apply(this,arguments)}}();return be.set(Z,En),En}!function Ke(ce){Ne=ce(Ne)}(ce=>({...ce,get:(Z,$e,yt)=>Fe(Z,$e)||ce.get(Z,$e,yt),has:(Z,$e)=>!!Fe(Z,$e)||ce.has(Z,$e)}))},5861:(ht,Se,O)=>{function _(L,J,se,_e,ye,xe,de){try{var B=L[xe](de),G=B.value}catch(ne){return void se(ne)}B.done?J(G):Promise.resolve(G).then(_e,ye)}function ee(L){return function(){var J=this,se=arguments;return new Promise(function(_e,ye){var xe=L.apply(J,se);function de(G){_(xe,_e,ye,de,B,"next",G)}function B(G){_(xe,_e,ye,de,B,"throw",G)}de(void 0)})}}O.d(Se,{Z:()=>ee})},7582:(ht,Se,O)=>{function J(ae,pe){var ge={};for(var Ie in ae)Object.prototype.hasOwnProperty.call(ae,Ie)&&pe.indexOf(Ie)<0&&(ge[Ie]=ae[Ie]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(Ie=Object.getOwnPropertySymbols(ae);De<Ie.length;De++)pe.indexOf(Ie[De])<0&&Object.prototype.propertyIsEnumerable.call(ae,Ie[De])&&(ge[Ie[De]]=ae[Ie[De]])}return ge}function ne(ae,pe,ge,Ie){return new(ge||(ge=Promise))(function(Re,Ye){function ze(Xt){try{It(Ie.next(Xt))}catch(ft){Ye(ft)}}function xn(Xt){try{It(Ie.throw(Xt))}catch(ft){Ye(ft)}}function It(Xt){Xt.done?Re(Xt.value):function De(Re){return Re instanceof ge?Re:new ge(function(Ye){Ye(Re)})}(Xt.value).then(ze,xn)}It((Ie=Ie.apply(ae,pe||[])).next())})}function oe(ae){return this instanceof oe?(this.v=ae,this):new oe(ae)}function Te(ae,pe,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,Ie=ge.apply(ae,pe||[]),Re=[];return De={},Ye("next"),Ye("throw"),Ye("return"),De[Symbol.asyncIterator]=function(){return this},De;function Ye(Tn){Ie[Tn]&&(De[Tn]=function(Cn){return new Promise(function(Gn,fn){Re.push([Tn,Cn,Gn,fn])>1||ze(Tn,Cn)})})}function ze(Tn,Cn){try{!function xn(Tn){Tn.value instanceof oe?Promise.resolve(Tn.value.v).then(It,Xt):ft(Re[0][2],Tn)}(Ie[Tn](Cn))}catch(Gn){ft(Re[0][3],Gn)}}function It(Tn){ze("next",Tn)}function Xt(Tn){ze("throw",Tn)}function ft(Tn,Cn){Tn(Cn),Re.shift(),Re.length&&ze(Re[0][0],Re[0][1])}}function be(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,pe=ae[Symbol.asyncIterator];return pe?pe.call(ae):(ae=function Me(ae){var pe="function"==typeof Symbol&&Symbol.iterator,ge=pe&&ae[pe],Ie=0;if(ge)return ge.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&Ie>=ae.length&&(ae=void 0),{value:ae&&ae[Ie++],done:!ae}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),ge={},Ie("next"),Ie("throw"),Ie("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function Ie(Re){ge[Re]=ae[Re]&&function(Ye){return new Promise(function(ze,xn){!function De(Re,Ye,ze,xn){Promise.resolve(xn).then(function(It){Re({value:It,done:ze})},Ye)}(ze,xn,(Ye=ae[Re](Ye)).done,Ye.value)})}}}O.d(Se,{FC:()=>Te,KL:()=>be,_T:()=>J,mG:()=>ne,qq:()=>oe}),"function"==typeof SuppressedError&&SuppressedError}},ht=>{ht(ht.s=2270)}]);