"use strict";(self.webpackChunkangular_firebase_app=self.webpackChunkangular_firebase_app||[]).push([[179],{6304:(mt,Ae,U)=>{U.d(Ae,{Dh:()=>Me,GT:()=>fe,cc:()=>Oe,hO:()=>He,on:()=>G,pX:()=>ue,xv:()=>Ee});var p=U(5879),W=U(120),N=U(2793);mt=U.hmd(mt);const re=["ngOnDestroy"],ue=(Ne,vt,pt,ce={})=>new Proxy(Ne,{get:(Re,me)=>pt.runOutsideAngular(()=>{var De;if(Ne[me])return!(null===(De=ce?.spy)||void 0===De)&&De.get&&ce.spy.get(me,Ne[me]),Ne[me];if(re.indexOf(me)>-1)return()=>{};const Be=vt.toPromise().then(Y=>{const Pe=Y&&Y[me];return"function"==typeof Pe?Pe.bind(Y):Pe&&Pe.then?Pe.then(Ze=>pt.run(()=>Ze)):pt.run(()=>Pe)});return new Proxy(()=>{},{get:(Y,Pe)=>Be[Pe],apply:(Y,Pe,Ze)=>Be.then(bt=>{var hn;const On=bt&&bt(...Ze);return!(null===(hn=ce?.spy)||void 0===hn)&&hn.apply&&ce.spy.apply(me,Ze,On),On})})})}),fe=(Ne,vt)=>{vt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(ce=>{Object.defineProperty(Ne.prototype,ce,Object.getOwnPropertyDescriptor(pt.prototype||pt,ce))})})};class Ce{constructor(vt){return vt}}const Me=new p.OlP("angularfire2.app.options"),Ee=new p.OlP("angularfire2.app.name");function G(Ne,vt,pt){const Re="object"==typeof pt&&pt||{};Re.name=Re.name||"string"==typeof pt&&pt||"[DEFAULT]";const De=W.Z.apps.filter(Be=>Be&&Be.name===Re.name)[0]||vt.runOutsideAngular(()=>W.Z.initializeApp(Ne,Re));try{JSON.stringify(Ne)!==JSON.stringify(De.options)&&Q("error",`${De.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(De)}const Q=(Ne,...vt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ne](...vt)},le={provide:Ce,useFactory:G,deps:[Me,p.R0b,[new p.FiY,Ee]]};let He=(()=>{class Ne{constructor(pt){W.Z.registerVersion("angularfire",N.q4.full,"core"),W.Z.registerVersion("angularfire",N.q4.full,"app-compat"),W.Z.registerVersion("angular",p.q4F.full,pt.toString())}static initializeApp(pt,ce){return{ngModule:Ne,providers:[{provide:Me,useValue:pt},{provide:Ee,useValue:ce}]}}}return Ne.\u0275fac=function(pt){return new(pt||Ne)(p.LFG(p.Lbi))},Ne.\u0275mod=p.oAB({type:Ne}),Ne.\u0275inj=p.cJS({providers:[le]}),Ne})();function Oe(Ne,vt,pt,ce,Re){const[,me,De]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ne)||[];if(me)return function tt(Ne,vt){try{return Ne.toString()===vt.toString()}catch{return Ne===vt}}(Re,De)||(et("error",`${vt} was already initialized on the ${pt} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),et("warn",{is:Re,was:De})),me;{const Be=ce();return globalThis.\u0275AngularfireInstanceCache.push([Ne,Be,Re]),Be}}const Fe=!!mt.hot,et=(Ne,...vt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ne](...vt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(mt,Ae,U)=>{U.d(Ae,{q4:()=>zr,iC:()=>za,fc:()=>Yc,HU:()=>fn,vb:()=>ef,JM:()=>Kc,u3:()=>yo});var p=U(5879),W=U(4097),N=U(5861),re=U(4303),ue=U(9058),fe=U(4537),Ce=U(7879);const Me=(b,S)=>S.some(x=>b instanceof x);let Ee,G;const He=new WeakMap,Oe=new WeakMap,tt=new WeakMap,Fe=new WeakMap,et=new WeakMap;let pt={get(b,S,x){if(b instanceof IDBTransaction){if("done"===S)return Oe.get(b);if("objectStoreNames"===S)return b.objectStoreNames||tt.get(b);if("store"===S)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return De(b[S])},set:(b,S,x)=>(b[S]=x,!0),has:(b,S)=>b instanceof IDBTransaction&&("done"===S||"store"===S)||S in b};function me(b){return"function"==typeof b?function Re(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...S){return b.apply(Be(this),S),De(He.get(this))}:function(...S){return De(b.apply(Be(this),S))}:function(S,...x){const H=b.call(Be(this),S,...x);return tt.set(H,S.sort?S.sort():[S]),De(H)}}(b):(b instanceof IDBTransaction&&function vt(b){if(Oe.has(b))return;const S=new Promise((x,H)=>{const J=()=>{b.removeEventListener("complete",ae),b.removeEventListener("error",be),b.removeEventListener("abort",be)},ae=()=>{x(),J()},be=()=>{H(b.error||new DOMException("AbortError","AbortError")),J()};b.addEventListener("complete",ae),b.addEventListener("error",be),b.addEventListener("abort",be)});Oe.set(b,S)}(b),Me(b,function Q(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,pt):b)}function De(b){if(b instanceof IDBRequest)return function Ne(b){const S=new Promise((x,H)=>{const J=()=>{b.removeEventListener("success",ae),b.removeEventListener("error",be)},ae=()=>{x(De(b.result)),J()},be=()=>{H(b.error),J()};b.addEventListener("success",ae),b.addEventListener("error",be)});return S.then(x=>{x instanceof IDBCursor&&He.set(x,b)}).catch(()=>{}),et.set(S,b),S}(b);if(Fe.has(b))return Fe.get(b);const S=me(b);return S!==b&&(Fe.set(b,S),et.set(S,b)),S}const Be=b=>et.get(b),Ze=["get","getKey","getAll","getAllKeys","count"],bt=["put","add","delete","clear"],hn=new Map;function On(b,S){if(!(b instanceof IDBDatabase)||S in b||"string"!=typeof S)return;if(hn.get(S))return hn.get(S);const x=S.replace(/FromIndex$/,""),H=S!==x,J=bt.includes(x);if(!(x in(H?IDBIndex:IDBObjectStore).prototype)||!J&&!Ze.includes(x))return;const ae=function(){var be=(0,N.Z)(function*(st,...it){const wt=this.transaction(st,J?"readwrite":"readonly");let Bt=wt.store;return H&&(Bt=Bt.index(it.shift())),(yield Promise.all([Bt[x](...it),J&&wt.done]))[0]});return function(it){return be.apply(this,arguments)}}();return hn.set(S,ae),ae}!function ce(b){pt=b(pt)}(b=>({...b,get:(S,x,H)=>On(S,x)||b.get(S,x,H),has:(S,x)=>!!On(S,x)||b.has(S,x)}));const Nn="@firebase/installations",Ln="0.6.4",Dn=1e4,$r=`w:${Ln}`,he="FIS_v2",ve="https://firebaseinstallations.googleapis.com/v1",we=36e5,nt=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(b){return b instanceof ue.ZR&&b.code.includes("request-failed")}function pn({projectId:b}){return`${ve}/projects/${b}/installations`}function xt(b){return{token:b.token,requestStatus:2,expiresIn:Xn(b.expiresIn),creationTime:Date.now()}}function nn(b,S){return _t.apply(this,arguments)}function _t(){return(_t=(0,N.Z)(function*(b,S){const H=(yield S.json()).error;return nt.create("request-failed",{requestName:b,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function En({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Mn(b){return gn.apply(this,arguments)}function gn(){return(gn=(0,N.Z)(function*(b){const S=yield b();return S.status>=500&&S.status<600?b():S})).apply(this,arguments)}function Xn(b){return Number(b.replace("s","000"))}function Gn(){return(Gn=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:S},{fid:x}){const H=pn(b),J=En(b),ae=S.getImmediate({optional:!0});if(ae){const wt=yield ae.getHeartbeatsHeader();wt&&J.append("x-firebase-client",wt)}const st={method:"POST",headers:J,body:JSON.stringify({fid:x,authVersion:he,appId:b.appId,sdkVersion:$r})},it=yield Mn(()=>fetch(H,st));if(it.ok){const wt=yield it.json();return{fid:wt.fid||x,registrationStatus:2,refreshToken:wt.refreshToken,authToken:xt(wt.authToken)}}throw yield nn("Create Installation",it)})).apply(this,arguments)}function Zn(b){return new Promise(S=>{setTimeout(S,b)})}const ms=/^[cdef][\w-]{21}$/,Dt="";function Mt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function Vt(b){return function ei(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return ms.test(x)?x:Dt}catch{return Dt}}function Jt(b){return`${b.appName}!${b.appId}`}const hr=new Map;function Tr(b,S){const x=Jt(b);bi(x,S),function ln(b,S){const x=function Qt(){return!di&&"BroadcastChannel"in self&&(di=new BroadcastChannel("[Firebase] FID Change"),di.onmessage=b=>{bi(b.data.key,b.data.fid)}),di}();x&&x.postMessage({key:b,fid:S}),function Fn(){0===hr.size&&di&&(di.close(),di=null)}()}(x,S)}function bi(b,S){const x=hr.get(b);if(x)for(const H of x)H(S)}let di=null;const Oi="firebase-installations-database",Qi=1,Cr="firebase-installations-store";let ar=null;function Ie(){return ar||(ar=function Y(b,S,{blocked:x,upgrade:H,blocking:J,terminated:ae}={}){const be=indexedDB.open(b,S),st=De(be);return H&&be.addEventListener("upgradeneeded",it=>{H(De(be.result),it.oldVersion,it.newVersion,De(be.transaction))}),x&&be.addEventListener("blocked",()=>x()),st.then(it=>{ae&&it.addEventListener("close",()=>ae()),J&&it.addEventListener("versionchange",()=>J())}).catch(()=>{}),st}(Oi,Qi,{upgrade:(b,S)=>{0===S&&b.createObjectStore(Cr)}})),ar}function X(b,S){return Te.apply(this,arguments)}function Te(){return(Te=(0,N.Z)(function*(b,S){const x=Jt(b),J=(yield Ie()).transaction(Cr,"readwrite"),ae=J.objectStore(Cr),be=yield ae.get(x);return yield ae.put(S,x),yield J.done,(!be||be.fid!==S.fid)&&Tr(b,S.fid),S})).apply(this,arguments)}function ze(b){return ft.apply(this,arguments)}function ft(){return(ft=(0,N.Z)(function*(b){const S=Jt(b),H=(yield Ie()).transaction(Cr,"readwrite");yield H.objectStore(Cr).delete(S),yield H.done})).apply(this,arguments)}function yt(b,S){return mn.apply(this,arguments)}function mn(){return(mn=(0,N.Z)(function*(b,S){const x=Jt(b),J=(yield Ie()).transaction(Cr,"readwrite"),ae=J.objectStore(Cr),be=yield ae.get(x),st=S(be);return void 0===st?yield ae.delete(x):yield ae.put(st,x),yield J.done,st&&(!be||be.fid!==st.fid)&&Tr(b,st.fid),st})).apply(this,arguments)}function K(b){return q.apply(this,arguments)}function q(){return q=(0,N.Z)(function*(b){let S;const x=yield yt(b.appConfig,H=>{const J=function B(b){return ct(b||{fid:Mt(),registrationStatus:0})}(H),ae=function j(b,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(nt.create("app-offline"))};const x={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function L(b,S){return oe.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ke(b)}:{installationEntry:S}}(b,J);return S=ae.registrationPromise,ae.installationEntry});return x.fid===Dt?{installationEntry:yield S}:{installationEntry:x,registrationPromise:S}}),q.apply(this,arguments)}function oe(){return oe=(0,N.Z)(function*(b,S){try{const x=yield function br(b,S){return Gn.apply(this,arguments)}(b,S);return X(b.appConfig,x)}catch(x){throw Ye(x)&&409===x.customData.serverCode?yield ze(b.appConfig):yield X(b.appConfig,{fid:S.fid,registrationStatus:0}),x}}),oe.apply(this,arguments)}function ke(b){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,N.Z)(function*(b){let S=yield Ft(b.appConfig);for(;1===S.registrationStatus;)yield Zn(100),S=yield Ft(b.appConfig);if(0===S.registrationStatus){const{installationEntry:x,registrationPromise:H}=yield K(b);return H||x}return S})).apply(this,arguments)}function Ft(b){return yt(b,S=>{if(!S)throw nt.create("installation-not-found");return ct(S)})}function ct(b){return function wn(b){return 1===b.registrationStatus&&b.registrationTime+Dn<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function kn(){return(kn=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:S},x){const H=function Zt(b,{fid:S}){return`${pn(b)}/${S}/authTokens:generate`}(b,x),J=function zn(b,{refreshToken:S}){const x=En(b);return x.append("Authorization",function Ii(b){return`${he} ${b}`}(S)),x}(b,x),ae=S.getImmediate({optional:!0});if(ae){const wt=yield ae.getHeartbeatsHeader();wt&&J.append("x-firebase-client",wt)}const st={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:$r,appId:b.appId}})},it=yield Mn(()=>fetch(H,st));if(it.ok)return xt(yield it.json());throw yield nn("Generate Auth Token",it)})).apply(this,arguments)}function Ni(b){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,N.Z)(function*(b,S=!1){let x;const H=yield yt(b.appConfig,ae=>{if(!Do(ae))throw nt.create("not-registered");const be=ae.authToken;if(!S&&function Sa(b){return 2===b.requestStatus&&!function mc(b){const S=Date.now();return S<b.creationTime||b.creationTime+b.expiresIn<S+we}(b)}(be))return ae;if(1===be.requestStatus)return x=function co(b,S){return zs.apply(this,arguments)}(b,S),ae;{if(!navigator.onLine)throw nt.create("app-offline");const st=function _c(b){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:S})}(ae);return x=function _s(b,S){return cn.apply(this,arguments)}(b,st),st}});return x?yield x:H.authToken}),Qo.apply(this,arguments)}function zs(){return(zs=(0,N.Z)(function*(b,S){let x=yield Gs(b.appConfig);for(;1===x.authToken.requestStatus;)yield Zn(100),x=yield Gs(b.appConfig);const H=x.authToken;return 0===H.requestStatus?Ni(b,S):H})).apply(this,arguments)}function Gs(b){return yt(b,S=>{if(!Do(S))throw nt.create("not-registered");return function uo(b){return 1===b.requestStatus&&b.requestTime+Dn<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function cn(){return cn=(0,N.Z)(function*(b,S){try{const x=yield function jt(b,S){return kn.apply(this,arguments)}(b,S),H=Object.assign(Object.assign({},S),{authToken:x});return yield X(b.appConfig,H),x}catch(x){if(!Ye(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield X(b.appConfig,H)}else yield ze(b.appConfig);throw x}}),cn.apply(this,arguments)}function Do(b){return void 0!==b&&2===b.registrationStatus}function Aa(){return(Aa=(0,N.Z)(function*(b){const S=b,{installationEntry:x,registrationPromise:H}=yield K(S);return H?H.catch(console.error):Ni(S).catch(console.error),x.fid})).apply(this,arguments)}function Ra(){return Ra=(0,N.Z)(function*(b,S=!1){const x=b;return yield function ho(b){return Xo.apply(this,arguments)}(x),(yield Ni(x,S)).token}),Ra.apply(this,arguments)}function Xo(){return(Xo=(0,N.Z)(function*(b){const{registrationPromise:S}=yield K(b);S&&(yield S)})).apply(this,arguments)}function Dl(b){return nt.create("missing-app-config-values",{valueName:b})}const yc="installations",Sl=b=>{const S=b.getProvider("app").getImmediate(),x=function Li(b){if(!b||!b.options)throw Dl("App Configuration");if(!b.name)throw Dl("App Name");const S=["projectId","apiKey","appId"];for(const x of S)if(!b.options[x])throw Dl(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(S);return{app:S,appConfig:x,heartbeatServiceProvider:(0,re._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Gu=b=>{const S=b.getProvider("app").getImmediate(),x=(0,re._getProvider)(S,yc).getImmediate();return{getId:()=>function bl(b){return Aa.apply(this,arguments)}(x),getToken:J=>function zu(b){return Ra.apply(this,arguments)}(x,J)}};(function Th(){(0,re._registerComponent)(new fe.wA(yc,Sl,"PUBLIC")),(0,re._registerComponent)(new fe.wA("installations-internal",Gu,"PRIVATE"))})(),(0,re.registerVersion)(Nn,Ln),(0,re.registerVersion)(Nn,Ln,"esm2017");const vc="@firebase/remote-config",hi=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ht{constructor(S,x,H,J){this.client=S,this.storage=x,this.storageCache=H,this.logger=J}isCachedDataFresh(S,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-x,J=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${J}.`),J}fetch(S){var x=this;return(0,N.Z)(function*(){const[H,J]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(J&&x.isCachedDataFresh(S.cacheMaxAgeMillis,H))return J;S.eTag=J&&J.eTag;const ae=yield x.client.fetch(S),be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&be.push(x.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(be),ae})()}}function jn(b=navigator){return b.languages&&b.languages[0]||b.language}class Xi{constructor(S,x,H,J,ae,be){this.firebaseInstallations=S,this.sdkVersion=x,this.namespace=H,this.projectId=J,this.apiKey=ae,this.appId=be}fetch(S){var x=this;return(0,N.Z)(function*(){const[H,J]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,st={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},it={sdk_version:x.sdkVersion,app_instance_id:H,app_instance_id_token:J,app_id:x.appId,language_code:jn()},wt={method:"POST",headers:st,body:JSON.stringify(it)},Bt=fetch(be,wt),Pt=new Promise((is,ir)=>{S.signal.addEventListener(()=>{const ga=new Error("The operation was aborted.");ga.name="AbortError",ir(ga)})});let Ai;try{yield Promise.race([Bt,Pt]),Ai=yield Bt}catch(is){let ir="fetch-client-network";throw"AbortError"===is?.name&&(ir="fetch-timeout"),hi.create(ir,{originalErrorMessage:is?.message})}let Br=Ai.status;const Wn=Ai.headers.get("ETag")||void 0;let pa,to;if(200===Ai.status){let is;try{is=yield Ai.json()}catch(ir){throw hi.create("fetch-client-parse",{originalErrorMessage:ir?.message})}pa=is.entries,to=is.state}if("INSTANCE_STATE_UNSPECIFIED"===to?Br=500:"NO_CHANGE"===to?Br=304:("NO_TEMPLATE"===to||"EMPTY_CONFIG"===to)&&(pa={}),304!==Br&&200!==Br)throw hi.create("fetch-status",{httpStatus:Br});return{status:Br,eTag:Wn,config:pa}})()}}class ea{constructor(S,x){this.client=S,this.storage=x}fetch(S){var x=this;return(0,N.Z)(function*(){const H=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:x,backoffCount:H}){var J=this;return(0,N.Z)(function*(){yield function fo(b,S){return new Promise((x,H)=>{const J=Math.max(S-Date.now(),0),ae=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(ae),H(hi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,x);try{const ae=yield J.client.fetch(S);return yield J.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function Ti(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ae))throw ae;const be={throttleEndTimeMillis:Date.now()+(0,ue.$s)(H),backoffCount:H+1};return yield J.storage.setThrottleMetadata(be),J.attemptFetch(S,be)}})()}}class Ao{constructor(S,x,H,J,ae){this.app=S,this._client=x,this._storageCache=H,this._storage=J,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kt(b,S){const x=b.target.error||void 0;return hi.create(S,{originalErrorMessage:x&&x?.message})}const Ss="app_namespace_store";class Oa{constructor(S,x,H,J=function Nr(){return new Promise((b,S)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=H=>{S(kt(H,"storage-open"))},x.onsuccess=H=>{b(H.target.result)},x.onupgradeneeded=H=>{0===H.oldVersion&&H.target.result.createObjectStore(Ss,{keyPath:"compositeKey"})}}catch(x){S(hi.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=S,this.appName=x,this.namespace=H,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var x=this;return(0,N.Z)(function*(){const H=yield x.openDbPromise;return new Promise((J,ae)=>{const st=H.transaction([Ss],"readonly").objectStore(Ss),it=x.createCompositeKey(S);try{const wt=st.get(it);wt.onerror=Bt=>{ae(kt(Bt,"storage-get"))},wt.onsuccess=Bt=>{const Pt=Bt.target.result;J(Pt?Pt.value:void 0)}}catch(wt){ae(hi.create("storage-get",{originalErrorMessage:wt?.message}))}})})()}set(S,x){var H=this;return(0,N.Z)(function*(){const J=yield H.openDbPromise;return new Promise((ae,be)=>{const it=J.transaction([Ss],"readwrite").objectStore(Ss),wt=H.createCompositeKey(S);try{const Bt=it.put({compositeKey:wt,value:x});Bt.onerror=Pt=>{be(kt(Pt,"storage-set"))},Bt.onsuccess=()=>{ae()}}catch(Bt){be(hi.create("storage-set",{originalErrorMessage:Bt?.message}))}})})()}delete(S){var x=this;return(0,N.Z)(function*(){const H=yield x.openDbPromise;return new Promise((J,ae)=>{const st=H.transaction([Ss],"readwrite").objectStore(Ss),it=x.createCompositeKey(S);try{const wt=st.delete(it);wt.onerror=Bt=>{ae(kt(Bt,"storage-delete"))},wt.onsuccess=()=>{J()}}catch(wt){ae(hi.create("storage-delete",{originalErrorMessage:wt?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class es{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,N.Z)(function*(){const x=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),J=S.storage.getActiveConfig(),ae=yield x;ae&&(S.lastFetchStatus=ae);const be=yield H;be&&(S.lastSuccessfulFetchTimestampMillis=be);const st=yield J;st&&(S.activeConfig=st)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function ta(){return As.apply(this,arguments)}function As(){return(As=(0,N.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Ci(){(0,re._registerComponent)(new fe.wA("remote-config",function b(S,{instanceIdentifier:x}){const H=S.getProvider("app").getImmediate(),J=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw hi.create("registration-window");if(!(0,ue.hl)())throw hi.create("indexed-db-unavailable");const{projectId:ae,apiKey:be,appId:st}=H.options;if(!ae)throw hi.create("registration-project-id");if(!be)throw hi.create("registration-api-key");if(!st)throw hi.create("registration-app-id");const it=new Oa(st,H.name,x=x||"firebase"),wt=new es(it),Bt=new Ce.Yd(vc);Bt.logLevel=Ce.in.ERROR;const Pt=new Xi(J,re.SDK_VERSION,x,ae,be,st),Ai=new ea(Pt,it),Br=new Ht(Ai,it,wt,Bt),Wn=new Ao(H,Br,wt,it,Bt);return function ti(b){const S=(0,ue.m9)(b);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Wn),Wn},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(vc,"0.4.4"),(0,re.registerVersion)(vc,"0.4.4","esm2017")}();const Cc=(b,S)=>S.some(x=>b instanceof x);let ts,en;const Na=new WeakMap,ri=new WeakMap,fi=new WeakMap,xo=new WeakMap,na=new WeakMap;let pi={get(b,S,x){if(b instanceof IDBTransaction){if("done"===S)return ri.get(b);if("objectStoreNames"===S)return b.objectStoreNames||fi.get(b);if("store"===S)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ns(b[S])},set:(b,S,x)=>(b[S]=x,!0),has:(b,S)=>b instanceof IDBTransaction&&("done"===S||"store"===S)||S in b};function go(b){return"function"==typeof b?function Ju(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Xu(){return en||(en=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...S){return b.apply(Ui(this),S),ns(Na.get(this))}:function(...S){return ns(b.apply(Ui(this),S))}:function(S,...x){const H=b.call(Ui(this),S,...x);return fi.set(H,S.sort?S.sort():[S]),ns(H)}}(b):(b instanceof IDBTransaction&&function Dh(b){if(ri.has(b))return;const S=new Promise((x,H)=>{const J=()=>{b.removeEventListener("complete",ae),b.removeEventListener("error",be),b.removeEventListener("abort",be)},ae=()=>{x(),J()},be=()=>{H(b.error||new DOMException("AbortError","AbortError")),J()};b.addEventListener("complete",ae),b.addEventListener("error",be),b.addEventListener("abort",be)});ri.set(b,S)}(b),Cc(b,function Qu(){return ts||(ts=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,pi):b)}function ns(b){if(b instanceof IDBRequest)return function Lr(b){const S=new Promise((x,H)=>{const J=()=>{b.removeEventListener("success",ae),b.removeEventListener("error",be)},ae=()=>{x(ns(b.result)),J()},be=()=>{H(b.error),J()};b.addEventListener("success",ae),b.addEventListener("error",be)});return S.then(x=>{x instanceof IDBCursor&&Na.set(x,b)}).catch(()=>{}),na.set(S,b),S}(b);if(xo.has(b))return xo.get(b);const S=go(b);return S!==b&&(xo.set(b,S),na.set(S,b)),S}const Ui=b=>na.get(b);function ra(b,S,{blocked:x,upgrade:H,blocking:J,terminated:ae}={}){const be=indexedDB.open(b,S),st=ns(be);return H&&be.addEventListener("upgradeneeded",it=>{H(ns(be.result),it.oldVersion,it.newVersion,ns(be.transaction))}),x&&be.addEventListener("blocked",()=>x()),st.then(it=>{ae&&it.addEventListener("close",()=>ae()),J&&it.addEventListener("versionchange",()=>J())}).catch(()=>{}),st}function Al(b,{blocked:S}={}){const x=indexedDB.deleteDatabase(b);return S&&x.addEventListener("blocked",()=>S()),ns(x).then(()=>{})}const Sh=["get","getKey","getAll","getAllKeys","count"],Zp=["put","add","delete","clear"],ed=new Map;function Dc(b,S){if(!(b instanceof IDBDatabase)||S in b||"string"!=typeof S)return;if(ed.get(S))return ed.get(S);const x=S.replace(/FromIndex$/,""),H=S!==x,J=Zp.includes(x);if(!(x in(H?IDBIndex:IDBObjectStore).prototype)||!J&&!Sh.includes(x))return;const ae=function(){var be=(0,N.Z)(function*(st,...it){const wt=this.transaction(st,J?"readwrite":"readonly");let Bt=wt.store;return H&&(Bt=Bt.index(it.shift())),(yield Promise.all([Bt[x](...it),J&&wt.done]))[0]});return function(it){return be.apply(this,arguments)}}();return ed.set(S,ae),ae}!function gi(b){pi=b(pi)}(b=>({...b,get:(S,x,H)=>Dc(S,x)||b.get(S,x,H),has:(S,x)=>!!Dc(S,x)||b.has(S,x)}));const td="/firebase-messaging-sw.js",Ah="/firebase-cloud-messaging-push-scope",Yp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qp="https://fcmregistrations.googleapis.com/v1",Jn="google.c.a.c_id",Xp="google.c.a.c_l",JE="google.c.a.ts";var Sc=function(b){return b.PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",b}(Sc||{});function Rs(b){const S=new Uint8Array(b);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function eg(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(x),J=new Uint8Array(H.length);for(let ae=0;ae<H.length;++ae)J[ae]=H.charCodeAt(ae);return J}const La="fcm_token_details_db",Fa=5,F_="fcm_token_object_Store";function nd(){return nd=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(La))return null;let S=null;return(yield ra(La,Fa,{upgrade:(H=(0,N.Z)(function*(J,ae,be,st){var it;if(ae<2||!J.objectStoreNames.contains(F_))return;const wt=st.objectStore(F_),Bt=yield wt.index("fcmSenderId").get(b);if(yield wt.clear(),Bt)if(2===ae){const Pt=Bt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;S={token:Pt.fcmToken,createTime:null!==(it=Pt.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Rs(Pt.vapidKey)}}}else if(3===ae){const Pt=Bt;S={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Rs(Pt.auth),p256dh:Rs(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Rs(Pt.vapidKey)}}}else if(4===ae){const Pt=Bt;S={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Rs(Pt.auth),p256dh:Rs(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Rs(Pt.vapidKey)}}}}),function(ae,be,st,it){return H.apply(this,arguments)})})).close(),yield Al(La),yield Al("fcm_vapid_details_db"),yield Al("undefined"),function mo(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:S}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var H}),nd.apply(this,arguments)}const Mo="firebase-messaging-database",Ac=1,xs="firebase-messaging-store";let Dr=null;function Rl(){return Dr||(Dr=ra(Mo,Ac,{upgrade:(b,S)=>{0===S&&b.createObjectStore(xs)}})),Dr}function mi(b){return xl.apply(this,arguments)}function xl(){return xl=(0,N.Z)(function*(b){const S=id(b),H=yield(yield Rl()).transaction(xs).objectStore(xs).get(S);if(H)return H;{const J=yield function tg(b){return nd.apply(this,arguments)}(b.appConfig.senderId);if(J)return yield Ml(b,J),J}}),xl.apply(this,arguments)}function Ml(b,S){return rd.apply(this,arguments)}function rd(){return(rd=(0,N.Z)(function*(b,S){const x=id(b),J=(yield Rl()).transaction(xs,"readwrite");return yield J.objectStore(xs).put(S,x),yield J.done,S})).apply(this,arguments)}function ko(){return(ko=(0,N.Z)(function*(b){const S=id(b),H=(yield Rl()).transaction(xs,"readwrite");yield H.objectStore(xs).delete(S),yield H.done})).apply(this,arguments)}function id({appConfig:b}){return b.appId}const Sr=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ng(b,S){return kl.apply(this,arguments)}function kl(){return(kl=(0,N.Z)(function*(b,S){const x=yield Rc(b),H=kh(S),J={method:"POST",headers:x,body:JSON.stringify(H)};let ae;try{ae=yield(yield fetch(sd(b.appConfig),J)).json()}catch(be){throw Sr.create("token-subscribe-failed",{errorInfo:be?.toString()})}if(ae.error)throw Sr.create("token-subscribe-failed",{errorInfo:ae.error.message});if(!ae.token)throw Sr.create("token-subscribe-no-token");return ae.token})).apply(this,arguments)}function ia(){return(ia=(0,N.Z)(function*(b,S){const x=yield Rc(b),H=kh(S.subscriptionOptions),J={method:"PATCH",headers:x,body:JSON.stringify(H)};let ae;try{ae=yield(yield fetch(`${sd(b.appConfig)}/${S.token}`,J)).json()}catch(be){throw Sr.create("token-update-failed",{errorInfo:be?.toString()})}if(ae.error)throw Sr.create("token-update-failed",{errorInfo:ae.error.message});if(!ae.token)throw Sr.create("token-update-no-token");return ae.token})).apply(this,arguments)}function Pl(b,S){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,N.Z)(function*(b,S){const H={method:"DELETE",headers:yield Rc(b)};try{const ae=yield(yield fetch(`${sd(b.appConfig)}/${S}`,H)).json();if(ae.error)throw Sr.create("token-unsubscribe-failed",{errorInfo:ae.error.message})}catch(J){throw Sr.create("token-unsubscribe-failed",{errorInfo:J?.toString()})}})).apply(this,arguments)}function sd({projectId:b}){return`${Qp}/projects/${b}/registrations`}function Rc(b){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,N.Z)(function*({appConfig:b,installations:S}){const x=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function kh({p256dh:b,auth:S,endpoint:x,vapidKey:H}){const J={web:{endpoint:x,auth:S,p256dh:b}};return H!==Yp&&(J.web.applicationPubKey=H),J}const U_=6048e5;function ig(){return ig=(0,N.Z)(function*(b){const S=yield function Mc(b,S){return od.apply(this,arguments)}(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:S.endpoint,auth:Rs(S.getKey("auth")),p256dh:Rs(S.getKey("p256dh"))},H=yield mi(b.firebaseDependencies);if(H){if(function Fh(b,S){return S.vapidKey===b.vapidKey&&S.endpoint===b.endpoint&&S.auth===b.auth&&S.p256dh===b.p256dh}(H.subscriptionOptions,x))return Date.now()>=H.createTime+U_?function Nh(b,S){return xc.apply(this,arguments)}(b,{token:H.token,createTime:Date.now(),subscriptionOptions:x}):H.token;try{yield Pl(b.firebaseDependencies,H.token)}catch(J){console.warn(J)}return Nl(b.firebaseDependencies,x)}return Nl(b.firebaseDependencies,x)}),ig.apply(this,arguments)}function Ol(){return Ol=(0,N.Z)(function*(b){const S=yield mi(b.firebaseDependencies);S&&(yield Pl(b.firebaseDependencies,S.token),yield function Rh(b){return ko.apply(this,arguments)}(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),Ol.apply(this,arguments)}function xc(){return xc=(0,N.Z)(function*(b,S){try{const x=yield function rg(b,S){return ia.apply(this,arguments)}(b.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:x,createTime:Date.now()});return yield Ml(b.firebaseDependencies,H),x}catch(x){throw yield function Oh(b){return Ol.apply(this,arguments)}(b),x}}),xc.apply(this,arguments)}function Nl(b,S){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,N.Z)(function*(b,S){const H={token:yield ng(b,S),createTime:Date.now(),subscriptionOptions:S};return yield Ml(b,H),H.token})).apply(this,arguments)}function od(){return(od=(0,N.Z)(function*(b,S){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:eg(S)})})).apply(this,arguments)}function kc(b){const S={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Ll(b,S){if(!S.notification)return;b.notification={};const x=S.notification.title;x&&(b.notification.title=x);const H=S.notification.body;H&&(b.notification.body=H);const J=S.notification.image;J&&(b.notification.image=J);const ae=S.notification.icon;ae&&(b.notification.icon=ae)}(S,b),function V_(b,S){S.data&&(b.data=S.data)}(S,b),function ad(b,S){var x,H,J,ae,be;if(!(S.fcmOptions||null!==(x=S.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const st=null!==(J=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==J?J:null===(ae=S.notification)||void 0===ae?void 0:ae.click_action;st&&(b.fcmOptions.link=st);const it=null===(be=S.fcmOptions)||void 0===be?void 0:be.analytics_label;it&&(b.fcmOptions.analyticsLabel=it)}(S,b),S}function ld(b,S){const x=[];for(let H=0;H<b.length;H++)x.push(b.charAt(H)),H<S.length&&x.push(S.charAt(H));return x.join("")}function cd(b){return Sr.create("missing-app-config-values",{valueName:b})}ld("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ld("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class og{constructor(S,x,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function B_(b){if(!b||!b.options)throw cd("App Configuration Object");if(!b.name)throw cd("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const H of S)if(!x[H])throw cd(H);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:J,installations:x,analyticsProvider:H}}_delete(){return Promise.resolve()}}function Fl(){return(Fl=(0,N.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(td,{scope:Ah}),b.swRegistration.update().catch(()=>{})}catch(S){throw Sr.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(b,S){if(!S&&!b.swRegistration&&(yield function Pc(b){return Fl.apply(this,arguments)}(b)),S||!b.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Sr.create("invalid-sw-registration");b.swRegistration=S}})).apply(this,arguments)}function Ul(){return(Ul=(0,N.Z)(function*(b,S){S?b.vapidKey=S:b.vapidKey||(b.vapidKey=Yp)})).apply(this,arguments)}function Vl(){return Vl=(0,N.Z)(function*(b,S){if(!navigator)throw Sr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sr.create("permission-blocked");return yield function Ua(b,S){return Ul.apply(this,arguments)}(b,S?.vapidKey),yield function Oc(b,S){return Ms.apply(this,arguments)}(b,S?.serviceWorkerRegistration),function Ph(b){return ig.apply(this,arguments)}(b)}),Vl.apply(this,arguments)}function ys(){return(ys=(0,N.Z)(function*(b,S,x){const H=function Vh(b){switch(b){case Sc.NOTIFICATION_CLICKED:return"notification_open";case Sc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:x[Jn],message_name:x[Xp],message_time:x[JE],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tn(){return Tn=(0,N.Z)(function*(b,S){const x=S.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Sc.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(kc(x)):b.onMessageHandler.next(kc(x)));const H=x.data;(function sg(b){return"object"==typeof b&&!!b&&Jn in b})(H)&&"1"===H["google.c.a.e"]&&(yield function j_(b,S,x){return ys.apply(this,arguments)}(b,x.messageType,H))}),Tn.apply(this,arguments)}const Va="@firebase/messaging",Di=b=>{const S=new og(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Nc(b,S){return Tn.apply(this,arguments)}(S,x)),S},H_=b=>{const S=b.getProvider("messaging").getImmediate();return{getToken:H=>function Uh(b,S){return Vl.apply(this,arguments)}(S,H)}};function sa(){return _i.apply(this,arguments)}function _i(){return(_i=(0,N.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ud(){(0,re._registerComponent)(new fe.wA("messaging",Di,"PUBLIC")),(0,re._registerComponent)(new fe.wA("messaging-internal",H_,"PRIVATE")),(0,re.registerVersion)(Va,"0.12.4"),(0,re.registerVersion)(Va,"0.12.4","esm2017")}();const Ba="analytics",jh="firebase_id",Lt="origin",Fc=6e4,z_="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uc="https://www.googletagmanager.com/gtag/js",Ur=new Ce.Yd("@firebase/analytics"),Ar=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Po(b){if(!b.startsWith(Uc)){const S=Ar.create("invalid-gtag-resource",{gtagURL:b});return Ur.warn(S.message),""}return b}function la(b){return Promise.all(b.map(S=>S.catch(x=>x)))}function Le(){return(Le=(0,N.Z)(function*(b,S,x,H,J,ae){const be=H[J];try{if(be)yield S[be];else{const it=(yield la(x)).find(wt=>wt.measurementId===J);it&&(yield S[it.appId])}}catch(st){Ur.error(st)}b("config",J,ae)})).apply(this,arguments)}function rs(){return(rs=(0,N.Z)(function*(b,S,x,H,J){try{let ae=[];if(J&&J.send_to){let be=J.send_to;Array.isArray(be)||(be=[be]);const st=yield la(x);for(const it of be){const wt=st.find(Pt=>Pt.measurementId===it),Bt=wt&&S[wt.appId];if(!Bt){ae=[];break}ae.push(Bt)}}0===ae.length&&(ae=Object.values(S)),yield Promise.all(ae),b("event",H,J||{})}catch(ae){Ur.error(ae)}})).apply(this,arguments)}const Bl=30,pd=new class zh{constructor(S={},x=1e3){this.throttleMetadata=S,this.intervalMillis=x}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,x){this.throttleMetadata[S]=x}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ug(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function gd(){return(gd=(0,N.Z)(function*(b){var S;const{appId:x,apiKey:H}=b,J={method:"GET",headers:ug(H)},ae=z_.replace("{app-id}",x),be=yield fetch(ae,J);if(200!==be.status&&304!==be.status){let st="";try{const it=yield be.json();null!==(S=it.error)&&void 0!==S&&S.message&&(st=it.error.message)}catch{}throw Ar.create("config-fetch-failed",{httpStatus:be.status,responseMessage:st})}return be.json()})).apply(this,arguments)}function Zs(){return(Zs=(0,N.Z)(function*(b,S=pd,x){const{appId:H,apiKey:J,measurementId:ae}=b.options;if(!H)throw Ar.create("no-app-id");if(!J){if(ae)return{measurementId:ae,appId:H};throw Ar.create("no-api-key")}const be=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},st=new Wh;return setTimeout((0,N.Z)(function*(){st.abort()}),void 0!==x?x:Fc),Gh({appId:H,apiKey:J,measurementId:ae},be,st,S)})).apply(this,arguments)}function Gh(b,S,x){return ca.apply(this,arguments)}function ca(){return ca=(0,N.Z)(function*(b,{throttleEndTimeMillis:S,backoffCount:x},H,J=pd){var ae;const{appId:be,measurementId:st}=b;try{yield function Ys(b,S){return new Promise((x,H)=>{const J=Math.max(S-Date.now(),0),ae=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(ae),H(Ar.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(H,S)}catch(it){if(st)return Ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${it?.message}]`),{appId:be,measurementId:st};throw it}try{const it=yield function tw(b){return gd.apply(this,arguments)}(b);return J.deleteThrottleMetadata(be),it}catch(it){const wt=it;if(!function G_(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}(wt)){if(J.deleteThrottleMetadata(be),st)return Ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${wt?.message}]`),{appId:be,measurementId:st};throw it}const Bt=503===Number(null===(ae=wt?.customData)||void 0===ae?void 0:ae.httpStatus)?(0,ue.$s)(x,J.intervalMillis,Bl):(0,ue.$s)(x,J.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Bt,backoffCount:x+1};return J.setThrottleMetadata(be,Pt),Ur.debug(`Calling attemptFetch again in ${Bt} millis`),Gh(b,Pt,H,J)}}),ca.apply(this,arguments)}class Wh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Bc,ks;function jc(){return(jc=(0,N.Z)(function*(b,S,x,H,J){if(J&&J.global)b("event",x,H);else{const ae=yield S;b("event",x,Object.assign(Object.assign({},H),{send_to:ae}))}})).apply(this,arguments)}function Ps(){return(Ps=(0,N.Z)(function*(){if(!(0,ue.hl)())return Ur.warn(Ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(b){return Ur.warn(Ar.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Qs(){return Qs=(0,N.Z)(function*(b,S,x,H,J,ae,be){var st;const it=function si(b){return Zs.apply(this,arguments)}(b);it.then(Br=>{x[Br.measurementId]=Br.appId,b.options.measurementId&&Br.measurementId!==b.options.measurementId&&Ur.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Br.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Br=>Ur.error(Br)),S.push(it);const wt=function Et(){return Ps.apply(this,arguments)}().then(Br=>{if(Br)return H.getId()}),[Bt,Pt]=yield Promise.all([it,wt]);(function Vc(b){const S=window.document.getElementsByTagName("script");for(const x of Object.values(S))if(x.src&&x.src.includes(Uc)&&x.src.includes(b))return x;return null})(ae)||function cg(b,S){const x=function hd(b,S){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(b,S)),x}("firebase-js-sdk-policy",{createScriptURL:Po}),H=document.createElement("script"),J=`${Uc}?l=${b}&id=${S}`;H.src=x?x?.createScriptURL(J):J,H.async=!0,document.head.appendChild(H)}(ae,Bt.measurementId),ks&&(J("consent","default",ks),function Oo(b){ks=b}(void 0)),J("js",new Date);const Ai=null!==(st=be?.config)&&void 0!==st?st:{};return Ai[Lt]="firebase",Ai.update=!0,null!=Pt&&(Ai[jh]=Pt),J("config",Bt.measurementId,Ai),Bc&&(J("set",Bc),function tr(b){Bc=b}(void 0)),Bt.measurementId}),Qs.apply(this,arguments)}class Hc{constructor(S){this.app=S}_delete(){return delete Xs[this.app.options.appId],Promise.resolve()}}let Xs={},jl=[];const Vr={};let yi,pr,Yn="dataLayer",Os=!1;function ua(b,S,x){!function ja(){const b=[];if((0,ue.ru)()&&b.push("This is a browser extension environment."),(0,ue.zI)()||b.push("Cookies are not available."),b.length>0){const S=b.map((H,J)=>`(${J+1}) ${H}`).join(" "),x=Ar.create("invalid-analytics-context",{errorInfo:S});Ur.warn(x.message)}}();const H=b.options.appId;if(!H)throw Ar.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Ar.create("no-api-key");Ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xs[H])throw Ar.create("already-exists",{id:H});if(!Os){!function Hh(b){let S=[];Array.isArray(window[b])?S=window[b]:window[b]=S}(Yn);const{wrappedGtag:ae,gtagCore:be}=function ii(b,S,x,H,J){let ae=function(...be){window[H].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ae=window[J]),window[J]=function fd(b,S,x,H){function ae(){return ae=(0,N.Z)(function*(be,...st){try{if("event"===be){const[it,wt]=st;yield function un(b,S,x,H,J){return rs.apply(this,arguments)}(b,S,x,it,wt)}else if("config"===be){const[it,wt]=st;yield function $h(b,S,x,H,J,ae){return Le.apply(this,arguments)}(b,S,x,H,it,wt)}else if("consent"===be){const[it]=st;b("consent","update",it)}else if("get"===be){const[it,wt,Bt]=st;b("get",it,wt,Bt)}else if("set"===be){const[it]=st;b("set",it)}else b(be,...st)}catch(it){Ur.error(it)}}),ae.apply(this,arguments)}return function J(be){return ae.apply(this,arguments)}}(ae,b,S,x),{gtagCore:ae,wrappedGtag:window[J]}}(Xs,jl,Vr,Yn,"gtag");pr=ae,yi=be,Os=!0}return Xs[H]=function nr(b,S,x,H,J,ae,be){return Qs.apply(this,arguments)}(b,jl,Vr,S,yi,Yn,x),new Hc(b)}function Zh(){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,N.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const zc="@firebase/analytics";!function Qh(){(0,re._registerComponent)(new fe.wA(Ba,(S,{options:x})=>ua(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,re._registerComponent)(new fe.wA("analytics-internal",function b(S){try{const x=S.getProvider(Ba).getImmediate();return{logEvent:(H,J,ae)=>function Z_(b,S,x,H){b=(0,ue.m9)(b),function W_(b,S,x,H,J){return jc.apply(this,arguments)}(pr,Xs[b.app.options.appId],S,x,H).catch(J=>Ur.error(J))}(x,H,J,ae)}}catch(x){throw Ar.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,re.registerVersion)(zc,"0.10.0"),(0,re.registerVersion)(zc,"0.10.0","esm2017")}();var Gc=U(1954),$l=U(2631);const dg=new class rw extends $l.v{}(class Xh extends Gc.o{constructor(S,x){super(S,x),this.scheduler=S,this.work=x}schedule(S,x=0){return x>0?super.schedule(S,x):(this.delay=x,this.state=S,this.scheduler.flush(this),this)}execute(S,x){return x>0||this.closed?super.execute(S,x):this._execute(S,x)}requestAsyncId(S,x,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,x,H):(S.flush(this),0)}});var Y_=U(6321),te=U(5592),dn=U(9397),gr=U(3093),O=U(5137);const zr=new p.GfV("7.6.1"),No="__angularfire_symbol__analyticsIsSupportedValue",da="__angularfire_symbol__analyticsIsSupported",Wc="__angularfire_symbol__remoteConfigIsSupportedValue",Hn="__angularfire_symbol__remoteConfigIsSupported",qc="__angularfire_symbol__messagingIsSupportedValue",Lo="__angularfire_symbol__messagingIsSupported";function Kc(b,S,x){if(S){if(1===S.length)return S[0];const ae=S.filter(be=>be.app===x);if(1===ae.length)return ae[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[da]||(globalThis[da]=Zh().then(b=>globalThis[No]=b).catch(()=>globalThis[No]=!1)),globalThis[Lo]||(globalThis[Lo]=sa().then(b=>globalThis[qc]=b).catch(()=>globalThis[qc]=!1)),globalThis[Hn]||(globalThis[Hn]=ta().then(b=>globalThis[Wc]=b).catch(()=>globalThis[Wc]=!1));const ef=(b,S)=>{const x=S?[S]:(0,W.C6)(),H=[];return x.forEach(J=>{J.container.getProvider(b).instances.forEach(be=>{H.includes(be)||H.push(be)})}),H};function ha(){}class fa{constructor(S,x=dg){this.zone=S,this.delegate=x}now(){return this.delegate.now()}schedule(S,x,H){const J=this.zone;return this.delegate.schedule(function(be){J.runGuarded(()=>{S.apply(this,[be])})},x,H)}}class hg{constructor(S){this.zone=S,this.task=null}call(S,x){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ha,{},ha,ha)),x.pipe((0,dn.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fn=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new fa(Zone.current)),this.insideAngular=x.run(()=>new fa(Zone.current,Y_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(p.R0b))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function eo(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Ns(b){return eo().ngZone.run(()=>b())}function Yc(b){return b.pipe((0,gr.Q)(eo().outsideAngular))}function za(b){return eo(),function Ga(b){return function(x){return(x=x.lift(new hg(b.ngZone))).pipe((0,O.R)(b.outsideAngular),(0,gr.Q)(b.insideAngular))}}(eo())(b)}const Wa=(b,S)=>function(){const H=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),Ns(()=>b.apply(void 0,H))},yo=(b,S)=>function(){let x;const H=arguments;for(let ae=0;ae<arguments.length;ae++)"function"==typeof H[ae]&&(S&&(x||(x=Ns(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ha,{},ha,ha)))),H[ae]=Wa(H[ae],x));const J=function Zc(b){return eo().ngZone.runOutsideAngular(()=>b())}(()=>b.apply(this,H));if(!S){if(J instanceof te.y){const ae=eo();return J.pipe((0,O.R)(ae.outsideAngular),(0,gr.Q)(ae.insideAngular))}return Ns(()=>J)}return J instanceof te.y?J.pipe(za):J instanceof Promise?Ns(()=>new Promise((ae,be)=>J.then(st=>Ns(()=>ae(st)),st=>Ns(()=>be(st))))):"function"==typeof J&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),J.apply(this,arguments)}:Ns(()=>J)}},6710:(mt,Ae,U)=>{U.d(Ae,{$:()=>td,A:()=>Q,D:()=>Oe,I:()=>bh,J:()=>Sl,L:()=>rt,N:()=>yt,P:()=>nr,Q:()=>Oa,R:()=>qh,U:()=>Tc,V:()=>ta,W:()=>As,X:()=>Ro,Y:()=>Qu,Z:()=>Xu,_:()=>na,a:()=>Lc,a0:()=>Yp,a1:()=>Jn,a2:()=>ew,a3:()=>F_,a4:()=>nd,a5:()=>Mo,a6:()=>xs,a7:()=>Rl,a8:()=>xl,a9:()=>rd,aA:()=>Y,aB:()=>da,aC:()=>ze,aD:()=>mn,aE:()=>dn,aF:()=>vd,aG:()=>K_,aH:()=>lr,aL:()=>aa,aO:()=>ts,aa:()=>Rh,ab:()=>id,ac:()=>xh,ad:()=>rg,ae:()=>Pl,af:()=>sd,ai:()=>U_,aj:()=>ig,ak:()=>Oh,an:()=>Ju,ao:()=>Ll,aq:()=>Ul,ar:()=>Va,as:()=>Ze,at:()=>ct,au:()=>ke,av:()=>ce,aw:()=>Pt,ax:()=>Lo,ay:()=>wn,az:()=>Re,b:()=>dd,c:()=>pr,d:()=>ua,e:()=>$c,f:()=>zc,g:()=>rw,h:()=>Gc,i:()=>Ks,j:()=>Y_,k:()=>to,l:()=>It,m:()=>ga,p:()=>Me,r:()=>Pn,s:()=>er,u:()=>Et});var p=U(5861),W=U(9058),N=U(7592),re=U(7582),ue=U(7879),fe=U(4537);const Me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},tt=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fe=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new ue.Yd("@firebase/auth");function pt(I,...m){Ne.logLevel<=ue.in.ERROR&&Ne.error(`Auth (${N.SDK_VERSION}): ${I}`,...m)}function ce(I,...m){throw Be(I,...m)}function Re(I,...m){return Be(I,...m)}function me(I,m,y){const T=Object.assign(Object.assign({},tt()),{[m]:y});return new W.LL("auth","Firebase",T).create(m,{appName:I.name})}function De(I,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&ce(I,"argument-error"),me(I,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(I,...m){if("string"!=typeof I){const y=m[0],T=[...m.slice(1)];return T[0]&&(T[0].appName=I.name),I._errorFactory.create(y,...T)}return Fe.create(I,...m)}function Y(I,m,...y){if(!I)throw Be(m,...y)}function Pe(I){const m="INTERNAL ASSERTION FAILED: "+I;throw pt(m),new Error(m)}function Ze(I,m){I||Pe(m)}function bt(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function hn(){return"http:"===On()||"https:"===On()}function On(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class Dn{constructor(m,y){this.shortDelay=m,this.longDelay=y,Ze(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function Nn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(hn()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $r(I,m){Ze(I.emulator,"Emulator should always be set here");const{url:y}=I.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class he{static initialize(m,y,T){this.fetchImpl=m,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},we=new Dn(3e4,6e4);function pe(I,m){return I.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:I.tenantId}):m}function xe(I,m,y,T){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,p.Z)(function*(I,m,y,T,M={}){return nt(I,M,(0,p.Z)(function*(){let F={},se={};T&&("GET"===m?se=T:F={body:JSON.stringify(T)});const _e=(0,W.xO)(Object.assign({key:I.config.apiKey},se)).slice(1),Qe=yield I._getAdditionalHeaders();return Qe["Content-Type"]="application/json",I.languageCode&&(Qe["X-Firebase-Locale"]=I.languageCode),he.fetch()(nn(I,I.config.apiHost,y,_e),Object.assign({method:m,headers:Qe,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function nt(I,m,y){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(I,m,y){I._canInitEmulator=!1;const T=Object.assign(Object.assign({},ve),m);try{const M=new _t(I),F=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const se=yield F.json();if("needConfirmation"in se)throw En(I,"account-exists-with-different-credential",se);if(F.ok&&!("errorMessage"in se))return se;{const _e=F.ok?se.errorMessage:se.error.message,[Qe,at]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qe)throw En(I,"credential-already-in-use",se);if("EMAIL_EXISTS"===Qe)throw En(I,"email-already-in-use",se);if("USER_DISABLED"===Qe)throw En(I,"user-disabled",se);const Tt=T[Qe]||Qe.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw me(I,Tt,at);ce(I,Tt)}}catch(M){if(M instanceof W.ZR)throw M;ce(I,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function pn(I,m,y,T){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(I,m,y,T,M={}){const F=yield xe(I,m,y,T,M);return"mfaPendingCredential"in F&&ce(I,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function nn(I,m,y,T){const M=`${m}${y}?${T}`;return I.config.emulator?$r(I.config,M):`${I.config.apiScheme}://${M}`}class _t{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(Re(this.auth,"network-request-failed")),we.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function En(I,m,y){const T={appName:I.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const M=Re(I,m,T);return M.customData._tokenResponse=y,M}function Mn(){return(Mn=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Gn(I){if(I)try{const m=new Date(Number(I));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ms(){return(ms=(0,p.Z)(function*(I,m=!1){const y=(0,W.m9)(I),T=yield y.getIdToken(m),M=Mt(T);Y(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,se=F?.sign_in_provider;return{claims:M,token:T,authTime:Gn(Dt(M.auth_time)),issuedAtTime:Gn(Dt(M.iat)),expirationTime:Gn(Dt(M.exp)),signInProvider:se||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function Dt(I){return 1e3*Number(I)}function Mt(I){const[m,y,T]=I.split(".");if(void 0===m||void 0===y||void 0===T)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,W.tV)(y);return M?JSON.parse(M):(pt("Failed to decode base64 JWT payload"),null)}catch(M){return pt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Jt(I,m){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(I,m,y=!1){if(y)return m;try{return yield m}catch(T){throw T instanceof W.ZR&&function Tr({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(T)&&I.auth.currentUser===I&&(yield I.auth.signOut()),T}})).apply(this,arguments)}class Kt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(m);this.timerId=setTimeout((0,p.Z)(function*(){yield y.iteration()}),T)}iteration(){var m=this;return(0,p.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&m.schedule(!0))}m.schedule()})()}}class Bn{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gn(this.lastLoginAt),this.creationTime=Gn(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bi(I){return ln.apply(this,arguments)}function ln(){return ln=(0,p.Z)(function*(I){var m;const y=I.auth,T=yield I.getIdToken(),M=yield Jt(I,function Ii(I,m){return br.apply(this,arguments)}(y,{idToken:T}));Y(M?.users.length,y,"internal-error");const F=M.users[0];I._notifyReloadListener(F);const se=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?function Oi(I){return I.map(m=>{var{providerId:y}=m,T=(0,re._T)(m,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(F.providerUserInfo):[],_e=function Fn(I,m){return[...I.filter(T=>!m.some(M=>M.providerId===T.providerId)),...m]}(I.providerData,se),Tt=!!I.isAnonymous&&!(I.email&&F.passwordHash||_e?.length),sn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:_e,metadata:new Bn(F.createdAt,F.lastLoginAt),isAnonymous:Tt};Object.assign(I,sn)}),ln.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(I){const m=(0,W.m9)(I);yield bi(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(I,m){const y=yield nt(I,{},(0,p.Z)(function*(){const T=(0,W.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:F}=I.config,se=nn(I,M,"/v1/token",`key=${F}`),_e=yield I._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",he.fetch()(se,{method:"POST",headers:_e,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Y(m.idToken,"internal-error"),Y(typeof m.idToken<"u","internal-error"),Y(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Vt(I){const m=Mt(I);return Y(m,"internal-error"),Y(typeof m.exp<"u","internal-error"),Y(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var T=this;return(0,p.Z)(function*(){return Y(!T.accessToken||T.refreshToken,m,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(m,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var T=this;return(0,p.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:se}=yield function Qi(I,m){return Cr.apply(this,arguments)}(m,y);T.updateTokensAndExpiration(M,F,Number(se))})()}updateTokensAndExpiration(m,y,T){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(m,y){const{refreshToken:T,accessToken:M,expirationTime:F}=y,se=new ar;return T&&(Y("string"==typeof T,"internal-error",{appName:m}),se.refreshToken=T),M&&(Y("string"==typeof M,"internal-error",{appName:m}),se.accessToken=M),F&&(Y("number"==typeof F,"internal-error",{appName:m}),se.expirationTime=F),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ar,this.toJSON())}_performRefresh(){return Pe("not implemented")}}function Ie(I,m){Y("string"==typeof I||typeof I>"u","internal-error",{appName:m})}class X{constructor(m){var{uid:y,auth:T,stsTokenManager:M}=m,F=(0,re._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Bn(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,p.Z)(function*(){const T=yield Jt(y,y.stsTokenManager.getToken(y.auth,m));return Y(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(m){return function ei(I){return ms.apply(this,arguments)}(this,m)}reload(){return function di(I){return Qt.apply(this,arguments)}(this)}_assign(m){this!==m&&(Y(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const y=new X(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(m){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var T=this;return(0,p.Z)(function*(){let M=!1;m.idToken&&m.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(m),M=!0),y&&(yield bi(T)),yield T.auth._persistUserIfCurrent(T),M&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var m=this;return(0,p.Z)(function*(){const y=yield m.getIdToken();return yield Jt(m,function zn(I,m){return Mn.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var T,M,F,se,_e,Qe,at,Tt;const sn=null!==(T=y.displayName)&&void 0!==T?T:void 0,ji=null!==(M=y.email)&&void 0!==M?M:void 0,vs=null!==(F=y.phoneNumber)&&void 0!==F?F:void 0,Jc=null!==(se=y.photoURL)&&void 0!==se?se:void 0,gg=null!==(_e=y.tenantId)&&void 0!==_e?_e:void 0,bd=null!==(Qe=y._redirectEventId)&&void 0!==Qe?Qe:void 0,Gl=null!==(at=y.createdAt)&&void 0!==at?at:void 0,eu=null!==(Tt=y.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:mg,emailVerified:ey,isAnonymous:tf,providerData:nf,stsTokenManager:ty}=y;Y(mg&&ty,m,"internal-error");const ny=ar.fromJSON(this.name,ty);Y("string"==typeof mg,m,"internal-error"),Ie(sn,m.name),Ie(ji,m.name),Y("boolean"==typeof ey,m,"internal-error"),Y("boolean"==typeof tf,m,"internal-error"),Ie(vs,m.name),Ie(Jc,m.name),Ie(gg,m.name),Ie(bd,m.name),Ie(Gl,m.name),Ie(eu,m.name);const ry=new X({uid:mg,auth:m,email:ji,emailVerified:ey,displayName:sn,isAnonymous:tf,photoURL:Jc,phoneNumber:vs,tenantId:gg,stsTokenManager:ny,createdAt:Gl,lastLoginAt:eu});return nf&&Array.isArray(nf)&&(ry.providerData=nf.map(ow=>Object.assign({},ow))),bd&&(ry._redirectEventId=bd),ry}static _fromIdTokenResponse(m,y,T=!1){return(0,p.Z)(function*(){const M=new ar;M.updateFromServerResponse(y);const F=new X({uid:y.localId,auth:m,stsTokenManager:M,isAnonymous:T});return yield bi(F),F})()}}const Te=new Map;function ze(I){Ze(I instanceof Function,"Expected a class definition");let m=Te.get(I);return m?(Ze(m instanceof I,"Instance stored in cache mismatched with class"),m):(m=new I,Te.set(I,m),m)}const yt=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(y,T){var M=this;return(0,p.Z)(function*(){M.storage[y]=T})()}_get(y){var T=this;return(0,p.Z)(function*(){const M=T.storage[y];return void 0===M?null:M})()}_remove(y){var T=this;return(0,p.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return I.type="NONE",I})();function mn(I,m,y){return`firebase:${I}:${m}:${y}`}class K{constructor(m,y,T){this.persistence=m,this.auth=y,this.userKey=T;const{config:M,name:F}=this.auth;this.fullUserKey=mn(this.userKey,M.apiKey,F),this.fullPersistenceKey=mn("persistence",M.apiKey,F),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,p.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?X._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,p.Z)(function*(){if(y.persistence===m)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,T="authUser"){return(0,p.Z)(function*(){if(!y.length)return new K(ze(yt),m,T);const M=(yield Promise.all(y.map(function(){var at=(0,p.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return at.apply(this,arguments)}}()))).filter(at=>at);let F=M[0]||ze(yt);const se=mn(T,m.config.apiKey,m.name);let _e=null;for(const at of y)try{const Tt=yield at._get(se);if(Tt){const sn=X._fromJSON(m,Tt);at!==F&&(_e=sn),F=at;break}}catch{}const Qe=M.filter(at=>at._shouldAllowMigration);return F._shouldAllowMigration&&Qe.length?(F=Qe[0],_e&&(yield F._set(se,_e.toJSON())),yield Promise.all(y.map(function(){var at=(0,p.Z)(function*(Tt){if(Tt!==F)try{yield Tt._remove(se)}catch{}});return function(Tt){return at.apply(this,arguments)}}())),new K(F,m,T)):new K(F,m,T)})()}}function q(I){const m=I.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(oe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(B(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Xe(m))return"Blackberry";if(Ft(m))return"Webos";if(j(m))return"Safari";if((m.includes("chrome/")||L(m))&&!m.includes("edge/"))return"Chrome";if(ke(m))return"Android";{const T=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function B(I=(0,W.z$)()){return/firefox\//i.test(I)}function j(I=(0,W.z$)()){const m=I.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function L(I=(0,W.z$)()){return/crios\//i.test(I)}function oe(I=(0,W.z$)()){return/iemobile/i.test(I)}function ke(I=(0,W.z$)()){return/android/i.test(I)}function Xe(I=(0,W.z$)()){return/blackberry/i.test(I)}function Ft(I=(0,W.z$)()){return/webos/i.test(I)}function ct(I=(0,W.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function wn(I=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}function Zt(I=(0,W.z$)()){return ct(I)||ke(I)||Ft(I)||Xe(I)||/windows phone/i.test(I)||oe(I)}function Qo(I,m=[]){let y;switch(I){case"Browser":y=q((0,W.z$)());break;case"Worker":y=`${q((0,W.z$)())}-${I}`;break;default:y=I}const T=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${N.SDK_VERSION}/${T}`}function zs(){return(zs=(0,p.Z)(function*(I){return(yield xe(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gs(I,m){return _s.apply(this,arguments)}function _s(){return(_s=(0,p.Z)(function*(I,m){return xe(I,"GET","/v2/recaptchaConfig",pe(I,m))})).apply(this,arguments)}function cn(I){return void 0!==I&&void 0!==I.getResponse}function Do(I){return void 0!==I&&void 0!==I.enterprise}class Sa{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function _c(I){return new Promise((m,y)=>{const T=document.createElement("script");T.setAttribute("src",I),T.onload=m,T.onerror=M=>{const F=Re("internal-error");F.customData=M,y(F)},T.type="text/javascript",T.charset="UTF-8",function mc(){var I,m;return null!==(m=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==m?m:document}().appendChild(T)})}function uo(I){return`__${I}${Math.floor(1e6*Math.random())}`}class Ra{constructor(m){this.type="recaptcha-enterprise",this.auth=lr(m)}verify(m="verify",y=!1){var T=this;return(0,p.Z)(function*(){function F(){return F=(0,p.Z)(function*(_e){if(!y){if(null==_e.tenantId&&null!=_e._agentRecaptchaConfig)return _e._agentRecaptchaConfig.siteKey;if(null!=_e.tenantId&&void 0!==_e._tenantRecaptchaConfigs[_e.tenantId])return _e._tenantRecaptchaConfigs[_e.tenantId].siteKey}return new Promise(function(){var Qe=(0,p.Z)(function*(at,Tt){Gs(_e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(sn=>{if(void 0!==sn.recaptchaKey){const ji=new Sa(sn);return null==_e.tenantId?_e._agentRecaptchaConfig=ji:_e._tenantRecaptchaConfigs[_e.tenantId]=ji,at(ji.siteKey)}Tt(new Error("recaptcha Enterprise site key undefined"))}).catch(sn=>{Tt(sn)})});return function(at,Tt){return Qe.apply(this,arguments)}}())}),F.apply(this,arguments)}function se(_e,Qe,at){const Tt=window.grecaptcha;Do(Tt)?Tt.enterprise.ready(()=>{Tt.enterprise.execute(_e,{action:m}).then(sn=>{Qe(sn)}).catch(()=>{Qe("NO_RECAPTCHA")})}):at(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((_e,Qe)=>{(function M(_e){return F.apply(this,arguments)})(T.auth).then(at=>{if(!y&&Do(window.grecaptcha))se(at,_e,Qe);else{if(typeof window>"u")return void Qe(new Error("RecaptchaVerifier is only supported in browser"));_c("https://www.google.com/recaptcha/enterprise.js?render="+at).then(()=>{se(at,_e,Qe)}).catch(Tt=>{Qe(Tt)})}}).catch(at=>{Qe(at)})})})()}}function ho(I,m,y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,p.Z)(function*(I,m,y,T=!1){const M=new Ra(I);let F;try{F=yield M.verify(y)}catch{F=yield M.verify(y,!0)}const se=Object.assign({},m);return Object.assign(se,T?{captchaResp:F}:{captchaResponse:F}),Object.assign(se,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(se,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),se})).apply(this,arguments)}class Tl{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const T=F=>new Promise((se,_e)=>{try{se(m(F))}catch(Qe){_e(Qe)}});T.onAbort=y,this.queue.push(T);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,p.Z)(function*(){if(y.auth.currentUser===m)return;const T=[];try{for(const M of y.queue)yield M(m),M.onAbort&&T.push(M.onAbort)}catch(M){T.reverse();for(const F of T)try{F()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class Cl{constructor(m,y,T,M){this.app=m,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=T,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O_(this),this.idTokenSubscription=new O_(this),this.beforeStateQueue=new Tl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(m,y){var T=this;return y&&(this._popupRedirectResolver=ze(y)),this._initializationPromise=this.queue((0,p.Z)(function*(){var M,F;if(!T._deleted&&(T.persistenceManager=yield K.create(T,m),!T._deleted)){if(null!==(M=T._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(F=T.currentUser)||void 0===F?void 0:F.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,p.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,p.Z)(function*(){var T;const M=yield y.assertedPersistence.getCurrentUser();let F=M,se=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const _e=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,Qe=F?._redirectEventId,at=yield y.tryRedirectSignIn(m);(!_e||_e===Qe)&&at?.user&&(F=at.user,se=!0)}if(!F)return y.directlySetCurrentUser(null);if(!F._redirectEventId){if(se)try{yield y.beforeStateQueue.runMiddleware(F)}catch(_e){F=M,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(_e))}return F?y.reloadAndSetCurrentUserOrClear(F):y.directlySetCurrentUser(null)}return Y(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===F._redirectEventId?y.directlySetCurrentUser(F):y.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var y=this;return(0,p.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,p.Z)(function*(){try{yield bi(m)}catch(T){if("auth/network-request-failed"!==T?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Ln(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var m=this;return(0,p.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,p.Z)(function*(){const T=m?(0,W.m9)(m):null;return T&&Y(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(m,y=!1){var T=this;return(0,p.Z)(function*(){if(!T._deleted)return m&&Y(T.tenantId===m.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(m)),T.queue((0,p.Z)(function*(){yield T.directlySetCurrentUser(m),T.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,p.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,p.Z)(function*(){yield y.assertedPersistence.setPersistence(ze(m))}))}initializeRecaptchaConfig(){var m=this;return(0,p.Z)(function*(){const y=yield Gs(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new Sa(y);null==m.tenantId?m._agentRecaptchaConfig=T:m._tenantRecaptchaConfigs[m.tenantId]=T,T.emailPasswordEnabled&&new Ra(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new W.LL("auth","Firebase",m())}onAuthStateChanged(m,y,T){return this.registerStateListener(this.authStateSubscription,m,y,T)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,T){return this.registerStateListener(this.idTokenSubscription,m,y,T)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var T=this;return(0,p.Z)(function*(){const M=yield T.getOrInitRedirectPersistenceManager(y);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,p.Z)(function*(){if(!y.redirectPersistenceManager){const T=m&&ze(m)||y._popupRedirectResolver;Y(T,y,"argument-error"),y.redirectPersistenceManager=yield K.create(y,[ze(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,p.Z)(function*(){var T,M;return y._isInitialized&&(yield y.queue((0,p.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===m?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,p.Z)(function*(){if(m===y.currentUser)return y.queue((0,p.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,T,M){if(this._deleted)return()=>{};const F="function"==typeof y?y:y.next.bind(y),se=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(se,this,"internal-error"),se.then(()=>F(this.currentUser)),"function"==typeof y?m.addObserver(y,T,M):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,p.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Qo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,p.Z)(function*(){var y;const T={"X-Client-Version":m.clientVersion};m.app.options.appId&&(T["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();M&&(T["X-Firebase-Client"]=M);const F=yield m._getAppCheckToken();return F&&(T["X-Firebase-AppCheck"]=F),T})()}_getAppCheckToken(){var m=this;return(0,p.Z)(function*(){var y;const T=yield null===(y=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return T?.error&&function vt(I,...m){Ne.logLevel<=ue.in.WARN&&Ne.warn(`Auth (${N.SDK_VERSION}): ${I}`,...m)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function lr(I){return(0,W.m9)(I)}class O_{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,W.ne)(y=>this.observer=y)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bh(I,m,y){const T=lr(I);Y(T._canInitEmulator,T,"emulator-config-failed"),Y(/^https?:\/\//.test(m),T,"invalid-emulator-scheme");const M=!!y?.disableWarnings,F=Li(m),{host:se,port:_e}=function Dl(I){const m=Li(I),y=/(\/\/)?([^?#/]+)/.exec(I.substr(m.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(T);if(M){const F=M[1];return{host:F,port:yc(T.substr(F.length+1))}}{const[F,se]=T.split(":");return{host:F,port:yc(se)}}}(m);T.config.emulator={url:`${F}//${se}${null===_e?"":`:${_e}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:se,port:_e,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function qp(){function I(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}function Li(I){const m=I.indexOf(":");return m<0?"":I.substr(0,m+1)}function yc(I){if(!I)return null;const m=Number(I);return isNaN(m)?null:m}class Sl{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return Pe("not implemented")}_getIdTokenResponse(m){return Pe("not implemented")}_linkToIdToken(m,y){return Pe("not implemented")}_getReauthenticationResolver(m){return Pe("not implemented")}}function Gu(I,m){return Th.apply(this,arguments)}function Th(){return(Th=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:resetPassword",pe(I,m))})).apply(this,arguments)}function vc(I,m){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:update",pe(I,m))})).apply(this,arguments)}function Ec(I,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithPassword",pe(I,m))})).apply(this,arguments)}function wc(I,m){return qu.apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:sendOobCode",pe(I,m))})).apply(this,arguments)}function Ic(){return(Ic=(0,p.Z)(function*(I,m){return wc(I,m)})).apply(this,arguments)}function bc(I,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(I,m){return wc(I,m)})).apply(this,arguments)}function Zu(I,m){return rn.apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(I,m){return wc(I,m)})).apply(this,arguments)}function ti(){return(ti=(0,p.Z)(function*(I,m){return wc(I,m)})).apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithEmailLink",pe(I,m))})).apply(this,arguments)}function Yu(){return(Yu=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithEmailLink",pe(I,m))})).apply(this,arguments)}class Jo extends Sl{constructor(m,y,T,M=null){super("password",T),this._email=m,this._password=y,this._tenantId=M}static _fromEmailAndPassword(m,y){return new Jo(m,y,"password")}static _fromEmailAndCode(m,y,T=null){return new Jo(m,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,p.Z)(function*(){var T;switch(y.signInMethod){case"password":const M={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=m._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const F=yield ho(m,M,"signInWithPassword");return Ec(m,F)}return Ec(m,M).catch(function(){var F=(0,p.Z)(function*(se){if("auth/missing-recaptcha-token"===se.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const _e=yield ho(m,M,"signInWithPassword");return Ec(m,_e)}return Promise.reject(se)});return function(se){return F.apply(this,arguments)}}());case"emailLink":return function ka(I,m){return ni.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:ce(m,"internal-error")}})()}_linkToIdToken(m,y){var T=this;return(0,p.Z)(function*(){switch(T.signInMethod){case"password":return vc(m,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Kp(I,m){return Yu.apply(this,arguments)}(m,{idToken:y,email:T._email,oobCode:T._password});default:ce(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function So(I,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithIdp",pe(I,m))})).apply(this,arguments)}class rt extends Sl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new rt(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):ce("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:M}=y,F=(0,re._T)(y,["providerId","signInMethod"]);if(!T||!M)return null;const se=new rt(T,M);return se.idToken=F.idToken||void 0,se.accessToken=F.accessToken||void 0,se.secret=F.secret,se.nonce=F.nonce,se.pendingToken=F.pendingToken||null,se}_getIdTokenResponse(m){return So(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,So(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,So(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,W.xO)(y)}return m}}function jn(){return(jn=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:sendVerificationCode",pe(I,m))})).apply(this,arguments)}function fo(){return(fo=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithPhoneNumber",pe(I,m))})).apply(this,arguments)}function ea(){return(ea=(0,p.Z)(function*(I,m){const y=yield pn(I,"POST","/v1/accounts:signInWithPhoneNumber",pe(I,m));if(y.temporaryProof)throw En(I,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const fr={USER_NOT_FOUND:"user-not-found"};function Ao(){return(Ao=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithPhoneNumber",pe(I,Object.assign(Object.assign({},m),{operation:"REAUTH"})),fr)})).apply(this,arguments)}class kt extends Sl{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new kt({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new kt({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function Xi(I,m){return fo.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function Ti(I,m){return ea.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function po(I,m){return Ao.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:T,verificationCode:M}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:T,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:T,phoneNumber:M,temporaryProof:F}=m;return T||y||M||F?new kt({verificationId:y,verificationCode:T,phoneNumber:M,temporaryProof:F}):null}}class Ji{constructor(m){var y,T,M,F,se,_e;const Qe=(0,W.zd)((0,W.pd)(m)),at=null!==(y=Qe.apiKey)&&void 0!==y?y:null,Tt=null!==(T=Qe.oobCode)&&void 0!==T?T:null,sn=function Ss(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Qe.mode)&&void 0!==M?M:null);Y(at&&Tt&&sn,"argument-error"),this.apiKey=at,this.operation=sn,this.code=Tt,this.continueUrl=null!==(F=Qe.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(se=Qe.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(_e=Qe.tenantId)&&void 0!==_e?_e:null}static parseLink(m){const y=function Ch(I){const m=(0,W.zd)((0,W.pd)(I)).link,y=m?(0,W.zd)((0,W.pd)(m)).deep_link_id:null,T=(0,W.zd)((0,W.pd)(I)).deep_link_id;return(T?(0,W.zd)((0,W.pd)(T)).link:null)||T||y||m||I}(m);try{return new Ji(y)}catch{return null}}}let Oa=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(y,T){return Jo._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const M=Ji.parseLink(T);return Y(M,"argument-error"),Jo._fromEmailAndCode(y,M.code,M.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class es{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ci extends es{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ro extends Ci{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return Y("providerId"in y&&"signInMethod"in y,"argument-error"),rt._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Y(m.idToken||m.accessToken,"argument-error"),rt._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ro.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ro.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:M,pendingToken:F,nonce:se,providerId:_e}=m;if(!T&&!M&&!y&&!F||!_e)return null;try{return new Ro(_e)._credential({idToken:y,accessToken:T,nonce:se,pendingToken:F})}catch{return null}}}let Tc=(()=>{class I extends Ci{constructor(){super("facebook.com")}static credential(y){return rt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return I.credential(y.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),ta=(()=>{class I extends Ci{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return rt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:M}=y;if(!T&&!M)return null;try{return I.credential(T,M)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),As=(()=>{class I extends Ci{constructor(){super("github.com")}static credential(y){return rt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return I.credential(y.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class ts extends Sl{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return So(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,So(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,So(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:M,pendingToken:F}=y;return T&&M&&F&&T===M?new ts(T,F):null}static _create(m,y){return new ts(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qu extends es{constructor(m){Y(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Qu.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Qu.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=ts.fromJSON(m);return Y(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:T}=m;if(!y||!T)return null;try{return ts._create(T,y)}catch{return null}}}let Xu=(()=>{class I extends Ci{constructor(){super("twitter.com")}static credential(y,T){return rt._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:M}=y;if(!T||!M)return null;try{return I.credential(T,M)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function Na(I,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signUp",pe(I,m))})).apply(this,arguments)}class fi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,T,M=!1){return(0,p.Z)(function*(){const F=yield X._fromIdTokenResponse(m,T,M),se=xo(T);return new fi({user:F,providerId:se,_tokenResponse:T,operationType:y})})()}static _forOperation(m,y,T){return(0,p.Z)(function*(){yield m._updateTokensIfNecessary(T,!0);const M=xo(T);return new fi({user:m,providerId:M,_tokenResponse:T,operationType:y})})()}}function xo(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function na(I){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(I){var m;const y=lr(I);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new fi({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield Na(y,{returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class Dh extends W.ZR{constructor(m,y,T,M){var F;super(y.code,y.message),this.operationType=T,this.user=M,Object.setPrototypeOf(this,Dh.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(m,y,T,M){return new Dh(m,y,T,M)}}function pi(I,m,y,T){return("reauthenticate"===m?y._getReauthenticationResolver(I):y._getIdTokenResponse(I)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Dh._fromErrorAndOperation(I,F,m,T):F})}function gi(I){return new Set(I.map(({providerId:m})=>m).filter(m=>!!m))}function Ju(I,m){return go.apply(this,arguments)}function go(){return go=(0,p.Z)(function*(I,m){const y=(0,W.m9)(I);yield ra(!0,y,m);const{providerUserInfo:T}=yield function gn(I,m){return Xn.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),M=gi(T||[]);return y.providerData=y.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),go.apply(this,arguments)}function ns(I,m){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,p.Z)(function*(I,m,y=!1){const T=yield Jt(I,m._linkToIdToken(I.auth,yield I.getIdToken()),y);return fi._forOperation(I,"link",T)})).apply(this,arguments)}function ra(I,m,y){return Al.apply(this,arguments)}function Al(){return(Al=(0,p.Z)(function*(I,m,y){yield bi(m);const M=!1===I?"provider-already-linked":"no-such-provider";Y(gi(m.providerData).has(y)===I,m.auth,M)})).apply(this,arguments)}function Sh(I,m){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,p.Z)(function*(I,m,y=!1){const{auth:T}=I,M="reauthenticate";try{const F=yield Jt(I,pi(T,M,m,I),y);Y(F.idToken,T,"internal-error");const se=Mt(F.idToken);Y(se,T,"internal-error");const{sub:_e}=se;return Y(I.uid===_e,T,"user-mismatch"),fi._forOperation(I,M,F)}catch(F){throw"auth/user-not-found"===F?.code&&ce(T,"user-mismatch"),F}})).apply(this,arguments)}function ed(I,m){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,p.Z)(function*(I,m,y=!1){const T="signIn",M=yield pi(I,T,m),F=yield fi._fromIdTokenResponse(I,T,M);return y||(yield I._updateCurrentUser(F.user)),F})).apply(this,arguments)}function td(I,m){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,p.Z)(function*(I,m){return ed(lr(I),m)})).apply(this,arguments)}function Yp(I,m){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,p.Z)(function*(I,m){const y=(0,W.m9)(I);return yield ra(!1,y,m.providerId),ns(y,m)})).apply(this,arguments)}function Jn(I,m){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,p.Z)(function*(I,m){return Sh((0,W.m9)(I),m)})).apply(this,arguments)}function Jp(){return(Jp=(0,p.Z)(function*(I,m){return pn(I,"POST","/v1/accounts:signInWithCustomToken",pe(I,m))})).apply(this,arguments)}function ew(I,m){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,p.Z)(function*(I,m){const y=lr(I),T=yield function JE(I,m){return Jp.apply(this,arguments)}(y,{token:m,returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(M.user),M}),Sc.apply(this,arguments)}class Rs{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?eg._fromServerResponse(m,y):"totpInfo"in y?La._fromServerResponse(m,y):ce(m,"internal-error")}}class eg extends Rs{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new eg(y)}}class La extends Rs{constructor(m){super("totp",m)}static _fromServerResponse(m,y){return new La(y)}}function Fa(I,m,y){var T;Y((null===(T=y.url)||void 0===T?void 0:T.length)>0,I,"invalid-continue-uri"),Y(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Y(y.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(Y(y.android.packageName.length>0,I,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function F_(I,m,y){return tg.apply(this,arguments)}function tg(){return tg=(0,p.Z)(function*(I,m,y){var T;const M=lr(I),F={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const se=yield ho(M,F,"getOobCode",!0);y&&Fa(M,se,y),yield bc(M,se)}else y&&Fa(M,F,y),yield bc(M,F).catch(function(){var se=(0,p.Z)(function*(_e){if("auth/missing-recaptcha-token"!==_e.code)return Promise.reject(_e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Qe=yield ho(M,F,"getOobCode",!0);y&&Fa(M,Qe,y),yield bc(M,Qe)}});return function(_e){return se.apply(this,arguments)}}())}),tg.apply(this,arguments)}function nd(I,m,y){return mo.apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(I,m,y){yield Gu((0,W.m9)(I),{oobCode:m,newPassword:y})})).apply(this,arguments)}function Mo(I,m){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,p.Z)(function*(I,m){yield function L_(I,m){return Fi.apply(this,arguments)}((0,W.m9)(I),{oobCode:m})}),Ac.apply(this,arguments)}function xs(I,m){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,p.Z)(function*(I,m){const y=(0,W.m9)(I),T=yield Gu(y,{oobCode:m}),M=T.requestType;switch(Y(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(T.mfaInfo,y,"internal-error");default:Y(T.email,y,"internal-error")}let F=null;return T.mfaInfo&&(F=Rs._fromServerResponse(lr(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function Rl(I,m){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(I,m){const{data:y}=yield xs((0,W.m9)(I),m);return y.email})).apply(this,arguments)}function xl(I,m,y){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,p.Z)(function*(I,m,y){var T;const M=lr(I),F={returnSecureToken:!0,email:m,password:y,clientType:"CLIENT_TYPE_WEB"};let se;if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const at=yield ho(M,F,"signUpPassword");se=Na(M,at)}else se=Na(M,F).catch(function(){var at=(0,p.Z)(function*(Tt){if("auth/missing-recaptcha-token"===Tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const sn=yield ho(M,F,"signUpPassword");return Na(M,sn)}return Promise.reject(Tt)});return function(Tt){return at.apply(this,arguments)}}());const _e=yield se.catch(at=>Promise.reject(at)),Qe=yield fi._fromIdTokenResponse(M,"signIn",_e);return yield M._updateCurrentUser(Qe.user),Qe}),Ml.apply(this,arguments)}function rd(I,m,y){return td((0,W.m9)(I),Oa.credential(m,y))}function Rh(I,m,y){return ko.apply(this,arguments)}function ko(){return ko=(0,p.Z)(function*(I,m,y){var T;const M=lr(I),F={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function se(_e,Qe){Y(Qe.handleCodeInApp,M,"argument-error"),Qe&&Fa(M,_e,Qe)}if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const _e=yield ho(M,F,"getOobCode",!0);se(_e,y),yield Zu(M,_e)}else se(F,y),yield Zu(M,F).catch(function(){var _e=(0,p.Z)(function*(Qe){if("auth/missing-recaptcha-token"!==Qe.code)return Promise.reject(Qe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const at=yield ho(M,F,"getOobCode",!0);se(at,y),yield Zu(M,at)}});return function(Qe){return _e.apply(this,arguments)}}())}),ko.apply(this,arguments)}function id(I,m){const y=Ji.parseLink(m);return"EMAIL_SIGNIN"===y?.operation}function xh(I,m,y){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I),M=Oa.credentialWithLink(m,y||bt());return Y(M._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),td(T,M)})).apply(this,arguments)}function kl(){return(kl=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:createAuthUri",pe(I,m))})).apply(this,arguments)}function rg(I,m){return ia.apply(this,arguments)}function ia(){return ia=(0,p.Z)(function*(I,m){const T={identifier:m,continueUri:hn()?bt():"http://localhost"},{signinMethods:M}=yield function ng(I,m){return kl.apply(this,arguments)}((0,W.m9)(I),T);return M||[]}),ia.apply(this,arguments)}function Pl(I,m){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,p.Z)(function*(I,m){const y=(0,W.m9)(I),M={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};m&&Fa(y.auth,M,m);const{email:F}=yield function Ku(I,m){return Ic.apply(this,arguments)}(y.auth,M);F!==I.email&&(yield I.reload())}),Ws.apply(this,arguments)}function sd(I,m,y){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:m};y&&Fa(T.auth,F,y);const{email:se}=yield function Or(I,m){return ti.apply(this,arguments)}(T.auth,F);se!==I.email&&(yield I.reload())}),Rc.apply(this,arguments)}function kh(){return(kh=(0,p.Z)(function*(I,m){return xe(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function U_(I,m){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,p.Z)(function*(I,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const T=(0,W.m9)(I),F={idToken:yield T.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},se=yield Jt(T,function Mh(I,m){return kh.apply(this,arguments)}(T.auth,F));T.displayName=se.displayName||null,T.photoURL=se.photoUrl||null;const _e=T.providerData.find(({providerId:Qe})=>"password"===Qe);_e&&(_e.displayName=T.displayName,_e.photoURL=T.photoURL),yield T._updateTokensIfNecessary(se)}),Ph.apply(this,arguments)}function ig(I,m){return Ol((0,W.m9)(I),m,null)}function Oh(I,m){return Ol((0,W.m9)(I),null,m)}function Ol(I,m,y){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,p.Z)(function*(I,m,y){const{auth:T}=I,F={idToken:yield I.getIdToken(),returnSecureToken:!0};m&&(F.email=m),y&&(F.password=y);const se=yield Jt(I,vc(T,F));yield I._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class Nl{constructor(m,y,T={}){this.isNewUser=m,this.providerId=y,this.profile=T}}class Lh extends Nl{constructor(m,y,T,M){super(m,y,T),this.username=M}}class Mc extends Nl{constructor(m,y){super(m,"facebook.com",y)}}class od extends Lh{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Fh extends Nl{constructor(m,y){super(m,"google.com",y)}}class kc extends Lh{constructor(m,y,T){super(m,"twitter.com",y,T)}}function Ll(I){const{user:m,_tokenResponse:y}=I;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function xc(I){var m,y;if(!I)return null;const{providerId:T}=I,M=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},F=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!T&&I?.idToken){const se=null===(y=null===(m=Mt(I.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(se)return new Nl(F,"anonymous"!==se&&"custom"!==se?se:null)}if(!T)return null;switch(T){case"facebook.com":return new Mc(F,M);case"github.com":return new od(F,M);case"google.com":return new Fh(F,M);case"twitter.com":return new kc(F,M,I.screenName||null);case"custom":case"anonymous":return new Nl(F,null);default:return new Nl(F,T,M)}}(y)}class Ms{constructor(m,y,T){this.type=m,this.credential=y,this.auth=T}static _fromIdtoken(m,y){return new Ms("enroll",m,y)}static _fromMfaPendingCredential(m){return new Ms("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,T;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Ms._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(T=m.multiFactorSession)&&void 0!==T&&T.idToken)return Ms._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ua{constructor(m,y,T){this.session=m,this.hints=y,this.signInResolver=T}static _fromError(m,y){const T=lr(m),M=y.customData._serverResponse,F=(M.mfaInfo||[]).map(_e=>Rs._fromServerResponse(T,_e));Y(M.mfaPendingCredential,T,"internal-error");const se=Ms._fromMfaPendingCredential(M.mfaPendingCredential);return new Ua(se,F,function(){var _e=(0,p.Z)(function*(Qe){const at=yield Qe._process(T,se);delete M.mfaInfo,delete M.mfaPendingCredential;const Tt=Object.assign(Object.assign({},M),{idToken:at.idToken,refreshToken:at.refreshToken});switch(y.operationType){case"signIn":const sn=yield fi._fromIdTokenResponse(T,y.operationType,Tt);return yield T._updateCurrentUser(sn.user),sn;case"reauthenticate":return Y(y.user,T,"internal-error"),fi._forOperation(y.user,y.operationType,Tt);default:ce(T,"internal-error")}});return function(Qe){return _e.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,p.Z)(function*(){return y.signInResolver(m)})()}}function Ul(I,m){var y;const T=(0,W.m9)(I),M=m;return Y(m.customData.operationType,T,"argument-error"),Y(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),Ua._fromError(T,M)}class Nc{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>Rs._fromServerResponse(m.auth,T)))})}static _fromUser(m){return new Nc(m)}getSession(){var m=this;return(0,p.Z)(function*(){return Ms._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,y){var T=this;return(0,p.Z)(function*(){const M=m,F=yield T.getSession(),se=yield Jt(T.user,M._process(T.user.auth,F,y));return yield T.user._updateTokensIfNecessary(se),T.user.reload()})()}unenroll(m){var y=this;return(0,p.Z)(function*(){const T="string"==typeof m?m:m.uid,M=yield y.user.getIdToken();try{const F=yield Jt(y.user,function Vh(I,m){return xe(I,"POST","/v2/accounts/mfaEnrollment:withdraw",pe(I,m))}(y.user.auth,{idToken:M,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:se})=>se!==T),yield y.user._updateTokensIfNecessary(F),yield y.user.reload()}catch(F){throw F}})()}}const Tn=new WeakMap;function Va(I){const m=(0,W.m9)(I);return Tn.has(m)||Tn.set(m,Nc._fromUser(m)),Tn.get(m)}const qs="__sak";class Di{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(qs,"1"),this.storage.removeItem(qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const dd=(()=>{class I extends Di{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function H_(){const I=(0,W.z$)();return j(I)||ct(I)}()&&function Ni(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Zt(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const M=this.storage.getItem(T),F=this.localCache[T];M!==F&&y(T,F,M)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((_e,Qe,at)=>{this.notifyListeners(_e,at)});const M=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(M);if(y.newValue!==_e)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!T)return}const F=()=>{const _e=this.storage.getItem(M);!T&&this.localCache[M]===_e||this.notifyListeners(M,_e)},se=this.storage.getItem(M);!function kn(){return(0,W.w1)()&&10===document.documentMode}()||se===y.newValue||y.newValue===y.oldValue?F():setTimeout(F,10)}notifyListeners(y,T){this.localCache[y]=T;const M=this.listeners[y];if(M)for(const F of Array.from(M))F(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var M=()=>super._set,F=this;return(0,p.Z)(function*(){yield M().call(F,y,T),F.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,M=this;return(0,p.Z)(function*(){const F=yield T().call(M,y);return M.localCache[y]=JSON.stringify(F),F})()}_remove(y){var T=()=>super._remove,M=this;return(0,p.Z)(function*(){yield T().call(M,y),delete M.localCache[y]})()}}return I.type="LOCAL",I})(),Lc=(()=>{class I extends Di{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return I.type="SESSION",I})();let ag=(()=>{class I{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(F=>F.isListeningto(y));if(T)return T;const M=new I(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,p.Z)(function*(){const M=y,{eventId:F,eventType:se,data:_e}=M.data,Qe=T.handlersMap[se];if(!Qe?.size)return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:se});const at=Array.from(Qe).map(function(){var sn=(0,p.Z)(function*(ji){return ji(M.origin,_e)});return function(ji){return sn.apply(this,arguments)}}()),Tt=yield function oa(I){return Promise.all(I.map(function(){var m=(0,p.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return m.apply(this,arguments)}}()))}(at);M.ports[0].postMessage({status:"done",eventId:F,eventType:se,response:Tt})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function aa(I="",m=10){let y="";for(let T=0;T<m;T++)y+=Math.floor(10*Math.random());return I+y}class $_{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,T=50){var M=this;return(0,p.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let se,_e;return new Promise((Qe,at)=>{const Tt=aa("",20);F.port1.start();const sn=setTimeout(()=>{at(new Error("unsupported_event"))},T);_e={messageChannel:F,onMessage(ji){const vs=ji;if(vs.data.eventId===Tt)switch(vs.data.status){case"ack":clearTimeout(sn),se=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),Qe(vs.data.response);break;default:clearTimeout(sn),clearTimeout(se),at(new Error("invalid_response"))}}},M.handlers.add(_e),F.port1.addEventListener("message",_e.onMessage),M.target.postMessage({eventType:m,eventId:Tt,data:y},[F.port2])}).finally(()=>{_e&&M.removeMessageHandler(_e)})})()}}function Fr(){return window}function jh(){return typeof Fr().WorkerGlobalScope<"u"&&"function"==typeof Fr().importScripts}function Fc(){return(Fc=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ur="firebaseLocalStorageDb",Ar="firebaseLocalStorage",Po="fbase_key";class la{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function hd(I,m){return I.transaction([Ar],m?"readwrite":"readonly").objectStore(Ar)}function Hh(){const I=indexedDB.open(Ur,1);return new Promise((m,y)=>{I.addEventListener("error",()=>{y(I.error)}),I.addEventListener("upgradeneeded",()=>{const T=I.result;try{T.createObjectStore(Ar,{keyPath:Po})}catch(M){y(M)}}),I.addEventListener("success",(0,p.Z)(function*(){const T=I.result;T.objectStoreNames.contains(Ar)?m(T):(T.close(),yield function cg(){const I=indexedDB.deleteDatabase(Ur);return new la(I).toPromise()}(),m(yield Hh()))}))})}function $h(I,m,y){return Le.apply(this,arguments)}function Le(){return(Le=(0,p.Z)(function*(I,m,y){const T=hd(I,!0).put({[Po]:m,value:y});return new la(T).toPromise()})).apply(this,arguments)}function rs(){return(rs=(0,p.Z)(function*(I,m){const y=hd(I,!1).get(m),T=yield new la(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function fd(I,m){const y=hd(I,!0).delete(m);return new la(y).toPromise()}const Ks=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,p.Z)(function*(){return y.db||(y.db=yield Hh()),y.db})()}_withRetries(y){var T=this;return(0,p.Z)(function*(){let M=0;for(;;)try{const F=yield T._openDb();return yield y(F)}catch(F){if(M++>3)throw F;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,p.Z)(function*(){return jh()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,p.Z)(function*(){y.receiver=ag._getInstance(function Uc(){return jh()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,p.Z)(function*(M,F){return{keyProcessed:(yield y._poll()).includes(F.key)}});return function(M,F){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,p.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,p.Z)(function*(){var T,M;if(y.activeServiceWorker=yield function Lt(){return Fc.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new $_(y.activeServiceWorker);const F=yield y.sender._send("ping",{},800);F&&null!==(T=F[0])&&void 0!==T&&T.fulfilled&&null!==(M=F[0])&&void 0!==M&&M.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,p.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function z_(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Hh();return yield $h(y,qs,"1"),yield fd(y,qs),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,p.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var M=this;return(0,p.Z)(function*(){return M._withPendingWrite((0,p.Z)(function*(){return yield M._withRetries(F=>$h(F,y,T)),M.localCache[y]=T,M.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,p.Z)(function*(){const M=yield T._withRetries(F=>function un(I,m){return rs.apply(this,arguments)}(F,y));return T.localCache[y]=M,M})()}_remove(y){var T=this;return(0,p.Z)(function*(){return T._withPendingWrite((0,p.Z)(function*(){return yield T._withRetries(M=>fd(M,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,p.Z)(function*(){const T=yield y._withRetries(se=>{const _e=hd(se,!1).getAll();return new la(_e).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:se,value:_e}of T)F.add(se),JSON.stringify(y.localCache[se])!==JSON.stringify(_e)&&(y.notifyListeners(se,_e),M.push(se));for(const se of Object.keys(y.localCache))y.localCache[se]&&!F.has(se)&&(y.notifyListeners(se,null),M.push(se));return M})()}notifyListeners(y,T){this.localCache[y]=T;const M=this.listeners[y];if(M)for(const F of Array.from(M))F(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),si=1e12;class Zs{constructor(m){this.auth=m,this.counter=si,this._widgets=new Map}render(m,y){const T=this.counter;return this._widgets.set(T,new Gh(m,this.auth.name,y||{})),this.counter++,T}reset(m){var y;const T=m||si;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(m){var y;return(null===(y=this._widgets.get(m||si))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,p.Z)(function*(){var T;return null===(T=y._widgets.get(m||si))||void 0===T||T.execute(),""})()}}class Gh{constructor(m,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;Y(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ca(I){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<I;T++)m.push(y.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ys=uo("rcb"),G_=new Dn(3e4,6e4);class Bc{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Fr().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return Y(function W_(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(y),m,"argument-error"),this.shouldResolveImmediately(y)&&cn(Fr().grecaptcha)?Promise.resolve(Fr().grecaptcha):new Promise((T,M)=>{const F=Fr().setTimeout(()=>{M(Re(m,"network-request-failed"))},G_.get());Fr()[Ys]=()=>{Fr().clearTimeout(F),delete Fr()[Ys];const _e=Fr().grecaptcha;if(!_e||!cn(_e))return void M(Re(m,"internal-error"));const Qe=_e.render;_e.render=(at,Tt)=>{const sn=Qe(at,Tt);return this.counter++,sn},this.hostLanguage=y,T(_e)},_c(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:Ys,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(F),M(Re(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=Fr().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jc{load(m){return(0,p.Z)(function*(){return new Zs(m)})()}clearedOneInstance(){}}const md="recaptcha",_d={theme:"light",type:"image"};class qh{constructor(m,y=Object.assign({},_d),T){this.parameters=y,this.type=md,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lr(T),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;Y(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jc:new Bc,this.validateStartingState()}verify(){var m=this;return(0,p.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),T=m.getAssertedRecaptcha();return T.getResponse(y)||new Promise(F=>{const se=_e=>{_e&&(m.tokenChangeListeners.delete(se),F(_e))};m.tokenChangeListeners.add(se),m.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof m)m(y);else if("string"==typeof m){const T=Fr()[m];"function"==typeof T&&T(y)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,p.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,p.Z)(function*(){Y(hn()&&!jh(),m.auth,"internal-error"),yield function Kh(){let I=null;return new Promise(m=>{"complete"!==document.readyState?(I=()=>m(),window.addEventListener("load",I)):m()}).catch(m=>{throw I&&window.removeEventListener("load",I),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function co(I){return zs.apply(this,arguments)}(m.auth);Y(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yd{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=kt._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function er(I,m,y){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(I,m,y){const T=lr(I),M=yield Oo(T,m,(0,W.m9)(y));return new yd(M,F=>td(T,F))})).apply(this,arguments)}function It(I,m,y){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I);yield ra(!1,T,"phone");const M=yield Oo(T.auth,m,(0,W.m9)(y));return new yd(M,F=>Yp(T,F))})).apply(this,arguments)}function Pn(I,m,y){return ks.apply(this,arguments)}function ks(){return(ks=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I),M=yield Oo(T.auth,m,(0,W.m9)(y));return new yd(M,F=>Jn(T,F))})).apply(this,arguments)}function Oo(I,m,y){return tr.apply(this,arguments)}function tr(){return tr=(0,p.Z)(function*(I,m,y){var T;const M=yield y.verify();try{let F;if(Y("string"==typeof M,I,"argument-error"),Y(y.type===md,I,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const se=F.session;if("phoneNumber"in F)return Y("enroll"===se.type,I,"internal-error"),(yield function Uh(I,m){return xe(I,"POST","/v2/accounts/mfaEnrollment:start",pe(I,m))}(I,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Y("signin"===se.type,I,"internal-error");const _e=(null===(T=F.multiFactorHint)||void 0===T?void 0:T.uid)||F.multiFactorUid;return Y(_e,I,"missing-multi-factor-info"),(yield function zh(I,m){return xe(I,"POST","/v2/accounts/mfaSignIn:start",pe(I,m))}(I,{mfaPendingCredential:se.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield function Ht(I,m){return jn.apply(this,arguments)}(I,{phoneNumber:F.phoneNumber,recaptchaToken:M});return se}}finally{y._reset()}}),tr.apply(this,arguments)}function Et(I,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(I,m){yield ns((0,W.m9)(I),m)})).apply(this,arguments)}let nr=(()=>{class I{constructor(y){this.providerId=I.PROVIDER_ID,this.auth=lr(y)}verifyPhoneNumber(y,T){return Oo(this.auth,y,(0,W.m9)(T))}static credential(y,T){return kt._fromVerification(y,T)}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:M}=y;return T&&M?kt._fromTokenResponse(T,M):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Qs(I,m){return m?ze(m):(Y(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Hc extends Sl{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return So(m,this._buildIdpRequest())}_linkToIdToken(m,y){return So(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return So(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function Xs(I){return ed(I.auth,new Hc(I),I.bypassAuthState)}function jl(I){const{auth:m,user:y}=I;return Y(y,m,"internal-error"),Sh(y,new Hc(I),I.bypassAuthState)}function Vr(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(I){const{auth:m,user:y}=I;return Y(y,m,"internal-error"),ns(y,new Hc(I),I.bypassAuthState)})).apply(this,arguments)}class rr{constructor(m,y,T,M,F=!1){this.auth=m,this.resolver=T,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,p.Z)(function*(T,M){m.pendingPromise={resolve:T,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(T,M){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,p.Z)(function*(){const{urlResponse:T,sessionId:M,postBody:F,tenantId:se,error:_e,type:Qe}=m;if(_e)return void y.reject(_e);const at={auth:y.auth,requestUri:T,sessionId:M,tenantId:se||void 0,postBody:F||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Qe)(at))}catch(Tt){y.reject(Tt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Xs;case"linkViaPopup":case"linkViaRedirect":return Vr;case"reauthViaPopup":case"reauthViaRedirect":return jl;default:ce(this.auth,"internal-error")}}resolve(m){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yi=new Dn(2e3,1e4);function pr(I,m,y){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(I,m,y){const T=lr(I);De(I,m,es);const M=Qs(T,y);return new Si(T,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function $c(I,m,y){return ja.apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I);De(T.auth,m,es);const M=Qs(T.auth,y);return new Si(T.auth,"reauthViaPopup",m,M,T).executeNotNull()})).apply(this,arguments)}function ua(I,m,y){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I);De(T.auth,m,es);const M=Qs(T.auth,y);return new Si(T.auth,"linkViaPopup",m,M,T).executeNotNull()})).apply(this,arguments)}let Si=(()=>{class I extends rr{constructor(y,T,M,F,se){super(y,T,F,se),this.provider=M,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var y=this;return(0,p.Z)(function*(){const T=yield y.execute();return Y(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,p.Z)(function*(){Ze(1===y.filter.length,"Popup operations only handle one event");const T=aa();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(Re(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,M;this.pollId=null!==(M=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,yi.get())};y()}}return I.currentPopupAction=null,I})();const Zh="pendingRedirect",Vi=new Map;class $t extends rr{constructor(m,y,T=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,p.Z)(function*(){let T=Vi.get(y.auth._key());if(!T){try{const F=(yield function Yh(I,m){return _o.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;T=()=>Promise.resolve(F)}catch(M){T=()=>Promise.reject(M)}Vi.set(y.auth._key(),T)}return y.bypassAuthState||Vi.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,T=this;return(0,p.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(T,m);if("unknown"!==m.type){if(m.eventId){const M=yield T.auth._redirectUserForId(m.eventId);if(M)return T.user=M,y().call(T,m);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function _o(){return(_o=(0,p.Z)(function*(I,m){const y=nw(m),T=Z_(I);if(!(yield T._isAvailable()))return!1;const M="true"===(yield T._get(y));return yield T._remove(y),M})).apply(this,arguments)}function Hl(I,m){return q_.apply(this,arguments)}function q_(){return(q_=(0,p.Z)(function*(I,m){return Z_(I)._set(nw(m),"true")})).apply(this,arguments)}function K_(){Vi.clear()}function vd(I,m){Vi.set(I._key(),m)}function Z_(I){return ze(I._redirectPersistence)}function nw(I){return mn(Zh,I.config.apiKey,I.name)}function zc(I,m,y){return function Ha(I,m,y){return Qh.apply(this,arguments)}(I,m,y)}function Qh(){return(Qh=(0,p.Z)(function*(I,m,y){const T=lr(I);De(I,m,es),yield T._initializationPromise;const M=Qs(T,y);return yield Hl(M,T),M._openRedirect(T,m,"signInViaRedirect")})).apply(this,arguments)}function Gc(I,m,y){return function Xh(I,m,y){return $l.apply(this,arguments)}(I,m,y)}function $l(){return($l=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I);De(T.auth,m,es),yield T.auth._initializationPromise;const M=Qs(T.auth,y);yield Hl(M,T.auth);const F=yield O(T);return M._openRedirect(T.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function rw(I,m,y){return function dg(I,m,y){return Jh.apply(this,arguments)}(I,m,y)}function Jh(){return(Jh=(0,p.Z)(function*(I,m,y){const T=(0,W.m9)(I);De(T.auth,m,es),yield T.auth._initializationPromise;const M=Qs(T.auth,y);yield ra(!1,T,m.providerId),yield Hl(M,T.auth);const F=yield O(T);return M._openRedirect(T.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function Y_(I,m){return te.apply(this,arguments)}function te(){return(te=(0,p.Z)(function*(I,m){return yield lr(I)._initializationPromise,dn(I,m,!1)})).apply(this,arguments)}function dn(I,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(I,m,y=!1){const T=lr(I),M=Qs(T,m),se=yield new $t(T,M,y).execute();return se&&!y&&(delete se.user._redirectEventId,yield T._persistUserIfCurrent(se.user),yield T._setRedirectUser(null,m)),se})).apply(this,arguments)}function O(I){return zr.apply(this,arguments)}function zr(){return(zr=(0,p.Z)(function*(I){const m=aa(`${I.uid}:::`);return I._redirectEventId=m,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),m})).apply(this,arguments)}class da{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(m,T)&&(y=!0,this.sendToConsumer(m,T),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function qc(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hn(I);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var T;if(m.error&&!Hn(m)){const M=(null===(T=m.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(Re(this.auth,M))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const T=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&T}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wc(m))}saveEventToCache(m){this.cachedEventUids.add(Wc(m)),this.lastProcessedEventTime=Date.now()}}function Wc(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(m=>m).join("-")}function Hn({type:I,error:m}){return"unknown"===I&&"auth/no-auth-event"===m?.code}function Lo(I){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(I,m={}){return xe(I,"GET","/v1/projects",m)})).apply(this,arguments)}const Q_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ed=/^https?/;function Kc(){return(Kc=(0,p.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:m}=yield Lo(I);for(const y of m)try{if(ef(y))return}catch{}ce(I,"unauthorized-domain")})).apply(this,arguments)}function ef(I){const m=bt(),{protocol:y,hostname:T}=new URL(m);if(I.startsWith("chrome-extension://")){const se=new URL(I);return""===se.hostname&&""===T?"chrome-extension:"===y&&I.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&se.hostname===T}if(!Ed.test(y))return!1;if(Q_.test(I))return T===I;const M=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(T)}const ha=new Dn(3e4,6e4);function fa(){const I=Fr().___jsl;if(I?.H)for(const m of Object.keys(I.H))if(I.H[m].r=I.H[m].r||[],I.H[m].L=I.H[m].L||[],I.H[m].r=[...I.H[m].L],I.CP)for(let y=0;y<I.CP.length;y++)I.CP[y]=null}let fn=null;const Zc=new Dn(5e3,15e3),Ns="__/auth/iframe",Yc="emulator/auth/iframe",Qc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},za=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ga(I){const m=I.config;Y(m.authDomain,I,"auth-domain-config-required");const y=m.emulator?$r(m,Yc):`https://${I.config.authDomain}/${Ns}`,T={apiKey:m.apiKey,appName:I.name,v:N.SDK_VERSION},M=za.get(I.config.apiHost);M&&(T.eid=M);const F=I._getFrameworks();return F.length&&(T.fw=F.join(",")),`${y}?${(0,W.xO)(T).slice(1)}`}function yo(){return yo=(0,p.Z)(function*(I){const m=yield function eo(I){return fn=fn||function hg(I){return new Promise((m,y)=>{var T,M,F;function se(){fa(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{fa(),y(Re(I,"network-request-failed"))},timeout:ha.get()})}if(null!==(M=null===(T=Fr().gapi)||void 0===T?void 0:T.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(F=Fr().gapi)||void 0===F||!F.load){const _e=uo("iframefcb");return Fr()[_e]=()=>{gapi.load?se():y(Re(I,"network-request-failed"))},_c(`https://apis.google.com/js/api.js?onload=${_e}`).catch(Qe=>y(Qe))}se()}}).catch(m=>{throw fn=null,m})}(I),fn}(I),y=Fr().gapi;return Y(y,I,"internal-error"),m.open({where:document.body,url:Ga(I),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qc,dontclear:!0},T=>new Promise(function(){var M=(0,p.Z)(function*(F,se){yield T.restyle({setHideOnLeave:!1});const _e=Re(I,"network-request-failed"),Qe=Fr().setTimeout(()=>{se(_e)},Zc.get());function at(){Fr().clearTimeout(Qe),F(T)}T.ping(at).then(at,()=>{se(_e)})});return function(F,se){return M.apply(this,arguments)}}()))}),yo.apply(this,arguments)}const b={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ae{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const it="__/auth/handler",wt="emulator/auth/handler",Bt=encodeURIComponent("fac");function Pt(I,m,y,T,M,F){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(I,m,y,T,M,F){Y(I.config.authDomain,I,"auth-domain-config-required"),Y(I.config.apiKey,I,"invalid-api-key");const se={apiKey:I.config.apiKey,appName:I.name,authType:y,redirectUrl:T,v:N.SDK_VERSION,eventId:M};if(m instanceof es){m.setDefaultLanguage(I.languageCode),se.providerId=m.providerId||"",(0,W.xb)(m.getCustomParameters())||(se.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Tt,sn]of Object.entries(F||{}))se[Tt]=sn}if(m instanceof Ci){const Tt=m.getScopes().filter(sn=>""!==sn);Tt.length>0&&(se.scopes=Tt.join(","))}I.tenantId&&(se.tid=I.tenantId);const _e=se;for(const Tt of Object.keys(_e))void 0===_e[Tt]&&delete _e[Tt];const Qe=yield I._getAppCheckToken(),at=Qe?`#${Bt}=${encodeURIComponent(Qe)}`:"";return`${function Br({config:I}){return I.emulator?$r(I,wt):`https://${I.authDomain}/${it}`}(I)}?${(0,W.xO)(_e).slice(1)}${at}`})).apply(this,arguments)}const Wn="webStorageSupport",to=class pa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lc,this._completeRedirectFn=dn,this._overrideRedirectResult=vd}_openPopup(m,y,T,M){var F=this;return(0,p.Z)(function*(){var se;Ze(null===(se=F.eventManagers[m._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const _e=yield Pt(m,y,T,bt(),M);return function be(I,m,y,T=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),se=Math.max((window.screen.availWidth-T)/2,0).toString();let _e="";const Qe=Object.assign(Object.assign({},b),{width:T.toString(),height:M.toString(),top:F,left:se}),at=(0,W.z$)().toLowerCase();y&&(_e=L(at)?"_blank":y),B(at)&&(m=m||"http://localhost",Qe.scrollbars="yes");const Tt=Object.entries(Qe).reduce((ji,[vs,Jc])=>`${ji}${vs}=${Jc},`,"");if(function jt(I=(0,W.z$)()){var m;return ct(I)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(at)&&"_self"!==_e)return function st(I,m){const y=document.createElement("a");y.href=I,y.target=m;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(m||"",_e),new ae(null);const sn=window.open(m||"",_e,Tt);Y(sn,I,"popup-blocked");try{sn.focus()}catch{}return new ae(sn)}(m,_e,aa())})()}_openRedirect(m,y,T,M){var F=this;return(0,p.Z)(function*(){return yield F._originValidation(m),function Ba(I){Fr().location.href=I}(yield Pt(m,y,T,bt(),M)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:M,promise:F}=this.eventManagers[y];return M?Promise.resolve(M):(Ze(F,"If manager is not set, promise should be"),F)}const T=this.initAndGetManager(m);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(m){var y=this;return(0,p.Z)(function*(){const T=yield function Wa(I){return yo.apply(this,arguments)}(m),M=new da(m);return T.register("authEvent",F=>(Y(F?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:M},y.iframes[m._key()]=T,M})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(Wn,{type:Wn},M=>{var F;const se=null===(F=M?.[0])||void 0===F?void 0:F[Wn];void 0!==se&&y(!!se),ce(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function $a(I){return Kc.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return Zt()||j()||ct()}};class is{constructor(m){this.factorId=m}_process(m,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,T);case"signin":return this._finalizeSignIn(m,y.credential);default:return Pe("unexpected MultiFactorSessionType")}}}class ir extends is{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new ir(m)}_finalizeEnroll(m,y,T){return function Vl(I,m){return xe(I,"POST","/v2/accounts/mfaEnrollment:finalize",pe(I,m))}(m,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function pd(I,m){return xe(I,"POST","/v2/accounts/mfaSignIn:finalize",pe(I,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ga=(()=>{class I{constructor(){}static assertion(y){return ir._fromCredential(y)}}return I.FACTOR_ID="phone",I})();var iw="@firebase/auth";class tC{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,p.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(T=>{m(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);y&&(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,W.Pz)("authIdTokenMaxAge"),function wd(I){(0,N._registerComponent)(new fe.wA("auth",(m,{options:y})=>{const T=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),F=m.getProvider("app-check-internal"),{apiKey:se,authDomain:_e}=T.options;Y(se&&!se.includes(":"),"invalid-api-key",{appName:T.name});const Qe={apiKey:se,authDomain:_e,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qo(I)},at=new Cl(T,M,F,Qe);return function N_(I,m){const y=m?.persistence||[],T=(Array.isArray(y)?y:[y]).map(ze);m?.errorMap&&I._updateErrorMap(m.errorMap),I._initializeWithPersistence(T,m?.popupRedirectResolver)}(at,y),at},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,T)=>{m.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new fe.wA("auth-internal",m=>{const y=lr(m.getProvider("auth").getImmediate());return new tC(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(iw,"0.23.2",function Bi(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,N.registerVersion)(iw,"0.23.2","esm2017")}("Browser")},9058:(mt,Ae,U)=>{U.d(Ae,{$s:()=>ze,BH:()=>me,DV:()=>Xn,Dv:()=>bi,G6:()=>$r,GJ:()=>Mn,L:()=>Ee,LL:()=>Ge,P0:()=>pt,Pz:()=>Re,Sg:()=>De,UG:()=>Pe,UI:()=>br,US:()=>fe,Wj:()=>Qt,Wl:()=>xt,Yr:()=>Dn,ZB:()=>le,ZR:()=>xe,aH:()=>ce,b$:()=>hn,cI:()=>pn,dS:()=>Oi,eu:()=>ve,g5:()=>N,gK:()=>ln,gQ:()=>Vt,h$:()=>Me,hl:()=>he,hu:()=>W,jU:()=>Ze,lb:()=>Fn,m9:()=>mn,ne:()=>Jt,p$:()=>Q,pd:()=>Mt,r3:()=>gn,ru:()=>bt,tV:()=>G,uI:()=>Y,ug:()=>Qi,vZ:()=>Gn,w1:()=>Nn,w9:()=>zn,xO:()=>ms,xb:()=>Ii,z$:()=>Be,zI:()=>we,zd:()=>Dt});const p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},W=function(K,q){if(!K)throw N(q)},N=function(K){return new Error("Firebase Database ("+p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+K)},re=function(K){const q=[];let B=0;for(let j=0;j<K.length;j++){let L=K.charCodeAt(j);L<128?q[B++]=L:L<2048?(q[B++]=L>>6|192,q[B++]=63&L|128):55296==(64512&L)&&j+1<K.length&&56320==(64512&K.charCodeAt(j+1))?(L=65536+((1023&L)<<10)+(1023&K.charCodeAt(++j)),q[B++]=L>>18|240,q[B++]=L>>12&63|128,q[B++]=L>>6&63|128,q[B++]=63&L|128):(q[B++]=L>>12|224,q[B++]=L>>6&63|128,q[B++]=63&L|128)}return q},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,q){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let L=0;L<K.length;L+=3){const oe=K[L],ke=L+1<K.length,Xe=ke?K[L+1]:0,Ft=L+2<K.length,ct=Ft?K[L+2]:0;let kn=(15&Xe)<<2|ct>>6,Zt=63&ct;Ft||(Zt=64,ke||(kn=64)),j.push(B[oe>>2],B[(3&oe)<<4|Xe>>4],B[kn],B[Zt])}return j.join("")},encodeString(K,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(K):this.encodeByteArray(re(K),q)},decodeString(K,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(K):function(K){const q=[];let B=0,j=0;for(;B<K.length;){const L=K[B++];if(L<128)q[j++]=String.fromCharCode(L);else if(L>191&&L<224){const oe=K[B++];q[j++]=String.fromCharCode((31&L)<<6|63&oe)}else if(L>239&&L<365){const Ft=((7&L)<<18|(63&K[B++])<<12|(63&K[B++])<<6|63&K[B++])-65536;q[j++]=String.fromCharCode(55296+(Ft>>10)),q[j++]=String.fromCharCode(56320+(1023&Ft))}else{const oe=K[B++],ke=K[B++];q[j++]=String.fromCharCode((15&L)<<12|(63&oe)<<6|63&ke)}}return q.join("")}(this.decodeStringToByteArray(K,q))},decodeStringToByteArray(K,q){this.init_();const B=q?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let L=0;L<K.length;){const oe=B[K.charAt(L++)],Xe=L<K.length?B[K.charAt(L)]:0;++L;const ct=L<K.length?B[K.charAt(L)]:64;++L;const jt=L<K.length?B[K.charAt(L)]:64;if(++L,null==oe||null==Xe||null==ct||null==jt)throw new Ce;j.push(oe<<2|Xe>>4),64!==ct&&(j.push(Xe<<4&240|ct>>2),64!==jt&&j.push(ct<<6&192|jt))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(K){const q=re(K);return fe.encodeByteArray(q,!0)},Ee=function(K){return Me(K).replace(/\./g,"")},G=function(K){try{return fe.decodeString(K,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Q(K){return le(void 0,K)}function le(K,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return q}for(const B in q)!q.hasOwnProperty(B)||!He(B)||(K[B]=le(K[B],q[B]));return K}function He(K){return"__proto__"!==K}const Ne=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const K=process.env.__FIREBASE_DEFAULTS__;return K?JSON.parse(K):void 0})()||(()=>{if(typeof document>"u")return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=K&&G(K[1]);return q&&JSON.parse(q)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},pt=K=>{const q=(K=>{var q,B;return null===(B=null===(q=Ne())||void 0===q?void 0:q.emulatorHosts)||void 0===B?void 0:B[K]})(K);if(!q)return;const B=q.lastIndexOf(":");if(B<=0||B+1===q.length)throw new Error(`Invalid host ${q} with no separate hostname and port!`);const j=parseInt(q.substring(B+1),10);return"["===q[0]?[q.substring(1,B-1),j]:[q.substring(0,B),j]},ce=()=>{var K;return null===(K=Ne())||void 0===K?void 0:K.config},Re=K=>{var q;return null===(q=Ne())||void 0===q?void 0:q[`_${K}`]};class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,B)=>{this.resolve=q,this.reject=B})}wrapCallback(q){return(B,j)=>{B?this.reject(B):this.resolve(j),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(B):q(B,j))}}}function De(K,q){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=q||"demo-project",L=K.iat||0,oe=K.sub||K.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:L,exp:L+3600,auth_time:L,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},K);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(ke)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Pe(){var K;const q=null===(K=Ne())||void 0===K?void 0:K.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ze(){return"object"==typeof self&&self.self===self}function bt(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function hn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Nn(){const K=Be();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Dn(){return!0===p.NODE_CLIENT||!0===p.NODE_ADMIN}function $r(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){try{return"object"==typeof indexedDB}catch{return!1}}function ve(){return new Promise((K,q)=>{try{let B=!0;const j="validate-browser-context-for-indexeddb-analytics-module",L=self.indexedDB.open(j);L.onsuccess=()=>{L.result.close(),B||self.indexedDB.deleteDatabase(j),K(!0)},L.onupgradeneeded=()=>{B=!1},L.onerror=()=>{var oe;q((null===(oe=L.error)||void 0===oe?void 0:oe.message)||"")}}catch(B){q(B)}})}function we(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xe extends Error{constructor(q,B,j){super(B),this.code=q,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(q,B,j){this.service=q,this.serviceName=B,this.errors=j}create(q,...B){const j=B[0]||{},L=`${this.service}/${q}`,oe=this.errors[q],ke=oe?function nt(K,q){return K.replace(Ye,(B,j)=>{const L=q[j];return null!=L?String(L):`<${j}?>`})}(oe,j):"Error";return new xe(L,`${this.serviceName}: ${ke} (${L}).`,j)}}const Ye=/\{\$([^}]+)}/g;function pn(K){return JSON.parse(K)}function xt(K){return JSON.stringify(K)}const nn=function(K){let q={},B={},j={},L="";try{const oe=K.split(".");q=pn(G(oe[0])||""),B=pn(G(oe[1])||""),L=oe[2],j=B.d||{},delete B.d}catch{}return{header:q,claims:B,data:j,signature:L}},zn=function(K){const B=nn(K).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},Mn=function(K){const q=nn(K).claims;return"object"==typeof q&&!0===q.admin};function gn(K,q){return Object.prototype.hasOwnProperty.call(K,q)}function Xn(K,q){if(Object.prototype.hasOwnProperty.call(K,q))return K[q]}function Ii(K){for(const q in K)if(Object.prototype.hasOwnProperty.call(K,q))return!1;return!0}function br(K,q,B){const j={};for(const L in K)Object.prototype.hasOwnProperty.call(K,L)&&(j[L]=q.call(B,K[L],L,K));return j}function Gn(K,q){if(K===q)return!0;const B=Object.keys(K),j=Object.keys(q);for(const L of B){if(!j.includes(L))return!1;const oe=K[L],ke=q[L];if(Zn(oe)&&Zn(ke)){if(!Gn(oe,ke))return!1}else if(oe!==ke)return!1}for(const L of j)if(!B.includes(L))return!1;return!0}function Zn(K){return null!==K&&"object"==typeof K}function ms(K){const q=[];for(const[B,j]of Object.entries(K))Array.isArray(j)?j.forEach(L=>{q.push(encodeURIComponent(B)+"="+encodeURIComponent(L))}):q.push(encodeURIComponent(B)+"="+encodeURIComponent(j));return q.length?"&"+q.join("&"):""}function Dt(K){const q={};return K.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[L,oe]=j.split("=");q[decodeURIComponent(L)]=decodeURIComponent(oe)}}),q}function Mt(K){const q=K.indexOf("?");if(!q)return"";const B=K.indexOf("#",q);return K.substring(q,B>0?B:void 0)}class Vt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,B){B||(B=0);const j=this.W_;if("string"==typeof q)for(let jt=0;jt<16;jt++)j[jt]=q.charCodeAt(B)<<24|q.charCodeAt(B+1)<<16|q.charCodeAt(B+2)<<8|q.charCodeAt(B+3),B+=4;else for(let jt=0;jt<16;jt++)j[jt]=q[B]<<24|q[B+1]<<16|q[B+2]<<8|q[B+3],B+=4;for(let jt=16;jt<80;jt++){const kn=j[jt-3]^j[jt-8]^j[jt-14]^j[jt-16];j[jt]=4294967295&(kn<<1|kn>>>31)}let ct,wn,L=this.chain_[0],oe=this.chain_[1],ke=this.chain_[2],Xe=this.chain_[3],Ft=this.chain_[4];for(let jt=0;jt<80;jt++){jt<40?jt<20?(ct=Xe^oe&(ke^Xe),wn=1518500249):(ct=oe^ke^Xe,wn=1859775393):jt<60?(ct=oe&ke|Xe&(oe|ke),wn=2400959708):(ct=oe^ke^Xe,wn=3395469782);const kn=(L<<5|L>>>27)+ct+Ft+wn+j[jt]&4294967295;Ft=Xe,Xe=ke,ke=4294967295&(oe<<30|oe>>>2),oe=L,L=kn}this.chain_[0]=this.chain_[0]+L&4294967295,this.chain_[1]=this.chain_[1]+oe&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+Ft&4294967295}update(q,B){if(null==q)return;void 0===B&&(B=q.length);const j=B-this.blockSize;let L=0;const oe=this.buf_;let ke=this.inbuf_;for(;L<B;){if(0===ke)for(;L<=j;)this.compress_(q,L),L+=this.blockSize;if("string"==typeof q){for(;L<B;)if(oe[ke]=q.charCodeAt(L),++ke,++L,ke===this.blockSize){this.compress_(oe),ke=0;break}}else for(;L<B;)if(oe[ke]=q[L],++ke,++L,ke===this.blockSize){this.compress_(oe),ke=0;break}}this.inbuf_=ke,this.total_+=B}digest(){const q=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let L=this.blockSize-1;L>=56;L--)this.buf_[L]=255&B,B/=256;this.compress_(this.buf_);let j=0;for(let L=0;L<5;L++)for(let oe=24;oe>=0;oe-=8)q[j]=this.chain_[L]>>oe&255,++j;return q}}function Jt(K,q){const B=new hr(K,q);return B.subscribe.bind(B)}class hr{constructor(q,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{q(this)}).catch(j=>{this.error(j)})}next(q){this.forEachObserver(B=>{B.next(q)})}error(q){this.forEachObserver(B=>{B.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,B,j){let L;if(void 0===q&&void 0===B&&void 0===j)throw new Error("Missing Observer.");L=function Kt(K,q){if("object"!=typeof K||null===K)return!1;for(const B of q)if(B in K&&"function"==typeof K[B])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:B,complete:j},void 0===L.next&&(L.next=Bn),void 0===L.error&&(L.error=Bn),void 0===L.complete&&(L.complete=Bn);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?L.error(this.finalError):L.complete()}catch{}}),this.observers.push(L),oe}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,q)}sendOne(q,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{B(this.observers[q])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bn(){}const bi=function(K,q,B,j){let L;if(j<q?L="at least "+q:j>B&&(L=0===B?"none":"no more than "+B),L)throw new Error(K+" failed: Was called with "+j+(1===j?" argument.":" arguments.")+" Expects "+L+".")};function ln(K,q){return`${K} failed: ${q} argument `}function Qt(K,q,B,j){if((!j||B)&&"function"!=typeof B)throw new Error(ln(K,q)+"must be a valid function.")}function Fn(K,q,B,j){if((!j||B)&&("object"!=typeof B||null===B))throw new Error(ln(K,q)+"must be a valid context object.")}const Oi=function(K){const q=[];let B=0;for(let j=0;j<K.length;j++){let L=K.charCodeAt(j);if(L>=55296&&L<=56319){const oe=L-55296;j++,W(j<K.length,"Surrogate pair missing trail surrogate."),L=65536+(oe<<10)+(K.charCodeAt(j)-56320)}L<128?q[B++]=L:L<2048?(q[B++]=L>>6|192,q[B++]=63&L|128):L<65536?(q[B++]=L>>12|224,q[B++]=L>>6&63|128,q[B++]=63&L|128):(q[B++]=L>>18|240,q[B++]=L>>12&63|128,q[B++]=L>>6&63|128,q[B++]=63&L|128)}return q},Qi=function(K){let q=0;for(let B=0;B<K.length;B++){const j=K.charCodeAt(B);j<128?q++:j<2048?q+=2:j>=55296&&j<=56319?(q+=4,B++):q+=3}return q},ar=1e3,Ie=2,X=144e5,Te=.5;function ze(K,q=ar,B=Ie){const j=q*Math.pow(B,K),L=Math.round(Te*j*(Math.random()-.5)*2);return Math.min(X,j+L)}function mn(K){return K&&K._delegate?K._delegate:K}},2614:(mt,Ae,U)=>{var p=U(5879);let W=null;function N(){return W}class ue{}const fe=new p.OlP("DocumentToken");let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Ee)},providedIn:"platform"})}return n})();const Me=new p.OlP("Location Initialized");let Ee=(()=>{class n extends Ce{constructor(){super(),this._doc=(0,p.f3M)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function G(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function le(n){return n&&"?"!==n[0]?"?"+n:n}let He=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(tt)},providedIn:"root"})}return n})();const Oe=new p.OlP("appBaseHref");let tt=(()=>{class n extends He{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return G(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+le(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+le(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Ce),p.LFG(Oe,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fe=(()=>{class n extends He{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=G(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+le(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+le(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Ce),p.LFG(Oe,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})(),et=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ce(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Q(pt(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+le(r))}normalize(t){return n.stripTrailingSlash(function vt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,pt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+le(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+le(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=le;static#t=this.joinWithSlash=G;static#n=this.stripTrailingSlash=Q;static#r=this.\u0275fac=function(r){return new(r||n)(p.LFG(He))};static#i=this.\u0275prov=p.Yz7({token:n,factory:function(){return function Ne(){return new et((0,p.LFG)(He))}()},providedIn:"root"})}return n})();function pt(n){return n.replace(/\/index.html$/,"")}class Tl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Tl(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const d=r.get(o);r.move(d,l),lr(d,i)}});for(let i=0,o=r.length;i<o;i++){const d=r.get(i).context;d.index=i,d.count=o,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{lr(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function lr(n,e){n.context.$implicit=e.item}let xa=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new N_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class N_{constructor(){this.$implicit=null,this.ngIf=null}}function bh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let fr=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();const po="browser";function Ji(n){return"server"===n}let Ci=(()=>{class n{static#e=this.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Ro((0,p.LFG)(fe),window)})}return n})();class Ro{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Tc(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Fh extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class kc extends Fh{static makeCurrent(){!function re(n){W||(W=n)}(new kc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function V_(){return Ll=Ll||document.querySelector("base"),Ll?Ll.getAttribute("href"):null}();return null==t?null:function sg(n){ad=ad||document.createElement("a"),ad.setAttribute("href",n);const e=ad.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ll=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let ad,Ll=null,B_=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const cd=new p.OlP("EventManagerPlugins");let og=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(cd),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class Pc{constructor(e){this._doc=e}}const Fl="ng-app-id";let Oc=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ji(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Fl}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Fl),o;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Fl,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,l=o.get(r)?.elements;l?l.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ms={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ua=/%COMP%/g,ys=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Tn(n,e){return e.map(t=>t.replace(Ua,n))}let Va=(()=>{class n{constructor(t,r,i,o,l,d,f,_=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=d,this.ngZone=f,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=Ji(d),this.defaultRenderer=new qs(t,l,f,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===p.ifc.ShadowDom&&(r={...r,encapsulation:p.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof dd?i.applyToHost(t):i instanceof _i&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const l=this.doc,d=this.ngZone,f=this.eventManager,_=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,D=this.platformIsServer;switch(r.encapsulation){case p.ifc.Emulated:o=new dd(f,_,r,this.appId,E,l,d,D);break;case p.ifc.ShadowDom:return new sa(f,_,t,r,l,d,this.nonce,D);default:o=new _i(f,_,r,E,l,d,D)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(og),p.LFG(Oc),p.LFG(p.AFp),p.LFG(ys),p.LFG(fe),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class qs{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ms[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ud(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ud(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new p.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Ms[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ms[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=N().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function ud(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sa extends qs{constructor(e,t,r,i,o,l,d,f){super(e,o,l,f),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=Tn(i.id,i.styles);for(const E of _){const D=document.createElement("style");d&&D.setAttribute("nonce",d),D.textContent=E,this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _i extends qs{constructor(e,t,r,i,o,l,d,f){super(e,o,l,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=f?Tn(f,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class dd extends _i{constructor(e,t,r,i,o,l,d,f){const _=i+"-"+r.id;super(e,t,r,o,l,d,f,_),this.contentAttr=function Vh(n){return"_ngcontent-%COMP%".replace(Ua,n)}(_),this.hostAttr=function Nc(n){return"_nghost-%COMP%".replace(Ua,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Bh=(()=>{class n extends Pc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const Lc=["alt","control","meta","shift"],oa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ag={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let aa=(()=>{class n extends Pc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),Lc.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),l+=_+".")}),l+=o,0!=r.length||0===o.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static matchEventFullKeyCode(t,r){let i=oa[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lc.forEach(l=>{l!==i&&(0,ag[l])(t)&&(o+=l+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ur=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:po},{provide:p.g9A,useValue:function Lt(){kc.makeCurrent()},multi:!0},{provide:fe,useFactory:function z_(){return(0,p.RDi)(document),document},deps:[]}]),lg=new p.OlP(""),Ar=[{provide:p.rWj,useClass:class ld{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new p.vHH(5103,!1);return o},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const d=function(f){l=l||f,o--,0==o&&r(l)};i.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Po=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Fc(){return new p.qLn},deps:[]},{provide:cd,useClass:Bh,multi:!0,deps:[fe,p.R0b,p.Lbi]},{provide:cd,useClass:aa,multi:!0,deps:[fe]},Va,Oc,og,{provide:p.FYo,useExisting:Va},{provide:class As{},useClass:B_,deps:[]},[]];let la=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(lg,12))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:[...Po,...Ar],imports:[fr,p.hGG]})}return n})(),Le=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function $h(){return new Le((0,p.LFG)(fe))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var er=U(6304),Sn=U(8645),It=U(2096),oi=U(5592),Pn=U(2459),ks=U(3019),Oo=U(3093),tr=U(4664),Et=U(7398),Ps=U(4552);class nr extends Sn.x{constructor(e=1/0,t=1/0,r=Ps.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;t||(r.push(e),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!e.closed;l+=r?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const l=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=l;f+=2)d=f;d&&r.splice(0,d+1)}}}var Qs=U(3020);function Hc(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Qs.B)({connector:()=>new nr(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const jl=(0,U(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vr=U(9360),Yn=U(8251);function rr(n,e){return(0,Vr.e)((t,r)=>{let i=0;t.subscribe((0,Yn.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var yi=U(6232);function pr(n){return n<=0?()=>yi.E:(0,Vr.e)((e,t)=>{let r=0;e.subscribe((0,Yn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Os(n){return(0,Vr.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $c(n=ja){return(0,Vr.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ja(){return new jl}var ua=U(2737);function Js(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rr((i,o)=>n(i,o,r)):ua.y,pr(1),t?Os(e):$c(()=>new jl))}var Si=U(4674);function Zh(n,e){return(0,Si.m)(e)?(0,tr.w)(()=>n,e):(0,tr.w)(()=>n)}var Vi=U(5137),$t=U(2793),Yh=U(4097);class Hl{constructor(){return(0,Yh.C6)()}}var te=U(5861),dn=U(4303),gr=U(4537),O=U(9058),zr=U(7879);const No=new Map,da={activated:!1,tokenObservers:[]},Wc={initialized:!1,enabled:!1};function Hn(n){return No.get(n)||Object.assign({},da)}function Lo(){return Wc}const Fo="https://content-firebaseappcheck.googleapis.com/v1",$a="exchangeDebugToken",Kc={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ha{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,te.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function fa(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fn=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Zc(n){if(!Hn(n).activated)throw fn.create("use-before-activation",{appName:n.name})}function Qc(n,e){return za.apply(this,arguments)}function za(){return(za=(0,te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,o)}catch(D){throw fn.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==l.status)throw fn.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(D){throw fn.create("fetch-parse-error",{originalErrorMessage:D?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw fn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const _=1e3*Number(f[1]),E=Date.now();return{token:d.token,expireTimeMillis:E+_,issuedAtTimeMillis:E}})).apply(this,arguments)}function yo(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Fo}/projects/${t}/apps/${r}:${$a}?key=${i}`,body:{debug_token:e}}}const b="firebase-app-check-database",S=1,x="firebase-app-check-store";let J=null;function Pt(){return(Pt=(0,te.Z)(function*(n,e){const r=(yield function ae(){return J||(J=new Promise((n,e)=>{try{const t=indexedDB.open(b,S);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(fn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(x,{keyPath:"compositeKey"})}}catch(t){e(fn.create("storage-open",{originalErrorMessage:t?.message}))}}),J)}()).transaction(x,"readwrite"),o=r.objectStore(x).put({compositeKey:n,value:e});return new Promise((l,d)=>{o.onsuccess=f=>{l()},r.onerror=f=>{var _;d(fn.create("storage-set",{originalErrorMessage:null===(_=f.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const pa=new zr.Yd("@firebase/app-check");function ir(n,e){return(0,O.hl)()?function st(n,e){return function Bt(n,e){return Pt.apply(this,arguments)}(function Wn(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{pa.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function qa(){return Lo().enabled}function Ka(){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,te.Z)(function*(){const n=Lo();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const X_={error:"UNKNOWN_ERROR"};function tC(n){return O.US.encodeString(JSON.stringify(n),!1)}function Bi(n){return wd.apply(this,arguments)}function wd(){return(wd=(0,te.Z)(function*(n,e=!1){const t=n.app;Zc(t);const r=Hn(t);let o,i=r.token;if(i&&!y(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(y(f)?i=f:yield ir(t,void 0))}if(!e&&i&&y(i))return{token:i.token};let d,l=!1;if(qa()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Qc(yo(t,yield Ka()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const f=yield r.exchangeTokenPromise;return yield ir(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Hn(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?pa.warn(f.message):pa.error(f),o=f}return i?o?d=y(i)?{token:i.token,internalError:o}:T(o):(d={token:i.token},r.token=i,yield ir(t,i)):d=T(o),l&&function m(n,e){const t=Hn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d})).apply(this,arguments)}function zl(n){return J_.apply(this,arguments)}function J_(){return(J_=(0,te.Z)(function*(n){const e=n.app;Zc(e);const{provider:t}=Hn(e);if(qa()){const r=yield Ka(),{token:i}=yield Qc(yo(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function pg(n,e){const t=Hn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function sw(n){const{app:e}=n,t=Hn(e);let r=t.tokenRefresher;r||(r=function I(n){const{app:e}=n;return new ha((0,te.Z)(function*(){let r;if(r=Hn(e).token?yield Bi(n,!0):yield Bi(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Hn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Kc.RETRIAL_MIN_WAIT,Kc.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function y(n){return n.expireTimeMillis-Date.now()>0}function T(n){return{token:tC(X_),error:n}}class M{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hn(this.app);for(const t of e)pg(this.app,t.next);return Promise.resolve()}}const $M="app-check-internal";!function zM(){(0,dn._registerComponent)(new gr.wA("app-check",n=>function F(n,e){return new M(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($M).initialize()})),(0,dn._registerComponent)(new gr.wA($M,n=>function se(n){return{getToken:e=>Bi(n,e),getLimitedUseToken:()=>zl(n),addTokenListener:e=>function Id(n,e,t,r){const{app:i}=n,o=Hn(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&y(o.token)){const d=o.token;Promise.resolve().then(()=>{t({token:d.token}),sw(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>sw(n))}(n,"INTERNAL",e),removeTokenListener:e=>pg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,dn.registerVersion)("@firebase/app-check","0.8.0")}();class yg{constructor(){return(0,$t.vb)("app-check")}}typeof window<"u"&&window;var wg=U(120);const rf=new p.OlP("angularfire2.auth.use-emulator"),sf=new p.OlP("angularfire2.auth.settings"),uw=new p.OlP("angularfire2.auth.tenant-id"),dw=new p.OlP("angularfire2.auth.langugage-code"),hw=new p.OlP("angularfire2.auth.use-device-language"),oy=new p.OlP("angularfire.auth.persistence"),Ig=(n,e,t,r,i,o,l,d)=>(0,er.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,o&&f.useDeviceLanguage(),l)for(const[_,E]of Object.entries(l))f.settings[_]=E;return d&&f.setPersistence(d),f},[t,r,i,o,l,d]);let af=(()=>{class n{constructor(t,r,i,o,l,d,f,_,E,D,k,V){const z=new Sn.x,ee=(0,It.of)(void 0).pipe((0,Oo.Q)(l.outsideAngular),(0,tr.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,8661)))),(0,Et.U)(()=>(0,er.on)(t,o,r)),(0,Et.U)(de=>Ig(de,o,d,_,E,D,f,k)),Hc({bufferSize:1,refCount:!1}));if(Ji(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,It.of)(null);else{ee.pipe(Js()).subscribe();const je=ee.pipe((0,tr.w)(Je=>Je.getRedirectResult().then(Ot=>Ot,()=>null)),$t.iC,Hc({bufferSize:1,refCount:!1})),Ke=ee.pipe((0,tr.w)(Je=>new oi.y(Ot=>({unsubscribe:o.runOutsideAngular(()=>Je.onAuthStateChanged(Nt=>Ot.next(Nt),Nt=>Ot.error(Nt),()=>Ot.complete()))})))),qe=ee.pipe((0,tr.w)(Je=>new oi.y(Ot=>({unsubscribe:o.runOutsideAngular(()=>Je.onIdTokenChanged(Nt=>Ot.next(Nt),Nt=>Ot.error(Nt),()=>Ot.complete()))}))));this.authState=je.pipe(Zh(Ke),(0,Vi.R)(l.outsideAngular),(0,Oo.Q)(l.insideAngular)),this.user=je.pipe(Zh(qe),(0,Vi.R)(l.outsideAngular),(0,Oo.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,tr.w)(Je=>Je?(0,Pn.D)(Je.getIdToken()):(0,It.of)(null))),this.idTokenResult=this.user.pipe((0,tr.w)(Je=>Je?(0,Pn.D)(Je.getIdTokenResult()):(0,It.of)(null))),this.credential=(0,ks.T)(je,z,this.authState.pipe(rr(Je=>!Je))).pipe((0,Et.U)(Je=>Je?.user?Je:null),(0,Vi.R)(l.outsideAngular),(0,Oo.Q)(l.insideAngular))}return(0,er.pX)(this,ee,o,{spy:{apply:(de,je,Ke)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&Ke.then(qe=>z.next(qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(er.Dh),p.LFG(er.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(rf,8),p.LFG(sf,8),p.LFG(uw,8),p.LFG(dw,8),p.LFG(hw,8),p.LFG(oy,8),p.LFG(yg,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZM=(()=>{class n{constructor(){wg.Z.registerVersion("angularfire",$t.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[af]}),n})();var bg=U(6321);function fw(n,e=bg.z){return(0,Vr.e)((t,r)=>{let i=null,o=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const _=o;o=null,r.next(_)}};function f(){const _=l+n,E=e.now();if(E<_)return i=this.schedule(void 0,_-E),void r.add(i);d()}t.subscribe((0,Yn.x)(r,_=>{o=_,l=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}class YM{constructor(e,t){this._delegate=e,this.firebase=t,(0,dn._addComponent)(e,new gr.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,dn.deleteApp)(this._delegate)))}_getService(e,t=dn._DEFAULT_ENTRY_NAME){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=dn._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,dn._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,dn._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ls=new O.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),mw=function gw(){const n=function pw(n){const e={},t={__esModule:!0,initializeApp:function o(_,E={}){const D=dn.initializeApp(_,E);if((0,O.r3)(e,D.name))return e[D.name];const k=new n(D,t);return e[D.name]=k,k},app:i,registerVersion:dn.registerVersion,setLogLevel:dn.setLogLevel,onLog:dn.onLog,apps:null,SDK_VERSION:dn.SDK_VERSION,INTERNAL:{registerComponent:function d(_){const E=_.name,D=E.replace("-compat","");if(dn._registerComponent(_)&&"PUBLIC"===_.type){const k=(V=i())=>{if("function"!=typeof V[D])throw Ls.create("invalid-app-argument",{appName:E});return V[D]()};void 0!==_.serviceProps&&(0,O.ZB)(k,_.serviceProps),t[D]=k,n.prototype[D]=function(...V){return this._getService.bind(this,E).apply(this,_.multipleInstances?V:[])}}return"PUBLIC"===_.type?t[D]:null},removeApp:function r(_){delete e[_]},useAsService:function f(_,E){return"serverAuth"===E?null:E},modularAPIs:dn}};function i(_){if(!(0,O.r3)(e,_=_||dn._DEFAULT_ENTRY_NAME))throw Ls.create("no-app",{appName:_});return e[_]}return t.default=t,Object.defineProperty(t,"apps",{get:function l(){return Object.keys(e).map(_=>e[_])}}),i.App=n,t}(YM);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:gw,extendNamespace:function e(t){(0,O.ZB)(n,t)},createSubscribe:O.ne,ErrorFactory:O.LL,deepExtend:O.ZB}),n}(),ss=new zr.Yd("@firebase/app-compat");if((0,O.jU)()&&void 0!==self.firebase){ss.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&ss.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const XM=mw;!function sC(n){(0,dn.registerVersion)("@firebase/app-compat","0.2.19",n)}();const _w="firebasestorage.googleapis.com",oC="storageBucket";class jr extends O.ZR{constructor(e,t,r=0){super(Cg(e),`Firebase Storage: ${t} (${Cg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Rr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Rr||{});function Cg(n){return"storage/"+n}function Dg(){return new jr(Rr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yw(){return new jr(Rr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vw(){return new jr(Rr.CANCELED,"User canceled the upload/download.")}function ly(){return new jr(Rr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cf(n){return new jr(Rr.INVALID_ARGUMENT,n)}function dC(){return new jr(Rr.APP_DELETED,"The Firebase app was deleted.")}function hC(n){return new jr(Rr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ag(n,e){return new jr(Rr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function uf(n){throw new jr(Rr.INTERNAL_ERROR,"Internal error: "+n)}class Ri{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ri.makeFromUrl(e,t)}catch{return new Ri(e,"")}if(""===r.path)return r;throw function ay(n){return new jr(Rr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Je){Je.path_=decodeURIComponent(Je.path)}const D=t.replace(/[.]/g,"\\."),qe=[{regex:d,indices:{bucket:1,path:3},postModify:function o(Je){"/"===Je.path.charAt(Je.path.length-1)&&(Je.path_=Je.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===_w?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Je=0;Je<qe.length;Je++){const Ot=qe[Je],Nt=Ot.regex.exec(e);if(Nt){let Hr=Nt[Ot.indices.path];Hr||(Hr=""),r=new Ri(Nt[Ot.indices.bucket],Hr),Ot.postModify(r);break}}if(null==r)throw function lf(n){return new jr(Rr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Ew{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Za(n){return"string"==typeof n||n instanceof String}function bw(n){return uy()&&n instanceof Blob}function uy(){return typeof Blob<"u"&&!(0,O.UG)()}function Tw(n,e,t,r){if(r<e)throw cf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw cf(`Invalid value for '${n}'. Expected ${t} or less.`)}function tu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Rg(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var df=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(df||{});function Cw(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class pC{constructor(e,t,r,i,o,l,d,f,_,E,D,k=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=D,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,z)=>{this.resolve_=V,this.reject_=z,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function ok(n){return void 0!==n}(f)?o():o(f)}catch(f){l(f)}else if(null!==d){const f=Dg();f.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,f):f)}else l(i.canceled?this.appDelete_?dC():vw():yw())};this.canceled_?t(0,new xg(!1,null,!0)):this.backoffId_=function ww(n,e,t){let r=1,i=null,o=null,l=!1,d=0;function f(){return 2===d}let _=!1;function E(...de){_||(_=!0,e.apply(null,de))}function D(de){i=setTimeout(()=>{i=null,n(V,f())},de)}function k(){o&&clearTimeout(o)}function V(de,...je){if(_)return void k();if(de)return k(),void E.call(null,de,...je);if(f()||l)return k(),void E.call(null,de,...je);let qe;r<64&&(r*=2),1===d?(d=2,qe=0):qe=1e3*(r+Math.random()),D(qe)}let z=!1;function ee(de){z||(z=!0,k(),!_&&(null!==i?(de||(d=2),clearTimeout(i),D(0)):de||(d=1)))}return D(0),o=setTimeout(()=>{l=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new xg(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const d=o.getErrorCode()===df.NO_ERROR,f=o.getStatus();if(!d||Cw(f,this.additionalRetryCodes_)&&this.retry){const E=o.getErrorCode()===df.ABORT;return void r(!1,new xg(!1,null,E))}const _=-1!==this.successCodes_.indexOf(f);r(!0,new xg(_,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function sk(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function hy(...n){const e=function Sw(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(uy())return new Blob(n);throw new jr(Rr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rw{constructor(e,t){this.data=e,this.contentType=t||null}}function fy(n,e){switch(n){case os.RAW:return new Rw(yC(e));case os.BASE64:case os.BASE64URL:return new Rw(vC(n,e));case os.DATA_URL:return new Rw(function EC(n){const e=new xw(n);return e.base64?vC(os.BASE64,e.rest):function ak(n){let e;try{e=decodeURIComponent(n)}catch{throw Ag(os.DATA_URL,"Malformed data URL.")}return yC(e)}(e.rest)}(e),function py(n){return new xw(n).contentType}(e))}throw Dg()}function yC(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function vC(n,e){switch(n){case os.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw Ag(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case os.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ag(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Aw(n){if(typeof atob>"u")throw function ik(n){return new jr(Rr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Ag(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class xw{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ag(os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Mw(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Fs{constructor(e,t){let r=0,i="";bw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(bw(this.data_)){const i=function _C(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Fs(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Fs(r,!0)}}static getBlob(...e){if(uy()){const t=e.map(r=>r instanceof Fs?r.data_:r);return new Fs(hy.apply(null,t))}{const t=e.map(l=>Za(l)?fy(os.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[o++]=l[d]}),new Fs(i,!0)}}uploadData(){return this.data_}}function kw(n){let e;try{e=JSON.parse(n)}catch{return null}return function fC(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function wC(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Pw(n,e){return e}class Us{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Pw}}let Wl=null;function Td(){if(Wl)return Wl;const n=[];n.push(new Us("bucket")),n.push(new Us("generation")),n.push(new Us("metageneration")),n.push(new Us("name","fullPath",!0));const t=new Us("name");t.xform=function e(o,l){return function gy(n){return!Za(n)||n.length<2?n:wC(n)}(l)},n.push(t);const i=new Us("size");return i.xform=function r(o,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Us("timeCreated")),n.push(new Us("updated")),n.push(new Us("md5Hash",null,!0)),n.push(new Us("cacheControl",null,!0)),n.push(new Us("contentDisposition",null,!0)),n.push(new Us("contentEncoding",null,!0)),n.push(new Us("contentLanguage",null,!0)),n.push(new Us("contentType",null,!0)),n.push(new Us("metadata","customMetadata",!0)),Wl=n,Wl}function Ow(n,e,t){const r=kw(e);return null===r?null:function bC(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return function IC(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Ri(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function Nw(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const CC="prefixes",DC="items";class as{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function no(n){if(!n)throw Dg()}function my(n,e){return function t(r,i){const o=Ow(n,i,e);return no(null!==o),o}}function kg(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function nk(){return new jr(Rr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function tk(){return new jr(Rr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Sg(n){return new jr(Rr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function cC(n){return new jr(Rr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function _y(n){const e=kg(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function ek(n){return new jr(Rr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function dk(n,e,t){const i=tu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new as(i,"GET",my(n,t),l);return d.errorHandler=_y(e),d}function SC(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const d=tu(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,E=new as(d,"GET",function F2(n,e){return function t(r,i){const o=function uk(n,e,t){const r=kw(t);return null===r?null:function ck(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[CC])for(const i of t[CC]){const o=i.replace(/\/$/,""),l=n._makeStorageReference(new Ri(e,o));r.prefixes.push(l)}if(t[DC])for(const i of t[DC]){const o=n._makeStorageReference(new Ri(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return no(null!==o),o}}(n,e.bucket),_);return E.urlParams=o,E.errorHandler=kg(e),E}function Ya(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Lw(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Pg{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function yy(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{no(!1)}return no(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Fw={STATE_CHANGED:"state_changed"},ls={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xC(n){switch(n){case"running":case"pausing":case"canceling":return ls.RUNNING;case"paused":return ls.PAUSED;case"success":return ls.SUCCESS;case"canceled":return ls.CANCELED;default:return ls.ERROR}}class j2{constructor(e,t,r){if(function Iw(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Cd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let MC=null;class mk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=df.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=df.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=df.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw uf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class _k extends mk{initXhr(){this.xhr_.responseType="text"}}function ma(){return MC?MC():new _k}class PC{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Td(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Rr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(Cw(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=yw()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Rr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function RC(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=Ya(e,r,i),d={name:l.fullPath},f=tu(o,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=Nw(l,t),z=new as(f,"POST",function V(ee){let de;yy(ee);try{de=ee.getResponseHeader("X-Goog-Upload-URL")}catch{no(!1)}return no(Za(de)),de},n.maxUploadRetryTime);return z.urlParams=d,z.headers=E,z.body=D,z.errorHandler=kg(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ma,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function V2(n,e,t,r){const f=new as(t,"POST",function o(_){const E=yy(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{no(!1)}D||no(!1);const k=Number(D);return no(!isNaN(k)),new Pg(k,r.size(),"final"===E)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=kg(e),f}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,ma,t,r);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Pg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=function B2(n,e,t,r,i,o,l,d){const f=new Pg(0,0);if(l?(f.current=l.current,f.total=l.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function cy(){return new jr(Rr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _=f.total-f.current;let E=_;i>0&&(E=Math.min(E,i));const D=f.current;let V="";V=0===E?"finalize":_===E?"upload, finalize":"upload";const z={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${f.current}`},ee=r.slice(D,D+E);if(null===ee)throw ly();const qe=new as(t,"POST",function de(Je,Ot){const Nt=yy(Je,["active","final"]),vn=f.current+E,Hr=r.size();let Yi;return Yi="final"===Nt?my(e,o)(Je,Ot):null,new Pg(vn,Hr,"final"===Nt,Yi)},e.maxUploadRetryTime);return qe.headers=z,qe.body=ee.uploadData(),qe.progressCallback=d||null,qe.errorHandler=kg(n),qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(l,ma,i,o,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=dk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ma,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function hf(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let qe="";for(let Je=0;Je<2;Je++)qe+=Math.random().toString().slice(2);return qe}();l["Content-Type"]="multipart/related; boundary="+f;const _=Ya(e,r,i),E=Nw(_,t),V=Fs.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+f+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===V)throw ly();const z={name:_.fullPath},ee=tu(o,n.host,n._protocol),je=n.maxUploadRetryTime,Ke=new as(ee,"POST",my(n,t),je);return Ke.urlParams=z,Ke.headers=l,Ke.body=V.uploadData(),Ke.errorHandler=kg(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ma,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vw(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=xC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new j2(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(xC(this._state)){case ls.SUCCESS:Cd(this._resolve.bind(null,this.snapshot))();break;case ls.CANCELED:case ls.ERROR:Cd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(xC(this._state)){case ls.RUNNING:case ls.PAUSED:e.next&&Cd(e.next.bind(e,this.snapshot))();break;case ls.SUCCESS:e.complete&&Cd(e.complete.bind(e))();break;default:e.error&&Cd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Uo{constructor(e,t){this._service=e,this._location=t instanceof Ri?t:Ri.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Uo(e,t)}get root(){const e=new Ri(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wC(this._location.path)}get storage(){return this._service}get parent(){const e=function lk(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ri(this._location.bucket,e);return new Uo(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw hC(e)}}function NC(n,e,t){return Vw.apply(this,arguments)}function Vw(){return(Vw=(0,te.Z)(function*(n,e,t){const i=yield Bw(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield NC(n,e,i.nextPageToken))})).apply(this,arguments)}function Bw(n,e){null!=e&&"number"==typeof e.maxResults&&Tw("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=SC(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ma)}function Og(n){n._throwIfRoot("getDownloadURL");const e=function hk(n,e,t){const i=tu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new as(i,"GET",function U2(n,e){return function t(r,i){const o=Ow(n,i,e);return no(null!==o),function TC(n,e,t,r){const i=kw(e);if(null===i||!Za(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(_=>{const D=n.fullPath;return tu("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+Rg({alt:"media",token:_})})[0]}(o,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=_y(e),d}(n.storage,n._location,Td());return n.storage.makeRequestWithTokens(e,ma).then(t=>{if(null===t)throw function rk(){return new jr(Rr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function ff(n,e){const t=function L2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ri(n._location.bucket,t);return new Uo(n.storage,r)}function wy(n,e){if(n instanceof Iy){const t=n;if(null==t._bucket)throw function uC(){return new jr(Rr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oC+"' property when initializing the app?")}();const r=new Uo(t,t._bucket);return null!=e?wy(r,e):r}return void 0!==e?ff(n,e):n}function UC(n,e){if(e&&function LC(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Iy)return function FC(n,e){return new Uo(n,e)}(n,e);throw cf("To use ref(service, url), the first argument must be a Storage instance.")}return wy(n,e)}function VC(n,e){const t=e?.[oC];return null==t?null:Ri.makeFromBucketSpec(t,n)}class Iy{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=_w,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ri.makeFromBucketSpec(i,this._host):VC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ri.makeFromBucketSpec(this._url,e):VC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Uo(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Ew(dC());{const l=function mC(n,e,t,r,i,o,l=!0){const d=Rg(n.urlParams),f=n.url+d,_=Object.assign({},n.headers);return function dy(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function Dw(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function gC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,o),function Mg(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new pC(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,te.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const Ng="@firebase/storage",by="storage";function jw(n,e,t){return function OC(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new PC(n,new Fs(e),t)}(n=(0,O.m9)(n),e,t)}function pf(n){return function Ik(n){const e={prefixes:[],items:[]};return NC(n,e).then(()=>e)}(n=(0,O.m9)(n))}function HC(n){return Og(n=(0,O.m9)(n))}function Ty(n){return function Un(n){n._throwIfRoot("deleteObject");const e=function pk(n,e){const r=tu(e.fullServerUrl(),n.host,n._protocol),d=new as(r,"DELETE",function l(f,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=_y(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ma)}(n=(0,O.m9)(n))}function Qa(n,e){return UC(n=(0,O.m9)(n),e)}function gf(n=(0,dn.getApp)(),e){n=(0,O.m9)(n);const r=(0,dn._getProvider)(n,by).getImmediate({identifier:e}),i=(0,O.P0)("storage");return i&&Cy(r,...i),r}function Cy(n,e,t,r={}){!function BC(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function $C(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Iy(t,r,i,e,dn.SDK_VERSION)}!function mf(){(0,dn._registerComponent)(new gr.wA(by,$C,"PUBLIC").setMultipleInstances(!0)),(0,dn.registerVersion)(Ng,"0.11.2",""),(0,dn.registerVersion)(Ng,"0.11.2","esm2017")}();class Dy{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class zC{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Dy(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Dy(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?l=>t(new Dy(l,this,this._ref)):{next:t.next?l=>t.next(new Dy(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class GC{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new _a(e,this._service))}get items(){return this._delegate.items.map(e=>new _a(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _a{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Xa(n,e){return ff(n,e)}(this._delegate,e);return new _a(t,this.storage)}get root(){return new _a(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new _a(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new zC(jw(this._delegate,e,t),this)}putString(e,t=os.RAW,r){this._throwIfRoot("putString");const i=fy(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new zC(new PC(this._delegate,new Fs(i.data,!0),o),this)}listAll(){return pf(this._delegate).then(e=>new GC(e,this.storage))}list(e){return function Hw(n,e){return Bw(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new GC(t,this.storage))}getMetadata(){return function Dd(n){return function H2(n){n._throwIfRoot("getMetadata");const e=dk(n.storage,n._location,Td());return n.storage.makeRequestWithTokens(e,ma)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function Ck(n,e){return function $2(n,e){n._throwIfRoot("updateMetadata");const t=function fk(n,e,t,r){const o=tu(e.fullServerUrl(),n.host,n._protocol),d=Nw(t,r),_=n.maxOperationRetryTime,E=new as(o,"PATCH",my(n,r),_);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=_y(e),E}(n.storage,n._location,e,Td());return n.storage.makeRequestWithTokens(t,ma)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return HC(this._delegate)}delete(){return this._throwIfRoot("delete"),Ty(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw hC(e)}}class $w{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(WC(e))throw cf("ref() expected a child path but got a URL, use refFromURL instead.");return new _a(Qa(this._delegate,e),this)}refFromURL(e){if(!WC(e))throw cf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ri.makeFromUrl(e,this._delegate.host)}catch{throw cf("refFromUrl() expected a valid full URL but got an invalid one.")}return new _a(Qa(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){Cy(this._delegate,e,t,r)}}function WC(n){return/^[A-Za-z]+:\/\//.test(n)}function Dk(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new $w(t,r)}function Rk(n){const e=function Ak(n){return new oi.y(e=>{const t=l=>e.next(l);t(n.snapshot);const o=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(fw(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Et.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Gw(n){return{getDownloadURL:()=>(0,It.of)(void 0).pipe($t.fc,(0,tr.w)(()=>n.getDownloadURL()),$t.iC),getMetadata:()=>(0,It.of)(void 0).pipe($t.fc,(0,tr.w)(()=>n.getMetadata()),$t.iC),delete:()=>(0,Pn.D)(n.delete()),child:e=>Gw(n.child(e)),updateMetadata:e=>(0,Pn.D)(n.updateMetadata(e)),put:(e,t)=>Rk(n.put(e,t)),putString:(e,t,r)=>Rk(n.putString(e,t,r)),list:e=>(0,Pn.D)(n.list(e)),listAll:()=>(0,Pn.D)(n.listAll())}}!function Sk(n){const e={TaskState:ls,TaskEvent:Fw,StringFormat:os,Storage:$w,Reference:_a};n.INTERNAL.registerComponent(new gr.wA("storage-compat",Dk,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(XM);const Sy=new p.OlP("angularfire2.storageBucket"),xk=new p.OlP("angularfire2.storage.maxUploadRetryTime"),Ww=new p.OlP("angularfire2.storage.maxOperationRetryTime"),qw=new p.OlP("angularfire2.storage.use-emulator");let _f=(()=>{class n{constructor(t,r,i,o,l,d,f,_,E,D){const k=(0,er.on)(t,l,r);this.storage=(0,er.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const V=l.runOutsideAngular(()=>k.storage(i||void 0)),z=E;return z&&V.useEmulator(...z),f&&V.setMaxUploadRetryTime(f),_&&V.setMaxOperationRetryTime(_),V},[f,_])}ref(t){return Gw(this.storage.ref(t))}refFromURL(t){return Gw(this.storage.refFromURL(t))}upload(t,r,i){return Gw(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(er.Dh),p.LFG(er.xv,8),p.LFG(Sy,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(xk,8),p.LFG(Ww,8),p.LFG(qw,8),p.LFG(yg,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Kw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),Lg=(()=>{class n{constructor(){wg.Z.registerVersion("angularfire",$t.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[_f],imports:[Kw]}),n})();var nu=U(7537),Sd=U(9940);function vf(...n){return function yf(){return(0,nu.J)(1)}()((0,Pn.D)(n,(0,Sd.yG)(n)))}function Ja(...n){const e=(0,Sd.yG)(n);return(0,Vr.e)((t,r)=>{(e?vf(n,t,e):vf(n,t)).subscribe(r)})}function ZC(){return(0,Vr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Yn.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function el(n,e){return(0,Vr.e)(function Zw(n,e,t,r,i){return(o,l)=>{let d=t,f=e,_=0;o.subscribe((0,Yn.x)(l,E=>{const D=_++;f=d?n(f,E,D):(d=!0,E),r&&l.next(f)},i&&(()=>{d&&l.next(f),l.complete()})))}}(n,e,arguments.length>=2,!0))}var ht,Yw=U(3997),YC=(U(8661),U(3399)),ru=U(7592),Qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vo={},Xw=Xw||{},Yt=Qw||self;function Ay(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function iu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var eI="closure_uid_"+(1e9*Math.random()>>>0),QC=0;function tI(n,e,t){return n.call.apply(n.bind,arguments)}function Ry(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Es(n,e,t){return(Es=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tI:Ry).apply(null,arguments)}function Fg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function ql(){this.s=this.s,this.o=this.o}ql.prototype.s=!1,ql.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Jw(n){Object.prototype.hasOwnProperty.call(n,eI)&&n[eI]||(n[eI]=++QC)}(this)},ql.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const XC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ad(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function JC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ay(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let l=0;l<o;l++)n[i+l]=r[l]}else n.push(r)}}function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ai.prototype.h=function(){this.defaultPrevented=!0};var Ug=function(){if(!Yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Yt.addEventListener("test",()=>{},e),Yt.removeEventListener("test",()=>{},e)}catch{}return n}();function Vg(n){return/^[\s\xa0]*$/.test(n)}function Bg(){var n=Yt.navigator;return n&&(n=n.userAgent)?n:""}function tl(n){return-1!=Bg().indexOf(n)}function nI(n){return nI[" "](n),n}nI[" "]=function(){};var rI,n,eD=tl("Opera"),Rd=tl("Trident")||tl("MSIE"),xy=tl("Edge"),tD=xy||Rd,My=tl("Gecko")&&!(-1!=Bg().toLowerCase().indexOf("webkit")&&!tl("Edge"))&&!(tl("Trident")||tl("MSIE"))&&!tl("Edge"),nD=-1!=Bg().toLowerCase().indexOf("webkit")&&!tl("Edge");function rD(){var n=Yt.document;return n?n.documentMode:void 0}e:{var ky="",iI=(n=Bg(),My?/rv:([^\);]+)(\)|;)/.exec(n):xy?/Edge\/([\d\.]+)/.exec(n):Rd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nD?/WebKit\/(\S+)/.exec(n):eD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iI&&(ky=iI?iI[1]:""),Rd){var Py=rD();if(null!=Py&&Py>parseFloat(ky)){rI=String(Py);break e}}rI=ky}var Z2=Yt.document&&Rd&&(rD()||parseInt(rI,10))||void 0;function Ef(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(My){e:{try{nI(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ef.$.h.call(this)}}Hi(Ef,ai);var sD={2:"touch",3:"pen",4:"mouse"};Ef.prototype.h=function(){Ef.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vs="closure_listenable_"+(1e6*Math.random()|0),oD=0;function Y2(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++oD,this.fa=this.ia=!1}function wf(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function nl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function aD(n){const e={};for(const t in n)e[t]=n[t];return e}const Pk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lD(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Pk.length;o++)t=Pk[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function If(n){this.src=n,this.g={},this.h=0}function Bo(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=XC(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(wf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Oy(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}If.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=Oy(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new Y2(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var aI="closure_lm_"+(1e6*Math.random()|0),cD={};function xi(n,e,t,r,i){if(r&&r.once)return dD(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xi(n,e[o],t,r,i);return null}return t=Ly(t),n&&n[Vs]?n.O(e,t,iu(r)?!!r.capture:!!r,i):uD(n,e,t,!1,r,i)}function uD(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=iu(i)?!!i.capture:!!i,d=uI(n);if(d||(n[aI]=d=new If(n)),(t=d.add(e,t,r,l,o)).proxy)return t;if(r=function lI(){const e=fD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ug||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(cI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function dD(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)dD(n,e[o],t,r,i);return null}return t=Ly(t),n&&n[Vs]?n.P(e,t,iu(r)?!!r.capture:!!r,i):uD(n,e,t,!0,r,i)}function hD(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hD(n,e[o],t,r,i);else r=iu(r)?!!r.capture:!!r,t=Ly(t),n&&n[Vs]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Oy(o=n.g[e],t,r,i))&&(wf(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=uI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Oy(e,t,r,i)),(t=-1<n?e[n]:null)&&jg(t))}function jg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Vs])Bo(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(cI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=uI(e))?(Bo(t,n),0==t.h&&(t.src=null,e[aI]=null)):wf(n)}}}function cI(n){return n in cD?cD[n]:cD[n]="on"+n}function fD(n,e){if(n.fa)n=!0;else{e=new Ef(e,this);var t=n.listener,r=n.la||n.src;n.ia&&jg(n),n=t.call(r,e)}return n}function uI(n){return(n=n[aI])instanceof If?n:null}var Ny="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ly(n){return"function"==typeof n?n:(n[Ny]||(n[Ny]=function(e){return n.handleEvent(e)}),n[Ny])}function $i(){ql.call(this),this.i=new If(this),this.S=this,this.J=null}function cs(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var i=e;lD(e=new ai(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=Fy(l,r,!0,e)&&i}if(i=Fy(l=e.g=n,r,!0,e)&&i,i=Fy(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Fy(l=e.g=t[o],r,!1,e)&&i}function Fy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.fa&&l.capture==t){var d=l.listener,f=l.la||l.src;l.ia&&Bo(n.i,l),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}Hi($i,ql),$i.prototype[Vs]=!0,$i.prototype.removeEventListener=function(n,e,t,r){hD(this,n,e,t,r)},$i.prototype.N=function(){if($i.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)wf(t[r]);delete n.g[e],n.h--}}this.J=null},$i.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},$i.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Uy=Yt.JSON.stringify;function Kl(){var n=Cf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var pD=new class bf{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ok,n=>n.reset());class Ok{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function mD(n){Yt.setTimeout(()=>{throw n},0)}let xd,Zl=!1,Cf=new class Tf{constructor(){this.h=this.g=null}add(e,t){const r=pD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},dI=()=>{const n=Yt.Promise.resolve(void 0);xd=()=>{n.then(_D)}};var _D=()=>{for(var n;n=Kl();){try{n.h.call(n.g)}catch(t){mD(t)}var e=pD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Zl=!1};function Vy(n,e){$i.call(this),this.h=n||1,this.g=e||Yt,this.j=Es(this.qb,this),this.l=Date.now()}function hI(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function fI(n,e,t){if("function"==typeof n)t&&(n=Es(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Es(n.handleEvent,n)}return 2147483647<Number(e)?-1:Yt.setTimeout(n,e||0)}function yD(n){n.g=fI(()=>{n.g=null,n.i&&(n.i=!1,yD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hi(Vy,$i),(ht=Vy.prototype).ga=!1,ht.T=null,ht.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),cs(this,"tick"),this.ga&&(hI(this),this.start()))}},ht.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.N=function(){Vy.$.N.call(this),hI(this),delete this.g};class vD extends ql{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yD(this)}N(){super.N(),this.g&&(Yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function By(n){ql.call(this),this.h=n,this.g={}}Hi(By,ql);var ED=[];function Nk(n,e,t,r){Array.isArray(t)||(t&&(ED[0]=t.toString()),t=ED);for(var i=0;i<t.length;i++){var o=xi(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Lk(n){nl(n.g,function(e,t){this.g.hasOwnProperty(t)&&jg(e)},n),n.g={}}function Hg(){this.g=!0}function Yl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function bD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return Uy(t)}catch{return e}}(n,t)+(r?" "+r:"")})}By.prototype.N=function(){By.$.N.call(this),Lk(this)},By.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hg.prototype.Ea=function(){this.g=!1},Hg.prototype.info=function(){};var Md={},pI=null;function $g(){return pI=pI||new $i}function qt(n){ai.call(this,Md.Ta,n)}function Df(n){const e=$g();cs(e,new qt(e))}function gI(n,e){ai.call(this,Md.STAT_EVENT,n),this.stat=e}function vi(n){const e=$g();cs(e,new gI(e,n))}function mI(n,e){ai.call(this,Md.Ua,n),this.size=e}function zg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Yt.setTimeout(function(){n()},e)}Md.Ta="serverreachability",Hi(qt,ai),Md.STAT_EVENT="statevent",Hi(gI,ai),Md.Ua="timingevent",Hi(mI,ai);var kd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Pd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gg(){}function _I(){}Gg.prototype.h=null;var jy,Od={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Wg(){ai.call(this,"d")}function qg(){ai.call(this,"c")}function Af(){}function Kg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new By(this),this.P=Fk,this.V=new Vy(n=tD?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new TD}function TD(){this.i=null,this.g="",this.h=!1}Hi(Wg,ai),Hi(qg,ai),Hi(Af,Gg),Af.prototype.g=function(){return new XMLHttpRequest},Af.prototype.i=function(){return{}},jy=new Af;var Fk=45e3,Hy={},$y={};function yI(n,e,t){n.L=1,n.v=Gy(Ql(e)),n.s=t,n.S=!0,CD(n,null)}function CD(n,e){n.G=Date.now(),Zg(n),n.A=Ql(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),wI(t.i,"t",r),n.C=0,t=n.l.J,n.h=new TD,n.g=iS(n.l,t?e:null,!n.s),0<n.O&&(n.M=new vD(Es(n.Pa,n,n.g),n.O)),Nk(n.U,n.g,"readystatechange",n.nb),e=n.I?aD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Df(),function wD(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",d=o.split("&"),f=0;f<d.length;f++){var _=d[f].split("=");if(1<_.length){var E=_[0];_=_[1];var D=E.split("_");l=2<=D.length&&"type"==D[1]?l+(E+"=")+_+"&":l+(E+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function DD(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function vI(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=SD(n,t),i==$y){4==e&&(n.o=4,vi(14),r=!1),Yl(n.j,n.m,null,"[Incomplete Response]");break}if(i==Hy){n.o=4,vi(15),Yl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Yl(n.j,n.m,i,null),RD(n,i)}DD(n)&&i!=$y&&i!=Hy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),nv(e),e.M=!0,vi(11))):(Yl(n.j,n.m,t,"[Invalid Chunked Response]"),Nd(n),Yg(n))}function SD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?$y:(t=Number(e.substring(t,r)),isNaN(t)?Hy:(r+=1)+t>e.length?$y:(e=e.slice(r,r+t),n.C=r+t,e))}function Zg(n){n.Y=Date.now()+n.P,AD(n,n.P)}function AD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zg(Es(n.lb,n),e)}function ws(n){n.B&&(Yt.clearTimeout(n.B),n.B=null)}function Yg(n){0==n.l.H||n.J||AI(n.l,n)}function Nd(n){ws(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,hI(n.V),Lk(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function RD(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Jg(t.i,n)))if(!n.K&&Jg(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;SI(t),Fd(t)}tv(t),vi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=zg(Es(t.ib,t),6e3));if(1>=VD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Of(t,11)}else if((n.K||t.g==n)&&SI(t),!Vg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.V=_[0],_=_[1],2==t.H)if("c"==_[0]){t.K=_[1],t.pa=_[2];const E=_[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const D=_[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const k=_[5];null!=k&&"number"==typeof k&&0<k&&(t.L=r=1.5*k,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var o=r.i;o.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(II(o,o.h),o.h=null))}if(r.F){const ee=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.Da=ee,mr(r.I,r.F,ee))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=rS(r,r.J?r.pa:null,r.Y),l.K){bI(r.i,l);var d=l,f=r.L;f&&d.setTimeout(f),d.B&&(ws(d),Zg(d)),r.g=l}else tS(r);0<t.j.length&&ev(t)}else"stop"!=_[0]&&"close"!=_[0]||Of(t,7);else 3==t.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Of(t,7):DI(t):"noop"!=_[0]&&t.h&&t.h.Aa(_),t.A=0)}Df()}catch{}}function MD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ay(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function xD(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ay(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function EI(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ay(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(ht=Kg.prototype).setTimeout=function(n){this.P=n},ht.nb=function(n){n=n.target;const e=this.M;e&&3==il(n)?e.l():this.Pa(n)},ht.Pa=function(n){try{if(n==this.g)e:{const E=il(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||tD||this.g&&(this.h.h||this.g.ja()||YD(this.g)))){this.J||4!=E||7==e||Df(),ws(this);var t=this.g.da();this.ca=t;t:if(DD(this)){var r=YD(this.g);n="";var i=r.length,o=4==il(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Nd(this),Yg(this);var l="";break t}this.h.i=new Yt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Q2(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vg(d)){var _=d;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,vi(12),Nd(this),Yg(this);break e}Yl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,RD(this,t)}this.S?(vI(this,E,l),tD&&this.i&&3==E&&(Nk(this.U,this.V,"tick",this.mb),this.V.start())):(Yl(this.j,this.m,l,null),RD(this,l)),4==E&&Nd(this),this.i&&!this.J&&(4==E?AI(this.l,this):(this.i=!1,Zg(this)))}else(function $k(n){const e={};n=(n.g&&2<=il(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Vg(n[r]))continue;var t=gD(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function oI(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,vi(12)):(this.o=0,vi(13)),Nd(this),Yg(this)}}}catch{}},ht.mb=function(){if(this.g){var n=il(this.g),e=this.g.ja();this.C<e.length&&(ws(this),vI(this,n,e),this.i&&4!=n&&Zg(this))}},ht.cancel=function(){this.J=!0,Nd(this)},ht.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ID(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Df(),vi(17)),Nd(this),this.o=2,Yg(this)):AD(this,this.Y-n)};var kD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function su(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof su){this.h=n.h,zy(this,n.j),this.s=n.s,this.g=n.g,Rf(this,n.m),this.l=n.l;var e=n.i,t=new xf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),PD(this,t),this.o=n.o}else n&&(e=String(n).match(kD))?(this.h=!1,zy(this,e[1]||"",!0),this.s=Qg(e[2]||""),this.g=Qg(e[3]||"",!0),Rf(this,e[4]),this.l=Qg(e[5]||"",!0),PD(this,e[6]||"",!0),this.o=Qg(e[7]||"")):(this.h=!1,this.i=new xf(null,this.h))}function Ql(n){return new su(n)}function zy(n,e,t){n.j=t?Qg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Rf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function PD(n,e,t){e instanceof xf?(n.i=e,function LD(n,e){e&&!n.j&&(ya(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(qy(this,r),wI(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Xg(e,Bk)),n.i=new xf(e,n.h))}function mr(n,e,t){n.i.set(e,t)}function Gy(n){return mr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rl),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rl(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}su.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xg(e,Wy,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xg(e,Wy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xg(t,"/"==t.charAt(0)?OD:Vk,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xg(t,ND)),n.join("")};var Wy=/[#\/\?@]/g,Vk=/[#\?:]/g,OD=/[#\?]/g,Bk=/[#\?@]/g,ND=/#/g;function xf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ya(n){n.g||(n.g=new Map,n.h=0,n.i&&function Uk(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qy(n,e){ya(n),e=Ld(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function jk(n,e){return ya(n),e=Ld(n,e),n.g.has(e)}function wI(n,e,t){qy(n,e),0<t.length&&(n.i=null,n.g.set(Ld(n,e),Ad(t)),n.h+=t.length)}function Ld(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ky(n){this.l=n||Xl,n=Yt.PerformanceNavigationTiming?0<(n=Yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Yt.g&&Yt.g.Ka&&Yt.g.Ka()&&Yt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=xf.prototype).add=function(n,e){ya(this),this.i=null,n=Ld(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){ya(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ht.ta=function(){ya(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},ht.Z=function(n){ya(this);let e=[];if("string"==typeof n)jk(this,n)&&(e=e.concat(this.g.get(Ld(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ht.set=function(n,e){return ya(this),this.i=null,jk(this,n=Ld(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Xl=10;function UD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function VD(n){return n.h?1:n.g?n.g.size:0}function Jg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function II(n,e){n.g?n.g.add(e):n.h=e}function bI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function BD(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Ad(n.i)}Ky.prototype.cancel=function(){if(this.i=BD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Zy=class{stringify(n){return Yt.JSON.stringify(n,void 0)}parse(n){return Yt.JSON.parse(n,void 0)}};function em(){this.g=new Zy}function jD(n,e,t){const r=t||"";try{MD(n,function(i,o){let l=i;iu(i)&&(l=Uy(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function TI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function tm(n){this.l=n.fc||null,this.j=n.ob||!1}function nm(n,e){$i.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Qy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hi(tm,Gg),tm.prototype.g=function(){return new nm(this.l,this.j)},tm.prototype.i=function(n){return function(){return n}}({}),Hi(nm,$i);var Qy=0;function HD(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function rm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Mf(n)}function Mf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=nm.prototype).open=function(n,e){if(this.readyState!=Qy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Mf(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rm(this)),this.readyState=Qy},ht.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Mf(this)),this.g&&(this.readyState=3,Mf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Yt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;HD(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ht.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rm(this):Mf(this),3==this.readyState&&HD(this)}},ht.Za=function(n){this.g&&(this.response=this.responseText=n,rm(this))},ht.Ya=function(n){this.g&&(this.response=n,rm(this))},ht.ka=function(){this.g&&rm(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(nm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var $D=Yt.JSON.parse;function ur(n){$i.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zD,this.L=this.M=!1}Hi(ur,$i);var zD="",GD=/^https?$/i,WD=["POST","PUT"];function qD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kf(n),Xy(n)}function kf(n){n.F||(n.F=!0,cs(n,"complete"),cs(n,"error"))}function KD(n){if(n.h&&typeof Xw<"u"&&(!n.C[1]||4!=il(n)||2!=n.da()))if(n.v&&4==il(n))fI(n.La,0,n);else if(cs(n,"readystatechange"),4==il(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(kD)[1]||null;!i&&Yt.self&&Yt.self.location&&(i=Yt.self.location.protocol.slice(0,-1)),r=!GD.test(i?i.toLowerCase():"")}t=r}if(t)cs(n,"complete"),cs(n,"success");else{n.m=6;try{var o=2<il(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",kf(n)}}finally{Xy(n)}}}function Xy(n,e){if(n.g){ZD(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||cs(n,"ready");try{t.onreadystatechange=r}catch{}}}function ZD(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Yt.clearTimeout(n.A),n.A=null)}function il(n){return n.g?n.g.readyState:0}function YD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case zD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function QD(n){let e="";return nl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function CI(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=QD(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mr(n,e,t))}function Pf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Jy(n){this.Ga=0,this.j=[],this.l=new Hg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pf("baseRetryDelayMs",5e3,n),this.hb=Pf("retryDelaySeedMs",1e4,n),this.eb=Pf("forwardChannelMaxRetries",2,n),this.xa=Pf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Ky(n&&n.concurrentRequestLimit),this.Ja=new em,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function DI(n){if(XD(n),3==n.H){var e=n.W++,t=Ql(n.I);if(mr(t,"SID",n.K),mr(t,"RID",e),mr(t,"TYPE","terminate"),im(n,t),(e=new Kg(n,n.l,e)).L=2,e.v=Gy(Ql(t)),t=!1,Yt.navigator&&Yt.navigator.sendBeacon)try{t=Yt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=iS(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Zg(e)}sm(n)}function Fd(n){n.g&&(nv(n),n.g.cancel(),n.g=null)}function XD(n){Fd(n),n.u&&(Yt.clearTimeout(n.u),n.u=null),SI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Yt.clearTimeout(n.m),n.m=null)}function ev(n){if(!UD(n.i)&&!n.m){n.m=!0;var e=n.Na;xd||dI(),Zl||(xd(),Zl=!0),Cf.add(e,n),n.C=0}}function JD(n,e){var t;t=e?e.m:n.W++;const r=Ql(n.I);mr(r,"SID",n.K),mr(r,"RID",t),mr(r,"AID",n.V),im(n,r),n.o&&n.s&&CI(r,n.o,n.s),t=new Kg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=eS(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),II(n.i,t),yI(t,r,e)}function im(n,e){n.na&&nl(n.na,function(t,r){mr(e,r,t)}),n.h&&MD({},function(t,r){mr(e,r,t)})}function eS(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Es(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].g,l.push("ofs="+o)):o=0:l.push("ofs="+o);let d=!0;for(let f=0;f<t;f++){let _=i[f].g;const E=i[f].map;if(_-=o,0>_)o=Math.max(0,i[f].g-100),d=!1;else try{jD(E,l,"req"+_+"_")}catch{r&&r(E)}}if(d){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function tS(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;xd||dI(),Zl||(xd(),Zl=!0),Cf.add(e,n),n.A=0}}function tv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=zg(Es(n.Ma,n),RI(n,n.A)),n.A++,0))}function nv(n){null!=n.B&&(Yt.clearTimeout(n.B),n.B=null)}function nS(n){n.g=new Kg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ql(n.wa);mr(e,"RID","rpc"),mr(e,"SID",n.K),mr(e,"AID",n.V),mr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&mr(e,"TO",n.qa),mr(e,"TYPE","xmlhttp"),im(n,e),n.o&&n.s&&CI(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Gy(Ql(e)),t.s=null,t.S=!0,CD(t,n)}function SI(n){null!=n.v&&(Yt.clearTimeout(n.v),n.v=null)}function AI(n,e){var t=null;if(n.g==e){SI(n),nv(n),n.g=null;var r=2}else{if(!Jg(n.i,e))return;t=e.F,bI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;cs(r=$g(),new mI(r,t)),ev(n)}else tS(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function zk(n,e){return!(VD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=zg(Es(n.Na,n,e),RI(n,n.C)),n.C++,0)))}(n,e)||2==r&&tv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Of(n,5);break;case 4:Of(n,10);break;case 3:Of(n,6);break;default:Of(n,2)}}function RI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Of(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Es(n.pb,n);t||(t=new su("//www.google.com/images/cleardot.gif"),Yt.location&&"http"==Yt.location.protocol||zy(t,"https"),Gy(t)),function Yy(n,e){const t=new Hg;if(Yt.Image){const r=new Image;r.onload=Fg(TI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Fg(TI,t,r,"TestLoadImage: error",!1,e),r.onabort=Fg(TI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fg(TI,t,r,"TestLoadImage: timeout",!1,e),Yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else vi(2);n.H=0,n.h&&n.h.za(e),sm(n),XD(n)}function sm(n){if(n.H=0,n.ma=[],n.h){const e=BD(n.i);(0!=e.length||0!=n.j.length)&&(JC(n.ma,e),JC(n.ma,n.j),n.i.i.length=0,Ad(n.j),n.j.length=0),n.h.ya()}}function rS(n,e,t){var r=t instanceof su?Ql(t):new su(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Rf(r,r.m);else{var i=Yt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new su(null);r&&zy(o,r),e&&(o.g=e),i&&Rf(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&mr(r,t,e),mr(r,"VER",n.ra),im(n,r),r}function iS(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Ha&&!n.va?new tm({ob:!0}):n.va)).Oa(n.J),e}function rv(){}function iv(){if(Rd&&!(10<=Number(Z2)))throw Error("Environmental error: no available transport.")}function Gr(n,e){$i.call(this),this.g=new Jy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Vg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jo(this)}function Nf(n){Wg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function us(){qg.call(this),this.status=1}function jo(n){this.g=n}function Wr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function om(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],l=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;l=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(l<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((o=(e=t+((l=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=o+((l=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function An(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(ht=ur.prototype).Oa=function(n){this.M=n},ht.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jy.g(),this.C=function Sf(n){return n.h||(n.h=n.i())}(this.u?this.u:jy),this.g.onreadystatechange=Es(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void qD(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Yt.FormData&&n instanceof Yt.FormData,!(0<=XC(WD,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of t)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ZD(this),0<this.B&&((this.L=function Hk(n){return Rd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Es(this.ua,this)):this.A=fI(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){qD(this,o)}},ht.ua=function(){typeof Xw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cs(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,cs(this,"complete"),cs(this,"abort"),Xy(this))},ht.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xy(this,!0)),ur.$.N.call(this)},ht.La=function(){this.s||(this.G||this.v||this.l?KD(this):this.kb())},ht.kb=function(){KD(this)},ht.isActive=function(){return!!this.g},ht.da=function(){try{return 2<il(this)?this.g.status:-1}catch{return-1}},ht.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ht.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),$D(e)}},ht.Ia=function(){return this.m},ht.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=Jy.prototype).ra=8,ht.H=1,ht.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Kg(this,this.l,n);let o=this.s;if(this.U&&(o?(o=aD(o),lD(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=eS(this,i,e),mr(t=Ql(this.I),"RID",n),mr(t,"CVER",22),this.F&&mr(t,"X-HTTP-Session-Id",this.F),im(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(QD(o)))+"&"+e:this.o&&CI(t,this.o,o)),II(this.i,i),this.bb&&mr(t,"TYPE","init"),this.P?(mr(t,"$req",e),mr(t,"SID","null"),i.aa=!0,yI(i,t,null)):yI(i,t,e),this.H=2}}else 3==this.H&&(n?JD(this,n):0==this.j.length||UD(this.i)||JD(this))},ht.Ma=function(){if(this.u=null,nS(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=zg(Es(this.jb,this),n)}},ht.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vi(10),Fd(this),nS(this))},ht.ib=function(){null!=this.v&&(this.v=null,Fd(this),tv(this),vi(19))},ht.pb=function(n){n?(this.l.info("Successfully pinged google.com"),vi(2)):(this.l.info("Failed to ping google.com"),vi(1))},ht.isActive=function(){return!!this.h&&this.h.isActive(this)},(ht=rv.prototype).Ba=function(){},ht.Aa=function(){},ht.za=function(){},ht.ya=function(){},ht.isActive=function(){return!0},ht.Va=function(){},iv.prototype.g=function(n,e){return new Gr(n,e)},Hi(Gr,$i),Gr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;vi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=rS(n,null,n.Y),ev(n)},Gr.prototype.close=function(){DI(this.g)},Gr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Uy(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ev(e)},Gr.prototype.N=function(){this.g.h=null,delete this.j,DI(this.g),delete this.g,Gr.$.N.call(this)},Hi(Nf,Wg),Hi(us,qg),Hi(jo,rv),jo.prototype.Ba=function(){cs(this.g,"a")},jo.prototype.Aa=function(n){cs(this.g,new Nf(n))},jo.prototype.za=function(n){cs(this.g,new us)},jo.prototype.ya=function(){cs(this.g,"b")},Hi(Wr,function sv(){this.blockSize=-1}),Wr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)om(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){om(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){om(this,r),i=0;break}}this.h=i,this.i+=e},Wr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Lf={};function ou(n){return-128<=n&&128>n?function kk(n,e){var t=Lf;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new An([0|e],0>e?-1:0)}):new An([0|n],0>n?-1:0)}function Bs(n){if(isNaN(n)||!isFinite(n))return va;if(0>n)return zi(Bs(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=au;return new An(e,0)}var au=4294967296,va=ou(0),lu=ou(1),Vd=ou(16777216);function sl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function vo(n){return-1==n.h}function zi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new An(t,~n.h).add(lu)}function am(n,e){return n.add(zi(e))}function lm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ff(n,e){this.g=n,this.h=e}function cm(n,e){if(sl(e))throw Error("division by zero");if(sl(n))return new Ff(va,va);if(vo(n))return e=cm(zi(n),e),new Ff(zi(e.g),zi(e.h));if(vo(e))return e=cm(n,zi(e)),new Ff(zi(e.g),e.h);if(30<n.g.length){if(vo(n)||vo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=lu,r=e;0>=r.X(n);)t=xI(t),r=xI(r);var i=Bd(t,1),o=Bd(r,1);for(r=Bd(r,2),t=Bd(t,2);!sl(r);){var l=o.add(r);0>=l.X(n)&&(i=i.add(t),o=l),r=Bd(r,1),t=Bd(t,1)}return e=am(n,i.R(e)),new Ff(i,e)}for(i=va;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(o=Bs(t)).R(e);vo(l)||0<l.X(n);)l=(o=Bs(t-=r)).R(e);sl(o)&&(o=lu),i=i.add(o),n=am(n,l)}return new Ff(i,n)}function xI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new An(t,n.h)}function Bd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new An(i,n.h)}(ht=An.prototype).ea=function(){if(vo(this))return-zi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:au+r)*e,e*=au}return n},ht.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(sl(this))return"0";if(vo(this))return"-"+zi(this).toString(n);for(var e=Bs(Math.pow(n,6)),t=this,r="";;){var i=cm(t,e).g,o=((0<(t=am(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(sl(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},ht.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ht.X=function(n){return vo(n=am(this,n))?-1:sl(n)?0:1},ht.abs=function(){return vo(this)?zi(this):this},ht.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),l=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(o&=65535)}return new An(t,-2147483648&t[t.length-1]?-1:0)},ht.R=function(n){if(sl(this)||sl(n))return va;if(vo(this))return vo(n)?zi(this).R(zi(n)):zi(zi(this).R(n));if(vo(n))return zi(this.R(zi(n)));if(0>this.X(Vd)&&0>n.X(Vd))return Bs(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,l=65535&this.D(r),d=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=l*f,lm(t,2*r+2*i),t[2*r+2*i+1]+=o*f,lm(t,2*r+2*i+1),t[2*r+2*i+1]+=l*d,lm(t,2*r+2*i+1),t[2*r+2*i+2]+=o*d,lm(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new An(t,0)},ht.gb=function(n){return cm(this,n).h},ht.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new An(t,this.h&n.h)},ht.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new An(t,this.h|n.h)},ht.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new An(t,this.h^n.h)},iv.prototype.createWebChannel=iv.prototype.g,Gr.prototype.send=Gr.prototype.u,Gr.prototype.open=Gr.prototype.m,Gr.prototype.close=Gr.prototype.close,kd.NO_ERROR=0,kd.TIMEOUT=8,kd.HTTP_ERROR=6,Pd.COMPLETE="complete",_I.EventType=Od,Od.OPEN="a",Od.CLOSE="b",Od.ERROR="c",Od.MESSAGE="d",$i.prototype.listen=$i.prototype.O,ur.prototype.listenOnce=ur.prototype.P,ur.prototype.getLastError=ur.prototype.Sa,ur.prototype.getLastErrorCode=ur.prototype.Ia,ur.prototype.getStatus=ur.prototype.da,ur.prototype.getResponseJson=ur.prototype.Wa,ur.prototype.getResponseText=ur.prototype.ja,ur.prototype.send=ur.prototype.ha,ur.prototype.setWithCredentials=ur.prototype.Oa,Wr.prototype.digest=Wr.prototype.l,Wr.prototype.reset=Wr.prototype.reset,Wr.prototype.update=Wr.prototype.j,An.prototype.add=An.prototype.add,An.prototype.multiply=An.prototype.R,An.prototype.modulo=An.prototype.gb,An.prototype.compare=An.prototype.X,An.prototype.toNumber=An.prototype.ea,An.prototype.toString=An.prototype.toString,An.prototype.getBits=An.prototype.D,An.fromNumber=Bs,An.fromString=function Ud(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return zi(Ud(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Bs(Math.pow(e,8)),r=va,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+o),e);8>o?(o=Bs(Math.pow(e,o)),r=r.R(o).add(Bs(l))):r=(r=r.R(t)).add(Bs(l))}return r};var MI=Vo.createWebChannelTransport=function(){return new iv},Gk=Vo.getStatEventTarget=function(){return $g()},sS=Vo.ErrorCode=kd,X2=Vo.EventType=Pd,Wk=Vo.Event=Md,oS=Vo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},J2=Vo.FetchXmlHttpFactory=tm,ov=Vo.WebChannel=_I,eU=Vo.XhrIo=ur,qk=Vo.Md5=Wr,Uf=Vo.Integer=An;const aS="@firebase/firestore";class Ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");let ol="9.23.0";const al=new zr.Yd("@firebase/firestore");function Vf(){return al.logLevel}function $e(n,...e){if(al.logLevel<=zr.in.DEBUG){const t=e.map(jd);al.debug(`Firestore (${ol}): ${n}`,...t)}}function qr(n,...e){if(al.logLevel<=zr.in.ERROR){const t=e.map(jd);al.error(`Firestore (${ol}): ${n}`,...t)}}function Ho(n,...e){if(al.logLevel<=zr.in.WARN){const t=e.map(jd);al.warn(`Firestore (${ol}): ${n}`,...t)}}function jd(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: `+n;throw qr(e),new Error(e)}function St(n,e){n||gt()}function ut(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ei.UNAUTHENTICATED))}shutdown(){}}class Qk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kI{constructor(e){this.t=e,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let l=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Kr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const _=l;e.enqueueRetryable((0,te.Z)(function*(){yield _.promise,yield o(r.currentUser)}))},f=_=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Kr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new Zk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Ei(e)}}class Xk{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class cS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Xk(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jk{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.T;return this.T=o.token,$e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.T=t.token,new uS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class PI{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=dS(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function Bf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hS(n){return n+"\0"}class _r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new _r(0,0))}static max(){return new Ct(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hd{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Hd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends Hd{construct(e,t,r){return new Rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const av=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends Hd{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return av.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ue(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ue(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(o(),i++)}if(o(),l)throw new Ue(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(Rn.fromString(e))}static fromName(e){return new ot(Rn.fromString(e).popFirst(5))}static empty(){return new ot(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new Rn(e.slice()))}}class um{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function OI(n){return n.fields.find(e=>2===e.kind)}function $d(n){return n.fields.filter(e=>2!==e.kind)}um.UNKNOWN_ID=-1;class jf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hf(0,Eo.min())}}function LI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new _r(t+1,0):new _r(t,r));return new Eo(i,ot.empty(),e)}function fS(n){return new Eo(n.readTime,n.key,-1)}class Eo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Eo(Ct.min(),ot.empty(),-1)}static max(){return new Eo(Ct.max(),ot.empty(),-1)}}function lv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ot.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const cv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ll(n){return uv.apply(this,arguments)}function uv(){return uv=(0,te.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==cv)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),uv.apply(this,arguments)}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,o=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++o,l&&o===i&&t()},f=>r(f))}),l=!0,o===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ge((r,i)=>{const o=e.length,l=new Array(o);let d=0;for(let f=0;f<o;f++){const _=f;t(e[_]).next(E=>{l[_]=E,++d,d===o&&r(l)},E=>i(E))}})}static doWhile(e,t){return new ge((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class dm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Kr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new $f(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=hm(r.target.error);this.v.reject(new $f(e,i))}}static open(e,t,r,i){try{return new dm(t,e.transaction(i,r))}catch(o){throw new $f(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new nP(t)}}class $o{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===$o.S((0,O.z$)())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),zd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,O.hl)())return!1;if($o.C())return!0;const e=(0,O.z$)(),t=$o.S(e),r=0<t&&t<10,i=$o.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,te.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new $f(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Ue(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ue(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new $f(e,d))},o.onupgradeneeded=l=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,te.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{o.db=yield o.$(e);const f=dm.open(o.db,e,l?"readonly":"readwrite",r),_=i(f).next(E=>(f.P(),E)).catch(E=>(f.abort(E),ge.reject(E))).toPromise();return _.catch(()=>{}),yield f.R,_}catch(f){const _=f,E="FirebaseError"!==_.name&&d<3;if($e("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),o.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return zd(this.L.delete())}}class $f extends Ue{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cu(n){return"IndexedDbTransactionError"===n.name}class nP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zd(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),zd(this.store.add(e))}get(e){return zd(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),zd(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),zd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(l,d)=>{o.push(d)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ge((o,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,l,d)=>d.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=o=>{const l=hm(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}W(e,t){const r=[];return new ge((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const f=new pS(d),_=t(d.primaryKey,d.value,f);if(_ instanceof ge){const E=_.catch(D=>(f.done(),ge.reject(D)));r.push(E)}f.isDone?i():null===f.K?d.continue():d.continue(f.K)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zd(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=hm(r.target.error);t(i)}})}let dv=!1;function hm(n){const e=$o.S((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dv||(dv=!0,setTimeout(()=>{throw r},0)),r}}return n}class gS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,te.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){cu(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ll(r)}yield t.et(6e4)}))}}class mS{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return ge.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return $e("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(d=>{i-=d,r.add(l)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,o)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=fS(o);lv(l,r)>0&&(r=l)}),new Eo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function zf(n){return null==n}function Gf(n){return 0===n&&1/n==-1/0}function UI(n){return"number"==typeof n&&Number.isInteger(n)&&!Gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ds(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fm(e)),e=_S(n.get(t),e);return fm(e)}function _S(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function fm(n){return n+"\x01\x01"}function hs(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&gt(),n.charAt(l+1)){case"\x01":const d=n.substring(o,l);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(o,l),i+="\0";break;case"\x11":i+=n.substring(o,l+1);break;default:gt()}o=l+2}return new Rn(r)}const yS=["userId","batchId"];function hv(n,e){return[n,ds(e)]}function fv(n,e,t){return[n,ds(e),t]}const Gd={},VI=["prefixPath","collectionGroup","readTime","documentId"],rP=["prefixPath","collectionGroup","documentId"],BI=["collectionGroup","readTime","prefixPath","documentId"],tU=["canonicalId","targetId"],nU=["targetId","path"],iP=["path","targetId"],sP=["collectionId","parent"],vS=["indexId","uid"],oP=["uid","sequenceNumber"],Mi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ES=["indexId","uid","orderedDocumentKey"],aP=["userId","collectionPath","documentId"],lP=["userId","collectionPath","largestBatchId"],wS=["userId","collectionGroup","largestBatchId"],IS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bS=[...IS,"documentOverlays"],jI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wd=jI,cP=[...Wd,"indexConfiguration","indexState","indexEntries"];class HI extends FI{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ki(n,e){const t=ut(n);return $o.M(t.ht,e)}function TS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sr{constructor(e,t){this.comparator=e,this.root=t||dr.EMPTY}insert(e,t){return new sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wf(this.root,e,this.comparator,!0)}}class Wf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??dr.RED,this.left=i??dr.EMPTY,this.right=o??dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new dr(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return dr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1,dr.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new dr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vr{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CS(this.data.getIterator())}getIteratorFrom(e){return new CS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vr(this.comparator);return t.data=e,t}}class CS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function js(n){return n.hasNext()?n.getNext():void 0}class xr{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new xr([])}unionWith(e){let t=new vr(yr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new xr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zo("Invalid base64 string: "+i):i}}(e);return new wi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const dP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uu(n){if(St(!!n),"string"==typeof n){let e=0;const t=dP.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zr(n.seconds),nanos:Zr(n.nanos)}}function Zr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ec(n){return"string"==typeof n?wi.fromBase64String(n):wi.fromUint8Array(n)}function qf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function du(n){const e=n.mapValue.fields.__previous_value__;return qf(e)?du(e):e}function pm(n){const e=uu(n.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}class SS{constructor(e,t,r,i,o,l,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=_}}class hu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}const fu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gm={nullValue:"NULL_VALUE"};function tc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qf(n)?4:qI(n)?9007199254740991:10:gt()}function wo(n,e){if(n===e)return!0;const t=tc(n);if(t!==tc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pm(n).isEqual(pm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=uu(r.timestampValue),l=uu(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ec(n.bytesValue).isEqual(ec(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Zr(r.geoPointValue.latitude)===Zr(i.geoPointValue.latitude)&&Zr(r.geoPointValue.longitude)===Zr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Zr(r.integerValue)===Zr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Zr(r.doubleValue),l=Zr(i.doubleValue);return o===l?Gf(o)===Gf(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Bf(n.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(TS(o)!==TS(l))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===l[d]||!wo(o[d],l[d])))return!1;return!0}(n,e);default:return gt()}var i}function mm(n,e){return void 0!==(n.values||[]).find(t=>wo(t,e))}function nc(n,e){if(n===e)return 0;const t=tc(n),r=tc(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Zr(i.integerValue||i.doubleValue),d=Zr(o.integerValue||o.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return $I(n.timestampValue,e.timestampValue);case 4:return $I(pm(n),pm(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,o){const l=ec(i),d=ec(o);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),d=o.split("/");for(let f=0;f<l.length&&f<d.length;f++){const _=Wt(l[f],d[f]);if(0!==_)return _}return Wt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Wt(Zr(i.latitude),Zr(o.latitude));return 0!==l?l:Wt(Zr(i.longitude),Zr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],d=o.values||[];for(let f=0;f<l.length&&f<d.length;++f){const _=nc(l[f],d[f]);if(_)return _}return Wt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===fu.mapValue&&o===fu.mapValue)return 0;if(i===fu.mapValue)return 1;if(o===fu.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),f=o.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let E=0;E<d.length&&E<_.length;++E){const D=Wt(d[E],_[E]);if(0!==D)return D;const k=nc(l[d[E]],f[_[E]]);if(0!==k)return k}return Wt(d.length,_.length)}(n.mapValue,e.mapValue);default:throw gt()}}function $I(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=uu(n),r=uu(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function qd(n){return zI(n)}function zI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=uu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ec(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=zI(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${zI(r.fields[d])}`;return o+"}"}(n.mapValue):gt();var e}function rc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _m(n){return!!n&&"integerValue"in n}function Kf(n){return!!n&&"arrayValue"in n}function GI(n){return!!n&&"nullValue"in n}function WI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ym(n){return!!n&&"mapValue"in n}function Zf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function AS(n){return"nullValue"in n?gm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rc(hu.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function RS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rc(hu.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?fu:gt()}function xS(n,e){const t=nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function MS(n,e){const t=nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class fs{constructor(e){this.value=e}static empty(){return new fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zf(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=Zf(l):i.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new fs(Zf(this.value))}}function kS(n){const e=[];return Jl(n.fields,(t,r)=>{const i=new yr([t]);if(ym(r)){const o=kS(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new xr(e)}class Er{constructor(e,t,r,i,o,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Er(e,0,Ct.min(),Ct.min(),Ct.min(),fs.empty(),0)}static newFoundDocument(e,t,r,i){return new Er(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new Er(e,2,t,Ct.min(),Ct.min(),fs.empty(),0)}static newUnknownDocument(e,t){return new Er(e,3,t,Ct.min(),Ct.min(),fs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pu{constructor(e,t){this.position=e,this.inclusive=t}}function PS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?ot.comparator(ot.fromName(l.referenceValue),t.key):nc(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function OS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wo(n.position[t],e.position[t]))return!1;return!0}class Yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function hP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NS{}class In extends NS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new FS(e,t,r):"array-contains"===t?new BS(e,r):"in"===t?new t0(e,r):"not-in"===t?new n0(e,r):"array-contains-any"===t?new jS(e,r):new In(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new US(e,r):new VS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nc(t,this.value)):null!==t&&tc(this.value)===tc(t)&&this.matchesComparison(nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qn extends NS{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new qn(e,t)}matches(e){return Qf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Qf(n){return"and"===n.op}function KI(n){return"or"===n.op}function ZI(n){return LS(n)&&Qf(n)}function LS(n){for(const e of n.filters)if(e instanceof qn)return!1;return!0}function YI(n){if(n instanceof In)return n.field.canonicalString()+n.op.toString()+qd(n.value);if(ZI(n))return n.filters.map(e=>YI(e)).join(",");{const e=n.filters.map(t=>YI(t)).join(",");return`${n.op}(${e})`}}function QI(n,e){return n instanceof In?(t=n,(r=e)instanceof In&&t.op===r.op&&t.field.isEqual(r.field)&&wo(t.value,r.value)):n instanceof qn?function(t,r){return r instanceof qn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,l)=>i&&QI(o,r.filters[l]),!0)}(n,e):void gt();var t,r}function XI(n,e){const t=n.filters.concat(e);return qn.create(t,n.op)}function JI(n){return n instanceof In?`${(e=n).field.canonicalString()} ${e.op} ${qd(e.value)}`:n instanceof qn?function(e){return e.op.toString()+" {"+e.getFilters().map(JI).join(" ,")+"}"}(n):"Filter";var e}class FS extends In{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class US extends In{constructor(e,t){super(e,"in",t),this.keys=e0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VS extends In{constructor(e,t){super(e,"not-in",t),this.keys=e0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function e0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ot.fromName(r.referenceValue))}class BS extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kf(t)&&mm(t.arrayValue,this.value)}}class t0 extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mm(this.value.arrayValue,t)}}class n0 extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(mm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mm(this.value.arrayValue,t)}}class jS extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mm(this.value.arrayValue,r))}}class Kd{constructor(e,t=null,r=[],i=[],o=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=d,this.dt=null}}function r0(n,e=null,t=[],r=[],i=null,o=null,l=null){return new Kd(n,e,t,r,i,o,l)}function Zd(n){const e=ut(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>YI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qd(r)).join(",")),e.dt=t}return e.dt}function cl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OS(n.startAt,e.startAt)&&OS(n.endAt,e.endAt)}function s0(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Xf(n,e){return n.filters.filter(t=>t instanceof In&&t.field.isEqual(e))}function fP(n,e,t){let r=gm,i=!0;for(const o of Xf(n,e)){let l=gm,d=!0;switch(o.op){case"<":case"<=":l=AS(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,d=!1;break;case"!=":case"not-in":l=gm}xS({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];xS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function o0(n,e,t){let r=fu,i=!0;for(const o of Xf(n,e)){let l=fu,d=!0;switch(o.op){case">=":case">":l=RS(o.value),d=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,d=!1;break;case"!=":case"not-in":l=fu}MS({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];MS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ul{constructor(e,t=null,r=[],i=[],o=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function pP(n,e,t,r,i,o,l,d){return new ul(n,e,t,r,i,o,l,d)}function Ea(n){return new ul(n)}function HS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function a0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function gu(n){return null!==n.collectionGroup}function Yd(n){const e=ut(n);if(null===e.wt){e.wt=[];const t=gv(e),r=a0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Yf(t)),e.wt.push(new Yf(yr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Yf(yr.keyField(),o))}}}return e.wt}function Gi(n){const e=ut(n);if(!e._t)if("F"===e.limitType)e._t=r0(e.path,e.collectionGroup,Yd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Yd(e))t.push(new Yf(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new pu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new pu(e.startAt.position,e.startAt.inclusive):null;e._t=r0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Jf(n,e){e.getFirstInequalityField(),gv(n);const t=n.filters.concat([e]);return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ps(n,e,t){return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mv(n,e){return cl(Gi(n),Gi(e))&&n.limitType===e.limitType}function l0(n){return`${Zd(Gi(n))}|lt:${n.limitType}`}function _v(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>JI(r)).join(", ")}]`),zf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qd(r)).join(",")),`Target(${t})`}(Gi(n))}; limitType=${n.limitType})`}function vm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ot.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Yd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,l){const d=PS(i,o,l);return i.inclusive?d<=0:d<0}(t.startAt,Yd(t),r)||t.endAt&&!function(i,o,l){const d=PS(i,o,l);return i.inclusive?d>=0:d>0}(t.endAt,Yd(t),r)));var t,r}function c0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function u0(n){return(e,t)=>{let r=!1;for(const i of Yd(n)){const o=$S(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function $S(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):function(i,o,l){const d=o.data.field(i),f=l.data.field(i);return null!==d&&null!==f?nc(d,f):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}class dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return uP(this.inner)}size(){return this.innerSize}}const gP=new sr(ot.comparator);function io(){return gP}const zS=new sr(ot.comparator);function ic(...n){let e=zS;for(const t of n)e=e.insert(t.key,t);return e}function GS(n){let e=zS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hl(){return mu()}function WS(){return mu()}function mu(){return new dl(n=>n.toString(),(n,e)=>n.isEqual(e))}const qS=new sr(ot.comparator),KS=new vr(ot.comparator);function Xt(...n){let e=KS;for(const t of n)e=e.add(t);return e}const mP=new vr(Wt);function Qd(){return mP}function ep(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function ZS(n){return{integerValue:""+n}}function YS(n,e){return UI(e)?ZS(e):ep(n,e)}class yv{constructor(){this._=void 0}}function QS(n,e,t){return n instanceof tp?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&qf(i)&&(i=du(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof _u?JS(n,e):n instanceof Xd?_P(n,e):function(r,i){const o=d0(r,i),l=yP(o)+yP(r.gt);return _m(o)&&_m(r.gt)?ZS(l):ep(r.serializer,l)}(n,e)}function XS(n,e,t){return n instanceof _u?JS(n,e):n instanceof Xd?_P(n,e):t}function d0(n,e){return n instanceof Em?_m(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class tp extends yv{}class _u extends yv{constructor(e){super(),this.elements=e}}function JS(n,e){const t=vP(e);for(const r of n.elements)t.some(i=>wo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xd extends yv{constructor(e){super(),this.elements=e}}function _P(n,e){let t=vP(e);for(const r of n.elements)t=t.filter(i=>!wo(i,r));return{arrayValue:{values:t}}}class Em extends yv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function yP(n){return Zr(n.integerValue||n.doubleValue)}function vP(n){return Kf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class np{constructor(e,t){this.field=e,this.transform=t}}class EP{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yu{}function eA(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new sp(n.key,Mr.none()):new rp(n.key,n.data,Mr.none());{const t=n.data,r=fs.empty();let i=new vr(yr.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new fl(n.key,r,new xr(i.toArray()),Mr.none())}}function wP(n,e,t){n instanceof rp?function(r,i,o){const l=r.value.clone(),d=nA(r.fieldTransforms,i,o.transformResults);l.setAll(d),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fl?function(r,i,o){if(!wm(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=nA(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(tA(r)),d.setAll(l),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Im(n,e,t,r){return n instanceof rp?function(i,o,l,d){if(!wm(i.precondition,o))return l;const f=i.value.clone(),_=ip(i.fieldTransforms,d,o);return f.setAll(_),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof fl?function(i,o,l,d){if(!wm(i.precondition,o))return l;const f=ip(i.fieldTransforms,d,o),_=o.data;return _.setAll(tA(i)),_.setAll(f),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,wm(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function IP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=d0(r.transform,i||null);null!=o&&(null===t&&(t=fs.empty()),t.set(r.field,o))}return t||null}function bP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Bf(t,r,(i,o)=>function vv(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _u&&r instanceof _u||t instanceof Xd&&r instanceof Xd?Bf(t.elements,r.elements,wo):t instanceof Em&&r instanceof Em?wo(t.gt,r.gt):t instanceof tp&&r instanceof tp);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class rp extends yu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fl extends yu{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nA(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,d=e.data.field(o.field);r.set(o.field,XS(l,d,t[i]))}return r}function ip(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,QS(o,l,e))}return r}class sp extends yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ev extends yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&wP(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Im(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Im(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WS();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let d=this.applyToLocalView(l,o.mutatedFields);d=t.has(i.key)?null:d;const f=eA(l,d);null!==f&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&Bf(this.mutations,e.mutations,(t,r)=>bP(t,r))&&Bf(this.baseMutations,e.baseMutations,(t,r)=>bP(t,r))}}class wv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=qS;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new wv(e,t,r,i)}}class f0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class TP{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yr,xn;function p0(n){switch(n){default:return gt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function g0(n){if(void 0===n)return qr("GRPC error has no .code"),ye.UNKNOWN;switch(n){case Yr.OK:return ye.OK;case Yr.CANCELLED:return ye.CANCELLED;case Yr.UNKNOWN:return ye.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return ye.INTERNAL;case Yr.UNAVAILABLE:return ye.UNAVAILABLE;case Yr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Yr.NOT_FOUND:return ye.NOT_FOUND;case Yr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Yr.ABORTED:return ye.ABORTED;case Yr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Yr.DATA_LOSS:return ye.DATA_LOSS;default:return gt()}}(xn=Yr||(Yr={}))[xn.OK=0]="OK",xn[xn.CANCELLED=1]="CANCELLED",xn[xn.UNKNOWN=2]="UNKNOWN",xn[xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xn[xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xn[xn.NOT_FOUND=5]="NOT_FOUND",xn[xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",xn[xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",xn[xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",xn[xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xn[xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xn[xn.ABORTED=10]="ABORTED",xn[xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",xn[xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",xn[xn.INTERNAL=13]="INTERNAL",xn[xn.UNAVAILABLE=14]="UNAVAILABLE",xn[xn.DATA_LOSS=15]="DATA_LOSS";class m0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Iv}static getOrCreateInstance(){return null===Iv&&(Iv=new m0),Iv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Iv=null;function iA(){return new TextEncoder}const _0=new Uf([4294967295,4294967295],0);function sA(n){const e=iA().encode(n),t=new qk;return t.update(e),new Uint8Array(t.digest())}function y0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Uf([t,r],0),new Uf([i,o],0)]}class v0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bm(`Invalid padding: ${t}`);if(r<0)throw new bm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new bm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new bm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Uf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Uf.fromNumber(r)));return 1===i.compare(_0)&&(i=new Uf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=sA(e),[r,i]=y0(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new v0(o,i,t);return r.forEach(d=>l.insert(d)),l}insert(e){if(0===this.It)return;const t=sA(e),[r,i]=y0(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class bm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tm{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Cm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tm(Ct.min(),i,new sr(Wt),io(),Xt())}}class Cm{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Cm(r,t,Xt(),Xt(),Xt())}}class bv{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class oA{constructor(e,t){this.targetId=e,this.Vt=t}}class aA{constructor(e,t,r=wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class lA{constructor(){this.St=0,this.Dt=uA(),this.Ct=wi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Xt(),t=Xt(),r=Xt();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new Cm(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=uA()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class cA{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=io(),this.zt=E0(),this.Wt=new sr(Wt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const l=o.target;if(s0(l))if(0===i){const d=new ot(l.path);this.Yt(r,d,Er.newNoDocument(d,Ct.min()))}else St(1===i);else{const d=this.ie(r);if(d!==i){const f=this.re(e,d);0!==f&&(this.ee(r),this.Wt=this.Wt.insert(r,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=m0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(_,E,D){var k,V,z,ee,de,je;const Ke={localCacheCount:E,existenceFilterCount:D.count},qe=D.unchangedNames;return qe&&(Ke.bloomFilter={applied:0===_,hashCount:null!==(k=qe?.hashCount)&&void 0!==k?k:0,bitmapLength:null!==(ee=null===(z=null===(V=qe?.bits)||void 0===V?void 0:V.bitmap)||void 0===z?void 0:z.length)&&void 0!==ee?ee:0,padding:null!==(je=null===(de=qe?.bits)||void 0===de?void 0:de.padding)&&void 0!==je?je:0}),Ke}(f,d,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:l=0},hashCount:d=0}=r;let f,_;try{f=ec(o).toUint8Array()}catch(E){if(E instanceof zo)return Ho("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{_=new v0(f,l,d)}catch(E){return Ho(E instanceof bm?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return 0===_.It?1:i!==t-this.oe(e.targetId,_)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const l=this.Gt.ue(),d=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.vt(d)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,l)=>{const d=this.se(l);if(d){if(o.current&&s0(d.target)){const f=new ot(d.target.path);null!==this.jt.get(f)||this.ae(l,f)||this.Yt(l,f,Er.newNoDocument(f,e))}o.Mt&&(t.set(l,o.Ot()),o.Ft())}});let r=Xt();this.zt.forEach((o,l)=>{let d=!0;l.forEachWhile(f=>{const _=this.se(f);return!_||"TargetPurposeLimboResolution"===_.purpose||(d=!1,!1)}),d&&(r=r.add(o))}),this.jt.forEach((o,l)=>l.setReadTime(e));const i=new Tm(e,t,this.Wt,this.jt,r);return this.jt=io(),this.zt=E0(),this.Wt=new sr(Wt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new lA,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new vr(Wt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new lA),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function E0(){return new sr(ot.comparator)}function uA(){return new sr(ot.comparator)}const CP={asc:"ASCENDING",desc:"DESCENDING"},dA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DP={and:"AND",or:"OR"};class SP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function w0(n,e){return n.useProto3Json||zf(e)?e:{value:e}}function op(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I0(n,e){return op(n,e.toTimestamp())}function Qr(n){return St(!!n),Ct.fromTimestamp(function(e){const t=uu(e);return new _r(t.seconds,t.nanos)}(n))}function Dm(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hA(n){const e=Rn.fromString(n);return St(xP(e)),e}function Sm(n,e){return Dm(n.databaseId,e.path)}function Go(n,e){const t=hA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(T0(t))}function b0(n,e){return Dm(n.databaseId,e)}function fA(n){const e=hA(n);return 4===e.length?Rn.emptyPath():T0(e)}function wa(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function T0(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pA(n,e,t){return{name:Sm(n,e),fields:t.value.mapValue.fields}}function AP(n,e,t){const r=Go(n,e.name),i=Qr(e.updateTime),o=e.createTime?Qr(e.createTime):Ct.min(),l=new fs({mapValue:{fields:e.fields}}),d=Er.newFoundDocument(r,i,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Am(n,e){let t;if(e instanceof rp)t={update:pA(n,e.key,e.value)};else if(e instanceof sp)t={delete:Sm(n,e.key)};else if(e instanceof fl)t={update:pA(n,e.key,e.data),updateMask:wA(e.fieldMask)};else{if(!(e instanceof Ev))return gt();t={verify:Sm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof tp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Em)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:I0(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:gt()),t;var i}function Cv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Mr.updateTime(Qr(i.updateTime)):void 0!==i.exists?Mr.exists(i.exists):Mr.none():Mr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let d=null;"setToServerValue"in l?(St("REQUEST_TIME"===l.setToServerValue),d=new tp):"appendMissingElements"in l?d=new _u(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Xd(l.removeAllFromArray.values||[]):"increment"in l?d=new Em(o,l.increment):gt();const f=yr.fromServerFormat(l.fieldPath);return new np(f,d)}(n,i)):[];var i;if(e.update){const i=Go(n,e.update.name),o=new fs({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new xr((e.updateMask.fieldPaths||[]).map(_=>yr.fromServerFormat(_)));return new fl(i,o,l,t,r)}return new rp(i,o,t,r)}if(e.delete){const i=Go(n,e.delete);return new sp(i,t)}if(e.verify){const i=Go(n,e.verify);return new Ev(i,t)}return gt()}function mA(n,e){return{documents:[b0(n,e.path)]}}function Dv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=b0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=b0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return EA(qn.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(f){if(0!==f.length)return f.map(_=>{return{field:vu((E=_).field),direction:yA(E.dir)};var E})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=w0(n,e.limit);var d,f;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function Sv(n){let e=fA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let o=[];t.where&&(o=function(E){const D=S0(E);return D instanceof qn&&ZI(D)?D.getFilters():[D]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new Yf(ap((D=E).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(E){let D;return D="object"==typeof E?E.value:E,zf(D)?null:D}(t.limit));let f=null;var E;t.startAt&&(f=new pu((E=t.startAt).values||[],!!E.before));let _=null;return t.endAt&&(_=function(E){return new pu(E.values||[],!E.before)}(t.endAt)),pP(e,i,l,o,d,"F",f,_)}function S0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ap(e.unaryFilter.field);return In.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ap(e.unaryFilter.field);return In.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ap(e.unaryFilter.field);return In.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ap(e.unaryFilter.field);return In.create(o,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?In.create(ap((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return qn.create(e.compositeFilter.filters.map(t=>S0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return gt()}}(e.compositeFilter.op))}(n):gt();var e}function yA(n){return CP[n]}function vA(n){return dA[n]}function RP(n){return DP[n]}function vu(n){return{fieldPath:n.canonicalString()}}function ap(n){return yr.fromServerFormat(n.fieldPath)}function EA(n){return n instanceof In?function(e){if("=="===e.op){if(WI(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NAN"}};if(GI(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(WI(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NOT_NAN"}};if(GI(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vu(e.field),op:vA(e.op),value:e.value}}}(n):n instanceof qn?function(e){const t=e.getFilters().map(r=>EA(r));return 1===t.length?t[0]:{compositeFilter:{op:RP(e.op),filters:t}}}(n):gt()}function wA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class pl{constructor(e,t,r,i,o=Ct.min(),l=Ct.min(),d=wi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new pl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IA{constructor(e){this.fe=e}}function kP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Av(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sm(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:op(i,o.version.toTimestamp()),createTime:op(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jd(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:Jd(e.version)}}var i,o;return r}function Av(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eh(n){const e=new _r(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function th(n,e){const t=(e.baseMutations||[]).map(o=>Cv(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Cv(n.fe,o)),i=_r.fromMillis(e.localWriteTimeMs);return new h0(e.batchId,i,t,r)}function Rm(n){const e=eh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?eh(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=Gi(Ea(fA(i.documents[0])))):r=Gi(Sv(n.query)),new pl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wi.fromBase64String(n.resumeToken))}function bA(n,e){const t=Jd(e.snapshotVersion),r=Jd(e.lastLimboFreeSnapshotVersion);let i;i=s0(e.target)?mA(n.fe,e.target):Dv(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zd(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function A0(n){const e=Sv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ps(e,e.limit,"L"):e}function R0(n,e){return new f0(e.largestBatchId,Cv(n.fe,e.overlayMutation))}function TA(n,e){const t=e.path.lastSegment();return[n,ds(e.path.popLast()),t]}function CA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Jd(r.readTime),documentKey:ds(r.documentKey.path),largestBatchId:r.largestBatchId}}class PP{getBundleMetadata(e,t){return DA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:eh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return DA(e).put({bundleId:(r=t).id,createTime:Jd(Qr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lp(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:A0(i.bundledQuery),readTime:eh(i.readTime)};var i})}saveNamedQuery(e,t){return lp(e).put({name:(r=t).name,readTime:Jd(Qr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function DA(n){return ki(n,"bundles")}function lp(n){return ki(n,"namedQueries")}class xm{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new xm(e,t.uid||"")}getOverlay(e,t){return cp(e).get(TA(this.userId,t)).next(r=>r?R0(this.serializer,r):null)}getOverlays(e,t){const r=hl();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const d=new f0(t,l);i.push(this.we(e,d))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ds(l.getCollectionPath())));const o=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(cp(e).J("collectionPathOverlayIndex",d))}),ge.waitFor(o)}getOverlaysForCollection(e,t,r){const i=hl(),o=ds(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return cp(e).j("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const _=R0(this.serializer,f);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=hl();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cp(e).X({index:"collectionGroupOverlayIndex",range:d},(f,_,E)=>{const D=R0(this.serializer,_);o.size()<i||D.largestBatchId===l?(o.set(D.getKey(),D),l=D.largestBatchId):E.done()}).next(()=>o)}we(e,t){return cp(e).put(function(r,i,o){const[l,d,f]=TA(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Am(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function cp(n){return ki(n,"documentOverlays")}class Eu{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Zr(e.integerValue));else if("doubleValue"in e){const r=Zr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Gf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ec(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?qI(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):gt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),ot.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function SA(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function x0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=SA(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Eu.Ve=new Eu;class OP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=x0(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=x0(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class NP{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class rU{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Rv{constructor(){this.je=new OP,this.ze=new NP(this.je),this.We=new rU(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class nh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new nh(this.indexId,this.documentKey,this.arrayValue,r)}}function wu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=AA(n.arrayValue,e.arrayValue),0!==t?t:(t=AA(n.directionalValue,e.directionalValue),0!==t?t:ot.comparator(n.documentKey,e.documentKey)))}function AA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class LP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){St(e.collectionGroup===this.collectionId);const t=OI(e);if(void 0!==t&&!this.en(t))return!1;const r=$d(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const d=r[o];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[l++],d))return!1}++o}for(;o<r.length;++o)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function RA(n){var e,t;if(St(n instanceof In||n instanceof qn),n instanceof In){if(n instanceof t0){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>In.create(n.field,"==",o)))||[];return qn.create(i,"or")}return n}const r=n.filters.map(i=>RA(i));return qn.create(r,n.op)}function Mm(n){if(0===n.getFilters().length)return[];const e=MA(RA(n));return St(xA(e)),M0(e)||km(e)?[e]:e.getFilters()}function M0(n){return n instanceof In}function km(n){return n instanceof qn&&ZI(n)}function xA(n){return M0(n)||km(n)||function(e){if(e instanceof qn&&KI(e)){for(const t of e.getFilters())if(!M0(t)&&!km(t))return!1;return!0}return!1}(n)}function MA(n){if(St(n instanceof In||n instanceof qn),n instanceof In)return n;if(1===n.filters.length)return MA(n.filters[0]);const e=n.filters.map(r=>MA(r));let t=qn.create(e,n.op);return t=Iu(t),xA(t)?t:(St(t instanceof qn),St(Qf(t)),St(t.filters.length>1),t.filters.reduce((r,i)=>k0(r,i)))}function k0(n,e){let t;return St(n instanceof In||n instanceof qn),St(e instanceof In||e instanceof qn),t=n instanceof In?e instanceof In?qn.create([n,e],"and"):FP(n,e):e instanceof In?FP(e,n):function(r,i){if(St(r.filters.length>0&&i.filters.length>0),Qf(r)&&Qf(i))return XI(r,i.getFilters());const o=KI(r)?r:i,l=KI(r)?i:r,d=o.filters.map(f=>k0(f,l));return qn.create(d,"or")}(n,e),Iu(t)}function FP(n,e){if(Qf(e))return XI(e,n.getFilters());{const t=e.filters.map(r=>k0(n,r));return qn.create(t,"or")}}function Iu(n){if(St(n instanceof In||n instanceof qn),n instanceof In)return n;const e=n.getFilters();if(1===e.length)return Iu(e[0]);if(LS(n))return n;const t=e.map(i=>Iu(i)),r=[];return t.forEach(i=>{i instanceof In?r.push(i):i instanceof qn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:qn.create(r,n.op)}class UP{constructor(){this.rn=new P0}addToCollectionParentIndex(e,t){return this.rn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(Eo.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class P0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vr(Rn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vr(Rn.comparator)).toArray()}}const xv=new Uint8Array(0);class Mv{constructor(e,t){this.user=e,this.databaseId=t,this.on=new P0,this.un=new dl(r=>Zd(r),(r,i)=>cl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:ds(i)};return O0(e).put(o)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hS(t),""],!1,!0);return O0(e).j(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(hs(l.parent))}return r})}addFieldIndex(e,t){const r=Om(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const o=r.add(i);if(t.indexState){const l=bu(e);return o.next(d=>{l.put(CA(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Om(e),i=bu(e),o=Pm(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Pm(e);let i=!0;const o=new Map;return ge.forEach(this.cn(t),l=>this.an(e,l).next(d=>{i&&(i=!!d),o.set(l,d)})).next(()=>{if(i){let l=Xt();const d=[];return ge.forEach(o,(f,_)=>{var E;$e("IndexedDbIndexManager",`Using index ${E=f,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${Zd(t)}`);const D=function(qe,Je){const Ot=OI(Je);if(void 0===Ot)return null;for(const Nt of Xf(qe,Ot.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(_,f),k=function(qe,Je){const Ot=new Map;for(const Nt of $d(Je))for(const vn of Xf(qe,Nt.fieldPath))switch(vn.op){case"==":case"in":Ot.set(Nt.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Ot.set(Nt.fieldPath.canonicalString(),vn.value),Array.from(Ot.values())}return null}(_,f),V=function(qe,Je){const Ot=[];let Nt=!0;for(const vn of $d(Je)){const Hr=0===vn.kind?fP(qe,vn.fieldPath,qe.startAt):o0(qe,vn.fieldPath,qe.startAt);Ot.push(Hr.value),Nt&&(Nt=Hr.inclusive)}return new pu(Ot,Nt)}(_,f),z=function(qe,Je){const Ot=[];let Nt=!0;for(const vn of $d(Je)){const Hr=0===vn.kind?o0(qe,vn.fieldPath,qe.endAt):fP(qe,vn.fieldPath,qe.endAt);Ot.push(Hr.value),Nt&&(Nt=Hr.inclusive)}return new pu(Ot,Nt)}(_,f),ee=this.hn(f,_,V),de=this.hn(f,_,z),je=this.ln(f,_,k),Ke=this.fn(f.indexId,D,ee,V.inclusive,de,z.inclusive,je);return ge.forEach(Ke,qe=>r.H(qe,t.limit).next(Je=>{Je.forEach(Ot=>{const Nt=ot.fromSegments(Ot.documentKey);l.has(Nt)||(l=l.add(Nt),d.push(Nt))})}))}).next(()=>d)}return ge.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Mm(qn.create(e.filters,"and")).map(r=>r0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,l,d){const f=(null!=t?t.length:1)*Math.max(r.length,o.length),_=f/(null!=t?t.length:1),E=[];for(let D=0;D<f;++D){const k=t?this.dn(t[D/_]):xv,V=this.wn(e,k,r[D%_],i),z=this._n(e,k,o[D%_],l),ee=d.map(de=>this.wn(e,k,de,!0));E.push(...this.createRange(V,z,ee))}return E}wn(e,t,r,i){const o=new nh(e,ot.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new nh(e,ot.empty(),t,r);return i?o.Je():o}an(e,t){const r=new LP(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const d of o)r.tn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ge.forEach(i,o=>this.an(e,o).next(l=>{l?0!==r&&l.fields.length<function(d){let f=new vr(yr.comparator),_=!1;for(const E of d.filters)for(const D of E.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?_=!0:f=f.add(D.field));for(const E of d.orderBy)E.field.isKeyField()||(f=f.add(E.field));return f.size+(_?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Rv;for(const i of $d(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const l=r.He(i.kind);Eu.Ve._e(o,l)}return r.Qe()}dn(e){const t=new Rv;return Eu.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Rv;return Eu.Ve._e(rc(this.databaseId,t),r.He(function(i){const o=$d(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Rv);let o=0;for(const l of $d(e)){const d=r[o++];for(const f of i)if(this.yn(t,l.fieldPath)&&Kf(d))i=this.pn(i,l,d);else{const _=f.He(l.kind);Eu.Ve._e(d,_)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const d of i){const f=new Rv;f.seed(d.Qe()),Eu.Ve._e(l,f.He(t.kind)),o.push(f)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof In&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Om(e),i=bu(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const l=[];return ge.forEach(o,d=>i.get([d.indexId,this.uid]).next(f=>{l.push(function(_,E){const D=E?new Hf(E.sequenceNumber,new Eo(eh(E.readTime),new ot(hs(E.documentKey)),E.largestBatchId)):Hf.empty(),k=_.fields.map(([V,z])=>new jf(yr.fromServerFormat(V),z));return new um(_.indexId,_.collectionGroup,k,D)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Om(e),o=bu(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ge.forEach(d,f=>o.put(CA(f.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?ge.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),ge.forEach(d,f=>this.En(e,i,f).next(_=>{const E=this.An(o,f);return _.isEqual(E)?ge.resolve():this.vn(e,o,f,_,E)}))))})}Rn(e,t,r,i){return Pm(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Pm(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Pm(e);let o=new vr(wu);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,d)=>{o=o.add(new nh(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>o)}An(e,t){let r=new vr(wu);const i=this.mn(t,e);if(null==i)return r;const o=OI(t);if(null!=o){const l=e.data.field(o.fieldPath);if(Kf(l))for(const d of l.arrayValue.values||[])r=r.add(new nh(t.indexId,e.key,this.dn(d),i))}else r=r.add(new nh(t.indexId,e.key,xv,i));return r}vn(e,t,r,i,o){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,f,_,E,D){const k=d.getIterator(),V=f.getIterator();let z=js(k),ee=js(V);for(;z||ee;){let de=!1,je=!1;if(z&&ee){const Ke=_(z,ee);Ke<0?je=!0:Ke>0&&(de=!0)}else null!=z?je=!0:de=!0;de?(E(ee),ee=js(V)):je?(D(z),z=js(k)):(z=js(k),ee=js(V))}}(i,o,wu,d=>{l.push(this.Rn(e,t,r,d))},d=>{l.push(this.Pn(e,t,r,d))}),ge.waitFor(l)}Tn(e){let t=1;return bu(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>wu(l,d)).filter((l,d,f)=>!d||0!==wu(l,f[d-1]));const i=[];i.push(e);for(const l of r){const d=wu(l,e),f=wu(l,t);if(0===d)i[0]=e.Je();else if(d>0&&f<0)i.push(l),i.push(l.Je());else if(f>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];o.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,xv,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,xv,[]]))}return o}bn(e,t){return wu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kA)}getMinOffset(e,t){return ge.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||gt())).next(kA)}}function O0(n){return ki(n,"collectionParents")}function Pm(n){return ki(n,"indexEntries")}function Om(n){return ki(n,"indexConfiguration")}function bu(n){return ki(n,"indexState")}function kA(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;lv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Eo(e.readTime,e.documentKey,t)}const PA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=r.X({range:l},(E,D,k)=>(d++,k.delete()));o.push(f.next(()=>{St(1===d)}));const _=[];for(const E of t.mutations){const D=fv(e,E.key.path,t.batchId);o.push(i.delete(D)),_.push(E.key)}return ge.waitFor(o).next(()=>_)}function kv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(41943040,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);class Nm{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){St(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Nm(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tu(e).X({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=up(e),l=Tu(e);return l.add({}).next(d=>{St("number"==typeof d);const f=new h0(d,t,r,i),_=function(k,V,z){const ee=z.baseMutations.map(je=>Am(k.fe,je)),de=z.mutations.map(je=>Am(k.fe,je));return{userId:V,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ee,mutations:de}}(this.serializer,this.userId,f),E=[];let D=new vr((k,V)=>Wt(k.canonicalString(),V.canonicalString()));for(const k of i){const V=fv(this.userId,k.key.path,d);D=D.add(k.key.path.popLast()),E.push(l.put(_)),E.push(o.put(V,Gd))}return D.forEach(k=>{E.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Vn[d]=f.keys()}),ge.waitFor(E).next(()=>f)})}lookupMutationBatch(e,t){return Tu(e).get(t).next(r=>r?(St(r.userId===this.userId),th(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ge.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Tu(e).X({index:"userMutationsIndex",range:i},(l,d,f)=>{d.userId===this.userId&&(St(d.batchId>=r),o=th(this.serializer,d)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Tu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tu(e).j("userMutationsIndex",t).next(r=>r.map(i=>th(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=hv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return up(e).X({range:i},(l,d,f)=>{const[_,E,D]=l,k=hs(E);if(_===this.userId&&t.path.isEqual(k))return Tu(e).get(D).next(V=>{if(!V)throw gt();St(V.userId===this.userId),o.push(th(this.serializer,V))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vr(Wt);const i=[];return t.forEach(o=>{const l=hv(this.userId,o.path),d=IDBKeyRange.lowerBound(l),f=up(e).X({range:d},(_,E,D)=>{const[k,V,z]=_,ee=hs(V);k===this.userId&&o.path.isEqual(ee)?r=r.add(z):D.done()});i.push(f)}),ge.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=hv(this.userId,r),l=IDBKeyRange.lowerBound(o);let d=new vr(Wt);return up(e).X({range:l},(f,_,E)=>{const[D,k,V]=f,z=hs(k);D===this.userId&&r.isPrefixOf(z)?z.length===i&&(d=d.add(V)):E.done()}).next(()=>this.Dn(e,d))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Tu(e).get(o).next(l=>{if(null===l)throw gt();St(l.userId===this.userId),r.push(th(this.serializer,l))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OA(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return up(e).X({range:r},(o,l,d)=>{if(o[0]===this.userId){const f=hs(o[1]);i.push(f)}else d.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return Lm(e,this.userId,t)}xn(e){return N0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lm(n,e,t){const r=hv(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return up(n).X({range:o,Y:!0},(d,f,_)=>{const[E,D,k]=d;E===e&&D===i&&(l=!0),_.done()}).next(()=>l)}function Tu(n){return ki(n,"mutations")}function up(n){return ki(n,"documentMutations")}function N0(n){return ki(n,"mutationQueues")}class Cu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Cu(0)}static Mn(){return new Cu(-1)}}class L0{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Cu(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Ct.fromTimestamp(new _r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rh(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return rh(e).X((l,d)=>{const f=Rm(d);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,o.push(this.removeTargetData(e,f)))}).next(()=>ge.waitFor(o)).next(()=>i)}forEachTarget(e,t){return rh(e).X((r,i)=>{const o=Rm(i);t(o)})}$n(e){return NA(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}On(e,t){return NA(e).put("targetGlobalKey",t)}Fn(e,t){return rh(e).put(bA(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return rh(e).X({range:i,index:"queryTargetsIndex"},(l,d,f)=>{const _=Rm(d);cl(t,_.target)&&(o=_,f.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=sc(e);return t.forEach(l=>{const d=ds(l.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=sc(e);return ge.forEach(t,o=>{const l=ds(o.path);return ge.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=sc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=sc(e);let o=Xt();return i.X({range:r,Y:!0},(l,d,f)=>{const _=hs(l[1]),E=new ot(_);o=o.add(E)}).next(()=>o)}containsKey(e,t){const r=ds(t.path),i=IDBKeyRange.bound([r],[hS(r)],!1,!0);let o=0;return sc(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,d],f,_)=>{0!==l&&(o++,_.done())}).next(()=>o>0)}le(e,t){return rh(e).get(t).next(r=>r?Rm(r):null)}}function rh(n){return ki(n,"targets")}function NA(n){return ki(n,"targetGlobal")}function sc(n){return ki(n,"targetDocuments")}function F0([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class VP{constructor(e){this.Ln=e,this.buffer=new vr(F0),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();F0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,te.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){cu(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ll(r)}yield t.Qn(3e5)}))}}class U0{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(ro.ct);const r=new VP(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(PA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PA):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,l,d,f,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(o=D,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(_=Date.now(),Vf()<=zr.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${o} targets in `+(f-d)+`ms\n\tRemoved ${D} documents in `+(_-f)+`ms\nTotal Duration: ${_-E}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:D})))}}class FA{constructor(e,t){this.db=e,this.garbageCollector=function Pv(n,e){return new U0(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return dp(e,r)}removeReference(e,t,r){return dp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dp(e,t)}Xn(e,t){return function(r,i){let o=!1;return N0(r).Z(l=>Lm(r,l,i).next(d=>(d&&(o=!0),ge.resolve(!d)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(l,d)=>{if(d<=t){const f=this.Xn(e,l).next(_=>{if(!_)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ct.min()),sc(e).delete([0,ds(l.path)])))});i.push(f)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dp(e,t)}Yn(e,t){const r=sc(e);let i,o=ro.ct;return r.X({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:_})=>{0===l?(o!==ro.ct&&t(new ot(hs(i)),o),o=_,i=f):o=ro.ct}).next(()=>{o!==ro.ct&&t(new ot(hs(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dp(n,e){return sc(n).put((r=n.currentSequenceNumber,{targetId:0,path:ds(e.path),sequenceNumber:r}));var r}class Ov{constructor(){this.changes=new dl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Du(e).put(r)}removeEntry(e,t,r){return Du(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Av(o),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Er.newInvalidDocument(t);return Du(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ih(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:Er.newInvalidDocument(t)};return Du(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ih(t))},(i,o)=>{r={document:this.ts(t,o),size:kv(o)}}).next(()=>r)}getEntries(e,t){let r=io();return this.ns(e,t,(i,o)=>{const l=this.ts(i,o);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=io(),i=new sr(ot.comparator);return this.ns(e,t,(o,l)=>{const d=this.ts(o,l);r=r.insert(o,d),i=i.insert(o,kv(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ge.resolve();let i=new vr(B0);t.forEach(f=>i=i.add(f));const o=IDBKeyRange.bound(ih(i.first()),ih(i.last())),l=i.getIterator();let d=l.getNext();return Du(e).X({index:"documentKeyIndex",range:o},(f,_,E)=>{const D=ot.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&B0(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,_),d=l.hasNext()?l.getNext():null),d?E.G(ih(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,l=[o.popLast().toArray(),o.lastSegment(),Av(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Du(e).j(IDBKeyRange.bound(l,d,!0)).next(f=>{let _=io();for(const E of f){const D=this.ts(ot.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);D.isFoundDocument()&&(vm(t,D)||i.has(D.key))&&(_=_.insert(D.key,D))}return _})}getAllFromCollectionGroup(e,t,r,i){let o=io();const l=V0(t,r),d=V0(t,Eo.max());return Du(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,_,E)=>{const D=this.ts(ot.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);o=o.insert(D.key,D),o.size===i&&E.done()}).next(()=>o)}newChangeBuffer(e){return new jP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return VA(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Zn(e,t){return VA(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function MP(n,e){let t;if(e.document)t=AP(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ot.fromSegments(e.noDocument.path),i=eh(e.noDocument.readTime);t=Er.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=ot.fromSegments(e.unknownDocument.path),i=eh(e.unknownDocument.version);t=Er.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new _r(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Er.newInvalidDocument(e)}}function UA(n){return new BP(n)}class jP extends Ov{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new dl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vr((o,l)=>Wt(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const d=this.us.get(o);if(t.push(this.os.removeEntry(e,o,d.readTime)),l.isValidDocument()){const f=kP(this.os.serializer,l);i=i.add(o.path.popLast());const _=kv(f);r+=_-d.size,t.push(this.os.addEntry(e,o,f))}else if(r-=d.size,this.trackRemovals){const f=kP(this.os.serializer,l.convertToNoDocument(Ct.min()));t.push(this.os.addEntry(e,o,f))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,l)=>{this.us.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function VA(n){return ki(n,"remoteDocumentGlobal")}function Du(n){return ki(n,"remoteDocumentsV14")}function ih(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function V0(n,e){const t=e.documentKey.path.toArray();return[n,Av(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function B0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Wt(t[o],r[o]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class BA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class j0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Im(r.mutation,i,xr.empty(),_r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xt()){const i=hl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=ic();return o.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=hl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let o=io();const l=mu(),d=mu();return t.forEach((f,_)=>{const E=r.get(_.key);i.has(_.key)&&(void 0===E||E.mutation instanceof fl)?o=o.insert(_.key,_):void 0!==E?(l.set(_.key,E.mutation.getFieldMask()),Im(E.mutation,_,E.mutation.getFieldMask(),_r.now())):l.set(_.key,xr.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((_,E)=>l.set(_,E)),t.forEach((_,E)=>{var D;return d.set(_,new BA(E,null!==(D=l.get(_))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=mu();let i=new sr((l,d)=>l-d),o=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(f=>{const _=t.get(f);if(null===_)return;let E=r.get(f)||xr.empty();E=d.applyToLocalView(_,E),r.set(f,E);const D=(i.get(d.batchId)||Xt()).add(f);i=i.insert(d.batchId,D)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),_=f.key,E=f.value,D=WS();E.forEach(k=>{if(!o.has(k)){const V=eA(t.get(k),r.get(k));null!==V&&D.set(k,V),o=o.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,_,D))}return ge.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ot.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ge.resolve(hl());let d=-1,f=o;return l.next(_=>ge.forEach(_,(E,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),o.get(E)?ge.resolve():this.remoteDocumentCache.getEntry(e,E).next(k=>{f=f.insert(E,k)}))).next(()=>this.populateOverlays(e,_,o)).next(()=>this.computeViews(e,f,_,Xt())).next(E=>({batchId:d,changes:GS(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next(r=>{let i=ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=ic();return this.indexManager.getCollectionParents(e,i).next(l=>ge.forEach(l,d=>{const f=(_=t,E=d.child(i),new ul(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,E;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(_=>{_.forEach((E,D)=>{o=o.insert(E,D)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((d,f)=>{const _=f.getKey();null===o.get(_)&&(o=o.insert(_,Er.newInvalidDocument(_)))});let l=ic();return o.forEach((d,f)=>{const _=i.get(d);void 0!==_&&Im(_.mutation,f,xr.empty(),_r.now()),vm(t,f)&&(l=l.insert(d,f))}),l})}}class HP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ge.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Qr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:A0(r.bundledQuery),readTime:Qr(r.readTime)}),ge.resolve();var r}}class jA{constructor(){this.overlays=new sr(ot.comparator),this.ls=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=hl();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=hl(),o=t.length+1,l=new ot(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new sr((_,E)=>_-E);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let E=o.get(_.largestBatchId);null===E&&(E=hl(),o=o.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const d=hl(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,E)=>d.set(_,E)),!(d.size()>=i)););return ge.resolve(d)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new f0(t,r));let o=this.ls.get(t);void 0===o&&(o=Xt(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class Nv{constructor(){this.fs=new vr(Wi.ds),this.ws=new vr(Wi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Wi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Wi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new ot(new Rn([])),r=new Wi(t,e),i=new Wi(t,e+1),o=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),o.push(l.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ot(new Rn([])),r=new Wi(t,e),i=new Wi(t,e+1);let o=Xt();return this.ws.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Wi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Wi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ot.comparator(e.key,t.key)||Wt(e.As,t.As)}static _s(e,t){return Wt(e.As,t.As)||ot.comparator(e.key,t.key)}}class HA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new vr(Wi.ds)}checkEmpty(e){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const l=new h0(o,t,r,i);this.mutationQueue.push(l);for(const d of i)this.Rs=this.Rs.add(new Wi(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ge.resolve(l)}lookupMutationBatch(e,t){return ge.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wi(t,0),i=new Wi(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],l=>{const d=this.Ps(l.As);o.push(d)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vr(Wt);return t.forEach(i=>{const o=new Wi(i,0),l=new Wi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,l],d=>{r=r.add(d.As)})}),ge.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;ot.isDocumentKey(o)||(o=o.child(""));const l=new Wi(new ot(o),0);let d=new vr(Wt);return this.Rs.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(f.As)),!0)},l),ge.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ge.forEach(t.mutations,i=>{const o=new Wi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Wi(t,0),i=this.Rs.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $P{constructor(e){this.Ds=e,this.docs=new sr(ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Er.newInvalidDocument(t))}getEntries(e,t){let r=io();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Er.newInvalidDocument(i))}),ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=io();const l=t.path,d=new ot(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:_,value:{document:E}}=f.getNext();if(!l.isPrefixOf(_.path))break;_.path.length>l.length+1||lv(fS(E),r)<=0||(i.has(E.key)||vm(t,E))&&(o=o.insert(E.key,E.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,t,r,i){gt()}Cs(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Hs(this)}getSize(e){return ge.resolve(this.size)}}class Hs extends Ov{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class hp{constructor(e){this.persistence=e,this.xs=new dl(t=>Zd(t),cl),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Nv,this.targetCount=0,this.Ms=Cu.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ge.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Fn(t),ge.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.xs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ge.waitFor(o).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.ks.containsKey(t))}}class H0{constructor(e,t){this.$s={},this.overlays={},this.Os=new ro(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new hp(this),this.indexManager=new UP,this.remoteDocumentCache=new $P(r=>this.referenceDelegate.Ls(r)),this.serializer=new IA(t),this.qs=new HP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new HA(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new zP(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return ge.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class zP extends FI{constructor(e){super(),this.currentSequenceNumber=e}}class $0{constructor(e){this.persistence=e,this.Qs=new Nv,this.js=null}static zs(e){return new $0(e)}get Ws(){if(this.js)return this.js;throw gt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Ws,r=>{const i=ot.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,Ct.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ge.or([()=>ge.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class $A{constructor(e){this.serializer=e}O(e,t,r,i){const o=new dm("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yS,{unique:!0}),d.createObjectStore("documentMutations"),Lv(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),Lv(e)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",_)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,f){return f.store("mutations").j().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yS,{unique:!0});const E=f.store("mutations"),D=_.map(k=>E.put(k));return ge.waitFor(D)})}(e,o))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(o))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(o))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,o))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(o))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:aP});f.createIndex("collectionPathOverlayIndex",lP,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",wS,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:VI});f.createIndex("documentKeyIndex",rP),f.createIndex("collectionGroupIndex",BI)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,o))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:vS}).createIndex("sequenceNumberIndex",oP,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Mi}).createIndex("documentKeyIndex",ES,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=kv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ge.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(d=>ge.forEach(d,f=>{St(f.userId===o.userId);const _=th(this.serializer,f);return OA(e,o.userId,_).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((l,d)=>{const f=new Rn(l),_=[0,ds(f)];o.push(t.get(_).next(E=>E?ge.resolve():t.put({targetId:0,path:ds(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ge.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:sP});const r=t.store("collectionParents"),i=new P0,o=l=>{if(i.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:ds(f)})}};return t.store("remoteDocuments").X({Y:!0},(l,d)=>{const f=new Rn(l);return o(f.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,d,f],_)=>{const E=hs(d);return o(E.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=Rm(i),l=bA(this.serializer,o);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,l)=>{const d=t.store("remoteDocumentsV14"),f=(_=l,_.document?new ot(Rn.fromString(_.document.name).popFirst(5)):_.noDocument?ot.fromSegments(_.noDocument.path):_.unknownDocument?ot.fromSegments(_.unknownDocument.path):gt()).path.toArray();var _;const E={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(E))}).next(()=>ge.waitFor(i))}si(e,t){const r=t.store("mutations"),i=UA(this.serializer),o=new H0($0.zs,this.serializer.fe);return r.j().next(l=>{const d=new Map;return l.forEach(f=>{var _;let E=null!==(_=d.get(f.userId))&&void 0!==_?_:Xt();th(this.serializer,f).keys().forEach(D=>E=E.add(D)),d.set(f.userId,E)}),ge.forEach(d,(f,_)=>{const E=new Ei(_),D=xm.de(this.serializer,E),k=o.getIndexManager(E),V=Nm.de(E,this.serializer,k,o.referenceDelegate);return new j0(i,V,D,k).recalculateAndSaveOverlaysForDocumentKeys(new HI(t,ro.ct),f).next()})})}}function Lv(n){n.createObjectStore("targetDocuments",{keyPath:nU}).createIndex("documentTargetsIndex",iP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tU,{unique:!0}),n.createObjectStore("targetGlobal")}const zA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GA{constructor(e,t,r,i,o,l,d,f,_,E,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=l,this.document=d,this.ri=_,this.oi=E,this.ui=D,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=k=>Promise.resolve(),!GA.D())throw new Ue(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FA(this,i),this.di=t+"main",this.serializer=new IA(f),this.wi=new $o(this.di,this.ui,new $A(this.serializer)),this.Bs=new L0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UA(this.serializer),this.qs=new PP,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===E&&qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,zA);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ro(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,te.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Su(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(cu(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Fv(e).get("owner").next(t=>ge.resolve(this.Ri(t)))}Pi(e){return Su(e).delete(this.clientId)}bi(){var e=this;return(0,te.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ki(r,"clientMetadata");return i.j().next(o=>{const l=e.Si(o,18e5),d=o.filter(f=>-1===l.indexOf(f));return ge.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ge.resolve(!0):Fv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,zA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Su(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,te.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new HI(t,ro.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Su(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Nm.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mv(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return xm.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(l=this.ui)?cP:14===l?Wd:13===l?jI:12===l?bS:11===l?IS:void gt();var l;let d;return this.wi.runTransaction(e,i,o,f=>(d=new HI(f,this.Os?this.Os.next():ro.ct),"readwrite-primary"===t?this.Ti(d).next(_=>!!_||this.Ei(d)).next(_=>{if(!_)throw qr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ue(ye.FAILED_PRECONDITION,cv);return r(d)}).next(_=>this.vi(d).next(()=>_)):this.Oi(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Oi(e){return Fv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(ye.FAILED_PRECONDITION,zA)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fv(e).put("owner",t)}static D(){return $o.D()}Ai(e){const t=Fv(e);return t.get("owner").next(r=>this.Ri(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(qr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,O.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){qr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fv(n){return ki(n,"owner")}function Su(n){return ki(n,"clientMetadata")}function G0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Fm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Xt(),i=Xt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Fm(e,t.fromCache,r,i)}}class WA{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(HS(t))return ge.resolve(null);let r=Gi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ps(t,null,"F"),r=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Xt(...o);return this.Ui.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const _=this.ji(t,d);return this.zi(t,_,l,f.readTime)?this.Ki(e,ps(t,null,"F")):this.Wi(e,_,t,f)}))})))}Gi(e,t,r,i){return HS(t)||i.isEqual(Ct.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const l=this.ji(t,o);return this.zi(t,l,r,i)?this.Qi(e,t):(Vf()<=zr.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_v(t)),this.Wi(e,l,t,LI(i,-1)))})}ji(e,t){let r=new vr(u0(e));return t.forEach((i,o)=>{vm(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return Vf()<=zr.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",_v(t)),this.Ui.getDocumentsMatchingQuery(e,t,Eo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class qA{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new sr(Wt),this.Yi=new dl(o=>Zd(o),cl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function KA(n,e,t,r){return new qA(n,e,t,r)}function ZA(n,e){return W0.apply(this,arguments)}function W0(){return W0=(0,te.Z)(function*(n,e){const t=ut(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],d=[];let f=Xt();for(const _ of i){l.push(_.batchId);for(const E of _.mutations)f=f.add(E.key)}for(const _ of o){d.push(_.batchId);for(const E of _.mutations)f=f.add(E.key)}return t.localDocuments.getDocuments(r,f).next(_=>({er:_,removedBatchIds:l,addedBatchIds:d}))})})}),W0.apply(this,arguments)}function K0(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Um(n,e,t){let r=Xt(),i=Xt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=io();return t.forEach((d,f)=>{const _=o.get(d);f.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Ct.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),{nr:l,sr:i}})}function Z0(n,e){const t=ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vm(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,ge.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new pl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function sh(n,e,t){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,te.Z)(function*(n,e,t){const r=ut(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!cu(l))throw l;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Y0.apply(this,arguments)}function Bm(n,e,t){const r=ut(n);let i=Ct.min(),o=Xt();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,f,_){const E=ut(d),D=E.Yi.get(_);return void 0!==D?ge.resolve(E.Ji.get(D)):E.Bs.getTargetData(f,_)}(r,l,Gi(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,d.targetId).next(f=>{o=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Ct.min(),t?o:Xt())).next(d=>(Q0(r,c0(e),d),{documents:d,ir:o})))}function oh(n,e){const t=ut(n),r=ut(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(l=>l?l.target:null))}function YA(n,e){const t=ut(n),r=t.Xi.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,LI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Q0(t,e,i),i))}function Q0(n,e,t){let r=n.Xi.get(e)||Ct.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function QA(){return QA=(0,te.Z)(function*(n,e,t,r){const i=ut(n);let o=Xt(),l=io();for(const _ of t){const E=e.rr(_.metadata.name);_.document&&(o=o.add(E));const D=e.ur(_);D.setReadTime(e.cr(_.metadata.readTime)),l=l.insert(E,D)}const d=i.Zi.newChangeBuffer({trackRemovals:!0}),f=yield Vm(i,(_=r,Gi(Ea(Rn.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>Um(_,d,l).next(E=>(d.apply(_),E)).next(E=>i.Bs.removeMatchingKeysForTargetId(_,f.targetId).next(()=>i.Bs.addMatchingKeys(_,o,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,E.nr,E.sr)).next(()=>E.nr)))}),QA.apply(this,arguments)}function WP(n,e){return XA.apply(this,arguments)}function XA(){return XA=(0,te.Z)(function*(n,e,t=Xt()){const r=yield Vm(n,Gi(A0(e.bundledQuery))),i=ut(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=Qr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(o,e);const d=r.withResumeToken(wi.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(d.targetId,d),i.Bs.updateTargetData(o,d).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),XA.apply(this,arguments)}function JA(n,e){return`firestore_clients_${n}_${e}`}function eR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function J0(n,e){return`firestore_targets_${n}_${e}`}class jm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new Ue(i.error.code,i.error.message))),l?new jm(e,t,i.state,o):(qr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ue(r.error.code,r.error.message))),o?new fp(e,r.state,i):(qr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Qd();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=UI(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new Uv(e,o):(qr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vv{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vv(t.clientId,t.onlineState):(qr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bv{constructor(){this.activeTargetIds=Qd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eb{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new sr(Wt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=JA(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Bv),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,te.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(JA(e.persistenceKey,i));if(o){const l=Uv.ar(i,o);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(J0(this.persistenceKey,e));if(r){const i=fp.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(J0(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,te.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let l=ro.ct;if(null!=o)try{const d=JSON.parse(o);St("number"==typeof d),l=d}catch(d){qr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==ro.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new jm(this.currentUser,e,t,r),o=eR(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=eR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=J0(this.persistenceKey,e),o=new fp(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Uv.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return jm.ar(new Ei(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return fp.ar(i,t)}br(e){return Vv.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),l=[],d=[];return o.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{o.has(f)||d.push(f)}),this.syncEngine.Wr(l,d).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Qd();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tR{constructor(){this.Hr=new Bv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Bv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nR{Yr(e){}shutdown(){}}class rR{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hm=null;function jv(){return null===Hm?Hm=268435456+Math.round(2147483648*Math.random()):Hm++,"0x"+Hm.toString(16)}const iR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sR{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Is="WebChannelConnection";class qP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const l=jv(),d=this.To(e,t);$e("RestConnection",`Sending RPC '${e}' ${l}:`,d,r);const f={};return this.Eo(f,i,o),this.Ao(e,d,f,r).then(_=>($e("RestConnection",`Received RPC '${e}' ${l}: `,_),_),_=>{throw Ho("RestConnection",`RPC '${e}' ${l} failed with error: `,_,"url: ",d,"request:",r),_})}vo(e,t,r,i,o,l){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ol,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${iR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=jv();return new Promise((l,d)=>{const f=new eU;f.setWithCredentials(!0),f.listenOnce(X2.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case sS.NO_ERROR:const E=f.getResponseJson();$e(Is,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(E)),l(E);break;case sS.TIMEOUT:$e(Is,`RPC '${e}' ${o} timed out`),d(new Ue(ye.DEADLINE_EXCEEDED,"Request time out"));break;case sS.HTTP_ERROR:const D=f.getStatus();if($e(Is,`RPC '${e}' ${o} failed with status:`,D,"response text:",f.getResponseText()),D>0){let k=f.getResponseJson();Array.isArray(k)&&(k=k[0]);const V=k?.error;if(V&&V.status&&V.message){const z=function(ee){const de=ee.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(de)>=0?de:ye.UNKNOWN}(V.status);d(new Ue(z,V.message))}else d(new Ue(ye.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ue(ye.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{$e(Is,`RPC '${e}' ${o} completed.`)}});const _=JSON.stringify(i);$e(Is,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",_,r,15)})}Ro(e,t,r){const i=jv(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=MI(),d=Gk(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.xmlHttpFactory=new J2({})),this.Eo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const E=o.join("");$e(Is,`Creating RPC '${e}' stream ${i}: ${E}`,f);const D=l.createWebChannel(E,f);let k=!1,V=!1;const z=new sR({ro:de=>{V?$e(Is,`Not sending because RPC '${e}' stream ${i} is closed:`,de):(k||($e(Is,`Opening RPC '${e}' stream ${i} transport.`),D.open(),k=!0),$e(Is,`RPC '${e}' stream ${i} sending:`,de),D.send(de))},oo:()=>D.close()}),ee=(de,je,Ke)=>{de.listen(je,qe=>{try{Ke(qe)}catch(Je){setTimeout(()=>{throw Je},0)}})};return ee(D,ov.EventType.OPEN,()=>{V||$e(Is,`RPC '${e}' stream ${i} transport opened.`)}),ee(D,ov.EventType.CLOSE,()=>{V||(V=!0,$e(Is,`RPC '${e}' stream ${i} transport closed`),z.wo())}),ee(D,ov.EventType.ERROR,de=>{V||(V=!0,Ho(Is,`RPC '${e}' stream ${i} transport errored:`,de),z.wo(new Ue(ye.UNAVAILABLE,"The operation could not be completed")))}),ee(D,ov.EventType.MESSAGE,de=>{var je;if(!V){const Ke=de.data[0];St(!!Ke);const Je=Ke.error||(null===(je=Ke[0])||void 0===je?void 0:je.error);if(Je){$e(Is,`RPC '${e}' stream ${i} received error:`,Je);const Ot=Je.status;let Nt=function(Hr){const Yi=Yr[Hr];if(void 0!==Yi)return g0(Yi)}(Ot),vn=Je.message;void 0===Nt&&(Nt=ye.INTERNAL,vn="Unknown error status: "+Ot+" with message "+Je.message),V=!0,z.wo(new Ue(Nt,vn)),D.close()}else $e(Is,`RPC '${e}' stream ${i} received:`,Ke),z._o(Ke)}}),ee(d,Wk.STAT_EVENT,de=>{de.stat===oS.PROXY?$e(Is,`RPC '${e}' stream ${i} detected buffering proxy`):de.stat===oS.NOPROXY&&$e(Is,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{z.fo()},0),z}}function KP(){return typeof window<"u"?window:null}function $m(){return typeof document<"u"?document:null}function Hv(n){return new SP(n,!0)}class oR{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class ZP{constructor(e,t,r,i,o,l,d,f){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new oR(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,te.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,te.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,te.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ue(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,te.Z)(function*(){e.state=0,e.start()}))}tu(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iU extends ZP{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function D0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:gt(),i=e.targetChange.targetIds||[],o=function(f,_){return f.useProto3Json?(St(void 0===_||"string"==typeof _),wi.fromBase64String(_||"")):(St(void 0===_||_ instanceof Uint8Array),wi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const _=void 0===f.code?ye.UNKNOWN:g0(f.code);return new Ue(_,f.message||"")}(l);t=new aA(r,i,o,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Go(n,r.document.name),o=Qr(r.document.updateTime),l=r.document.createTime?Qr(r.document.createTime):Ct.min(),d=new fs({mapValue:{fields:r.document.fields}}),f=Er.newFoundDocument(i,o,l,d);t=new bv(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Go(n,r.document),o=r.readTime?Qr(r.readTime):Ct.min(),l=Er.newNoDocument(i,o);t=new bv([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Go(n,r.document);t=new bv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return gt();{const r=e.filter,{count:i=0,unchangedNames:o}=r,l=new TP(i,o);t=new oA(r.targetId,l)}}var f;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ct.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ct.min():o.readTime?Qr(o.readTime):Ct.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=wa(this.serializer),t.addTarget=function(i,o){let l;const d=o.target;if(l=s0(d)?{documents:mA(i,d)}:{query:Dv(i,d)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Tv(i,o.resumeToken);const f=w0(i,o.expectedCount);null!==f&&(l.expectedCount=f)}else if(o.snapshotVersion.compareTo(Ct.min())>0){l.readTime=op(i,o.snapshotVersion.toTimestamp());const f=w0(i,o.expectedCount);null!==f&&(l.expectedCount=f)}return l}(this.serializer,e);const r=function _A(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=wa(this.serializer),t.removeTarget=e,this.Wo(t)}}class sU extends ZP{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function gA(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let o=Qr(r.updateTime?r.updateTime:i);return o.isEqual(Ct.min())&&(o=Qr(i)),new EP(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.cu(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=wa(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Am(this.serializer,r))};this.Wo(t)}}class oU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ye.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(e,t,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(ye.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class lU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(qr(t),this.mu=!1):$e("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class lR{constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(d=>{r.enqueueAndForget((0,te.Z)(function*(){var f;Au(l)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,te.Z)(function*(_){const E=ut(_);E.vu.add(4),yield pp(E),E.bu.set("Unknown"),E.vu.delete(4),yield ah(E)}),function(_){return f.apply(this,arguments)})(l))}))}),this.bu=new lU(r,i)}}function ah(n){return $v.apply(this,arguments)}function $v(){return $v=(0,te.Z)(function*(n){if(Au(n))for(const e of n.Ru)yield e(!0)}),$v.apply(this,arguments)}function pp(n){return gp.apply(this,arguments)}function gp(){return gp=(0,te.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),gp.apply(this,arguments)}function zv(n,e){const t=ut(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),tb(t)?Wv(t):Pi(t).Ko()&&cR(t,e))}function Gv(n,e){const t=ut(n),r=Pi(t);t.Au.delete(e),r.Ko()&&uR(t,e),0===t.Au.size&&(r.Ko()?r.jo():Au(t)&&t.bu.set("Unknown"))}function cR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pi(n).su(e)}function uR(n,e){n.Vu.qt(e),Pi(n).iu(e)}function Wv(n){n.Vu=new cA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Pi(n).start(),n.bu.gu()}function tb(n){return Au(n)&&!Pi(n).Uo()&&n.Au.size>0}function Au(n){return 0===ut(n).vu.size}function dR(n){n.Vu=void 0}function cU(n){return nb.apply(this,arguments)}function nb(){return nb=(0,te.Z)(function*(n){n.Au.forEach((e,t)=>{cR(n,e)})}),nb.apply(this,arguments)}function zm(n,e){return mp.apply(this,arguments)}function mp(){return mp=(0,te.Z)(function*(n,e){dR(n),tb(n)?(n.bu.Iu(e),Wv(n)):n.bu.set("Unknown")}),mp.apply(this,arguments)}function YP(n,e,t){return rb.apply(this,arguments)}function rb(){return rb=(0,te.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof aA&&2===e.state&&e.cause)try{yield(r=(0,te.Z)(function*(i,o){const l=o.cause;for(const d of o.targetIds)i.Au.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.Au.delete(d),i.Vu.removeTarget(d))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qv(n,r)}else if(e instanceof bv?n.Vu.Ht(e):e instanceof oA?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Ct.min()))try{const r=yield K0(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.Vu.ce(o);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=i.Au.get(f);_&&i.Au.set(f,_.withResumeToken(d.resumeToken,o))}}),l.targetMismatches.forEach((d,f)=>{const _=i.Au.get(d);if(!_)return;i.Au.set(d,_.withResumeToken(wi.EMPTY_BYTE_STRING,_.snapshotVersion)),uR(i,d);const E=new pl(_.target,d,f,_.sequenceNumber);cR(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield qv(n,r)}var r}),rb.apply(this,arguments)}function qv(n,e,t){return ib.apply(this,arguments)}function ib(){return ib=(0,te.Z)(function*(n,e,t){if(!cu(e))throw e;n.vu.add(1),yield pp(n),n.bu.set("Offline"),t||(t=()=>K0(n.localStore)),n.asyncQueue.enqueueRetryable((0,te.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield ah(n)}))}),ib.apply(this,arguments)}function hR(n,e){return e().catch(t=>qv(n,t,e))}function _p(n){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,te.Z)(function*(n){const e=ut(n),t=oc(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;QP(e);)try{const i=yield Z0(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,XP(e,i)}catch(i){yield qv(e,i)}fR(e)&&pR(e)}),Gm.apply(this,arguments)}function QP(n){return Au(n)&&n.Eu.length<10}function XP(n,e){n.Eu.push(e);const t=oc(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function fR(n){return Au(n)&&!oc(n).Uo()&&n.Eu.length>0}function pR(n){oc(n).start()}function JP(n){return sb.apply(this,arguments)}function sb(){return sb=(0,te.Z)(function*(n){oc(n).hu()}),sb.apply(this,arguments)}function eO(n){return ob.apply(this,arguments)}function ob(){return ob=(0,te.Z)(function*(n){const e=oc(n);for(const t of n.Eu)e.uu(t.mutations)}),ob.apply(this,arguments)}function tO(n,e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,te.Z)(function*(n,e,t){const r=n.Eu.shift(),i=wv.from(r,e,t);yield hR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _p(n)}),Kv.apply(this,arguments)}function ab(n,e){return lb.apply(this,arguments)}function lb(){return lb=(0,te.Z)(function*(n,e){var t;e&&oc(n).ou&&(yield(t=(0,te.Z)(function*(r,i){if(p0(o=i.code)&&o!==ye.ABORTED){const l=r.Eu.shift();oc(r).Qo(),yield hR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield _p(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),fR(n)&&pR(n)}),lb.apply(this,arguments)}function gR(n,e){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,te.Z)(function*(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=Au(t);t.vu.add(3),yield pp(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield ah(t)}),Zv.apply(this,arguments)}function Yv(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,te.Z)(function*(n,e){const t=ut(n);e?(t.vu.delete(2),yield ah(t)):e||(t.vu.add(2),yield pp(t),t.bu.set("Unknown"))}),mR.apply(this,arguments)}function Pi(n){return n.Su||(n.Su=function(e,t,r){const i=ut(e);return i.fu(),new iU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:cU.bind(null,n),ao:zm.bind(null,n),nu:YP.bind(null,n)}),n.Ru.push(function(){var e=(0,te.Z)(function*(t){t?(n.Su.Qo(),tb(n)?Wv(n):n.bu.set("Unknown")):(yield n.Su.stop(),dR(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function oc(n){return n.Du||(n.Du=function(e,t,r){const i=ut(e);return i.fu(),new sU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:JP.bind(null,n),ao:ab.bind(null,n),au:eO.bind(null,n),cu:tO.bind(null,n)}),n.Ru.push(function(){var e=(0,te.Z)(function*(t){t?(n.Du.Qo(),yield _p(n)):(yield n.Du.stop(),n.Eu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Qv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,d=new Qv(e,t,l,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(n,e){if(qr("AsyncQueue",`${e}: ${n}`),cu(n))return new Ue(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class lh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=ic(),this.sortedSet=new sr(this.comparator)}static emptySet(e){return new lh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new lh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _R{constructor(){this.Cu=new sr(ot.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):gt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ru{constructor(e,t,r,i,o,l,d,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new Ru(e,t,lh.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class xu{constructor(){this.Nu=void 0,this.listeners=[]}}class yR{constructor(){this.queries=new dl(e=>l0(e),mv),this.onlineState="Unknown",this.ku=new Set}}function Wm(n,e){return qm.apply(this,arguments)}function qm(){return qm=(0,te.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new xu),i)try{o.Nu=yield t.onListen(r)}catch(l){const d=yp(l,`Initialization of query '${_v(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&ub(t)}),qm.apply(this,arguments)}function cb(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,te.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),vR.apply(this,arguments)}function ER(n,e){const t=ut(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.$u(i)&&(r=!0);l.Nu=i}}r&&ub(t)}function nO(n,e,t){const r=ut(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function ub(n){n.ku.forEach(e=>{e.next()})}class db{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ru(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class rO{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class hb{constructor(e){this.serializer=e}rr(e){return Go(this.serializer,e)}ur(e){return e.metadata.exists?AP(this.serializer,e.document,!1):Er.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Qr(e)}}class uU{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fb(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Rn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new hb(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Xt()).add(o);t.set(l,d)}}return t}complete(){var e=this;return(0,te.Z)(function*(){const t=yield function X0(n,e,t,r){return QA.apply(this,arguments)}(e.localStore,new hb(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield WP(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function fb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wR{constructor(e){this.key=e}}class pb{constructor(e){this.key=e}}class iO{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Xt(),this.mutatedKeys=Xt(),this.tc=u0(e),this.ec=new lh(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new _R,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const k=i.get(E),V=vm(this.query,D)?D:null,z=!!k&&this.mutatedKeys.has(k.key),ee=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let de=!1;k&&V?k.data.isEqual(V.data)?z!==ee&&(r.track({type:3,doc:V}),de=!0):this.rc(k,V)||(r.track({type:2,doc:V}),de=!0,(f&&this.tc(V,f)>0||_&&this.tc(V,_)<0)&&(d=!0)):!k&&V?(r.track({type:0,doc:V}),de=!0):k&&!V&&(r.track({type:1,doc:k}),de=!0,(f||_)&&(d=!0)),de&&(V?(l=l.add(V),o=ee?o.add(E):o.delete(E)):(l=l.delete(E),o=o.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),o=o.delete(E.key),r.track({type:1,doc:E})}return{ec:l,ic:r,zi:d,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((_,E)=>function(D,k){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return V(D)-V(k)}(_.type,E.type)||this.tc(_.doc,E.doc)),this.oc(r);const l=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==o.length||f?{snapshot:new Ru(this.query,e.ec,i,o,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new _R,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Xt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new pb(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new wR(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Xt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ru.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class gb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IR{constructor(e){this.key=e,this.fc=!1}}class bR{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new dl(d=>l0(d),mv),this._c=new Map,this.mc=new Set,this.gc=new sr(ot.comparator),this.yc=new Map,this.Ic=new Nv,this.Tc={},this.Ec=new Map,this.Ac=Cu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function sO(n,e){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,te.Z)(function*(n,e){const t=oE(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const l=yield Vm(t.localStore,Gi(e)),d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Jv(t,e,r,"current"===d,l.resumeToken),t.isPrimaryClient&&zv(t.remoteStore,l)}return i}),Xv.apply(this,arguments)}function Jv(n,e,t,r,i){return Mu.apply(this,arguments)}function Mu(){return Mu=(0,te.Z)(function*(n,e,t,r,i){n.Rc=(D,k,V)=>{return(z=(0,te.Z)(function*(ee,de,je,Ke){let qe=de.view.sc(je);qe.zi&&(qe=yield Bm(ee.localStore,de.query,!1).then(({documents:Nt})=>de.view.sc(Nt,qe)));const Je=Ke&&Ke.targetChanges.get(de.targetId),Ot=de.view.applyChanges(qe,ee.isPrimaryClient,Je);return RR(ee,de.targetId,Ot.cc),Ot.snapshot}),function(ee,de,je,Ke){return z.apply(this,arguments)})(n,D,k,V);var z};const o=yield Bm(n.localStore,e,!0),l=new iO(e,o.ir),d=l.sc(o.documents),f=Cm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=l.applyChanges(d,n.isPrimaryClient,f);RR(n,t,_.cc);const E=new gb(e,t,l);return n.wc.set(e,E),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),_.snapshot}),Mu.apply(this,arguments)}function eE(n,e){return tE.apply(this,arguments)}function tE(){return tE=(0,te.Z)(function*(n,e){const t=ut(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!mv(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Gv(t.remoteStore,r.targetId),Km(t,r.targetId)}).catch(ll))):(Km(t,r.targetId),yield sh(t.localStore,r.targetId,!0))}),tE.apply(this,arguments)}function mb(){return mb=(0,te.Z)(function*(n,e,t){const r=aE(n);try{const i=yield function(o,l){const d=ut(o),f=_r.now(),_=l.reduce((k,V)=>k.add(V.key),Xt());let E,D;return d.persistence.runTransaction("Locally write mutations","readwrite",k=>{let V=io(),z=Xt();return d.Zi.getEntries(k,_).next(ee=>{V=ee,V.forEach((de,je)=>{je.isValidDocument()||(z=z.add(de))})}).next(()=>d.localDocuments.getOverlayedDocuments(k,V)).next(ee=>{E=ee;const de=[];for(const je of l){const Ke=IP(je,E.get(je.key).overlayedDocument);null!=Ke&&de.push(new fl(je.key,Ke,kS(Ke.value.mapValue),Mr.exists(!0)))}return d.mutationQueue.addMutationBatch(k,f,de,l)}).next(ee=>{D=ee;const de=ee.applyToLocalDocumentSet(E,z);return d.documentOverlayCache.saveOverlays(k,ee.batchId,de)})}).then(()=>({batchId:D.batchId,changes:GS(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,d){let f=o.Tc[o.currentUser.toKey()];f||(f=new sr(Wt)),f=f.insert(l,d),o.Tc[o.currentUser.toKey()]=f}(r,i.batchId,t),yield Wo(r,i.changes),yield _p(r.remoteStore)}catch(i){const o=yp(i,"Failed to persist write");t.reject(o)}}),mb.apply(this,arguments)}function CR(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,te.Z)(function*(n,e){const t=ut(n);try{const r=yield function GP(n,e){const t=ut(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((E,D)=>{const k=i.get(D);if(!k)return;d.push(t.Bs.removeMatchingKeys(o,E.removedDocuments,D).next(()=>t.Bs.addMatchingKeys(o,E.addedDocuments,D)));let V=k.withSequenceNumber(o.currentSequenceNumber);var z,ee,de;null!==e.targetMismatches.get(D)?V=V.withResumeToken(wi.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,r)),i=i.insert(D,V),ee=V,de=E,(0===(z=k).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(o,V))});let f=io(),_=Xt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,E))}),d.push(Um(o,l,e.documentUpdates).next(E=>{f=E.nr,_=E.sr})),!r.isEqual(Ct.min())){const E=t.Bs.getLastRemoteSnapshotVersion(o).next(D=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(E)}return ge.waitFor(d).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,_)).next(()=>f)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.yc.get(o);l&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?St(l.fc):i.removedDocuments.size>0&&(St(l.fc),l.fc=!1))}),yield Wo(t,r,e)}catch(r){yield ll(r)}}),DR.apply(this,arguments)}function _b(n,e,t){const r=ut(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,l)=>{const d=l.view.Mu(e);d.snapshot&&i.push(d.snapshot)}),function(o,l){const d=ut(o);d.onlineState=l;let f=!1;d.queries.forEach((_,E)=>{for(const D of E.listeners)D.Mu(l)&&(f=!0)}),f&&ub(d)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oO(n,e,t){return yb.apply(this,arguments)}function yb(){return yb=(0,te.Z)(function*(n,e,t){const r=ut(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let l=new sr(ot.comparator);l=l.insert(o,Er.newNoDocument(o,Ct.min()));const d=Xt().add(o),f=new Tm(Ct.min(),new Map,new sr(Wt),l,d);yield CR(r,f),r.gc=r.gc.remove(o),r.yc.delete(e),wb(r)}else yield sh(r.localStore,e,!1).then(()=>Km(r,e,t)).catch(ll)}),yb.apply(this,arguments)}function dU(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,te.Z)(function*(n,e){const t=ut(n),r=e.batch.batchId;try{const i=yield function q0(n,e){const t=ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,d,f,_){const E=f.batch,D=E.keys();let k=ge.resolve();return D.forEach(V=>{k=k.next(()=>_.getEntry(d,V)).next(z=>{const ee=f.docVersions.get(V);St(null!==ee),z.version.compareTo(ee)<0&&(E.applyToRemoteDocument(z,f),z.isValidDocument()&&(z.setReadTime(f.commitVersion),_.addEntry(z)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(d,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=Xt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);AR(t,r,null),Eb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wo(t,i)}catch(i){yield ll(i)}}),SR.apply(this,arguments)}function hU(n,e,t){return nE.apply(this,arguments)}function nE(){return nE=(0,te.Z)(function*(n,e,t){const r=ut(n);try{const i=yield function(o,l){const d=ut(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return d.mutationQueue.lookupMutationBatch(f,l).next(E=>(St(null!==E),_=E.keys(),d.mutationQueue.removeMutationBatch(f,E))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,_,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>d.localDocuments.getDocuments(f,_))})}(r.localStore,e);AR(r,e,t),Eb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wo(r,i)}catch(i){yield ll(i)}}),nE.apply(this,arguments)}function vb(){return vb=(0,te.Z)(function*(n,e){const t=ut(n);Au(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=ut(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=yp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),vb.apply(this,arguments)}function Eb(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function AR(n,e,t){const r=ut(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||lO(n,r)})}function lO(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Gv(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),wb(n))}function RR(n,e,t){for(const r of t)r instanceof wR?(n.Ic.addReference(r.key,e),fU(n,r)):r instanceof pb?($e("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||lO(n,r.key)):gt()}function fU(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.mc.add(r),wb(n))}function wb(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new ot(Rn.fromString(e)),r=n.Ac.next();n.yc.set(r,new IR(t)),n.gc=n.gc.insert(t,r),zv(n.remoteStore,new pl(Gi(Ea(t.path)),r,"TargetPurposeLimboResolution",ro.ct))}}function Wo(n,e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,te.Z)(function*(n,e,t){const r=ut(n),i=[],o=[],l=[];var d;r.wc.isEmpty()||(r.wc.forEach((d,f)=>{l.push(r.Rc(f,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const E=Fm.Li(f.targetId,_);o.push(E)}}))}),yield Promise.all(l),r.dc.nu(i),yield(d=(0,te.Z)(function*(f,_){const E=ut(f);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ge.forEach(_,k=>ge.forEach(k.Fi,V=>E.persistence.referenceDelegate.addReference(D,k.targetId,V)).next(()=>ge.forEach(k.Bi,V=>E.persistence.referenceDelegate.removeReference(D,k.targetId,V)))))}catch(D){if(!cu(D))throw D;$e("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const k=D.targetId;if(!D.fromCache){const V=E.Ji.get(k),ee=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);E.Ji=E.Ji.insert(k,ee)}}}),function(f,_){return d.apply(this,arguments)})(r.localStore,o))}),Ib.apply(this,arguments)}function cO(n,e){return rE.apply(this,arguments)}function rE(){return rE=(0,te.Z)(function*(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield ZA(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(d=>{d.reject(new Ue(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wo(t,r.er)}var i}),rE.apply(this,arguments)}function ch(n,e){const t=ut(n),r=t.yc.get(e);if(r&&r.fc)return Xt().add(r.key);{let i=Xt();const o=t._c.get(e);if(!o)return i;for(const l of o){const d=t.wc.get(l);i=i.unionWith(d.view.nc)}return i}}function xR(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,te.Z)(function*(n,e){const t=ut(n),r=yield Bm(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&RR(t,e.targetId,i.cc),i}),Zm.apply(this,arguments)}function bb(n,e){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,te.Z)(function*(n,e){const t=ut(n);return YA(t.localStore,e).then(r=>Wo(t,r))}),Tb.apply(this,arguments)}function Cb(n,e,t,r){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,te.Z)(function*(n,e,t,r){const i=ut(n),o=yield function(l,d){const f=ut(l),_=ut(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",E=>_.Sn(E,d).next(D=>D?f.localDocuments.getDocuments(E,D):ge.resolve(null)))}(i.localStore,e);var d;null!==o?("pending"===t?yield _p(i.remoteStore):"acknowledged"===t||"rejected"===t?(AR(i,e,r||null),Eb(i,e),d=e,ut(ut(i.localStore).mutationQueue).Cn(d)):gt(),yield Wo(i,o)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ym.apply(this,arguments)}function MR(){return MR=(0,te.Z)(function*(n,e){const t=ut(n);if(oE(t),aE(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uO(t,r.toArray());t.vc=!0,yield Yv(t.remoteStore,!0);for(const o of i)zv(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Km(t,l),sh(t.localStore,l,!0))),Gv(t.remoteStore,l)}),yield i,yield uO(t,r),function(o){const l=ut(o);l.yc.forEach((d,f)=>{Gv(l.remoteStore,f)}),l.Ic.Ts(),l.yc=new Map,l.gc=new sr(ot.comparator)}(t),t.vc=!1,yield Yv(t.remoteStore,!1)}}),MR.apply(this,arguments)}function uO(n,e,t){return kR.apply(this,arguments)}function kR(){return kR=(0,te.Z)(function*(n,e,t){const r=ut(n),i=[],o=[];for(const l of e){let d;const f=r._c.get(l);if(f&&0!==f.length){d=yield Vm(r.localStore,Gi(f[0]));for(const _ of f){const E=r.wc.get(_),D=yield xR(r,E);D.snapshot&&o.push(D.snapshot)}}else{const _=yield oh(r.localStore,l);d=yield Vm(r.localStore,_),yield Jv(r,Db(_),l,!1,d.resumeToken)}i.push(d)}return r.dc.nu(o),i}),kR.apply(this,arguments)}function Db(n){return pP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dO(n){const e=ut(n);return ut(ut(e.localStore).persistence).$i()}function hO(n,e,t,r){return Sb.apply(this,arguments)}function Sb(){return Sb=(0,te.Z)(function*(n,e,t,r){const i=ut(n);if(i.vc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=yield YA(i.localStore,c0(o[0])),d=Tm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wi.EMPTY_BYTE_STRING);yield Wo(i,l,d);break}case"rejected":yield sh(i.localStore,e,!0),Km(i,e,r);break;default:gt()}}),Sb.apply(this,arguments)}function fO(n,e,t){return sE.apply(this,arguments)}function sE(){return sE=(0,te.Z)(function*(n,e,t){const r=oE(n);if(r.vc){for(const i of e){if(r._c.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const o=yield oh(r.localStore,i),l=yield Vm(r.localStore,o);yield Jv(r,Db(o),l.targetId,!1,l.resumeToken),zv(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield sh(r.localStore,i,!1).then(()=>{Gv(r.remoteStore,i),Km(r,i)}).catch(ll))}}),sE.apply(this,arguments)}function oE(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ch.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oO.bind(null,e),e.dc.nu=ER.bind(null,e.eventManager),e.dc.Pc=nO.bind(null,e.eventManager),e}function aE(n){const e=ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hU.bind(null,e),e}class Qm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,te.Z)(function*(){t.serializer=Hv(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return KA(this.persistence,new WA,e.initialUser,this.serializer)}createPersistence(e){return new H0($0.zs,this.serializer)}createSharedClientState(e){return new tR}terminate(){var e=this;return(0,te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Xm extends Qm{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,te.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield aE(r.Vc.syncEngine),yield _p(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return KA(this.persistence,new WA,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new LA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new mS(t,this.persistence);return new gS(e.asyncQueue,r)}createPersistence(e){const t=G0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new GA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KP(),$m(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tR}}class gO extends Xm{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,te.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof eb&&(r.sharedClientState.syncEngine={jr:Cb.bind(null,i),zr:hO.bind(null,i),Wr:fO.bind(null,i),$i:dO.bind(null,i),Qr:bb.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,te.Z)(function*(l){yield function iE(n,e){return MR.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=KP();if(!eb.D(t))throw new Ue(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=G0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uh{initialize(e,t){var r=this;return(0,te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>_b(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=cO.bind(null,r.syncEngine),yield Yv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yR}createDatastore(e){const t=Hv(e.databaseInfo.databaseId),r=new qP(e.databaseInfo);return new oU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=d=>_b(this.syncEngine,d,0),l=rR.D()?new rR:new nR,new lR(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,d,f,_){const E=new bR(r,i,o,l,d,f);return _&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,te.Z)(function*(t){const r=ut(t);$e("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield pp(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lE(n,e=10240){let t=0;return{read:()=>(0,te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,te.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class cE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mO{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Kr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,te.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,te.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,te.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new rO(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,te.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,te.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,te.Z)(function*(o,l){const d=ut(o),f=wa(d.serializer)+"/documents",_={documents:l.map(V=>Sm(d.serializer,V))},E=yield d.vo("BatchGetDocuments",f,_,l.length),D=new Map;E.forEach(V=>{const z=function C0(n,e){return"found"in e?function(t,r){St(!!r.found);const i=Go(t,r.found.name),o=Qr(r.found.updateTime),l=r.found.createTime?Qr(r.found.createTime):Ct.min(),d=new fs({mapValue:{fields:r.found.fields}});return Er.newFoundDocument(i,o,l,d)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=Go(t,r.missing),o=Qr(r.readTime);return Er.newNoDocument(i,o)}(n,e):gt()}(d.serializer,V);D.set(z.key.toString(),z)});const k=[];return l.forEach(V=>{const z=D.get(V.toString());St(!!z),k.push(z)}),k}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=ot.fromPath(i);e.mutations.push(new Ev(o,e.precondition(o)))}),yield(r=(0,te.Z)(function*(i,o){const l=ut(i),d=wa(l.serializer)+"/documents",f={writes:o.map(_=>Am(l.serializer,_))};yield l.Io("Commit",d,f)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?Mr.exists(!1):Mr.updateTime(t):Mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Ue(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(t)}return Mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gU{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new oR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,te.Z)(function*(){const t=new pU(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!zf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!p0(t)}return!1}}class _O{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ei.UNAUTHENTICATED,this.clientId=PI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,te.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>($e("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=yp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function uE(n,e){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,te.Z)(function*(o){r.isEqual(o)||(yield ZA(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Ab.apply(this,arguments)}function Rb(n,e){return dE.apply(this,arguments)}function dE(){return dE=(0,te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Mb(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>gR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>gR(e.remoteStore,o)),n._onlineComponents=e}),dE.apply(this,arguments)}function xb(n){return"FirebaseError"===n.name?n.code===ye.FAILED_PRECONDITION||n.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Mb(n){return hE.apply(this,arguments)}function hE(){return hE=(0,te.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield uE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!xb(t))throw t;Ho("Error using user provided cache. Falling back to memory cache: "+t),yield uE(n,new Qm)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield uE(n,new Qm);return n._offlineComponents}),hE.apply(this,arguments)}function Jm(n){return OR.apply(this,arguments)}function OR(){return OR=(0,te.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield Rb(n,n._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield Rb(n,new uh))),n._onlineComponents}),OR.apply(this,arguments)}function NR(n){return Mb(n).then(e=>e.persistence)}function vp(n){return Mb(n).then(e=>e.localStore)}function kb(n){return Jm(n).then(e=>e.remoteStore)}function fE(n){return Jm(n).then(e=>e.syncEngine)}function ac(n){return Pb.apply(this,arguments)}function Pb(){return Pb=(0,te.Z)(function*(n){const e=yield Jm(n),t=e.eventManager;return t.onListen=sO.bind(null,e.syncEngine),t.onUnlisten=eE.bind(null,e.syncEngine),t}),Pb.apply(this,arguments)}function vO(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(i,o,l,d,f){const _=new cE({next:D=>{o.enqueueAndForget(()=>cb(i,E));const k=D.docs.has(l);!k&&D.fromCache?f.reject(new Ue(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&D.fromCache&&d&&"server"===d.source?f.reject(new Ue(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(D)},error:D=>f.reject(D)}),E=new db(Ea(l.path),_,{includeMetadataChanges:!0,Ku:!0});return Wm(i,E)}(yield ac(n),n.asyncQueue,e,t,r)})),r.promise}function wO(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(i,o,l,d,f){const _=new cE({next:D=>{o.enqueueAndForget(()=>cb(i,E)),D.fromCache&&"server"===d.source?f.reject(new Ue(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(D)},error:D=>f.reject(D)}),E=new db(l,_,{includeMetadataChanges:!0,Ku:!0});return Wm(i,E)}(yield ac(n),n.asyncQueue,e,t,r)})),r.promise}function VR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const TO=new Map;function BR(n,e,t){if(!t)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CO(n,e,t,r){if(!0===e&&!0===r)throw new Ue(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DO(n){if(!ot.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SO(n){if(ot.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pE(n);throw new Ue(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AO(n,e){if(e<=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RO{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=VR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ue(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ue(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ue(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Yk;switch(t.type){case"firstParty":return new cS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=TO.get(e);t&&($e("ComponentProvider","Removing Datastore"),TO.delete(e),t.terminate())}(this),Promise.resolve()}}class wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class s extends bs{constructor(e,t,r){super(e,t,Ea(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new ot(e))}withConverter(e){return new s(this.firestore,e,this._path)}}function a(n,e,...t){if(n=(0,O.m9)(n),BR("collection","path",e),n instanceof gE){const r=Rn.fromString(e,...t);return SO(r),new s(n,null,r)}{if(!(n instanceof wr||n instanceof s))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return SO(r),new s(n.firestore,null,r)}}function u(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=PI.A()),BR("doc","path",e),n instanceof gE){const r=Rn.fromString(e,...t);return DO(r),new wr(n,null,new ot(r))}{if(!(n instanceof wr||n instanceof s))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return DO(r),new wr(n.firestore,n instanceof s?n.converter:null,new ot(r))}}function h(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof wr||n instanceof s)&&(e instanceof wr||e instanceof s)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function g(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof bs&&e instanceof bs&&n.firestore===e.firestore&&mv(n._query,e._query)&&n.converter===e.converter}class v{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new oR(this,"async_queue_retry"),this.Xc=()=>{const t=$m();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=$m();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=$m();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Kr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,te.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!cu(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,qr("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Qv.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&gt()}verifyOperationInProgress(){}sa(){var e=this;return(0,te.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function w(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class C{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class P extends gE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new v,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Se(this),this._firestoreClient.terminate()}}function ie(n){return n._firestoreClient||Se(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Se(n){var e,t,r;const i=n._freezeSettings(),o=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new SS(n._databaseId,d,n._persistenceKey,(_=i).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,VR(_.experimentalLongPollingOptions),_.useFetchStreams));var d,_;n._firestoreClient=new _O(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function At(n,e,t){const r=new Kr;return n.asyncQueue.enqueue((0,te.Z)(function*(){try{yield uE(n,t),yield Rb(n,e),r.resolve()}catch(i){const o=i;if(!xb(o))throw o;Ho("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function mE(n){if(n._initialized||n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ku(wi.fromBase64String(e))}catch(t){throw new Ue(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ku(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class t_{constructor(e){this._methodName=e}}class jR{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const xG=/^__.*__$/;class MG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fl(e,this.data,this.fieldMask,t,this.fieldTransforms):new rp(e,this.data,t,this.fieldTransforms)}}class yU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class HR{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new HR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return GR(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(vU(this.ca)&&xG.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class kG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hv(e)}ya(e,t,r,i=!1){return new HR({ca:e,methodName:t,ga:r,path:yr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function n_(n){const e=n._freezeSettings(),t=Hv(n._databaseId);return new kG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $R(n,e,t,r,i,o={}){const l=n.ya(o.merge||o.mergeFields?2:0,e,t,i);NO("Data must be an object, but it was:",l,r);const d=IU(r,l);let f,_;if(o.merge)f=new xr(l.fieldMask),_=l.fieldTransforms;else if(o.mergeFields){const E=[];for(const D of o.mergeFields){const k=Nb(e,D,t);if(!l.contains(k))throw new Ue(ye.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);TU(E,k)||E.push(k)}f=new xr(E),_=l.fieldTransforms.filter(D=>f.covers(D.field))}else f=null,_=l.fieldTransforms;return new MG(new fs(d),f,_)}class Ob extends t_{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ob}}function EU(n,e,t){return new HR({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kO extends t_{_toFieldTransform(e){return new np(e.path,new tp)}isEqual(e){return e instanceof kO}}class PG extends t_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=EU(this,e,!0),r=this.pa.map(o=>r_(o,t)),i=new _u(r);return new np(e.path,i)}isEqual(e){return this===e}}class OG extends t_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=EU(this,e,!0),r=this.pa.map(o=>r_(o,t)),i=new Xd(r);return new np(e.path,i)}isEqual(e){return this===e}}class NG extends t_{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Em(e.serializer,YS(e.serializer,this.Ia));return new np(e.path,t)}isEqual(e){return this===e}}function PO(n,e,t,r){const i=n.ya(1,e,t);NO("Data must be an object, but it was:",i,r);const o=[],l=fs.empty();Jl(r,(f,_)=>{const E=zR(e,f,t);_=(0,O.m9)(_);const D=i.da(E);if(_ instanceof Ob)o.push(E);else{const k=r_(_,D);null!=k&&(o.push(E),l.set(E,k))}});const d=new xr(o);return new yU(l,d,i.fieldTransforms)}function OO(n,e,t,r,i,o){const l=n.ya(1,e,t),d=[Nb(e,r,t)],f=[i];if(o.length%2!=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<o.length;k+=2)d.push(Nb(e,o[k])),f.push(o[k+1]);const _=[],E=fs.empty();for(let k=d.length-1;k>=0;--k)if(!TU(_,d[k])){const V=d[k];let z=f[k];z=(0,O.m9)(z);const ee=l.da(V);if(z instanceof Ob)_.push(V);else{const de=r_(z,ee);null!=de&&(_.push(V),E.set(V,de))}}const D=new xr(_);return new yU(E,D,l.fieldTransforms)}function wU(n,e,t,r=!1){return r_(t,n.ya(r?4:3,e))}function r_(n,e){if(bU(n=(0,O.m9)(n)))return NO("Unsupported field value:",e,n),IU(n,e);if(n instanceof t_)return function(t,r){if(!vU(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let d=r_(l,r.wa(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return YS(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=_r.fromDate(t);return{timestampValue:op(r.serializer,i)}}if(t instanceof _r){const i=new _r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:op(r.serializer,i)}}if(t instanceof jR)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ku)return{bytesValue:Tv(r.serializer,t._byteString)};if(t instanceof wr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${pE(t)}`)}(n,e)}function IU(n,e){const t={};return uP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jl(n,(r,i)=>{const o=r_(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function bU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _r||n instanceof jR||n instanceof ku||n instanceof wr||n instanceof t_)}function NO(n,e,t){if(!bU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=pE(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Nb(n,e,t){if((e=(0,O.m9)(e))instanceof dh)return e._internalPath;if("string"==typeof e)return zR(n,e);throw GR("Field path arguments must be of type string or ",n,!1,void 0,t)}const LG=new RegExp("[~\\*/\\[\\]]");function zR(n,e,t){if(e.search(LG)>=0)throw GR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dh(...e.split("."))._internalPath}catch{throw GR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GR(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Ue(ye.INVALID_ARGUMENT,d+n+f)}function TU(n,e){return n.some(t=>t.isEqual(e))}class Lb{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new FG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WR("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class FG extends Lb{data(){return super.data()}}function WR(n,e){return"string"==typeof e?zR(n,e):e instanceof dh?e._internalPath:e._delegate._internalPath}function CU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LO{}class Fb extends LO{}function wp(n,e,...t){let r=[];e instanceof LO&&r.push(e),r=r.concat(t),function(i){const o=i.filter(d=>d instanceof _E).length,l=i.filter(d=>d instanceof Ub).length;if(o>1||o>0&&l>0)throw new Ue(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ub extends Fb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ub(e,t,r)}_apply(e){const t=this._parse(e);return RU(e._query,t),new bs(e.firestore,e.converter,Jf(e._query,t))}_parse(e){const t=n_(e.firestore);return function(i,o,l,d,f,_,E){let D;if(f.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){AU(E,_);const k=[];for(const V of E)k.push(SU(d,i,V));D={arrayValue:{values:k}}}else D=SU(d,i,E)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||AU(E,_),D=wU(l,"where",E,"in"===_||"not-in"===_);return In.create(f,_,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class _E extends LO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _E(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const d of l)RU(o,d),o=Jf(o,d)}(e._query,t),new bs(e.firestore,e.converter,Jf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class FO extends Fb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new FO(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Yf(i,o);return function(d,f){if(null===a0(d)){const _=gv(d);null!==_&&xU(0,_,f.field)}}(r,l),l}(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ul(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qR extends Fb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new qR(e,t,r)}_apply(e){return new bs(e.firestore,e.converter,ps(e._query,this._limit,this._limitType))}}class KR extends Fb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new KR(e,t,r)}_apply(e){const t=DU(e,this.type,this._docOrFields,this._inclusive);return new bs(e.firestore,e.converter,(i=t,new ul((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class ZR extends Fb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ZR(e,t,r)}_apply(e){const t=DU(e,this.type,this._docOrFields,this._inclusive);return new bs(e.firestore,e.converter,(i=t,new ul((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function DU(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof Lb)return function(i,o,l,d,f){if(!d)throw new Ue(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const _=[];for(const E of Yd(i))if(E.field.isKeyField())_.push(rc(o,d.key));else{const D=d.data.field(E.field);if(qf(D))throw new Ue(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const k=E.field.canonicalString();throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}_.push(D)}return new pu(_,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=n_(n.firestore);return function(o,l,d,f,_,E){const D=o.explicitOrderBy;if(_.length>D.length)throw new Ue(ye.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let V=0;V<_.length;V++){const z=_[V];if(D[V].field.isKeyField()){if("string"!=typeof z)throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof z}`);if(!gu(o)&&-1!==z.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${z}' contains a slash.`);const ee=o.path.child(Rn.fromString(z));if(!ot.isDocumentKey(ee))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const de=new ot(ee);k.push(rc(l,de))}else{const ee=wU(d,f,z);k.push(ee)}}return new pu(k,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function SU(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gu(e)&&-1!==t.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rn.fromString(t));if(!ot.isDocumentKey(r))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rc(n,new ot(r))}if(t instanceof wr)return rc(n,t._key);throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pE(t)}.`)}function AU(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RU(n,e){if(e.isInequality()){const r=gv(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=a0(n);null!==o&&xU(0,i,o)}const t=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ue(ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function xU(n,e,t){if(!t.isEqual(e))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class UO{convertValue(e,t="none"){switch(tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new jR(Zr(e.latitude),Zr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=du(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pm(e));default:return null}}convertTimestamp(e){const t=uu(e);return new _r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rn.fromString(e);St(xP(r));const i=new hu(r.get(1),r.get(3)),o=new ot(r.popFirst(5));return i.isEqual(t)||qr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function YR(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class WG extends UO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}class i_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hh extends Lb{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(WR("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vb extends hh{data(e={}){return super.data(e)}}class Ip{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new i_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vb(this._firestore,this._userDataWriter,r.key,r,new i_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Vb(r._firestore,r._userDataWriter,l.doc.key,l.doc,new i_(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new Vb(r._firestore,r._userDataWriter,l.doc.key,l.doc,new i_(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return 0!==l.type&&(f=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),_=o.indexOf(l.doc.key)),{type:KG(l.type),doc:d,oldIndex:f,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function KG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function kU(n,e){return n instanceof hh&&e instanceof hh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ip&&e instanceof Ip&&n._firestore===e._firestore&&g(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class bp extends UO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function PU(n,e,t){n=Cn(n,wr);const r=Cn(n.firestore,P),i=YR(n.converter,e,t);return yE(r,[$R(n_(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Mr.none())])}function OU(n,e,t,...r){n=Cn(n,wr);const i=Cn(n.firestore,P),o=n_(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof dh?OO(o,"updateDoc",n._key,e,t,r):PO(o,"updateDoc",n._key,e),yE(i,[l.toMutation(n._key,Mr.exists(!0))])}function NU(n,...e){var t,r,i;n=(0,O.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||w(e[l])||(o=e[l],l++);const d={includeMetadataChanges:o.includeMetadataChanges};if(w(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let f,_,E;if(n instanceof wr)_=Cn(n.firestore,P),E=Ea(n._key.path),f={next:D=>{e[l]&&e[l](VO(_,n,D))},error:e[l+1],complete:e[l+2]};else{const D=Cn(n,bs);_=Cn(D.firestore,P),E=D._query;const k=new bp(_);f={next:V=>{e[l]&&e[l](new Ip(_,k,D,V))},error:e[l+1],complete:e[l+2]},CU(n._query)}return function(D,k,V,z){const ee=new cE(z),de=new db(k,ee,V);return D.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return Wm(yield ac(D),de)})),()=>{ee.Dc(),D.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return cb(yield ac(D),de)}))}}(ie(_),E,d,f)}function yE(n,e){return function(t,r){const i=new Kr;return t.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function TR(n,e,t){return mb.apply(this,arguments)}(yield fE(t),r,i)})),i.promise}(ie(n),e)}function VO(n,e,t){const r=t.docs.get(e._key),i=new bp(n);return new hh(n,i,e._key,r,new i_(t.hasPendingWrites,t.fromCache),e.converter)}const hW={maxAttempts:5};class LU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=n_(e)}set(e,t,r){this._verifyNotCommitted();const i=Tp(e,this._firestore),o=YR(i.converter,t,r),l=$R(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Mr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Tp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof dh?OO(this._dataReader,"WriteBatch.update",o._key,t,r,i):PO(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,Mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tp(e,this._firestore);return this._mutations=this._mutations.concat(new sp(t._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tp(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ue(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=n_(e)}get(e){const t=Tp(e,this._firestore),r=new WG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return gt();const o=i[0];if(o.isFoundDocument())return new Lb(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Lb(this._firestore,r,t._key,null,t.converter);throw gt()})}set(e,t,r){const i=Tp(e,this._firestore),o=YR(i.converter,t,r),l=$R(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=Tp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof dh?OO(this._dataReader,"Transaction.update",o._key,t,r,i):PO(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=Tp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Tp(e,this._firestore),r=new bp(this._firestore);return super.get(e).then(i=>new hh(this._firestore,r,t._key,i._document,new i_(!1,!1),t.converter))}}function BO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function UU(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function VU(){if(!function DS(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ol=ru.SDK_VERSION,(0,ru._registerComponent)(new gr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new P(new kI(t.getProvider("auth-internal")),new Jk(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ue(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(d.options.projectId,f)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ru.registerVersion)(aS,"3.13.0",n),(0,ru.registerVersion)(aS,"3.13.0","esm2017")}();class Bb{constructor(e){this._delegate=e}static fromBase64String(e){return VU(),new Bb(ku.fromBase64String(e))}static fromUint8Array(e){return UU(),new Bb(ku.fromUint8Array(e))}toBase64(){return VU(),this._delegate.toBase64()}toUint8Array(){return UU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jO(n){return function IW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bW{enableIndexedDbPersistence(e,t){return function We(n,e){mE(n=Cn(n,P));const t=ie(n);if(t._uninitializedComponentsProvider)throw new Ue(ye.FAILED_PRECONDITION,"SDK cache is already specified.");Ho("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new uh;return At(t,i,new Xm(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dt(n){mE(n=Cn(n,P));const e=ie(n);if(e._uninitializedComponentsProvider)throw new Ue(ye.FAILED_PRECONDITION,"SDK cache is already specified.");Ho("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new uh;return At(e,r,new gO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ve(n){if(n._initialized&&!n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{yield(t=(0,te.Z)(function*(r){if(!$o.D())return Promise.resolve();const i=r+"main";yield $o.delete(i)}),function(r){return t.apply(this,arguments)})(G0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ho("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xO(n,e,t,r={}){var i;const o=(n=Cn(n,gE))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==l&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Ei.MOCK_USER;else{d=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ue(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ei(_)}n._authCredentials=new Qk(new Zk(d,f))}}(this._delegate,e,t,r)}enableNetwork(){return function on(n){return function yO(n){return n.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield NR(n),t=yield kb(n);return e.setNetworkEnabled(!0),function(r){const i=ut(r);return i.vu.delete(0),ah(i)}(t)}))}(ie(n=Cn(n,P)))}(this._delegate)}disableNetwork(){return function Kn(n){return function FR(n){return n.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield NR(n),t=yield kb(n);return e.setNetworkEnabled(!1),(r=(0,te.Z)(function*(i){const o=ut(i);o.vu.add(0),yield pp(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ie(n=Cn(n,P)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function zt(n){return function(e){const t=new Kr;return e.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function aO(n,e){return vb.apply(this,arguments)}(yield fE(e),t)})),t.promise}(ie(n=Cn(n,P)))}(this._delegate)}onSnapshotsInSync(e){return function rW(n,e){return function IO(n,e){const t=new cE(e);return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return r=yield ac(n),i=t,ut(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return r=yield ac(n),i=t,void ut(r).ku.delete(i);var r,i}))}}(ie(n=Cn(n,P)),w(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vE(this,a(this._delegate,e))}catch(t){throw bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new gl(this,u(this._delegate,e))}catch(t){throw bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new To(this,function c(n,e){if(n=Cn(n,gE),BR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bs(n,null,(t=e,new ul(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pW(n,e,t){n=Cn(n,P);const r=Object.assign(Object.assign({},hW),t);return function(i){if(i.maxAttempts<1)throw new Ue(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const d=new Kr;return i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){const f=yield function LR(n){return Jm(n).then(e=>e.datastore)}(i);new gU(i.asyncQueue,f,l,o,d).run()})),d.promise}(ie(n),i=>e(new fW(n,i)),r)}(this._delegate,t=>e(new jU(this,t)))}batch(){return ie(this._delegate),new HU(new LU(this._delegate,e=>yE(this._delegate,e)))}loadBundle(e){return function lc(n,e){const t=ie(n=Cn(n,P)),r=new C;return function mU(n,e,t,r){const i=function(o,l){let d;return d="string"==typeof o?iA().encode(o):o,f=function(f,_){if(f instanceof Uint8Array)return lE(f,_);if(f instanceof ArrayBuffer)return lE(new Uint8Array(f),_);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new mO(f,l);var f}(t,Hv(e));n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){!function pO(n,e,t){const r=ut(n);var i;(i=(0,te.Z)(function*(o,l,d){try{const f=yield l.getMetadata();if(yield function(k,V){const z=ut(k),ee=Qr(V.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",de=>z.qs.getBundleMetadata(de,V.id)).then(de=>!!de&&de.createTime.compareTo(ee)>=0)}(o.localStore,f))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(k=f).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);d._updateProgress(fb(f));const _=new uU(f,o.localStore,l.serializer);let E=yield l.bc();for(;E;){const k=yield _.zu(E);k&&d._updateProgress(k),E=yield l.bc()}const D=yield _.complete();return yield Wo(o,D.Ju,void 0),yield function(k,V){const z=ut(k);return z.persistence.runTransaction("Save bundle","readwrite",ee=>z.qs.saveBundleMetadata(ee,V))}(o.localStore,f),d._completeWith(D.progress),Promise.resolve(D.Hu)}catch(f){return Ho("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var k}),function(o,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield fE(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Ep(n,e){return function _U(n,e){return n.asyncQueue.enqueue((0,te.Z)(function*(){return function(t,r){const i=ut(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield vp(n),e)}))}(ie(n=Cn(n,P)),e).then(t=>t?new bs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new To(this,t):null)}}class QR extends UO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bb(new ku(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return gl.forKey(t,this.firestore,null)}}class jU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new QR(e)}get(e){const t=o_(e);return this._delegate.get(t).then(r=>new jb(this._firestore,new hh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=o_(e);return r?(BO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=o_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=o_(e);return this._delegate.delete(t),this}}class HU{constructor(e){this._delegate=e}set(e,t,r){const i=o_(e);return r?(BO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=o_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=o_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class s_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=s_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new s_(e,new QR(e),t),i.set(t,o)),o}}s_.INSTANCES=new WeakMap;class gl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QR(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gl(t,new wr(t._delegate,r,new ot(e)))}static forKey(e,t,r){return new gl(t,new wr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vE(this.firestore,a(this._delegate,e))}catch(t){throw bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof wr&&h(this._delegate,e)}set(e,t){t=BO("DocumentReference.set",t);try{return t?PU(this._delegate,e,t):PU(this._delegate,e)}catch(r){throw bo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?OU(this._delegate,e):OU(this._delegate,e,t,...r)}catch(i){throw bo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function tW(n){return yE(Cn(n.firestore,P),[new sp(n._key,Mr.none())])}(this._delegate)}onSnapshot(...e){const t=$U(e),r=zU(e,i=>new jb(this.firestore,new hh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return NU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function YG(n){n=Cn(n,wr);const e=Cn(n.firestore,P),t=ie(e),r=new bp(e);return function UR(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(r=(0,te.Z)(function*(i,o,l){try{const d=yield function(f,_){const E=ut(f);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,_))}(i,o);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Ue(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=yp(d,`Failed to get document '${o} from cache`);l.reject(f)}}),function(i,o,l){return r.apply(this,arguments)})(yield vp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new hh(e,r,n._key,i,new i_(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function QG(n){n=Cn(n,wr);const e=Cn(n.firestore,P);return vO(ie(e),n._key,{source:"server"}).then(t=>VO(e,n,t))}(this._delegate):function ZG(n){n=Cn(n,wr);const e=Cn(n.firestore,P);return vO(ie(e),n._key).then(t=>VO(e,n,t))}(this._delegate),t.then(r=>new jb(this.firestore,new hh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new gl(this.firestore,this._delegate.withConverter(e?s_.getInstance(this.firestore,e):null))}}function bo(n,e,t){return n.message=n.message.replace(e,t),n}function $U(n){for(const e of n)if("object"==typeof e&&!jO(e))return e;return{}}function zU(n,e){var t,r;let i;return i=jO(n[0])?n[0]:jO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kU(this._delegate,e._delegate)}}class Hb extends jb{data(e){const t=this._delegate.data(e);return function Kk(n,e){n||gt()}(void 0!==t),t}}class To{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QR(e)}where(e,t,r){try{return new To(this.firestore,wp(this._delegate,function UG(n,e,t){const r=e,i=WR("where",n);return Ub._create(i,r,t)}(e,t,r)))}catch(i){throw bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new To(this.firestore,wp(this._delegate,function VG(n,e="asc"){const t=e,r=WR("orderBy",n);return FO._create(r,t)}(e,t)))}catch(r){throw bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new To(this.firestore,wp(this._delegate,function BG(n){return AO("limit",n),qR._create("limit",n,"F")}(e)))}catch(t){throw bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new To(this.firestore,wp(this._delegate,function jG(n){return AO("limitToLast",n),qR._create("limitToLast",n,"L")}(e)))}catch(t){throw bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new To(this.firestore,wp(this._delegate,function HG(...n){return KR._create("startAt",n,!0)}(...e)))}catch(t){throw bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new To(this.firestore,wp(this._delegate,function $G(...n){return KR._create("startAfter",n,!1)}(...e)))}catch(t){throw bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new To(this.firestore,wp(this._delegate,function zG(...n){return ZR._create("endBefore",n,!1)}(...e)))}catch(t){throw bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new To(this.firestore,wp(this._delegate,function GG(...n){return ZR._create("endAt",n,!0)}(...e)))}catch(t){throw bo(t,"endAt()","Query.endAt()")}}isEqual(e){return g(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function JG(n){n=Cn(n,bs);const e=Cn(n.firestore,P),t=ie(e),r=new bp(e);return function EO(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(r=(0,te.Z)(function*(i,o,l){try{const d=yield Bm(i,o,!0),f=new iO(o,d.ir),_=f.sc(d.documents),E=f.applyChanges(_,!1);l.resolve(E.snapshot)}catch(d){const f=yp(d,`Failed to execute query '${o} against cache`);l.reject(f)}}),function(i,o,l){return r.apply(this,arguments)})(yield vp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ip(e,r,n,i))}(this._delegate):"server"===e?.source?function eW(n){n=Cn(n,bs);const e=Cn(n.firestore,P),t=ie(e),r=new bp(e);return wO(t,n._query,{source:"server"}).then(i=>new Ip(e,r,n,i))}(this._delegate):function XG(n){n=Cn(n,bs);const e=Cn(n.firestore,P),t=ie(e),r=new bp(e);return CU(n._query),wO(t,n._query).then(i=>new Ip(e,r,n,i))}(this._delegate),t.then(r=>new HO(this.firestore,new Ip(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$U(e),r=zU(e,i=>new HO(this.firestore,new Ip(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return NU(this._delegate,t,r)}withConverter(e){return new To(this.firestore,this._delegate.withConverter(e?s_.getInstance(this.firestore,e):null))}}class CW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new To(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Hb(this._firestore,r))})}isEqual(e){return kU(this._delegate,e._delegate)}}class vE extends To{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gl(this.firestore,e):null}doc(e){try{return new gl(this.firestore,void 0===e?u(this._delegate):u(this._delegate,e))}catch(t){throw bo(t,"doc()","CollectionReference.doc()")}}add(e){return function nW(n,e){const t=Cn(n.firestore,P),r=u(n),i=YR(n.converter,e);return yE(t,[$R(n_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new gl(this.firestore,t))}isEqual(e){return h(this._delegate,e._delegate)}withConverter(e){return new vE(this.firestore,this._delegate.withConverter(e?s_.getInstance(this.firestore,e):null))}}function o_(n){return Cn(n,wr)}class $O{constructor(...e){this._delegate=new dh(...e)}static documentId(){return new $O(yr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof dh&&this._delegate._internalPath.isEqual(e._internalPath)}}class a_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mW(){return new kO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new a_(e)}static delete(){const e=function gW(){return new Ob("deleteField")}();return e._methodName="FieldValue.delete",new a_(e)}static arrayUnion(...e){const t=function _W(...n){return new PG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new a_(t)}static arrayRemove(...e){const t=function yW(...n){return new OG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new a_(t)}static increment(e){const t=function vW(n){return new NG("increment",n)}(e);return t._methodName="FieldValue.increment",new a_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DW={Firestore:BU,GeoPoint:jR,Timestamp:_r,Blob:Bb,Transaction:jU,WriteBatch:HU,DocumentReference:gl,DocumentSnapshot:jb,Query:To,QueryDocumentSnapshot:Hb,QuerySnapshot:HO,CollectionReference:vE,FieldPath:$O,FieldValue:a_,setLogLevel:function TW(n){!function lS(n){al.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function GU(n,e){return function RW(n,e=bg.z){return new oi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function zO(n,e){return GU(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function XR(n,e){return zO(n,e).pipe(Ja(void 0),ZC(),(0,Et.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const f=i.find(E=>E.doc.ref.isEqual(l.ref)),_=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),o}))}function WU(n,e,t){return XR(n,t).pipe(el((r,i)=>function MW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function kW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),(0,Yw.x)(),(0,Et.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function GO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function qU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function AW(n){(function SW(n,e){n.INTERNAL.registerComponent(new gr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},DW)))})(n,(e,t)=>new BU(e,t,new bW)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(YC.Z);class KU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=XR(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ja(void 0),ZC(),rr(([r,i])=>i.length>0||!r),(0,Et.U)(([r,i])=>i),$t.iC)}auditTrail(e){return this.stateChanges(e).pipe(el((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qU(e);return WU(this.query,t,this.afs.schedulers.outsideAngular).pipe($t.iC)}valueChanges(e={}){return zO(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),$t.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe($t.iC)}add(e){return this.ref.add(e)}doc(e){return new ZU(this.ref.doc(e),this.afs)}}class ZU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=XU(r,t);return new KU(i,o,this.afs)}snapshotChanges(){return function xW(n,e){return GU(n,e).pipe(Ja(void 0),ZC(),(0,Et.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($t.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pn.D)(this.ref.get(e)).pipe($t.iC)}}class PW{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?XR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),rr(t=>t.length>0),$t.iC):XR(this.query,this.afs.schedulers.outsideAngular).pipe($t.iC)}auditTrail(e){return this.stateChanges(e).pipe(el((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qU(e);return WU(this.query,t,this.afs.schedulers.outsideAngular).pipe($t.iC)}valueChanges(e={}){return zO(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),$t.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe($t.iC)}}const YU=new p.OlP("angularfire2.enableFirestorePersistence"),QU=new p.OlP("angularfire2.firestore.persistenceSettings"),OW=new p.OlP("angularfire2.firestore.settings"),NW=new p.OlP("angularfire2.firestore.use-emulator");function XU(n,e=(t=>t)){return{query:e(n),ref:n}}let JU=(()=>{class n{constructor(t,r,i,o,l,d,f,_,E,D,k,V,z,ee,de,je,Ke){this.schedulers=f;const qe=(0,er.on)(t,d,r),Je=E;D&&Ig(qe,d,k,z,ee,de,V,je),[this.firestore,this.persistenceEnabled$]=(0,er.cc)(`${qe.name}.firestore`,"AngularFirestore",qe.name,()=>{const Ot=d.runOutsideAngular(()=>qe.firestore());if(o&&Ot.settings(o),Je&&Ot.useEmulator(...Je),i&&!Ji(l)){const Nt=()=>{try{return(0,Pn.D)(Ot.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(vn){return typeof console<"u"&&console.warn(vn),(0,It.of)(!1)}};return[Ot,d.runOutsideAngular(Nt)]}return[Ot,(0,It.of)(!1)]},[o,Je,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=XU(i,r),d=this.schedulers.ngZone.run(()=>o);return new KU(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),o=this.firestore.collectionGroup(t);return new PW(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ZU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(er.Dh),p.LFG(er.xv,8),p.LFG(YU,8),p.LFG(OW,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(QU,8),p.LFG(NW,8),p.LFG(af,8),p.LFG(rf,8),p.LFG(sf,8),p.LFG(uw,8),p.LFG(dw,8),p.LFG(hw,8),p.LFG(oy,8),p.LFG(yg,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LW=(()=>{class n{constructor(){wg.Z.registerVersion("angularfire",$t.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:YU,useValue:!0},{provide:QU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[JU]}),n})();var EE=U(4829),eV=U(2420);const tV="@firebase/database";let WO="";function rV(n){WO=n}class VW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class BW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const iV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new VW(e)}}catch{}return new BW},l_=iV("localStorage"),qO=iV("sessionStorage"),wE=new zr.Yd("@firebase/database"),sV=function(){let n=1;return function(){return n++}}(),oV=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},$b=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=$b.apply(null,r):e+="object"==typeof r?(0,O.Wl)(r):r,e+=" "}return e};let c_=null,aV=!0;const lV=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(wE.logLevel=zr.in.VERBOSE,c_=wE.log.bind(wE),e&&qO.set("logging_enabled",!0)):"function"==typeof n?c_=n:(c_=null,qO.remove("logging_enabled"))},Ts=function(...n){if(!0===aV&&(aV=!1,null===c_&&!0===qO.get("logging_enabled")&&lV(!0)),c_){const e=$b.apply(null,n);c_(e)}},zb=function(n){return function(...e){Ts(n,...e)}},KO=function(...n){const e="FIREBASE INTERNAL ERROR: "+$b(...n);wE.error(e)},Pu=function(...n){const e=`FIREBASE FATAL ERROR: ${$b(...n)}`;throw wE.error(e),new Error(e)},so=function(...n){const e="FIREBASE WARNING: "+$b(...n);wE.warn(e)},JR=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Cp="[MIN_NAME]",fh="[MAX_NAME]",u_=function(n,e){if(n===e)return 0;if(n===Cp||e===fh)return-1;if(e===Cp||n===fh)return 1;{const t=dV(n),r=dV(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},$W=function(n,e){return n===e?0:n<e?-1:1},Gb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},ZO=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Wl)(e[r]),t+=":",t+=ZO(n[e[r]]);return t+="}",t},cV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Cs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uV=function(n){(0,O.hu)(!JR(n),"Invalid JSON number");const r=1023;let i,o,l,d,f;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(f=52;f;f-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(f=11;f;f-=1)_.push(o%2?1:0),o=Math.floor(o/2);_.push(i?1:0),_.reverse();const E=_.join("");let D="";for(f=0;f<64;f+=8){let k=parseInt(E.substr(f,8),2).toString(16);1===k.length&&(k="0"+k),D+=k}return D.toLowerCase()},qW=new RegExp("^-?(0*)\\d{1,10}$"),dV=function(n){if(qW.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},IE=function(n){try{n()}catch(e){setTimeout(()=>{throw so("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Wb=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class QW{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){so(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XW{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ts("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',so(e)}}let qb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vV="websocket",EV="long_polling";class QO{constructor(e,t,r,i,o=!1,l="",d=!1,f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=l_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&l_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function wV(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===vV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==EV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function JW(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Cs(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class e3{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const XO={},JO={};function eN(n){const e=n.toString();return XO[e]||(XO[e]=new e3),XO[e]}class n3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&IE(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Dp{constructor(e,t,r,i,o,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zb(e),this.stats_=eN(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),wV(t,EV,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new n3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tN((...o)=>{const[l,d,f,_,E]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=f;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&mV.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Dp.forceAllow_=!0}static forceDisallow(){Dp.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Dp.forceAllow_&&(Dp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=cV(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class tN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=tN.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Ts("frame writing exception"),d.stack&&Ts(d.stack),Ts(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ts("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ts("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let tx=null;typeof MozWebSocket<"u"?tx=MozWebSocket:typeof WebSocket<"u"&&(tx=WebSocket);let bE=(()=>{class n{constructor(t,r,i,o,l,d,f){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zb(this.connId),this.stats_=eN(r),this.connURL=n.connectionURL_(r,d,f,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){const d={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&mV.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),o&&(d.ac=o),l&&(d.p=l),wV(t,vV,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,l_.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${WO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new tx(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==tx&&!n.forceDisallow_}static previouslyFailed(){return l_.isInMemoryStorage||!0===l_.get("previous_websocket_failure")}markConnectionHealthy(){l_.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),AV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Dp,bE]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=bE&&bE.isAvailable();let i=r&&!bE.previouslyFailed();if(t.webSocketOnly&&(r||so("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[bE];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class NV{constructor(e,t,r,i,o,l,d,f,_,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zb("c:"+this.id+":"),this.transportManager_=new AV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Gb("t",e),r=Gb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Gb("t",e),r=Gb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Gb("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?KO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&so("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Wb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(l_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class LV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class FV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nx extends FV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nx}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Qn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function $n(){return new Qn("")}function _n(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Sp(n){return n.pieces_.length-n.pieceNum_}function Ir(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Qn(n.pieces_,e)}function rN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Kb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function BV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Qn(e,0)}function Xr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Qn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Qn(t,0)}function yn(n){return n.pieceNum_>=n.pieces_.length}function Co(n,e){const t=_n(n),r=_n(e);if(null===t)return e;if(t===r)return Co(Ir(n),Ir(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function C3(n,e){const t=Kb(n,0),r=Kb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=u_(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function iN(n,e){if(Sp(n)!==Sp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ml(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Sp(n)>Sp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class D3{constructor(e,t){this.errorPrefix_=t,this.parts_=Kb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);jV(this)}}function jV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+d_(n))}function d_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class sN extends FV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new sN}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Zb=1e3;let ix,h_=(()=>{class n extends LV{constructor(t,r,i,o,l,d,f,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=zb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nx.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,O.Wl)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new O.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?r.resolve(f):r.reject(f)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,f=>{const _=f.d,E=f.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",f),"ok"!==E&&this.removeListen_(i,o),t.onComplete&&t.onComplete(E,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();so(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,d=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):KO("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Zb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,_=null;const E=function(){_?_.close():(f=!0,o())};t.realtime_={close:E,sendRequest:function(V){(0,O.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(V)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,z]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);f?Ts("getToken() completed but was canceled"):(Ts("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=z&&z.token,_=new NV(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,ee=>{so(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(V){t.log_("Failed to get token: "+V),f||(t.repoInfo_.nodeAdmin&&so(V),E())}}})()}interrupt(t){Ts("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ts("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Zb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ZO(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Qn(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Ts("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ts("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+WO.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=nx.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class bn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new bn(e,t)}}class rx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new bn(Cp,e),i=new bn(Cp,t);return 0!==this.compare(r,i)}minPost(){return bn.MIN}}class zV extends rx{static get __EMPTY_NODE(){return ix}static set __EMPTY_NODE(e){ix=e}compare(e,t){return u_(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return bn.MIN}maxPost(){return new bn(fh,ix)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new bn(e,ix)}toString(){return".key"}}const Ou=new zV;class sx{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let aN,cc=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??qo.EMPTY_NODE,this.right=l??qo.EMPTY_NODE}copy(t,r,i,o,l){return new n(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return qo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return qo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class qo{constructor(e,t=qo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new qo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cc.BLACK,null,null))}remove(e){return new qo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sx(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sx(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sx(this.root_,null,this.comparator_,!0,e)}}function O3(n,e){return u_(n.name,e.name)}function oN(n,e){return u_(n,e)}qo.EMPTY_NODE=new class P3{copy(e,t,r,i,o){return this}insert(e,t,r){return new cc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const GV=function(n){return"number"==typeof n?"number:"+uV(n):"string:"+n},WV=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===aN||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===aN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qV,KV,ZV,TE=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),WV(this.priorityNode_)}static set __childrenNodeConstructor(t){qV=t}static get __childrenNodeConstructor(){return qV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return yn(t)?this:".priority"===_n(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=_n(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===Sp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ir(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+GV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?uV(this.value_):this.value_,this.lazyHash_=oV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(o>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const kr=new class U3 extends rx{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?u_(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return bn.MIN}maxPost(){return new bn(fh,new TE("[PRIORITY-POST]",ZV))}makePost(e,t){const r=KV(e);return new bn(t,new TE("[PRIORITY-POST]",r))}toString(){return".priority"}},V3=Math.log(2);class B3{constructor(e){this.count=parseInt(Math.log(e+1)/V3,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ox=function(n,e,t,r){n.sort(e);const i=function(f,_){const E=_-f;let D,k;if(0===E)return null;if(1===E)return D=n[f],k=t?t(D):D,new cc(k,D.node,cc.BLACK,null,null);{const V=parseInt(E/2,10)+f,z=i(f,V),ee=i(V+1,_);return D=n[V],k=t?t(D):D,new cc(k,D.node,cc.BLACK,z,ee)}},d=function(f){let _=null,E=null,D=n.length;const k=function(z,ee){const de=D-z,je=D;D-=z;const Ke=i(de+1,je),qe=n[de],Je=t?t(qe):qe;V(new cc(Je,qe.node,ee,null,Ke))},V=function(z){_?(_.left=z,_=z):(E=z,_=z)};for(let z=0;z<f.count;++z){const ee=f.nextBitIsOne(),de=Math.pow(2,f.count-(z+1));ee?k(de,cc.BLACK):(k(de,cc.BLACK),k(de,cc.RED))}return E}(new B3(n.length));return new qo(r||e,d)};let lN;const CE={};class ph{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(CE&&kr,"ChildrenNode.ts has not been loaded"),lN=lN||new ph({".priority":CE},{".priority":kr}),lN}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qo?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==Ou,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(bn.Wrap);let d,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();d=i?ox(r,e.getCompare()):CE;const f=e.toString(),_=Object.assign({},this.indexSet_);_[f]=e;const E=Object.assign({},this.indexes_);return E[f]=d,new ph(E,_)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,o)=>{const l=(0,O.DV)(this.indexSet_,o);if((0,O.hu)(l,"Missing index implementation for "+o),i===CE){if(l.isDefinedOn(e.node)){const d=[],f=t.getIterator(bn.Wrap);let _=f.getNext();for(;_;)_.name!==e.name&&d.push(_),_=f.getNext();return d.push(e),ox(d,l.getCompare())}return CE}{const d=t.get(e.name);let f=i;return d&&(f=f.remove(new bn(e.name,d))),f.insert(e,e.node)}});return new ph(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===CE)return i;{const o=t.get(e.name);return o?i.remove(new bn(e.name,o)):i}});return new ph(r,this.indexSet_)}}let Yb,tn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&WV(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yb||(Yb=new n(new qo(oN),null,ph.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Yb:r}}getChild(t){const r=_n(t);return null===r?this:this.getImmediateChild(r).getChild(Ir(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new bn(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?Yb:this.priorityNode_;return new n(o,d,l)}}updateChild(t,r){const i=_n(t);if(null===i)return r;{(0,O.hu)(".priority"!==_n(t)||1===Sp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Ir(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(kr,(d,f)=>{r[d]=f.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):l=!1}),!t&&l&&o<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+GV(this.getPriority().val())+":"),this.forEachChild(kr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":oV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new bn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new bn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new bn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,bn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,bn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qb?-1:0}withIndex(t){if(t===Ou||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ou||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(kr),o=r.getIterator(kr);let l=i.getNext(),d=o.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=o.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ou?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Qb=new class j3 extends tn{constructor(){super(new qo(oN),tn.EMPTY_NODE,ph.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(bn,{MIN:{value:new bn(Cp,tn.EMPTY_NODE)},MAX:{value:new bn(fh,Qb)}}),zV.__EMPTY_NODE=tn.EMPTY_NODE,TE.__childrenNodeConstructor=tn,function N3(n){aN=n}(Qb),function F3(n){ZV=n}(Qb);const H3=!0;function li(n,e=null){if(null===n)return tn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new TE(n,li(e));if(n instanceof Array||!H3){let t=tn.EMPTY_NODE;return Cs(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const o=li(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(li(e))}{const t=[];let r=!1;if(Cs(n,(l,d)=>{if("."!==l.substring(0,1)){const f=li(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new bn(l,f)))}}),0===t.length)return tn.EMPTY_NODE;const o=ox(t,O3,l=>l.name,oN);if(r){const l=ox(t,kr.getCompare());return new tn(o,li(e),new ph({".priority":l},{".priority":kr}))}return new tn(o,li(e),ph.Default)}}!function L3(n){KV=n}(li);class cN extends rx{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!yn(e)&&".priority"!==_n(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?u_(e.name,t.name):o}makePost(e,t){const r=li(e),i=tn.EMPTY_NODE.updateChild(this.indexPath_,r);return new bn(t,i)}maxPost(){const e=tn.EMPTY_NODE.updateChild(this.indexPath_,Qb);return new bn(fh,e)}toString(){return Kb(this.indexPath_,0).join("/")}}const uN=new class $3 extends rx{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?u_(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return bn.MIN}maxPost(){return bn.MAX}makePost(e,t){const r=li(e);return new bn(t,r)}toString(){return".value"}};function YV(n){return{type:"value",snapshotNode:n}}function DE(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Xb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Jb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class dN{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Xb(t,d)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(DE(t,r)):l.trackChildChange(Jb(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(kr,(i,o)=>{t.hasChild(i)||r.trackChildChange(Xb(i,o))}),t.isLeafNode()||t.forEachChild(kr,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(Jb(i,o,l))}else r.trackChildChange(DE(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?tn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class eT{constructor(e){this.indexedFilter_=new dN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eT.getStartPost_(e),this.endPost_=eT.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,l){return this.matches(new bn(t,r))||(r=tn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=tn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(tn.EMPTY_NODE);const o=this;return t.forEachChild(kr,(l,d)=>{o.matches(new bn(l,d))||(i=i.updateImmediateChild(l,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class G3{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new eT(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new bn(t,r))||(r=tn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=tn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=tn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const d=o.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;i=i.updateImmediateChild(d.name,d.node),l++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(tn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;o.hasNext();){const d=o.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:i=i.updateImmediateChild(d.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const D=this.index_.getCompare();l=(k,V)=>D(V,k)}else l=this.index_.getCompare();const d=e;(0,O.hu)(d.numChildren()===this.limit_,"");const f=new bn(t,r),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(f);if(d.hasChild(t)){const D=d.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=k&&(k.name===t||d.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const V=null==k?1:l(k,f);if(E&&!r.isEmpty()&&V>=0)return o?.trackChildChange(Jb(t,r,D)),d.updateImmediateChild(t,r);{o?.trackChildChange(Xb(t,D));const ee=d.updateImmediateChild(t,tn.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(o?.trackChildChange(DE(k.name,k.node)),ee.updateImmediateChild(k.name,k.node)):ee}}return r.isEmpty()?e:E&&l(_,f)>=0?(null!=o&&(o.trackChildChange(Xb(_.name,_.node)),o.trackChildChange(DE(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(_.name,tn.EMPTY_NODE)):e}}class ax{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kr}copy(){const e=new ax;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function hN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function fN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function lx(n,e){const t=n.copy();return t.index_=e,t}function QV(n){const e={};if(n.isDefault())return e;let t;if(n.index_===kr?t="$priority":n.index_===uN?t="$value":n.index_===Ou?t="$key":((0,O.hu)(n.index_ instanceof cN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function XV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==kr&&(e.i=n.index_.toString()),e}class cx extends LV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=cx.getListenId_(e,r),d={};this.listens_[l]=d;const f=QV(e._queryParams);this.restRequest_(o+".json",f,(_,E)=>{let D=E;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(o,D,!1,r),(0,O.DV)(this.listens_,l)===d){let k;k=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(k,null)}})}unlisten(e,t){const r=cx.getListenId_(e,t);delete this.listens_[r]}get(e){const t=QV(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(o,l)=>{let d=l;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,O.cI)(d.responseText)}catch{so("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&so("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class Q3{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ux(){return{value:null,children:new Map}}function SE(n,e,t){if(yn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=_n(e);n.children.has(r)||n.children.set(r,ux()),SE(n.children.get(r),e=Ir(e),t)}}function pN(n,e){if(yn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(kr,(r,i)=>{SE(n,new Qn(r),i)}),pN(n,e)}}if(n.children.size>0){const t=_n(e);return e=Ir(e),n.children.has(t)&&pN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function gN(n,e,t){null!==n.value?t(e,n.value):function X3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{gN(i,new Qn(e.toString()+"/"+r),t)})}class J3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Cs(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class n4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new J3(e);const r=1e4+2e4*Math.random();Wb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Cs(e,(i,o)=>{o>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Wb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Nu=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Nu||{});function yN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class dx{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Nu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(yn(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Qn(e));return new dx($n(),t,this.revert)}}return(0,O.hu)(_n(this.path)===e,"operationForChild called for unrelated child."),new dx(Ir(this.path),this.affectedTree,this.revert)}}class tT{constructor(e,t){this.source=e,this.path=t,this.type=Nu.LISTEN_COMPLETE}operationForChild(e){return yn(this.path)?new tT(this.source,$n()):new tT(this.source,Ir(this.path))}}class f_{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Nu.OVERWRITE}operationForChild(e){return yn(this.path)?new f_(this.source,$n(),this.snap.getImmediateChild(e)):new f_(this.source,Ir(this.path),this.snap)}}class AE{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Nu.MERGE}operationForChild(e){if(yn(this.path)){const t=this.children.subtree(new Qn(e));return t.isEmpty()?null:t.value?new f_(this.source,$n(),t.value):new AE(this.source,$n(),t)}return(0,O.hu)(_n(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new AE(this.source,Ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ap{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(yn(e))return this.isFullyInitialized()&&!this.filtered_;const t=_n(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class r4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nT(n,e,t,r,i,o){const l=r.filter(d=>d.type===t);l.sort((d,f)=>function o4(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new bn(e.childName,e.snapshotNode),i=new bn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),l.forEach(d=>{const f=function s4(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,o);i.forEach(_=>{_.respondsTo(d.type)&&e.push(_.createEvent(f,n.query_))})})}function hx(n,e){return{eventCache:n,serverCache:e}}function rT(n,e,t,r){return hx(new Ap(e,t,r),n.serverCache)}function eB(n,e,t,r){return hx(n.eventCache,new Ap(e,t,r))}function fx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function p_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let vN;class Pr{constructor(e,t=(()=>(vN||(vN=new qo($W)),vN))()){this.value=e,this.children=t}static fromObject(e){let t=new Pr(null);return Cs(e,(r,i)=>{t=t.set(new Qn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:$n(),value:this.value};if(yn(e))return null;{const r=_n(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Ir(e),t);return null!=o?{path:Xr(new Qn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(yn(e))return this;{const t=_n(e),r=this.children.get(t);return null!==r?r.subtree(Ir(e)):new Pr(null)}}set(e,t){if(yn(e))return new Pr(t,this.children);{const r=_n(e),o=(this.children.get(r)||new Pr(null)).set(Ir(e),t),l=this.children.insert(r,o);return new Pr(this.value,l)}}remove(e){if(yn(e))return this.children.isEmpty()?new Pr(null):new Pr(null,this.children);{const t=_n(e),r=this.children.get(t);if(r){const i=r.remove(Ir(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Pr(null):new Pr(this.value,o)}return this}}get(e){if(yn(e))return this.value;{const t=_n(e),r=this.children.get(t);return r?r.get(Ir(e)):null}}setTree(e,t){if(yn(e))return t;{const r=_n(e),o=(this.children.get(r)||new Pr(null)).setTree(Ir(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Pr(this.value,l)}}fold(e){return this.fold_($n(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Xr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,$n(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(yn(e))return null;{const o=_n(e),l=this.children.get(o);return l?l.findOnPath_(Ir(e),Xr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,$n(),t)}foreachOnPath_(e,t,r){if(yn(e))return this;{this.value&&r(t,this.value);const i=_n(e),o=this.children.get(i);return o?o.foreachOnPath_(Ir(e),Xr(t,i),r):new Pr(null)}}foreach(e){this.foreach_($n(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Xr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class uc{constructor(e){this.writeTree_=e}static empty(){return new uc(new Pr(null))}}function iT(n,e,t){if(yn(e))return new uc(new Pr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=Co(i,e);return o=o.updateChild(l,t),new uc(n.writeTree_.set(i,o))}{const i=new Pr(t),o=n.writeTree_.setTree(e,i);return new uc(o)}}}function EN(n,e,t){let r=n;return Cs(t,(i,o)=>{r=iT(r,Xr(e,i),o)}),r}function tB(n,e){if(yn(e))return uc.empty();{const t=n.writeTree_.setTree(e,new Pr(null));return new uc(t)}}function wN(n,e){return null!=g_(n,e)}function g_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Co(t.path,e)):null}function nB(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(kr,(r,i)=>{e.push(new bn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new bn(r,i.value))}),e}function Rp(n,e){if(yn(e))return n;{const t=g_(n,e);return new uc(null!=t?new Pr(t):n.writeTree_.subtree(e))}}function IN(n){return n.writeTree_.isEmpty()}function RE(n,e){return rB($n(),n.writeTree_,e)}function rB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,O.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=rB(Xr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Xr(n,".priority"),r)),t}}function px(n,e){return lB(e,n)}function h4(n,e){if(n.snap)return ml(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ml(Xr(n.path,t),e))return!0;return!1}function p4(n){return n.visible}function iB(n,e,t){let r=uc.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let d;if(o.snap)ml(t,l)?(d=Co(t,l),r=iT(r,d,o.snap)):ml(l,t)&&(d=Co(l,t),r=iT(r,$n(),o.snap.getChild(d)));else{if(!o.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(ml(t,l))d=Co(t,l),r=EN(r,d,o.children);else if(ml(l,t))if(d=Co(l,t),yn(d))r=EN(r,$n(),o.children);else{const f=(0,O.DV)(o.children,_n(d));if(f){const _=f.getChild(Ir(d));r=iT(r,$n(),_)}}}}}return r}function sB(n,e,t,r,i){if(r||i){const o=Rp(n.visibleWrites,e);return!i&&IN(o)?t:i||null!=t||wN(o,$n())?RE(iB(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(ml(_.path,e)||ml(e,_.path))},e),t||tn.EMPTY_NODE):null}{const o=g_(n.visibleWrites,e);if(null!=o)return o;{const l=Rp(n.visibleWrites,e);return IN(l)?t:null!=t||wN(l,$n())?RE(l,t||tn.EMPTY_NODE):null}}}function gx(n,e,t,r){return sB(n.writeTree,n.treePath,e,t,r)}function bN(n,e){return function g4(n,e,t){let r=tn.EMPTY_NODE;const i=g_(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kr,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Rp(n.visibleWrites,e);return t.forEachChild(kr,(l,d)=>{const f=RE(Rp(o,new Qn(l)),d);r=r.updateImmediateChild(l,f)}),nB(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return nB(Rp(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function oB(n,e,t,r){return function m4(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Xr(e,t);if(wN(n.visibleWrites,o))return null;{const l=Rp(n.visibleWrites,o);return IN(l)?i.getChild(t):RE(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function mx(n,e){return function y4(n,e){return g_(n.visibleWrites,e)}(n.writeTree,Xr(n.treePath,e))}function TN(n,e,t){return function _4(n,e,t,r){const i=Xr(e,t),o=g_(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?RE(Rp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function aB(n,e){return lB(Xr(n.treePath,e),n.writeTree)}function lB(n,e){return{treePath:n,writeTree:e}}class I4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,Jb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,Xb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,DE(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Jb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const cB=new class b4{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class CN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ap(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:p_(this.viewCache_),o=function w4(n,e,t,r,i,o){return function v4(n,e,t,r,i,o,l){let d;const f=Rp(n.visibleWrites,e),_=g_(f,$n());if(null!=_)d=_;else{if(null==t)return[];d=RE(f,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const E=[],D=l.getCompare(),k=o?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let V=k.getNext();for(;V&&E.length<i;)0!==D(V,r)&&E.push(V),V=k.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function uB(n,e,t,r,i,o){const l=e.eventCache;if(null!=mx(r,t))return e;{let d,f;if(yn(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=p_(e),D=bN(r,_ instanceof tn?_:tn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,o)}else{const _=gx(r,p_(e));d=n.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const _=_n(t);if(".priority"===_){(0,O.hu)(1===Sp(t),"Can't have a priority with additional path components");const E=l.getNode();f=e.serverCache.getNode();const D=oB(r,t,E,f);d=null!=D?n.filter.updatePriority(E,D):l.getNode()}else{const E=Ir(t);let D;if(l.isCompleteForChild(_)){f=e.serverCache.getNode();const k=oB(r,t,l.getNode(),f);D=null!=k?l.getNode().getImmediateChild(_).updateChild(E,k):l.getNode().getImmediateChild(_)}else D=TN(r,_,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),_,D,E,i,o):l.getNode()}}return rT(e,d,l.isFullyInitialized()||yn(t),n.filter.filtersNodes())}}function _x(n,e,t,r,i,o,l,d){const f=e.serverCache;let _;const E=l?n.filter:n.filter.getIndexedFilter();if(yn(t))_=E.updateFullNode(f.getNode(),r,null);else if(E.filtersNodes()&&!f.isFiltered()){const V=f.getNode().updateChild(t,r);_=E.updateFullNode(f.getNode(),V,null)}else{const V=_n(t);if(!f.isCompleteForPath(t)&&Sp(t)>1)return e;const z=Ir(t),de=f.getNode().getImmediateChild(V).updateChild(z,r);_=".priority"===V?E.updatePriority(f.getNode(),de):E.updateChild(f.getNode(),V,de,z,cB,null)}const D=eB(e,_,f.isFullyInitialized()||yn(t),E.filtersNodes());return uB(n,D,t,i,new CN(i,D,o),d)}function DN(n,e,t,r,i,o,l){const d=e.eventCache;let f,_;const E=new CN(i,e,o);if(yn(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,l),f=rT(e,_,!0,n.filter.filtersNodes());else{const D=_n(t);if(".priority"===D)_=n.filter.updatePriority(e.eventCache.getNode(),r),f=rT(e,_,d.isFullyInitialized(),d.isFiltered());else{const k=Ir(t),V=d.getNode().getImmediateChild(D);let z;if(yn(k))z=r;else{const ee=E.getCompleteChild(D);z=null!=ee?".priority"===rN(k)&&ee.getChild(BV(k)).isEmpty()?ee:ee.updateChild(k,r):tn.EMPTY_NODE}f=V.equals(z)?e:rT(e,n.filter.updateChild(d.getNode(),D,z,k,E,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function dB(n,e){return n.eventCache.isCompleteForChild(e)}function hB(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function SN(n,e,t,r,i,o,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,f=e;_=yn(t)?r:new Pr(null).setTree(t,r);const E=e.serverCache.getNode();return _.children.inorderTraversal((D,k)=>{if(E.hasChild(D)){const z=hB(0,e.serverCache.getNode().getImmediateChild(D),k);f=_x(n,f,new Qn(D),z,i,o,l,d)}}),_.children.inorderTraversal((D,k)=>{const V=!e.serverCache.isCompleteForChild(D)&&null===k.value;if(!E.hasChild(D)&&!V){const ee=hB(0,e.serverCache.getNode().getImmediateChild(D),k);f=_x(n,f,new Qn(D),ee,i,o,l,d)}}),f}class k4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new dN(r.getIndex()),o=function W3(n){return n.loadsAllData()?new dN(n.getIndex()):n.hasLimit()?new G3(n):new eT(n)}(r);this.processor_=function T4(n){return{filter:n}}(o);const l=t.serverCache,d=t.eventCache,f=i.updateFullNode(tn.EMPTY_NODE,l.getNode(),null),_=o.updateFullNode(tn.EMPTY_NODE,d.getNode(),null),E=new Ap(f,l.isFullyInitialized(),i.filtersNodes()),D=new Ap(_,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=hx(D,E),this.eventGenerator_=new r4(this.query_)}get query(){return this.query_}}function N4(n,e){const t=p_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!yn(e)&&!t.getImmediateChild(_n(e)).isEmpty())?t.getChild(e):null}function fB(n){return 0===n.eventRegistrations_.length}function pB(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function gB(n,e,t,r){e.type===Nu.MERGE&&null!==e.source.queryId&&((0,O.hu)(p_(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(fx(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function D4(n,e,t,r,i){const o=new I4;let l,d;if(t.type===Nu.OVERWRITE){const _=t;_.source.fromUser?l=DN(n,e,_.path,_.snap,r,i,o):((0,O.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered()&&!yn(_.path),l=_x(n,e,_.path,_.snap,r,i,d,o))}else if(t.type===Nu.MERGE){const _=t;_.source.fromUser?l=function A4(n,e,t,r,i,o,l){let d=e;return r.foreach((f,_)=>{const E=Xr(t,f);dB(e,_n(E))&&(d=DN(n,d,E,_,i,o,l))}),r.foreach((f,_)=>{const E=Xr(t,f);dB(e,_n(E))||(d=DN(n,d,E,_,i,o,l))}),d}(n,e,_.path,_.children,r,i,o):((0,O.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered(),l=SN(n,e,_.path,_.children,r,i,d,o))}else if(t.type===Nu.ACK_USER_WRITE){const _=t;l=_.revert?function M4(n,e,t,r,i,o){let l;if(null!=mx(r,t))return e;{const d=new CN(r,e,i),f=e.eventCache.getNode();let _;if(yn(t)||".priority"===_n(t)){let E;if(e.serverCache.isFullyInitialized())E=gx(r,p_(e));else{const D=e.serverCache.getNode();(0,O.hu)(D instanceof tn,"serverChildren would be complete if leaf node"),E=bN(r,D)}_=n.filter.updateFullNode(f,E,o)}else{const E=_n(t);let D=TN(r,E,e.serverCache);null==D&&e.serverCache.isCompleteForChild(E)&&(D=f.getImmediateChild(E)),_=null!=D?n.filter.updateChild(f,E,D,Ir(t),d,o):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(f,E,tn.EMPTY_NODE,Ir(t),d,o):f,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=gx(r,p_(e)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=mx(r,$n()),rT(e,_,l,n.filter.filtersNodes())}}(n,e,_.path,r,i,o):function R4(n,e,t,r,i,o,l){if(null!=mx(i,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(yn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return _x(n,e,t,f.getNode().getChild(t),i,o,d,l);if(yn(t)){let _=new Pr(null);return f.getNode().forEachChild(Ou,(E,D)=>{_=_.set(new Qn(E),D)}),SN(n,e,t,_,i,o,d,l)}return e}{let _=new Pr(null);return r.foreach((E,D)=>{const k=Xr(t,E);f.isCompleteForPath(k)&&(_=_.set(E,f.getNode().getChild(k)))}),SN(n,e,t,_,i,o,d,l)}}(n,e,_.path,_.affectedTree,r,i,o)}else{if(t.type!==Nu.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function x4(n,e,t,r,i){const o=e.serverCache;return uB(n,eB(e,o.getNode(),o.isFullyInitialized()||yn(t),o.isFiltered()),t,r,cB,i)}(n,e,t.path,r,o)}const f=o.getChanges();return function S4(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=fx(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(YV(fx(e)))}}(e,l,f),{viewCache:l,changes:f}}(n.processor_,i,e,t,r);return function C4(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,O.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,mB(n,o.changes,o.viewCache.eventCache.getNode(),null)}function mB(n,e,t,r){return function i4(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function z3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),nT(n,i,"child_removed",e,r,t),nT(n,i,"child_added",e,r,t),nT(n,i,"child_moved",o,r,t),nT(n,i,"child_changed",e,r,t),nT(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let yx,Ex;class _B{constructor(){this.views=new Map}}function AN(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,O.hu)(null!=o,"SyncTree gave us an op for an invalid query."),gB(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat(gB(l,e,t,r));return o}}function yB(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=gx(t,i?r:null),f=!1;d?f=!0:r instanceof tn?(d=bN(t,r),f=!1):(d=tn.EMPTY_NODE,f=!1);const _=hx(new Ap(d,f,!1),new Ap(r,i,!1));return new k4(e,_)}return l}function vB(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function xp(n,e){let t=null;for(const r of n.views.values())t=t||N4(r,e);return t}function EB(n,e){return e._queryParams.loadsAllData()?vx(n):n.views.get(e._queryIdentifier)}function wB(n,e){return null!=EB(n,e)}function Mp(n){return null!=vx(n)}function vx(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let G4=1;class IB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pr(null),this.pendingWriteTree_=function E4(){return{visibleWrites:uc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RN(n,e,t,r,i){return function l4(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=iT(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?xE(n,new f_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function kp(n,e,t=!1){const r=function u4(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function d4(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&h4(d,r.path)?i=!1:ml(r.path,d.path)&&(o=!0)),l--}return!!i&&(o?(function f4(n){n.visibleWrites=iB(n.allWrites,p4,$n()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=tB(n.visibleWrites,r.path):Cs(r.children,f=>{n.visibleWrites=tB(n.visibleWrites,Xr(r.path,f))}),!0))}(n.pendingWriteTree_,e)){let o=new Pr(null);return null!=r.snap?o=o.set($n(),!0):Cs(r.children,l=>{o=o.set(new Qn(l),!0)}),xE(n,new dx(r.path,o,t))}return[]}function sT(n,e,t){return xE(n,new f_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function wx(n,e,t,r,i=!1){const o=e._path,l=n.syncPointTree_.get(o);let d=[];if(l&&("default"===e._queryIdentifier||wB(l,e))){const f=function H4(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const d=Mp(n);if("default"===i)for(const[f,_]of n.views.entries())l=l.concat(pB(_,t,r)),fB(_)&&(n.views.delete(f),_.query._queryParams.loadsAllData()||o.push(_.query));else{const f=n.views.get(i);f&&(l=l.concat(pB(f,t,r)),fB(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||o.push(f.query)))}return d&&!Mp(n)&&o.push(new(function V4(){return(0,O.hu)(yx,"Reference.ts has not been loaded"),yx}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,r);(function B4(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const _=f.removed;if(d=f.events,!i){const E=-1!==_.findIndex(k=>k._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(k,V)=>Mp(V));if(E&&!D){const k=n.syncPointTree_.subtree(o);if(!k.isEmpty()){const V=function X4(n){return n.fold((e,t,r)=>{if(t&&Mp(t))return[vx(t)];{let i=[];return t&&(i=vB(t)),Cs(r,(o,l)=>{i=i.concat(l)}),i}})}(k);for(let z=0;z<V.length;++z){const ee=V[z],de=ee.query,je=DB(n,ee);n.listenProvider_.startListening(aT(de),oT(n,de),je.hashFn,je.onComplete)}}}!D&&_.length>0&&!r&&(E?n.listenProvider_.stopListening(aT(e),null):_.forEach(k=>{const V=n.queryToTagMap.get(bx(k));n.listenProvider_.stopListening(aT(k),V)}))}!function J4(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=bx(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,_)}return d}function bB(n,e,t,r){const i=MN(n,r);if(null!=i){const o=kN(i),l=o.path,d=o.queryId,f=Co(l,e);return PN(n,l,new f_(yN(d),f,t))}return[]}function xN(n,e,t,r=!1){const i=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(i,(k,V)=>{const z=Co(k,i);o=o||xp(V,z),l=l||Mp(V)});let f,d=n.syncPointTree_.get(i);d?(l=l||Mp(d),o=o||xp(d,$n())):(d=new _B,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=o?f=!0:(f=!1,o=tn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,z)=>{const ee=xp(z,$n());ee&&(o=o.updateImmediateChild(V,ee))}));const _=wB(d,e);if(!_&&!e._queryParams.loadsAllData()){const k=bx(e);(0,O.hu)(!n.queryToTagMap.has(k),"View does not exist, but we have a tag");const V=function e6(){return G4++}();n.queryToTagMap.set(k,V),n.tagToQueryMap.set(V,k)}let D=function j4(n,e,t,r,i,o){const l=yB(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function L4(n,e){n.eventRegistrations_.push(e)}(l,t),function F4(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(kr,(o,l)=>{r.push(DE(o,l))}),t.isFullyInitialized()&&r.push(YV(t.getNode())),mB(n,r,t.getNode(),e)}(l,t)}(d,e,t,px(n.pendingWriteTree_,i),o,f);if(!_&&!l&&!r){const k=EB(d,e);D=D.concat(function t6(n,e,t){const r=e._path,i=oT(n,e),o=DB(n,t),l=n.listenProvider_.startListening(aT(e),i,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!Mp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((_,E,D)=>{if(!yn(_)&&E&&Mp(E))return[vx(E).query];{let k=[];return E&&(k=k.concat(vB(E).map(V=>V.query))),Cs(D,(V,z)=>{k=k.concat(z)}),k}});for(let _=0;_<f.length;++_){const E=f[_];n.listenProvider_.stopListening(aT(E),oT(n,E))}}return l}(n,e,k))}return D}function Ix(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,d)=>{const _=xp(d,Co(l,e));if(_)return _});return sB(i,e,o,t,!0)}function xE(n,e){return TB(e,n.syncPointTree_,null,px(n.pendingWriteTree_,$n()))}function TB(n,e,t,r){if(yn(n.path))return CB(n,e,t,r);{const i=e.get($n());null==t&&null!=i&&(t=xp(i,$n()));let o=[];const l=_n(n.path),d=n.operationForChild(l),f=e.children.get(l);if(f&&d){const _=t?t.getImmediateChild(l):null,E=aB(r,l);o=o.concat(TB(d,f,_,E))}return i&&(o=o.concat(AN(i,n,r,t))),o}}function CB(n,e,t,r){const i=e.get($n());null==t&&null!=i&&(t=xp(i,$n()));let o=[];return e.children.inorderTraversal((l,d)=>{const f=t?t.getImmediateChild(l):null,_=aB(r,l),E=n.operationForChild(l);E&&(o=o.concat(CB(E,d,f,_)))}),i&&(o=o.concat(AN(i,n,r,t))),o}function DB(n,e){const t=e.query,r=oT(n,t);return{hashFn:()=>(function P4(n){return n.viewCache_.serverCache.getNode()}(e)||tn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Z4(n,e,t){const r=MN(n,t);if(r){const i=kN(r),o=i.path,l=i.queryId,d=Co(o,e);return PN(n,o,new tT(yN(l),d))}return[]}(n,t._path,r):function K4(n,e){return xE(n,new tT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function WW(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return wx(n,t,null,o)}}}}function oT(n,e){const t=bx(e);return n.queryToTagMap.get(t)}function bx(n){return n._path.toString()+"$"+n._queryIdentifier}function MN(n,e){return n.tagToQueryMap.get(e)}function kN(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Qn(n.substr(0,e))}}function PN(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),AN(r,t,px(n.pendingWriteTree_,e),null)}function aT(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function z4(){return(0,O.hu)(Ex,"Reference.ts has not been loaded"),Ex}())(n._repo,n._path):n}class ON{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ON(t)}node(){return this.node_}}class NN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Xr(this.path_,e);return new NN(this.syncTree_,t)}node(){return Ix(this.syncTree_,this.path_)}}const n6=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},SB=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?r6(n[".sv"],e,t):"object"==typeof n[".sv"]?i6(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},r6=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},i6=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},AB=function(n,e,t,r){return FN(e,new NN(t,n),r)},LN=function(n,e,t){return FN(n,new ON(e),t)};function FN(n,e,t){const r=n.getPriority().val(),i=SB(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,d=SB(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new TE(d,li(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new TE(i))),l.forEachChild(kr,(d,f)=>{const _=FN(f,e.getImmediateChild(d),t);_!==f&&(o=o.updateImmediateChild(d,_))}),o}}class UN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Tx(n,e){let t=e instanceof Qn?e:new Qn(e),r=n,i=_n(t);for(;null!==i;){const o=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new UN(i,r,o),t=Ir(t),i=_n(t)}return r}function m_(n){return n.node.value}function VN(n,e){n.node.value=e,BN(n)}function RB(n){return n.node.childCount>0}function Cx(n,e){Cs(n.node.children,(t,r)=>{e(new UN(t,n,r))})}function xB(n,e,t,r){t&&!r&&e(n),Cx(n,i=>{xB(i,e,!0,r)}),t&&r&&e(n)}function lT(n){return new Qn(null===n.parent?n.name:lT(n.parent)+"/"+n.name)}function BN(n){null!==n.parent&&function a6(n,e,t){const r=function s6(n){return void 0===m_(n)&&!RB(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,BN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,BN(n))}(n.parent,n.name,n)}const l6=/[\[\].#$\/\u0000-\u001F\u007F]/,c6=/[\[\].#$\u0000-\u001F\u007F]/,jN=10485760,Dx=function(n){return"string"==typeof n&&0!==n.length&&!l6.test(n)},MB=function(n){return"string"==typeof n&&0!==n.length&&!c6.test(n)},cT=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!JR(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Lu=function(n,e,t,r){r&&void 0===e||uT((0,O.gK)(n,"value"),e,t)},uT=function(n,e,t){const r=t instanceof Qn?new D3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+d_(r));if("function"==typeof e)throw new Error(n+"contains a function "+d_(r)+" with contents = "+e.toString());if(JR(e))throw new Error(n+"contains "+e.toString()+" "+d_(r));if("string"==typeof e&&e.length>jN/3&&(0,O.ug)(e)>jN)throw new Error(n+"contains a string greater than "+jN+" utf8 bytes "+d_(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Cs(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!Dx(l)))throw new Error(n+" contains an invalid key ("+l+") "+d_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function S3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),jV(n)})(r,l),uT(n,d,r),function A3(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+d_(r)+" in addition to actual children.")}},kB=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Cs(e,(l,d)=>{const f=new Qn(l);if(uT(i,d,Xr(t,f)),".priority"===rN(f)&&!cT(d))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(f)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=Kb(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!Dx(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(C3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ml(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},HN=function(n,e,t){if(!t||void 0!==e){if(JR(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cT(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dT=function(n,e,t,r){if(!(r&&void 0===t||Dx(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hT=function(n,e,t,r){if(!(r&&void 0===t||MB(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},h6=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hT(n,e,t,r)},_l=function(n,e){if(".info"===_n(e))throw new Error(n+" failed = Can't modify data under /.info/")},PB=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Dx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),MB(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class f6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sx(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!iN(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function OB(n,e,t){Sx(n,t),NB(n,r=>iN(r,e))}function Ia(n,e,t){Sx(n,t),NB(n,r=>ml(r,e)||ml(e,r))}function NB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(p6(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function p6(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();c_&&Ts("event: "+t.toString()),IE(r)}}}const LB="repo_interrupt",g6=25;class m6{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new f6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ux(),this.transactionQueueTree_=new UN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function FB(n){const t=n.infoData_.getNode(new Qn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fT(n){return n6({timestamp:FB(n)})}function UB(n,e,t,r,i){n.dataUpdateCount++;const o=new Qn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const f=(0,O.UI)(t,_=>li(_));l=function Y4(n,e,t,r){const i=MN(n,r);if(i){const o=kN(i),l=o.path,d=o.queryId,f=Co(l,e),_=Pr.fromObject(t);return PN(n,l,new AE(yN(d),f,_))}return[]}(n.serverSyncTree_,o,f,i)}else{const f=li(t);l=bB(n.serverSyncTree_,o,f,i)}else if(r){const f=(0,O.UI)(t,_=>li(_));l=function q4(n,e,t){const r=Pr.fromObject(t);return xE(n,new AE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,f)}else{const f=li(t);l=sT(n.serverSyncTree_,o,f)}let d=o;l.length>0&&(d=kE(n,o)),Ia(n.eventQueue_,d,l)}function VB(n,e){$N(n,"connected",e),!1===e&&function w6(n){ME(n,"onDisconnectEvents");const e=fT(n),t=ux();gN(n.onDisconnect_,$n(),(i,o)=>{const l=AB(i,o,n.serverSyncTree_,e);SE(t,i,l)});let r=[];gN(t,$n(),(i,o)=>{r=r.concat(sT(n.serverSyncTree_,i,o));const l=qN(n,i);kE(n,l)}),n.onDisconnect_=ux(),Ia(n.eventQueue_,$n(),r)}(n)}function $N(n,e,t){const r=new Qn("/.info/"+e),i=li(t);n.infoData_.updateSnapshot(r,i);const o=sT(n.infoSyncTree_,r,i);Ia(n.eventQueue_,r,o)}function Ax(n){return n.nextWriteId_++}function zN(n,e,t,r,i){ME(n,"set",{path:e.toString(),value:t,priority:r});const o=fT(n),l=li(t,r),d=Ix(n.serverSyncTree_,e),f=LN(l,d,o),_=Ax(n),E=RN(n.serverSyncTree_,e,f,_,!0);Sx(n.eventQueue_,E),n.server_.put(e.toString(),l.val(!0),(k,V)=>{const z="ok"===k;z||so("set at "+e+" failed: "+k);const ee=kp(n.serverSyncTree_,_,!z);Ia(n.eventQueue_,e,ee),Pp(0,i,k,V)});const D=qN(n,e);kE(n,D),Ia(n.eventQueue_,D,[])}function I6(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&pN(n.onDisconnect_,e),Pp(0,t,r,i)})}function BB(n,e,t,r){const i=li(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&SE(n.onDisconnect_,e,i),Pp(0,r,o,l)})}function GN(n,e,t){let r;r=".info"===_n(e._path)?wx(n.infoSyncTree_,e,t):wx(n.serverSyncTree_,e,t),OB(n.eventQueue_,e._path,r)}function jB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(LB)}function ME(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ts(t,...e)}function Pp(n,e,t,r){e&&IE(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function WN(n,e,t){return Ix(n.serverSyncTree_,e,t)||tn.EMPTY_NODE}function Rx(n,e=n.transactionQueueTree_){if(e||xx(n,e),m_(e)){const t=$B(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function A6(n,e,t){const r=t.map(_=>_.currentWriteId),i=WN(n,e,r);let o=i;const l=i.hash();for(let _=0;_<t.length;_++){const E=t[_];(0,O.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=Co(e,E.path);o=o.updateChild(D,E.currentOutputSnapshotRaw)}const d=o.val(!0),f=e;n.server_.put(f.toString(),d,_=>{ME(n,"transaction put response",{path:f.toString(),status:_});let E=[];if("ok"===_){const D=[];for(let k=0;k<t.length;k++)t[k].status=2,E=E.concat(kp(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&D.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();xx(n,Tx(n.transactionQueueTree_,e)),Rx(n,n.transactionQueueTree_),Ia(n.eventQueue_,e,E);for(let k=0;k<D.length;k++)IE(D[k])}else{if("datastale"===_)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{so("transaction at "+f.toString()+" failed: "+_);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=_}kE(n,e)}},l)}(n,lT(e),t)}else RB(e)&&Cx(e,t=>{Rx(n,t)})}function kE(n,e){const t=HB(n,e),r=lT(t);return function R6(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],_=Co(t,f.path);let D,E=!1;if((0,O.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)E=!0,D=f.abortReason,i=i.concat(kp(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=g6)E=!0,D="maxretry",i=i.concat(kp(n.serverSyncTree_,f.currentWriteId,!0));else{const k=WN(n,f.path,l);f.currentInputSnapshot=k;const V=e[d].update(k.val());if(void 0!==V){uT("transaction failed: Data returned ",V,f.path);let z=li(V);"object"==typeof V&&null!=V&&(0,O.r3)(V,".priority")||(z=z.updatePriority(k.getPriority()));const de=f.currentWriteId,je=fT(n),Ke=LN(z,k,je);f.currentOutputSnapshotRaw=z,f.currentOutputSnapshotResolved=Ke,f.currentWriteId=Ax(n),l.splice(l.indexOf(de),1),i=i.concat(RN(n.serverSyncTree_,f.path,Ke,f.currentWriteId,f.applyLocally)),i=i.concat(kp(n.serverSyncTree_,de,!0))}else E=!0,D="nodata",i=i.concat(kp(n.serverSyncTree_,f.currentWriteId,!0))}Ia(n.eventQueue_,t,i),i=[],E&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}xx(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)IE(r[d]);Rx(n,n.transactionQueueTree_)}(n,$B(n,t),r),r}function HB(n,e){let t,r=n.transactionQueueTree_;for(t=_n(e);null!==t&&void 0===m_(r);)r=Tx(r,t),t=_n(e=Ir(e));return r}function $B(n,e){const t=[];return zB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function zB(n,e,t){const r=m_(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Cx(e,i=>{zB(n,i,t)})}function xx(n,e){const t=m_(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,VN(e,t.length>0?t:void 0)}Cx(e,r=>{xx(n,r)})}function qN(n,e){const t=lT(HB(n,e)),r=Tx(n.transactionQueueTree_,e);return function o6(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{KN(n,i)}),KN(n,r),xB(r,i=>{KN(n,i)}),t}function KN(n,e){const t=m_(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(kp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?VN(e,void 0):t.length=o+1,Ia(n.eventQueue_,lT(e),i);for(let l=0;l<r.length;l++)IE(r[l])}}const ZN=function(n,e){const t=k6(n),r=t.namespace;return"firebase.com"===t.domain&&Pu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Pu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&so("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new QO(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Qn(t.pathString)}},k6=function(n){let e="",t="",r="",i="",o="",l=!0,d="https",f=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(E,D)),E<D&&(i=function x6(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,D)));const k=function M6(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):so(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));_=e.indexOf(":"),_>=0?(l="https"===d||"wss"===d,f=parseInt(e.substring(_+1),10)):_=e.length;const V=e.slice(0,_);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),o=r}"ns"in k&&(o=k.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:o}},GB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",P6=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=GB.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=GB.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class WB{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class qB{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class YN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class KB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return I6(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_l("OnDisconnect.remove",this._path);const e=new O.BH;return BB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_l("OnDisconnect.set",this._path),Lu("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return BB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_l("OnDisconnect.setWithPriority",this._path),Lu("OnDisconnect.setWithPriority",e,this._path,!1),HN("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function b6(n,e,t,r,i){const o=li(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,d)=>{"ok"===l&&SE(n.onDisconnect_,e,o),Pp(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_l("OnDisconnect.update",this._path),kB("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function T6(n,e,t,r){if((0,O.xb)(t))return Ts("onDisconnect().update() called with empty data.  Don't do anything."),void Pp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&Cs(t,(l,d)=>{const f=li(d);SE(n.onDisconnect_,Xr(e,l),f)}),Pp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ko{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return yn(this._path)?null:rN(this._path)}get ref(){return new yl(this._repo,this._path)}get _queryIdentifier(){const e=XV(this._queryParams),t=ZO(e);return"{}"===t?"default":t}get _queryObject(){return XV(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof Ko))return!1;const t=this._repo===e._repo,r=iN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function T3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Mx(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Op(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ou){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Cp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==fh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===kr){if(null!=e&&!cT(e)||null!=t&&!cT(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof cN||n.getIndex()===uN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class yl extends Ko{constructor(e,t){super(e,t,new ax,!1)}get parent(){const e=BV(this._path);return null===e?null:new yl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class __{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Qn(e),r=y_(this.ref,e);return new __(this._node.getChild(t),r,kr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new __(i,y_(this.ref,r),kr)))}hasChild(e){const t=new Qn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ZB(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?y_(n._root,e):n._root}function YB(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=ZN(e,n._repo.repoInfo_.nodeAdmin);PB("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Pu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),ZB(n,t.path.toString())}function y_(n,e){return null===_n((n=(0,O.m9)(n))._path)?h6("child","path",e,!1):hT("child","path",e,!1),new yl(n._repo,Xr(n._path,e))}function QN(n,e){n=(0,O.m9)(n),_l("set",n._path),Lu("set",e,n._path,!1);const t=new O.BH;return zN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function U6(n,e){kB("update",e,n._path,!1);const t=new O.BH;return function E6(n,e,t,r){ME(n,"update",{path:e.toString(),value:t});let i=!0;const o=fT(n),l={};if(Cs(t,(d,f)=>{i=!1,l[d]=AB(Xr(e,d),li(f),n.serverSyncTree_,o)}),i)Ts("update() called with empty data.  Don't do anything."),Pp(0,r,"ok",void 0);else{const d=Ax(n),f=function W4(n,e,t,r){!function c4(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=EN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Pr.fromObject(t);return xE(n,new AE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);Sx(n.eventQueue_,f),n.server_.merge(e.toString(),t,(_,E)=>{const D="ok"===_;D||so("update at "+e+" failed: "+_);const k=kp(n.serverSyncTree_,d,!D),V=k.length>0?kE(n,e):e;Ia(n.eventQueue_,V,k),Pp(0,r,_,E)}),Cs(t,_=>{const E=qN(n,Xr(e,_));kE(n,E)}),Ia(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function V6(n){n=(0,O.m9)(n);const e=new YN(()=>{}),t=new pT(e);return function v6(n,e,t){const r=function Q4(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,E)=>{const D=Co(_,t);r=r||xp(E,D)});let i=n.syncPointTree_.get(t);i?r=r||xp(i,$n()):(i=new _B,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,l=o?new Ap(r,!0,!1):null;return function O4(n){return fx(n.viewCache_)}(yB(i,e,px(n.pendingWriteTree_,e._path),o?l.getNode():tn.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=li(i).withIndex(e._queryParams.getIndex());let l;if(xN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=sT(n.serverSyncTree_,e._path,o);else{const d=oT(n.serverSyncTree_,e);l=bB(n.serverSyncTree_,e._path,o,d)}return Ia(n.eventQueue_,e._path,l),wx(n.serverSyncTree_,e,t,null,!0),o},i=>(ME(n,"get for query "+(0,O.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new __(r,new yl(n._repo,n._path),n._queryParams.getIndex()))}class pT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new WB("value",this,new __(e.snapshotNode,new yl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qB(this,e,t):null}matches(e){return e instanceof pT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Px{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qB(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=y_(new yl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new WB(e.type,this,new __(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Px&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function gT(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const f=t,_=(E,D)=>{GN(n._repo,n,d),f(E,D)};_.userCallback=t.userCallback,_.context=t.context,t=_}const l=new YN(t,o||void 0),d="value"===e?new pT(l):new Px(e,l);return function C6(n,e,t){let r;r=".info"===_n(e._path)?xN(n.infoSyncTree_,e,t):xN(n.serverSyncTree_,e,t),OB(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>GN(n._repo,n,d)}function XN(n,e,t,r){return gT(n,"value",e,t,r)}function QB(n,e,t,r){return gT(n,"child_added",e,t,r)}function XB(n,e,t,r){return gT(n,"child_changed",e,t,r)}function JB(n,e,t,r){return gT(n,"child_moved",e,t,r)}function ej(n,e,t,r){return gT(n,"child_removed",e,t,r)}function tj(n,e,t){let r=null;const i=t?new YN(t):null;"value"===e?r=new pT(i):e&&(r=new Px(e,i)),GN(n._repo,n,r)}class dc{}class nj extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("endAt",this._value,e._path,!0);const t=fN(e._queryParams,this._value,this._key);if(kx(t),Op(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class j6 extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("endBefore",this._value,e._path,!1);const t=function Y3(n,e,t){let r;return r=fN(n,e,n.index_===Ou||t?t:Cp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(kx(t),Op(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class rj extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("startAt",this._value,e._path,!0);const t=hN(e._queryParams,this._value,this._key);if(kx(t),Op(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class z6 extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("startAfter",this._value,e._path,!1);const t=function Z3(n,e,t){let r;return r=hN(n,e,n.index_===Ou||t?t:fh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(kx(t),Op(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class W6 extends dc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ko(e._repo,e._path,function q3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class K6 extends dc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ko(e._repo,e._path,function K3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Y6 extends dc{constructor(e){super(),this._path=e}_apply(e){Mx(e,"orderByChild");const t=new Qn(this._path);if(yn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new cN(t),i=lx(e._queryParams,r);return Op(i),new Ko(e._repo,e._path,i,!0)}}class X6 extends dc{_apply(e){Mx(e,"orderByKey");const t=lx(e._queryParams,Ou);return Op(t),new Ko(e._repo,e._path,t,!0)}}class e9 extends dc{_apply(e){Mx(e,"orderByPriority");const t=lx(e._queryParams,kr);return Op(t),new Ko(e._repo,e._path,t,!0)}}class n9 extends dc{_apply(e){Mx(e,"orderByValue");const t=lx(e._queryParams,uN);return Op(t),new Ko(e._repo,e._path,t,!0)}}class i9 extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Lu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nj(this._value,this._key)._apply(new rj(this._value,this._key)._apply(e))}}function hc(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function U4(n){(0,O.hu)(!yx,"__referenceConstructor has already been defined"),yx=n})(yl),function $4(n){(0,O.hu)(!Ex,"__referenceConstructor has already been defined"),Ex=n}(yl);const JN={};function sj(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Pu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ts("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,_,l=ZN(o,i),d=l.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(f=!0,o=`http://${_}?ns=${d.namespace}`,l=ZN(o,i),d=l.repoInfo):f=!l.repoInfo.secure;const E=i&&f?new qb(qb.OWNER):new XW(n.name,n.options,e);PB("Invalid Firebase Database URL",l),yn(l.path)||Pu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function c9(n,e,t,r){let i=JN[e.name];i||(i={},JN[e.name]=i);let o=i[n.toURLString()];return o&&Pu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new m6(n,false,t,r),i[n.toURLString()]=o,o}(d,n,E,new QW(n.name,t));return new d9(D,n)}class d9{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function _6(n,e,t){if(n.stats_=eN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new cx(n.repoInfo_,(r,i,o,l)=>{UB(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>VB(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new h_(n.repoInfo_,e,(r,i,o,l)=>{UB(n,r,i,o,l)},r=>{VB(n,r)},r=>{!function y6(n,e){Cs(e,(t,r)=>{$N(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function t3(n,e){const t=n.toString();return JO[t]||(JO[t]=e()),JO[t]}(n.repoInfo_,()=>new n4(n.stats_,n.server_)),n.infoData_=new Q3,n.infoSyncTree_=new IB({startListening:(r,i,o,l)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=sT(n.infoSyncTree_,r._path,f),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),$N(n,"connected",!1),n.serverSyncTree_=new IB({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(d,f)=>{const _=l(d,f);Ia(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yl(this._repo,$n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function l9(n,e){const t=JN[e];(!t||t[n.key]!==n)&&Pu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jB(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pu("Cannot call "+e+" on a deleted database.")}}function oj(){AV.IS_TRANSPORT_INITIALIZED&&so("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function h9(){oj(),Dp.forceDisallow()}function f9(){oj(),bE.forceDisallow(),Dp.forceAllow()}function m9(n,e){lV(n,e)}const y9={".sv":"timestamp"};class w9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}h_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},h_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function _9(n){rV(ru.SDK_VERSION),(0,ru._registerComponent)(new gr.wA("database",(e,{instanceIdentifier:t})=>sj(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ru.registerVersion)(tV,"0.14.4",n),(0,ru.registerVersion)(tV,"0.14.4","esm2017")}();const C9=new zr.Yd("@firebase/database-compat"),lj=function(n){C9.warn("FIREBASE WARNING: "+n)};class A9{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,lj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class R9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Np{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),hT("DataSnapshot.child","path",e,!1),new Np(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hT("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Np(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new ba(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $s{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=$s.getCancelAndContextArgs_("Query.on",r,i),d=(_,E)=>{t.call(l.context,new Np(this.database,_),E)};d.userCallback=t,d.context=l.context;const f=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return XN(this._delegate,d,f),t;case"child_added":return QB(this._delegate,d,f),t;case"child_removed":return ej(this._delegate,d,f),t;case"child_changed":return XB(this._delegate,d,f),t;case"child_moved":return JB(this._delegate,d,f),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,tj(this._delegate,e,i)}else tj(this._delegate,e)}get(){return V6(this._delegate).then(e=>new Np(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const o=$s.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,d=(_,E)=>{const D=new Np(this.database,_);t&&t.call(o.context,D,E),l.resolve(D)};d.userCallback=t,d.context=o.context;const f=_=>{o.cancel&&o.cancel.call(o.context,_),l.reject(_)};switch(e){case"value":XN(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":QB(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":ej(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":XB(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":JB(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new $s(this.database,hc(this._delegate,function q6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new W6(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new $s(this.database,hc(this._delegate,function Z6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new K6(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new $s(this.database,hc(this._delegate,function Q6(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hT("orderByChild","path",n,!1),new Y6(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new $s(this.database,hc(this._delegate,function J6(){return new X6}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new $s(this.database,hc(this._delegate,function t9(){return new e9}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new $s(this.database,hc(this._delegate,function r9(){return new n9}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new $s(this.database,hc(this._delegate,function $6(n=null,e){return dT("startAt","key",e,!0),new rj(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new $s(this.database,hc(this._delegate,function G6(n,e){return dT("startAfter","key",e,!0),new z6(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new $s(this.database,hc(this._delegate,function B6(n,e){return dT("endAt","key",e,!0),new nj(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new $s(this.database,hc(this._delegate,function H6(n,e){return dT("endBefore","key",e,!0),new j6(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new $s(this.database,hc(this._delegate,function s9(n,e){return dT("equalTo","key",e,!0),new i9(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof $s))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ba(this.database,new yl(this._delegate._repo,this._delegate._path))}}class ba extends $s{constructor(e,t){super(e,new Ko(t._repo,t._path,new ax,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ba(this.database,y_(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ba(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new ba(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=QN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,lj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_l("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=U6(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function F6(n,e,t){if(_l("setWithPriority",n._path),Lu("setWithPriority",e,n._path,!1),HN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return zN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function N6(n){return _l("remove",n._path),QN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function I9(n,e,t){var r;if(n=(0,O.m9)(n),_l("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new O.BH,d=XN(n,()=>{});return function S6(n,e,t,r,i,o){ME(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:sV(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=WN(n,e,void 0);l.currentInputSnapshot=d;const f=l.update(d.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{uT("transaction failed: Data returned ",f,l.path),l.status=0;const _=Tx(n.transactionQueueTree_,e),E=m_(_)||[];let D;E.push(l),VN(_,E),"object"==typeof f&&null!==f&&(0,O.r3)(f,".priority")?(D=(0,O.DV)(f,".priority"),(0,O.hu)(cT(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(Ix(n.serverSyncTree_,e)||tn.EMPTY_NODE).getPriority().val();const k=fT(n),V=li(f,D),z=LN(V,d,k);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=z,l.currentWriteId=Ax(n);const ee=RN(n.serverSyncTree_,e,z,l.currentWriteId,l.applyLocally);Ia(n.eventQueue_,e,ee),Rx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,_,E)=>{let D=null;f?o.reject(f):(D=new __(E,new yl(n._repo,n._path),kr),o.resolve(new w9(_,D)))},d,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new R9(o.committed,new Np(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function L6(n,e){n=(0,O.m9)(n),_l("setPriority",n._path),HN("setPriority",e,!1);const t=new O.BH;return zN(n._repo,Xr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function O6(n,e){n=(0,O.m9)(n),_l("push",n._path),Lu("push",e,n._path,!0);const t=FB(n._repo),r=P6(t),i=y_(n,r),o=y_(n,r);let l;return l=null!=e?QN(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ba(this.database,l));t&&i.then(()=>t(null),l=>t(l));const o=new ba(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return _l("Reference.onDisconnect",this._delegate._path),new A9(new KB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class mT{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:h9,forceLongPolling:f9}}useEmulator(e,t,r={}){!function aj(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Pu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new qb(qb.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);o=new qb(l)}!function a9(n,e,t,r){n.repoInfo_=new QO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof ba){const t=YB(this._delegate,e.toString());return new ba(this,t)}{const t=ZB(this._delegate,e);return new ba(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=YB(this._delegate,e);return new ba(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function p9(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),jB(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function g9(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function D6(n){n.persistentConnection_&&n.persistentConnection_.resume(LB)}(n._repo)}(this._delegate)}}mT.ServerValue={TIMESTAMP:function v9(){return y9}(),increment:n=>function E9(n){return{".sv":{increment:n}}}(n)};var M9=Object.freeze({__proto__:null,initStandalone:function x9({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){rV(t);const l=new gr.zt("auth-internal",new gr.H0("database-standalone"));return l.setComponent(new gr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new mT(sj(n,l,void 0,e,o),n),namespace:i}}});const k9=mT.ServerValue;function cj(n){return null==n}function uj(n){return"function"==typeof n.set}function dj(n,e){return uj(e)?e:n.ref(e)}function hj(n,e){if(function O9(n){return"string"==typeof n}(n))return e.stringCase();if(uj(n))return e.firebaseCase();if(function N9(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function _T(n,e,t="on",r=bg.z){return new oi.y(i=>{let o=null;return o=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Et.U)(i=>{const{snapshot:o,prevKey:l}=i;let d=null;return o.exists()&&(d=o.key),{type:e,payload:o,prevKey:l,key:d}}),(0,Qs.B)())}function fj(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function U9(n,e){const{payload:t,prevKey:r,key:i}=e,o=fj(n,i),l=function F9(n,e){if(cj(e))return 0;{const t=fj(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const _={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,_],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==r&&(n=n.filter(f=>f.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function pj(n){return(cj(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function gj(n,e,t){return function L9(n,e,t){return _T(n,"value","once",t).pipe((0,tr.w)(r=>{const i=[(0,It.of)(r)];return e.forEach(o=>i.push(_T(n,o,"on",t))),(0,ks.T)(...i).pipe(el(U9,[]))}),(0,Yw.x)())}(n,e=pj(e),t)}function mj(n,e,t){const r=(e=pj(e)).map(i=>_T(n,i,"on",t));return(0,ks.T)(...r)}function _j(n,e){return function(r,i){return hj(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function H9(n){return function(t){return t?hj(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function yj(n,e){return function(){return _T(n,"value","on",e)}}!function P9(n){n.INTERNAL.registerComponent(new gr.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new mT(i,r)},"PUBLIC").setServiceProps({Reference:ba,Query:$s,Database:mT,DataSnapshot:Np,enableLogging:m9,INTERNAL:M9,ServerValue:k9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(YC.Z);const G9=new p.OlP("angularfire2.realtimeDatabaseURL"),W9=new p.OlP("angularfire2.database.use-emulator");let vj=(()=>{class n{constructor(t,r,i,o,l,d,f,_,E,D,k,V,z,ee,de){this.schedulers=d;const je=f,Ke=(0,er.on)(t,l,r);_&&Ig(Ke,l,E,k,V,z,D,ee),this.database=(0,er.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const qe=l.runOutsideAngular(()=>Ke.database(i||void 0));return je&&qe.useEmulator(...je),qe},[je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>dj(this.database,t));let o=i;return r&&(o=r(i)),function $9(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:_j(r,"update"),set:_j(r,"set"),push:i=>r.push(i),remove:H9(r),snapshotChanges:i=>gj(n,i,t).pipe($t.iC),stateChanges:i=>mj(n,i,t).pipe($t.iC),auditTrail:i=>function V9(n,e,t){return function j9(n,e,t){return function B9(n,e){return _T(n,"value","on",e).pipe((0,Et.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function FW(...n){const e=(0,Sd.jO)(n);return(0,Vr.e)((t,r)=>{const i=n.length,o=new Array(i);let l=n.map(()=>!1),d=!1;for(let f=0;f<i;f++)(0,EE.Xf)(n[f]).subscribe((0,Yn.x)(r,_=>{o[f]=_,!d&&!l[f]&&(l[f]=!0,(d=l.every(ua.y))&&(l=null))},eV.Z));t.subscribe((0,Yn.x)(r,f=>{if(d){const _=[f,...o];r.next(e?e(..._):_)}}))})}(e),(0,Et.U)(([i,o])=>{const l=i.lastKeyToLoad,d=o.map(f=>f.key);return{actions:o,lastKeyToLoad:l,loadedKeys:d}}),function UW(n){return(0,Vr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Yn.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Et.U)(i=>i.actions))}(n,mj(n,e).pipe(el((i,o)=>[...i,o],[])),t)}(n,i,t).pipe($t.iC),valueChanges:(i,o)=>gj(n,i,t).pipe((0,Et.U)(d=>d.map(f=>o&&o.idField?Object.assign(Object.assign({},f.payload.val()),{[o.idField]:f.key}):f.payload.val())),$t.iC)}}(o,this)}object(t){return function z9(n,e){return{query:n,snapshotChanges:()=>yj(n,e.schedulers.outsideAngular)().pipe($t.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>yj(n,e.schedulers.outsideAngular)().pipe($t.iC,(0,Et.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>dj(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(er.Dh),p.LFG(er.xv,8),p.LFG(G9,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG($t.HU),p.LFG(W9,8),p.LFG(af,8),p.LFG(rf,8),p.LFG(sf,8),p.LFG(uw,8),p.LFG(dw,8),p.LFG(hw,8),p.LFG(oy,8),p.LFG(yg,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q9=(()=>{class n{constructor(){wg.Z.registerVersion("angularfire",$t.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[vj]}),n})();U(6710);class wj{constructor(){return(0,$t.vb)("auth")}}class n1{constructor(e){return e}}const Ij="storage",r1=new p.OlP("angularfire2.storage-instances");function J9(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new n1(r)}}const eq={provide:class Q9{constructor(){return(0,$t.vb)(Ij)}},deps:[[new p.FiY,r1]]},tq={provide:n1,useFactory:function X9(n,e){const t=(0,$t.JM)(Ij,n,e);return t&&new n1(t)},deps:[[new p.FiY,r1],class _o{constructor(e){return e}}]};let nq=(()=>{class n{constructor(){(0,Yh.KN)("angularfire",$t.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[tq,eq]}),n})();function rq(n,...e){return{ngModule:nq,providers:[{provide:r1,useFactory:J9(n),multi:!0,deps:[p.R0b,p.zs3,$t.HU,Hl,[new p.FiY,wj],[new p.FiY,yg],...e]}]}}const s1=(0,$t.u3)(HC,!0),iq=(0,$t.u3)(gf,!0),bj_firebase={apiKey:"AIzaSyCpKvN8eYnVGjGmnUFS70UhxqP9SQZ2HIk",authDomain:"fir-app-demo-acd72.firebaseapp.com",databaseURL:"https://fir-app-demo-acd72-default-rtdb.firebaseio.com",projectId:"fir-app-demo-acd72",storageBucket:"fir-app-demo-acd72.appspot.com",messagingSenderId:"315780365463",appId:"1:315780365463:web:42e83c38ef17d42b8b7dd2",measurementId:"G-91Y2LEH5BC"};var vl=U(5619);const{isArray:oq}=Array,{getPrototypeOf:aq,prototype:lq,keys:cq}=Object;const{isArray:hq}=Array;function Tj(n){return(0,Et.U)(e=>function fq(n,e){return hq(e)?n(...e):n(e)}(n,e))}var gq=U(7103);function Ox(...n){const e=(0,Sd.yG)(n),t=(0,Sd.jO)(n),{args:r,keys:i}=function uq(n){if(1===n.length){const e=n[0];if(oq(e))return{args:e,keys:null};if(function dq(n){return n&&"object"==typeof n&&aq(n)===lq}(e)){const t=cq(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Pn.D)([],e);const o=new oi.y(function mq(n,e,t=ua.y){return r=>{Cj(e,()=>{const{length:i}=n,o=new Array(i);let l=i,d=i;for(let f=0;f<i;f++)Cj(e,()=>{const _=(0,Pn.D)(n[f],e);let E=!1;_.subscribe((0,Yn.x)(r,D=>{o[f]=D,E||(E=!0,d--),d||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function pq(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):ua.y));return t?o.pipe(Tj(t)):o}function Cj(n,e,t){n?(0,gq.f)(t,n,e):e()}function Nx(n){return new oi.y(e=>{(0,EE.Xf)(n()).subscribe(e)})}var _q=U(8407);function yT(n,e){const t=(0,Si.m)(n)?n:()=>n,r=i=>i.error(t());return new oi.y(e?i=>e.schedule(r,0,i):r)}var PE=U(7394);function o1(){return(0,Vr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Dj extends oi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new PE.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=PE.w0.EMPTY)}return e}refCount(){return o1()(this)}}var oo=U(1631);function vT(n,e){return(0,Si.m)(e)?(0,oo.z)(n,e,1):(0,oo.z)(n,1)}var ao=U(9397);function v_(n){return(0,Vr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,Yn.x)(t,void 0,void 0,l=>{o=(0,EE.Xf)(n(l,v_(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function a1(n){return n<=0?()=>yi.E:(0,Vr.e)((e,t)=>{let r=[];e.subscribe((0,Yn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function l1(n){return(0,Vr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Lx(n){return(0,Vr.e)((e,t)=>{(0,EE.Xf)(n).subscribe((0,Yn.x)(t,()=>t.complete(),eV.Z)),!t.closed&&e.subscribe(t)})}const an="primary",ET=Symbol("RouteTitle");class Eq{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function OE(n){return new Eq(n)}function wq(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],d=n[o];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Fu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Sj(n[i],e[i]))return!1;return!0}function Sj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Aj(n){return n.length>0?n[n.length-1]:null}function Lp(n){return function sq(n){return!!n&&(n instanceof oi.y||(0,Si.m)(n.lift)&&(0,Si.m)(n.subscribe))}(n)?n:(0,p.QGY)(n)?(0,Pn.D)(Promise.resolve(n)):(0,It.of)(n)}const bq={exact:function Mj(n,e,t){if(!E_(n.segments,e.segments)||!Fx(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Mj(n.children[r],e.children[r],t))return!1;return!0},subset:kj},Rj={exact:function Tq(n,e){return Fu(n,e)},subset:function Cq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Sj(n[t],e[t]))},ignored:()=>!0};function xj(n,e,t){return bq[t.paths](n.root,e.root,t.matrixParams)&&Rj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kj(n,e,t){return Pj(n,e,e.segments,t)}function Pj(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!E_(i,t)||e.hasChildren()||!Fx(i,t,r))}if(n.segments.length===t.length){if(!E_(n.segments,t)||!Fx(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!kj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(E_(n.segments,i)&&Fx(n.segments,i,r)&&n.children[an])&&Pj(n.children[an],e,o,r)}}function Fx(n,e,t){return e.every((r,i)=>Rj[t](n[i].parameters,r.parameters))}class NE{constructor(e=new or([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=OE(this.queryParams)),this._queryParamMap}toString(){return Aq.serialize(this)}}class or{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ux(this)}}class wT{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=OE(this.parameters)),this._parameterMap}toString(){return Lj(this)}}function E_(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let IT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return new c1},providedIn:"root"})}return n})();class c1{parse(e){const t=new Vq(e);return new NE(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${bT(e.root,!0)}`,r=function Mq(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Vx(t)}=${Vx(i)}`).join("&"):`${Vx(t)}=${Vx(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Rq(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Aq=new c1;function Ux(n){return n.segments.map(e=>Lj(e)).join("/")}function bT(n,e){if(!n.hasChildren())return Ux(n);if(e){const t=n.children[an]?bT(n.children[an],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==an&&r.push(`${i}:${bT(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Sq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===an&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==an&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===an?[bT(n.children[an],!1)]:[`${i}:${bT(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[an]?`${Ux(n)}/${t[0]}`:`${Ux(n)}/(${t.join("//")})`}}function Oj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vx(n){return Oj(n).replace(/%3B/gi,";")}function u1(n){return Oj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bx(n){return decodeURIComponent(n)}function Nj(n){return Bx(n.replace(/\+/g,"%20"))}function Lj(n){return`${u1(n.path)}${function xq(n){return Object.keys(n).map(e=>`;${u1(e)}=${u1(n[e])}`).join("")}(n.parameters)}`}const kq=/^[^\/()?;#]+/;function d1(n){const e=n.match(kq);return e?e[0]:""}const Pq=/^[^\/()?;=#]+/,Nq=/^[^=?&#]+/,Fq=/^[^&#]+/;class Vq{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new or([],{}):new or([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[an]=new or(e,t)),r}parseSegment(){const e=d1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new wT(Bx(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Oq(n){const e=n.match(Pq);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=d1(this.remaining);i&&(r=i,this.capture(r))}e[Bx(t)]=Bx(r)}parseQueryParam(e){const t=function Lq(n){const e=n.match(Nq);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Uq(n){const e=n.match(Fq);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Nj(t),o=Nj(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=d1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=an);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[an]:new or([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function Fj(n){return n.segments.length>0?new or([],{[an]:n}):n}function Uj(n){const e={};for(const r of Object.keys(n.children)){const o=Uj(n.children[r]);if(r===an&&0===o.segments.length&&o.hasChildren())for(const[l,d]of Object.entries(o.children))e[l]=d;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Bq(n){if(1===n.numberOfChildren&&n.children[an]){const e=n.children[an];return new or(n.segments.concat(e.segments),e.children)}return n}(new or(n.segments,e))}function w_(n){return n instanceof NE}function Vj(n){let e;const i=Fj(function t(o){const l={};for(const f of o.children){const _=t(f);l[f.outlet]=_}const d=new or(o.url,l);return o===n&&(e=d),d}(n.root));return e??i}function Bj(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return h1(i,i,i,t,r);const o=function Hq(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Hj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return Object.entries(o.outlets).forEach(([f,_])=>{d[f]="string"==typeof _?_.split("/"):_}),[...i,{outlets:d}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,o]},[]);return new Hj(t,e,r)}(e);if(o.toRoot())return h1(i,i,new or([],{}),t,r);const l=function $q(n,e,t){if(n.isAbsolute)return new Hx(e,!0,0);if(!t)return new Hx(e,!1,NaN);if(null===t.parent)return new Hx(t,!0,0);const r=jx(n.commands[0])?0:1;return function zq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new Hx(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),d=l.processChildren?CT(l.segmentGroup,l.index,o.commands):$j(l.segmentGroup,l.index,o.commands);return h1(i,l.segmentGroup,d,t,r)}function jx(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function TT(n){return"object"==typeof n&&null!=n&&n.outlets}function h1(n,e,t,r,i){let l,o={};r&&Object.entries(r).forEach(([f,_])=>{o[f]=Array.isArray(_)?_.map(E=>`${E}`):`${_}`}),l=n===e?t:jj(n,e,t);const d=Fj(Uj(l));return new NE(d,o,i)}function jj(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:jj(o,e,t)}),new or(n.segments,r)}class Hj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&jx(r[0]))throw new p.vHH(4003,!1);const i=r.find(TT);if(i&&i!==Aj(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hx{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $j(n,e,t){if(n||(n=new or([],{})),0===n.segments.length&&n.hasChildren())return CT(n,e,t);const r=function Wq(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],d=t[r];if(TT(d))break;const f=`${d}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&_&&"object"==typeof _&&void 0===_.outlets){if(!Gj(f,_,l))return o;r+=2}else{if(!Gj(f,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new or(n.segments.slice(0,r.pathIndex),{});return o.children[an]=new or(n.segments.slice(r.pathIndex),n.children),CT(o,0,i)}return r.match&&0===i.length?new or(n.segments,{}):r.match&&!n.hasChildren()?f1(n,e,t):r.match?CT(n,0,i):f1(n,e,t)}function CT(n,e,t){if(0===t.length)return new or(n.segments,{});{const r=function Gq(n){return TT(n[0])?n[0].outlets:{[an]:n}}(t),i={};if(Object.keys(r).some(o=>o!==an)&&n.children[an]&&1===n.numberOfChildren&&0===n.children[an].segments.length){const o=CT(n.children[an],e,t);return new or(n.segments,o.children)}return Object.entries(r).forEach(([o,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[o]=$j(n.children[o],e,l))}),Object.entries(n.children).forEach(([o,l])=>{void 0===r[o]&&(i[o]=l)}),new or(n.segments,i)}}function f1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(TT(o)){const f=qq(o.outlets);return new or(r,f)}if(0===i&&jx(t[0])){r.push(new wT(n.segments[e].path,zj(t[0]))),i++;continue}const l=TT(o)?o.outlets[an]:`${o}`,d=i<t.length-1?t[i+1]:null;l&&d&&jx(d)?(r.push(new wT(l,zj(d))),i+=2):(r.push(new wT(l,{})),i++)}return new or(r,{})}function qq(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=f1(new or([],{}),0,r))}),e}function zj(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Gj(n,e,t){return n==t.path&&Fu(e,t.parameters)}const DT="imperative";class Uu{constructor(e,t){this.id=e,this.url=t}}class $x extends Uu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fp extends Uu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ST extends Uu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class LE extends Uu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class zx extends Uu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wj extends Uu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kq extends Uu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zq extends Uu{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yq extends Uu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qq extends Uu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xq{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jq{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class e5{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t5{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qj{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class p1{}class g1{constructor(e){this.url=e}}class s5{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new AT,this.attachRef=null}}let AT=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new s5,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Kj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=m1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=m1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=_1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _1(e,this._root).map(t=>t.value)}}function m1(n,e){if(n===e.value)return e;for(const t of e.children){const r=m1(n,t);if(r)return r}return null}function _1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=_1(n,t);if(r.length)return r.unshift(e),r}return[]}class gh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function FE(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Zj extends Kj{constructor(e,t){super(e),this.snapshot=t,y1(this,e)}toString(){return this.snapshot.toString()}}function Yj(n,e){const t=function o5(n,e){const l=new Gx([],{},{},"",{},an,e,null,{});return new Xj("",new gh(l,[]))}(0,e),r=new vl.X([new wT("",{})]),i=new vl.X({}),o=new vl.X({}),l=new vl.X({}),d=new vl.X(""),f=new UE(r,i,l,d,o,an,e,t.root);return f.snapshot=t.root,new Zj(new gh(f,[]),t)}class UE{constructor(e,t,r,i,o,l,d,f){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=l,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe((0,Et.U)(_=>_[ET]))??(0,It.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>OE(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>OE(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qj(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function a5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Gx{get title(){return this.data?.[ET]}constructor(e,t,r,i,o,l,d,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=d,this.routeConfig=f,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=OE(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=OE(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xj extends Kj{constructor(e,t){super(t),this.url=e,y1(this,t)}toString(){return Jj(this._root)}}function y1(n,e){e.value._routerState=n,e.children.forEach(t=>y1(n,t))}function Jj(n){const e=n.children.length>0?` { ${n.children.map(Jj).join(", ")} } `:"";return`${n.value}${e}`}function v1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fu(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fu(e.params,t.params)||n.paramsSubject.next(t.params),function Iq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Fu(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function E1(n,e){const t=Fu(n.params,e.params)&&function Dq(n,e){return E_(n,e)&&n.every((t,r)=>Fu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||E1(n.parent,e.parent))}let w1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=an,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(AT),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(Wx,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new l5(t,d,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]})}return n})();class l5{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===UE?this.route:e===AT?this.childContexts:this.parent.get(e,t)}}const Wx=new p.OlP("");let eH=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Ox([r.queryParams,r.params,r.data]).pipe((0,tr.w)(([o,l,d],f)=>(d={...o,...l,...d},0===f?(0,It.of)(d):Promise.resolve(d)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,p.qFp)(r.component);if(l)for(const{templateName:d}of l.inputs)t.activatedComponentRef.setInput(d,o[d]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();function RT(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function u5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return RT(n,r,i);return RT(n,r)})}(n,e,t);return new gh(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>RT(n,d)),l}}const r=function d5(n){return new UE(new vl.X(n.url),new vl.X(n.params),new vl.X(n.queryParams),new vl.X(n.fragment),new vl.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>RT(n,o));return new gh(r,i)}}const I1="ngNavigationCancelingError";function tH(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=w_(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nH(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function nH(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[I1]=!0,r.cancellationCode=e,t&&(r.url=t),r}function rH(n){return n&&n[I1]}let iH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(r,i){1&r&&p._UZ(0,"router-outlet")},dependencies:[w1],encapsulation:2})}return n})();function b1(n){const e=n.children&&n.children.map(b1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==an&&(t.component=iH),t}function fc(n){return n.outlet||an}function xT(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class v5{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),v1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=FE(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=FE(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=FE(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=FE(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new r5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new t5(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(v1(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),v1(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=xT(i.snapshot);l.attachRef=null,l.route=i,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class sH{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qx{constructor(e,t){this.component=e,this.route=t}}function E5(n,e,t){const r=n._root;return MT(r,e?e._root:null,t,[r.value])}function VE(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function MT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=FE(e);return n.children.forEach(l=>{(function I5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const f=function b5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!E_(n.url,e.url);case"pathParamsOrQueryParamsChange":return!E_(n.url,e.url)||!Fu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!E1(n,e)||!Fu(n.queryParams,e.queryParams);default:return!E1(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new sH(r)):(o.data=l.data,o._resolvedData=l._resolvedData),MT(n,e,o.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new qx(d.outlet.component,l))}else l&&kT(e,d,i),i.canActivateChecks.push(new sH(r)),MT(n,null,o.component?d?d.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,d])=>kT(d,t.getContext(l),i)),i}function kT(n,e,t){const r=FE(n),i=n.value;Object.entries(r).forEach(([o,l])=>{kT(l,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new qx(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function PT(n){return"function"==typeof n}function oH(n){return n instanceof jl||"EmptyError"===n?.name}const Kx=Symbol("INITIAL_VALUE");function BE(){return(0,tr.w)(n=>Ox(n.map(e=>e.pipe(pr(1),Ja(Kx)))).pipe((0,Et.U)(e=>{for(const t of e)if(!0!==t){if(t===Kx)return Kx;if(!1===t||t instanceof NE)return t}return!0}),rr(e=>e!==Kx),pr(1)))}function aH(n){return(0,_q.z)((0,ao.b)(e=>{if(w_(e))throw tH(0,e)}),(0,Et.U)(e=>!0===e))}class Zx{constructor(e){this.segmentGroup=e||null}}class lH{constructor(e){this.urlTree=e}}function jE(n){return yT(new Zx(n))}function cH(n){return yT(new lH(n))}class $5{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new p.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,It.of)(r);if(i.numberOfChildren>1||!i.children[an])return yT(new p.vHH(4e3,!1));i=i.children[an]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new NE(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const d=o.substring(1);r[i]=t[d]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([d,f])=>{l[d]=this.createSegmentGroup(e,f,r,i)}),new or(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const T1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function z5(n,e,t,r,i){const o=C1(n,e,t);return o.matched?(r=function f5(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function B5(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,It.of)(!0);const o=i.map(l=>{const d=VE(l,n);return Lp(function R5(n){return n&&PT(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))});return(0,It.of)(o).pipe(BE(),aH())}(r,e,t).pipe((0,Et.U)(l=>!0===l?o:{...T1}))):(0,It.of)(o)}function C1(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...T1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wq)(t,n,e);if(!i)return{...T1};const o={};Object.entries(i.posParams??{}).forEach(([d,f])=>{o[d]=f.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function uH(n,e,t,r){return t.length>0&&function q5(n,e,t){return t.some(r=>Yx(n,e,r)&&fc(r)!==an)}(n,t,r)?{segmentGroup:new or(e,W5(r,new or(t,n.children))),slicedSegments:[]}:0===t.length&&function K5(n,e,t){return t.some(r=>Yx(n,e,r))}(n,t,r)?{segmentGroup:new or(n.segments,G5(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new or(n.segments,n.children),slicedSegments:t}}function G5(n,e,t,r,i){const o={};for(const l of r)if(Yx(n,t,l)&&!i[fc(l)]){const d=new or([],{});o[fc(l)]=d}return{...i,...o}}function W5(n,e){const t={};t[an]=e;for(const r of n)if(""===r.path&&fc(r)!==an){const i=new or([],{});t[fc(r)]=i}return t}function Yx(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class X5{constructor(e,t,r,i,o,l,d){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new $5(this.urlSerializer,this.urlTree)}noMatchError(e){return new p.vHH(4002,!1)}recognize(){const e=uH(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,an).pipe(v_(t=>{if(t instanceof lH)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Zx?this.noMatchError(t):t}),(0,Et.U)(t=>{const r=new Gx([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},an,this.rootComponentType,null,{}),i=new gh(r,t),o=new Xj("",i),l=function jq(n,e,t=null,r=null){return Bj(Vj(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(o._root),{state:o,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,an).pipe(v_(r=>{throw r instanceof Zx?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Qj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Pn.D)(i).pipe(vT(o=>{const l=r.children[o],d=function _5(n,e){const t=n.filter(r=>fc(r)===e);return t.push(...n.filter(r=>fc(r)!==e)),t}(t,o);return this.processSegmentGroup(e,d,l,o)}),el((o,l)=>(o.push(...l),o)),Os(null),function yq(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rr((i,o)=>n(i,o,r)):ua.y,a1(1),t?Os(e):$c(()=>new jl))}(),(0,oo.z)(o=>{if(null===o)return jE(r);const l=dH(o);return function J5(n){n.sort((e,t)=>e.value.outlet===an?-1:t.value.outlet===an?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,It.of)(l)}))}processSegment(e,t,r,i,o,l){return(0,Pn.D)(t).pipe(vT(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,o,l).pipe(v_(f=>{if(f instanceof Zx)return(0,It.of)(null);throw f}))),Js(d=>!!d),v_(d=>{if(oH(d))return function Y5(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?(0,It.of)([]):jE(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,o,l,d){return function Z5(n,e,t,r){return!!(fc(n)===r||r!==an&&Yx(e,t,n))&&("**"===n.path||C1(e,n,t).matched)}(r,i,o,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,l,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,l):jE(i):jE(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cH(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,oo.z)(l=>{const d=new or(l,{});return this.processSegment(e,t,d,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:d,consumedSegments:f,remainingSegments:_,positionalParamSegments:E}=C1(t,i,o);if(!d)return jE(t);const D=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,E);return i.redirectTo.startsWith("/")?cH(D):this.applyRedirects.lineralizeSegments(i,D).pipe((0,oo.z)(k=>this.processSegment(e,r,t,k.concat(_),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,l){let d;if("**"===r.path){const f=i.length>0?Aj(i).parameters:{},_=new Gx(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hH(r),fc(r),r.component??r._loadedComponent??null,r,fH(r));d=(0,It.of)({snapshot:_,consumedSegments:[],remainingSegments:[]}),t.children={}}else d=z5(t,r,i,e).pipe((0,Et.U)(({matched:f,consumedSegments:_,remainingSegments:E,parameters:D})=>f?{snapshot:new Gx(_,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hH(r),fc(r),r.component??r._loadedComponent??null,r,fH(r)),consumedSegments:_,remainingSegments:E}:null));return d.pipe((0,tr.w)(f=>null===f?jE(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,tr.w)(({routes:_})=>{const E=r._loadedInjector??e,{snapshot:D,consumedSegments:k,remainingSegments:V}=f,{segmentGroup:z,slicedSegments:ee}=uH(t,k,V,_);if(0===ee.length&&z.hasChildren())return this.processChildren(E,_,z).pipe((0,Et.U)(je=>null===je?null:[new gh(D,je)]));if(0===_.length&&0===ee.length)return(0,It.of)([new gh(D,[])]);const de=fc(r)===o;return this.processSegment(E,_,z,ee,de?an:o,!0).pipe((0,Et.U)(je=>[new gh(D,je)]))}))))}getChildConfig(e,t,r){return t.children?(0,It.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,It.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function V5(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,It.of)(!0);const o=i.map(l=>{const d=VE(l,n);return Lp(function C5(n){return n&&PT(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))});return(0,It.of)(o).pipe(BE(),aH())}(e,t,r).pipe((0,oo.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ao.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function H5(n){return yT(nH(!1,3))}())):(0,It.of)({routes:[],injector:e})}}function e7(n){const e=n.value.routeConfig;return e&&""===e.path}function dH(n){const e=[],t=new Set;for(const r of n){if(!e7(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=dH(r.children);e.push(new gh(r.value,i))}return e.filter(r=>!t.has(r))}function hH(n){return n.data||{}}function fH(n){return n.resolve||{}}function pH(n){return"string"==typeof n.title||null===n.title}function D1(n){return(0,tr.w)(e=>{const t=n(e);return t?(0,Pn.D)(t).pipe((0,Et.U)(()=>e)):(0,It.of)(e)})}const HE=new p.OlP("ROUTES");let S1=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,It.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Lp(t.loadComponent()).pipe((0,Et.U)(gH),(0,ao.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),l1(()=>{this.componentLoaders.delete(t)})),i=new Dj(r,()=>new Sn.x).pipe(o1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,It.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function a7(n,e,t,r){return Lp(n.loadChildren()).pipe((0,Et.U)(gH),(0,oo.z)(i=>i instanceof p.YKP||Array.isArray(i)?(0,It.of)(i):(0,Pn.D)(e.compileModuleAsync(i))),(0,Et.U)(i=>{r&&r(n);let o,l,d=!1;return Array.isArray(i)?(l=i,!0):(o=i.create(t).injector,l=o.get(HE,[],{optional:!0,self:!0}).flat()),{routes:l.map(b1),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(l1(()=>{this.childrenLoaders.delete(r)})),l=new Dj(o,()=>new Sn.x).pipe(o1());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gH(n){return function l7(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Qx=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Sn.x,this.transitionAbortSubject=new Sn.x,this.configLoader=(0,p.f3M)(S1),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(IT),this.rootContexts=(0,p.f3M)(AT),this.inputBindingEnabled=null!==(0,p.f3M)(Wx,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,It.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Jq(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Xq(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new vl.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:DT,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rr(o=>0!==o.id),(0,Et.U)(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),(0,tr.w)(o=>{this.currentTransition=o;let l=!1,d=!1;return(0,It.of)(o).pipe((0,ao.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,tr.w)(f=>{const _=f.currentBrowserUrl.toString(),E=!t.navigated||f.extractedUrl.toString()!==_||_!==f.currentUrlTree.toString();if(!E&&"reload"!==(f.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const k="";return this.events.next(new LE(f.id,this.urlSerializer.serialize(f.rawUrl),k,0)),f.resolve(null),yi.E}if(t.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return(0,It.of)(f).pipe((0,tr.w)(k=>{const V=this.transitions?.getValue();return this.events.next(new $x(k.id,this.urlSerializer.serialize(k.extractedUrl),k.source,k.restoredState)),V!==this.transitions?.getValue()?yi.E:Promise.resolve(k)}),function t7(n,e,t,r,i,o){return(0,oo.z)(l=>function Q5(n,e,t,r,i,o,l="emptyOnly"){return new X5(n,e,t,r,i,l,o).recognize()}(n,e,t,r,l.extractedUrl,i,o).pipe((0,Et.U)(({state:d,tree:f})=>({...l,targetSnapshot:d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ao.b)(k=>{o.targetSnapshot=k.targetSnapshot,o.urlAfterRedirects=k.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:k.urlAfterRedirects};const V=new Wj(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(V)}));if(E&&t.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){const{id:k,extractedUrl:V,source:z,restoredState:ee,extras:de}=f,je=new $x(k,this.urlSerializer.serialize(V),z,ee);this.events.next(je);const Ke=Yj(0,this.rootComponentType).snapshot;return this.currentTransition=o={...f,targetSnapshot:Ke,urlAfterRedirects:V,extras:{...de,skipLocationChange:!1,replaceUrl:!1}},(0,It.of)(o)}{const k="";return this.events.next(new LE(f.id,this.urlSerializer.serialize(f.extractedUrl),k,1)),f.resolve(null),yi.E}}),(0,ao.b)(f=>{const _=new Kq(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),(0,Et.U)(f=>(this.currentTransition=o={...f,guards:E5(f.targetSnapshot,f.currentSnapshot,this.rootContexts)},o)),function M5(n,e){return(0,oo.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?(0,It.of)({...t,guardsResult:!0}):function k5(n,e,t,r){return(0,Pn.D)(n).pipe((0,oo.z)(i=>function U5(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,It.of)(!0);const l=o.map(d=>{const f=xT(e)??i,_=VE(d,f);return Lp(function A5(n){return n&&PT(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):f.runInContext(()=>_(n,e,t,r))).pipe(Js())});return(0,It.of)(l).pipe(BE())}(i.component,i.route,t,e,r)),Js(i=>!0!==i,!0))}(l,r,i,n).pipe((0,oo.z)(d=>d&&function T5(n){return"boolean"==typeof n}(d)?function P5(n,e,t,r){return(0,Pn.D)(e).pipe(vT(i=>vf(function N5(n,e){return null!==n&&e&&e(new e5(n)),(0,It.of)(!0)}(i.route.parent,r),function O5(n,e){return null!==n&&e&&e(new n5(n)),(0,It.of)(!0)}(i.route,r),function F5(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function w5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Nx(()=>{const d=l.guards.map(f=>{const _=xT(l.node)??t,E=VE(f,_);return Lp(function S5(n){return n&&PT(n.canActivateChild)}(E)?E.canActivateChild(r,n):_.runInContext(()=>E(r,n))).pipe(Js())});return(0,It.of)(d).pipe(BE())}));return(0,It.of)(o).pipe(BE())}(n,i.path,t),function L5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,It.of)(!0);const i=r.map(o=>Nx(()=>{const l=xT(e)??t,d=VE(o,l);return Lp(function D5(n){return n&&PT(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(Js())}));return(0,It.of)(i).pipe(BE())}(n,i.route,t))),Js(i=>!0!==i,!0))}(r,o,n,e):(0,It.of)(d)),(0,Et.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,f=>this.events.next(f)),(0,ao.b)(f=>{if(o.guardsResult=f.guardsResult,w_(f.guardsResult))throw tH(0,f.guardsResult);const _=new Zq(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(_)}),rr(f=>!!f.guardsResult||(this.cancelNavigationTransition(f,"",3),!1)),D1(f=>{if(f.guards.canActivateChecks.length)return(0,It.of)(f).pipe((0,ao.b)(_=>{const E=new Yq(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(E)}),(0,tr.w)(_=>{let E=!1;return(0,It.of)(_).pipe(function n7(n,e){return(0,oo.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,It.of)(t);let o=0;return(0,Pn.D)(i).pipe(vT(l=>function r7(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!pH(i)&&(o[ET]=i.title),function i7(n,e,t,r){const i=function s7(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,It.of)({});const o={};return(0,Pn.D)(i).pipe((0,oo.z)(l=>function o7(n,e,t,r){const i=xT(e)??r,o=VE(n,i);return Lp(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[l],e,t,r).pipe(Js(),(0,ao.b)(d=>{o[l]=d}))),a1(1),function vq(n){return(0,Et.U)(()=>n)}(o),v_(l=>oH(l)?yi.E:yT(l)))}(o,n,e,r).pipe((0,Et.U)(l=>(n._resolvedData=l,n.data=Qj(n,t).resolve,i&&pH(i)&&(n.data[ET]=i.title),null)))}(l.route,r,n,e)),(0,ao.b)(()=>o++),a1(1),(0,oo.z)(l=>o===i.length?(0,It.of)(t):yi.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ao.b)({next:()=>E=!0,complete:()=>{E||this.cancelNavigationTransition(_,"",2)}}))}),(0,ao.b)(_=>{const E=new Qq(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(E)}))}),D1(f=>{const _=E=>{const D=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,ao.b)(k=>{E.component=k}),(0,Et.U)(()=>{})));for(const k of E.children)D.push(..._(k));return D};return Ox(_(f.targetSnapshot.root)).pipe(Os(),pr(1))}),D1(()=>this.afterPreactivation()),(0,Et.U)(f=>{const _=function c5(n,e,t){const r=RT(n,e._root,t?t._root:void 0);return new Zj(r,e)}(t.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=o={...f,targetRouterState:_},o}),(0,ao.b)(()=>{this.events.next(new p1)}),((n,e,t,r)=>(0,Et.U)(i=>(new v5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),pr(1),(0,ao.b)({next:f=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),t.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{l=!0}}),Lx(this.transitionAbortSubject.pipe((0,ao.b)(f=>{throw f}))),l1(()=>{l||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),v_(f=>{if(d=!0,rH(f))this.events.next(new ST(o.id,this.urlSerializer.serialize(o.extractedUrl),f.message,f.cancellationCode)),function h5(n){return rH(n)&&w_(n.url)}(f)?this.events.next(new g1(f.url)):o.resolve(!1);else{this.events.next(new zx(o.id,this.urlSerializer.serialize(o.extractedUrl),f,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(f))}catch(_){o.reject(_)}}return yi.E}))}))}cancelNavigationTransition(t,r,i){const o=new ST(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mH(n){return n!==DT}let _H=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===an);return r}getResolvedTitleForRoute(t){return t.data[ET]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(c7)},providedIn:"root"})}return n})(),c7=(()=>{class n extends _H{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Le))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(h7)},providedIn:"root"})}return n})();class d7{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let h7=(()=>{class n extends d7{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}();static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xx=new p.OlP("",{providedIn:"root",factory:()=>({})});let f7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(p7)},providedIn:"root"})}return n})(),p7=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var OT=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(OT||{});function yH(n,e){n.events.pipe(rr(t=>t instanceof Fp||t instanceof ST||t instanceof zx||t instanceof LE),(0,Et.U)(t=>t instanceof Fp||t instanceof LE?OT.COMPLETE:t instanceof ST&&(0===t.code||1===t.code)?OT.REDIRECTING:OT.FAILED),rr(t=>t!==OT.REDIRECTING),pr(1)).subscribe(()=>{e()})}function g7(n){throw n}function m7(n,e,t){return e.parse("/")}const _7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},y7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this._events=new Sn.x,this.options=(0,p.f3M)(Xx,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||g7,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||m7,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(f7),this.routeReuseStrategy=(0,p.f3M)(u7),this.titleStrategy=(0,p.f3M)(_H),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(HE,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)(Qx),this.urlSerializer=(0,p.f3M)(IT),this.location=(0,p.f3M)(et),this.componentInputBindingEnabled=!!(0,p.f3M)(Wx,{optional:!0}),this.eventsSubscription=new PE.w0,this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new NE,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Yj(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(vH(r)&&this._events.next(r));if(r instanceof $x)mH(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof LE)this.rawUrlTree=i.rawUrl;else if(r instanceof Wj){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof p1)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ST)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof g1){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mH(i.source)};this.scheduleNavigation(o,DT,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof zx&&this.restoreHistory(i,!0),r instanceof Fp&&(this.navigated=!0),vH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),DT,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const f={...i};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(o.state=f)}const d=this.parseUrl(t);this.scheduleNavigation(d,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(b1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:d,preserveFragment:f}=r,_=f?this.currentUrlTree.fragment:l;let D,E=null;switch(d){case"merge":E={...this.currentUrlTree.queryParams,...o};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=o||null}null!==E&&(E=this.removeEmptyProps(E));try{D=Vj(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),D=this.currentUrlTree.root}return Bj(D,t,E,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=w_(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,DT,null,r)}navigate(t,r={skipLocationChange:!1}){return function v7(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new p.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{..._7}:!1===r?{...y7}:r,w_(t))return xj(this.currentUrlTree,t,i);const o=this.parseUrl(t);return xj(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let d,f,_;l?(d=l.resolve,f=l.reject,_=l.promise):_=new Promise((D,k)=>{d=D,f=k});const E=this.pendingTasks.add();return yH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:d,reject:f,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(D=>Promise.reject(D))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vH(n){return!(n instanceof p1||n instanceof g1)}let I_=(()=>{class n{constructor(t,r,i,o,l,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=l,this.locationStrategy=d,this.href=null,this.commands=null,this.onChanges=new Sn.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const f=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===f||"area"===f,this.isAnchorElement?this.subscription=t.events.subscribe(_=>{_ instanceof Fp&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Zo),p.Y36(UE),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(He))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&p.NdJ("click",function(l){return i.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&p.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",p.VuI],replaceUrl:["replaceUrl","replaceUrl",p.VuI],routerLink:"routerLink"},standalone:!0,features:[p.Xq5,p.TTD]})}return n})();class EH{}let I7=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(rr(t=>t instanceof Fp),vT(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,p.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,d=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(d,o.children??o._loadedRoutes))}return(0,Pn.D)(i).pipe((0,nu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,It.of)(null);const o=i.pipe((0,oo.z)(l=>null===l?(0,It.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Pn.D)([o,l]).pipe((0,nu.J)())}return o})}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Zo),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(EH),p.LFG(S1))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const A1=new p.OlP("");let wH=(()=>{class n{constructor(t,r,i,o,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $x?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fp?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof LE&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new qj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){p.$Z()};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();function mh(n,e){return{\u0275kind:n,\u0275providers:e}}function bH(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Zo),i=n.get(TH);1===n.get(R1)&&r.initialNavigation(),n.get(CH,null,p.XFs.Optional)?.setUpPreloading(),n.get(A1,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const TH=new p.OlP("",{factory:()=>new Sn.x}),R1=new p.OlP("",{providedIn:"root",factory:()=>1}),CH=new p.OlP("");function D7(n){return mh(0,[{provide:CH,useExisting:I7},{provide:EH,useExisting:n}])}const DH=new p.OlP("ROUTER_FORROOT_GUARD"),A7=[et,{provide:IT,useClass:c1},Zo,AT,{provide:UE,useFactory:function IH(n){return n.routerState.root},deps:[Zo]},S1,[]];function R7(){return new p.PXZ("Router",Zo)}let SH=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[A7,[],{provide:HE,multi:!0,useValue:t},{provide:DH,useFactory:P7,deps:[[Zo,new p.FiY,new p.tp0]]},{provide:Xx,useValue:r||{}},r?.useHash?{provide:He,useClass:Fe}:{provide:He,useClass:tt},{provide:A1,useFactory:()=>{const n=(0,p.f3M)(Ci),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(Xx),r=(0,p.f3M)(Qx),i=(0,p.f3M)(IT);return t.scrollOffset&&n.setOffset(t.scrollOffset),new wH(i,r,n,e,t)}},r?.preloadingStrategy?D7(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:R7},r?.initialNavigation?O7(r):[],r?.bindToComponentInputs?mh(8,[eH,{provide:Wx,useExisting:eH}]).\u0275providers:[],[{provide:AH,useFactory:bH},{provide:p.tb,multi:!0,useExisting:AH}]]}}static forChild(t){return{ngModule:n,providers:[{provide:HE,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(DH,8))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();function P7(n){return"guarded"}function O7(n){return["disabled"===n.initialNavigation?mh(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Zo);return()=>{e.setUpLocationChangeListener()}}},{provide:R1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?mh(2,[{provide:R1,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(Me,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Zo),o=e.get(TH);yH(i,()=>{r(!0)}),e.get(Qx).afterPreactivation=()=>(r(!0),o.closed?(0,It.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const AH=new p.OlP("");var x1=U(7582);const L7=function kH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},PH=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jx=new zr.Yd("@firebase/auth");function eM(n,...e){Jx.logLevel<=zr.in.ERROR&&Jx.error(`Auth (${dn.SDK_VERSION}): ${n}`,...e)}function Yo(n,...e){throw M1(n,...e)}function Vu(n,...e){return M1(n,...e)}function M1(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PH.create(n,...e)}function lt(n,e,...t){if(!n)throw M1(e,...t)}function Bu(n){const e="INTERNAL ASSERTION FAILED: "+n;throw eM(e),new Error(e)}function Up(n,e){n||Bu(e)}function NH(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class LT{constructor(e,t){this.shortDelay=e,this.longDelay=t,Up(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function U7(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function k1(){return"http:"===NH()||"https:"===NH()}()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class LH{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Bu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Bu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Bu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},j7=new LT(3e4,6e4);function Jr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ci(n,e,t,r){return O1.apply(this,arguments)}function O1(){return O1=(0,te.Z)(function*(n,e,t,r,i={}){return FH(n,i,(0,te.Z)(function*(){let o={},l={};r&&("GET"===e?l=r:o={body:JSON.stringify(r)});const d=(0,O.xO)(Object.assign({key:n.config.apiKey},l)).slice(1),f=yield n._getAdditionalHeaders();return f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode),LH.fetch()(UH(n,n.config.apiHost,t,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},o))}))}),O1.apply(this,arguments)}function FH(n,e,t){return N1.apply(this,arguments)}function N1(){return N1=(0,te.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},B7),e);try{const i=new H7(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=yield o.json();if("needConfirmation"in l)throw FT(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const d=o.ok?l.errorMessage:l.error.message,[f,_]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===f)throw FT(n,"credential-already-in-use",l);if("EMAIL_EXISTS"===f)throw FT(n,"email-already-in-use",l);if("USER_DISABLED"===f)throw FT(n,"user-disabled",l);const E=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw function OH(n,e,t){const r=Object.assign(Object.assign({},L7()),{[e]:t});return new O.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,E,_);Yo(n,E)}}catch(i){if(i instanceof O.ZR)throw i;Yo(n,"network-request-failed",{message:String(i)})}}),N1.apply(this,arguments)}function L1(){return L1=(0,te.Z)(function*(n,e,t,r,i={}){const o=yield ci(n,e,t,r,i);return"mfaPendingCredential"in o&&Yo(n,"multi-factor-auth-required",{_serverResponse:o}),o}),L1.apply(this,arguments)}function UH(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function P1(n,e){Up(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class H7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vu(this.auth,"network-request-failed")),j7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function FT(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Vu(n,e,r);return i.customData._tokenResponse=t,i}function V1(){return V1=(0,te.Z)(function*(n,e){return ci(n,"POST","/v1/accounts:delete",e)}),V1.apply(this,arguments)}function j1(){return j1=(0,te.Z)(function*(n,e){return ci(n,"POST","/v1/accounts:lookup",e)}),j1.apply(this,arguments)}function UT(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function H1(){return H1=(0,te.Z)(function*(n,e=!1){const t=(0,O.m9)(n),r=yield t.getIdToken(e),i=tM(r);lt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:UT($1(i.auth_time)),issuedAtTime:UT($1(i.iat)),expirationTime:UT($1(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}),H1.apply(this,arguments)}function $1(n){return 1e3*Number(n)}function tM(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return eM("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,O.tV)(t);return i?JSON.parse(i):(eM("Failed to decode base64 JWT payload"),null)}catch(i){return eM("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yh(n,e){return z1.apply(this,arguments)}function z1(){return z1=(0,te.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof O.ZR&&function Z7({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),z1.apply(this,arguments)}class Y7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,te.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,te.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class BH{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=UT(this.lastLoginAt),this.creationTime=UT(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function VT(n){return G1.apply(this,arguments)}function G1(){return G1=(0,te.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield yh(n,function W7(n,e){return j1.apply(this,arguments)}(t,{idToken:r}));lt(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function J7(n){return n.map(e=>{var{providerId:t}=e,r=(0,x1._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],d=function X7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,l),E=!!n.isAnonymous&&!(n.email&&o.passwordHash||d?.length),D={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new BH(o.createdAt,o.lastLoginAt),isAnonymous:E};Object.assign(n,D)}),G1.apply(this,arguments)}function W1(){return W1=(0,te.Z)(function*(n){const e=(0,O.m9)(n);yield VT(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),W1.apply(this,arguments)}function q1(){return q1=(0,te.Z)(function*(n,e){const t=yield FH(n,{},(0,te.Z)(function*(){const r=(0,O.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=UH(n,i,"/v1/token",`key=${o}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",LH.fetch()(l,{method:"POST",headers:d,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),q1.apply(this,arguments)}class BT{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function K7(n){const e=tM(n);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,te.Z)(function*(){return lt(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,te.Z)(function*(){const{accessToken:i,refreshToken:o,expiresIn:l}=yield function eK(n,e){return q1.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(l))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new BT;return r&&(lt("string"==typeof r,"internal-error",{appName:e}),l.refreshToken=r),i&&(lt("string"==typeof i,"internal-error",{appName:e}),l.accessToken=i),o&&(lt("number"==typeof o,"internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new BT,this.toJSON())}_performRefresh(){return Bu("not implemented")}}function Vp(n,e){lt("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class b_{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=(0,x1._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new BH(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,te.Z)(function*(){const r=yield yh(t,t.stsTokenManager.getToken(t.auth,e));return lt(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function q7(n){return H1.apply(this,arguments)}(this,e)}reload(){return function Q7(n){return W1.apply(this,arguments)}(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new b_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,te.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield VT(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,te.Z)(function*(){const t=yield e.getIdToken();return yield yh(e,function z7(n,e){return V1.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,d,f,_,E;const D=null!==(r=t.displayName)&&void 0!==r?r:void 0,k=null!==(i=t.email)&&void 0!==i?i:void 0,V=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,z=null!==(l=t.photoURL)&&void 0!==l?l:void 0,ee=null!==(d=t.tenantId)&&void 0!==d?d:void 0,de=null!==(f=t._redirectEventId)&&void 0!==f?f:void 0,je=null!==(_=t.createdAt)&&void 0!==_?_:void 0,Ke=null!==(E=t.lastLoginAt)&&void 0!==E?E:void 0,{uid:qe,emailVerified:Je,isAnonymous:Ot,providerData:Nt,stsTokenManager:vn}=t;lt(qe&&vn,e,"internal-error");const Hr=BT.fromJSON(this.name,vn);lt("string"==typeof qe,e,"internal-error"),Vp(D,e.name),Vp(k,e.name),lt("boolean"==typeof Je,e,"internal-error"),lt("boolean"==typeof Ot,e,"internal-error"),Vp(V,e.name),Vp(z,e.name),Vp(ee,e.name),Vp(de,e.name),Vp(je,e.name),Vp(Ke,e.name);const Yi=new b_({uid:qe,auth:e,email:k,emailVerified:Je,displayName:D,isAnonymous:Ot,photoURL:z,phoneNumber:V,tenantId:ee,stsTokenManager:Hr,createdAt:je,lastLoginAt:Ke});return Nt&&Array.isArray(Nt)&&(Yi.providerData=Nt.map(gc=>Object.assign({},gc))),de&&(Yi._redirectEventId=de),Yi}static _fromIdTokenResponse(e,t,r=!1){return(0,te.Z)(function*(){const i=new BT;i.updateFromServerResponse(t);const o=new b_({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield VT(o),o})()}}const jH=new Map;function vh(n){Up(n instanceof Function,"Expected a class definition");let e=jH.get(n);return e?(Up(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jH.set(n,e),e)}const HH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,te.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,te.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,te.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,te.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function nM(n,e,t){return`firebase:${n}:${e}:${t}`}class zE{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=nM(this.userKey,i.apiKey,o),this.fullPersistenceKey=nM("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,te.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?b_._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,te.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,te.Z)(function*(){if(!t.length)return new zE(vh(HH),e,r);const i=(yield Promise.all(t.map(function(){var _=(0,te.Z)(function*(E){if(yield E._isAvailable())return E});return function(E){return _.apply(this,arguments)}}()))).filter(_=>_);let o=i[0]||vh(HH);const l=nM(r,e.config.apiKey,e.name);let d=null;for(const _ of t)try{const E=yield _._get(l);if(E){const D=b_._fromJSON(e,E);_!==o&&(d=D),o=_;break}}catch{}const f=i.filter(_=>_._shouldAllowMigration);return o._shouldAllowMigration&&f.length?(o=f[0],d&&(yield o._set(l,d.toJSON())),yield Promise.all(t.map(function(){var _=(0,te.Z)(function*(E){if(E!==o)try{yield E._remove(l)}catch{}});return function(E){return _.apply(this,arguments)}}())),new zE(o,e,r)):new zE(o,e,r)})()}}function $H(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function WH(n=(0,O.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function zH(n=(0,O.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function KH(n=(0,O.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function ZH(n=(0,O.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function K1(n=(0,O.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function GH(n=(0,O.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function qH(n=(0,O.z$)()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function YH(n,e=[]){let t;switch(n){case"Browser":t=$H((0,O.z$)());break;case"Worker":t=`${$H((0,O.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dn.SDK_VERSION}/${r}`}class rK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,d)=>{try{l(e(o))}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,te.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function Z1(){return Z1=(0,te.Z)(function*(n,e={}){return ci(n,"GET","/v2/passwordPolicy",Jr(n,e))}),Z1.apply(this,arguments)}class oK{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=l.minPasswordLength)&&void 0!==t?t:6,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),void 0!==l.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),void 0!==l.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),void 0!==l.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),void 0!==l.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=null===(t=f.meetsMinPasswordLength)||void 0===t||t),f.isValid&&(f.isValid=null===(r=f.meetsMaxPasswordLength)||void 0===r||r),f.isValid&&(f.isValid=null===(i=f.containsLowercaseLetter)||void 0===i||i),f.isValid&&(f.isValid=null===(o=f.containsUppercaseLetter)||void 0===o||o),f.isValid&&(f.isValid=null===(l=f.containsNumericCharacter)||void 0===l||l),f.isValid&&(f.isValid=null===(d=f.containsNonAlphanumericCharacter)||void 0===d||d),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class aK{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QH(this),this.idTokenSubscription=new QH(this),this.beforeStateQueue=new rK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=vh(t)),this._initializationPromise=this.queue((0,te.Z)(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield zE.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,te.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,te.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,f=o?._redirectEventId,_=yield t.tryRedirectSignIn(e);(!d||d===f)&&_?.user&&(o=_.user,l=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{yield t.beforeStateQueue.runMiddleware(o)}catch(d){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return lt(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return(0,te.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,te.Z)(function*(){try{yield VT(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function V7(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,te.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,te.Z)(function*(){const r=e?(0,O.m9)(e):null;return r&&lt(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,te.Z)(function*(){if(!r._deleted)return e&&lt(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,te.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,te.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,te.Z)(function*(){yield t.assertedPersistence.setPersistence(vh(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,te.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,te.Z)(function*(){const t=yield function iK(n){return Z1.apply(this,arguments)}(e),r=new oK(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new O.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,te.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,te.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&vh(e)||t._popupRedirectResolver;lt(r,t,"argument-error"),t.redirectPersistenceManager=yield zE.create(t,[vh(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,te.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,te.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,te.Z)(function*(){if(e===t.currentUser)return t.queue((0,te.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(d,this,"internal-error"),d.then(()=>{l||o(this.currentUser)}),"function"==typeof t){const f=e.addObserver(t,r,i);return()=>{l=!0,f()}}{const f=e.addObserver(t);return()=>{l=!0,f()}}}directlySetCurrentUser(e){var t=this;return(0,te.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,te.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return(0,te.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function F7(n,...e){Jx.logLevel<=zr.in.WARN&&Jx.warn(`Auth (${dn.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class QH{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,O.ne)(t=>this.observer=t)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class yK{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bu("not implemented")}_getIdTokenResponse(e){return Bu("not implemented")}_linkToIdToken(e,t){return Bu("not implemented")}_getReauthenticationResolver(e){return Bu("not implemented")}}function Eh(n,e){return pL.apply(this,arguments)}function pL(){return pL=(0,te.Z)(function*(n,e){return function _h(n,e,t,r){return L1.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Jr(n,e))}),pL.apply(this,arguments)}class GE extends yK{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new GE(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=(0,x1._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new GE(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){return Eh(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Eh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,O.xO)(t)}return e}}class jp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class s$ extends jp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let kK=(()=>{class n extends s${constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return GE._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();(function XH(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new LT(3e4,6e4),new LT(2e3,1e4),new LT(3e4,6e4),new LT(5e3,15e3),encodeURIComponent("fac");var R$="@firebase/auth";class sZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,te.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,O.Pz)("authIdTokenMaxAge"),function aZ(n){(0,dn._registerComponent)(new gr.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;lt(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YH(n)},_=new aK(r,i,o,f);return function pK(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vh);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,dn._registerComponent)(new gr.wA("auth-internal",e=>{const t=function qi(n){return(0,O.m9)(n)}(e.getProvider("auth").getImmediate());return new sZ(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,dn.registerVersion)(R$,"1.3.0",function oZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,dn.registerVersion)(R$,"1.3.0","esm2017")}("Browser");let Hp=(()=>{class n{constructor(t,r,i,o){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=o,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(o=>{o&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new kK).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(JU),p.LFG(af),p.LFG(Zo),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dZ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Hp))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(r,i){if(1&r){const o=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Sign In"),p.qZA(),p.TgZ(5,"div",3),p._UZ(6,"input",4,5),p.qZA(),p.TgZ(8,"div",3),p._UZ(9,"input",6,7),p.qZA(),p.TgZ(11,"div",3)(12,"input",8),p.NdJ("click",function(){p.CHM(o);const d=p.MAs(7),f=p.MAs(10);return p.KtG(i.authService.SignIn(d.value,f.value))}),p.qZA()(),p.TgZ(13,"div",3)(14,"span",9)(15,"span",10),p._uU(16,"Or"),p.qZA()()(),p.TgZ(17,"div",11)(18,"span",12),p._uU(19,"Forgot Password?"),p.qZA()()(),p.TgZ(20,"div",13)(21,"span"),p._uU(22,"Don't have an account?"),p.TgZ(23,"span",14),p._uU(24," Sign Up"),p.qZA()()()()()}},dependencies:[I_]})}return n})(),hZ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Hp))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(r,i){if(1&r){const o=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Sign Up"),p.qZA(),p.TgZ(5,"div",3),p._UZ(6,"input",4,5),p.qZA(),p.TgZ(8,"div",3),p._UZ(9,"input",6,7),p.qZA(),p.TgZ(11,"div",3)(12,"input",8),p.NdJ("click",function(){p.CHM(o);const d=p.MAs(7),f=p.MAs(10);return p.KtG(i.authService.SignUp(d.value,f.value))}),p.qZA()(),p.TgZ(13,"div",3)(14,"span",9)(15,"span",10),p._uU(16,"Or"),p.qZA()()(),p.TgZ(17,"div",11)(18,"span"),p._uU(19,"Already have an account? "),p.TgZ(20,"span",12),p._uU(21,"Log In"),p.qZA()()()()()()}},dependencies:[I_]})}return n})(),k$=(()=>{class n{constructor(t){this.imageService=t}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(a2))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-image-detail"]],decls:18,vars:2,consts:[[1,"image-detail-container"],[1,"image-container"],[3,"src"],["id","close"],[3,"click"],["id","metadata"],[3,"href"],["id","delete",3,"click"]],template:function(r,i){1&r&&(p.TgZ(0,"div",0)(1,"div",1),p._UZ(2,"img",2),p.qZA(),p.TgZ(3,"div",3)(4,"button",4),p.NdJ("click",function(){return i.imageService.closeDetails()}),p._uU(5,"X"),p.qZA()(),p.TgZ(6,"div",5)(7,"h1"),p._uU(8," File Name: "),p.qZA(),p.TgZ(9,"p"),p._uU(10," Link: "),p.TgZ(11,"a",6),p._uU(12,"Link"),p.qZA()(),p.TgZ(13,"p"),p._uU(14," Created: "),p.qZA()(),p.TgZ(15,"div")(16,"button",7),p.NdJ("click",function(l){return i.imageService.deleteData(l)}),p._uU(17," Delete "),p.qZA()()()),2&r&&(p.xp6(2),p.s9C("src",i.imageService.deleteFile,p.LSH),p.xp6(9),p.s9C("href",i.imageService.deleteFile,p.LSH))}})}return n})();function P$(n,e=0){return function fZ(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function gM(n){return Array.isArray(n)?n:[n]}function Zi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function qE(n){return n instanceof p.SBq?n.nativeElement:n}var pZ=U(4266);const gZ=["addListener","removeListener"],mZ=["addEventListener","removeEventListener"],_Z=["on","off"];function BF(n,e,t,r){if((0,Si.m)(t)&&(r=t,t=void 0),r)return BF(n,e,t).pipe(Tj(r));const[i,o]=function EZ(n){return(0,Si.m)(n.addEventListener)&&(0,Si.m)(n.removeEventListener)}(n)?mZ.map(l=>d=>n[l](e,d,t)):function yZ(n){return(0,Si.m)(n.addListener)&&(0,Si.m)(n.removeListener)}(n)?gZ.map(O$(n,e)):function vZ(n){return(0,Si.m)(n.on)&&(0,Si.m)(n.off)}(n)?_Z.map(O$(n,e)):[];if(!i&&(0,pZ.z)(n))return(0,oo.z)(l=>BF(l,e,t))((0,EE.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new oi.y(l=>{const d=(...f)=>l.next(1<f.length?f:f[0]);return i(d),()=>o(d)})}function O$(n,e){return t=>r=>n[t](e,r)}var N$=U(1954);const zT={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=zT;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new PE.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=zT;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=zT;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var L$=U(2631);new class IZ extends L$.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class wZ extends N$.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=zT.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(zT.cancelAnimationFrame(t),e._scheduled=void 0)}});let jF,TZ=1;const mM={};function F$(n){return n in mM&&(delete mM[n],!0)}const CZ={setImmediate(n){const e=TZ++;return mM[e]=!0,jF||(jF=Promise.resolve()),jF.then(()=>F$(e)&&n()),e},clearImmediate(n){F$(n)}},{setImmediate:DZ,clearImmediate:SZ}=CZ,_M={setImmediate(...n){const{delegate:e}=_M;return(e?.setImmediate||DZ)(...n)},clearImmediate(n){const{delegate:e}=_M;return(e?.clearImmediate||SZ)(n)},delegate:void 0};new class RZ extends L$.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class AZ extends N$.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=_M.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(_M.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});var kZ=U(671);function U$(n,e=bg.z){return function MZ(n){return(0,Vr.e)((e,t)=>{let r=!1,i=null,o=null,l=!1;const d=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const _=i;i=null,t.next(_)}l&&t.complete()},f=()=>{o=null,l&&t.complete()};e.subscribe((0,Yn.x)(t,_=>{r=!0,i=_,o||(0,EE.Xf)(n(_)).subscribe(o=(0,Yn.x)(t,d,f))},()=>{l=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>function OZ(n=0,e,t=bg.P){let r=-1;return null!=e&&((0,kZ.K)(e)?t=e:r=e),new oi.y(i=>{let o=function PZ(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,e))}let HF;try{HF=typeof Intl<"u"&&Intl.v8BreakIterator}catch{HF=!1}let GT,D_,$F,ju=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Ch(n){return n===po}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!HF)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.Lbi))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yM(n){return function NZ(){if(null==GT&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>GT=!0}))}finally{GT=GT||!1}return GT}()?n:!!n.capture}function LZ(){if(null==D_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return D_=!1,D_;if("scrollBehavior"in document.documentElement.style)D_=!0;else{const n=Element.prototype.scrollTo;D_=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return D_}function zF(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function $p(n){return n.composedPath?n.composedPath()[0]:n.target}function GF(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const VZ=new p.OlP("cdk-dir-doc",{providedIn:"root",factory:function BZ(){return(0,p.f3M)(fe)}}),jZ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let WF=(()=>{class n{constructor(t){this.value="ltr",this.change=new p.vpe,t&&(this.value=function HZ(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?jZ.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(VZ,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})(),zZ=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Sn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new oi.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(U$(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,It.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(rr(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=qE(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>BF(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.R0b),p.LFG(ju),p.LFG(fe,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),B$=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Sn.x,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(U$(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ju),p.LFG(p.R0b),p.LFG(fe,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})(),H$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[WT,j$,WT,j$]})}return n})();class qF{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class KF extends qF{constructor(e,t,r,i,o){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=o}}class $$ extends qF{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class WZ extends qF{constructor(e){super(),this.element=e instanceof p.SBq?e.nativeElement:e}}class ZF{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof KF?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof $$?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof WZ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class qZ extends ZF{constructor(e,t,r,i,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=l=>{const d=l.element,f=this._document.createComment("dom-portal");d.parentNode.insertBefore(f,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=o}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||p.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let YF=(()=>{class n extends ZF{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new p.vpe,this.attachDomPortal=o=>{const l=o.element,d=this._document.createComment("dom-portal");o.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=o,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=r.createComponent(o,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p._Vd),p.Y36(p.s_b),p.Y36(fe))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[p.qOj]})}return n})(),EM=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();const z$=LZ();class KZ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Zi(-this._previousScrollPosition.left),e.style.top=Zi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,o=r.scrollBehavior||"",l=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),z$&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),z$&&(r.scrollBehavior=o,i.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class ZZ{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(rr(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class G${enable(){}disable(){}attach(){}}function QF(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function W$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class YZ{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();QF(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let QZ=(()=>{class n{constructor(t,r,i,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new G$,this.close=l=>new ZZ(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new KZ(this._viewportRuler,this._document),this.reposition=l=>new YZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=o}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(zZ),p.LFG(B$),p.LFG(p.R0b),p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class q${constructor(e){if(this.scrollStrategy=new G$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class XZ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let K$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JZ=(()=>{class n extends K${constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let l=o.length-1;l>-1;l--)if(o[l]._keydownEvents.observers.length>0){const d=o[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(i)):d.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(p.R0b,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eY=(()=>{class n extends K${constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=$p(o)},this._clickListener=o=>{const l=$p(o),d="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let _=f.length-1;_>-1;_--){const E=f[_];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(l)||E.overlayElement.contains(d))break;const D=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(o)):D.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(ju),p.LFG(p.R0b,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wM=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||GF()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),GF()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(ju))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class qT{constructor(e,t,r,i,o,l,d,f,_,E=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=l,this._document=d,this._location=f,this._outsideClickDispatcher=_,this._animationsDisabled=E,this._backdropElement=null,this._backdropClick=new Sn.x,this._attachments=new Sn.x,this._detachments=new Sn.x,this._locationChanges=PE.w0.EMPTY,this._backdropClickHandler=D=>this._backdropClick.next(D),this._backdropTransitionendHandler=D=>{this._disposeBackdrop(D.target)},this._keydownEvents=new Sn.x,this._outsidePointerEvents=new Sn.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(pr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Zi(this._config.width),e.height=Zi(this._config.height),e.minWidth=Zi(this._config.minWidth),e.minHeight=Zi(this._config.minHeight),e.maxWidth=Zi(this._config.maxWidth),e.maxHeight=Zi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=gM(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Lx((0,ks.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Z$="cdk-overlay-connected-position-bounding-box",tY=/([A-Za-z%]+)$/;class nY{get positions(){return this._preferredPositions}constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Sn.x,this._resizeSubscription=PE.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Z$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let l;for(let d of this._preferredPositions){let f=this._getOriginPoint(e,i,d),_=this._getOverlayPoint(f,t,d),E=this._getOverlayFit(_,t,r,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(E,_,r)?o.push({position:d,origin:f,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!l||l.overlayFit.visibleArea<E.visibleArea)&&(l={overlayFit:E,overlayPoint:_,originPoint:f,position:d,overlayRect:t})}if(o.length){let d=null,f=-1;for(const _ of o){const E=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);E>f&&(f=E,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&S_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Z$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,o;if("center"==r.originX)i=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;i="start"==r.originX?l:d}return t.left<0&&(i-=t.left),o="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){const o=Q$(t);let{x:l,y:d}=e,f=this._getOffset(i,"x"),_=this._getOffset(i,"y");f&&(l+=f),_&&(d+=_);let k=0-d,V=d+o.height-r.height,z=this._subtractOverflows(o.width,0-l,l+o.width-r.width),ee=this._subtractOverflows(o.height,k,V),de=z*ee;return{visibleArea:de,isCompletelyWithinViewport:o.width*o.height===de,fitsInViewportVertically:ee===o.height,fitsInViewportHorizontally:z==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,l=Y$(this._overlayRef.getConfig().minHeight),d=Y$(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=l&&l<=i)&&(e.fitsInViewportHorizontally||null!=d&&d<=o)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Q$(t),o=this._viewportRect,l=Math.max(e.x+i.width-o.width,0),d=Math.max(e.y+i.height-o.height,0),f=Math.max(o.top-r.top-e.y,0),_=Math.max(o.left-r.left-e.x,0);let E=0,D=0;return E=i.width<=o.width?_||-l:e.x<this._viewportMargin?o.left-r.left-e.x:0,D=i.height<=o.height?f||-d:e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:E,y:D},{x:e.x+E,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new XZ(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let o,l,d,E,D,k;if("top"===t.overlayY)l=e.y,o=r.height-l+this._viewportMargin;else if("bottom"===t.overlayY)d=r.height-e.y+2*this._viewportMargin,o=r.height-d+this._viewportMargin;else{const V=Math.min(r.bottom-e.y+r.top,e.y),z=this._lastBoundingBoxSize.height;o=2*V,l=e.y-V,o>z&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-z/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)k=r.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)D=e.x,E=r.right-e.x;else{const V=Math.min(r.right-e.x+r.left,e.x),z=this._lastBoundingBoxSize.width;E=2*V,D=e.x-V,E>z&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-z/2)}return{top:l,left:D,bottom:d,right:k,width:E,height:o}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;i.height=Zi(r.height),i.top=Zi(r.top),i.bottom=Zi(r.bottom),i.width=Zi(r.width),i.left=Zi(r.left),i.right=Zi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=Zi(o)),l&&(i.maxWidth=Zi(l))}this._lastBoundingBoxSize=r,S_(this._boundingBox.style,i)}_resetBoundingBoxStyles(){S_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){S_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();S_(r,this._getExactOverlayY(t,e,E)),S_(r,this._getExactOverlayX(t,e,E))}else r.position="static";let d="",f=this._getOffset(t,"x"),_=this._getOffset(t,"y");f&&(d+=`translateX(${f}px) `),_&&(d+=`translateY(${_}px)`),r.transform=d.trim(),l.maxHeight&&(i?r.maxHeight=Zi(l.maxHeight):o&&(r.maxHeight="")),l.maxWidth&&(i?r.maxWidth=Zi(l.maxWidth):o&&(r.maxWidth="")),S_(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=Zi(o.y),i}_getExactOverlayX(e,t,r){let l,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Zi(o.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:W$(e,r),isOriginOutsideView:QF(e,r),isOverlayClipped:W$(t,r),isOverlayOutsideView:QF(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&gM(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof p.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function S_(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Y$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(tY);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Q$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const X$="cdk-global-overlay-wrapper";class rY{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(X$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:l,maxHeight:d}=r,f=!("100%"!==i&&"100vw"!==i||l&&"100%"!==l&&"100vw"!==l),_=!("100%"!==o&&"100vh"!==o||d&&"100%"!==d&&"100vh"!==d),E=this._xPosition,D=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let V="",z="",ee="";f?ee="flex-start":"center"===E?(ee="center",k?z=D:V=D):k?"left"===E||"end"===E?(ee="flex-end",V=D):("right"===E||"start"===E)&&(ee="flex-start",z=D):"left"===E||"start"===E?(ee="flex-start",V=D):("right"===E||"end"===E)&&(ee="flex-end",z=D),e.position=this._cssPosition,e.marginLeft=f?"0":V,e.marginTop=_?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=f?"0":z,t.justifyContent=ee,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(X$),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let iY=(()=>{class n{constructor(t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new rY}flexibleConnectedTo(t){return new nY(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(B$),p.LFG(fe),p.LFG(ju),p.LFG(wM))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sY=0,ZE=(()=>{class n{constructor(t,r,i,o,l,d,f,_,E,D,k,V){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=l,this._injector=d,this._ngZone=f,this._document=_,this._directionality=E,this._location=D,this._outsideClickDispatcher=k,this._animationsModuleType=V}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),l=new q$(t);return l.direction=l.direction||this._directionality.value,new qT(o,r,i,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+sY++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(p.z2F)),new qZ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(QZ),p.LFG(wM),p.LFG(p._Vd),p.LFG(iY),p.LFG(JZ),p.LFG(p.zs3),p.LFG(p.R0b),p.LFG(fe),p.LFG(WF),p.LFG(et),p.LFG(eY),p.LFG(p.QbO,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const lY={provide:new p.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ZE],useFactory:function aY(n){return()=>n.scrollStrategies.reposition()}};let J$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:[ZE,lY],imports:[WT,EM,H$,H$]})}return n})();function tz(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function nz(n){return rr((e,t)=>n<=t)}let pY=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:[pY]})}return n})();const rz=new Set;let A_,mY=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):yY}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function _Y(n,e){if(!rz.has(n))try{A_||(A_=document.createElement("style"),e&&(A_.nonce=e),A_.setAttribute("type","text/css"),document.head.appendChild(A_)),A_.sheet&&(A_.sheet.insertRule(`@media ${n} {body{ }}`,0),rz.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ju),p.LFG(p.Ojb,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yY(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let vY=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Sn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return iz(gM(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=Ox(iz(gM(t)).map(l=>this._registerQuery(l).observable));return o=vf(o.pipe(pr(1)),o.pipe(nz(1),fw(0))),o.pipe((0,Et.U)(l=>{const d={matches:!1,breakpoints:{}};return l.forEach(({matches:f,query:_})=>{d.matches=d.matches||f,d.breakpoints[_]=f}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new oi.y(l=>{const d=f=>this._zone.run(()=>l.next(f));return r.addListener(d),()=>{r.removeListener(d)}}).pipe(Ja(r),(0,Et.U)(({matches:l})=>({query:t,matches:l})),Lx(this._destroySubject)),mql:r};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(mY),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iz(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let IM=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function bY(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function IY(n){try{return n.frameElement}catch{return null}}(function MY(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===lz(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=lz(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function RY(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function xY(n){return!function CY(n){return function SY(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function TY(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function DY(n){return function AY(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||az(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ju))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function az(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function lz(n){if(!az(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class kY{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,r,i,o=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(pr(1)).subscribe(e)}}let XF=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new kY(t,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(IM),p.LFG(p.R0b),p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cz(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function uz(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const PY=new p.OlP("cdk-input-modality-detector-options"),OY={ignoreKeys:[18,17,224,91,16]},YE=yM({passive:!0,capture:!0});let NY=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new vl.X(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(d=>d===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=$p(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(cz(l)?"keyboard":"mouse"),this._mostRecentTarget=$p(l))},this._onTouchstart=l=>{uz(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=$p(l))},this._options={...OY,...o},this.modalityDetected=this._modality.pipe(nz(1)),this.modalityChanged=this.modalityDetected.pipe((0,Yw.x)()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,YE),i.addEventListener("mousedown",this._onMousedown,YE),i.addEventListener("touchstart",this._onTouchstart,YE)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,YE),document.removeEventListener("mousedown",this._onMousedown,YE),document.removeEventListener("touchstart",this._onTouchstart,YE))}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ju),p.LFG(p.R0b),p.LFG(fe),p.LFG(PY,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const FY=new p.OlP("cdk-focus-monitor-default-options"),bM=yM({passive:!0,capture:!0});let JF=(()=>{class n{constructor(t,r,i,o,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Sn.x,this._rootNodeFocusAndBlurListener=d=>{for(let _=$p(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=o,this._detectionMode=l?.detectionMode||0}monitor(t,r=!1){const i=qE(t);if(!this._platform.isBrowser||1!==i.nodeType)return(0,It.of)();const o=function UZ(n){if(function FZ(){if(null==$F){const n=typeof document<"u"?document.head:null;$F=!(!n||!n.createShadowRoot&&!n.attachShadow)}return $F}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const d={checkChildren:r,subject:new Sn.x,rootNode:o};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=qE(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=qE(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([d,f])=>this._originChanged(d,r,f)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=$p(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,bM),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,bM)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Lx(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,bM),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,bM),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let l=0;l<o.length;l++)if(o[l].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.R0b),p.LFG(ju),p.LFG(NY),p.LFG(fe,8),p.LFG(FY,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hz="cdk-high-contrast-black-on-white",fz="cdk-high-contrast-white-on-black",e2="cdk-high-contrast-active";let pz=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,p.f3M)(vY).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(e2,hz,fz),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(e2,hz):2===r&&t.add(e2,fz)}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ju),p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UY=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(pz))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[gY]})}return n})();function VY(n,e){}class TM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let gz=(()=>{class n extends ZF{constructor(t,r,i,o,l,d,f,_){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=l,this._ngZone=d,this._overlayRef=f,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=E=>{this._portalOutlet.hasAttached();const D=this._portalOutlet.attachDomPortal(E);return this._contentAttached(),D},this._document=i,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=zF(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=zF();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=zF())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(XF),p.Y36(fe,8),p.Y36(TM),p.Y36(IM),p.Y36(p.R0b),p.Y36(qT),p.Y36(JF))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&p.Gf(YF,7),2&r){let o;p.iGM(o=p.CRH())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&p.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[p.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&p.YNc(0,VY,0,0,"ng-template",0)},dependencies:[YF],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class t2{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Sn.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!tz(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const mz=new p.OlP("DialogScrollStrategy"),BY=new p.OlP("DialogData"),jY=new p.OlP("DefaultDialogConfig"),$Y={provide:mz,deps:[ZE],useFactory:function HY(n){return()=>n.scrollStrategies.block()}};let zY=0,_z=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,r,i,o,l,d){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=o,this._overlayContainer=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Sn.x,this._afterOpenedAtThisLevel=new Sn.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Nx(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ja(void 0))),this._scrollStrategy=d}open(t,r){(r={...this._defaultOptions||new TM,...r}).id=r.id||"cdk-dialog-"+zY++,r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),l=this._overlay.create(o),d=new t2(l,r),f=this._attachContainer(l,d,r);return d.containerInstance=f,this._attachDialogContent(t,d,f,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){n2(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){n2(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),n2(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new q$({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const o=i.injector||i.viewContainerRef?.injector,l=[{provide:TM,useValue:i},{provide:t2,useValue:r},{provide:qT,useValue:t}];let d;i.container?"function"==typeof i.container?d=i.container:(d=i.container.type,l.push(...i.container.providers(i))):d=gz;const f=new KF(d,i.viewContainerRef,p.zs3.create({parent:o||this._injector,providers:l}),i.componentFactoryResolver);return t.attach(f).instance}_attachDialogContent(t,r,i,o){if(t instanceof p.Rgc){const l=this._createInjector(o,r,i,void 0);let d={$implicit:o.data,dialogRef:r};o.templateContext&&(d={...d,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),i.attachTemplatePortal(new $$(t,null,d,l))}else{const l=this._createInjector(o,r,i,this._injector),d=i.attachComponentPortal(new KF(t,o.viewContainerRef,l,o.componentFactoryResolver));r.componentRef=d,r.componentInstance=d.instance}}_createInjector(t,r,i,o){const l=t.injector||t.viewContainerRef?.injector,d=[{provide:BY,useValue:t.data},{provide:t2,useValue:r}];return t.providers&&("function"==typeof t.providers?d.push(...t.providers(r,t,i)):d.push(...t.providers)),t.direction&&(!l||!l.get(WF,null,{optional:!0}))&&d.push({provide:WF,useValue:{value:t.direction,change:(0,It.of)()}}),p.zs3.create({parent:l||o,providers:d})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,l)=>{o?l.setAttribute("aria-hidden",o):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const o=r[i];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ZE),p.LFG(p.zs3),p.LFG(jY,8),p.LFG(n,12),p.LFG(wM),p.LFG(mz))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();function n2(n,e){let t=n.length;for(;t--;)e(n[t])}let GY=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:[_z,$Y],imports:[J$,EM,UY,EM]})}return n})();const qY=new p.OlP("mat-sanity-checks",{providedIn:"root",factory:function WY(){return!0}});let Ez=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!GF()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(pz),p.LFG(qY,8),p.LFG(fe))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[WT,WT]})}return n})();const wz=yM({passive:!0,capture:!0});class YY{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=$p(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,r,i){const o=this._events.get(t);if(o){const l=o.get(r);l?l.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,wz)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const o=i.get(t);o&&(o.delete(r),0===o.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,wz)))}}class r2{static#e=this._eventManager=new YY;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=qE(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...Iz,...r.animation},l=r.radius||function XY(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,f=t-i.top,_=o.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=d-l+"px",E.style.top=f-l+"px",E.style.height=2*l+"px",E.style.width=2*l+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(E);const D=window.getComputedStyle(E),V=D.transitionDuration,z="none"===D.transitionProperty||"0s"===V||"0s, 0s"===V||0===i.width&&0===i.height,ee=new ZY(this,E,r,z);E.style.transform="scale3d(1, 1, 1)",ee.state=0,r.persistent||(this._mostRecentTransientRipple=ee);return!z&&(_||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const je=()=>this._finishRippleTransition(ee),Ke=()=>this._destroyRipple(ee);E.addEventListener("transitionend",je),E.addEventListener("transitioncancel",Ke)}),this._activeRipples.set(ee,null),(z||!_)&&this._finishRippleTransition(ee),ee}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...Iz,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=qE(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Tz.forEach(r=>{r2._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Cz.forEach(t=>{this._triggerElement.addEventListener(t,this,bz)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=cz(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!uz(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Tz.forEach(t=>r2._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Cz.forEach(t=>e.removeEventListener(t,this,bz)))}}class Dz{}class JY{}const wh="*";function Rz(n,e=null){return{type:2,steps:n,options:e}}function QE(n){return{type:6,styles:n,offset:null}}class ZT{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Oz{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==o&&this._onFinish()}),l.onDestroy(()=>{++r==o&&this._onDestroy()}),l.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function tQ(n,e){}class CM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const o2="mdc-dialog--open",Nz="mdc-dialog--opening",Lz="mdc-dialog--closing";let iQ=(()=>{class n extends gz{constructor(t,r,i,o,l,d,f,_){super(t,r,i,o,l,d,f,_),this._animationStateChanged=new p.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(XF),p.Y36(fe,8),p.Y36(CM),p.Y36(IM),p.Y36(p.R0b),p.Y36(qT),p.Y36(JF))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],features:[p.qOj],decls:0,vars:0,template:function(r,i){},encapsulation:2})}return n})();const Fz="--mat-dialog-transition-duration";function Uz(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?P$(n.substring(0,n.length-2)):n.endsWith("s")?1e3*P$(n.substring(0,n.length-1)):"0"===n?0:null}let sQ=(()=>{class n extends iQ{constructor(t,r,i,o,l,d,f,_,E){super(t,r,i,o,l,d,f,E),this._animationMode=_,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?Uz(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?Uz(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Fz,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Nz,o2)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(o2),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(o2),this._animationsEnabled?(this._hostElement.style.setProperty(Fz,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Lz)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(Nz,Lz)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(XF),p.Y36(fe,8),p.Y36(CM),p.Y36(IM),p.Y36(p.R0b),p.Y36(qT),p.Y36(p.QbO,8),p.Y36(JF))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,i){2&r&&(p.Ikx("id",i._config.id),p.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),p.ekj("_mat-animation-noopable",!i._animationsEnabled))},features:[p.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(p.TgZ(0,"div",0)(1,"div",1),p.YNc(2,tQ,0,0,"ng-template",2),p.qZA()())},dependencies:[YF],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class oQ{constructor(e,t,r){this._ref=e,this._containerInstance=r,this._afterOpened=new Sn.x,this._beforeClosed=new Sn.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,r._animationStateChanged.pipe(rr(i=>"opened"===i.state),pr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(rr(i=>"closed"===i.state),pr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,ks.T)(this.backdropClick(),this.keydownEvents().pipe(rr(i=>27===i.keyCode&&!this.disableClose&&!tz(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function aQ(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(rr(t=>"closing"===t.state),pr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const lQ=new p.OlP("MatMdcDialogData"),Vz=new p.OlP("mat-mdc-dialog-default-options"),Bz=new p.OlP("mat-mdc-dialog-scroll-strategy"),uQ={provide:Bz,deps:[ZE],useFactory:function cQ(n){return()=>n.scrollStrategies.block()}};let dQ=0,hQ=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,r,i,o,l,d,f,_,E,D){this._overlay=t,this._defaultOptions=i,this._parentDialog=o,this._dialogRefConstructor=f,this._dialogContainerType=_,this._dialogDataToken=E,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Sn.x,this._afterOpenedAtThisLevel=new Sn.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=CM,this.afterAllClosed=Nx(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ja(void 0))),this._scrollStrategy=d,this._dialog=r.get(_z)}open(t,r){let i;(r={...this._defaultOptions||new CM,...r}).id=r.id||`${this._idPrefix}${dQ++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:TM,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(l,d,f)=>(i=new this._dialogRefConstructor(l,r,f),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const l=this.openDialogs.indexOf(i);l>-1&&(this.openDialogs.splice(l,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static#e=this.\u0275fac=function(r){p.$Z()};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})(),jz=(()=>{class n extends hQ{constructor(t,r,i,o,l,d,f,_){super(t,r,o,d,f,l,oQ,sQ,lQ,_),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(ZE),p.LFG(p.zs3),p.LFG(et,8),p.LFG(Vz,8),p.LFG(Bz),p.LFG(n,12),p.LFG(wM),p.LFG(p.QbO,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})(),fQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:[jz,uQ],imports:[GY,J$,EM,Ez,Ez]})}return n})(),a2=(()=>{class n{constructor(t,r,i,o){this.afAuth=t,this.db=r,this.authService=i,this.dialog=o,this.imgList=[],this.storage=gf(),this.file={},this.deleteFile={},this.afAuth.authState.subscribe(l=>{null!=l&&(this.uid=l.uid)})}imageDetails(t){this.deleteFile=t.target.src,this.dialog.open(k$,{height:"400px",width:"600px",hasBackdrop:!0})}closeDetails(){this.dialog.closeAll()}listFiles(){var t=this;return(0,te.Z)(function*(){pf(Qa(t.storage,"users//"+t.authService.userData.uid)).then(i=>{console.log(i.items.length),i.items.forEach(o=>{s1(o).then(l=>{console.log("File available at ",l),t.imgList.push(l),i.items.length==t.imgList.length&&(t.canGenerateGallery=!0,console.log("gallery ready!"+t.canGenerateGallery))})})}).catch(i=>{})})()}onFileChange(t){var r=this;return(0,te.Z)(function*(){r.file=t.target.files[0],yield r.getImageUrl(),0==r.fileExists?r.canCreate=!0:1==r.fileExists&&(r.canCreate=!1)})()}getImageUrl(){var t=this;return(0,te.Z)(function*(){try{const r=Qa(t.storage,"users//"+t.authService.userData.uid+"/"+t.file.name),i=yield s1(r);return t.fileExists=!0,i}catch(r){return"object-not-found"==r.code?console.log("$category has no image for $imageId"):console.log("Error fetching image: $e"),t.fileExists=!1}})()}ngOnInit(){console.log("reinitializing...?")}deleteData(t){if(window.confirm("Are sure you want to delete this item ?")){var r=Qa(this.storage,this.deleteFile);console.log("deleting "+this.deleteFile),Ty(r).then(o=>{console.log(o+" deleted"),location.reload()}).catch(o=>{console.log("error occurred")})}}addData(){!0===this.canCreate?(console.log(this.canCreate+"uploading..."),jw(Qa(this.storage,"users//"+this.authService.userData.uid+"/"+this.file.name),this.file).then(i=>{location.reload()})):!1===this.canCreate?console.log("Could not upload..."):console.log("data uninitialized")}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(af),p.LFG(vj),p.LFG(Hp),p.LFG(jz))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pQ(n,e){if(1&n&&(p.TgZ(0,"div",6)(1,"div",7),p._UZ(2,"img",8),p.qZA()()),2&n){const t=e.$implicit;p.xp6(2),p.s9C("src",t,p.LSH)}}let gQ=(()=>{class n{constructor(t,r){this.imageService=t,this.authService=r,this.storage=gf(),this.imgList=[]}galleryBuild(){console.log("initialized~!");var t=document.querySelector("#gallery"),r=function(l,d){return parseInt(window.getComputedStyle(l).getPropertyValue(d))},i=function(l){return l.querySelector(".content").getBoundingClientRect().height};t.querySelectorAll("img").forEach(function(l){l.classList.add("byebye"),l.complete?console.log(l.src):l.addEventListener("load",function(){var d=r(t,"grid-auto-rows"),f=r(t,"grid-row-gap"),_=l.parentElement.parentElement;_.style.gridRowEnd="span "+Math.ceil((i(_)+f)/(d+f)),l.classList.remove("byebye")})}),window.addEventListener("resize",function(){var l=r(t,"grid-auto-rows"),d=r(t,"grid-row-gap");t.querySelectorAll(".gallery-item").forEach(function(f){f.style.gridRowEnd="span "+Math.ceil((i(f)+d)/(l+d))})})}createFlag(){(1==this.imageService.canGenerateGallery||null!=this.imageService.canGenerateGallery||null==this.imageService.canGenerateGallery||0==this.imageService.canGenerateGallery)&&(console.log("resetting..."),setTimeout(this.createFlag,1e3))}listFiles(){pf(Qa(this.storage,"users//"+this.authService.userData.uid)).then(r=>{console.log(r.items.length),r.items.forEach(i=>{s1(i).then(o=>{console.log("File available at ",o),this.imgList.push(o),r.items.length==this.imgList.length&&(this.canGenerateGallery=!0,console.log("gallery ready!"+this.canGenerateGallery),this.galleryBuild())})})}).catch(r=>{})}ngOnInit(){this.listFiles()}ngOnChanges(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(a2),p.Y36(Hp))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-gallery"]],features:[p.TTD],decls:10,vars:1,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["http-equiv","X-UA-Compatible","content","ie=edge"],["id","gallery",1,"gallery"],["class","gallery-item",4,"ngFor","ngForOf"],[1,"gallery-item"],[1,"content"],["alt","",3,"src"]],template:function(r,i){1&r&&(p.TgZ(0,"html",0)(1,"head"),p._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),p.qZA(),p.TgZ(5,"body")(6,"h1"),p._uU(7,"Masonry Gallery"),p.qZA(),p.TgZ(8,"div",4),p.YNc(9,pQ,3,1,"div",5),p.qZA()()()),2&r&&(p.xp6(9),p.Q6J("ngForOf",i.imgList))},dependencies:[Cl],styles:["body[_ngcontent-%COMP%]{background-color:#eee}.hello[_ngcontent-%COMP%]{opacity:1!important}.full[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100%;z-index:1}.full[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#000000bf!important;height:100%;width:100%;display:grid}.full[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{left:50%;transform:translateZ(0);animation:_ngcontent-%COMP%_zoomin 1s ease;max-width:100%;max-height:100%;margin:auto}.byebye[_ngcontent-%COMP%]{opacity:0}.byebye[_ngcontent-%COMP%]:hover{transform:scale(.2)!important}.gallery[_ngcontent-%COMP%]{display:grid;grid-column-gap:8px;grid-row-gap:8px;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-auto-rows:8px}.gallery[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;box-shadow:0 0 16px #333;transition:all 1.5s ease}.gallery[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{box-shadow:0 0 32px #333}.gallery[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:4px}.gallery[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{transition:grid-row-start .3s linear;transition:transform .3s ease;transition:all .5s ease;cursor:pointer}.gallery[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]:hover{transform:scale(1.025)}@media (max-width: 600px){.gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(30%,1fr))}}@media (max-width: 400px){.gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(50%,1fr))}}@keyframes _ngcontent-%COMP%_zoomin{0%{max-width:50%;transform:rotate(-30deg);filter:blur(4px)}30%{filter:blur(4px);transform:rotate(-80deg)}70%{max-width:50%;transform:rotate(45deg)}to{max-width:100%;transform:rotate(0)}}"]})}return n})();function mQ(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",4)(1,"div",18)(2,"div",19),p._UZ(3,"img",20),p.TgZ(4,"div",21)(5,"h1"),p._uU(6,"Hello: "),p.TgZ(7,"strong"),p._uU(8),p.qZA()(),p.TgZ(9,"p"),p._uU(10,"User ID: "),p.TgZ(11,"strong"),p._uU(12),p.qZA()(),p.TgZ(13,"p"),p._uU(14,"Email: "),p.TgZ(15,"strong"),p._uU(16),p.qZA()(),p.TgZ(17,"p"),p._uU(18,"Email Verified: "),p.TgZ(19,"strong"),p._uU(20),p.qZA()(),p.TgZ(21,"p")(22,"input",22),p.NdJ("change",function(i){p.CHM(t);const o=p.oxw();return p.KtG(o.imageService.onFileChange(i))}),p.qZA()(),p.TgZ(23,"p")(24,"button",23),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.imageService.addData())}),p._uU(25,"Upload File..."),p.qZA()(),p._UZ(26,"br")(27,"br")(28,"br")(29,"app-gallery"),p.qZA()()()()}if(2&n){const t=e.ngIf;p.xp6(3),p.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",p.LSH),p.s9C("alt",t.displayName),p.xp6(5),p.Oqu(t.displayName?t.displayName:"User"),p.xp6(4),p.Oqu(t.uid),p.xp6(4),p.Oqu(t.email),p.xp6(4),p.Oqu(t.emailVerified)}}let _Q=(()=>{class n{constructor(t,r){this.authService=t,this.imageService=r}ngOnInit(){console.log("dashbort")}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Hp),p.Y36(a2))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"],["type","file",3,"change"],[3,"click"]],template:function(r,i){1&r&&(p.TgZ(0,"nav",0)(1,"a",1),p._UZ(2,"img",2),p.qZA()(),p.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),p._UZ(10,"i",10),p._uU(11,"User Profile "),p.qZA()(),p.TgZ(12,"li",8)(13,"a",11),p.NdJ("click",function(){return i.authService.SignOut()}),p._UZ(14,"i",12),p._uU(15,"Log out "),p.qZA()()()()(),p.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),p._uU(20,"User Profile"),p.qZA()(),p.YNc(21,mQ,30,6,"div",17),p.qZA()()()()),2&r&&(p.xp6(21),p.Q6J("ngIf",i.authService.userData))},dependencies:[xa,gQ]})}return n})(),yQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Hp))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(r,i){if(1&r){const o=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Reset Password"),p.qZA(),p.TgZ(5,"p",3),p._uU(6,"Please enter your email address to request a password reset."),p.qZA(),p.TgZ(7,"div",4),p._UZ(8,"input",5,6),p.qZA(),p.TgZ(10,"div",4)(11,"input",7),p.NdJ("click",function(){p.CHM(o);const d=p.MAs(9);return p.KtG(i.authService.ForgotPassword(d.value))}),p.qZA()()(),p.TgZ(12,"div",8)(13,"span"),p._uU(14,"Go back to ? "),p.TgZ(15,"span",9),p._uU(16,"Log In"),p.qZA()()()()()}},dependencies:[I_]})}return n})();function vQ(n,e){if(1&n&&(p.TgZ(0,"div",4)(1,"p",9),p._uU(2,"We have sent a confirmation email to "),p.TgZ(3,"strong"),p._uU(4),p.qZA(),p._uU(5,"."),p.qZA(),p.TgZ(6,"p",9),p._uU(7,"Please check your email and click on the link to verfiy your email address."),p.qZA()()),2&n){const t=e.ngIf;p.xp6(4),p.Oqu(t.email)}}const EQ=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:dZ},{path:"register-user",component:hZ},{path:"dashboard",component:_Q,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Hp),p.LFG(Zo))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"forgot-password",component:yQ},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Hp))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(r,i){1&r&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Thank You for Registering"),p.qZA(),p.YNc(5,vQ,8,1,"div",3),p.TgZ(6,"div",4)(7,"button",5),p.NdJ("click",function(){return i.authService.SendVerificationMail()}),p._UZ(8,"i",6),p._uU(9," Resend Verification Email "),p.qZA()()(),p.TgZ(10,"div",7)(11,"span"),p._uU(12,"Go back to?"),p.TgZ(13,"span",8),p._uU(14," Sign in"),p.qZA()()()()()),2&r&&(p.xp6(5),p.Q6J("ngIf",i.authService.userData))},dependencies:[xa,I_]})}return n})()},{path:"image-detail",component:k$}];let wQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[SH.forRoot(EQ),SH]})}return n})(),IQ=(()=>{class n{constructor(){this.title="angular-firebase-app"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&p._UZ(0,"router-outlet")},dependencies:[w1]})}return n})();function $z(n){return new p.vHH(3e3,!1)}function zp(n){switch(n.length){case 0:return new ZT;case 1:return n[0];default:return new Oz(n)}}function zz(n,e,t=new Map,r=new Map){const i=[],o=[];let l=-1,d=null;if(e.forEach(f=>{const _=f.get("offset"),E=_==l,D=E&&d||new Map;f.forEach((k,V)=>{let z=V,ee=k;if("offset"!==V)switch(z=n.normalizePropertyName(z,i),ee){case"!":ee=t.get(V);break;case wh:ee=r.get(V);break;default:ee=n.normalizeStyleValue(V,z,ee,i)}D.set(z,ee)}),E||o.push(D),d=D,l=_}),i.length)throw function qQ(n){return new p.vHH(3502,!1)}();return o}function l2(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&c2(t,"start",n)));break;case"done":n.onDone(()=>r(t&&c2(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&c2(t,"destroy",n)))}}function c2(n,e,t){const o=u2(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(o._data=l),o}function u2(n,e,t,r,i="",o=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!l}}function Ta(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Gz(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}(0,dn.registerVersion)("firebase","10.4.0","app");const sX=(()=>typeof document>"u"?null:document.documentElement)();function d2(n){const e=n.parentNode||n.host||null;return e===sX?null:e}let R_=null,Wz=!1;function qz(n,e){for(;e;){if(e===n)return!0;e=d2(e)}return!1}function Kz(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let Zz=(()=>{class n{validateStyleProperty(t){return function aX(n){R_||(R_=function lX(){return typeof document<"u"?document.body:null}()||{},Wz=!!R_.style&&"WebkitAppearance"in R_.style);let e=!0;return R_.style&&!function oX(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in R_.style,!e&&Wz&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in R_.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return qz(t,r)}getParentElement(t){return d2(t)}query(t,r,i){return Kz(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,l,d=[],f){return new ZT(i,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})(),h2=(()=>{class n{static#e=this.NOOP=new Zz}return n})();const cX=1e3,f2="ng-enter",DM="ng-leave",SM="ng-trigger",AM=".ng-trigger",Qz="ng-animating",p2=".ng-animating";function Ih(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:g2(parseFloat(e[1]),e[2])}function g2(n,e){return"s"===e?n*cX:n}function RM(n,e,t){return n.hasOwnProperty("duration")?n:function dX(n,e,t){let i,o=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push($z()),{duration:0,delay:0,easing:""};i=g2(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(o=g2(parseFloat(f),d[4]));const _=d[5];_&&(l=_)}else i=n;if(!t){let d=!1,f=e.length;i<0&&(e.push(function CQ(){return new p.vHH(3100,!1)}()),d=!0),o<0&&(e.push(function DQ(){return new p.vHH(3101,!1)}()),d=!0),d&&e.splice(f,0,$z())}return{duration:i,delay:o,easing:l}}(n,e,t)}function YT(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Xz(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Gp(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Hu(n,e,t){e.forEach((r,i)=>{const o=_2(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function x_(n,e){e.forEach((t,r)=>{const i=_2(r);n.style[i]=""})}function QT(n){return Array.isArray(n)?1==n.length?n[0]:Rz(n):n}const m2=new RegExp("{{\\s*(.+?)\\s*}}","g");function eG(n){let e=[];if("string"==typeof n){let t;for(;t=m2.exec(n);)e.push(t[1]);m2.lastIndex=0}return e}function XT(n,e,t){const r=n.toString(),i=r.replace(m2,(o,l)=>{let d=e[l];return null==d&&(t.push(function AQ(n){return new p.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function xM(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const pX=/-+([a-z0-9])/g;function _2(n){return n.replace(pX,(...e)=>e[1].toUpperCase())}function Ca(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function RQ(n){return new p.vHH(3004,!1)}()}}function tG(n,e){return window.getComputedStyle(n)[e]}const MM="*";function _X(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function yX(n,e,t){if(":"==n[0]){const f=function vX(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function $Q(n){return new p.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof f)return void e.push(f);n=f}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function HQ(n){return new p.vHH(3015,!1)}()),e;const i=r[1],o=r[2],l=r[3];e.push(nG(i,l));"<"==o[0]&&!(i==MM&&l==MM)&&e.push(nG(l,i))}(r,t,e)):t.push(n),t}const kM=new Set(["true","1"]),PM=new Set(["false","0"]);function nG(n,e){const t=kM.has(n)||PM.has(n),r=kM.has(e)||PM.has(e);return(i,o)=>{let l=n==MM||n==i,d=e==MM||e==o;return!l&&t&&"boolean"==typeof i&&(l=i?kM.has(n):PM.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?kM.has(e):PM.has(e)),l&&d}}const EX=new RegExp("s*:selfs*,?","g");function y2(n,e,t,r){return new wX(n).build(e,t,r)}class wX{constructor(e){this._driver=e}build(e,t,r){const i=new TX(t);return this._resetContextStyleTimingState(i),Ca(this,QT(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function MQ(){return new p.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,_=f.name;_.toString().split(/\s*,\s*/).forEach(E=>{f.name=E,o.push(this.visitState(f,t))}),f.name=_}else if(1==d.type){const f=this.visitTransition(d,t);r+=f.queryCount,i+=f.depCount,l.push(f)}else t.errors.push(function kQ(){return new p.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,l=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{eG(f).forEach(_=>{l.hasOwnProperty(_)||o.add(_)})})}),o.size&&(xM(o.values()),t.errors.push(function PQ(n,e){return new p.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ca(this,QT(e.animation),t);return{type:1,matchers:_X(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:M_(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ca(this,r,t)),options:M_(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(l=>{t.currentTime=r;const d=Ca(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:o,options:M_(e.options)}}visitAnimate(e,t){const r=function DX(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return v2(RM(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=v2(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=RM(t,e);return v2(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:QE({});if(5==o.type)i=this.visitKeyframes(o,t);else{let l=e.styles,d=!1;if(!l){d=!0;const _={};r.easing&&(_.easing=r.easing),l=QE(_)}t.currentTime+=r.duration+r.delay;const f=this.visitStyle(l,t);f.isEmptyStep=d,i=f}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===wh?r.push(d):t.errors.push(new p.vHH(3002,!1)):r.push(Xz(d));let o=!1,l=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!o))for(let f of d.values())if(f.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,f)=>{const _=t.collectedStyles.get(t.currentQuerySelector),E=_.get(f);let D=!0;E&&(o!=i&&o>=E.startTime&&i<=E.endTime&&(t.errors.push(function NQ(n,e,t,r,i){return new p.vHH(3010,!1)}()),D=!1),o=E.startTime),D&&_.set(f,{startTime:o,endTime:i}),t.options&&function fX(n,e,t){const r=e.params||{},i=eG(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function SQ(n){return new p.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function LQ(){return new p.vHH(3011,!1)}()),r;let o=0;const l=[];let d=!1,f=!1,_=0;const E=e.steps.map(je=>{const Ke=this._makeStyleAst(je,t);let qe=null!=Ke.offset?Ke.offset:function CX(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),Je=0;return null!=qe&&(o++,Je=Ke.offset=qe),f=f||Je<0||Je>1,d=d||Je<_,_=Je,l.push(Je),Ke});f&&t.errors.push(function FQ(){return new p.vHH(3012,!1)}()),d&&t.errors.push(function UQ(){return new p.vHH(3200,!1)}());const D=e.steps.length;let k=0;o>0&&o<D?t.errors.push(function VQ(){return new p.vHH(3202,!1)}()):0==o&&(k=1/(D-1));const V=D-1,z=t.currentTime,ee=t.currentAnimateTimings,de=ee.duration;return E.forEach((je,Ke)=>{const qe=k>0?Ke==V?1:k*Ke:l[Ke],Je=qe*de;t.currentTime=z+ee.delay+Je,ee.duration=Je,this._validateStyleAst(je,t),je.offset=qe,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:Ca(this,QT(e.animation),t),options:M_(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:M_(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:M_(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,l]=function IX(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(EX,"")),n=n.replace(/@\*/g,AM).replace(/@\w+/g,t=>AM+"-"+t.slice(1)).replace(/:animating/g,p2),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Ta(t.collectedStyles,t.currentQuerySelector,new Map);const d=Ca(this,QT(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:M_(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function BQ(){return new p.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:RM(e.timings,t.errors,!0);return{type:12,animation:Ca(this,QT(e.animation),t),timings:r,options:null}}}class TX{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function M_(n){return n?(n=YT(n)).params&&(n.params=function bX(n){return n?YT(n):null}(n.params)):n={},n}function v2(n,e,t){return{duration:n,delay:e,easing:t}}function E2(n,e,t,r,i,o,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:l,subTimeline:d}}class OM{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const RX=new RegExp(":enter","g"),MX=new RegExp(":leave","g");function w2(n,e,t,r,i,o=new Map,l=new Map,d,f,_=[]){return(new kX).buildKeyframes(n,e,t,r,i,o,l,d,f,_)}class kX{buildKeyframes(e,t,r,i,o,l,d,f,_,E=[]){_=_||new OM;const D=new I2(e,t,_,i,o,E,[]);D.options=f;const k=f.delay?Ih(f.delay):0;D.currentTimeline.delayNextStep(k),D.currentTimeline.setStyles([l],null,D.errors,f),Ca(this,r,D);const V=D.timelines.filter(z=>z.containsAnimation());if(V.length&&d.size){let z;for(let ee=V.length-1;ee>=0;ee--){const de=V[ee];if(de.element===t){z=de;break}}z&&!z.allowOnlyTimelineStyles()&&z.setStyles([d],null,D.errors,f)}return V.length?V.map(z=>z.buildKeyframes()):[E2(t,[],[],[],0,k,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);o!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const l="number"==typeof o?o:Ih(XT(o,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const l=null!=r.duration?Ih(r.duration):null,d=null!=r.delay?Ih(r.delay):null;return 0!==l&&e.forEach(f=>{const _=t.appendInstructionToTimeline(f,l,d);o=Math.max(o,_.duration+_.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Ca(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=NM);const l=Ih(o.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Ca(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Ih(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);o&&d.delayNextStep(o),Ca(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return RM(t.params?XT(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*o),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Ih(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=NM);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((_,E)=>{t.currentQueryIndex=E;const D=t.createSubContext(e.options,_);o&&D.delayNextStep(o),_===t.element&&(f=D.currentTimeline),Ca(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,l=Math.abs(o.duration),d=l*(t.currentQueryTotal-1);let f=l*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":f=d-f;break;case"full":f=r.currentStaggerTime}const E=t.currentTimeline;f&&E.delayNextStep(f);const D=E.currentTime;Ca(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const NM={};class I2{constructor(e,t,r,i,o,l,d,f){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=NM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new LM(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ih(r.duration)),null!=r.delay&&(i.delay=Ih(r.delay));const o=r.params;if(o){let l=i.params;l||(l=this.options.params={}),Object.keys(o).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=XT(o[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new I2(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=NM,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new PX(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(RX,"."+this._enterClassName)).replace(MX,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),d.push(..._)}return!o&&0==d.length&&l.push(function jQ(n){return new p.vHH(3014,!1)}()),d}}class LM{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new LM(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||wh),this._currentKeyframe.set(t,wh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},l=function OX(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,wh)}else Gp(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,f]of l){const _=XT(f,o,r);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??wh),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,f)=>{const _=Gp(d,new Map,this._backFill);_.forEach((E,D)=>{"!"===E?e.add(D):E===wh&&t.add(D)}),r||_.set("offset",f/this.duration),i.push(_)});const o=e.size?xM(e.values()):[],l=t.size?xM(t.values()):[];if(r){const d=i[0],f=new Map(d);d.set("offset",0),f.set("offset",1),i=[d,f]}return E2(this.element,i,o,l,this.duration,this.startTime,this.easing,!1)}}class PX extends LM{constructor(e,t,r,i,o,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],l=r+t,d=t/l,f=Gp(e[0]);f.set("offset",0),o.push(f);const _=Gp(e[0]);_.set("offset",sG(d)),o.push(_);const E=e.length-1;for(let D=1;D<=E;D++){let k=Gp(e[D]);const V=k.get("offset");k.set("offset",sG((t+V*r)/l)),o.push(k)}r=l,t=0,i="",e=o}return E2(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function sG(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class b2{}const NX=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class LX extends b2{normalizePropertyName(e,t){return _2(e)}normalizeStyleValue(e,t,r,i){let o="";const l=r.toString().trim();if(NX.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function xQ(n,e){return new p.vHH(3005,!1)}())}return l+o}}function oG(n,e,t,r,i,o,l,d,f,_,E,D,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:l,timelines:d,queriedElements:f,preStyleProps:_,postStyleProps:E,totalTime:D,errors:k}}const T2={};class aG{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function FX(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,l,d,f,_,E){const D=[],k=this.ast.options&&this.ast.options.params||T2,z=this.buildStyles(r,d&&d.params||T2,D),ee=f&&f.params||T2,de=this.buildStyles(i,ee,D),je=new Set,Ke=new Map,qe=new Map,Je="void"===i,Ot={params:UX(ee,k),delay:this.ast.options?.delay},Nt=E?[]:w2(e,t,this.ast.animation,o,l,z,de,Ot,_,D);let vn=0;if(Nt.forEach(Yi=>{vn=Math.max(Yi.duration+Yi.delay,vn)}),D.length)return oG(t,this._triggerName,r,i,Je,z,de,[],[],Ke,qe,vn,D);Nt.forEach(Yi=>{const gc=Yi.element,IG=Ta(Ke,gc,new Set);Yi.preStyleProps.forEach(k_=>IG.add(k_));const eC=Ta(qe,gc,new Set);Yi.postStyleProps.forEach(k_=>eC.add(k_)),gc!==t&&je.add(gc)});const Hr=xM(je.values());return oG(t,this._triggerName,r,i,Je,z,de,Nt,Hr,Ke,qe,vn)}}function UX(n,e){const t=YT(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class VX{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=YT(this.defaultParams);return Object.keys(e).forEach(o=>{const l=e[o];null!==l&&(i[o]=l)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,d)=>{l&&(l=XT(l,i,t));const f=this.normalizer.normalizePropertyName(d,t);l=this.normalizer.normalizeStyleValue(d,f,l,t),r.set(d,l)})}),r}}class jX{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new VX(i.style,i.options&&i.options.params||{},r))}),lG(this.states,"true","1"),lG(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new aG(e,i,this.states))}),this.fallbackTransition=function HX(n,e,t){return new aG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function lG(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const $X=new OM;class zX{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=y2(this._driver,t,r,[]);if(r.length)throw function KQ(n){return new p.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=zz(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let l;const d=new Map;if(o?(l=w2(this._driver,t,o,f2,DM,new Map,new Map,r,$X,i),l.forEach(E=>{const D=Ta(d,E.element,new Map);E.postStyleProps.forEach(k=>D.set(k,null))})):(i.push(function ZQ(){return new p.vHH(3300,!1)}()),l=[]),i.length)throw function YQ(n){return new p.vHH(3504,!1)}();d.forEach((E,D)=>{E.forEach((k,V)=>{E.set(V,this._driver.computeStyle(D,V,wh))})});const _=zp(l.map(E=>{const D=d.get(E.element);return this._buildPlayer(E,new Map,D)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function QQ(n){return new p.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=u2(t,"","","");return l2(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const cG="ng-animate-queued",C2="ng-animate-disabled",ZX=[],uG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},YX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},pc="__ng_removed";class D2{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function eJ(n){return n??null}(r?e.value:e),r){const o=YT(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const JT="void",S2=new D2(JT);class QX{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,wl(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function XQ(n,e){return new p.vHH(3302,!1)}();if(null==r||0==r.length)throw function JQ(n){return new p.vHH(3303,!1)}();if(!function tJ(n){return"start"==n||"done"==n}(r))throw function eX(n,e){return new p.vHH(3400,!1)}();const o=Ta(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};o.push(l);const d=Ta(this._engine.statesByElement,e,new Map);return d.has(t)||(wl(e,SM),wl(e,SM+"-"+t),d.set(t,S2)),()=>{this._engine.afterFlush(()=>{const f=o.indexOf(l);f>=0&&o.splice(f,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function tX(n){return new p.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),l=new A2(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(wl(e,SM),wl(e,SM+"-"+t),this._engine.statesByElement.set(e,d=new Map));let f=d.get(t);const _=new D2(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&f&&_.absorbOptions(f.options),d.set(t,_),f||(f=S2),_.value!==JT&&f.value===_.value){if(!function iJ(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(f.params,_.params)){const ee=[],de=o.matchStyles(f.value,f.params,ee),je=o.matchStyles(_.value,_.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{x_(e,de),Hu(e,je)})}return}const k=Ta(this._engine.playersByElement,e,[]);k.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let V=o.matchTransition(f.value,_.value,e,_.params),z=!1;if(!V){if(!i)return;V=o.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:f,toState:_,player:l,isFallbackTransition:z}),z||(wl(e,cG),l.onStart(()=>{XE(e,cG)})),l.onDone(()=>{let ee=this.players.indexOf(l);ee>=0&&this.players.splice(ee,1);const de=this._engine.playersByElement.get(e);if(de){let je=de.indexOf(l);je>=0&&de.splice(je,1)}}),this.players.push(l),k.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,AM,!0);r.forEach(i=>{if(i[pc])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),l=new Map;if(o){const d=[];if(o.forEach((f,_)=>{if(l.set(_,f.value),this._triggers.has(_)){const E=this.trigger(e,_,JT,i);E&&d.push(E)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&zp(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const l=o.name;if(i.has(l))return;i.add(l);const f=this._triggers.get(l).fallbackTransition,_=r.get(l)||S2,E=new D2(JT),D=new A2(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:f,fromState:_,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[pc];(!o||o===uG)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){wl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,l=this._elementListeners.get(o);l&&l.forEach(d=>{if(d.name==r.triggerName){const f=u2(o,r.triggerName,r.fromState.value,r.toState.value);f._data=e,l2(r.player,d.phase,f,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class XX{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new QX(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,d=this.driver.getParentElement(t);for(;d;){const f=i.get(d);if(f){const _=r.indexOf(f);r.splice(_+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(FM(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!FM(t))return;const o=t[pc];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),wl(e,C2)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),XE(e,C2))}removeNode(e,t,r){if(FM(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[pc]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return FM(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,AM,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,p2,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[pc];if(t&&t.setForRemoval){if(e[pc]=uG,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(C2)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)wl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?zp(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function nX(n){return new p.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new OM,i=[],o=new Map,l=[],d=new Map,f=new Map,_=new Map,E=new Set;this.disabledNodes.forEach(Rt=>{E.add(Rt);const Ut=this.driver.query(Rt,".ng-animate-queued",!0);for(let Gt=0;Gt<Ut.length;Gt++)E.add(Ut[Gt])});const D=this.bodyNode,k=Array.from(this.statesByElement.keys()),V=fG(k,this.collectedEnterElements),z=new Map;let ee=0;V.forEach((Rt,Ut)=>{const Gt=f2+ee++;z.set(Ut,Gt),Rt.forEach(Vn=>wl(Vn,Gt))});const de=[],je=new Set,Ke=new Set;for(let Rt=0;Rt<this.collectedLeaveElements.length;Rt++){const Ut=this.collectedLeaveElements[Rt],Gt=Ut[pc];Gt&&Gt.setForRemoval&&(de.push(Ut),je.add(Ut),Gt.hasAnimation?this.driver.query(Ut,".ng-star-inserted",!0).forEach(Vn=>je.add(Vn)):Ke.add(Ut))}const qe=new Map,Je=fG(k,Array.from(je));Je.forEach((Rt,Ut)=>{const Gt=DM+ee++;qe.set(Ut,Gt),Rt.forEach(Vn=>wl(Vn,Gt))}),e.push(()=>{V.forEach((Rt,Ut)=>{const Gt=z.get(Ut);Rt.forEach(Vn=>XE(Vn,Gt))}),Je.forEach((Rt,Ut)=>{const Gt=qe.get(Ut);Rt.forEach(Vn=>XE(Vn,Gt))}),de.forEach(Rt=>{this.processLeaveNode(Rt)})});const Ot=[],Nt=[];for(let Rt=this._namespaceList.length-1;Rt>=0;Rt--)this._namespaceList[Rt].drainQueuedTransitions(t).forEach(Gt=>{const Vn=Gt.player,Ds=Gt.element;if(Ot.push(Vn),this.collectedEnterElements.length){const lo=Ds[pc];if(lo&&lo.setForMove){if(lo.previousTriggersValues&&lo.previousTriggersValues.has(Gt.triggerName)){const P_=lo.previousTriggersValues.get(Gt.triggerName),Il=this.statesByElement.get(Gt.element);if(Il&&Il.has(Gt.triggerName)){const BM=Il.get(Gt.triggerName);BM.value=P_,Il.set(Gt.triggerName,BM)}}return void Vn.destroy()}}const $u=!D||!this.driver.containsElement(D,Ds),Da=qe.get(Ds),Wp=z.get(Ds),ui=this._buildInstruction(Gt,r,Wp,Da,$u);if(ui.errors&&ui.errors.length)return void Nt.push(ui);if($u)return Vn.onStart(()=>x_(Ds,ui.fromStyles)),Vn.onDestroy(()=>Hu(Ds,ui.toStyles)),void i.push(Vn);if(Gt.isFallbackTransition)return Vn.onStart(()=>x_(Ds,ui.fromStyles)),Vn.onDestroy(()=>Hu(Ds,ui.toStyles)),void i.push(Vn);const CG=[];ui.timelines.forEach(lo=>{lo.stretchStartingKeyframe=!0,this.disabledNodes.has(lo.element)||CG.push(lo)}),ui.timelines=CG,r.append(Ds,ui.timelines),l.push({instruction:ui,player:Vn,element:Ds}),ui.queriedElements.forEach(lo=>Ta(d,lo,[]).push(Vn)),ui.preStyleProps.forEach((lo,P_)=>{if(lo.size){let Il=f.get(P_);Il||f.set(P_,Il=new Set),lo.forEach((BM,M2)=>Il.add(M2))}}),ui.postStyleProps.forEach((lo,P_)=>{let Il=_.get(P_);Il||_.set(P_,Il=new Set),lo.forEach((BM,M2)=>Il.add(M2))})});if(Nt.length){const Rt=[];Nt.forEach(Ut=>{Rt.push(function rX(n,e){return new p.vHH(3505,!1)}())}),Ot.forEach(Ut=>Ut.destroy()),this.reportError(Rt)}const vn=new Map,Hr=new Map;l.forEach(Rt=>{const Ut=Rt.element;r.has(Ut)&&(Hr.set(Ut,Ut),this._beforeAnimationBuild(Rt.player.namespaceId,Rt.instruction,vn))}),i.forEach(Rt=>{const Ut=Rt.element;this._getPreviousPlayers(Ut,!1,Rt.namespaceId,Rt.triggerName,null).forEach(Vn=>{Ta(vn,Ut,[]).push(Vn),Vn.destroy()})});const Yi=de.filter(Rt=>gG(Rt,f,_)),gc=new Map;hG(gc,this.driver,Ke,_,wh).forEach(Rt=>{gG(Rt,f,_)&&Yi.push(Rt)});const eC=new Map;V.forEach((Rt,Ut)=>{hG(eC,this.driver,new Set(Rt),f,"!")}),Yi.forEach(Rt=>{const Ut=gc.get(Rt),Gt=eC.get(Rt);gc.set(Rt,new Map([...Ut?.entries()??[],...Gt?.entries()??[]]))});const k_=[],bG=[],TG={};l.forEach(Rt=>{const{element:Ut,player:Gt,instruction:Vn}=Rt;if(r.has(Ut)){if(E.has(Ut))return Gt.onDestroy(()=>Hu(Ut,Vn.toStyles)),Gt.disabled=!0,Gt.overrideTotalTime(Vn.totalTime),void i.push(Gt);let Ds=TG;if(Hr.size>1){let Da=Ut;const Wp=[];for(;Da=Da.parentNode;){const ui=Hr.get(Da);if(ui){Ds=ui;break}Wp.push(Da)}Wp.forEach(ui=>Hr.set(ui,Ds))}const $u=this._buildAnimation(Gt.namespaceId,Vn,vn,o,eC,gc);if(Gt.setRealPlayer($u),Ds===TG)k_.push(Gt);else{const Da=this.playersByElement.get(Ds);Da&&Da.length&&(Gt.parentPlayer=zp(Da)),i.push(Gt)}}else x_(Ut,Vn.fromStyles),Gt.onDestroy(()=>Hu(Ut,Vn.toStyles)),bG.push(Gt),E.has(Ut)&&i.push(Gt)}),bG.forEach(Rt=>{const Ut=o.get(Rt.element);if(Ut&&Ut.length){const Gt=zp(Ut);Rt.setRealPlayer(Gt)}}),i.forEach(Rt=>{Rt.parentPlayer?Rt.syncPlayerEvents(Rt.parentPlayer):Rt.destroy()});for(let Rt=0;Rt<de.length;Rt++){const Ut=de[Rt],Gt=Ut[pc];if(XE(Ut,DM),Gt&&Gt.hasAnimation)continue;let Vn=[];if(d.size){let $u=d.get(Ut);$u&&$u.length&&Vn.push(...$u);let Da=this.driver.query(Ut,p2,!0);for(let Wp=0;Wp<Da.length;Wp++){let ui=d.get(Da[Wp]);ui&&ui.length&&Vn.push(...ui)}}const Ds=Vn.filter($u=>!$u.destroyed);Ds.length?nJ(this,Ut,Ds):this.processLeaveNode(Ut)}return de.length=0,k_.forEach(Rt=>{this.players.push(Rt),Rt.onDone(()=>{Rt.destroy();const Ut=this.players.indexOf(Rt);this.players.splice(Ut,1)}),Rt.play()}),k_}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const f=!o||o==JT;d.forEach(_=>{_.queued||!f&&_.triggerName!=i||l.push(_)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const o=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const _=f.element,E=_!==o,D=Ta(r,_,[]);this._getPreviousPlayers(_,E,l,d,t.toState).forEach(V=>{const z=V.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),V.destroy(),D.push(V)})}x_(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,l){const d=t.triggerName,f=t.element,_=[],E=new Set,D=new Set,k=t.timelines.map(z=>{const ee=z.element;E.add(ee);const de=ee[pc];if(de&&de.removedBeforeQueried)return new ZT(z.duration,z.delay);const je=ee!==f,Ke=function rJ(n){const e=[];return pG(n,e),e}((r.get(ee)||ZX).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===ee),qe=o.get(ee),Je=l.get(ee),Ot=zz(this._normalizer,z.keyframes,qe,Je),Nt=this._buildPlayer(z,Ot,Ke);if(z.subTimeline&&i&&D.add(ee),je){const vn=new A2(e,d,ee);vn.setRealPlayer(Nt),_.push(vn)}return Nt});_.forEach(z=>{Ta(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function JX(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,z.element,z))}),E.forEach(z=>wl(z,Qz));const V=zp(k);return V.onDestroy(()=>{E.forEach(z=>XE(z,Qz)),Hu(f,t.toStyles)}),D.forEach(z=>{Ta(i,z,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ZT(e.duration,e.delay)}}class A2{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ZT,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>l2(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ta(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function FM(n){return n&&1===n.nodeType}function dG(n,e){const t=n.style.display;return n.style.display=e??"none",t}function hG(n,e,t,r,i){const o=[];t.forEach(f=>o.push(dG(f)));const l=[];r.forEach((f,_)=>{const E=new Map;f.forEach(D=>{const k=e.computeStyle(_,D,i);E.set(D,k),(!k||0==k.length)&&(_[pc]=YX,l.push(_))}),n.set(_,E)});let d=0;return t.forEach(f=>dG(f,o[d++])),l}function fG(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),o=new Map;function l(d){if(!d)return 1;let f=o.get(d);if(f)return f;const _=d.parentNode;return f=t.has(_)?_:i.has(_)?1:l(_),o.set(d,f),f}return e.forEach(d=>{const f=l(d);1!==f&&t.get(f).push(d)}),t}function wl(n,e){n.classList?.add(e)}function XE(n,e){n.classList?.remove(e)}function nJ(n,e,t){zp(t).onDone(()=>n.processLeaveNode(e))}function pG(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Oz?pG(r.players,e):e.push(r)}}function gG(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class UM{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new XX(e,t,r),this._timelineEngine=new zX(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const f=[],E=y2(this._driver,o,f,[]);if(f.length)throw function WQ(n,e){return new p.vHH(3404,!1)}();d=function BX(n,e,t){return new jX(n,e,t)}(i,E,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,l]=Gz(r);this._timelineEngine.command(o,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[l,d]=Gz(r);return this._timelineEngine.listen(l,t,d,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let oJ=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Hu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Hu(this._element,this._initialStyles),this._endStyles&&(Hu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(x_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(x_(this._element,this._endStyles),this._endStyles=null),Hu(this._element,this._initialStyles),this._state=3)}}return n})();function R2(n){let e=null;return n.forEach((t,r)=>{(function aJ(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class mG{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:tG(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class lJ{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return qz(e,t)}getParentElement(e){return d2(e)}query(e,t,r){return Kz(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,l=[]){const f={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(f.easing=o);const _=new Map,E=l.filter(V=>V instanceof mG);(function gX(n,e){return 0===n||0===e})(r,i)&&E.forEach(V=>{V.currentSnapshot.forEach((z,ee)=>_.set(ee,z))});let D=function hX(n){return n.length?n[0]instanceof Map?n:n.map(e=>Xz(e)):[]}(t).map(V=>Gp(V));D=function mX(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,l)=>{r.has(l)||i.push(l),r.set(l,o)}),i.length)for(let o=1;o<e.length;o++){let l=e[o];i.forEach(d=>l.set(d,tG(n,d)))}}return e}(e,D,_);const k=function sJ(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=R2(e[0]),e.length>1&&(r=R2(e[e.length-1]))):e instanceof Map&&(t=R2(e)),t||r?new oJ(n,t,r):null}(e,D);return new mG(e,D,f,k)}}let cJ=(()=>{class n extends Dz{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:p.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Rz(t):t;return _G(this._renderer,null,r,"register",[i]),new uJ(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.FYo),p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class uJ extends JY{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new dJ(this._id,e,t||{},this._renderer)}}class dJ{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return _G(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function _G(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const yG="@.disabled";let hJ=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(o,l)=>{const d=l?.parentNode(o);d&&l.removeChild(d,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(o);return E||(E=new vG("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,E)),E}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=E=>{Array.isArray(E)?E.forEach(f):this.engine.registerTrigger(l,d,t,E.name,E)};return r.data.animation.forEach(f),new fJ(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[l,d]=o;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(p.FYo),p.LFG(UM),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class vG{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==yG?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class fJ extends vG{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==yG?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function pJ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function gJ(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let mJ=(()=>{class n extends UM{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(h2),p.LFG(b2),p.LFG(p.z2F))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const EG=[{provide:Dz,useClass:cJ},{provide:b2,useFactory:function _J(){return new LX}},{provide:UM,useClass:mJ},{provide:p.FYo,useFactory:function yJ(n,e,t){return new hJ(n,e,t)},deps:[Va,UM,p.R0b]}],x2=[{provide:h2,useFactory:()=>new lJ},{provide:p.QbO,useValue:"BrowserAnimations"},...EG],wG=[{provide:h2,useClass:Zz},{provide:p.QbO,useValue:"NoopAnimations"},...EG];let vJ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?wG:x2}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:x2,imports:[la]})}return n})();(0,dn.initializeApp)(bj_firebase);let EJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n,bootstrap:[IQ]});static#n=this.\u0275inj=p.cJS({providers:[{provide:Vz,useValue:{hasBackdrop:!1}}],imports:[la,wQ,er.hO.initializeApp(bj_firebase),ZM,LW,Lg,q9,rq(()=>iq()),vJ,fQ]})}return n})();Ur().bootstrapModule(EJ).catch(n=>console.error(n))},5619:(mt,Ae,U)=>{U.d(Ae,{X:()=>W});var p=U(8645);class W extends p.x{constructor(re){super(),this._value=re}get value(){return this.getValue()}_subscribe(re){const ue=super._subscribe(re);return!ue.closed&&re.next(this._value),ue}getValue(){const{hasError:re,thrownError:ue,_value:fe}=this;if(re)throw ue;return this._throwIfClosed(),fe}next(re){super.next(this._value=re)}}},5592:(mt,Ae,U)=>{U.d(Ae,{y:()=>Me});var p=U(305),W=U(7394),N=U(4850),re=U(8407),ue=U(2653),fe=U(4674),Ce=U(1441);let Me=(()=>{class le{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const tt=new le;return tt.source=this,tt.operator=Oe,tt}subscribe(Oe,tt,Fe){const et=function Q(le){return le&&le instanceof p.Lv||function G(le){return le&&(0,fe.m)(le.next)&&(0,fe.m)(le.error)&&(0,fe.m)(le.complete)}(le)&&(0,W.Nn)(le)}(Oe)?Oe:new p.Hp(Oe,tt,Fe);return(0,Ce.x)(()=>{const{operator:Ne,source:vt}=this;et.add(Ne?Ne.call(et,vt):vt?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(tt){Oe.error(tt)}}forEach(Oe,tt){return new(tt=Ee(tt))((Fe,et)=>{const Ne=new p.Hp({next:vt=>{try{Oe(vt)}catch(pt){et(pt),Ne.unsubscribe()}},error:et,complete:Fe});this.subscribe(Ne)})}_subscribe(Oe){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(Oe)}[N.L](){return this}pipe(...Oe){return(0,re.U)(Oe)(this)}toPromise(Oe){return new(Oe=Ee(Oe))((tt,Fe)=>{let et;this.subscribe(Ne=>et=Ne,Ne=>Fe(Ne),()=>tt(et))})}}return le.create=He=>new le(He),le})();function Ee(le){var He;return null!==(He=le??ue.config.Promise)&&void 0!==He?He:Promise}},8645:(mt,Ae,U)=>{U.d(Ae,{x:()=>Ce});var p=U(5592),W=U(7394);const re=(0,U(2306).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=U(9039),fe=U(1441);let Ce=(()=>{class Ee extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const le=new Me(this,this);return le.operator=Q,le}_throwIfClosed(){if(this.closed)throw new re}next(Q){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const le of this.currentObservers)le.next(Q)}})}error(Q){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:le}=this;for(;le.length;)le.shift().error(Q)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:le,isStopped:He,observers:Oe}=this;return le||He?W.Lc:(this.currentObservers=null,Oe.push(Q),new W.w0(()=>{this.currentObservers=null,(0,ue.P)(Oe,Q)}))}_checkFinalizedStatuses(Q){const{hasError:le,thrownError:He,isStopped:Oe}=this;le?Q.error(He):Oe&&Q.complete()}asObservable(){const Q=new p.y;return Q.source=this,Q}}return Ee.create=(G,Q)=>new Me(G,Q),Ee})();class Me extends Ce{constructor(G,Q){super(),this.destination=G,this.source=Q}next(G){var Q,le;null===(le=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===le||le.call(Q,G)}error(G){var Q,le;null===(le=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===le||le.call(Q,G)}complete(){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===Q||Q.call(G)}_subscribe(G){var Q,le;return null!==(le=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(G))&&void 0!==le?le:W.Lc}}},305:(mt,Ae,U)=>{U.d(Ae,{Hp:()=>Fe,Lv:()=>le});var p=U(4674),W=U(7394),N=U(2653),re=U(3894),ue=U(2420);const fe=Ee("C",void 0,void 0);function Ee(ce,Re,me){return{kind:ce,value:Re,error:me}}var G=U(7599),Q=U(1441);class le extends W.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,W.Nn)(Re)&&Re.add(this)):this.destination=pt}static create(Re,me,De){return new Fe(Re,me,De)}next(Re){this.isStopped?vt(function Me(ce){return Ee("N",ce,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?vt(function Ce(ce){return Ee("E",void 0,ce)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?vt(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Oe(ce,Re){return He.call(ce,Re)}class tt{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:me}=this;if(me.next)try{me.next(Re)}catch(De){et(De)}}error(Re){const{partialObserver:me}=this;if(me.error)try{me.error(Re)}catch(De){et(De)}else et(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(me){et(me)}}}class Fe extends le{constructor(Re,me,De){let Be;if(super(),(0,p.m)(Re)||!Re)Be={next:Re??void 0,error:me??void 0,complete:De??void 0};else{let Y;this&&N.config.useDeprecatedNextContext?(Y=Object.create(Re),Y.unsubscribe=()=>this.unsubscribe(),Be={next:Re.next&&Oe(Re.next,Y),error:Re.error&&Oe(Re.error,Y),complete:Re.complete&&Oe(Re.complete,Y)}):Be=Re}this.destination=new tt(Be)}}function et(ce){N.config.useDeprecatedSynchronousErrorHandling?(0,Q.O)(ce):(0,re.h)(ce)}function vt(ce,Re){const{onStoppedNotification:me}=N.config;me&&G.z.setTimeout(()=>me(ce,Re))}const pt={closed:!0,next:ue.Z,error:function Ne(ce){throw ce},complete:ue.Z}},7394:(mt,Ae,U)=>{U.d(Ae,{Lc:()=>fe,w0:()=>ue,Nn:()=>Ce});var p=U(4674);const N=(0,U(2306).d)(Ee=>function(Q){Ee(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((le,He)=>`${He+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var re=U(9039);class ue{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const Oe of Q)Oe.remove(this);else Q.remove(this);const{initialTeardown:le}=this;if((0,p.m)(le))try{le()}catch(Oe){G=Oe instanceof N?Oe.errors:[Oe]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Oe of He)try{Me(Oe)}catch(tt){G=G??[],tt instanceof N?G=[...G,...tt.errors]:G.push(tt)}}if(G)throw new N(G)}}add(G){var Q;if(G&&G!==this)if(this.closed)Me(G);else{if(G instanceof ue){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(G)}}_hasParent(G){const{_parentage:Q}=this;return Q===G||Array.isArray(Q)&&Q.includes(G)}_addParent(G){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(G),Q):Q?[Q,G]:G}_removeParent(G){const{_parentage:Q}=this;Q===G?this._parentage=null:Array.isArray(Q)&&(0,re.P)(Q,G)}remove(G){const{_finalizers:Q}=this;Q&&(0,re.P)(Q,G),G instanceof ue&&G._removeParent(this)}}ue.EMPTY=(()=>{const Ee=new ue;return Ee.closed=!0,Ee})();const fe=ue.EMPTY;function Ce(Ee){return Ee instanceof ue||Ee&&"closed"in Ee&&(0,p.m)(Ee.remove)&&(0,p.m)(Ee.add)&&(0,p.m)(Ee.unsubscribe)}function Me(Ee){(0,p.m)(Ee)?Ee():Ee.unsubscribe()}},2653:(mt,Ae,U)=>{U.d(Ae,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(mt,Ae,U)=>{U.d(Ae,{E:()=>W});const W=new(U(5592).y)(ue=>ue.complete())},2459:(mt,Ae,U)=>{U.d(Ae,{D:()=>Re});var p=U(4829),W=U(3093),N=U(5137),fe=U(5592),Me=U(4971),Ee=U(4674),G=U(7103);function le(me,De){if(!me)throw new Error("Iterable cannot be null");return new fe.y(Be=>{(0,G.f)(Be,De,()=>{const Y=me[Symbol.asyncIterator]();(0,G.f)(Be,De,()=>{Y.next().then(Pe=>{Pe.done?Be.complete():Be.next(Pe.value)})},0,!0)})})}var He=U(8382),Oe=U(4026),tt=U(4266),Fe=U(3664),et=U(5726),Ne=U(9853),vt=U(541);function Re(me,De){return De?function ce(me,De){if(null!=me){if((0,He.c)(me))return function re(me,De){return(0,p.Xf)(me).pipe((0,N.R)(De),(0,W.Q)(De))}(me,De);if((0,tt.z)(me))return function Ce(me,De){return new fe.y(Be=>{let Y=0;return De.schedule(function(){Y===me.length?Be.complete():(Be.next(me[Y++]),Be.closed||this.schedule())})})}(me,De);if((0,Oe.t)(me))return function ue(me,De){return(0,p.Xf)(me).pipe((0,N.R)(De),(0,W.Q)(De))}(me,De);if((0,et.D)(me))return le(me,De);if((0,Fe.T)(me))return function Q(me,De){return new fe.y(Be=>{let Y;return(0,G.f)(Be,De,()=>{Y=me[Me.h](),(0,G.f)(Be,De,()=>{let Pe,Ze;try{({value:Pe,done:Ze}=Y.next())}catch(bt){return void Be.error(bt)}Ze?Be.complete():Be.next(Pe)},0,!0)}),()=>(0,Ee.m)(Y?.return)&&Y.return()})}(me,De);if((0,vt.L)(me))return function pt(me,De){return le((0,vt.Q)(me),De)}(me,De)}throw(0,Ne.z)(me)}(me,De):(0,p.Xf)(me)}},4829:(mt,Ae,U)=>{U.d(Ae,{Xf:()=>He});var p=U(7582),W=U(4266),N=U(4026),re=U(5592),ue=U(8382),fe=U(5726),Ce=U(9853),Me=U(3664),Ee=U(541),G=U(4674),Q=U(3894),le=U(4850);function He(ce){if(ce instanceof re.y)return ce;if(null!=ce){if((0,ue.c)(ce))return function Oe(ce){return new re.y(Re=>{const me=ce[le.L]();if((0,G.m)(me.subscribe))return me.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,W.z)(ce))return function tt(ce){return new re.y(Re=>{for(let me=0;me<ce.length&&!Re.closed;me++)Re.next(ce[me]);Re.complete()})}(ce);if((0,N.t)(ce))return function Fe(ce){return new re.y(Re=>{ce.then(me=>{Re.closed||(Re.next(me),Re.complete())},me=>Re.error(me)).then(null,Q.h)})}(ce);if((0,fe.D)(ce))return Ne(ce);if((0,Me.T)(ce))return function et(ce){return new re.y(Re=>{for(const me of ce)if(Re.next(me),Re.closed)return;Re.complete()})}(ce);if((0,Ee.L)(ce))return function vt(ce){return Ne((0,Ee.Q)(ce))}(ce)}throw(0,Ce.z)(ce)}function Ne(ce){return new re.y(Re=>{(function pt(ce,Re){var me,De,Be,Y;return(0,p.mG)(this,void 0,void 0,function*(){try{for(me=(0,p.KL)(ce);!(De=yield me.next()).done;)if(Re.next(De.value),Re.closed)return}catch(Pe){Be={error:Pe}}finally{try{De&&!De.done&&(Y=me.return)&&(yield Y.call(me))}finally{if(Be)throw Be.error}}Re.complete()})})(ce,Re).catch(me=>Re.error(me))})}},3019:(mt,Ae,U)=>{U.d(Ae,{T:()=>fe});var p=U(7537),W=U(4829),N=U(6232),re=U(9940),ue=U(2459);function fe(...Ce){const Me=(0,re.yG)(Ce),Ee=(0,re._6)(Ce,1/0),G=Ce;return G.length?1===G.length?(0,W.Xf)(G[0]):(0,p.J)(Ee)((0,ue.D)(G,Me)):N.E}},2096:(mt,Ae,U)=>{U.d(Ae,{of:()=>N});var p=U(9940),W=U(2459);function N(...re){const ue=(0,p.yG)(re);return(0,W.D)(re,ue)}},8251:(mt,Ae,U)=>{U.d(Ae,{x:()=>W});var p=U(305);function W(re,ue,fe,Ce,Me){return new N(re,ue,fe,Ce,Me)}class N extends p.Lv{constructor(ue,fe,Ce,Me,Ee,G){super(ue),this.onFinalize=Ee,this.shouldUnsubscribe=G,this._next=fe?function(Q){try{fe(Q)}catch(le){ue.error(le)}}:super._next,this._error=Me?function(Q){try{Me(Q)}catch(le){ue.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(Q){ue.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},3997:(mt,Ae,U)=>{U.d(Ae,{x:()=>re});var p=U(2737),W=U(9360),N=U(8251);function re(fe,Ce=p.y){return fe=fe??ue,(0,W.e)((Me,Ee)=>{let G,Q=!0;Me.subscribe((0,N.x)(Ee,le=>{const He=Ce(le);(Q||!fe(G,He))&&(Q=!1,G=He,Ee.next(le))}))})}function ue(fe,Ce){return fe===Ce}},7398:(mt,Ae,U)=>{U.d(Ae,{U:()=>N});var p=U(9360),W=U(8251);function N(re,ue){return(0,p.e)((fe,Ce)=>{let Me=0;fe.subscribe((0,W.x)(Ce,Ee=>{Ce.next(re.call(ue,Ee,Me++))}))})}},7537:(mt,Ae,U)=>{U.d(Ae,{J:()=>N});var p=U(1631),W=U(2737);function N(re=1/0){return(0,p.z)(W.y,re)}},1631:(mt,Ae,U)=>{U.d(Ae,{z:()=>Me});var p=U(7398),W=U(4829),N=U(9360),re=U(7103),ue=U(8251),Ce=U(4674);function Me(Ee,G,Q=1/0){return(0,Ce.m)(G)?Me((le,He)=>(0,p.U)((Oe,tt)=>G(le,Oe,He,tt))((0,W.Xf)(Ee(le,He))),Q):("number"==typeof G&&(Q=G),(0,N.e)((le,He)=>function fe(Ee,G,Q,le,He,Oe,tt,Fe){const et=[];let Ne=0,vt=0,pt=!1;const ce=()=>{pt&&!et.length&&!Ne&&G.complete()},Re=De=>Ne<le?me(De):et.push(De),me=De=>{Oe&&G.next(De),Ne++;let Be=!1;(0,W.Xf)(Q(De,vt++)).subscribe((0,ue.x)(G,Y=>{He?.(Y),Oe?Re(Y):G.next(Y)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ne--;et.length&&Ne<le;){const Y=et.shift();tt?(0,re.f)(G,tt,()=>me(Y)):me(Y)}ce()}catch(Y){G.error(Y)}}))};return Ee.subscribe((0,ue.x)(G,Re,()=>{pt=!0,ce()})),()=>{Fe?.()}}(le,He,Ee,Q)))}},3093:(mt,Ae,U)=>{U.d(Ae,{Q:()=>re});var p=U(7103),W=U(9360),N=U(8251);function re(ue,fe=0){return(0,W.e)((Ce,Me)=>{Ce.subscribe((0,N.x)(Me,Ee=>(0,p.f)(Me,ue,()=>Me.next(Ee),fe),()=>(0,p.f)(Me,ue,()=>Me.complete(),fe),Ee=>(0,p.f)(Me,ue,()=>Me.error(Ee),fe)))})}},3020:(mt,Ae,U)=>{U.d(Ae,{B:()=>ue});var p=U(4829),W=U(8645),N=U(305),re=U(9360);function ue(Ce={}){const{connector:Me=(()=>new W.x),resetOnError:Ee=!0,resetOnComplete:G=!0,resetOnRefCountZero:Q=!0}=Ce;return le=>{let He,Oe,tt,Fe=0,et=!1,Ne=!1;const vt=()=>{Oe?.unsubscribe(),Oe=void 0},pt=()=>{vt(),He=tt=void 0,et=Ne=!1},ce=()=>{const Re=He;pt(),Re?.unsubscribe()};return(0,re.e)((Re,me)=>{Fe++,!Ne&&!et&&vt();const De=tt=tt??Me();me.add(()=>{Fe--,0===Fe&&!Ne&&!et&&(Oe=fe(ce,Q))}),De.subscribe(me),!He&&Fe>0&&(He=new N.Hp({next:Be=>De.next(Be),error:Be=>{Ne=!0,vt(),Oe=fe(pt,Ee,Be),De.error(Be)},complete:()=>{et=!0,vt(),Oe=fe(pt,G),De.complete()}}),(0,p.Xf)(Re).subscribe(He))})(le)}}function fe(Ce,Me,...Ee){if(!0===Me)return void Ce();if(!1===Me)return;const G=new N.Hp({next:()=>{G.unsubscribe(),Ce()}});return(0,p.Xf)(Me(...Ee)).subscribe(G)}},5137:(mt,Ae,U)=>{U.d(Ae,{R:()=>W});var p=U(9360);function W(N,re=0){return(0,p.e)((ue,fe)=>{fe.add(N.schedule(()=>ue.subscribe(fe),re))})}},4664:(mt,Ae,U)=>{U.d(Ae,{w:()=>re});var p=U(4829),W=U(9360),N=U(8251);function re(ue,fe){return(0,W.e)((Ce,Me)=>{let Ee=null,G=0,Q=!1;const le=()=>Q&&!Ee&&Me.complete();Ce.subscribe((0,N.x)(Me,He=>{Ee?.unsubscribe();let Oe=0;const tt=G++;(0,p.Xf)(ue(He,tt)).subscribe(Ee=(0,N.x)(Me,Fe=>Me.next(fe?fe(He,Fe,tt,Oe++):Fe),()=>{Ee=null,le()}))},()=>{Q=!0,le()}))})}},9397:(mt,Ae,U)=>{U.d(Ae,{b:()=>ue});var p=U(4674),W=U(9360),N=U(8251),re=U(2737);function ue(fe,Ce,Me){const Ee=(0,p.m)(fe)||Ce||Me?{next:fe,error:Ce,complete:Me}:fe;return Ee?(0,W.e)((G,Q)=>{var le;null===(le=Ee.subscribe)||void 0===le||le.call(Ee);let He=!0;G.subscribe((0,N.x)(Q,Oe=>{var tt;null===(tt=Ee.next)||void 0===tt||tt.call(Ee,Oe),Q.next(Oe)},()=>{var Oe;He=!1,null===(Oe=Ee.complete)||void 0===Oe||Oe.call(Ee),Q.complete()},Oe=>{var tt;He=!1,null===(tt=Ee.error)||void 0===tt||tt.call(Ee,Oe),Q.error(Oe)},()=>{var Oe,tt;He&&(null===(Oe=Ee.unsubscribe)||void 0===Oe||Oe.call(Ee)),null===(tt=Ee.finalize)||void 0===tt||tt.call(Ee)}))}):re.y}},1954:(mt,Ae,U)=>{U.d(Ae,{o:()=>ue});var p=U(7394);class W extends p.w0{constructor(Ce,Me){super()}schedule(Ce,Me=0){return this}}const N={setInterval(fe,Ce,...Me){const{delegate:Ee}=N;return Ee?.setInterval?Ee.setInterval(fe,Ce,...Me):setInterval(fe,Ce,...Me)},clearInterval(fe){const{delegate:Ce}=N;return(Ce?.clearInterval||clearInterval)(fe)},delegate:void 0};var re=U(9039);class ue extends W{constructor(Ce,Me){super(Ce,Me),this.scheduler=Ce,this.work=Me,this.pending=!1}schedule(Ce,Me=0){var Ee;if(this.closed)return this;this.state=Ce;const G=this.id,Q=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(Q,G,Me)),this.pending=!0,this.delay=Me,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(Q,this.id,Me),this}requestAsyncId(Ce,Me,Ee=0){return N.setInterval(Ce.flush.bind(Ce,this),Ee)}recycleAsyncId(Ce,Me,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return Me;null!=Me&&N.clearInterval(Me)}execute(Ce,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(Ce,Me);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,Me){let G,Ee=!1;try{this.work(Ce)}catch(Q){Ee=!0,G=Q||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:Me}=this,{actions:Ee}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(Ee,this),null!=Ce&&(this.id=this.recycleAsyncId(Me,Ce,null)),this.delay=null,super.unsubscribe()}}}},2631:(mt,Ae,U)=>{U.d(Ae,{v:()=>N});var p=U(4552);class W{constructor(ue,fe=W.now){this.schedulerActionCtor=ue,this.now=fe}schedule(ue,fe=0,Ce){return new this.schedulerActionCtor(this,ue).schedule(Ce,fe)}}W.now=p.l.now;class N extends W{constructor(ue,fe=W.now){super(ue,fe),this.actions=[],this._active=!1}flush(ue){const{actions:fe}=this;if(this._active)return void fe.push(ue);let Ce;this._active=!0;do{if(Ce=ue.execute(ue.state,ue.delay))break}while(ue=fe.shift());if(this._active=!1,Ce){for(;ue=fe.shift();)ue.unsubscribe();throw Ce}}}},6321:(mt,Ae,U)=>{U.d(Ae,{P:()=>re,z:()=>N});var p=U(1954);const N=new(U(2631).v)(p.o),re=N},4552:(mt,Ae,U)=>{U.d(Ae,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},7599:(mt,Ae,U)=>{U.d(Ae,{z:()=>p});const p={setTimeout(W,N,...re){const{delegate:ue}=p;return ue?.setTimeout?ue.setTimeout(W,N,...re):setTimeout(W,N,...re)},clearTimeout(W){const{delegate:N}=p;return(N?.clearTimeout||clearTimeout)(W)},delegate:void 0}},4971:(mt,Ae,U)=>{U.d(Ae,{h:()=>W});const W=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(mt,Ae,U)=>{U.d(Ae,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(mt,Ae,U)=>{U.d(Ae,{_6:()=>fe,jO:()=>re,yG:()=>ue});var p=U(4674),W=U(671);function N(Ce){return Ce[Ce.length-1]}function re(Ce){return(0,p.m)(N(Ce))?Ce.pop():void 0}function ue(Ce){return(0,W.K)(N(Ce))?Ce.pop():void 0}function fe(Ce,Me){return"number"==typeof N(Ce)?Ce.pop():Me}},9039:(mt,Ae,U)=>{function p(W,N){if(W){const re=W.indexOf(N);0<=re&&W.splice(re,1)}}U.d(Ae,{P:()=>p})},2306:(mt,Ae,U)=>{function p(W){const re=W(ue=>{Error.call(ue),ue.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}U.d(Ae,{d:()=>p})},1441:(mt,Ae,U)=>{U.d(Ae,{O:()=>re,x:()=>N});var p=U(2653);let W=null;function N(ue){if(p.config.useDeprecatedSynchronousErrorHandling){const fe=!W;if(fe&&(W={errorThrown:!1,error:null}),ue(),fe){const{errorThrown:Ce,error:Me}=W;if(W=null,Ce)throw Me}}else ue()}function re(ue){p.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=ue)}},7103:(mt,Ae,U)=>{function p(W,N,re,ue=0,fe=!1){const Ce=N.schedule(function(){re(),fe?W.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(W.add(Ce),!fe)return Ce}U.d(Ae,{f:()=>p})},2737:(mt,Ae,U)=>{function p(W){return W}U.d(Ae,{y:()=>p})},4266:(mt,Ae,U)=>{U.d(Ae,{z:()=>p});const p=W=>W&&"number"==typeof W.length&&"function"!=typeof W},5726:(mt,Ae,U)=>{U.d(Ae,{D:()=>W});var p=U(4674);function W(N){return Symbol.asyncIterator&&(0,p.m)(N?.[Symbol.asyncIterator])}},4674:(mt,Ae,U)=>{function p(W){return"function"==typeof W}U.d(Ae,{m:()=>p})},8382:(mt,Ae,U)=>{U.d(Ae,{c:()=>N});var p=U(4850),W=U(4674);function N(re){return(0,W.m)(re[p.L])}},3664:(mt,Ae,U)=>{U.d(Ae,{T:()=>N});var p=U(4971),W=U(4674);function N(re){return(0,W.m)(re?.[p.h])}},4026:(mt,Ae,U)=>{U.d(Ae,{t:()=>W});var p=U(4674);function W(N){return(0,p.m)(N?.then)}},541:(mt,Ae,U)=>{U.d(Ae,{L:()=>re,Q:()=>N});var p=U(7582),W=U(4674);function N(ue){return(0,p.FC)(this,arguments,function*(){const Ce=ue.getReader();try{for(;;){const{value:Me,done:Ee}=yield(0,p.qq)(Ce.read());if(Ee)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Me)}}finally{Ce.releaseLock()}})}function re(ue){return(0,W.m)(ue?.getReader)}},671:(mt,Ae,U)=>{U.d(Ae,{K:()=>W});var p=U(4674);function W(N){return N&&(0,p.m)(N.schedule)}},9360:(mt,Ae,U)=>{U.d(Ae,{A:()=>W,e:()=>N});var p=U(4674);function W(re){return(0,p.m)(re?.lift)}function N(re){return ue=>{if(W(ue))return ue.lift(function(fe){try{return re(fe,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(mt,Ae,U)=>{function p(){}U.d(Ae,{Z:()=>p})},8407:(mt,Ae,U)=>{U.d(Ae,{U:()=>N,z:()=>W});var p=U(2737);function W(...re){return N(re)}function N(re){return 0===re.length?p.y:1===re.length?re[0]:function(fe){return re.reduce((Ce,Me)=>Me(Ce),fe)}}},3894:(mt,Ae,U)=>{U.d(Ae,{h:()=>N});var p=U(2653),W=U(7599);function N(re){W.z.setTimeout(()=>{const{onUnhandledError:ue}=p.config;if(!ue)throw re;ue(re)})}},9853:(mt,Ae,U)=>{function p(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ae,{z:()=>p})},5879:(mt,Ae,U)=>{U.d(Ae,{$8M:()=>za,$WT:()=>ka,$Z:()=>mI,AFp:()=>$w,AaK:()=>le,CHM:()=>rs,CRH:()=>j0,EJc:()=>zv,EpF:()=>lv,F4k:()=>FI,FYo:()=>Bg,FiY:()=>_e,Gf:()=>B0,GfV:()=>eD,HDt:()=>Wv,Ikx:()=>n0,JOm:()=>sf,KtG:()=>fd,LFG:()=>Xe,LSH:()=>Ey,Lbi:()=>zw,Lck:()=>pA,MAs:()=>_r,MMx:()=>gA,NdJ:()=>ll,Ojb:()=>Sk,OlP:()=>Un,Oqu:()=>rc,P3R:()=>Bw,PXZ:()=>ub,Q6J:()=>Ct,QGY:()=>cv,QbO:()=>Dk,Qsj:()=>tl,R0b:()=>xi,RDi:()=>Us,Rgc:()=>Iu,SBq:()=>Ug,Sil:()=>Au,Suo:()=>BA,TTD:()=>Pc,TgZ:()=>av,VuI:()=>VR,X6Q:()=>yb,XFs:()=>Dt,Xpm:()=>Ec,Xq5:()=>RI,Xts:()=>ff,Y36:()=>vi,YKP:()=>T0,YNc:()=>eP,Yjl:()=>Zu,Yz7:()=>_t,Z0I:()=>gn,ZZ4:()=>Xm,_UZ:()=>ot,_Vd:()=>Ad,_c5:()=>_O,_uU:()=>$I,aQg:()=>lE,c2e:()=>$v,cJS:()=>zn,cg1:()=>Xf,dDg:()=>yp,dqk:()=>Kt,eFA:()=>fb,eJc:()=>Lv,ekj:()=>Wf,eoX:()=>lh,f3M:()=>ct,g9A:()=>qC,h0i:()=>wa,hGG:()=>uE,iGM:()=>V0,ifc:()=>Gs,ip1:()=>lR,jDz:()=>Dv,kL8:()=>o0,lG2:()=>Ma,lqb:()=>Xa,lri:()=>oc,n5z:()=>Zc,oAB:()=>Ku,oxw:()=>$f,q4F:()=>Rd,qFp:()=>wr,qLn:()=>nl,qOj:()=>Jy,qZA:()=>yr,rWj:()=>Qv,rg0:()=>ad,s9C:()=>dv,sBO:()=>aO,s_b:()=>Lm,soG:()=>gp,tb:()=>qm,tp0:()=>at,uIk:()=>om,vHH:()=>ce,vpe:()=>Bo,wAp:()=>Ea,xp6:()=>Df,z2F:()=>Mu,zSh:()=>Hw,zs3:()=>Vs});var p=U(8645),W=U(7394),N=U(5592),re=U(3019),ue=U(5619),fe=U(2096),Ce=U(3020),Me=U(4664),Ee=U(3997);function G(s){for(let a in s)if(s[a]===G)return a;throw Error("Could not find renamed property on target object.")}function Q(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function He(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Oe=G({__forward_ref__:G});function tt(s){return s.__forward_ref__=tt,s.toString=function(){return le(this())},s}function Fe(s){return et(s)?s():s}function et(s){return"function"==typeof s&&s.hasOwnProperty(Oe)&&s.__forward_ref__===tt}function Ne(s){return s&&!!s.\u0275providers}const pt="https://g.co/ng/security#xss";class ce extends Error{constructor(a,c){super(function Re(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,c)),this.code=a}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function Ze(s,a){throw new ce(-201,!1)}function nt(s,a){null==s&&function Ye(s,a,c,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${c} ${u} ${a} <=Actual]`))}(a,s,null,"!=")}function _t(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function zn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Mn(s){return Xn(s,Gn)||Xn(s,ei)}function gn(s){return null!==Mn(s)}function Xn(s,a){return s.hasOwnProperty(a)?s[a]:null}function br(s){return s&&(s.hasOwnProperty(Zn)||s.hasOwnProperty(ms))?s[Zn]:null}const Gn=G({\u0275prov:G}),Zn=G({\u0275inj:G}),ei=G({ngInjectableDef:G}),ms=G({ngInjectorDef:G});var Dt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(Dt||{});let Mt;function Jt(s){const a=Mt;return Mt=s,a}function hr(s,a,c){const u=Mn(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&Dt.Optional?null:void 0!==a?a:void Ze(le(s))}const Kt=globalThis,ze={},ft="__NG_DI_FLAG__",yt="ngTempTokenPath",K=/\n/gm,B="__source";let j;function oe(s){const a=j;return j=s,a}function ke(s,a=Dt.Default){if(void 0===j)throw new ce(-203,!1);return null===j?hr(s,void 0,a):j.get(s,a&Dt.Optional?null:void 0,a)}function Xe(s,a=Dt.Default){return(function Vt(){return Mt}()||ke)(Fe(s),a)}function ct(s,a=Dt.Default){return Xe(s,wn(a))}function wn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function jt(s){const a=[];for(let c=0;c<s.length;c++){const u=Fe(s[c]);if(Array.isArray(u)){if(0===u.length)throw new ce(900,!1);let h,g=Dt.Default;for(let v=0;v<u.length;v++){const w=u[v],C=Zt(w);"number"==typeof C?-1===C?h=w.token:g|=C:h=w}a.push(Xe(h,g))}else a.push(Xe(u))}return a}function kn(s,a){return s[ft]=a,s.prototype[ft]=a,s}function Zt(s){return s[ft]}function co(s){return{toString:s}.toString()}var zs=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(zs||{}),Gs=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Gs||{});const _s={},cn=[],Do=G({\u0275cmp:G}),Sa=G({\u0275dir:G}),mc=G({\u0275pipe:G}),_c=G({\u0275mod:G}),uo=G({\u0275fac:G}),bl=G({__NG_ELEMENT_ID__:G}),Aa=G({__NG_ENV_ID__:G});function zu(s,a,c){let u=s.length;for(;;){const h=s.indexOf(a,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=a.length;if(h+g===u||s.charCodeAt(h+g)<=32)return h}c=h+1}}function Ra(s,a,c){let u=0;for(;u<c.length;){const h=c[u];if("number"==typeof h){if(0!==h)break;u++;const g=c[u++],v=c[u++],w=c[u++];s.setAttribute(a,v,w,g)}else{const g=h,v=c[++u];Xo(g)?s.setProperty(a,g,v):s.setAttribute(a,g,v),u++}}return u}function ho(s){return 3===s||4===s||6===s}function Xo(s){return 64===s.charCodeAt(0)}function Tl(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let u=0;u<a.length;u++){const h=a[u];"number"==typeof h?c=h:0===c||Cl(s,c,h,null,-1===c||2===c?a[++u]:null)}}return s}function Cl(s,a,c,u,h){let g=0,v=s.length;if(-1===a)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===c){if(null===u)return void(null!==h&&(s[g+1]=h));if(u===s[g+1])return void(s[g+2]=h)}g++,null!==u&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,a),g=v+1),s.splice(g++,0,c),null!==u&&s.splice(g++,0,u),null!==h&&s.splice(g++,0,h)}const lr="ng-template";function O_(s,a,c){let u=0,h=!0;for(;u<s.length;){let g=s[u++];if("string"==typeof g&&h){const v=s[u++];if(c&&"class"===g&&-1!==zu(v.toLowerCase(),a,0))return!0}else{if(1===g){for(;u<s.length&&"string"==typeof(g=s[u++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(h=!1)}}return!1}function xa(s){return 4===s.type&&s.value!==lr}function N_(s,a,c){return a===(4!==s.type||c?s.value:lr)}function bh(s,a,c){let u=4;const h=s.attrs||[],g=function Sl(s){for(let a=0;a<s.length;a++)if(ho(s[a]))return a;return s.length}(h);let v=!1;for(let w=0;w<a.length;w++){const C=a[w];if("number"!=typeof C){if(!v)if(4&u){if(u=2|1&u,""!==C&&!N_(s,C,c)||""===C&&1===a.length){if(Li(u))return!1;v=!0}}else{const R=8&u?C:a[++w];if(8&u&&null!==s.attrs){if(!O_(s.attrs,R,c)){if(Li(u))return!1;v=!0}continue}const $=Dl(8&u?"class":C,h,xa(s),c);if(-1===$){if(Li(u))return!1;v=!0;continue}if(""!==R){let ne;ne=$>g?"":h[$+1].toLowerCase();const ie=8&u?ne:null;if(ie&&-1!==zu(ie,R,0)||2&u&&R!==ne){if(Li(u))return!1;v=!0}}}}else{if(!v&&!Li(u)&&!Li(C))return!1;if(v&&Li(C))continue;v=!1,u=C|1&u}}return Li(u)||v}function Li(s){return 0==(1&s)}function Dl(s,a,c,u){if(null===a)return-1;let h=0;if(u||!c){let g=!1;for(;h<a.length;){const v=a[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=a[++h];for(;"string"==typeof w;)w=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function Gu(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const u=s[c];if("number"==typeof u)return-1;if(u===a)return c;c++}return-1}(a,s)}function yc(s,a,c=!1){for(let u=0;u<a.length;u++)if(bh(s,a[u],c))return!0;return!1}function vc(s,a){return s?":not("+a.trim()+")":a}function Wu(s){let a=s[0],c=1,u=2,h="",g=!1;for(;c<s.length;){let v=s[c];if("string"==typeof v)if(2&u){const w=s[++c];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!Li(v)&&(a+=vc(g,h),h=""),u=v,g=g||!Li(u);c++}return""!==h&&(a+=vc(g,h)),a}function Ec(s){return co(()=>{const a=Kp(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===zs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Gs.Emulated,styles:s.styles||cn,_:null,schemas:s.schemas||null,tView:null,id:""};Yu(c);const u=s.dependencies;return c.directiveDefs=Jo(u,!1),c.pipeDefs=Jo(u,!0),c.id=function Pa(s){let a=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of c)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function wc(s){return rn(s)||Or(s)}function qu(s){return null!==s}function Ku(s){return co(()=>({type:s.type,bootstrap:s.bootstrap||cn,declarations:s.declarations||cn,imports:s.imports||cn,exports:s.exports||cn,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function bc(s,a){if(null==s)return _s;const c={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),c[h]=u,a&&(a[h]=g)}return c}function Ma(s){return co(()=>{const a=Kp(s);return Yu(a),a})}function Zu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function rn(s){return s[Do]||null}function Or(s){return s[Sa]||null}function ti(s){return s[mc]||null}function ka(s){const a=rn(s)||Or(s)||ti(s);return null!==a&&a.standalone}function ni(s,a){const c=s[_c]||null;if(!c&&!0===a)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return c}function Kp(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||_s,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||cn,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bc(s.inputs,a),outputs:bc(s.outputs)}}function Yu(s){s.features?.forEach(a=>a(s))}function Jo(s,a){if(!s)return null;const c=a?ti:wc;return()=>("function"==typeof s?s():s).map(u=>c(u)).filter(qu)}const cr=0,rt=1,Ht=2,jn=3,Xi=4,fo=5,Ti=6,ea=7,fr=8,po=9,Ao=10,kt=11,Ss=12,Ch=13,Ji=14,Nr=15,Oa=16,es=17,Ci=18,Ro=19,Tc=20,ta=21,As=22,Cc=23,ts=24,en=25,Xu=1,Na=2,ri=7,xo=9,Lr=11;function pi(s){return Array.isArray(s)&&"object"==typeof s[Xu]}function gi(s){return Array.isArray(s)&&!0===s[Xu]}function Ju(s){return 0!=(4&s.flags)}function go(s){return s.componentOffset>-1}function ns(s){return 1==(1&s.flags)}function Ui(s){return!!s.template}function ra(s){return 0!=(512&s[Ht])}function mo(s,a){return s.hasOwnProperty(uo)?s[uo]:null}let Dr=null,Rl=!1;function mi(s){const a=Dr;return Dr=s,a}const xl={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function rd(s){if(!Pl(s)||s.dirty){if(!s.producerMustRecompute(s)&&!ng(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function id(s){s.dirty=!0,function Rh(s){if(void 0===s.liveConsumerNode)return;const a=Rl;Rl=!0;try{for(const c of s.liveConsumerNode)c.dirty||id(c)}finally{Rl=a}}(s),s.consumerMarkedDirty?.(s)}function xh(s){return s&&(s.nextProducerIndex=0),mi(s)}function Sr(s,a){if(mi(a),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Pl(s))for(let c=s.nextProducerIndex;c<s.producerNode.length;c++)ia(s.producerNode[c],s.producerIndexOfThis[c]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function ng(s){Ws(s);for(let a=0;a<s.producerNode.length;a++){const c=s.producerNode[a],u=s.producerLastReadVersion[a];if(u!==c.version||(rd(c),u!==c.version))return!0}return!1}function kl(s){if(Ws(s),Pl(s))for(let a=0;a<s.producerNode.length;a++)ia(s.producerNode[a],s.producerIndexOfThis[a]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function ia(s,a){if(function sd(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),Ws(s),1===s.liveConsumerNode.length)for(let u=0;u<s.producerNode.length;u++)ia(s.producerNode[u],s.producerIndexOfThis[u]);const c=s.liveConsumerNode.length-1;if(s.liveConsumerNode[a]=s.liveConsumerNode[c],s.liveConsumerIndexOfThis[a]=s.liveConsumerIndexOfThis[c],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,a<s.liveConsumerNode.length){const u=s.liveConsumerIndexOfThis[a],h=s.liveConsumerNode[a];Ws(h),h.producerIndexOfThis[u]=a}}function Pl(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function Ws(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Oh=null;function ad(s){const a=mi(null);try{return s()}finally{mi(a)}}const ld=()=>{},B_=(()=>({...xl,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:ld}))();class og{constructor(a,c,u){this.previousValue=a,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function Pc(){return Fl}function Fl(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ms),Oc}function Oc(){const s=Ul(this),a=s?.current;if(a){const c=s.previous;if(c===_s)s.previous=a;else for(let u in a)c[u]=a[u];s.current=null,this.ngOnChanges(a)}}function Ms(s,a,c,u){const h=this.declaredInputs[c],g=Ul(s)||function Uh(s,a){return s[Ua]=a}(s,{previous:_s,current:null}),v=g.current||(g.current={}),w=g.previous,C=w[h];v[h]=new og(C&&C.currentValue,a,w===_s),s[u]=a}Pc.ngInherit=!0;const Ua="__ngSimpleChanges__";function Ul(s){return s[Ua]||null}const ys=function(s,a,c){};function Tn(s){for(;Array.isArray(s);)s=s[cr];return s}function qs(s,a){return Tn(a[s])}function Di(s,a){return Tn(a[s.index])}function ud(s,a){return s.data[a]}function _i(s,a){const c=a[s];return pi(c)?c:c[cr]}function oa(s,a){return null==a?null:s[a]}function ag(s){s[es]=0}function aa(s){1024&s[Ht]||(s[Ht]|=1024,Fr(s,1))}function $_(s){1024&s[Ht]&&(s[Ht]&=-1025,Fr(s,-1))}function Fr(s,a){let c=s[jn];if(null===c)return;c[fo]+=a;let u=c;for(c=c[jn];null!==c&&(1===a&&1===u[fo]||-1===a&&0===u[fo]);)c[fo]+=a,u=c,c=c[jn]}const Lt={lFrame:It(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ar(){return Lt.bindingsEnabled}function Le(){return Lt.lFrame.lView}function un(){return Lt.lFrame.tView}function rs(s){return Lt.lFrame.contextLView=s,s[fr]}function fd(s){return Lt.lFrame.contextLView=null,s}function ii(){let s=Vc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Vc(){return Lt.lFrame.currentTNode}function Ks(s,a){const c=Lt.lFrame;c.currentTNode=s,c.isParent=a}function zh(){return Lt.lFrame.isParent}function ca(){return Lt.lFrame.bindingIndex++}function Bc(s,a){const c=Lt.lFrame;c.bindingIndex=c.bindingRootIndex=s,jc(a)}function jc(s){Lt.lFrame.currentDirectiveIndex=s}function _d(){return Lt.lFrame.currentQueryIndex}function qh(s){Lt.lFrame.currentQueryIndex=s}function Kh(s){const a=s[rt];return 2===a.type?a.declTNode:1===a.type?s[Ti]:null}function yd(s,a,c){if(c&Dt.SkipSelf){let h=a,g=s;for(;!(h=h.parent,null!==h||c&Dt.Host||(h=Kh(g),null===h||(g=g[Ji],10&h.type))););if(null===h)return!1;a=h,s=g}const u=Lt.lFrame=Sn();return u.currentTNode=a,u.lView=s,!0}function er(s){const a=Sn(),c=s[rt];Lt.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Sn(){const s=Lt.lFrame,a=null===s?null:s.child;return null===a?It(s):a}function It(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function oi(){const s=Lt.lFrame;return Lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Pn=oi;function ks(){const s=oi();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Et(){return Lt.lFrame.selectedIndex}function Ps(s){Lt.lFrame.selectedIndex=s}function nr(){const s=Lt.lFrame;return ud(s.tView,s.selectedIndex)}let Yn=!0;function rr(){return Yn}function yi(s){Yn=s}function Os(s,a){for(let c=a.directiveStart,u=a.directiveEnd;c<u;c++){const g=s.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:R,ngOnDestroy:P}=g;v&&(s.contentHooks??=[]).push(-c,v),w&&((s.contentHooks??=[]).push(c,w),(s.contentCheckHooks??=[]).push(c,w)),C&&(s.viewHooks??=[]).push(-c,C),R&&((s.viewHooks??=[]).push(c,R),(s.viewCheckHooks??=[]).push(c,R)),null!=P&&(s.destroyHooks??=[]).push(c,P)}}function $c(s,a,c){Js(s,a,3,c)}function ja(s,a,c,u){(3&s[Ht])===c&&Js(s,a,c,u)}function ua(s,a){let c=s[Ht];(3&c)===a&&(c&=8191,c+=1,s[Ht]=c)}function Js(s,a,c,u){const g=u??-1,v=a.length-1;let w=0;for(let C=void 0!==u?65535&s[es]:0;C<v;C++)if("number"==typeof a[C+1]){if(w=a[C],null!=u&&w>=u)break}else a[C]<0&&(s[es]+=65536),(w<g||-1==g)&&(Zh(s,c,a,C),s[es]=(4294901760&s[es])+C+2),C++}function Si(s,a){ys(4,s,a);const c=mi(null);try{a.call(s)}finally{mi(c),ys(5,s,a)}}function Zh(s,a,c,u){const h=c[u]<0,g=c[u+1],w=s[h?-c[u]:c[u]];h?s[Ht]>>13<s[es]>>16&&(3&s[Ht])===a&&(s[Ht]+=8192,Si(w,g)):Si(w,g)}const Vi=-1;class $t{constructor(a,c,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function zc(s){return s!==Vi}function Ha(s){return 32767&s}function Gc(s,a){let c=function Qh(s){return s>>16}(s),u=a;for(;c>0;)u=u[Ji],c--;return u}let Xh=!0;function $l(s){const a=Xh;return Xh=s,a}const dg=255,Jh=5;let Y_=0;const te={};function gr(s,a){const c=zr(s,a);if(-1!==c)return c;const u=a[rt];u.firstCreatePass&&(s.injectorIndex=a.length,O(u.data,s),O(a,null),O(u.blueprint,null));const h=No(s,a),g=s.injectorIndex;if(zc(h)){const v=Ha(h),w=Gc(h,a),C=w[rt].data;for(let R=0;R<8;R++)a[g+R]=w[v+R]|C[v+R]}return a[g+8]=h,g}function O(s,a){s.push(0,0,0,0,0,0,0,0,a)}function zr(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function No(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,u=null,h=a;for(;null!==h;){if(u=Qc(h),null===u)return Vi;if(c++,h=h[Ji],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return Vi}function da(s,a,c){!function dn(s,a,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(bl)&&(u=c[bl]),null==u&&(u=c[bl]=Y_++);const h=u&dg;a.data[s+(h>>Jh)]|=1<<h}(s,a,c)}function Hn(s,a,c){if(c&Dt.Optional||void 0!==s)return s;Ze()}function qc(s,a,c,u){if(c&Dt.Optional&&void 0===u&&(u=null),!(c&(Dt.Self|Dt.Host))){const h=s[po],g=Jt(void 0);try{return h?h.get(a,u,c&Dt.Optional):hr(a,u,c&Dt.Optional)}finally{Jt(g)}}return Hn(u,0,c)}function Lo(s,a,c,u=Dt.Default,h){if(null!==s){if(2048&a[Ht]&&!(u&Dt.Self)){const v=function Yc(s,a,c,u,h){let g=s,v=a;for(;null!==g&&null!==v&&2048&v[Ht]&&!(512&v[Ht]);){const w=Fo(g,v,c,u|Dt.Self,te);if(w!==te)return w;let C=g.parent;if(!C){const R=v[Tc];if(R){const P=R.get(c,te,u);if(P!==te)return P}C=Qc(v),v=v[Ji]}g=C}return h}(s,a,c,u,te);if(v!==te)return v}const g=Fo(s,a,c,u,te);if(g!==te)return g}return qc(a,c,u,h)}function Fo(s,a,c,u,h){const g=function Kc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(bl)?s[bl]:void 0;return"number"==typeof a?a>=0?a&dg:eo:a}(c);if("function"==typeof g){if(!yd(a,s,u))return u&Dt.Host?Hn(h,0,u):qc(a,c,u,h);try{let v;if(v=g(u),null!=v||u&Dt.Optional)return v;Ze()}finally{Pn()}}else if("number"==typeof g){let v=null,w=zr(s,a),C=Vi,R=u&Dt.Host?a[Nr][Ti]:null;for((-1===w||u&Dt.SkipSelf)&&(C=-1===w?No(s,a):a[w+8],C!==Vi&&ha(u,!1)?(v=a[rt],w=Ha(C),a=Gc(C,a)):w=-1);-1!==w;){const P=a[rt];if(ef(g,w,P.data)){const $=Q_(w,a,c,v,u,R);if($!==te)return $}C=a[w+8],C!==Vi&&ha(u,a[rt].data[w+8]===R)&&ef(g,w,a)?(v=P,w=Ha(C),a=Gc(C,a)):w=-1}}return h}function Q_(s,a,c,u,h,g){const v=a[rt],w=v.data[s+8],P=Ed(w,v,c,null==u?go(w)&&Xh:u!=v&&0!=(3&w.type),h&Dt.Host&&g===w);return null!==P?$a(a,v,P,w):te}function Ed(s,a,c,u,h){const g=s.providerIndexes,v=a.data,w=1048575&g,C=s.directiveStart,P=g>>20,ne=h?w+P:s.directiveEnd;for(let ie=u?w:w+P;ie<ne;ie++){const Se=v[ie];if(ie<C&&c===Se||ie>=C&&Se.type===c)return ie}if(h){const ie=v[C];if(ie&&Ui(ie)&&ie.type===c)return C}return null}function $a(s,a,c,u){let h=s[c];const g=a.data;if(function Yh(s){return s instanceof $t}(h)){const v=h;v.resolving&&function Be(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ce(-200,`Circular dependency in DI detected for ${s}${c}`)}(function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}(g[c]));const w=$l(v.canSeeViewProviders);v.resolving=!0;const R=v.injectImpl?Jt(v.injectImpl):null;yd(s,u,Dt.Default);try{h=s[c]=v.factory(void 0,g,s,u),a.firstCreatePass&&c>=u.directiveStart&&function pr(s,a,c){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:g}=a.type.prototype;if(u){const v=Fl(a);(c.preOrderHooks??=[]).push(s,v),(c.preOrderCheckHooks??=[]).push(s,v)}h&&(c.preOrderHooks??=[]).push(0-s,h),g&&((c.preOrderHooks??=[]).push(s,g),(c.preOrderCheckHooks??=[]).push(s,g))}(c,g[c],a)}finally{null!==R&&Jt(R),$l(w),v.resolving=!1,Pn()}}return h}function ef(s,a,c){return!!(c[a+(s>>Jh)]&1<<s)}function ha(s,a){return!(s&Dt.Self||s&Dt.Host&&a)}class fn{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,u){return Lo(this._tNode,this._lView,a,wn(u),c)}}function eo(){return new fn(ii(),Le())}function Zc(s){return co(()=>{const a=s.prototype.constructor,c=a[uo]||Ns(a),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const g=h[uo]||Ns(h);if(g&&g!==c)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Ns(s){return et(s)?()=>{const a=Ns(Fe(s));return a&&a()}:mo(s)}function Qc(s){const a=s[rt],c=a.type;return 2===c?a.declTNode:1===c?s[Ti]:null}function za(s){return function Wc(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const u=c.length;let h=0;for(;h<u;){const g=c[h];if(ho(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<u&&"string"==typeof c[h];)h++;else{if(g===a)return c[h+1];h+=2}}}return null}(ii(),s)}const Wa="__parameters__";function x(s,a,c){return co(()=>{const u=function S(s){return function(...c){if(s){const u=s(...c);for(const h in u)this[h]=u[h]}}}(a);function h(...g){if(this instanceof h)return u.apply(this,g),this;const v=new h(...g);return w.annotation=v,w;function w(C,R,P){const $=C.hasOwnProperty(Wa)?C[Wa]:Object.defineProperty(C,Wa,{value:[]})[Wa];for(;$.length<=P;)$.push(null);return($[P]=$[P]||[]).push(v),C}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function ga(s,a){s.forEach(c=>Array.isArray(c)?ga(c,a):a(c))}function fg(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function qa(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Bi(s,a,c){let u=zl(s,a);return u>=0?s[1|u]=c:(u=~u,function X_(s,a,c,u){let h=s.length;if(h==a)s.push(c,u);else if(1===h)s.push(u,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=c,s[a+1]=u}}(s,u,a,c)),u}function wd(s,a){const c=zl(s,a);if(c>=0)return s[1|c]}function zl(s,a){return function Id(s,a,c){let u=0,h=s.length>>c;for(;h!==u;){const g=u+(h-u>>1),v=s[g<<c];if(a===v)return g<<c;v>a?h=g:u=g+1}return~(h<<c)}(s,a,1)}const _e=kn(x("Optional"),8),at=kn(x("SkipSelf"),4);function sy(s){return 128==(128&s.flags)}var sf=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(sf||{});const Ig=new Map;let af=0;const mw="__ngContext__";function ss(s,a){pi(a)?(s[mw]=a[Ro],function bg(s){Ig.set(s[Ro],s)}(a)):s[mw]=a}let Cg;function Dg(s,a){return Cg(s,a)}function Sg(s){const a=s[jn];return gi(a)?a[jn]:a}function cC(s){return vw(s[Ss])}function yw(s){return vw(s[Xi])}function vw(s){for(;null!==s&&!gi(s);)s=s[Xi];return s}function lf(s,a,c,u,h){if(null!=u){let g,v=!1;gi(u)?g=u:pi(u)&&(v=!0,u=u[cr]);const w=Tn(u);0===s&&null!==c?null==h?bw(a,c,w):Za(a,c,w,h||null,!0):1===s&&null!==c?Za(a,c,w,h||null,!0):2===s?function hy(s,a,c){const u=Rg(s,a);u&&function Tw(s,a,c,u){s.removeChild(a,c,u)}(s,u,a,c)}(a,w,v):3===s&&a.destroyNode(w),null!=g&&function yC(s,a,c,u,h){const g=c[ri];g!==Tn(c)&&lf(a,s,u,g,h);for(let w=Lr;w<c.length;w++){const C=c[w];os(C[rt],C,s,a,u,g)}}(a,s,g,c,h)}}function cy(s,a,c){return s.createElement(a,c)}function uf(s,a){const c=s[xo],u=c.indexOf(a);$_(a),c.splice(u,1)}function Ri(s,a){if(s.length<=Lr)return;const c=Lr+a,u=s[c];if(u){const h=u[Oa];null!==h&&h!==s&&uf(h,u),a>0&&(s[c-1][Xi]=u[Xi]);const g=qa(s,Lr+a);!function rk(s,a){os(s,a,a[kt],2,null,null),a[cr]=null,a[Ti]=null}(u[rt],u);const v=g[Ci];null!==v&&v.detachView(g[rt]),u[jn]=null,u[Xi]=null,u[Ht]&=-129}return u}function Ew(s,a){if(!(256&a[Ht])){const c=a[kt];a[Cc]&&kl(a[Cc]),a[ts]&&kl(a[ts]),c.destroyNode&&os(s,a,c,3,null,null),function dC(s){let a=s[Ss];if(!a)return ww(s[rt],s);for(;a;){let c=null;if(pi(a))c=a[Ss];else{const u=a[Lr];u&&(c=u)}if(!c){for(;a&&!a[Xi]&&a!==s;)pi(a)&&ww(a[rt],a),a=a[jn];null===a&&(a=s),pi(a)&&ww(a[rt],a),c=a&&a[Xi]}a=c}}(a)}}function ww(s,a){if(!(256&a[Ht])){a[Ht]&=-129,a[Ht]|=256,function ok(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let u=0;u<c.length;u+=2){const h=a[c[u]];if(!(h instanceof $t)){const g=c[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=h[g[v]],C=g[v+1];ys(4,w,C);try{C.call(w)}finally{ys(5,w,C)}}else{ys(4,h,g);try{g.call(h)}finally{ys(5,h,g)}}}}}(s,a),function sk(s,a){const c=s.cleanup,u=a[ea];if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const v=c[g+3];v>=0?u[v]():u[-v].unsubscribe(),g+=2}else c[g].call(u[c[g+1]]);null!==u&&(a[ea]=null);const h=a[ta];if(null!==h){a[ta]=null;for(let g=0;g<h.length;g++)(0,h[g])()}}(s,a),1===a[rt].type&&a[kt].destroy();const c=a[Oa];if(null!==c&&gi(a[jn])){c!==a[jn]&&uf(c,a);const u=a[Ci];null!==u&&u.detachView(s)}!function YM(s){Ig.delete(s[Ro])}(a)}}function Iw(s,a,c){return function fC(s,a,c){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return c[cr];{const{componentOffset:h}=u;if(h>-1){const{encapsulation:g}=s.data[u.directiveStart+h];if(g===Gs.None||g===Gs.Emulated)return null}return Di(u,c)}}(s,a.parent,c)}function Za(s,a,c,u,h){s.insertBefore(a,c,u,h)}function bw(s,a,c){s.appendChild(a,c)}function uy(s,a,c,u,h){null!==u?Za(s,a,c,u,h):bw(s,a,c)}function Rg(s,a){return s.parentNode(a)}let Dw,Pw,gy,xg=function pC(s,a,c){return 40&s.type?Di(s,c):null};function dy(s,a,c,u){const h=Iw(s,u,a),g=a[kt],w=function Cw(s,a,c){return xg(s,a,c)}(u.parent||a[Ti],u,a);if(null!=h)if(Array.isArray(c))for(let C=0;C<c.length;C++)uy(g,h,c[C],w,!1);else uy(g,h,c,w,!1);void 0!==Dw&&Dw(g,u,a,c,h)}function Mg(s,a){if(null!==a){const c=a.type;if(3&c)return Di(a,s);if(4&c)return Sw(-1,s[a.index]);if(8&c){const u=a.child;if(null!==u)return Mg(s,u);{const h=s[a.index];return gi(h)?Sw(-1,h):Tn(h)}}if(32&c)return Dg(a,s)()||Tn(s[a.index]);{const u=mC(s,a);return null!==u?Array.isArray(u)?u[0]:Mg(Sg(s[Nr]),u):Mg(s,a.next)}}return null}function mC(s,a){return null!==a?s[Nr][Ti].projection[a.projection]:null}function Sw(s,a){const c=Lr+s+1;if(c<a.length){const u=a[c],h=u[rt].firstChild;if(null!==h)return Mg(u,h)}return a[ri]}function Aw(s,a,c,u,h,g,v){for(;null!=c;){const w=u[c.index],C=c.type;if(v&&0===a&&(w&&ss(Tn(w),u),c.flags|=2),32!=(32&c.flags))if(8&C)Aw(s,a,c.child,u,h,g,!1),lf(a,s,h,w,g);else if(32&C){const R=Dg(c,u);let P;for(;P=R();)lf(a,s,h,P,g);lf(a,s,h,w,g)}else 16&C?fy(s,a,u,c,h,g):lf(a,s,h,w,g);c=v?c.projectionNext:c.next}}function os(s,a,c,u,h,g){Aw(c,u,s.firstChild,a,h,g,!1)}function fy(s,a,c,u,h,g){const v=c[Nr],C=v[Ti].projection[u.projection];if(Array.isArray(C))for(let R=0;R<C.length;R++)lf(a,s,h,C[R],g);else{let R=C;const P=v[jn];sy(u)&&(R.flags|=128),Aw(s,a,R,P,h,g,!0)}}function xw(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function EC(s,a,c){const{mergedAttrs:u,classes:h,styles:g}=c;null!==u&&Ra(s,a,u),null!==h&&xw(s,a,h),null!==g&&function vC(s,a,c){s.setAttribute(a,"style",c)}(s,a,g)}function Us(s){Pw=s}function Ow(s){return function Td(){if(void 0===gy&&(gy=null,Kt.trustedTypes))try{gy=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return gy}()?.createScriptURL(s)||s}class TC{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}function as(s){return s instanceof TC?s.changingThisBreaksApplicationSecurity:s}function no(s,a){const c=function my(s){return s instanceof TC&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${pt})`)}return c===a}const pk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Uo=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Uo||{});function Ey(s){const a=Og();return a?a.sanitize(Uo.URL,s)||"":no(s,"URL")?as(s):function Lw(s){return(s=String(s)).match(pk)?s:"unsafe:"+s}(me(s))}function OC(s){const a=Og();if(a)return Ow(a.sanitize(Uo.RESOURCE_URL,s)||"");if(no(s,"ResourceURL"))return Ow(as(s));throw new ce(904,!1)}function Bw(s,a,c){return function Vw(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?OC:Ey}(a,c)(s)}function Og(){const s=Le();return s&&s[Ao].sanitizer}class Un{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=_t({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ff=new Un("ENVIRONMENT_INITIALIZER"),LC=new Un("INJECTOR",-1),FC=new Un("INJECTOR_DEF_TYPES");class wy{get(a,c=ze){if(c===ze){const u=new Error(`NullInjectorError: No provider for ${le(a)}!`);throw u.name="NullInjectorError",u}return c}}function VC(...s){return{\u0275providers:BC(0,s),\u0275fromNgModule:!0}}function BC(s,...a){const c=[],u=new Set;let h;const g=v=>{c.push(v)};return ga(a,v=>{const w=v;Ng(w,g,[],u)&&(h||=[],h.push(w))}),void 0!==h&&Iy(h,g),c}function Iy(s,a){for(let c=0;c<s.length;c++){const{ngModule:u,providers:h}=s[c];by(h,g=>{a(g,u)})}}function Ng(s,a,c,u){if(!(s=Fe(s)))return!1;let h=null,g=br(s);const v=!g&&rn(s);if(g||v){if(v&&!v.standalone)return!1;h=s}else{const C=s.ngModule;if(g=br(C),!g)return!1;h=C}const w=u.has(h);if(v){if(w)return!1;if(u.add(h),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of C)Ng(R,a,c,u)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let R;u.add(h);try{ga(g.imports,P=>{Ng(P,a,c,u)&&(R||=[],R.push(P))})}finally{}void 0!==R&&Iy(R,a)}if(!w){const R=mo(h)||(()=>new h);a({provide:h,useFactory:R,deps:cn},h),a({provide:FC,useValue:h,multi:!0},h),a({provide:ff,useValue:()=>Xe(h),multi:!0},h)}const C=g.providers;if(null!=C&&!w){const R=s;by(C,P=>{a(P,R)})}}}return h!==s&&void 0!==s.providers}function by(s,a){for(let c of s)Ne(c)&&(c=c.\u0275providers),Array.isArray(c)?by(c,a):a(c)}const z2=G({provide:String,useValue:G});function jC(s){return null!==s&&"object"==typeof s&&z2 in s}function Dd(s){return"function"==typeof s}const Hw=new Un("Set Injector scope."),pf={},HC={};let Ty;function Qa(){return void 0===Ty&&(Ty=new wy),Ty}class Xa{}class gf extends Xa{get destroyed(){return this._destroyed}constructor(a,c,u,h){super(),this.parent=c,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_a(a,v=>this.processProvider(v)),this.records.set(LC,mf(void 0,this)),h.has("environment")&&this.records.set(Xa,mf(void 0,this));const g=this.records.get(Hw);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(FC.multi,cn,Dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=oe(this),u=Jt(void 0);try{return a()}finally{oe(c),Jt(u)}}get(a,c=ze,u=Dt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(Aa))return a[Aa](this);u=wn(u);const g=oe(this),v=Jt(void 0);try{if(!(u&Dt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const R=function GC(s){return"function"==typeof s||"object"==typeof s&&s instanceof Un}(a)&&Mn(a);C=R&&this.injectableDefInScope(R)?mf(Cy(a),pf):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(u&Dt.Self?Qa():this.parent).get(a,c=u&Dt.Optional&&c===ze?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[yt]=w[yt]||[]).unshift(le(a)),g)throw w;return function Ni(s,a,c,u){const h=s[yt];throw a[B]&&h.unshift(a[B]),s.message=function Qo(s,a,c,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=le(a);if(Array.isArray(a))h=a.map(le).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):le(w)))}h=`{${g.join(", ")}}`}return`${c}${u?"("+u+")":""}[${h}]: ${s.replace(K,"\n  ")}`}("\n"+s.message,h,c,u),s.ngTokenPath=h,s[yt]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{Jt(v),oe(g)}}resolveInjectorInitializers(){const a=oe(this),c=Jt(void 0);try{const h=this.get(ff.multi,cn,Dt.Self);for(const g of h)g()}finally{oe(a),Jt(c)}}toString(){const a=[],c=this.records;for(const u of c.keys())a.push(le(u));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(a){let c=Dd(a=Fe(a))?a:Fe(a&&a.provide);const u=function W2(s){return jC(s)?mf(void 0,s.useValue):mf(function $C(s,a,c){let u;if(Dd(s)){const h=Fe(s);return mo(h)||Cy(h)}if(jC(s))u=()=>Fe(s.useValue);else if(function jw(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...jt(s.deps||[]));else if(function Tk(s){return!(!s||!s.useExisting)}(s))u=()=>Xe(Fe(s.useExisting));else{const h=Fe(s&&(s.useClass||s.provide));if(!function Dy(s){return!!s.deps}(s))return mo(h)||Cy(h);u=()=>new h(...jt(s.deps))}return u}(s),pf)}(a);if(Dd(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=mf(void 0,pf,!0),h.factory=()=>jt(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,u)}hydrate(a,c){return c.value===pf&&(c.value=HC,c.value=c.factory()),"object"==typeof c.value&&c.value&&function zC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Fe(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Cy(s){const a=Mn(s),c=null!==a?a.factory:mo(s);if(null!==c)return c;if(s instanceof Un)throw new ce(204,!1);if(s instanceof Function)return function G2(s){const a=s.length;if(a>0)throw function Ka(s,a){const c=[];for(let u=0;u<s;u++)c.push(a);return c}(a,"?"),new ce(204,!1);const c=function Ii(s){return s&&(s[Gn]||s[ei])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ce(204,!1)}function mf(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function _a(s,a){for(const c of s)Array.isArray(c)?_a(c,a):c&&Ne(c)?_a(c.\u0275providers,a):a(c)}const $w=new Un("AppId",{providedIn:"root",factory:()=>WC}),WC="ng",qC=new Un("Platform Initializer"),zw=new Un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dk=new Un("AnimationModuleType"),Sk=new Un("CSP nonce",{providedIn:"root",factory:()=>function Wl(){if(void 0!==Pw)return Pw;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Mk=(s,a,c)=>null;function Qw(s,a,c=!1){return Mk(s,a,c)}class Es{}class Fg{}class XC{resolveComponentFactory(a){throw function Hi(s){const a=Error(`No component factory found for ${le(s)}.`);return a.ngComponent=s,a}(a)}}let Ad=(()=>{class s{static#e=this.NULL=new XC}return s})();function JC(){return ai(ii(),Le())}function ai(s,a){return new Ug(Di(s,a))}let Ug=(()=>{class s{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=JC}return s})();function Vg(s){return s instanceof Ug?s.nativeElement:s}class Bg{}let tl=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function nI(){const s=Le(),c=_i(ii().index,s);return(pi(c)?c:s)[kt]}()}return s})(),kk=(()=>{class s{static#e=this.\u0275prov=_t({token:s,providedIn:"root",factory:()=>null})}return s})();class eD{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Rd=new eD("16.2.10"),xy={};function Ef(s,a=null,c=null,u){const h=sD(s,a,c,u);return h.resolveInjectorInitializers(),h}function sD(s,a=null,c=null,u,h=new Set){const g=[c||cn,VC(s)];return u=u||("object"==typeof s?void 0:le(s)),new gf(g,a||Qa(),u||null,h)}let Vs=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=ze;static#t=this.NULL=new wy;static create(c,u){if(Array.isArray(c))return Ef({name:""},u,c,"");{const h=c.name??"";return Ef({name:h},c.parent,c.providers,h)}}static#n=this.\u0275prov=_t({token:s,providedIn:"any",factory:()=>Xe(LC)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function wf(s){return s.ngOriginalError}class nl{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&wf(a);for(;c&&wf(c);)c=wf(c);return c||null}}function If(s){return a=>{setTimeout(s,void 0,a)}}const Bo=class lD extends p.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,u){let h=a,g=c||(()=>null),v=u;if(a&&"object"==typeof a){const C=a;h=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=If(g),h&&(h=If(h)),v&&(v=If(v)));const w=super.subscribe({next:h,error:g,complete:v});return a instanceof W.w0&&a.add(w),w}};function Oy(...s){}class xi{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bo(!1),this.onMicrotaskEmpty=new Bo(!1),this.onStable=new Bo(!1),this.onError=new Bo(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&c,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function aI(){const s="function"==typeof Kt.requestAnimationFrame;let a=Kt[s?"requestAnimationFrame":"setTimeout"],c=Kt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function hD(s){const a=()=>{!function dD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Kt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,jg(s),s.isCheckStableRunning=!0,lI(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),jg(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,h,g,v,w)=>{if(function $i(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(w))return c.invokeTask(h,g,v,w);try{return cI(s),c.invokeTask(h,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),fD(s)}},onInvoke:(c,u,h,g,v,w,C)=>{try{return cI(s),c.invoke(h,g,v,w,C)}finally{s.shouldCoalesceRunChangeDetection&&a(),fD(s)}},onHasTask:(c,u,h,g)=>{c.hasTask(h,g),u===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,jg(s),lI(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,u,h,g)=>(c.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xi.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(xi.isInAngularZone())throw new ce(909,!1)}run(a,c,u){return this._inner.run(a,c,u)}runTask(a,c,u,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,a,uD,Oy,Oy);try{return g.runTask(v,c,u)}finally{g.cancelTask(v)}}runGuarded(a,c,u){return this._inner.runGuarded(a,c,u)}runOutsideAngular(a){return this._outer.run(a)}}const uD={};function lI(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function jg(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function cI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function fD(s){s._nesting--,lI(s)}class uI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bo,this.onMicrotaskEmpty=new Bo,this.onStable=new Bo,this.onError=new Bo}run(a,c,u){return a.apply(c,u)}runGuarded(a,c,u){return a.apply(c,u)}runOutsideAngular(a){return a()}runTask(a,c,u,h){return a.apply(c,u)}}const Ny=new Un("",{providedIn:"root",factory:Ly});function Ly(){const s=ct(xi);let a=!0;const c=new N.y(h=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(a),h.complete()})}),u=new N.y(h=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{xi.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const v=s.onUnstable.subscribe(()=>{xi.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{g.unsubscribe(),v.unsubscribe()}});return(0,re.T)(c,u.pipe((0,Ce.B)()))}function Kl(s){return s instanceof Function?s():s}let xd=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=_t({token:s,providedIn:"root",factory:()=>new s})}return s})();function Zl(s){for(;s;){s[Ht]|=64;const a=Sg(s);if(ra(s)&&!a)return s;s=a}return null}const _D=new Un("",{providedIn:"root",factory:()=>!1});let Yl=null;function ID(s,a){return s[a]??$g()}function bD(s,a){const c=$g();c.producerNode?.length&&(s[a]=Yl,c.lView=s,Yl=pI())}const Md={...xl,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{Zl(s.lView)},lView:null};function pI(){return Object.create(Md)}function $g(){return Yl??=pI(),Yl}const qt={};function Df(s){gI(un(),Le(),Et()+s,!1)}function gI(s,a,c,u){if(!u)if(3==(3&a[Ht])){const g=s.preOrderCheckHooks;null!==g&&$c(a,g,c)}else{const g=s.preOrderHooks;null!==g&&ja(a,g,0,c)}Ps(c)}function vi(s,a=Dt.Default){const c=Le();return null===c?Xe(s,a):Lo(ii(),c,Fe(s),a)}function mI(){throw new Error("invalid")}function kd(s,a,c,u,h,g,v,w,C,R,P){const $=a.blueprint.slice();return $[cr]=h,$[Ht]=140|u,(null!==R||s&&2048&s[Ht])&&($[Ht]|=2048),ag($),$[jn]=$[Ji]=s,$[fr]=c,$[Ao]=v||s&&s[Ao],$[kt]=w||s&&s[kt],$[po]=C||s&&s[po]||null,$[Ti]=g,$[Ro]=function ZM(){return af++}(),$[As]=P,$[Tc]=R,$[Nr]=2==a.type?s[Nr]:$,$}function Pd(s,a,c,u,h){let g=s.data[a];if(null===g)g=function Gg(s,a,c,u,h){const g=Vc(),v=zh(),C=s.data[a]=function DD(s,a,c,u,h,g){let v=a?a.injectorIndex:-1,w=0;return function Po(){return null!==Lt.skipHydrationRootTNode}()&&(w|=128),{type:c,index:u,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,c,a,u,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C,C.prev=g)),C}(s,a,c,u,h),function G_(){return Lt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=c,g.value=u,g.attrs=h;const v=function Bl(){const s=Lt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Ks(g,!0),g}function Sf(s,a,c,u){if(0===c)return-1;const h=a.length;for(let g=0;g<c;g++)a.push(u),s.blueprint.push(u),s.data.push(null);return h}function _I(s,a,c,u,h){const g=ID(a,Cc),v=Et(),w=2&u;try{Ps(-1),w&&a.length>en&&gI(s,a,en,!1),ys(w?2:0,h);const R=w?g:null,P=xh(R);try{null!==R&&(R.dirty=!1),c(u,h)}finally{Sr(R,P)}}finally{w&&null===a[Cc]&&bD(a,Cc),Ps(v),ys(w?3:1,h)}}function Od(s,a,c){if(Ju(a)){const u=mi(null);try{const g=a.directiveEnd;for(let v=a.directiveStart;v<g;v++){const w=s.data[v];w.contentQueries&&w.contentQueries(1,c[v],v)}}finally{mi(u)}}}function Wg(s,a,c){Ar()&&(function Uk(s,a,c,u){const h=c.directiveStart,g=c.directiveEnd;go(c)&&function Xg(s,a,c){const u=Di(a,s),h=jy(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const w=ya(s,kd(s,h,null,v,u,a,null,s[Ao].rendererFactory.createRenderer(u,c),null,null,null));s[a.index]=w}(a,c,s.data[h+c.componentOffset]),s.firstCreatePass||gr(c,a),ss(u,a);const v=c.initialInputs;for(let w=h;w<g;w++){const C=s.data[w],R=$a(a,s,w,c);ss(R,a),null!==v&&Vk(0,w-h,R,C,0,v),Ui(C)&&(_i(c.index,a)[fr]=$a(a,s,w,c))}}(s,a,c,Di(c,a)),64==(64&c.flags)&&su(s,a,c))}function qg(s,a,c=Di){const u=a.localNames;if(null!==u){let h=a.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],w=-1===v?c(a,s):s[v];s[h++]=w}}}function jy(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Af(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function Af(s,a,c,u,h,g,v,w,C,R,P){const $=en+u,ne=$+h,ie=function Kg(s,a){const c=[];for(let u=0;u<a;u++)c.push(u<s?null:qt);return c}($,ne),Se="function"==typeof R?R():R;return ie[rt]={type:s,blueprint:ie,template:c,queries:null,viewQuery:w,declTNode:a,data:ie.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Se,incompleteFirstPass:!1,ssrId:P}}let Hy=s=>null;function vI(s,a,c,u){for(let h in s)if(s.hasOwnProperty(h)){c=null===c?{}:c;const g=s[h];null===u?SD(c,a,h,g):u.hasOwnProperty(h)&&SD(c,a,u[h],g)}return c}function SD(s,a,c,u){s.hasOwnProperty(c)?s[c].push(a,u):s[c]=[a,u]}function ws(s,a,c,u,h,g,v,w){const C=Di(a,c);let P,R=a.inputs;!w&&null!=R&&(P=R[u])?(Ky(s,c,P,u,h),go(a)&&function Yg(s,a){const c=_i(a,s);16&c[Ht]||(c[Ht]|=64)}(c,a.index)):3&a.type&&(u=function AD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=v?v(h,a.value||"",u):h,g.setProperty(C,u,h))}function EI(s,a,c,u){if(Ar()){const h=null===u?null:{"":-1},g=function zy(s,a){const c=s.directiveRegistry;let u=null,h=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];if(yc(a,v.selectors,!1))if(u||(u=[]),Ui(v))if(null!==v.findHostDirectiveDefs){const w=[];h=h||new Map,v.findHostDirectiveDefs(v,w,h),u.unshift(...w,v),Rf(s,a,w.length)}else u.unshift(v),Rf(s,a,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,u,h),u.push(v)}return null===u?null:[u,h]}(s,c);let v,w;null===g?v=w=null:[v,w]=g,null!==v&&xD(s,a,c,v,h,w),h&&function PD(s,a,c){if(a){const u=s.localNames=[];for(let h=0;h<a.length;h+=2){const g=c[a[h+1]];if(null==g)throw new ce(-301,!1);u.push(a[h],g)}}}(c,u,h)}c.mergedAttrs=Tl(c.mergedAttrs,c.attrs)}function xD(s,a,c,u,h,g){for(let R=0;R<u.length;R++)da(gr(c,a),s,u[R].type);!function Gy(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,u.length);for(let R=0;R<u.length;R++){const P=u[R];P.providersResolver&&P.providersResolver(P)}let v=!1,w=!1,C=Sf(s,a,u.length,null);for(let R=0;R<u.length;R++){const P=u[R];c.mergedAttrs=Tl(c.mergedAttrs,P.hostAttrs),Qg(s,c,a,C,P),mr(C,P,h),null!==P.contentQueries&&(c.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(c.flags|=64);const $=P.type.prototype;!v&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),v=!0),!w&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),w=!0),C++}!function Zg(s,a,c){const h=a.directiveEnd,g=s.data,v=a.attrs,w=[];let C=null,R=null;for(let P=a.directiveStart;P<h;P++){const $=g[P],ne=c?c.get($):null,Se=ne?ne.outputs:null;C=vI($.inputs,P,C,ne?ne.inputs:null),R=vI($.outputs,P,R,Se);const We=null===C||null===v||xa(a)?null:Bk(C,P,v);w.push(We)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=8),C.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=w,a.inputs=C,a.outputs=R}(s,c,g)}function su(s,a,c){const u=c.directiveStart,h=c.directiveEnd,g=c.index,v=function W_(){return Lt.lFrame.currentDirectiveIndex}();try{Ps(g);for(let w=u;w<h;w++){const C=s.data[w],R=a[w];jc(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Ql(C,R)}}finally{Ps(-1),jc(v)}}function Ql(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Rf(s,a,c){a.componentOffset=c,(s.components??=[]).push(a.index)}function mr(s,a,c){if(c){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)c[a.exportAs[u]]=s;Ui(a)&&(c[""]=s)}}function Qg(s,a,c,u,h){s.data[u]=h;const g=h.factory||(h.factory=mo(h.type)),v=new $t(g,Ui(h),vi);s.blueprint[u]=v,c[u]=v,function MD(s,a,c,u,h){const g=h.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const w=~a.index;(function kD(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=w&&v.push(w),v.push(c,u,g)}}(s,a,u,Sf(s,c,h.hostVars,qt),h)}function rl(s,a,c,u,h,g){const v=Di(s,a);!function Wy(s,a,c,u,h,g,v){if(null==g)s.removeAttribute(a,h,c);else{const w=null==v?me(g):v(g,u||"",h);s.setAttribute(a,h,w,c)}}(a[kt],v,g,s.value,c,u,h)}function Vk(s,a,c,u,h,g){const v=g[a];if(null!==v)for(let w=0;w<v.length;)OD(u,c,v[w++],v[w++],v[w++])}function OD(s,a,c,u,h){const g=mi(null);try{const v=s.inputTransforms;null!==v&&v.hasOwnProperty(u)&&(h=v[u].call(a,h)),null!==s.setInput?s.setInput(a,h,c,u):a[u]=h}finally{mi(g)}}function Bk(s,a,c){let u=null,h=0;for(;h<c.length;){const g=c[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===u&&(u=[]);const v=s[g];for(let w=0;w<v.length;w+=2)if(v[w]===a){u.push(g,v[w+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return u}function ND(s,a,c,u){return[s,!0,!1,a,null,0,u,c,null,null,null]}function xf(s,a){const c=s.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const g=c[u+1];if(-1!==g){const v=s.data[g];qh(c[u]),v.contentQueries(2,a[g],g)}}}function ya(s,a){return s[Ss]?s[Ch][Xi]=a:s[Ss]=a,s[Ch]=a,a}function qy(s,a,c){qh(0);const u=mi(null);try{a(s,c)}finally{mi(u)}}function wI(s){return s[ea]||(s[ea]=[])}function Ld(s){return s.cleanup||(s.cleanup=[])}function FD(s,a){const c=s[po],u=c?c.get(nl,null):null;u&&u.handleError(a)}function Ky(s,a,c,u,h){for(let g=0;g<c.length;){const v=c[g++],w=c[g++];OD(s.data[v],a[v],u,w,h)}}function UD(s,a){const c=_i(a,s),u=c[rt];!function VD(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])}(u,c);const h=c[cr];null!==h&&null===c[As]&&(c[As]=Qw(h,c[po])),Jg(u,c,c[fr])}function Jg(s,a,c){er(a);try{const u=s.viewQuery;null!==u&&qy(1,u,c);const h=s.template;null!==h&&_I(s,a,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xf(s,a),s.staticViewQueries&&qy(2,s.viewQuery,c);const g=s.components;null!==g&&function II(s,a){for(let c=0;c<a.length;c++)UD(s,a[c])}(a,g)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{a[Ht]&=-5,ks()}}let bI=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,u,h){const g=typeof Zone>"u"?null:Zone.current,v=function sg(s,a,c){const u=Object.create(B_);c&&(u.consumerAllowSignalWrites=!0),u.fn=s,u.schedule=a;const h=v=>{u.cleanupFn=v};return u.ref={notify:()=>id(u),run:()=>{if(u.dirty=!1,u.hasRun&&!ng(u))return;u.hasRun=!0;const v=xh(u);try{u.cleanupFn(),u.cleanupFn=ld,u.fn(h)}finally{Sr(u,v)}},cleanup:()=>u.cleanupFn()},u.ref}(c,R=>{this.all.has(R)&&this.queue.set(R,g)},h);let w;this.all.add(v),v.notify();const C=()=>{v.cleanup(),w?.(),this.all.delete(v),this.queue.delete(v)};return w=u?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[c,u]of this.queue)this.queue.delete(c),u?u.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=_t({token:s,providedIn:"root",factory:()=>new s})}return s})();function Zy(s,a,c){let u=c?s.styles:null,h=c?s.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?g=w:1==g?h=He(h,w):2==g&&(u=He(u,w+": "+a[++v]+";"))}c?s.styles=u:s.stylesWithoutHost=u,c?s.classes=h:s.classesWithoutHost=h}function em(s,a,c,u,h=!1){for(;null!==c;){const g=a[c.index];null!==g&&u.push(Tn(g)),gi(g)&&jD(g,u);const v=c.type;if(8&v)em(s,a,c.child,u);else if(32&v){const w=Dg(c,a);let C;for(;C=w();)u.push(C)}else if(16&v){const w=mC(a,c);if(Array.isArray(w))u.push(...w);else{const C=Sg(a[Nr]);em(C[rt],C,w,u,!0)}}c=h?c.projectionNext:c.next}return u}function jD(s,a){for(let c=Lr;c<s.length;c++){const u=s[c],h=u[rt].firstChild;null!==h&&em(u[rt],u,h,a)}s[ri]!==s[cr]&&a.push(s[ri])}function Yy(s,a,c,u=!0){const h=a[Ao],g=h.rendererFactory,v=h.afterRenderEventManager;g.begin?.(),v?.begin();try{nm(s,a,s.template,c)}catch(C){throw u&&FD(a,C),C}finally{g.end?.(),h.effectManager?.flush(),v?.end()}}function nm(s,a,c,u){const h=a[Ht];if(256!=(256&h)){a[Ao].effectManager?.flush(),er(a);try{ag(a),function Gh(s){return Lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&_I(s,a,c,2,u);const v=3==(3&h);if(v){const R=s.preOrderCheckHooks;null!==R&&$c(a,R,null)}else{const R=s.preOrderHooks;null!==R&&ja(a,R,0,null),ua(a,0)}if(function HD(s){for(let a=cC(s);null!==a;a=yw(a)){if(!a[Na])continue;const c=a[xo];for(let u=0;u<c.length;u++){aa(c[u])}}}(a),Qy(a,2),null!==s.contentQueries&&xf(s,a),v){const R=s.contentCheckHooks;null!==R&&$c(a,R)}else{const R=s.contentHooks;null!==R&&ja(a,R,1),ua(a,1)}!function zg(s,a){const c=s.hostBindingOpCodes;if(null===c)return;const u=ID(a,ts);try{for(let h=0;h<c.length;h++){const g=c[h];if(g<0)Ps(~g);else{const v=g,w=c[++h],C=c[++h];Bc(w,v),u.dirty=!1;const R=xh(u);try{C(2,a[v])}finally{Sr(u,R)}}}}finally{null===a[ts]&&bD(a,ts),Ps(-1)}}(s,a);const w=s.components;null!==w&&$D(a,w,0);const C=s.viewQuery;if(null!==C&&qy(2,C,u),v){const R=s.viewCheckHooks;null!==R&&$c(a,R)}else{const R=s.viewHooks;null!==R&&ja(a,R,2),ua(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Ht]&=-73,$_(a)}finally{ks()}}}function Qy(s,a){for(let c=cC(s);null!==c;c=yw(c))for(let u=Lr;u<c.length;u++)Mf(c[u],a)}function rm(s,a,c){Mf(_i(a,s),c)}function Mf(s,a){if(!function Bh(s){return 128==(128&s[Ht])}(s))return;const c=s[rt],u=s[Ht];if(80&u&&0===a||1024&u||2===a)nm(c,s,c.template,s[fr]);else if(s[fo]>0){Qy(s,1);const h=c.components;null!==h&&$D(s,h,1)}}function $D(s,a,c){for(let u=0;u<a.length;u++)rm(s,a[u],c)}class ur{get rootNodes(){const a=this._lView,c=a[rt];return em(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fr]}set context(a){this._lView[fr]=a}get destroyed(){return 256==(256&this._lView[Ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[jn];if(gi(a)){const c=a[8],u=c?c.indexOf(this):-1;u>-1&&(Ri(a,u),qa(c,u))}this._attachedToViewContainer=!1}Ew(this._lView[rt],this._lView)}onDestroy(a){!function Ba(s,a){if(256==(256&s[Ht]))throw new ce(911,!1);null===s[ta]&&(s[ta]=[]),s[ta].push(a)}(this._lView,a)}markForCheck(){Zl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ht]&=-129}reattach(){this._lView[Ht]|=128}detectChanges(){Yy(this._lView[rt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cf(s,a){os(s,a,a[kt],2,null,null)}(this._lView[rt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=a}}class zD extends ur{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Yy(a[rt],a,a[fr],!1)}checkNoChanges(){}get context(){return null}}class GD extends Ad{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=rn(a);return new kf(c,this.ngModule)}}function WD(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class qD{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,u){u=wn(u);const h=this.injector.get(a,xy,u);return h!==xy||c===xy?h:this.parentInjector.get(a,c,u)}}class kf extends Fg{get inputs(){const a=this.componentDef,c=a.inputTransforms,u=WD(a.inputs);if(null!==c)for(const h of u)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return u}get outputs(){return WD(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function L_(s){return s.map(Wu).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,u,h){let g=(h=h||this.ngModule)instanceof Xa?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new qD(a,g):a,w=v.get(Bg,null);if(null===w)throw new ce(407,!1);const $={rendererFactory:w,sanitizer:v.get(kk,null),effectManager:v.get(bI,null),afterRenderEventManager:v.get(xd,null)},ne=w.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",Se=u?function TD(s,a,c,u){const g=u.get(_D,!1)||c===Gs.ShadowDom,v=s.selectRootElement(a,g);return function Fk(s){Hy(s)}(v),v}(ne,u,this.componentDef.encapsulation,v):cy(ne,ie,function Hk(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(ie)),At=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ve=null;null!==Se&&(Ve=Qw(Se,v,!0));const zt=Af(0,null,null,1,0,null,null,null,null,null,null),on=kd(null,zt,null,At,null,null,$,ne,v,null,Ve);let Kn,Io;er(on);try{const lc=this.componentDef;let Ep,mE=null;lc.findHostDirectiveDefs?(Ep=[],mE=new Map,lc.findHostDirectiveDefs(lc,Ep,mE),Ep.push(lc)):Ep=[lc];const e_=function Xy(s,a){const c=s[rt],u=en;return s[u]=a,Pd(c,u,2,"#host",null)}(on,Se),MO=function ZD(s,a,c,u,h,g,v){const w=h[rt];!function il(s,a,c,u){for(const h of s)a.mergedAttrs=Tl(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(Zy(a,a.mergedAttrs,!0),null!==c&&EC(u,c,a))}(u,s,a,v);let C=null;null!==a&&(C=Qw(a,h[po]));const R=g.rendererFactory.createRenderer(a,c);let P=16;c.signals?P=4096:c.onPush&&(P=64);const $=kd(h,jy(c),null,P,h[s.index],s,g,R,null,null,C);return w.firstCreatePass&&Rf(w,s,u.length-1),ya(h,$),h[s.index]=$}(e_,Se,lc,Ep,on,$,ne);Io=ud(zt,en),Se&&function $k(s,a,c,u){if(u)Ra(s,c,["ng-version",Rd.full]);else{const{attrs:h,classes:g}=function Fi(s){const a=[],c=[];let u=1,h=2;for(;u<s.length;){let g=s[u];if("string"==typeof g)2===h?""!==g&&a.push(g,s[++u]):8===h&&c.push(g);else{if(!Li(h))break;h=g}u++}return{attrs:a,classes:c}}(a.selectors[0]);h&&Ra(s,c,h),g&&g.length>0&&xw(s,c,g.join(" "))}}(ne,lc,Se,u),void 0!==c&&function QD(s,a,c){const u=s.projection=[];for(let h=0;h<a.length;h++){const g=c[h];u.push(null!=g?Array.from(g):null)}}(Io,this.ngContentSelectors,c),Kn=function YD(s,a,c,u,h,g){const v=ii(),w=h[rt],C=Di(v,h);xD(w,h,v,c,null,u);for(let P=0;P<c.length;P++)ss($a(h,w,v.directiveStart+P,v),h);su(w,h,v),C&&ss(C,h);const R=$a(h,w,v.directiveStart+v.componentOffset,v);if(s[fr]=h[fr]=R,null!==g)for(const P of g)P(R,a);return Od(w,v,s),R}(MO,lc,Ep,mE,on,[CI]),Jg(zt,on,null)}finally{ks()}return new KD(this.componentType,Kn,ai(Io,on),on,Io)}}class KD extends Es{constructor(a,c,u,h,g){super(),this.location=u,this._rootLView=h,this._tNode=g,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new zD(h),this.componentType=a}setInput(a,c){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const g=this._rootLView;Ky(g[rt],g,h,a,c),this.previousInputValues.set(a,c),Zl(_i(this._tNode.index,g))}}get injector(){return new fn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function CI(){const s=ii();Os(Le()[rt],s)}function Jy(s){let a=function Pf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const u=[s];for(;a;){let h;if(Ui(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ce(903,!1);h=a.\u0275dir}if(h){if(c){u.push(h);const v=s;v.inputs=Fd(s.inputs),v.inputTransforms=Fd(s.inputTransforms),v.declaredInputs=Fd(s.declaredInputs),v.outputs=Fd(s.outputs);const w=h.hostBindings;w&&zk(s,w);const C=h.viewQuery,R=h.contentQueries;if(C&&XD(s,C),R&&ev(s,R),Q(s.inputs,h.inputs),Q(s.declaredInputs,h.declaredInputs),Q(s.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),Q(v.inputTransforms,h.inputTransforms)),Ui(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Jy&&(c=!1)}}a=Object.getPrototypeOf(a)}!function DI(s){let a=0,c=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=a+=h.hostVars,h.hostAttrs=Tl(h.hostAttrs,c=Tl(c,h.hostAttrs))}}(u)}function Fd(s){return s===_s?{}:s===cn?[]:s}function XD(s,a){const c=s.viewQuery;s.viewQuery=c?(u,h)=>{a(u,h),c(u,h)}:a}function ev(s,a){const c=s.contentQueries;s.contentQueries=c?(u,h,g)=>{a(u,h,g),c(u,h,g)}:a}function zk(s,a){const c=s.hostBindings;s.hostBindings=c?(u,h)=>{a(u,h),c(u,h)}:a}function RI(s){const a=s.inputConfig,c={};for(const u in a)if(a.hasOwnProperty(u)){const h=a[u];Array.isArray(h)&&h[2]&&(c[u]=h[2])}s.inputTransforms=c}function sm(s){return!!rv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function rv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function us(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function om(s,a,c,u){const h=Le();return us(h,ca(),a)&&(un(),rl(nr(),h,s,a,c,u)),om}function Lf(s,a,c,u){return us(s,ca(),c)?a+me(c)+u:qt}function eP(s,a,c,u,h,g,v,w){const C=Le(),R=un(),P=s+en,$=R.firstCreatePass?function Jk(s,a,c,u,h,g,v,w,C){const R=a.consts,P=Pd(a,s,4,v||null,oa(R,w));EI(a,c,P,oa(R,C)),Os(a,P);const $=P.tView=Af(2,P,u,h,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R,null);return null!==a.queries&&(a.queries.template(a,P),$.queries=a.queries.embeddedTView(P)),P}(P,R,C,a,c,u,h,g,v):R.data[P];Ks($,!1);const ne=dS(R,C,$,s);rr()&&dy(R,C,ne,$),ss(ne,C),ya(C,C[P]=ND(ne,C,ne,$)),ns($)&&Wg(R,C,$),null!=v&&qg(C,$,w)}let dS=function PI(s,a,c,u){return yi(!0),a[kt].createComment("")};function _r(s){return function sa(s,a){return s[a]}(function ug(){return Lt.lFrame.contextLView}(),en+s)}function Ct(s,a,c){const u=Le();return us(u,ca(),a)&&ws(un(),nr(),u,s,a,u[kt],c,!1),Ct}function Hd(s,a,c,u,h){const v=h?"class":"style";Ky(s,c,a.inputs[v],v,u)}function av(s,a,c,u){const h=Le(),g=un(),v=en+s,w=h[kt],C=g.firstCreatePass?function Rn(s,a,c,u,h,g){const v=a.consts,C=Pd(a,s,2,u,oa(v,h));return EI(a,c,C,oa(v,g)),null!==C.attrs&&Zy(C,C.attrs,!1),null!==C.mergedAttrs&&Zy(C,C.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,C),C}(v,g,h,a,c,u):g.data[v],R=um(g,h,C,w,a,s);h[v]=R;const P=ns(C);return Ks(C,!0),EC(w,R,C),32!=(32&C.flags)&&rr()&&dy(g,h,R,C),0===function Uc(){return Lt.lFrame.elementDepthCount}()&&ss(R,h),function Ur(){Lt.lFrame.elementDepthCount++}(),P&&(Wg(g,h,C),Od(g,C,h)),null!==u&&qg(h,C),av}function yr(){let s=ii();zh()?function pd(){Lt.lFrame.isParent=!1}():(s=s.parent,Ks(s,!1));const a=s;(function la(s){return Lt.skipHydrationRootTNode===s})(a)&&function $h(){Lt.skipHydrationRootTNode=null}(),function lg(){Lt.lFrame.elementDepthCount--}();const c=un();return c.firstCreatePass&&(Os(c,s),Ju(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function K_(s){return 0!=(8&s.flags)}(a)&&Hd(c,a,Le(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function vd(s){return 0!=(16&s.flags)}(a)&&Hd(c,a,Le(),a.stylesWithoutHost,!1),yr}function ot(s,a,c,u){return av(s,a,c,u),yr(),ot}let um=(s,a,c,u,h,g)=>(yi(!0),cy(u,h,function Vr(){return Lt.lFrame.currentNamespace}()));function lv(){return Le()}function cv(s){return!!s&&"function"==typeof s.then}function FI(s){return!!s&&"function"==typeof s.subscribe}function ll(s,a,c,u){const h=Le(),g=un(),v=ii();return function dm(s,a,c,u,h,g,v){const w=ns(u),R=s.firstCreatePass&&Ld(s),P=a[fr],$=wI(a);let ne=!0;if(3&u.type||v){const We=Di(u,a),dt=v?v(We):We,At=$.length,Ve=v?on=>v(Tn(on[u.index])):u.index;let zt=null;if(!v&&w&&(zt=function ge(s,a,c,u){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===c&&h[g+1]===u){const w=a[ea],C=h[g+2];return w.length>C?w[C]:null}"string"==typeof v&&(g+=2)}return null}(s,a,h,u.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=g,zt.__ngLastListenerFn__=g,ne=!1;else{g=pS(u,a,P,g,!1);const on=c.listen(dt,h,g);$.push(g,on),R&&R.push(h,Ve,At,At+1)}}else g=pS(u,a,P,g,!1);const ie=u.outputs;let Se;if(ne&&null!==ie&&(Se=ie[h])){const We=Se.length;if(We)for(let dt=0;dt<We;dt+=2){const Kn=a[Se[dt]][Se[dt+1]].subscribe(g),Io=$.length;$.push(g,Kn),R&&R.push(h,u.index,Io,-(Io+1))}}}(g,h,h[kt],v,s,a,u),ll}function $o(s,a,c,u){try{return ys(6,a,c),!1!==c(u)}catch(h){return FD(s,h),!1}finally{ys(7,a,c)}}function pS(s,a,c,u,h){return function g(v){if(v===Function)return u;Zl(s.componentOffset>-1?_i(s.index,a):a);let C=$o(a,c,u,v),R=g.__ngNextListenerFn__;for(;R;)C=$o(a,c,R,v)&&C,R=R.__ngNextListenerFn__;return h&&!1===C&&v.preventDefault(),C}}function $f(s=1){return function Oo(s){return(Lt.lFrame.contextLView=function tr(s,a){for(;s>0;)a=a[Ji],s--;return a}(s,Lt.lFrame.contextLView))[fr]}(s)}function dv(s,a,c){return hm(s,"",a,"",c),dv}function hm(s,a,c,u,h){const g=Le(),v=Lf(g,a,c,u);return v!==qt&&ws(un(),nr(),g,s,v,g[kt],h,!1),hm}function fm(s,a){return s<<17|a<<2}function hs(s){return s>>17&32767}function fv(s){return 2|s}function Gd(s){return(131068&s)>>2}function VI(s,a){return-131069&s|a<<2}function BI(s){return 1|s}function vS(s,a,c,u,h){const g=s[c+1],v=null===a;let w=u?hs(g):Gd(g),C=!1;for(;0!==w&&(!1===C||v);){const P=s[w+1];oP(s[w],a)&&(C=!0,s[w+1]=u?BI(P):fv(P)),w=u?hs(P):Gd(P)}C&&(s[c+1]=u?fv(g):BI(g))}function oP(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&zl(s,a)>=0}function Wf(s,a){return function xr(s,a,c,u){const h=Le(),g=un(),v=function Ys(s){const a=Lt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}(2);g.firstUpdatePass&&function wi(s,a,c,u){const h=s.data;if(null===h[c+1]){const g=h[Et()],v=function DS(s,a){return a>=s.expandoStartIndex}(s,c);(function nc(s,a){return 0!=(s.flags&(a?8:16))})(g,u)&&null===a&&!v&&(a=!1),a=function dP(s,a,c,u){const h=function md(s){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=u?a.residualClasses:a.residualStyles;if(null===h)0===(u?a.classBindings:a.styleBindings)&&(c=du(c=qf(null,s,a,c,u),a.attrs,u),g=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==h)if(c=qf(h,s,a,c,u),null===g){let C=function uu(s,a,c){const u=c?a.classBindings:a.styleBindings;if(0!==Gd(u))return s[hs(u)]}(s,a,u);void 0!==C&&Array.isArray(C)&&(C=qf(null,s,a,C[1],u),C=du(C,a.attrs,u),function Zr(s,a,c,u){s[hs(c?a.classBindings:a.styleBindings)]=u}(s,a,u,C))}else g=function ec(s,a,c){let u;const h=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<h;g++)u=du(u,s[g].hostAttrs,c);return du(u,a.attrs,c)}(s,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),c}(h,g,a,u),function iP(s,a,c,u,h,g){let v=g?a.classBindings:a.styleBindings,w=hs(v),C=Gd(v);s[u]=c;let P,R=!1;if(Array.isArray(c)?(P=c[1],(null===P||zl(c,P)>0)&&(R=!0)):P=c,h)if(0!==C){const ne=hs(s[w+1]);s[u+1]=fm(ne,w),0!==ne&&(s[ne+1]=VI(s[ne+1],u)),s[w+1]=function hv(s,a){return 131071&s|a<<17}(s[w+1],u)}else s[u+1]=fm(w,0),0!==w&&(s[w+1]=VI(s[w+1],u)),w=u;else s[u+1]=fm(C,0),0===w?w=u:s[C+1]=VI(s[C+1],u),C=u;R&&(s[u+1]=fv(s[u+1])),vS(s,P,u,!0),vS(s,P,u,!1),function sP(s,a,c,u,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&zl(g,a)>=0&&(c[u+1]=BI(c[u+1]))}(a,P,s,u,g),v=fm(w,C),g?a.classBindings=v:a.styleBindings=v}(h,g,a,c,v,u)}}(g,s,v,u),a!==qt&&us(h,v,a)&&function gm(s,a,c,u,h,g,v,w){if(!(3&a.type))return;const C=s.data,R=C[w+1],P=function rP(s){return 1==(1&s)}(R)?tc(C,a,c,h,Gd(R),v):void 0;wo(P)||(wo(g)||function yS(s){return 2==(2&s)}(R)&&(g=tc(C,null,c,h,w,v)),function ak(s,a,c,u,h){if(a)h?s.addClass(c,u):s.removeClass(c,u);else{let g=-1===u.indexOf("-")?void 0:sf.DashCase;null==h?s.removeStyle(c,u,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=sf.Important),s.setStyle(c,u,h,g))}}(u,v,qs(Et(),c),h,g))}(g,g.data[Et()],h,h[kt],s,h[v+1]=function mm(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=le(as(s)))),s}(a,c),u,v)}(s,a,null,!0),Wf}function qf(s,a,c,u,h){let g=null;const v=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<v&&(g=a[w],u=du(u,g.hostAttrs,h),g!==s);)w++;return null!==s&&(c.directiveStylingLast=w),u}function du(s,a,c){const u=c?1:2;let h=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?h=v:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Bi(s,v,!!c||a[++g]))}return void 0===s?null:s}function tc(s,a,c,u,h,g){const v=null===a;let w;for(;h>0;){const C=s[h],R=Array.isArray(C),P=R?C[1]:C,$=null===P;let ne=c[h+1];ne===qt&&(ne=$?cn:void 0);let ie=$?wd(ne,u):P===u?ne:void 0;if(R&&!wo(ie)&&(ie=wd(C,u)),wo(ie)&&(w=ie,v))return w;const Se=s[h+1];h=v?hs(Se):Gd(Se)}if(null!==a){let C=g?a.residualClasses:a.residualStyles;null!=C&&(w=wd(C,u))}return w}function wo(s){return void 0!==s}function $I(s,a=""){const c=Le(),u=un(),h=s+en,g=u.firstCreatePass?Pd(u,h,1,a,null):u.data[h],v=qd(u,c,g,a,s);c[h]=v,rr()&&dy(u,c,v,g),Ks(g,!1)}let qd=(s,a,c,u,h)=>(yi(!0),function ay(s,a){return s.createText(a)}(a[kt],u));function rc(s){return _m("",s,""),rc}function _m(s,a,c){const u=Le(),h=Lf(u,s,a,c);return h!==qt&&function Xl(s,a,c){const u=qs(a,s);!function uC(s,a,c){s.setValue(a,c)}(s[kt],u,c)}(u,Et(),h),_m}function n0(s,a,c){const u=Le();return us(u,ca(),a)&&ws(un(),nr(),u,s,a,u[kt],c,!0),n0}const Kd=void 0;var Zd=["en",[["a","p"],["AM","PM"],Kd],[["AM","PM"],Kd,Kd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kd,"{1} 'at' {0}",Kd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function r0(s){const c=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===u?1:5}];let cl={};function Xf(s){const a=function HS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=ul(a);if(c)return c;const u=a.split("-")[0];if(c=ul(u),c)return c;if("en"===u)return Zd;throw new ce(701,!1)}function o0(s){return Xf(s)[Ea.PluralCase]}function ul(s){return s in cl||(cl[s]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[s]),cl[s]}var Ea=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Ea||{});const gu="en-US";let l0=gu;class wa{}class T0{}function pA(s,a){return new C0(s,a??null,[])}class C0 extends wa{constructor(a,c,u){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new GD(this);const h=ni(a);this._bootstrapComponents=Kl(h.bootstrap),this._r3Injector=sD(a,c,[{provide:wa,useValue:this},{provide:Ad,useValue:this.componentFactoryResolver},...u],le(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class D0 extends T0{constructor(a){super(),this.moduleType=a}create(a){return new C0(this.moduleType,a,[])}}class Cv extends wa{constructor(a){super(),this.componentFactoryResolver=new GD(this),this.instance=null;const c=new gf([...a.providers,{provide:wa,useValue:this},{provide:Ad,useValue:this.componentFactoryResolver}],a.parent||Qa(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function gA(s,a,c=null){return new Cv({providers:s,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let mA=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const u=BC(0,c.type),h=u.length>0?gA([u],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,h)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=_t({token:s,providedIn:"environment",factory:()=>new s(Xe(Xa))})}return s})();function Dv(s){s.getStandaloneInjector=a=>a.get(mA).getOrCreateStandaloneInjector(s)}function M0(){return this._results[Symbol.iterator]()}class km{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Bo)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=km.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=M0)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const u=this;u.dirty=!1;const h=function ir(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function is(s,a,c){if(s.length!==a.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],g=a[u];if(c&&(h=c(h),g=c(g)),g!==h)return!1}return!0}(u._results,h,c))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function k0(s,a,c,u=!0){const h=a[rt];if(function hC(s,a,c,u){const h=Lr+u,g=c.length;u>0&&(c[h-1][Xi]=a),u<g-Lr?(a[Xi]=c[h],fg(c,Lr+u,a)):(c.push(a),a[Xi]=null),a[jn]=c;const v=a[Oa];null!==v&&c!==v&&function Ag(s,a){const c=s[xo];a[Nr]!==a[jn][jn][Nr]&&(s[Na]=!0),null===c?s[xo]=[a]:c.push(a)}(v,a);const w=a[Ci];null!==w&&w.insertView(s),a[Ht]|=128}(h,a,s,c),u){const g=Sw(c,s),v=a[kt],w=Rg(v,s[ri]);null!==w&&function ik(s,a,c,u,h,g){u[cr]=h,u[Ti]=a,os(s,u,c,1,h,g)}(h,s[Ti],v,a,w,g)}}let Iu=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=xv}return s})();const UP=Iu,P0=class extends UP{constructor(a,c,u){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c)}createEmbeddedViewImpl(a,c,u){const h=function xA(s,a,c,u){const h=a.tView,w=kd(s,h,c,4096&s[Ht]?4096:16,null,a,null,null,null,u?.injector??null,u?.hydrationInfo??null);w[Oa]=s[a.index];const R=s[Ci];return null!==R&&(w[Ci]=R.createEmbeddedView(h)),Jg(h,w,c),w}(this._declarationLView,this._declarationTContainer,a,{injector:c,hydrationInfo:u});return new ur(h)}};function xv(){return Mv(ii(),Le())}function Mv(s,a){return 4&s.type?new P0(a,s,ai(s,a)):null}let Lm=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=Tu}return s})();function Tu(){return rh(ii(),Le())}const up=Lm,N0=class extends up{constructor(a,c,u){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=u}get element(){return ai(this._hostTNode,this._hostLView)}get injector(){return new fn(this._hostTNode,this._hostLView)}get parentInjector(){const a=No(this._hostTNode,this._hostLView);if(zc(a)){const c=Gc(a,this._hostLView),u=Ha(a);return new fn(c[rt].data[u+8],c)}return new fn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Cu(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Lr}createEmbeddedView(a,c,u){let h,g;"number"==typeof u?h=u:null!=u&&(h=u.index,g=u.injector);const w=a.createEmbeddedViewImpl(c||{},g,null);return this.insertImpl(w,h,false),w}createComponent(a,c,u,h,g){const v=a&&!function to(s){return"function"==typeof s}(a);let w;if(v)w=c;else{const We=c||{};w=We.index,u=We.injector,h=We.projectableNodes,g=We.environmentInjector||We.ngModuleRef}const C=v?a:new kf(rn(a)),R=u||this.parentInjector;if(!g&&null==C.ngModule){const dt=(v?R:this.parentInjector).get(Xa,null);dt&&(g=dt)}rn(C.componentType??{});const ie=C.create(R,h,null,g);return this.insertImpl(ie.hostView,w,false),ie}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,u){const h=a._lView;if(function Lc(s){return gi(s[jn])}(h)){const C=this.indexOf(a);if(-1!==C)this.detach(C);else{const R=h[jn],P=new N0(R,R[Ti],R[jn]);P.detach(P.indexOf(a))}}const v=this._adjustIndex(c),w=this._lContainer;return k0(w,h,v,!u),a.attachToViewContainerRef(),fg(L0(w),v,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Cu(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),u=Ri(this._lContainer,c);u&&(qa(L0(this._lContainer),c),Ew(u[rt],u))}detach(a){const c=this._adjustIndex(a,-1),u=Ri(this._lContainer,c);return u&&null!=qa(L0(this._lContainer),c)?new ur(u):null}_adjustIndex(a,c=0){return a??this.length+c}};function Cu(s){return s[8]}function L0(s){return s[8]||(s[8]=[])}function rh(s,a){let c;const u=a[s.index];return gi(u)?c=u:(c=ND(u,a,null,s),a[s.index]=c,ya(a,c)),sc(c,a,s,u),new N0(c,s,a)}let sc=function F0(s,a,c,u){if(s[ri])return;let h;h=8&c.type?Tn(u):function NA(s,a){const c=s[kt],u=c.createComment(""),h=Di(a,s);return Za(c,Rg(c,h),u,function df(s,a){return s.nextSibling(a)}(c,h),!1),u}(a,c),s[ri]=h};class U0{constructor(a){this.queryList=a,this.matches=null}clone(){return new U0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const u=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let g=0;g<u;g++){const v=c.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new Pv(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==HA(a,c).matches&&this.queries[c].setDirty()}}class FA{constructor(a,c,u=null){this.predicate=a,this.flags=c,this.read=u}}class dp{constructor(a=[]){this.queries=a}elementStart(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let u=0;u<this.length;u++){const h=null!==c?c.length:0,g=this.getByIndex(u).embeddedTView(a,h);g&&(g.indexInDeclarationView=u,null!==c?c.push(g):c=[g])}return null!==c?new dp(c):null}template(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Ov{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Ov(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const g=u[h];this.matchTNodeWithReadOption(a,c,BP(c,g)),this.matchTNodeWithReadOption(a,c,Ed(c,a,g,!1,!1))}else u===Iu?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Ed(c,a,u,!1,!1))}matchTNodeWithReadOption(a,c,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Ug||h===Lm||h===Iu&&4&c.type)this.addMatch(c.index,-2);else{const g=Ed(c,a,h,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,u)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function BP(s,a){const c=s.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===a)return c[u+1];return null}function jP(s,a,c,u){return-1===c?function UA(s,a){return 11&s.type?ai(s,a):4&s.type?Mv(s,a):null}(a,s):-2===c?function VA(s,a,c){return c===Ug?ai(a,s):c===Iu?Mv(a,s):c===Lm?rh(a,s):void 0}(s,a,u):$a(s,s[rt],c,a)}function Du(s,a,c,u){const h=a[Ci].queries[u];if(null===h.matches){const g=s.data,v=c.matches,w=[];for(let C=0;C<v.length;C+=2){const R=v[C];w.push(R<0?null:jP(a,g[R],v[C+1],c.metadata.read))}h.matches=w}return h.matches}function ih(s,a,c,u){const h=s.queries.getByIndex(c),g=h.matches;if(null!==g){const v=Du(s,a,h,c);for(let w=0;w<g.length;w+=2){const C=g[w];if(C>0)u.push(v[w/2]);else{const R=g[w+1],P=a[-C];for(let $=Lr;$<P.length;$++){const ne=P[$];ne[Oa]===ne[jn]&&ih(ne[rt],ne,R,u)}if(null!==P[xo]){const $=P[xo];for(let ne=0;ne<$.length;ne++){const ie=$[ne];ih(ie[rt],ie,R,u)}}}}}return u}function V0(s){const a=Le(),c=un(),u=_d();qh(u+1);const h=HA(c,u);if(s.dirty&&function dd(s){return 4==(4&s[Ht])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?ih(c,a,u,[]):Du(c,a,h,u);s.reset(g,Vg),s.notifyOnChanges()}return!0}return!1}function B0(s,a,c){const u=un();u.firstCreatePass&&(Nv(u,new FA(s,a,c),-1),2==(2&a)&&(u.staticViewQueries=!0)),jA(u,Le(),a)}function BA(s,a,c,u){const h=un();if(h.firstCreatePass){const g=ii();Nv(h,new FA(a,c,u),g.index),function Wi(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}jA(h,Le(),c)}function j0(){return function HP(s,a){return s[Ci].queries[a].queryList}(Le(),_d())}function jA(s,a,c){const u=new km(4==(4&c));(function CD(s,a,c,u){const h=wI(a);h.push(c),s.firstCreatePass&&Ld(s).push(u,h.length-1)})(s,a,u,u.destroy),null===a[Ci]&&(a[Ci]=new Pv),a[Ci].queries.push(new U0(u))}function Nv(s,a,c){null===s.queries&&(s.queries=new dp),s.queries.track(new Ov(a,c))}function HA(s,a){return s.queries.getByIndex(a)}function Lv(s){return!!ni(s)}const lR=new Un("Application Initializer");let ah=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,u)=>{this.resolve=c,this.reject=u}),this.appInits=ct(lR,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const h of this.appInits){const g=h();if(cv(g))c.push(g);else if(FI(g)){const v=new Promise((w,C)=>{g.subscribe({complete:w,error:C})});c.push(v)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{u()}).catch(h=>{this.reject(h)}),0===c.length&&u(),this.initialized=!0}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),$v=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const gp=new Un("LocaleId",{providedIn:"root",factory:()=>ct(gp,Dt.Optional|Dt.SkipSelf)||function pp(){return typeof $localize<"u"&&$localize.locale||gu}()}),zv=new Un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Wv=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ue.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class tb{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let Au=(()=>{class s{compileModuleSync(c){return new D0(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const u=this.compileModuleSync(c),g=Kl(ni(c).declarations).reduce((v,w)=>{const C=rn(w);return C&&v.push(new kf(C)),v},[]);return new tb(u,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const oc=new Un(""),Qv=new Un("");let Ru,yp=(()=>{class s{constructor(c,u,h){this._ngZone=c,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ru||(function _R(s){Ru=s}(h),h.addToWindow(u)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(c)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,u,h){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),c(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:h})}whenStable(c,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,u,h){return[]}static#e=this.\u0275fac=function(u){return new(u||s)(Xe(xi),Xe(lh),Xe(Qv))};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac})}return s})(),lh=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,u){this._applications.set(c,u)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,u=!0){return Ru?.findTestabilityInTree(this,c,u)??null}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),xu=null;const yR=new Un("AllowMultipleToken"),Wm=new Un("PlatformDestroyListeners"),qm=new Un("appBootstrapListener");class ub{constructor(a,c){this.name=a,this.token=c}}function fb(s,a,c=[]){const u=`Platform: ${a}`,h=new Un(u);return(g=[])=>{let v=gb();if(!v||v.injector.get(yR,!1)){const w=[...c,...g,{provide:h,useValue:!0}];s?s(w):function db(s){if(xu&&!xu.get(yR,!1))throw new ce(400,!1);(function ER(){!function Nh(s){Oh=s}(()=>{throw new ce(600,!1)})})(),xu=s;const a=s.get(IR);(function hb(s){s.get(qC,null)?.forEach(c=>c())})(s)}(function pb(s=[],a){return Vs.create({name:a,providers:[{provide:Hw,useValue:"platform"},{provide:Wm,useValue:new Set([()=>xu=null])},...s]})}(w,u))}return function wR(s){const a=gb();if(!a)throw new ce(401,!1);return a}()}}function gb(){return xu?.get(IR)??null}let IR=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,u){const h=function sO(s="zone.js",a){return"noop"===s?new uI:"zone.js"===s?new xi(a):s}(u?.ngZone,function bR(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return h.run(()=>{const g=function Am(s,a,c){return new C0(s,a,c)}(c.moduleType,this.injector,function _b(s){return[{provide:xi,useFactory:s},{provide:ff,multi:!0,useFactory:()=>{const a=ct(CR,{optional:!0});return()=>a.initialize()}},{provide:TR,useFactory:mb},{provide:Ny,useFactory:Ly}]}(()=>h)),v=g.injector.get(nl,null);return h.runOutsideAngular(()=>{const w=h.onError.subscribe({next:C=>{v.handleError(C)}});g.onDestroy(()=>{eE(this._modules,g),w.unsubscribe()})}),function Xv(s,a,c){try{const u=c();return cv(u)?u.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw a.runOutsideAngular(()=>s.handleError(u)),u}}(v,h,()=>{const w=g.injector.get(ah);return w.runInitializers(),w.donePromise.then(()=>(function _v(s){nt(s,"Expected localeId to be defined"),"string"==typeof s&&(l0=s.toLowerCase().replace(/_/g,"-"))}(g.injector.get(gp,gu)||gu),this._moduleDoBootstrap(g),g))})})}bootstrapModule(c,u=[]){const h=Jv({},u);return function cb(s,a,c){const u=new D0(c);return Promise.resolve(u)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(c){const u=c.injector.get(Mu);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new ce(-403,!1);c.instance.ngDoBootstrap(u)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const c=this._injector.get(Wm,null);c&&(c.forEach(u=>u()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(u){return new(u||s)(Xe(Vs))};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function Jv(s,a){return Array.isArray(a)?a.reduce(Jv,s):{...s,...a}}let Mu=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ct(TR),this.zoneIsStable=ct(Ny),this.componentTypes=[],this.components=[],this.isStable=ct(Wv).hasPendingTasks.pipe((0,Me.w)(c=>c?(0,fe.of)(!1):this.zoneIsStable),(0,Ee.x)(),(0,Ce.B)()),this._injector=ct(Xa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,u){const h=c instanceof Fg;if(!this._injector.get(ah).done)throw!h&&ka(c),new ce(405,!1);let v;v=h?c:this._injector.get(Ad).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const w=function nO(s){return s.isBoundToModule}(v)?void 0:this._injector.get(wa),R=v.create(Vs.NULL,[],u||v.selector,w),P=R.location.nativeElement,$=R.injector.get(oc,null);return $?.registerApplication(P),R.onDestroy(()=>{this.detachView(R.hostView),eE(this.components,R),$?.unregisterApplication(P)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const u=c;this._views.push(u),u.attachToAppRef(this)}detachView(c){const u=c;eE(this._views,u),u.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const u=this._injector.get(qm,[]);u.push(...this._bootstrapListeners),u.forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>eE(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ce(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function eE(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}const TR=new Un("",{providedIn:"root",factory:()=>ct(nl).handleError.bind(void 0)});function mb(){const s=ct(xi),a=ct(nl);return c=>s.runOutsideAngular(()=>a.handleError(c))}let CR=(()=>{class s{constructor(){this.zone=ct(xi),this.applicationRef=ct(Mu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function yb(){return!1}let aO=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=vb}return s})();function vb(s){return function Eb(s,a,c){if(go(s)&&!c){const u=_i(s.index,a);return new ur(u,u)}return 47&s.type?new ur(a[Nr],a):null}(ii(),Le(),16==(16&s))}class Db{constructor(){}supports(a){return sm(a)}create(a){return new hO(a)}}const dO=(s,a)=>a;class hO{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||dO}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,u=this._removalsHead,h=0,g=null;for(;c||u;){const v=!u||c&&c.currentIndex<oE(u,h,g)?c:u,w=oE(v,h,g),C=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{g||(g=[]);const R=w-h,P=C-h;if(R!=P){for(let ne=0;ne<R;ne++){const ie=ne<g.length?g[ne]:g[ne]=0,Se=ie+ne;P<=Se&&Se<R&&(g[ne]=ie+1)}g[v.previousIndex]=P-R}}w!==C&&a(v,w,C)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!sm(a))throw new ce(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,g,v,c=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],v=this._trackByFn(w,g),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,g,v,w)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,v,w),u=!0),c=c._next}else h=0,function iS(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let u;for(;!(u=c.next()).done;)a(u.value)}}(a,w=>{v=this._trackByFn(h,w),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,w,v,h)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,v,h),u=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,u,h){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,h)):a=this._addAfter(new Sb(c,u),g,h),a}_verifyReinsertion(a,c,u,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,g=a._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(a,c,u),this._addToMoves(a,u),a}_moveAfter(a,c,u){return this._unlink(a),this._insertAfter(a,c,u),this._addToMoves(a,u),a}_addAfter(a,c,u){return this._insertAfter(a,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,u){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new sE),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,u=a._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Sb{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fO{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const c=a._prevDup,u=a._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class sE{constructor(){this.map=new Map}put(a){const c=a.trackById;let u=this.map.get(c);u||(u=new fO,this.map.set(c,u)),u.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oE(s,a,c){const u=s.previousIndex;if(null===u)return u;let h=0;return c&&u<c.length&&(h=c[u]),u+a+h}class aE{constructor(){}supports(a){return a instanceof Map||rv(a)}create(){return new pO}}class pO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||rv(a)))throw new ce(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(h,u);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const u=a._prev;return c._next=a,c._prev=u,a._prev=c,u&&(u._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const u=new Qm(a);return this._records.set(a,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(u=>c(a[u],u))}}class Qm{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PR(){return new Xm([new Db])}let Xm=(()=>{class s{static#e=this.\u0275prov=_t({token:s,providedIn:"root",factory:PR});constructor(c){this.factories=c}static create(c,u){if(null!=u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||PR()),deps:[[s,new at,new _e]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(null!=u)return u;throw new ce(901,!1)}}return s})();function uh(){return new lE([new aE])}let lE=(()=>{class s{static#e=this.\u0275prov=_t({token:s,providedIn:"root",factory:uh});constructor(c){this.factories=c}static create(c,u){if(u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||uh()),deps:[[s,new at,new _e]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(u)return u;throw new ce(901,!1)}}return s})();const _O=fb(null,"core",[]);let uE=(()=>{class s{constructor(c){}static#e=this.\u0275fac=function(u){return new(u||s)(Xe(Mu))};static#t=this.\u0275mod=Ku({type:s});static#n=this.\u0275inj=zn({})}return s})();function VR(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function wr(s){const a=rn(s);if(!a)return null;const c=new kf(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(mt,Ae,U)=>{U.d(Ae,{Z:()=>tt});var p=U(9058),W=U(4537),N=U(7592),re=U(7879);class ue{constructor(et,Ne){this._delegate=et,this.firebase=Ne,(0,N._addComponent)(et,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(et,Ne=N._DEFAULT_ENTRY_NAME){var vt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(et);return!pt.isInitialized()&&"EXPLICIT"===(null===(vt=pt.getComponent())||void 0===vt?void 0:vt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Ne})}_removeServiceInstance(et,Ne=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(Ne)}_addComponent(et){(0,N._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,N._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function Ee(){const Fe=function Me(Fe){const et={},Ne={__esModule:!0,initializeApp:function ce(Be,Y={}){const Pe=N.initializeApp(Be,Y);if((0,p.r3)(et,Pe.name))return et[Pe.name];const Ze=new Fe(Pe,Ne);return et[Pe.name]=Ze,Ze},app:pt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function me(Be){const Y=Be.name,Pe=Y.replace("-compat","");if(N._registerComponent(Be)&&"PUBLIC"===Be.type){const Ze=(bt=pt())=>{if("function"!=typeof bt[Pe])throw Ce.create("invalid-app-argument",{appName:Y});return bt[Pe]()};void 0!==Be.serviceProps&&(0,p.ZB)(Ze,Be.serviceProps),Ne[Pe]=Ze,Fe.prototype[Pe]=function(...bt){return this._getService.bind(this,Y).apply(this,Be.multipleInstances?bt:[])}}return"PUBLIC"===Be.type?Ne[Pe]:null},removeApp:function vt(Be){delete et[Be]},useAsService:function De(Be,Y){return"serverAuth"===Y?null:Y},modularAPIs:N}};function pt(Be){if(!(0,p.r3)(et,Be=Be||N._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Be});return et[Be]}return Ne.default=Ne,Object.defineProperty(Ne,"apps",{get:function Re(){return Object.keys(et).map(Be=>et[Be])}}),pt.App=Fe,Ne}(ue);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function et(Ne){(0,p.ZB)(Fe,Ne)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Fe}(),Q=new re.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=G;!function Oe(Fe){(0,N.registerVersion)("@firebase/app-compat","0.2.13",Fe)}()},7592:(mt,Ae,U)=>{U.r(Ae),U.d(Ae,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>zn,_DEFAULT_ENTRY_NAME:()=>he,_addComponent:()=>xe,_addOrOverwriteComponent:()=>Ge,_apps:()=>we,_clearComponents:()=>xt,_components:()=>pe,_getProvider:()=>Ye,_registerComponent:()=>nt,_removeServiceInstance:()=>pn,deleteApp:()=>Ii,getApp:()=>gn,getApps:()=>Xn,initializeApp:()=>Mn,onLog:()=>Zn,registerVersion:()=>Gn,setLogLevel:()=>ei});var p=U(5861),W=U(4537),N=U(7879),re=U(9058),ue=U(1878);class fe{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Te=>{if(function Ce(Ie){const X=Ie.getComponent();return"VERSION"===X?.type}(Te)){const ze=Te.getImmediate();return`${ze.library}/${ze.version}`}return null}).filter(Te=>Te).join(" ")}}const Me="@firebase/app",G=new N.Yd("@firebase/app"),he="[DEFAULT]",ve={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},we=new Map,pe=new Map;function xe(Ie,X){try{Ie.container.addComponent(X)}catch(Te){G.debug(`Component ${X.name} failed to register with FirebaseApp ${Ie.name}`,Te)}}function Ge(Ie,X){Ie.container.addOrOverwriteComponent(X)}function nt(Ie){const X=Ie.name;if(pe.has(X))return G.debug(`There were multiple attempts to register component ${X}.`),!1;pe.set(X,Ie);for(const Te of we.values())xe(Te,Ie);return!0}function Ye(Ie,X){const Te=Ie.container.getProvider("heartbeat").getImmediate({optional:!0});return Te&&Te.triggerHeartbeat(),Ie.container.getProvider(X)}function pn(Ie,X,Te=he){Ye(Ie,X).clearInstance(Te)}function xt(){pe.clear()}const _t=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class En{constructor(X,Te,ze){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Te),this._name=Te.name,this._automaticDataCollectionEnabled=Te.automaticDataCollectionEnabled,this._container=ze,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw _t.create("app-deleted",{appName:this._name})}}const zn="9.23.0";function Mn(Ie,X={}){let Te=Ie;"object"!=typeof X&&(X={name:X});const ze=Object.assign({name:he,automaticDataCollectionEnabled:!1},X),ft=ze.name;if("string"!=typeof ft||!ft)throw _t.create("bad-app-name",{appName:String(ft)});if(Te||(Te=(0,re.aH)()),!Te)throw _t.create("no-options");const yt=we.get(ft);if(yt){if((0,re.vZ)(Te,yt.options)&&(0,re.vZ)(ze,yt.config))return yt;throw _t.create("duplicate-app",{appName:ft})}const mn=new W.H0(ft);for(const q of pe.values())mn.addComponent(q);const K=new En(Te,ze,mn);return we.set(ft,K),K}function gn(Ie=he){const X=we.get(Ie);if(!X&&Ie===he&&(0,re.aH)())return Mn();if(!X)throw _t.create("no-app",{appName:Ie});return X}function Xn(){return Array.from(we.values())}function Ii(Ie){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(Ie){const X=Ie.name;we.has(X)&&(we.delete(X),yield Promise.all(Ie.container.getProviders().map(Te=>Te.delete())),Ie.isDeleted=!0)})).apply(this,arguments)}function Gn(Ie,X,Te){var ze;let ft=null!==(ze=ve[Ie])&&void 0!==ze?ze:Ie;Te&&(ft+=`-${Te}`);const yt=ft.match(/\s|\//),mn=X.match(/\s|\//);if(yt||mn){const K=[`Unable to register library "${ft}" with version "${X}":`];return yt&&K.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),yt&&mn&&K.push("and"),mn&&K.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void G.warn(K.join(" "))}nt(new W.wA(`${ft}-version`,()=>({library:ft,version:X}),"VERSION"))}function Zn(Ie,X){if(null!==Ie&&"function"!=typeof Ie)throw _t.create("invalid-log-argument");(0,N.Am)(Ie,X)}function ei(Ie){(0,N.Ub)(Ie)}const ms="firebase-heartbeat-database",Dt=1,Mt="firebase-heartbeat-store";let Vt=null;function Jt(){return Vt||(Vt=(0,ue.X3)(ms,Dt,{upgrade:(Ie,X)=>{0===X&&Ie.createObjectStore(Mt)}}).catch(Ie=>{throw _t.create("idb-open",{originalErrorMessage:Ie.message})})),Vt}function Tr(){return(Tr=(0,p.Z)(function*(Ie){try{return yield(yield Jt()).transaction(Mt).objectStore(Mt).get(bi(Ie))}catch(X){if(X instanceof re.ZR)G.warn(X.message);else{const Te=_t.create("idb-get",{originalErrorMessage:X?.message});G.warn(Te.message)}}})).apply(this,arguments)}function Kt(Ie,X){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(Ie,X){try{const ze=(yield Jt()).transaction(Mt,"readwrite");yield ze.objectStore(Mt).put(X,bi(Ie)),yield ze.done}catch(Te){if(Te instanceof re.ZR)G.warn(Te.message);else{const ze=_t.create("idb-set",{originalErrorMessage:Te?.message});G.warn(ze.message)}}})).apply(this,arguments)}function bi(Ie){return`${Ie.name}!${Ie.options.appId}`}class Qt{constructor(X){this.container=X,this._heartbeatsCache=null;const Te=this.container.getProvider("app").getImmediate();this._storage=new Qi(Te),this._heartbeatsCachePromise=this._storage.read().then(ze=>(this._heartbeatsCache=ze,ze))}triggerHeartbeat(){var X=this;return(0,p.Z)(function*(){const ze=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=Fn();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==ft&&!X._heartbeatsCache.heartbeats.some(yt=>yt.date===ft))return X._heartbeatsCache.heartbeats.push({date:ft,agent:ze}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(yt=>{const mn=new Date(yt.date).valueOf();return Date.now()-mn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,p.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Te=Fn(),{heartbeatsToSend:ze,unsentEntries:ft}=function Oi(Ie,X=1024){const Te=[];let ze=Ie.slice();for(const ft of Ie){const yt=Te.find(mn=>mn.agent===ft.agent);if(yt){if(yt.dates.push(ft.date),Cr(Te)>X){yt.dates.pop();break}}else if(Te.push({agent:ft.agent,dates:[ft.date]}),Cr(Te)>X){Te.pop();break}ze=ze.slice(1)}return{heartbeatsToSend:Te,unsentEntries:ze}}(X._heartbeatsCache.heartbeats),yt=(0,re.L)(JSON.stringify({version:2,heartbeats:ze}));return X._heartbeatsCache.lastSentHeartbeatDate=Te,ft.length>0?(X._heartbeatsCache.heartbeats=ft,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),yt})()}}function Fn(){return(new Date).toISOString().substring(0,10)}class Qi{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,p.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function hr(Ie){return Tr.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Te=this;return(0,p.Z)(function*(){var ze;if(yield Te._canUseIndexedDBPromise){const yt=yield Te.read();return Kt(Te.app,{lastSentHeartbeatDate:null!==(ze=X.lastSentHeartbeatDate)&&void 0!==ze?ze:yt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Te=this;return(0,p.Z)(function*(){var ze;if(yield Te._canUseIndexedDBPromise){const yt=yield Te.read();return Kt(Te.app,{lastSentHeartbeatDate:null!==(ze=X.lastSentHeartbeatDate)&&void 0!==ze?ze:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...X.heartbeats]})}})()}}function Cr(Ie){return(0,re.L)(JSON.stringify({version:2,heartbeats:Ie})).length}!function ar(Ie){nt(new W.wA("platform-logger",X=>new fe(X),"PRIVATE")),nt(new W.wA("heartbeat",X=>new Qt(X),"PRIVATE")),Gn(Me,"0.9.13",Ie),Gn(Me,"0.9.13","esm2017"),Gn("fire-js","")}("")},4097:(mt,Ae,U)=>{U.d(Ae,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp});var p=U(7592);(0,p.registerVersion)("firebase","9.23.0","app")},120:(mt,Ae,U)=>{U.d(Ae,{Z:()=>p.Z});var p=U(3399);p.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(mt,Ae,U)=>{U.r(Ae);var p=U(5861),W=U(3399),N=U(6710),re=U(9058),Ce=(U(7592),U(7879),U(4537));function Me(){return window}function Q(){return Q=(0,p.Z)(function*(B,j,L){var oe;const{BuildInfo:ke}=Me();(0,N.as)(j.sessionId,"AuthEvent did not contain a session ID");const Xe=yield function Ne(B){return vt.apply(this,arguments)}(j.sessionId),Ft={};return(0,N.at)()?Ft.ibi=ke.packageName:(0,N.au)()?Ft.apn=ke.packageName:(0,N.av)(B,"operation-not-supported-in-this-environment"),ke.displayName&&(Ft.appDisplayName=ke.displayName),Ft.sessionId=Xe,(0,N.aw)(B,L,j.type,void 0,null!==(oe=j.eventId)&&void 0!==oe?oe:void 0,Ft)}),Q.apply(this,arguments)}function He(){return(He=(0,p.Z)(function*(B){const{BuildInfo:j}=Me(),L={};(0,N.at)()?L.iosBundleId=j.packageName:(0,N.au)()?L.androidPackageName=j.packageName:(0,N.av)(B,"operation-not-supported-in-this-environment"),yield(0,N.ax)(B,L)})).apply(this,arguments)}function Fe(){return(Fe=(0,p.Z)(function*(B,j,L){const{cordova:oe}=Me();let ke=()=>{};try{yield new Promise((Xe,Ft)=>{let ct=null;function wn(){var Zt;Xe();const Ni=null===(Zt=oe.plugins.browsertab)||void 0===Zt?void 0:Zt.close;"function"==typeof Ni&&Ni(),"function"==typeof L?.close&&L.close()}function jt(){ct||(ct=window.setTimeout(()=>{Ft((0,N.az)(B,"redirect-cancelled-by-user"))},2e3))}function kn(){"visible"===document?.visibilityState&&jt()}j.addPassiveListener(wn),document.addEventListener("resume",jt,!1),(0,N.au)()&&document.addEventListener("visibilitychange",kn,!1),ke=()=>{j.removePassiveListener(wn),document.removeEventListener("resume",jt,!1),document.removeEventListener("visibilitychange",kn,!1),ct&&window.clearTimeout(ct)}})}finally{ke()}})).apply(this,arguments)}function vt(){return(vt=(0,p.Z)(function*(B){const j=function pt(B){if((0,N.as)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const j=new ArrayBuffer(B.length),L=new Uint8Array(j);for(let oe=0;oe<B.length;oe++)L[oe]=B.charCodeAt(oe);return L}(B),L=yield crypto.subtle.digest("SHA-256",j);return Array.from(new Uint8Array(L)).map(ke=>ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Re extends N.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(j)),super.onEvent(j)}initialized(){var j=this;return(0,p.Z)(function*(){yield j.initPromise})()}}function Be(B){return Y.apply(this,arguments)}function Y(){return(Y=(0,p.Z)(function*(B){const j=yield bt()._get(hn(B));return j&&(yield bt()._remove(hn(B))),j})).apply(this,arguments)}function Ze(){const B=[];for(let L=0;L<20;L++){const oe=Math.floor(62*Math.random());B.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(oe))}return B.join("")}function bt(){return(0,N.aC)(N.b)}function hn(B){return(0,N.aD)("authEvent",B.config.apiKey,B.name)}function Ln(B){if(!B?.includes("?"))return{};const[j,...L]=B.split("?");return(0,re.zd)(L.join("?"))}const he=class $r{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(j){var L=this;return(0,p.Z)(function*(){const oe=j._key();let ke=L.eventManagers.get(oe);return ke||(ke=new Re(j),L.eventManagers.set(oe,ke),L.attachCallbackListeners(j,ke)),ke})()}_openPopup(j){(0,N.av)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,L,oe,ke){var Xe=this;return(0,p.Z)(function*(){!function et(B){var j,L,oe,ke,Xe,Ft,ct,wn,jt,kn;const Zt=Me();(0,N.aA)("function"==typeof(null===(j=Zt?.universalLinks)||void 0===j?void 0:j.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aA)(typeof(null===(L=Zt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aA)("function"==typeof(null===(Xe=null===(ke=null===(oe=Zt?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===Xe?void 0:Xe.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(wn=null===(ct=null===(Ft=Zt?.cordova)||void 0===Ft?void 0:Ft.plugins)||void 0===ct?void 0:ct.browsertab)||void 0===wn?void 0:wn.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(kn=null===(jt=Zt?.cordova)||void 0===jt?void 0:jt.InAppBrowser)||void 0===kn?void 0:kn.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const Ft=yield Xe._initialize(j);yield Ft.initialized(),Ft.resetRedirect(),(0,N.aG)(),yield Xe._originValidation(j);const ct=function me(B,j,L=null){return{type:j,eventId:L,urlResponse:null,sessionId:Ze(),postBody:null,tenantId:B.tenantId,error:(0,N.az)(B,"no-auth-event")}}(j,oe,ke);yield function De(B,j){return bt()._set(hn(B),j)}(j,ct);const wn=yield function G(B,j,L){return Q.apply(this,arguments)}(j,ct,L),jt=yield function Oe(B){const{cordova:j}=Me();return new Promise(L=>{j.plugins.browsertab.isAvailable(oe=>{let ke=null;oe?j.plugins.browsertab.openUrl(B):ke=j.InAppBrowser.open(B,(0,N.ay)()?"_blank":"_system","location=yes"),L(ke)})})}(wn);return function tt(B,j,L){return Fe.apply(this,arguments)}(j,Ft,jt)})()}_isIframeWebStorageSupported(j,L){throw new Error("Method not implemented.")}_originValidation(j){const L=j._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function le(B){return He.apply(this,arguments)}(j)),this.originValidationPromises[L]}attachCallbackListeners(j,L){const{universalLinks:oe,handleOpenURL:ke,BuildInfo:Xe}=Me(),Ft=setTimeout((0,p.Z)(function*(){yield Be(j),L.onEvent(ve())}),500),ct=function(){var kn=(0,p.Z)(function*(Zt){clearTimeout(Ft);const Ni=yield Be(j);let Qo=null;Ni&&Zt?.url&&(Qo=function Pe(B,j){var L,oe;const ke=function Nn(B){const j=Ln(B),L=j.link?decodeURIComponent(j.link):void 0,oe=Ln(L).link,ke=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return Ln(ke).link||ke||oe||L||B}(j);if(ke.includes("/__/auth/callback")){const Xe=Ln(ke),Ft=Xe.firebaseError?function On(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(Xe.firebaseError)):null,ct=null===(oe=null===(L=Ft?.code)||void 0===L?void 0:L.split("auth/"))||void 0===oe?void 0:oe[1],wn=ct?(0,N.az)(ct):null;return wn?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:wn,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:ke,postBody:null}}return null}(Ni,Zt.url)),L.onEvent(Qo||ve())});return function(Ni){return kn.apply(this,arguments)}}();typeof oe<"u"&&"function"==typeof oe.subscribe&&oe.subscribe(null,ct);const wn=ke,jt=`${Xe.packageName.toLowerCase()}://`;Me().handleOpenURL=function(){var kn=(0,p.Z)(function*(Zt){if(Zt.toLowerCase().startsWith(jt)&&ct({url:Zt}),"function"==typeof wn)try{wn(Zt)}catch(Ni){console.error(Ni)}});return function(Zt){return kn.apply(this,arguments)}}()}};function ve(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.az)("no-auth-event")}}function nt(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function pn(B=(0,re.z$)()){return!("file:"!==nt()&&"ionic:"!==nt()&&"capacitor:"!==nt()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function zn(){try{const B=self.localStorage,j=N.aL();if(B)return B.setItem(j,"1"),B.removeItem(j),!function En(B=(0,re.z$)()){return function nn(){return(0,re.w1)()&&11===document?.documentMode}()||function _t(B=(0,re.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,re.hl)()}catch{return Mn()&&(0,re.hl)()}return!1}function Mn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gn(){return(function Ye(){return"http:"===nt()||"https:"===nt()}()||(0,re.ru)()||pn())&&!function xt(){return(0,re.b$)()||(0,re.UG)()}()&&zn()&&!Mn()}function Xn(){return pn()&&typeof document<"u"}function br(){return(br=(0,p.Z)(function*(){return!!Xn()&&new Promise(B=>{const j=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(j),B(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},ei=N.aA,ms="persistence";function Mt(B){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,p.Z)(function*(B){yield B._initializationPromise;const j=hr(),L=N.aD(ms,B.config.apiKey,B.name);j&&j.setItem(L,B._getPersistence())})).apply(this,arguments)}function hr(){var B;try{return(null===(B=function Gn(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const Tr=N.aA;class Kt{constructor(){this.browserResolver=N.aC(N.k),this.cordovaResolver=N.aC(he),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(j){var L=this;return(0,p.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,L,oe,ke){var Xe=this;return(0,p.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openPopup(j,L,oe,ke)})()}_openRedirect(j,L,oe,ke){var Xe=this;return(0,p.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openRedirect(j,L,oe,ke)})()}_isIframeWebStorageSupported(j,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,L)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return Xn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,p.Z)(function*(){if(j.underlyingResolver)return;const L=yield function Ii(){return br.apply(this,arguments)}();j.underlyingResolver=L?j.cordovaResolver:j.browserResolver})()}}function Bn(B){return B.unwrap()}function ln(B){return Qt(B)}function Qt(B){const{_tokenResponse:j}=B instanceof re.ZR?B.customData:B;if(!j)return null;if(!(B instanceof re.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return N.P.credentialFromResult(B);const L=j.providerId;if(!L||L===N.p.PASSWORD)return null;let oe;switch(L){case N.p.GOOGLE:oe=N.V;break;case N.p.FACEBOOK:oe=N.U;break;case N.p.GITHUB:oe=N.W;break;case N.p.TWITTER:oe=N.Z;break;default:const{oauthIdToken:ke,oauthAccessToken:Xe,oauthTokenSecret:Ft,pendingToken:ct,nonce:wn}=j;return Xe||Ft||ke||ct?ct?L.startsWith("saml.")?N.aO._create(L,ct):N.L._fromParams({providerId:L,signInMethod:L,pendingToken:ct,idToken:ke,accessToken:Xe}):new N.X(L).credential({idToken:ke,accessToken:Xe,rawNonce:wn}):null}return B instanceof re.ZR?oe.credentialFromError(B):oe.credentialFromResult(B)}function Fn(B,j){return j.catch(L=>{throw L instanceof re.ZR&&function di(B,j){var L;const oe=null===(L=j.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===j?.code)j.resolver=new Cr(B,N.aq(B,j));else if(oe){const ke=Qt(j),Xe=j;ke&&(Xe.credential=ke,Xe.tenantId=oe.tenantId||void 0,Xe.email=oe.email||void 0,Xe.phoneNumber=oe.phoneNumber||void 0)}}(B,L),L}).then(L=>{const ke=L.user;return{operationType:L.operationType,credential:ln(L),additionalUserInfo:N.ao(L),user:ar.getOrCreate(ke)}})}function Oi(B,j){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(B,j){const L=yield j;return{verificationId:L.verificationId,confirm:oe=>Fn(B,L.confirm(oe))}})).apply(this,arguments)}class Cr{constructor(j,L){this.resolver=L,this.auth=function bi(B){return B.wrapped()}(j)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return Fn(Bn(this.auth),this.resolver.resolveSignIn(j))}}class ar{constructor(j){this._delegate=j,this.multiFactor=N.ar(j)}static getOrCreate(j){return ar.USER_MAP.has(j)||ar.USER_MAP.set(j,new ar(j)),ar.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var L=this;return(0,p.Z)(function*(){return Fn(L.auth,N.a0(L._delegate,j))})()}linkWithPhoneNumber(j,L){var oe=this;return(0,p.Z)(function*(){return Oi(oe.auth,N.l(oe._delegate,j,L))})()}linkWithPopup(j){var L=this;return(0,p.Z)(function*(){return Fn(L.auth,N.d(L._delegate,j,Kt))})()}linkWithRedirect(j){var L=this;return(0,p.Z)(function*(){return yield Mt(N.aH(L.auth)),N.g(L._delegate,j,Kt)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var L=this;return(0,p.Z)(function*(){return Fn(L.auth,N.a1(L._delegate,j))})()}reauthenticateWithPhoneNumber(j,L){return Oi(this.auth,N.r(this._delegate,j,L))}reauthenticateWithPopup(j){return Fn(this.auth,N.e(this._delegate,j,Kt))}reauthenticateWithRedirect(j){var L=this;return(0,p.Z)(function*(){return yield Mt(N.aH(L.auth)),N.h(L._delegate,j,Kt)})()}sendEmailVerification(j){return N.ae(this._delegate,j)}unlink(j){var L=this;return(0,p.Z)(function*(){return yield N.an(L._delegate,j),L})()}updateEmail(j){return N.aj(this._delegate,j)}updatePassword(j){return N.ak(this._delegate,j)}updatePhoneNumber(j){return N.u(this._delegate,j)}updateProfile(j){return N.ai(this._delegate,j)}verifyBeforeUpdateEmail(j,L){return N.af(this._delegate,j,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ar.USER_MAP=new WeakMap;const Ie=N.aA;let X=(()=>{class B{constructor(L,oe){if(this.app=L,oe.isInitialized())return this._delegate=oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ke}=L.options;Ie(ke,"invalid-api-key",{appName:L.name}),Ie(ke,"invalid-api-key",{appName:L.name});const Xe=typeof window<"u"?Kt:void 0;this._delegate=oe.initialize({options:{persistence:ze(ke,L.name),popupRedirectResolver:Xe}}),this._delegate._updateErrorMap(N.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ar.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,oe){N.I(this._delegate,L,oe)}applyActionCode(L){return N.a5(this._delegate,L)}checkActionCode(L){return N.a6(this._delegate,L)}confirmPasswordReset(L,oe){return N.a4(this._delegate,L,oe)}createUserWithEmailAndPassword(L,oe){var ke=this;return(0,p.Z)(function*(){return Fn(ke._delegate,N.a8(ke._delegate,L,oe))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return N.ad(this._delegate,L)}isSignInWithEmailLink(L){return N.ab(this._delegate,L)}getRedirectResult(){var L=this;return(0,p.Z)(function*(){Ie(gn(),L._delegate,"operation-not-supported-in-this-environment");const oe=yield N.j(L._delegate,Kt);return oe?Fn(L._delegate,Promise.resolve(oe)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function we(B,j){(0,N.aH)(B)._logFramework(j)}(this._delegate,L)}onAuthStateChanged(L,oe,ke){const{next:Xe,error:Ft,complete:ct}=Te(L,oe,ke);return this._delegate.onAuthStateChanged(Xe,Ft,ct)}onIdTokenChanged(L,oe,ke){const{next:Xe,error:Ft,complete:ct}=Te(L,oe,ke);return this._delegate.onIdTokenChanged(Xe,Ft,ct)}sendSignInLinkToEmail(L,oe){return N.aa(this._delegate,L,oe)}sendPasswordResetEmail(L,oe){return N.a3(this._delegate,L,oe||void 0)}setPersistence(L){var oe=this;return(0,p.Z)(function*(){let ke;switch(function Dt(B,j){ei(Object.values(Zn).includes(j),B,"invalid-persistence-type"),(0,re.b$)()?ei(j!==Zn.SESSION,B,"unsupported-persistence-type"):(0,re.UG)()?ei(j===Zn.NONE,B,"unsupported-persistence-type"):Mn()?ei(j===Zn.NONE||j===Zn.LOCAL&&(0,re.hl)(),B,"unsupported-persistence-type"):ei(j===Zn.NONE||zn(),B,"unsupported-persistence-type")}(oe._delegate,L),L){case Zn.SESSION:ke=N.a;break;case Zn.LOCAL:ke=(yield N.aC(N.i)._isAvailable())?N.i:N.b;break;case Zn.NONE:ke=N.N;break;default:return N.av("argument-error",{appName:oe._delegate.name})}return oe._delegate.setPersistence(ke)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Fn(this._delegate,N._(this._delegate))}signInWithCredential(L){return Fn(this._delegate,N.$(this._delegate,L))}signInWithCustomToken(L){return Fn(this._delegate,N.a2(this._delegate,L))}signInWithEmailAndPassword(L,oe){return Fn(this._delegate,N.a9(this._delegate,L,oe))}signInWithEmailLink(L,oe){return Fn(this._delegate,N.ac(this._delegate,L,oe))}signInWithPhoneNumber(L,oe){return Oi(this._delegate,N.s(this._delegate,L,oe))}signInWithPopup(L){var oe=this;return(0,p.Z)(function*(){return Ie(gn(),oe._delegate,"operation-not-supported-in-this-environment"),Fn(oe._delegate,N.c(oe._delegate,L,Kt))})()}signInWithRedirect(L){var oe=this;return(0,p.Z)(function*(){return Ie(gn(),oe._delegate,"operation-not-supported-in-this-environment"),yield Mt(oe._delegate),N.f(oe._delegate,L,Kt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return N.a7(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=Zn,B})();function Te(B,j,L){let oe=B;"function"!=typeof B&&({next:oe,error:j,complete:L}=B);const ke=oe;return{next:Ft=>ke(Ft&&ar.getOrCreate(Ft)),error:j,complete:L}}function ze(B,j){const L=function Jt(B,j){const L=hr();if(!L)return[];const oe=N.aD(ms,B,j);switch(L.getItem(oe)){case Zn.NONE:return[N.N];case Zn.LOCAL:return[N.i,N.a];case Zn.SESSION:return[N.a];default:return[]}}(B,j);if(typeof self<"u"&&!L.includes(N.i)&&L.push(N.i),typeof window<"u")for(const oe of[N.b,N.a])L.includes(oe)||L.push(oe);return L.includes(N.N)||L.push(N.N),L}class ft{constructor(){this.providerId="phone",this._delegate=new N.P(Bn(W.Z.auth()))}static credential(j,L){return N.P.credential(j,L)}verifyPhoneNumber(j,L){return this._delegate.verifyPhoneNumber(j,L)}unwrap(){return this._delegate}}ft.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ft.PROVIDER_ID=N.P.PROVIDER_ID;const yt=N.aA;class mn{constructor(j,L,oe=W.Z.app()){var ke;yt(null===(ke=oe.options)||void 0===ke?void 0:ke.apiKey,"invalid-api-key",{appName:oe.name}),this._delegate=new N.R(j,L,oe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function q(B){B.INTERNAL.registerComponent(new Ce.wA("auth-compat",j=>{const L=j.getProvider("app-compat").getImmediate(),oe=j.getProvider("auth");return new X(L,oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.Q,FacebookAuthProvider:N.U,GithubAuthProvider:N.W,GoogleAuthProvider:N.V,OAuthProvider:N.X,SAMLAuthProvider:N.Y,PhoneAuthProvider:ft,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:mn,TwitterAuthProvider:N.Z,Auth:X,AuthCredential:N.J,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.4.2")}(W.Z)},4303:(mt,Ae,U)=>{U.r(Ae),U.d(Ae,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>zn,_DEFAULT_ENTRY_NAME:()=>he,_addComponent:()=>xe,_addOrOverwriteComponent:()=>Ge,_apps:()=>we,_clearComponents:()=>xt,_components:()=>pe,_getProvider:()=>Ye,_registerComponent:()=>nt,_removeServiceInstance:()=>pn,deleteApp:()=>Ii,getApp:()=>gn,getApps:()=>Xn,initializeApp:()=>Mn,onLog:()=>Zn,registerVersion:()=>Gn,setLogLevel:()=>ei});var p=U(5861),W=U(4537),N=U(7879),re=U(9058),ue=U(1878);class fe{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Te=>{if(function Ce(Ie){const X=Ie.getComponent();return"VERSION"===X?.type}(Te)){const ze=Te.getImmediate();return`${ze.library}/${ze.version}`}return null}).filter(Te=>Te).join(" ")}}const Me="@firebase/app",G=new N.Yd("@firebase/app"),he="[DEFAULT]",ve={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},we=new Map,pe=new Map;function xe(Ie,X){try{Ie.container.addComponent(X)}catch(Te){G.debug(`Component ${X.name} failed to register with FirebaseApp ${Ie.name}`,Te)}}function Ge(Ie,X){Ie.container.addOrOverwriteComponent(X)}function nt(Ie){const X=Ie.name;if(pe.has(X))return G.debug(`There were multiple attempts to register component ${X}.`),!1;pe.set(X,Ie);for(const Te of we.values())xe(Te,Ie);return!0}function Ye(Ie,X){const Te=Ie.container.getProvider("heartbeat").getImmediate({optional:!0});return Te&&Te.triggerHeartbeat(),Ie.container.getProvider(X)}function pn(Ie,X,Te=he){Ye(Ie,X).clearInstance(Te)}function xt(){pe.clear()}const _t=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class En{constructor(X,Te,ze){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Te),this._name=Te.name,this._automaticDataCollectionEnabled=Te.automaticDataCollectionEnabled,this._container=ze,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw _t.create("app-deleted",{appName:this._name})}}const zn="10.4.0";function Mn(Ie,X={}){let Te=Ie;"object"!=typeof X&&(X={name:X});const ze=Object.assign({name:he,automaticDataCollectionEnabled:!1},X),ft=ze.name;if("string"!=typeof ft||!ft)throw _t.create("bad-app-name",{appName:String(ft)});if(Te||(Te=(0,re.aH)()),!Te)throw _t.create("no-options");const yt=we.get(ft);if(yt){if((0,re.vZ)(Te,yt.options)&&(0,re.vZ)(ze,yt.config))return yt;throw _t.create("duplicate-app",{appName:ft})}const mn=new W.H0(ft);for(const q of pe.values())mn.addComponent(q);const K=new En(Te,ze,mn);return we.set(ft,K),K}function gn(Ie=he){const X=we.get(Ie);if(!X&&Ie===he&&(0,re.aH)())return Mn();if(!X)throw _t.create("no-app",{appName:Ie});return X}function Xn(){return Array.from(we.values())}function Ii(Ie){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(Ie){const X=Ie.name;we.has(X)&&(we.delete(X),yield Promise.all(Ie.container.getProviders().map(Te=>Te.delete())),Ie.isDeleted=!0)})).apply(this,arguments)}function Gn(Ie,X,Te){var ze;let ft=null!==(ze=ve[Ie])&&void 0!==ze?ze:Ie;Te&&(ft+=`-${Te}`);const yt=ft.match(/\s|\//),mn=X.match(/\s|\//);if(yt||mn){const K=[`Unable to register library "${ft}" with version "${X}":`];return yt&&K.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),yt&&mn&&K.push("and"),mn&&K.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void G.warn(K.join(" "))}nt(new W.wA(`${ft}-version`,()=>({library:ft,version:X}),"VERSION"))}function Zn(Ie,X){if(null!==Ie&&"function"!=typeof Ie)throw _t.create("invalid-log-argument");(0,N.Am)(Ie,X)}function ei(Ie){(0,N.Ub)(Ie)}const ms="firebase-heartbeat-database",Dt=1,Mt="firebase-heartbeat-store";let Vt=null;function Jt(){return Vt||(Vt=(0,ue.X3)(ms,Dt,{upgrade:(Ie,X)=>{0===X&&Ie.createObjectStore(Mt)}}).catch(Ie=>{throw _t.create("idb-open",{originalErrorMessage:Ie.message})})),Vt}function Tr(){return(Tr=(0,p.Z)(function*(Ie){try{return yield(yield Jt()).transaction(Mt).objectStore(Mt).get(bi(Ie))}catch(X){if(X instanceof re.ZR)G.warn(X.message);else{const Te=_t.create("idb-get",{originalErrorMessage:X?.message});G.warn(Te.message)}}})).apply(this,arguments)}function Kt(Ie,X){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(Ie,X){try{const ze=(yield Jt()).transaction(Mt,"readwrite");yield ze.objectStore(Mt).put(X,bi(Ie)),yield ze.done}catch(Te){if(Te instanceof re.ZR)G.warn(Te.message);else{const ze=_t.create("idb-set",{originalErrorMessage:Te?.message});G.warn(ze.message)}}})).apply(this,arguments)}function bi(Ie){return`${Ie.name}!${Ie.options.appId}`}class Qt{constructor(X){this.container=X,this._heartbeatsCache=null;const Te=this.container.getProvider("app").getImmediate();this._storage=new Qi(Te),this._heartbeatsCachePromise=this._storage.read().then(ze=>(this._heartbeatsCache=ze,ze))}triggerHeartbeat(){var X=this;return(0,p.Z)(function*(){const ze=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=Fn();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==ft&&!X._heartbeatsCache.heartbeats.some(yt=>yt.date===ft))return X._heartbeatsCache.heartbeats.push({date:ft,agent:ze}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(yt=>{const mn=new Date(yt.date).valueOf();return Date.now()-mn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,p.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Te=Fn(),{heartbeatsToSend:ze,unsentEntries:ft}=function Oi(Ie,X=1024){const Te=[];let ze=Ie.slice();for(const ft of Ie){const yt=Te.find(mn=>mn.agent===ft.agent);if(yt){if(yt.dates.push(ft.date),Cr(Te)>X){yt.dates.pop();break}}else if(Te.push({agent:ft.agent,dates:[ft.date]}),Cr(Te)>X){Te.pop();break}ze=ze.slice(1)}return{heartbeatsToSend:Te,unsentEntries:ze}}(X._heartbeatsCache.heartbeats),yt=(0,re.L)(JSON.stringify({version:2,heartbeats:ze}));return X._heartbeatsCache.lastSentHeartbeatDate=Te,ft.length>0?(X._heartbeatsCache.heartbeats=ft,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),yt})()}}function Fn(){return(new Date).toISOString().substring(0,10)}class Qi{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,p.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function hr(Ie){return Tr.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Te=this;return(0,p.Z)(function*(){var ze;if(yield Te._canUseIndexedDBPromise){const yt=yield Te.read();return Kt(Te.app,{lastSentHeartbeatDate:null!==(ze=X.lastSentHeartbeatDate)&&void 0!==ze?ze:yt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Te=this;return(0,p.Z)(function*(){var ze;if(yield Te._canUseIndexedDBPromise){const yt=yield Te.read();return Kt(Te.app,{lastSentHeartbeatDate:null!==(ze=X.lastSentHeartbeatDate)&&void 0!==ze?ze:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...X.heartbeats]})}})()}}function Cr(Ie){return(0,re.L)(JSON.stringify({version:2,heartbeats:Ie})).length}!function ar(Ie){nt(new W.wA("platform-logger",X=>new fe(X),"PRIVATE")),nt(new W.wA("heartbeat",X=>new Qt(X),"PRIVATE")),Gn(Me,"0.9.19",Ie),Gn(Me,"0.9.19","esm2017"),Gn("fire-js","")}("")},4537:(mt,Ae,U)=>{U.d(Ae,{H0:()=>Me,wA:()=>N,zt:()=>ue});var p=U(5861),W=U(9058);class N{constructor(G,Q,le){this.name=G,this.instanceFactory=Q,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const re="[DEFAULT]";class ue{constructor(G,Q){this.name=G,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const Q=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(Q)){const le=new W.BH;if(this.instancesDeferred.set(Q,le),this.isInitialized(Q)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:Q});He&&le.resolve(He)}catch{}}return this.instancesDeferred.get(Q).promise}getImmediate(G){var Q;const le=this.normalizeInstanceIdentifier(G?.identifier),He=null!==(Q=G?.optional)&&void 0!==Q&&Q;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(Oe){if(He)return null;throw Oe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function Ce(Ee){return"EAGER"===Ee.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[Q,le]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(Q);try{const Oe=this.getOrInitializeService({instanceIdentifier:He});le.resolve(Oe)}catch{}}}}clearInstance(G=re){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,p.Z)(function*(){const Q=Array.from(G.instances.values());yield Promise.all([...Q.filter(le=>"INTERNAL"in le).map(le=>le.INTERNAL.delete()),...Q.filter(le=>"_delete"in le).map(le=>le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=re){return this.instances.has(G)}getOptions(G=re){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:Q={}}=G,le=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(le))throw Error(`${this.name}(${le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:le,options:Q});for(const[Oe,tt]of this.instancesDeferred.entries())le===this.normalizeInstanceIdentifier(Oe)&&tt.resolve(He);return He}onInit(G,Q){var le;const He=this.normalizeInstanceIdentifier(Q),Oe=null!==(le=this.onInitCallbacks.get(He))&&void 0!==le?le:new Set;Oe.add(G),this.onInitCallbacks.set(He,Oe);const tt=this.instances.get(He);return tt&&G(tt,He),()=>{Oe.delete(G)}}invokeOnInitCallbacks(G,Q){const le=this.onInitCallbacks.get(Q);if(le)for(const He of le)try{He(G,Q)}catch{}}getOrInitializeService({instanceIdentifier:G,options:Q={}}){let le=this.instances.get(G);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=G,Ee===re?void 0:Ee),options:Q}),this.instances.set(G,le),this.instancesOptions.set(G,Q),this.invokeOnInitCallbacks(le,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,le)}catch{}var Ee;return le||null}normalizeInstanceIdentifier(G=re){return this.component?this.component.multipleInstances?G:re:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const Q=this.getProvider(G.name);if(Q.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);Q.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const Q=new ue(G,this);return this.providers.set(G,Q),Q}getProviders(){return Array.from(this.providers.values())}}},7879:(mt,Ae,U)=>{U.d(Ae,{Am:()=>Ee,Ub:()=>Me,Yd:()=>Ce,in:()=>W});const p=[];var W=function(G){return G[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",G}(W||{});const N={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},re=W.INFO,ue={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},fe=(G,Q,...le)=>{if(Q<G.logLevel)return;const He=(new Date).toISOString(),Oe=ue[Q];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[Oe](`[${He}]  ${G.name}:`,...le)};class Ce{constructor(Q){this.name=Q,this._logLevel=re,this._logHandler=fe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in W))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?N[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...Q),this._logHandler(this,W.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...Q),this._logHandler(this,W.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,W.INFO,...Q),this._logHandler(this,W.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,W.WARN,...Q),this._logHandler(this,W.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...Q),this._logHandler(this,W.ERROR,...Q)}}function Me(G){p.forEach(Q=>{Q.setLogLevel(G)})}function Ee(G,Q){for(const le of p){let He=null;Q&&Q.level&&(He=N[Q.level]),le.userLogHandler=null===G?null:(Oe,tt,...Fe)=>{const et=Fe.map(Ne=>{if(null==Ne)return null;if("string"==typeof Ne)return Ne;if("number"==typeof Ne||"boolean"==typeof Ne)return Ne.toString();if(Ne instanceof Error)return Ne.message;try{return JSON.stringify(Ne)}catch{return null}}).filter(Ne=>Ne).join(" ");tt>=(He??Oe.logLevel)&&G({level:W[tt].toLowerCase(),message:et,args:Fe,type:Oe.name})}}}},1878:(mt,Ae,U)=>{U.d(Ae,{X3:()=>pt});var p=U(5861);const W=(Y,Pe)=>Pe.some(Ze=>Y instanceof Ze);let N,re;const Ce=new WeakMap,Me=new WeakMap,Ee=new WeakMap,G=new WeakMap,Q=new WeakMap;let Oe={get(Y,Pe,Ze){if(Y instanceof IDBTransaction){if("done"===Pe)return Me.get(Y);if("objectStoreNames"===Pe)return Y.objectStoreNames||Ee.get(Y);if("store"===Pe)return Ze.objectStoreNames[1]?void 0:Ze.objectStore(Ze.objectStoreNames[0])}return Ne(Y[Pe])},set:(Y,Pe,Ze)=>(Y[Pe]=Ze,!0),has:(Y,Pe)=>Y instanceof IDBTransaction&&("done"===Pe||"store"===Pe)||Pe in Y};function et(Y){return"function"==typeof Y?function Fe(Y){return Y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Y)?function(...Pe){return Y.apply(vt(this),Pe),Ne(Ce.get(this))}:function(...Pe){return Ne(Y.apply(vt(this),Pe))}:function(Pe,...Ze){const bt=Y.call(vt(this),Pe,...Ze);return Ee.set(bt,Pe.sort?Pe.sort():[Pe]),Ne(bt)}}(Y):(Y instanceof IDBTransaction&&function He(Y){if(Me.has(Y))return;const Pe=new Promise((Ze,bt)=>{const hn=()=>{Y.removeEventListener("complete",On),Y.removeEventListener("error",Nn),Y.removeEventListener("abort",Nn)},On=()=>{Ze(),hn()},Nn=()=>{bt(Y.error||new DOMException("AbortError","AbortError")),hn()};Y.addEventListener("complete",On),Y.addEventListener("error",Nn),Y.addEventListener("abort",Nn)});Me.set(Y,Pe)}(Y),W(Y,function ue(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Y,Oe):Y)}function Ne(Y){if(Y instanceof IDBRequest)return function le(Y){const Pe=new Promise((Ze,bt)=>{const hn=()=>{Y.removeEventListener("success",On),Y.removeEventListener("error",Nn)},On=()=>{Ze(Ne(Y.result)),hn()},Nn=()=>{bt(Y.error),hn()};Y.addEventListener("success",On),Y.addEventListener("error",Nn)});return Pe.then(Ze=>{Ze instanceof IDBCursor&&Ce.set(Ze,Y)}).catch(()=>{}),Q.set(Pe,Y),Pe}(Y);if(G.has(Y))return G.get(Y);const Pe=et(Y);return Pe!==Y&&(G.set(Y,Pe),Q.set(Pe,Y)),Pe}const vt=Y=>Q.get(Y);function pt(Y,Pe,{blocked:Ze,upgrade:bt,blocking:hn,terminated:On}={}){const Nn=indexedDB.open(Y,Pe),Ln=Ne(Nn);return bt&&Nn.addEventListener("upgradeneeded",Dn=>{bt(Ne(Nn.result),Dn.oldVersion,Dn.newVersion,Ne(Nn.transaction),Dn)}),Ze&&Nn.addEventListener("blocked",Dn=>Ze(Dn.oldVersion,Dn.newVersion,Dn)),Ln.then(Dn=>{On&&Dn.addEventListener("close",()=>On()),hn&&Dn.addEventListener("versionchange",$r=>hn($r.oldVersion,$r.newVersion,$r))}).catch(()=>{}),Ln}const Re=["get","getKey","getAll","getAllKeys","count"],me=["put","add","delete","clear"],De=new Map;function Be(Y,Pe){if(!(Y instanceof IDBDatabase)||Pe in Y||"string"!=typeof Pe)return;if(De.get(Pe))return De.get(Pe);const Ze=Pe.replace(/FromIndex$/,""),bt=Pe!==Ze,hn=me.includes(Ze);if(!(Ze in(bt?IDBIndex:IDBObjectStore).prototype)||!hn&&!Re.includes(Ze))return;const On=function(){var Nn=(0,p.Z)(function*(Ln,...Dn){const $r=this.transaction(Ln,hn?"readwrite":"readonly");let he=$r.store;return bt&&(he=he.index(Dn.shift())),(yield Promise.all([he[Ze](...Dn),hn&&$r.done]))[0]});return function(Dn){return Nn.apply(this,arguments)}}();return De.set(Pe,On),On}!function tt(Y){Oe=Y(Oe)}(Y=>({...Y,get:(Pe,Ze,bt)=>Be(Pe,Ze)||Y.get(Pe,Ze,bt),has:(Pe,Ze)=>!!Be(Pe,Ze)||Y.has(Pe,Ze)}))},5861:(mt,Ae,U)=>{function p(N,re,ue,fe,Ce,Me,Ee){try{var G=N[Me](Ee),Q=G.value}catch(le){return void ue(le)}G.done?re(Q):Promise.resolve(Q).then(fe,Ce)}function W(N){return function(){var re=this,ue=arguments;return new Promise(function(fe,Ce){var Me=N.apply(re,ue);function Ee(Q){p(Me,fe,Ce,Ee,G,"next",Q)}function G(Q){p(Me,fe,Ce,Ee,G,"throw",Q)}Ee(void 0)})}}U.d(Ae,{Z:()=>W})},7582:(mt,Ae,U)=>{function re(he,ve){var we={};for(var pe in he)Object.prototype.hasOwnProperty.call(he,pe)&&ve.indexOf(pe)<0&&(we[pe]=he[pe]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(pe=Object.getOwnPropertySymbols(he);xe<pe.length;xe++)ve.indexOf(pe[xe])<0&&Object.prototype.propertyIsEnumerable.call(he,pe[xe])&&(we[pe[xe]]=he[pe[xe]])}return we}function le(he,ve,we,pe){return new(we||(we=Promise))(function(Ge,nt){function Ye(nn){try{xt(pe.next(nn))}catch(_t){nt(_t)}}function pn(nn){try{xt(pe.throw(nn))}catch(_t){nt(_t)}}function xt(nn){nn.done?Ge(nn.value):function xe(Ge){return Ge instanceof we?Ge:new we(function(nt){nt(Ge)})}(nn.value).then(Ye,pn)}xt((pe=pe.apply(he,ve||[])).next())})}function ce(he){return this instanceof ce?(this.v=he,this):new ce(he)}function Re(he,ve,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,pe=we.apply(he,ve||[]),Ge=[];return xe={},nt("next"),nt("throw"),nt("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function nt(En){pe[En]&&(xe[En]=function(zn){return new Promise(function(Mn,gn){Ge.push([En,zn,Mn,gn])>1||Ye(En,zn)})})}function Ye(En,zn){try{!function pn(En){En.value instanceof ce?Promise.resolve(En.value.v).then(xt,nn):_t(Ge[0][2],En)}(pe[En](zn))}catch(Mn){_t(Ge[0][3],Mn)}}function xt(En){Ye("next",En)}function nn(En){Ye("throw",En)}function _t(En,zn){En(zn),Ge.shift(),Ge.length&&Ye(Ge[0][0],Ge[0][1])}}function De(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,ve=he[Symbol.asyncIterator];return ve?ve.call(he):(he=function Fe(he){var ve="function"==typeof Symbol&&Symbol.iterator,we=ve&&he[ve],pe=0;if(we)return we.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&pe>=he.length&&(he=void 0),{value:he&&he[pe++],done:!he}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),we={},pe("next"),pe("throw"),pe("return"),we[Symbol.asyncIterator]=function(){return this},we);function pe(Ge){we[Ge]=he[Ge]&&function(nt){return new Promise(function(Ye,pn){!function xe(Ge,nt,Ye,pn){Promise.resolve(pn).then(function(xt){Ge({value:xt,done:Ye})},nt)}(Ye,pn,(nt=he[Ge](nt)).done,nt.value)})}}}U.d(Ae,{FC:()=>Re,KL:()=>De,_T:()=>re,mG:()=>le,qq:()=>ce}),"function"==typeof SuppressedError&&SuppressedError}},mt=>{mt(mt.s=2614)}]);