"use strict";(self.webpackChunkangular_firebase_app=self.webpackChunkangular_firebase_app||[]).push([[179],{6304:(pt,Ae,F)=>{F.d(Ae,{Dh:()=>Re,GT:()=>ve,cc:()=>xe,hO:()=>Ve,on:()=>H,pX:()=>ae,xv:()=>me});var m=F(5879),G=F(120),O=F(2793);pt=F.hmd(pt);const ee=["ngOnDestroy"],ae=(ke,_t,ht,oe={})=>new Proxy(ke,{get:(De,de)=>ht.runOutsideAngular(()=>{var Ce;if(ke[de])return!(null===(Ce=oe?.spy)||void 0===Ce)&&Ce.get&&oe.spy.get(de,ke[de]),ke[de];if(ee.indexOf(de)>-1)return()=>{};const Ue=_t.toPromise().then(q=>{const Pe=q&&q[de];return"function"==typeof Pe?Pe.bind(q):Pe&&Pe.then?Pe.then(Ge=>ht.run(()=>Ge)):ht.run(()=>Pe)});return new Proxy(()=>{},{get:(q,Pe)=>Ue[Pe],apply:(q,Pe,Ge)=>Ue.then(It=>{var an;const Sn=It&&It(...Ge);return!(null===(an=oe?.spy)||void 0===an)&&an.apply&&oe.spy.apply(de,Ge,Sn),Sn})})})}),ve=(ke,_t)=>{_t.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(oe=>{Object.defineProperty(ke.prototype,oe,Object.getOwnPropertyDescriptor(ht.prototype||ht,oe))})})};class Ee{constructor(_t){return _t}}const Re=new m.OlP("angularfire2.app.options"),me=new m.OlP("angularfire2.app.name");function H(ke,_t,ht){const De="object"==typeof ht&&ht||{};De.name=De.name||"string"==typeof ht&&ht||"[DEFAULT]";const Ce=G.Z.apps.filter(Ue=>Ue&&Ue.name===De.name)[0]||_t.runOutsideAngular(()=>G.Z.initializeApp(ke,De));try{JSON.stringify(ke)!==JSON.stringify(Ce.options)&&K("error",`${Ce.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(Ce)}const K=(ke,..._t)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ke](..._t)},se={provide:Ee,useFactory:H,deps:[Re,m.R0b,[new m.FiY,me]]};let Ve=(()=>{class ke{constructor(ht){G.Z.registerVersion("angularfire",O.q4.full,"core"),G.Z.registerVersion("angularfire",O.q4.full,"app-compat"),G.Z.registerVersion("angular",m.q4F.full,ht.toString())}static initializeApp(ht,oe){return{ngModule:ke,providers:[{provide:Re,useValue:ht},{provide:me,useValue:oe}]}}}return ke.\u0275fac=function(ht){return new(ht||ke)(m.LFG(m.Lbi))},ke.\u0275mod=m.oAB({type:ke}),ke.\u0275inj=m.cJS({providers:[se]}),ke})();function xe(ke,_t,ht,oe,De){const[,de,Ce]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===ke)||[];if(de)return function Ke(ke,_t){try{return ke.toString()===_t.toString()}catch{return ke===_t}}(De,Ce)||(Ye("error",`${_t} was already initialized on the ${ht} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:De,was:Ce})),de;{const Ue=oe();return globalThis.\u0275AngularfireInstanceCache.push([ke,Ue,De]),Ue}}const Oe=!!pt.hot,Ye=(ke,..._t)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ke](..._t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(pt,Ae,F)=>{F.d(Ae,{q4:()=>Mr,iC:()=>Na,fc:()=>Nc,HU:()=>un,vb:()=>xh,JM:()=>Ac,u3:()=>ro});var m=F(5879),G=F(4097),O=F(5861),ee=F(4303),ae=F(9058),ve=F(4537),Ee=F(7879);const Re=(w,D)=>D.some(R=>w instanceof R);let me,H;const Ve=new WeakMap,xe=new WeakMap,Ke=new WeakMap,Oe=new WeakMap,Ye=new WeakMap;let ht={get(w,D,R){if(w instanceof IDBTransaction){if("done"===D)return xe.get(w);if("objectStoreNames"===D)return w.objectStoreNames||Ke.get(w);if("store"===D)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ce(w[D])},set:(w,D,R)=>(w[D]=R,!0),has:(w,D)=>w instanceof IDBTransaction&&("done"===D||"store"===D)||D in w};function de(w){return"function"==typeof w?function De(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function se(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...D){return w.apply(Ue(this),D),Ce(Ve.get(this))}:function(...D){return Ce(w.apply(Ue(this),D))}:function(D,...R){const B=w.call(Ue(this),D,...R);return Ke.set(B,D.sort?D.sort():[D]),Ce(B)}}(w):(w instanceof IDBTransaction&&function _t(w){if(xe.has(w))return;const D=new Promise((R,B)=>{const Q=()=>{w.removeEventListener("complete",re),w.removeEventListener("error",Ie),w.removeEventListener("abort",Ie)},re=()=>{R(),Q()},Ie=()=>{B(w.error||new DOMException("AbortError","AbortError")),Q()};w.addEventListener("complete",re),w.addEventListener("error",Ie),w.addEventListener("abort",Ie)});xe.set(w,D)}(w),Re(w,function K(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,ht):w)}function Ce(w){if(w instanceof IDBRequest)return function ke(w){const D=new Promise((R,B)=>{const Q=()=>{w.removeEventListener("success",re),w.removeEventListener("error",Ie)},re=()=>{R(Ce(w.result)),Q()},Ie=()=>{B(w.error),Q()};w.addEventListener("success",re),w.addEventListener("error",Ie)});return D.then(R=>{R instanceof IDBCursor&&Ve.set(R,w)}).catch(()=>{}),Ye.set(D,w),D}(w);if(Oe.has(w))return Oe.get(w);const D=de(w);return D!==w&&(Oe.set(w,D),Ye.set(D,w)),D}const Ue=w=>Ye.get(w),Ge=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],an=new Map;function Sn(w,D){if(!(w instanceof IDBDatabase)||D in w||"string"!=typeof D)return;if(an.get(D))return an.get(D);const R=D.replace(/FromIndex$/,""),B=D!==R,Q=It.includes(R);if(!(R in(B?IDBIndex:IDBObjectStore).prototype)||!Q&&!Ge.includes(R))return;const re=function(){var Ie=(0,O.Z)(function*(nt,...Xe){const yt=this.transaction(nt,Q?"readwrite":"readonly");let Ot=yt.store;return B&&(Ot=Ot.index(Xe.shift())),(yield Promise.all([Ot[R](...Xe),Q&&yt.done]))[0]});return function(Xe){return Ie.apply(this,arguments)}}();return an.set(D,re),re}!function oe(w){ht=w(ht)}(w=>({...w,get:(D,R,B)=>Sn(D,R)||w.get(D,R,B),has:(D,R)=>!!Sn(D,R)||w.has(D,R)}));const An="@firebase/installations",Rn="0.6.4",wn=1e4,xr=`w:${Rn}`,ue="FIS_v2",ge="https://firebaseinstallations.googleapis.com/v1",_e=36e5,Ze=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(w){return w instanceof ae.ZR&&w.code.includes("request-failed")}function cn({projectId:w}){return`${ge}/projects/${w}/installations`}function St(w){return{token:w.token,requestStatus:2,expiresIn:Gn(w.expiresIn),creationTime:Date.now()}}function Qt(w,D){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(w,D){const B=(yield D.json()).error;return Ze.create("request-failed",{requestName:w,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function pn({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Cn(w){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(w){const D=yield w();return D.status>=500&&D.status<600?w():D})).apply(this,arguments)}function Gn(w){return Number(w.replace("s","000"))}function Un(){return(Un=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:D},{fid:R}){const B=cn(w),Q=pn(w),re=D.getImmediate({optional:!0});if(re){const yt=yield re.getHeartbeatsHeader();yt&&Q.append("x-firebase-client",yt)}const nt={method:"POST",headers:Q,body:JSON.stringify({fid:R,authVersion:ue,appId:w.appId,sdkVersion:xr})},Xe=yield Cn(()=>fetch(B,nt));if(Xe.ok){const yt=yield Xe.json();return{fid:yt.fid||R,registrationStatus:2,refreshToken:yt.refreshToken,authToken:St(yt.authToken)}}throw yield Qt("Create Installation",Xe)})).apply(this,arguments)}function jn(w){return new Promise(D=>{setTimeout(D,w)})}const ts=/^[cdef][\w-]{21}$/,Tt="";function At(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const R=function Mt(w){return function Vr(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return ts.test(R)?R:Tt}catch{return Tt}}function Kt(w){return`${w.appName}!${w.appId}`}const tr=new Map;function dr(w,D){const R=Kt(w);ci(R,D),function nn(w,D){const R=function Wt(){return!Qr&&"BroadcastChannel"in self&&(Qr=new BroadcastChannel("[Firebase] FID Change"),Qr.onmessage=w=>{ci(w.data.key,w.data.fid)}),Qr}();R&&R.postMessage({key:w,fid:D}),function Nn(){0===tr.size&&Qr&&(Qr.close(),Qr=null)}()}(R,D)}function ci(w,D){const R=tr.get(w);if(R)for(const B of R)B(D)}let Qr=null;const vi="firebase-installations-database",Li=1,hr="firebase-installations-store";let Qn=null;function ye(){return Qn||(Qn=function q(w,D,{blocked:R,upgrade:B,blocking:Q,terminated:re}={}){const Ie=indexedDB.open(w,D),nt=Ce(Ie);return B&&Ie.addEventListener("upgradeneeded",Xe=>{B(Ce(Ie.result),Xe.oldVersion,Xe.newVersion,Ce(Ie.transaction))}),R&&Ie.addEventListener("blocked",()=>R()),nt.then(Xe=>{re&&Xe.addEventListener("close",()=>re()),Q&&Xe.addEventListener("versionchange",()=>Q())}).catch(()=>{}),nt}(vi,Li,{upgrade:(w,D)=>{0===D&&w.createObjectStore(hr)}})),Qn}function Y(w,D){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(w,D){const R=Kt(w),Q=(yield ye()).transaction(hr,"readwrite"),re=Q.objectStore(hr),Ie=yield re.get(R);return yield re.put(D,R),yield Q.done,(!Ie||Ie.fid!==D.fid)&&dr(w,D.fid),D})).apply(this,arguments)}function Be(w){return lt.apply(this,arguments)}function lt(){return(lt=(0,O.Z)(function*(w){const D=Kt(w),B=(yield ye()).transaction(hr,"readwrite");yield B.objectStore(hr).delete(D),yield B.done})).apply(this,arguments)}function mt(w,D){return dn.apply(this,arguments)}function dn(){return(dn=(0,O.Z)(function*(w,D){const R=Kt(w),Q=(yield ye()).transaction(hr,"readwrite"),re=Q.objectStore(hr),Ie=yield re.get(R),nt=D(Ie);return void 0===nt?yield re.delete(R):yield re.put(nt,R),yield Q.done,nt&&(!Ie||Ie.fid!==nt.fid)&&dr(w,nt.fid),nt})).apply(this,arguments)}function W(w){return z.apply(this,arguments)}function z(){return z=(0,O.Z)(function*(w){let D;const R=yield mt(w.appConfig,B=>{const Q=function U(w){return ot(w||{fid:At(),registrationStatus:0})}(B),re=function V(w,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ze.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},B=function M(w,D){return ne.apply(this,arguments)}(w,R);return{installationEntry:R,registrationPromise:B}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ne(w)}:{installationEntry:D}}(w,Q);return D=re.registrationPromise,re.installationEntry});return R.fid===Tt?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}}),z.apply(this,arguments)}function ne(){return ne=(0,O.Z)(function*(w,D){try{const R=yield function lr(w,D){return Un.apply(this,arguments)}(w,D);return Y(w.appConfig,R)}catch(R){throw ze(R)&&409===R.customData.serverCode?yield Be(w.appConfig):yield Y(w.appConfig,{fid:D.fid,registrationStatus:0}),R}}),ne.apply(this,arguments)}function Ne(w){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(w){let D=yield xt(w.appConfig);for(;1===D.registrationStatus;)yield jn(100),D=yield xt(w.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:B}=yield W(w);return B||R}return D})).apply(this,arguments)}function xt(w){return mt(w,D=>{if(!D)throw Ze.create("installation-not-found");return ot(D)})}function ot(w){return function gn(w){return 1===w.registrationStatus&&w.registrationTime+wn<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function bn(){return(bn=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:D},R){const B=function Ht(w,{fid:D}){return`${cn(w)}/${D}/authTokens:generate`}(w,R),Q=function Fn(w,{refreshToken:D}){const R=pn(w);return R.append("Authorization",function ui(w){return`${ue} ${w}`}(D)),R}(w,R),re=D.getImmediate({optional:!0});if(re){const yt=yield re.getHeartbeatsHeader();yt&&Q.append("x-firebase-client",yt)}const nt={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:xr,appId:w.appId}})},Xe=yield Cn(()=>fetch(B,nt));if(Xe.ok)return St(yield Xe.json());throw yield Qt("Generate Auth Token",Xe)})).apply(this,arguments)}function Ii(w){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,O.Z)(function*(w,D=!1){let R;const B=yield mt(w.appConfig,re=>{if(!go(re))throw Ze.create("not-registered");const Ie=re.authToken;if(!D&&function fa(w){return 2===w.requestStatus&&!function Zu(w){const D=Date.now();return D<w.creationTime||w.creationTime+w.expiresIn<D+_e}(w)}(Ie))return re;if(1===Ie.requestStatus)return R=function Ks(w,D){return Ss.apply(this,arguments)}(w,D),re;{if(!navigator.onLine)throw Ze.create("app-offline");const nt=function Yu(w){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:D})}(re);return R=function ns(w,D){return rn.apply(this,arguments)}(w,nt),nt}});return R?yield R:B.authToken}),Vo.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(w,D){let R=yield As(w.appConfig);for(;1===R.authToken.requestStatus;)yield jn(100),R=yield As(w.appConfig);const B=R.authToken;return 0===B.requestStatus?Ii(w,D):B})).apply(this,arguments)}function As(w){return mt(w,D=>{if(!go(D))throw Ze.create("not-registered");return function Zs(w){return 1===w.requestStatus&&w.requestTime+wn<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function rn(){return rn=(0,O.Z)(function*(w,D){try{const R=yield function Lt(w,D){return bn.apply(this,arguments)}(w,D),B=Object.assign(Object.assign({},D),{authToken:R});return yield Y(w.appConfig,B),R}catch(R){if(!ze(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const B=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Y(w.appConfig,B)}else yield Be(w.appConfig);throw R}}),rn.apply(this,arguments)}function go(w){return void 0!==w&&2===w.registrationStatus}function pa(){return(pa=(0,O.Z)(function*(w){const D=w,{installationEntry:R,registrationPromise:B}=yield W(D);return B?B.catch(console.error):Ii(D).catch(console.error),R.fid})).apply(this,arguments)}function ga(){return ga=(0,O.Z)(function*(w,D=!1){const R=w;return yield function Ys(w){return Bo.apply(this,arguments)}(R),(yield Ii(R,D)).token}),ga.apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*(w){const{registrationPromise:D}=yield W(w);D&&(yield D)})).apply(this,arguments)}function ru(w){return Ze.create("missing-app-config-values",{valueName:w})}const Xu="installations",iu=w=>{const D=w.getProvider("app").getImmediate(),R=function Ei(w){if(!w||!w.options)throw ru("App Configuration");if(!w.name)throw ru("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!w.options[R])throw ru(R);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ee._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},El=w=>{const D=w.getProvider("app").getImmediate(),R=(0,ee._getProvider)(D,Xu).getImmediate();return{getId:()=>function tu(w){return pa.apply(this,arguments)}(R),getToken:Q=>function Il(w){return ga.apply(this,arguments)}(R,Q)}};(function rh(){(0,ee._registerComponent)(new ve.wA(Xu,iu,"PUBLIC")),(0,ee._registerComponent)(new ve.wA("installations-internal",El,"PRIVATE"))})(),(0,ee.registerVersion)(An,Rn),(0,ee.registerVersion)(An,Rn,"esm2017");const Ju="@firebase/remote-config",Xr=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ut{constructor(D,R,B,Q){this.client=D,this.storage=R,this.storageCache=B,this.logger=Q}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-R,Q=B<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Q}.`),Q}fetch(D){var R=this;return(0,O.Z)(function*(){const[B,Q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Q&&R.isCachedDataFresh(D.cacheMaxAgeMillis,B))return Q;D.eTag=Q&&Q.eTag;const re=yield R.client.fetch(D),Ie=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Ie.push(R.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Ie),re})()}}function Mn(w=navigator){return w.languages&&w.languages[0]||w.language}class Fi{constructor(D,R,B,Q,re,Ie){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=B,this.projectId=Q,this.apiKey=re,this.appId=Ie}fetch(D){var R=this;return(0,O.Z)(function*(){const[B,Q]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Xe={sdk_version:R.sdkVersion,app_instance_id:B,app_instance_id_token:Q,app_id:R.appId,language_code:Mn()},yt={method:"POST",headers:nt,body:JSON.stringify(Xe)},Ot=fetch(Ie,yt),Nt=new Promise((Gi,Zn)=>{D.signal.addEventListener(()=>{const na=new Error("The operation was aborted.");na.name="AbortError",Zn(na)})});let pi;try{yield Promise.race([Ot,Nt]),pi=yield Ot}catch(Gi){let Zn="fetch-client-network";throw"AbortError"===Gi?.name&&(Zn="fetch-timeout"),Xr.create(Zn,{originalErrorMessage:Gi?.message})}let Sr=pi.status;const Vn=pi.headers.get("ETag")||void 0;let ta,Us;if(200===pi.status){let Gi;try{Gi=yield pi.json()}catch(Zn){throw Xr.create("fetch-client-parse",{originalErrorMessage:Zn?.message})}ta=Gi.entries,Us=Gi.state}if("INSTANCE_STATE_UNSPECIFIED"===Us?Sr=500:"NO_CHANGE"===Us?Sr=304:("NO_TEMPLATE"===Us||"EMPTY_CONFIG"===Us)&&(ta={}),304!==Sr&&200!==Sr)throw Xr.create("fetch-status",{httpStatus:Sr});return{status:Sr,eTag:Vn,config:ta}})()}}class $o{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,O.Z)(function*(){const B=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,B)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:B}){var Q=this;return(0,O.Z)(function*(){yield function Qs(w,D){return new Promise((R,B)=>{const Q=Math.max(D-Date.now(),0),re=setTimeout(R,Q);w.addEventListener(()=>{clearTimeout(re),B(Xr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const re=yield Q.client.fetch(D);return yield Q.storage.deleteThrottleMetadata(),re}catch(re){if(!function li(w){if(!(w instanceof ae.ZR&&w.customData))return!1;const D=Number(w.customData.httpStatus);return 429===D||500===D||503===D||504===D}(re))throw re;const Ie={throttleEndTimeMillis:Date.now()+(0,ae.$s)(B),backoffCount:B+1};return yield Q.storage.setThrottleMetadata(Ie),Q.attemptFetch(D,Ie)}})()}}class _o{constructor(D,R,B,Q,re){this.app=D,this._client=R,this._storageCache=B,this._storage=Q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rt(w,D){const R=w.target.error||void 0;return Xr.create(D,{originalErrorMessage:R&&R?.message})}const ds="app_namespace_store";class Ia{constructor(D,R,B,Q=function Tr(){return new Promise((w,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=B=>{D(Rt(B,"storage-open"))},R.onsuccess=B=>{w(B.target.result)},R.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(ds,{keyPath:"compositeKey"})}}catch(R){D(Xr.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=D,this.appName=R,this.namespace=B,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,O.Z)(function*(){const B=yield R.openDbPromise;return new Promise((Q,re)=>{const nt=B.transaction([ds],"readonly").objectStore(ds),Xe=R.createCompositeKey(D);try{const yt=nt.get(Xe);yt.onerror=Ot=>{re(Rt(Ot,"storage-get"))},yt.onsuccess=Ot=>{const Nt=Ot.target.result;Q(Nt?Nt.value:void 0)}}catch(yt){re(Xr.create("storage-get",{originalErrorMessage:yt?.message}))}})})()}set(D,R){var B=this;return(0,O.Z)(function*(){const Q=yield B.openDbPromise;return new Promise((re,Ie)=>{const Xe=Q.transaction([ds],"readwrite").objectStore(ds),yt=B.createCompositeKey(D);try{const Ot=Xe.put({compositeKey:yt,value:R});Ot.onerror=Nt=>{Ie(Rt(Nt,"storage-set"))},Ot.onsuccess=()=>{re()}}catch(Ot){Ie(Xr.create("storage-set",{originalErrorMessage:Ot?.message}))}})})()}delete(D){var R=this;return(0,O.Z)(function*(){const B=yield R.openDbPromise;return new Promise((Q,re)=>{const nt=B.transaction([ds],"readwrite").objectStore(ds),Xe=R.createCompositeKey(D);try{const yt=nt.delete(Xe);yt.onerror=Ot=>{re(Rt(Ot,"storage-delete"))},yt.onsuccess=()=>{Q()}}catch(yt){re(Xr.create("storage-delete",{originalErrorMessage:yt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Vi{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const R=D.storage.getLastFetchStatus(),B=D.storage.getLastSuccessfulFetchTimestampMillis(),Q=D.storage.getActiveConfig(),re=yield R;re&&(D.lastFetchStatus=re);const Ie=yield B;Ie&&(D.lastSuccessfulFetchTimestampMillis=Ie);const nt=yield Q;nt&&(D.activeConfig=nt)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ho(){return hs.apply(this,arguments)}function hs(){return(hs=(0,O.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function di(){(0,ee._registerComponent)(new ve.wA("remote-config",function w(D,{instanceIdentifier:R}){const B=D.getProvider("app").getImmediate(),Q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xr.create("registration-window");if(!(0,ae.hl)())throw Xr.create("indexed-db-unavailable");const{projectId:re,apiKey:Ie,appId:nt}=B.options;if(!re)throw Xr.create("registration-project-id");if(!Ie)throw Xr.create("registration-api-key");if(!nt)throw Xr.create("registration-app-id");const Xe=new Ia(nt,B.name,R=R||"firebase"),yt=new Vi(Xe),Ot=new Ee.Yd(Ju);Ot.logLevel=Ee.in.ERROR;const Nt=new Fi(Q,ee.SDK_VERSION,R,re,Ie,nt),pi=new $o(Nt,Xe),Sr=new Ut(pi,Xe,yt,Ot),Vn=new _o(B,Sr,yt,Xe,Ot);return function Br(w){const D=(0,ae.m9)(w);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Vn),Vn},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(Ju,"0.4.4"),(0,ee.registerVersion)(Ju,"0.4.4","esm2017")}();const sc=(w,D)=>D.some(R=>w instanceof R);let Bi,Zt;const Ea=new WeakMap,$r=new WeakMap,Jr=new WeakMap,vo=new WeakMap,Go=new WeakMap;let ei={get(w,D,R){if(w instanceof IDBTransaction){if("done"===D)return $r.get(w);if("objectStoreNames"===D)return w.objectStoreNames||Jr.get(w);if("store"===D)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return ji(w[D])},set:(w,D,R)=>(w[D]=R,!0),has:(w,D)=>w instanceof IDBTransaction&&("done"===D||"store"===D)||D in w};function Js(w){return"function"==typeof w?function Rl(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Al(){return Zt||(Zt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...D){return w.apply(Ti(this),D),ji(Ea.get(this))}:function(...D){return ji(w.apply(Ti(this),D))}:function(D,...R){const B=w.call(Ti(this),D,...R);return Jr.set(B,D.sort?D.sort():[D]),ji(B)}}(w):(w instanceof IDBTransaction&&function ih(w){if($r.has(w))return;const D=new Promise((R,B)=>{const Q=()=>{w.removeEventListener("complete",re),w.removeEventListener("error",Ie),w.removeEventListener("abort",Ie)},re=()=>{R(),Q()},Ie=()=>{B(w.error||new DOMException("AbortError","AbortError")),Q()};w.addEventListener("complete",re),w.addEventListener("error",Ie),w.addEventListener("abort",Ie)});$r.set(w,D)}(w),sc(w,function Sl(){return Bi||(Bi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,ei):w)}function ji(w){if(w instanceof IDBRequest)return function Cr(w){const D=new Promise((R,B)=>{const Q=()=>{w.removeEventListener("success",re),w.removeEventListener("error",Ie)},re=()=>{R(ji(w.result)),Q()},Ie=()=>{B(w.error),Q()};w.addEventListener("success",re),w.addEventListener("error",Ie)});return D.then(R=>{R instanceof IDBCursor&&Ea.set(R,w)}).catch(()=>{}),Go.set(D,w),D}(w);if(vo.has(w))return vo.get(w);const D=Js(w);return D!==w&&(vo.set(w,D),Go.set(D,w)),D}const Ti=w=>Go.get(w);function zo(w,D,{blocked:R,upgrade:B,blocking:Q,terminated:re}={}){const Ie=indexedDB.open(w,D),nt=ji(Ie);return B&&Ie.addEventListener("upgradeneeded",Xe=>{B(ji(Ie.result),Xe.oldVersion,Xe.newVersion,ji(Ie.transaction))}),R&&Ie.addEventListener("blocked",()=>R()),nt.then(Xe=>{re&&Xe.addEventListener("close",()=>re()),Q&&Xe.addEventListener("versionchange",()=>Q())}).catch(()=>{}),nt}function su(w,{blocked:D}={}){const R=indexedDB.deleteDatabase(w);return D&&R.addEventListener("blocked",()=>D()),ji(R).then(()=>{})}const sh=["get","getKey","getAll","getAllKeys","count"],wp=["put","add","delete","clear"],Nl=new Map;function oc(w,D){if(!(w instanceof IDBDatabase)||D in w||"string"!=typeof D)return;if(Nl.get(D))return Nl.get(D);const R=D.replace(/FromIndex$/,""),B=D!==R,Q=wp.includes(R);if(!(R in(B?IDBIndex:IDBObjectStore).prototype)||!Q&&!sh.includes(R))return;const re=function(){var Ie=(0,O.Z)(function*(nt,...Xe){const yt=this.transaction(nt,Q?"readwrite":"readonly");let Ot=yt.store;return B&&(Ot=Ot.index(Xe.shift())),(yield Promise.all([Ot[R](...Xe),Q&&yt.done]))[0]});return function(Xe){return Ie.apply(this,arguments)}}();return Nl.set(D,re),re}!function ti(w){ei=w(ei)}(w=>({...w,get:(D,R,B)=>oc(D,R)||w.get(D,R,B),has:(D,R)=>!!oc(D,R)||w.has(D,R)}));const Pl="/firebase-messaging-sw.js",oh="/firebase-cloud-messaging-push-scope",Tp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Cp="https://fcmregistrations.googleapis.com/v1",zn="google.c.a.c_id",bp="google.c.a.c_l",gI="google.c.a.ts";var ac=function(w){return w.PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",w}(ac||{});function fs(w){const D=new Uint8Array(w);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sp(w){const R=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(R),Q=new Uint8Array(B.length);for(let re=0;re<B.length;++re)Q[re]=B.charCodeAt(re);return Q}const wa="fcm_token_details_db",Ta=5,t_="fcm_token_object_Store";function xl(){return xl=(0,O.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(wa))return null;let D=null;return(yield zo(wa,Ta,{upgrade:(B=(0,O.Z)(function*(Q,re,Ie,nt){var Xe;if(re<2||!Q.objectStoreNames.contains(t_))return;const yt=nt.objectStore(t_),Ot=yield yt.index("fcmSenderId").get(w);if(yield yt.clear(),Ot)if(2===re){const Nt=Ot;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;D={token:Nt.fcmToken,createTime:null!==(Xe=Nt.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:fs(Nt.vapidKey)}}}else if(3===re){const Nt=Ot;D={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:fs(Nt.auth),p256dh:fs(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:fs(Nt.vapidKey)}}}else if(4===re){const Nt=Ot;D={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:fs(Nt.auth),p256dh:fs(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:fs(Nt.vapidKey)}}}}),function(re,Ie,nt,Xe){return B.apply(this,arguments)})})).close(),yield su(wa),yield su("fcm_vapid_details_db"),yield su("undefined"),function eo(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:D}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var B}),xl.apply(this,arguments)}const Io="firebase-messaging-database",uc=1,ps="firebase-messaging-store";let fr=null;function ou(){return fr||(fr=zo(Io,uc,{upgrade:(w,D)=>{0===D&&w.createObjectStore(ps)}})),fr}function ni(w){return au.apply(this,arguments)}function au(){return au=(0,O.Z)(function*(w){const D=Ml(w),B=yield(yield ou()).transaction(ps).objectStore(ps).get(D);if(B)return B;{const Q=yield function Ap(w){return xl.apply(this,arguments)}(w.appConfig.senderId);if(Q)return yield uu(w,Q),Q}}),au.apply(this,arguments)}function uu(w,D){return kl.apply(this,arguments)}function kl(){return(kl=(0,O.Z)(function*(w,D){const R=Ml(w),Q=(yield ou()).transaction(ps,"readwrite");return yield Q.objectStore(ps).put(D,R),yield Q.done,D})).apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(w){const D=Ml(w),B=(yield ou()).transaction(ps,"readwrite");yield B.objectStore(ps).delete(D),yield B.done})).apply(this,arguments)}function Ml({appConfig:w}){return w.appId}const pr=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rp(w,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(w,D){const R=yield cc(w),B=lh(D),Q={method:"POST",headers:R,body:JSON.stringify(B)};let re;try{re=yield(yield fetch(Ol(w.appConfig),Q)).json()}catch(Ie){throw pr.create("token-subscribe-failed",{errorInfo:Ie?.toString()})}if(re.error)throw pr.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw pr.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Wo(){return(Wo=(0,O.Z)(function*(w,D){const R=yield cc(w),B=lh(D.subscriptionOptions),Q={method:"PATCH",headers:R,body:JSON.stringify(B)};let re;try{re=yield(yield fetch(`${Ol(w.appConfig)}/${D.token}`,Q)).json()}catch(Ie){throw pr.create("token-update-failed",{errorInfo:Ie?.toString()})}if(re.error)throw pr.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw pr.create("token-update-no-token");return re.token})).apply(this,arguments)}function lu(w,D){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,O.Z)(function*(w,D){const B={method:"DELETE",headers:yield cc(w)};try{const re=yield(yield fetch(`${Ol(w.appConfig)}/${D}`,B)).json();if(re.error)throw pr.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Q){throw pr.create("token-unsubscribe-failed",{errorInfo:Q?.toString()})}})).apply(this,arguments)}function Ol({projectId:w}){return`${Cp}/projects/${w}/registrations`}function cc(w){return ch.apply(this,arguments)}function ch(){return(ch=(0,O.Z)(function*({appConfig:w,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function lh({p256dh:w,auth:D,endpoint:R,vapidKey:B}){const Q={web:{endpoint:R,auth:D,p256dh:w}};return B!==Tp&&(Q.web.applicationPubKey=B),Q}const n_=6048e5;function Pp(){return Pp=(0,O.Z)(function*(w){const D=yield function dc(w,D){return Ll.apply(this,arguments)}(w.swRegistration,w.vapidKey),R={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:D.endpoint,auth:fs(D.getKey("auth")),p256dh:fs(D.getKey("p256dh"))},B=yield ni(w.firebaseDependencies);if(B){if(function gh(w,D){return D.vapidKey===w.vapidKey&&D.endpoint===w.endpoint&&D.auth===w.auth&&D.p256dh===w.p256dh}(B.subscriptionOptions,R))return Date.now()>=B.createTime+n_?function fh(w,D){return lc.apply(this,arguments)}(w,{token:B.token,createTime:Date.now(),subscriptionOptions:R}):B.token;try{yield lu(w.firebaseDependencies,B.token)}catch(Q){console.warn(Q)}return hu(w.firebaseDependencies,R)}return hu(w.firebaseDependencies,R)}),Pp.apply(this,arguments)}function du(){return du=(0,O.Z)(function*(w){const D=yield ni(w.firebaseDependencies);D&&(yield lu(w.firebaseDependencies,D.token),yield function ah(w){return Eo.apply(this,arguments)}(w.firebaseDependencies));const R=yield w.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),du.apply(this,arguments)}function lc(){return lc=(0,O.Z)(function*(w,D){try{const R=yield function Np(w,D){return Wo.apply(this,arguments)}(w.firebaseDependencies,D),B=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield uu(w.firebaseDependencies,B),R}catch(R){throw yield function hh(w){return du.apply(this,arguments)}(w),R}}),lc.apply(this,arguments)}function hu(w,D){return ph.apply(this,arguments)}function ph(){return(ph=(0,O.Z)(function*(w,D){const B={token:yield Rp(w,D),createTime:Date.now(),subscriptionOptions:D};return yield uu(w,B),B.token})).apply(this,arguments)}function Ll(){return(Ll=(0,O.Z)(function*(w,D){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sp(D)})})).apply(this,arguments)}function hc(w){const D={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function fu(w,D){if(!D.notification)return;w.notification={};const R=D.notification.title;R&&(w.notification.title=R);const B=D.notification.body;B&&(w.notification.body=B);const Q=D.notification.image;Q&&(w.notification.image=Q);const re=D.notification.icon;re&&(w.notification.icon=re)}(D,w),function r_(w,D){D.data&&(w.data=D.data)}(D,w),function Fl(w,D){var R,B,Q,re,Ie;if(!(D.fcmOptions||null!==(R=D.notification)&&void 0!==R&&R.click_action))return;w.fcmOptions={};const nt=null!==(Q=null===(B=D.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==Q?Q:null===(re=D.notification)||void 0===re?void 0:re.click_action;nt&&(w.fcmOptions.link=nt);const Xe=null===(Ie=D.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;Xe&&(w.fcmOptions.analyticsLabel=Xe)}(D,w),D}function Ul(w,D){const R=[];for(let B=0;B<w.length;B++)R.push(w.charAt(B)),B<D.length&&R.push(D.charAt(B));return R.join("")}function Vl(w){return pr.create("missing-app-config-values",{valueName:w})}Ul("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ul("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class kp{constructor(D,R,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function i_(w){if(!w||!w.options)throw Vl("App Configuration Object");if(!w.name)throw Vl("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=w;for(const B of D)if(!R[B])throw Vl(B);return{appName:w.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Q,installations:R,analyticsProvider:B}}_delete(){return Promise.resolve()}}function pu(){return(pu=(0,O.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Pl,{scope:oh}),w.swRegistration.update().catch(()=>{})}catch(D){throw pr.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function gs(){return(gs=(0,O.Z)(function*(w,D){if(!D&&!w.swRegistration&&(yield function fc(w){return pu.apply(this,arguments)}(w)),D||!w.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw pr.create("invalid-sw-registration");w.swRegistration=D}})).apply(this,arguments)}function gu(){return(gu=(0,O.Z)(function*(w,D){D?w.vapidKey=D:w.vapidKey||(w.vapidKey=Tp)})).apply(this,arguments)}function mu(){return mu=(0,O.Z)(function*(w,D){if(!navigator)throw pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pr.create("permission-blocked");return yield function Ca(w,D){return gu.apply(this,arguments)}(w,D?.vapidKey),yield function pc(w,D){return gs.apply(this,arguments)}(w,D?.serviceWorkerRegistration),function dh(w){return Pp.apply(this,arguments)}(w)}),mu.apply(this,arguments)}function rs(){return(rs=(0,O.Z)(function*(w,D,R){const B=function _h(w){switch(w){case ac.NOTIFICATION_CLICKED:return"notification_open";case ac.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:R[zn],message_name:R[bp],message_time:R[gI],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function En(){return En=(0,O.Z)(function*(w,D){const R=D.data;if(!R.isFirebaseMessaging)return;w.onMessageHandler&&R.messageType===ac.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(hc(R)):w.onMessageHandler.next(hc(R)));const B=R.data;(function xp(w){return"object"==typeof w&&!!w&&zn in w})(B)&&"1"===B["google.c.a.e"]&&(yield function s_(w,D,R){return rs.apply(this,arguments)}(w,R.messageType,B))}),En.apply(this,arguments)}const _u="@firebase/messaging",hi=w=>{const D=new kp(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function gc(w,D){return En.apply(this,arguments)}(D,R)),D},o_=w=>{const D=w.getProvider("messaging").getImmediate();return{getToken:B=>function mh(w,D){return mu.apply(this,arguments)}(D,B)}};function qo(){return ri.apply(this,arguments)}function ri(){return(ri=(0,O.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bl(){(0,ee._registerComponent)(new ve.wA("messaging",hi,"PUBLIC")),(0,ee._registerComponent)(new ve.wA("messaging-internal",o_,"PRIVATE")),(0,ee.registerVersion)(_u,"0.12.4"),(0,ee.registerVersion)(_u,"0.12.4","esm2017")}();const ba="analytics",vh="firebase_id",Pt="origin",_c=6e4,u_="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yc="https://www.googletagmanager.com/gtag/js",Dr=new Ee.Yd("@firebase/analytics"),gr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function wo(w){if(!w.startsWith(yc)){const D=gr.create("invalid-gtag-resource",{gtagURL:w});return Dr.warn(D.message),""}return w}function Da(w){return Promise.all(w.map(D=>D.catch(R=>R)))}function Me(){return(Me=(0,O.Z)(function*(w,D,R,B,Q,re){const Ie=B[Q];try{if(Ie)yield D[Ie];else{const Xe=(yield Da(R)).find(yt=>yt.measurementId===Q);Xe&&(yield D[Xe.appId])}}catch(nt){Dr.error(nt)}w("config",Q,re)})).apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(w,D,R,B,Q){try{let re=[];if(Q&&Q.send_to){let Ie=Q.send_to;Array.isArray(Ie)||(Ie=[Ie]);const nt=yield Da(R);for(const Xe of Ie){const yt=nt.find(Nt=>Nt.measurementId===Xe),Ot=yt&&D[yt.appId];if(!Ot){re=[];break}re.push(Ot)}}0===re.length&&(re=Object.values(D)),yield Promise.all(re),w("event",B,Q||{})}catch(re){Dr.error(re)}})).apply(this,arguments)}const yu=30,Gl=new class wh{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Fp(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function zl(){return(zl=(0,O.Z)(function*(w){var D;const{appId:R,apiKey:B}=w,Q={method:"GET",headers:Fp(B)},re=u_.replace("{app-id}",R),Ie=yield fetch(re,Q);if(200!==Ie.status&&304!==Ie.status){let nt="";try{const Xe=yield Ie.json();null!==(D=Xe.error)&&void 0!==D&&D.message&&(nt=Xe.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:nt})}return Ie.json()})).apply(this,arguments)}function xs(){return(xs=(0,O.Z)(function*(w,D=Gl,R){const{appId:B,apiKey:Q,measurementId:re}=w.options;if(!B)throw gr.create("no-app-id");if(!Q){if(re)return{measurementId:re,appId:B};throw gr.create("no-api-key")}const Ie=D.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new Ch;return setTimeout((0,O.Z)(function*(){nt.abort()}),void 0!==R?R:_c),Th({appId:B,apiKey:Q,measurementId:re},Ie,nt,D)})).apply(this,arguments)}function Th(w,D,R){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,O.Z)(function*(w,{throttleEndTimeMillis:D,backoffCount:R},B,Q=Gl){var re;const{appId:Ie,measurementId:nt}=w;try{yield function ks(w,D){return new Promise((R,B)=>{const Q=Math.max(D-Date.now(),0),re=setTimeout(R,Q);w.addEventListener(()=>{clearTimeout(re),B(gr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(B,D)}catch(Xe){if(nt)return Dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${Xe?.message}]`),{appId:Ie,measurementId:nt};throw Xe}try{const Xe=yield function _I(w){return zl.apply(this,arguments)}(w);return Q.deleteThrottleMetadata(Ie),Xe}catch(Xe){const yt=Xe;if(!function c_(w){if(!(w instanceof ae.ZR&&w.customData))return!1;const D=Number(w.customData.httpStatus);return 429===D||500===D||503===D||504===D}(yt)){if(Q.deleteThrottleMetadata(Ie),nt)return Dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:Ie,measurementId:nt};throw Xe}const Ot=503===Number(null===(re=yt?.customData)||void 0===re?void 0:re.httpStatus)?(0,ae.$s)(R,Q.intervalMillis,yu):(0,ae.$s)(R,Q.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Ot,backoffCount:R+1};return Q.setThrottleMetadata(Ie,Nt),Dr.debug(`Calling attemptFetch again in ${Ot} millis`),Th(w,Nt,B,Q)}}),Yo.apply(this,arguments)}class Ch{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Ic,to;function Ec(){return(Ec=(0,O.Z)(function*(w,D,R,B,Q){if(Q&&Q.global)w("event",R,B);else{const re=yield D;w("event",R,Object.assign(Object.assign({},B),{send_to:re}))}})).apply(this,arguments)}function ms(){return(ms=(0,O.Z)(function*(){if(!(0,ae.hl)())return Dr.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(w){return Dr.warn(gr.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ms(){return Ms=(0,O.Z)(function*(w,D,R,B,Q,re,Ie){var nt;const Xe=function Gr(w){return xs.apply(this,arguments)}(w);Xe.then(Sr=>{R[Sr.measurementId]=Sr.appId,w.options.measurementId&&Sr.measurementId!==w.options.measurementId&&Dr.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${Sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sr=>Dr.error(Sr)),D.push(Xe);const yt=function vt(){return ms.apply(this,arguments)}().then(Sr=>{if(Sr)return B.getId()}),[Ot,Nt]=yield Promise.all([Xe,yt]);(function vc(w){const D=window.document.getElementsByTagName("script");for(const R of Object.values(D))if(R.src&&R.src.includes(yc)&&R.src.includes(w))return R;return null})(re)||function Lp(w,D){const R=function $l(w,D){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(w,D)),R}("firebase-js-sdk-policy",{createScriptURL:wo}),B=document.createElement("script"),Q=`${yc}?l=${w}&id=${D}`;B.src=R?R?.createScriptURL(Q):Q,B.async=!0,document.head.appendChild(B)}(re,Ot.measurementId),to&&(Q("consent","default",to),function To(w){to=w}(void 0)),Q("js",new Date);const pi=null!==(nt=Ie?.config)&&void 0!==nt?nt:{};return pi[Pt]="firebase",pi.update=!0,null!=Nt&&(pi[vh]=Nt),Q("config",Ot.measurementId,pi),Ic&&(Q("set",Ic),function qn(w){Ic=w}(void 0)),Ot.measurementId}),Ms.apply(this,arguments)}class wc{constructor(D){this.app=D}_delete(){return delete Os[this.app.options.appId],Promise.resolve()}}let Os={},vu=[];const kr={};let si,fi,er="dataLayer",_s=!1;function Qo(w,D,R){!function Sa(){const w=[];if((0,ae.ru)()&&w.push("This is a browser extension environment."),(0,ae.zI)()||w.push("Cookies are not available."),w.length>0){const D=w.map((B,Q)=>`(${Q+1}) ${B}`).join(" "),R=gr.create("invalid-analytics-context",{errorInfo:D});Dr.warn(R.message)}}();const B=w.options.appId;if(!B)throw gr.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw gr.create("no-api-key");Dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Os[B])throw gr.create("already-exists",{id:B});if(!_s){!function Ih(w){let D=[];Array.isArray(window[w])?D=window[w]:window[w]=D}(er);const{wrappedGtag:re,gtagCore:Ie}=function Hr(w,D,R,B,Q){let re=function(...Ie){window[B].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(re=window[Q]),window[Q]=function Hl(w,D,R,B){function re(){return re=(0,O.Z)(function*(Ie,...nt){try{if("event"===Ie){const[Xe,yt]=nt;yield function sn(w,D,R,B,Q){return $i.apply(this,arguments)}(w,D,R,Xe,yt)}else if("config"===Ie){const[Xe,yt]=nt;yield function Eh(w,D,R,B,Q,re){return Me.apply(this,arguments)}(w,D,R,B,Xe,yt)}else if("consent"===Ie){const[Xe]=nt;w("consent","update",Xe)}else if("get"===Ie){const[Xe,yt,Ot]=nt;w("get",Xe,yt,Ot)}else if("set"===Ie){const[Xe]=nt;w("set",Xe)}else w(Ie,...nt)}catch(Xe){Dr.error(Xe)}}),re.apply(this,arguments)}return function Q(Ie){return re.apply(this,arguments)}}(re,w,D,R),{gtagCore:re,wrappedGtag:window[Q]}}(Os,vu,kr,er,"gtag");fi=re,si=Ie,_s=!0}return Os[B]=function Kn(w,D,R,B,Q,re,Ie){return Ms.apply(this,arguments)}(w,vu,kr,D,si,er,R),new wc(w)}function Sh(){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Cc="@firebase/analytics";!function Rh(){(0,ee._registerComponent)(new ve.wA(ba,(D,{options:R})=>Qo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ee._registerComponent)(new ve.wA("analytics-internal",function w(D){try{const R=D.getProvider(ba).getImmediate();return{logEvent:(B,Q,re)=>function f_(w,D,R,B){w=(0,ae.m9)(w),function l_(w,D,R,B,Q){return Ec.apply(this,arguments)}(fi,Os[w.app.options.appId],D,R,B).catch(Q=>Dr.error(Q))}(R,B,Q,re)}}catch(R){throw gr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ee.registerVersion)(Cc,"0.10.0"),(0,ee.registerVersion)(Cc,"0.10.0","esm2017")}();var bc=F(1954),Eu=F(2631);const Up=new class vI extends Eu.v{}(class Nh extends bc.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(D,R,B):(D.flush(this),0)}});var p_=F(6321),J=F(5592),on=F(9397),rr=F(3093),k=F(5137);const Mr=new m.GfV("7.6.1"),bo="__angularfire_symbol__analyticsIsSupportedValue",Xo="__angularfire_symbol__analyticsIsSupported",Dc="__angularfire_symbol__remoteConfigIsSupportedValue",On="__angularfire_symbol__remoteConfigIsSupported",Sc="__angularfire_symbol__messagingIsSupportedValue",Do="__angularfire_symbol__messagingIsSupported";function Ac(w,D,R){if(D){if(1===D.length)return D[0];const re=D.filter(Ie=>Ie.app===R);if(1===re.length)return re[0]}return R.container.getProvider(w).getImmediate({optional:!0})}globalThis[Xo]||(globalThis[Xo]=Sh().then(w=>globalThis[bo]=w).catch(()=>globalThis[bo]=!1)),globalThis[Do]||(globalThis[Do]=qo().then(w=>globalThis[Sc]=w).catch(()=>globalThis[Sc]=!1)),globalThis[On]||(globalThis[On]=Ho().then(w=>globalThis[Dc]=w).catch(()=>globalThis[Dc]=!1));const xh=(w,D)=>{const R=D?[D]:(0,G.C6)(),B=[];return R.forEach(Q=>{Q.container.getProvider(w).instances.forEach(Ie=>{B.includes(Ie)||B.push(Ie)})}),B};function Jo(){}class ea{constructor(D,R=Up){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,B){const Q=this.zone;return this.delegate.schedule(function(Ie){Q.runGuarded(()=>{D.apply(this,[Ie])})},R,B)}}class Vp{constructor(D){this.zone=D,this.task=null}call(D,R){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jo,{},Jo,Jo)),R.pipe((0,on.b)({next:B,complete:B,error:B})).subscribe(D).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let un=(()=>{class w{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new ea(Zone.current)),this.insideAngular=R.run(()=>new ea(Zone.current,p_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(R){return new(R||w)(m.LFG(m.R0b))},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Fs(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function ys(w){return Fs().ngZone.run(()=>w())}function Nc(w){return w.pipe((0,rr.Q)(Fs().outsideAngular))}function Na(w){return Fs(),function Pa(w){return function(R){return(R=R.lift(new Vp(w.ngZone))).pipe((0,k.R)(w.outsideAngular),(0,rr.Q)(w.insideAngular))}}(Fs())(w)}const xa=(w,D)=>function(){const B=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),ys(()=>w.apply(void 0,B))},ro=(w,D)=>function(){let R;const B=arguments;for(let re=0;re<arguments.length;re++)"function"==typeof B[re]&&(D&&(R||(R=ys(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jo,{},Jo,Jo)))),B[re]=xa(B[re],R));const Q=function Rc(w){return Fs().ngZone.runOutsideAngular(()=>w())}(()=>w.apply(this,B));if(!D){if(Q instanceof J.y){const re=Fs();return Q.pipe((0,k.R)(re.outsideAngular),(0,rr.Q)(re.insideAngular))}return ys(()=>Q)}return Q instanceof J.y?Q.pipe(Na):Q instanceof Promise?ys(()=>new Promise((re,Ie)=>Q.then(nt=>ys(()=>re(nt)),nt=>ys(()=>Ie(nt))))):"function"==typeof Q&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),Q.apply(this,arguments)}:ys(()=>Q)}},6710:(pt,Ae,F)=>{F.d(Ae,{$:()=>Pl,A:()=>K,D:()=>xe,I:()=>nh,J:()=>iu,L:()=>Qe,N:()=>mt,P:()=>Kn,Q:()=>Ia,R:()=>bh,U:()=>ic,V:()=>Ho,W:()=>hs,X:()=>yo,Y:()=>Sl,Z:()=>Al,_:()=>Go,a:()=>mc,a0:()=>Tp,a1:()=>zn,a2:()=>mI,a3:()=>t_,a4:()=>xl,a5:()=>Io,a6:()=>ps,a7:()=>ou,a8:()=>au,a9:()=>kl,aA:()=>q,aB:()=>Xo,aC:()=>Be,aD:()=>dn,aE:()=>on,aF:()=>Zl,aG:()=>h_,aH:()=>Xn,aL:()=>Zo,aO:()=>Bi,aa:()=>ah,ab:()=>Ml,ac:()=>uh,ad:()=>Np,ae:()=>lu,af:()=>Ol,ai:()=>n_,aj:()=>Pp,ak:()=>hh,an:()=>Rl,ao:()=>fu,aq:()=>gu,ar:()=>_u,as:()=>Ge,at:()=>ot,au:()=>Ne,av:()=>oe,aw:()=>Nt,ax:()=>Do,ay:()=>gn,az:()=>De,b:()=>jl,c:()=>fi,d:()=>Qo,e:()=>Tc,f:()=>Cc,g:()=>vI,h:()=>bc,i:()=>Ps,j:()=>p_,k:()=>Us,l:()=>Et,m:()=>na,p:()=>Re,r:()=>Dn,s:()=>Wn,u:()=>vt});var m=F(5861),G=F(9058),O=F(7592),ee=F(7582),ae=F(7879),ve=F(4537);const Re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function se(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ke=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Oe=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ke=new ae.Yd("@firebase/auth");function ht(E,...g){ke.logLevel<=ae.in.ERROR&&ke.error(`Auth (${O.SDK_VERSION}): ${E}`,...g)}function oe(E,...g){throw Ue(E,...g)}function De(E,...g){return Ue(E,...g)}function de(E,g,_){const T=Object.assign(Object.assign({},Ke()),{[g]:_});return new G.LL("auth","Firebase",T).create(g,{appName:E.name})}function Ce(E,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&oe(E,"argument-error"),de(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(E,...g){if("string"!=typeof E){const _=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=E.name),E._errorFactory.create(_,...T)}return Oe.create(E,...g)}function q(E,g,..._){if(!E)throw Ue(g,..._)}function Pe(E){const g="INTERNAL ASSERTION FAILED: "+E;throw ht(g),new Error(g)}function Ge(E,g){E||Pe(g)}function It(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function an(){return"http:"===Sn()||"https:"===Sn()}function Sn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class wn{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ge(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function An(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(an()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xr(E,g){Ge(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class ue{static initialize(g,_,T){this.fetchImpl=g,_&&(this.headersImpl=_),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_e=new wn(3e4,6e4);function ce(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function Se(E,g,_,T){return je.apply(this,arguments)}function je(){return(je=(0,m.Z)(function*(E,g,_,T,N={}){return Ze(E,N,(0,m.Z)(function*(){let L={},te={};T&&("GET"===g?te=T:L={body:JSON.stringify(T)});const he=(0,G.xO)(Object.assign({key:E.config.apiKey},te)).slice(1),We=yield E._getAdditionalHeaders();return We["Content-Type"]="application/json",E.languageCode&&(We["X-Firebase-Locale"]=E.languageCode),ue.fetch()(Qt(E,E.config.apiHost,_,he),Object.assign({method:g,headers:We,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Ze(E,g,_){return ze.apply(this,arguments)}function ze(){return(ze=(0,m.Z)(function*(E,g,_){E._canInitEmulator=!1;const T=Object.assign(Object.assign({},ge),g);try{const N=new gt(E),L=yield Promise.race([_(),N.promise]);N.clearNetworkTimeout();const te=yield L.json();if("needConfirmation"in te)throw pn(E,"account-exists-with-different-credential",te);if(L.ok&&!("errorMessage"in te))return te;{const he=L.ok?te.errorMessage:te.error.message,[We,rt]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===We)throw pn(E,"credential-already-in-use",te);if("EMAIL_EXISTS"===We)throw pn(E,"email-already-in-use",te);if("USER_DISABLED"===We)throw pn(E,"user-disabled",te);const wt=T[We]||We.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw de(E,wt,rt);oe(E,wt)}}catch(N){if(N instanceof G.ZR)throw N;oe(E,"network-request-failed",{message:String(N)})}})).apply(this,arguments)}function cn(E,g,_,T){return St.apply(this,arguments)}function St(){return(St=(0,m.Z)(function*(E,g,_,T,N={}){const L=yield Se(E,g,_,T,N);return"mfaPendingCredential"in L&&oe(E,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Qt(E,g,_,T){const N=`${g}${_}?${T}`;return E.config.emulator?xr(E.config,N):`${E.config.apiScheme}://${N}`}class gt{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,T)=>{this.timer=setTimeout(()=>T(De(this.auth,"network-request-failed")),_e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pn(E,g,_){const T={appName:E.name};_.email&&(T.email=_.email),_.phoneNumber&&(T.phoneNumber=_.phoneNumber);const N=De(E,g,T);return N.customData._tokenResponse=_,N}function Cn(){return(Cn=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Gn(){return(Gn=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Un(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ts(){return(ts=(0,m.Z)(function*(E,g=!1){const _=(0,G.m9)(E),T=yield _.getIdToken(g),N=At(T);q(N&&N.exp&&N.auth_time&&N.iat,_.auth,"internal-error");const L="object"==typeof N.firebase?N.firebase:void 0,te=L?.sign_in_provider;return{claims:N,token:T,authTime:Un(Tt(N.auth_time)),issuedAtTime:Un(Tt(N.iat)),expirationTime:Un(Tt(N.exp)),signInProvider:te||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Tt(E){return 1e3*Number(E)}function At(E){const[g,_,T]=E.split(".");if(void 0===g||void 0===_||void 0===T)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,G.tV)(_);return N?JSON.parse(N):(ht("Failed to decode base64 JWT payload"),null)}catch(N){return ht("Caught error parsing JWT payload as JSON",N?.toString()),null}}function Kt(E,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,m.Z)(function*(E,g,_=!1){if(_)return g;try{return yield g}catch(T){throw T instanceof G.ZR&&function dr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(T)&&E.auth.currentUser===E&&(yield E.auth.signOut()),T}})).apply(this,arguments)}class $t{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const N=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),T)}iteration(){var g=this;return(0,m.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class kn{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ci(E){return nn.apply(this,arguments)}function nn(){return nn=(0,m.Z)(function*(E){var g;const _=E.auth,T=yield E.getIdToken(),N=yield Kt(E,function ui(E,g){return lr.apply(this,arguments)}(_,{idToken:T}));q(N?.users.length,_,"internal-error");const L=N.users[0];E._notifyReloadListener(L);const te=null!==(g=L.providerUserInfo)&&void 0!==g&&g.length?function vi(E){return E.map(g=>{var{providerId:_}=g,T=(0,ee._T)(g,["providerId"]);return{providerId:_,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(L.providerUserInfo):[],he=function Nn(E,g){return[...E.filter(T=>!g.some(N=>N.providerId===T.providerId)),...g]}(E.providerData,te),wt=!!E.isAnonymous&&!(E.email&&L.passwordHash||he?.length),Jt={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:he,metadata:new kn(L.createdAt,L.lastLoginAt),isAnonymous:wt};Object.assign(E,Jt)}),nn.apply(this,arguments)}function Wt(){return(Wt=(0,m.Z)(function*(E){const g=(0,G.m9)(E);yield ci(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function hr(){return(hr=(0,m.Z)(function*(E,g){const _=yield Ze(E,{},(0,m.Z)(function*(){const T=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:N,apiKey:L}=E.config,te=Qt(E,N,"/v1/token",`key=${L}`),he=yield E._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",ue.fetch()(te,{method:"POST",headers:he,body:T})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Qn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){q(g.idToken,"internal-error"),q(typeof g.idToken<"u","internal-error"),q(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Mt(E){const g=At(E);return q(g,"internal-error"),q(typeof g.exp<"u","internal-error"),q(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var T=this;return(0,m.Z)(function*(){return q(!T.accessToken||T.refreshToken,g,"user-token-expired"),_||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var T=this;return(0,m.Z)(function*(){const{accessToken:N,refreshToken:L,expiresIn:te}=yield function Li(E,g){return hr.apply(this,arguments)}(g,_);T.updateTokensAndExpiration(N,L,Number(te))})()}updateTokensAndExpiration(g,_,T){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,_){const{refreshToken:T,accessToken:N,expirationTime:L}=_,te=new Qn;return T&&(q("string"==typeof T,"internal-error",{appName:g}),te.refreshToken=T),N&&(q("string"==typeof N,"internal-error",{appName:g}),te.accessToken=N),L&&(q("number"==typeof L,"internal-error",{appName:g}),te.expirationTime=L),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Qn,this.toJSON())}_performRefresh(){return Pe("not implemented")}}function ye(E,g){q("string"==typeof E||typeof E>"u","internal-error",{appName:g})}class Y{constructor(g){var{uid:_,auth:T,stsTokenManager:N}=g,L=(0,ee._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=T,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new kn(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,m.Z)(function*(){const T=yield Kt(_,_.stsTokenManager.getToken(_.auth,g));return q(T,_.auth,"internal-error"),_.accessToken!==T&&(_.accessToken=T,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),T})()}getIdTokenResult(g){return function Vr(E){return ts.apply(this,arguments)}(this,g)}reload(){return function Qr(E){return Wt.apply(this,arguments)}(this)}_assign(g){this!==g&&(q(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new Y(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var T=this;return(0,m.Z)(function*(){let N=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),N=!0),_&&(yield ci(T)),yield T.auth._persistUserIfCurrent(T),N&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,m.Z)(function*(){const _=yield g.getIdToken();return yield Kt(g,function Fn(E,g){return Cn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var T,N,L,te,he,We,rt,wt;const Jt=null!==(T=_.displayName)&&void 0!==T?T:void 0,Di=null!==(N=_.email)&&void 0!==N?N:void 0,ss=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,kc=null!==(te=_.photoURL)&&void 0!==te?te:void 0,$p=null!==(he=_.tenantId)&&void 0!==he?he:void 0,Jl=null!==(We=_._redirectEventId)&&void 0!==We?We:void 0,Tu=null!==(rt=_.createdAt)&&void 0!==rt?rt:void 0,Mc=null!==(wt=_.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:Hp,emailVerified:y_,isAnonymous:kh,providerData:Mh,stsTokenManager:v_}=_;q(Hp&&v_,g,"internal-error");const I_=Qn.fromJSON(this.name,v_);q("string"==typeof Hp,g,"internal-error"),ye(Jt,g.name),ye(Di,g.name),q("boolean"==typeof y_,g,"internal-error"),q("boolean"==typeof kh,g,"internal-error"),ye(ss,g.name),ye(kc,g.name),ye($p,g.name),ye(Jl,g.name),ye(Tu,g.name),ye(Mc,g.name);const E_=new Y({uid:Hp,auth:g,email:Di,emailVerified:y_,displayName:Jt,isAnonymous:kh,photoURL:kc,phoneNumber:ss,tenantId:$p,stsTokenManager:I_,createdAt:Tu,lastLoginAt:Mc});return Mh&&Array.isArray(Mh)&&(E_.providerData=Mh.map(wI=>Object.assign({},wI))),Jl&&(E_._redirectEventId=Jl),E_}static _fromIdTokenResponse(g,_,T=!1){return(0,m.Z)(function*(){const N=new Qn;N.updateFromServerResponse(_);const L=new Y({uid:_.localId,auth:g,stsTokenManager:N,isAnonymous:T});return yield ci(L),L})()}}const Te=new Map;function Be(E){Ge(E instanceof Function,"Expected a class definition");let g=Te.get(E);return g?(Ge(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,Te.set(E,g),g)}const mt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,T){var N=this;return(0,m.Z)(function*(){N.storage[_]=T})()}_get(_){var T=this;return(0,m.Z)(function*(){const N=T.storage[_];return void 0===N?null:N})()}_remove(_){var T=this;return(0,m.Z)(function*(){delete T.storage[_]})()}_addListener(_,T){}_removeListener(_,T){}}return E.type="NONE",E})();function dn(E,g,_){return`firebase:${E}:${g}:${_}`}class W{constructor(g,_,T){this.persistence=g,this.auth=_,this.userKey=T;const{config:N,name:L}=this.auth;this.fullUserKey=dn(this.userKey,N.apiKey,L),this.fullPersistenceKey=dn("persistence",N.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,m.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Y._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,m.Z)(function*(){if(_.persistence===g)return;const T=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,T?_.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,T="authUser"){return(0,m.Z)(function*(){if(!_.length)return new W(Be(mt),g,T);const N=(yield Promise.all(_.map(function(){var rt=(0,m.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let L=N[0]||Be(mt);const te=dn(T,g.config.apiKey,g.name);let he=null;for(const rt of _)try{const wt=yield rt._get(te);if(wt){const Jt=Y._fromJSON(g,wt);rt!==L&&(he=Jt),L=rt;break}}catch{}const We=N.filter(rt=>rt._shouldAllowMigration);return L._shouldAllowMigration&&We.length?(L=We[0],he&&(yield L._set(te,he.toJSON())),yield Promise.all(_.map(function(){var rt=(0,m.Z)(function*(wt){if(wt!==L)try{yield wt._remove(te)}catch{}});return function(wt){return rt.apply(this,arguments)}}())),new W(L,g,T)):new W(L,g,T)})()}}function z(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ne(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(U(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(qe(g))return"Blackberry";if(xt(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||M(g))&&!g.includes("edge/"))return"Chrome";if(Ne(g))return"Android";{const T=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function U(E=(0,G.z$)()){return/firefox\//i.test(E)}function V(E=(0,G.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function M(E=(0,G.z$)()){return/crios\//i.test(E)}function ne(E=(0,G.z$)()){return/iemobile/i.test(E)}function Ne(E=(0,G.z$)()){return/android/i.test(E)}function qe(E=(0,G.z$)()){return/blackberry/i.test(E)}function xt(E=(0,G.z$)()){return/webos/i.test(E)}function ot(E=(0,G.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function gn(E=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Ht(E=(0,G.z$)()){return ot(E)||Ne(E)||xt(E)||qe(E)||/windows phone/i.test(E)||ne(E)}function Vo(E,g=[]){let _;switch(E){case"Browser":_=z((0,G.z$)());break;case"Worker":_=`${z((0,G.z$)())}-${E}`;break;default:_=E}const T=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${T}`}function Ss(){return(Ss=(0,m.Z)(function*(E){return(yield Se(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function As(E,g){return ns.apply(this,arguments)}function ns(){return(ns=(0,m.Z)(function*(E,g){return Se(E,"GET","/v2/recaptchaConfig",ce(E,g))})).apply(this,arguments)}function rn(E){return void 0!==E&&void 0!==E.getResponse}function go(E){return void 0!==E&&void 0!==E.enterprise}class fa{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Yu(E){return new Promise((g,_)=>{const T=document.createElement("script");T.setAttribute("src",E),T.onload=g,T.onerror=N=>{const L=De("internal-error");L.customData=N,_(L)},T.type="text/javascript",T.charset="UTF-8",function Zu(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(T)})}function Zs(E){return`__${E}${Math.floor(1e6*Math.random())}`}class ga{constructor(g){this.type="recaptcha-enterprise",this.auth=Xn(g)}verify(g="verify",_=!1){var T=this;return(0,m.Z)(function*(){function L(){return L=(0,m.Z)(function*(he){if(!_){if(null==he.tenantId&&null!=he._agentRecaptchaConfig)return he._agentRecaptchaConfig.siteKey;if(null!=he.tenantId&&void 0!==he._tenantRecaptchaConfigs[he.tenantId])return he._tenantRecaptchaConfigs[he.tenantId].siteKey}return new Promise(function(){var We=(0,m.Z)(function*(rt,wt){As(he,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Jt=>{if(void 0!==Jt.recaptchaKey){const Di=new fa(Jt);return null==he.tenantId?he._agentRecaptchaConfig=Di:he._tenantRecaptchaConfigs[he.tenantId]=Di,rt(Di.siteKey)}wt(new Error("recaptcha Enterprise site key undefined"))}).catch(Jt=>{wt(Jt)})});return function(rt,wt){return We.apply(this,arguments)}}())}),L.apply(this,arguments)}function te(he,We,rt){const wt=window.grecaptcha;go(wt)?wt.enterprise.ready(()=>{wt.enterprise.execute(he,{action:g}).then(Jt=>{We(Jt)}).catch(()=>{We("NO_RECAPTCHA")})}):rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((he,We)=>{(function N(he){return L.apply(this,arguments)})(T.auth).then(rt=>{if(!_&&go(window.grecaptcha))te(rt,he,We);else{if(typeof window>"u")return void We(new Error("RecaptchaVerifier is only supported in browser"));Yu("https://www.google.com/recaptcha/enterprise.js?render="+rt).then(()=>{te(rt,he,We)}).catch(wt=>{We(wt)})}}).catch(rt=>{We(rt)})})})()}}function Ys(E,g,_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(E,g,_,T=!1){const N=new ga(E);let L;try{L=yield N.verify(_)}catch{L=yield N.verify(_,!0)}const te=Object.assign({},g);return Object.assign(te,T?{captchaResp:L}:{captchaResponse:L}),Object.assign(te,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(te,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),te})).apply(this,arguments)}class nu{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const T=L=>new Promise((te,he)=>{try{te(g(L))}catch(We){he(We)}});T.onAbort=_,this.queue.push(T);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,m.Z)(function*(){if(_.auth.currentUser===g)return;const T=[];try{for(const N of _.queue)yield N(g),N.onAbort&&T.push(N.onAbort)}catch(N){T.reverse();for(const L of T)try{L()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:N?.message})}})()}}class Qu{constructor(g,_,T,N){this.app=g,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=T,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xm(this),this.idTokenSubscription=new Xm(this),this.beforeStateQueue=new nu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Oe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(g,_){var T=this;return _&&(this._popupRedirectResolver=Be(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var N,L;if(!T._deleted&&(T.persistenceManager=yield W.create(T,g),!T._deleted)){if(null!==(N=T._popupRedirectResolver)&&void 0!==N&&N._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(_),T.lastNotifiedUid=(null===(L=T.currentUser)||void 0===L?void 0:L.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,m.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,m.Z)(function*(){var T;const N=yield _.assertedPersistence.getCurrentUser();let L=N,te=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(T=_.redirectUser)||void 0===T?void 0:T._redirectEventId,We=L?._redirectEventId,rt=yield _.tryRedirectSignIn(g);(!he||he===We)&&rt?.user&&(L=rt.user,te=!0)}if(!L)return _.directlySetCurrentUser(null);if(!L._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(L)}catch(he){L=N,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return L?_.reloadAndSetCurrentUserOrClear(L):_.directlySetCurrentUser(null)}return q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===L._redirectEventId?_.directlySetCurrentUser(L):_.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(g){var _=this;return(0,m.Z)(function*(){let T=null;try{T=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,m.Z)(function*(){try{yield ci(g)}catch(T){if("auth/network-request-failed"!==T?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Rn(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,m.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,m.Z)(function*(){const T=g?(0,G.m9)(g):null;return T&&q(T.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(T&&T._clone(_))})()}_updateCurrentUser(g,_=!1){var T=this;return(0,m.Z)(function*(){if(!T._deleted)return g&&q(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),_||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,m.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,m.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(Be(g))}))}initializeRecaptchaConfig(){var g=this;return(0,m.Z)(function*(){const _=yield As(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new fa(_);null==g.tenantId?g._agentRecaptchaConfig=T:g._tenantRecaptchaConfigs[g.tenantId]=T,T.emailPasswordEnabled&&new ga(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,_,T){return this.registerStateListener(this.authStateSubscription,g,_,T)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,T){return this.registerStateListener(this.idTokenSubscription,g,_,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var T=this;return(0,m.Z)(function*(){const N=yield T.getOrInitRedirectPersistenceManager(_);return null===g?N.removeCurrentUser():N.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const T=g&&Be(g)||_._popupRedirectResolver;q(T,_,"argument-error"),_.redirectPersistenceManager=yield W.create(_,[Be(T._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,m.Z)(function*(){var T,N;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(T=_._currentUser)||void 0===T?void 0:T._redirectEventId)===g?_._currentUser:(null===(N=_.redirectUser)||void 0===N?void 0:N._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,m.Z)(function*(){if(g===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,T,N){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return q(te,this,"internal-error"),te.then(()=>L(this.currentUser)),"function"==typeof _?g.addObserver(_,T,N):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Vo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,m.Z)(function*(){var _;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const N=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();N&&(T["X-Firebase-Client"]=N);const L=yield g._getAppCheckToken();return L&&(T["X-Firebase-AppCheck"]=L),T})()}_getAppCheckToken(){var g=this;return(0,m.Z)(function*(){var _;const T=yield null===(_=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return T?.error&&function _t(E,...g){ke.logLevel<=ae.in.WARN&&ke.warn(`Auth (${O.SDK_VERSION}): ${E}`,...g)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function Xn(E){return(0,G.m9)(E)}class Xm{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(_=>this.observer=_)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nh(E,g,_){const T=Xn(E);q(T._canInitEmulator,T,"emulator-config-failed"),q(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const N=!!_?.disableWarnings,L=Ei(g),{host:te,port:he}=function ru(E){const g=Ei(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!_)return{host:"",port:null};const T=_[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(T);if(N){const L=N[1];return{host:L,port:Xu(T.substr(L.length+1))}}{const[L,te]=T.split(":");return{host:L,port:Xu(te)}}}(g);T.config.emulator={url:`${L}//${te}${null===he?"":`:${he}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:te,port:he,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function vp(){function E(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function Ei(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function Xu(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class iu{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Pe("not implemented")}_getIdTokenResponse(g){return Pe("not implemented")}_linkToIdToken(g,_){return Pe("not implemented")}_getReauthenticationResolver(g){return Pe("not implemented")}}function El(E,g){return rh.apply(this,arguments)}function rh(){return(rh=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:resetPassword",ce(E,g))})).apply(this,arguments)}function Ju(E,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function wi(){return(wi=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",ce(E,g))})).apply(this,arguments)}function ec(E,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithPassword",ce(E,g))})).apply(this,arguments)}function tc(E,g){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:sendOobCode",ce(E,g))})).apply(this,arguments)}function nc(){return(nc=(0,m.Z)(function*(E,g){return tc(E,g)})).apply(this,arguments)}function rc(E,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,m.Z)(function*(E,g){return tc(E,g)})).apply(this,arguments)}function bl(E,g){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,m.Z)(function*(E,g){return tc(E,g)})).apply(this,arguments)}function Br(){return(Br=(0,m.Z)(function*(E,g){return tc(E,g)})).apply(this,arguments)}function jr(){return(jr=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithEmailLink",ce(E,g))})).apply(this,arguments)}function Dl(){return(Dl=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithEmailLink",ce(E,g))})).apply(this,arguments)}class jo extends iu{constructor(g,_,T,N=null){super("password",T),this._email=g,this._password=_,this._tenantId=N}static _fromEmailAndPassword(g,_){return new jo(g,_,"password")}static _fromEmailAndCode(g,_,T=null){return new jo(g,_,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,m.Z)(function*(){var T;switch(_.signInMethod){case"password":const N={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=g._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const L=yield Ys(g,N,"signInWithPassword");return ec(g,L)}return ec(g,N).catch(function(){var L=(0,m.Z)(function*(te){if("auth/missing-recaptcha-token"===te.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const he=yield Ys(g,N,"signInWithPassword");return ec(g,he)}return Promise.reject(te)});return function(te){return L.apply(this,arguments)}}());case"emailLink":return function ya(E,g){return jr.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:oe(g,"internal-error")}})()}_linkToIdToken(g,_){var T=this;return(0,m.Z)(function*(){switch(T.signInMethod){case"password":return Ju(g,{idToken:_,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Ip(E,g){return Dl.apply(this,arguments)}(g,{idToken:_,email:T._email,oobCode:T._password});default:oe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function mo(E,g){return va.apply(this,arguments)}function va(){return(va=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithIdp",ce(E,g))})).apply(this,arguments)}class Qe extends iu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Qe(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):oe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:N}=_,L=(0,ee._T)(_,["providerId","signInMethod"]);if(!T||!N)return null;const te=new Qe(T,N);return te.idToken=L.idToken||void 0,te.accessToken=L.accessToken||void 0,te.secret=L.secret,te.nonce=L.nonce,te.pendingToken=L.pendingToken||null,te}_getIdTokenResponse(g){return mo(g,this.buildRequest())}_linkToIdToken(g,_){const T=this.buildRequest();return T.idToken=_,mo(g,T)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,mo(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,G.xO)(_)}return g}}function Mn(){return(Mn=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:sendVerificationCode",ce(E,g))})).apply(this,arguments)}function Qs(){return(Qs=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithPhoneNumber",ce(E,g))})).apply(this,arguments)}function $o(){return($o=(0,m.Z)(function*(E,g){const _=yield cn(E,"POST","/v1/accounts:signInWithPhoneNumber",ce(E,g));if(_.temporaryProof)throw pn(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const nr={USER_NOT_FOUND:"user-not-found"};function _o(){return(_o=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithPhoneNumber",ce(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),nr)})).apply(this,arguments)}class Rt extends iu{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Rt({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Rt({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Fi(E,g){return Qs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function li(E,g){return $o.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Xs(E,g){return _o.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:T,verificationCode:N}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:T,code:N}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:T,phoneNumber:N,temporaryProof:L}=g;return T||_||N||L?new Rt({verificationId:_,verificationCode:T,phoneNumber:N,temporaryProof:L}):null}}class Ui{constructor(g){var _,T,N,L,te,he;const We=(0,G.zd)((0,G.pd)(g)),rt=null!==(_=We.apiKey)&&void 0!==_?_:null,wt=null!==(T=We.oobCode)&&void 0!==T?T:null,Jt=function ds(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=We.mode)&&void 0!==N?N:null);q(rt&&wt&&Jt,"argument-error"),this.apiKey=rt,this.operation=Jt,this.code=wt,this.continueUrl=null!==(L=We.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(te=We.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(he=We.tenantId)&&void 0!==he?he:null}static parseLink(g){const _=function Ep(E){const g=(0,G.zd)((0,G.pd)(E)).link,_=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,T=(0,G.zd)((0,G.pd)(E)).deep_link_id;return(T?(0,G.zd)((0,G.pd)(T)).link:null)||T||_||g||E}(g);try{return new Ui(_)}catch{return null}}}let Ia=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,T){return jo._fromEmailAndPassword(_,T)}static credentialWithLink(_,T){const N=Ui.parseLink(T);return q(N,"argument-error"),jo._fromEmailAndCode(_,N.code,N.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Vi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class di extends Vi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class yo extends di{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return q("providerId"in _&&"signInMethod"in _,"argument-error"),Qe._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return q(g.idToken||g.accessToken,"argument-error"),Qe._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return yo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return yo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:T,oauthTokenSecret:N,pendingToken:L,nonce:te,providerId:he}=g;if(!T&&!N&&!_&&!L||!he)return null;try{return new yo(he)._credential({idToken:_,accessToken:T,nonce:te,pendingToken:L})}catch{return null}}}let ic=(()=>{class E extends di{constructor(){super("facebook.com")}static credential(_){return Qe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ho=(()=>{class E extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(_,T){return Qe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:T})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:T,oauthAccessToken:N}=_;if(!T&&!N)return null;try{return E.credential(T,N)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),hs=(()=>{class E extends di{constructor(){super("github.com")}static credential(_){return Qe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Bi extends iu{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return mo(g,this.buildRequest())}_linkToIdToken(g,_){const T=this.buildRequest();return T.idToken=_,mo(g,T)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,mo(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:N,pendingToken:L}=_;return T&&N&&L&&T===N?new Bi(T,L):null}static _create(g,_){return new Bi(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sl extends Vi{constructor(g){q(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Sl.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Sl.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Bi.fromJSON(g);return q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:T}=g;if(!_||!T)return null;try{return Bi._create(T,_)}catch{return null}}}let Al=(()=>{class E extends di{constructor(){super("twitter.com")}static credential(_,T){return Qe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:T})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:T,oauthTokenSecret:N}=_;if(!T||!N)return null;try{return E.credential(T,N)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ea(E,g){return $r.apply(this,arguments)}function $r(){return($r=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signUp",ce(E,g))})).apply(this,arguments)}class Jr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,T,N=!1){return(0,m.Z)(function*(){const L=yield Y._fromIdTokenResponse(g,T,N),te=vo(T);return new Jr({user:L,providerId:te,_tokenResponse:T,operationType:_})})()}static _forOperation(g,_,T){return(0,m.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const N=vo(T);return new Jr({user:g,providerId:N,_tokenResponse:T,operationType:_})})()}}function vo(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Go(E){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,m.Z)(function*(E){var g;const _=Xn(E);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Jr({user:_.currentUser,providerId:null,operationType:"signIn"});const T=yield Ea(_,{returnSecureToken:!0}),N=yield Jr._fromIdTokenResponse(_,"signIn",T,!0);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}class ih extends G.ZR{constructor(g,_,T,N){var L;super(_.code,_.message),this.operationType=T,this.user=N,Object.setPrototypeOf(this,ih.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,_,T,N){return new ih(g,_,T,N)}}function ei(E,g,_,T){return("reauthenticate"===g?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?ih._fromErrorAndOperation(E,L,g,T):L})}function ti(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function Rl(E,g){return Js.apply(this,arguments)}function Js(){return Js=(0,m.Z)(function*(E,g){const _=(0,G.m9)(E);yield zo(!0,_,g);const{providerUserInfo:T}=yield function ln(E,g){return Gn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),N=ti(T||[]);return _.providerData=_.providerData.filter(L=>N.has(L.providerId)),N.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Js.apply(this,arguments)}function ji(E,g){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,m.Z)(function*(E,g,_=!1){const T=yield Kt(E,g._linkToIdToken(E.auth,yield E.getIdToken()),_);return Jr._forOperation(E,"link",T)})).apply(this,arguments)}function zo(E,g,_){return su.apply(this,arguments)}function su(){return(su=(0,m.Z)(function*(E,g,_){yield ci(g);const N=!1===E?"provider-already-linked":"no-such-provider";q(ti(g.providerData).has(_)===E,g.auth,N)})).apply(this,arguments)}function sh(E,g){return wp.apply(this,arguments)}function wp(){return(wp=(0,m.Z)(function*(E,g,_=!1){const{auth:T}=E,N="reauthenticate";try{const L=yield Kt(E,ei(T,N,g,E),_);q(L.idToken,T,"internal-error");const te=At(L.idToken);q(te,T,"internal-error");const{sub:he}=te;return q(E.uid===he,T,"user-mismatch"),Jr._forOperation(E,N,L)}catch(L){throw"auth/user-not-found"===L?.code&&oe(T,"user-mismatch"),L}})).apply(this,arguments)}function Nl(E,g){return oc.apply(this,arguments)}function oc(){return(oc=(0,m.Z)(function*(E,g,_=!1){const T="signIn",N=yield ei(E,T,g),L=yield Jr._fromIdTokenResponse(E,T,N);return _||(yield E._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Pl(E,g){return oh.apply(this,arguments)}function oh(){return(oh=(0,m.Z)(function*(E,g){return Nl(Xn(E),g)})).apply(this,arguments)}function Tp(E,g){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,m.Z)(function*(E,g){const _=(0,G.m9)(E);return yield zo(!1,_,g.providerId),ji(_,g)})).apply(this,arguments)}function zn(E,g){return bp.apply(this,arguments)}function bp(){return(bp=(0,m.Z)(function*(E,g){return sh((0,G.m9)(E),g)})).apply(this,arguments)}function Dp(){return(Dp=(0,m.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithCustomToken",ce(E,g))})).apply(this,arguments)}function mI(E,g){return ac.apply(this,arguments)}function ac(){return ac=(0,m.Z)(function*(E,g){const _=Xn(E),T=yield function gI(E,g){return Dp.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),N=yield Jr._fromIdTokenResponse(_,"signIn",T);return yield _._updateCurrentUser(N.user),N}),ac.apply(this,arguments)}class fs{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Sp._fromServerResponse(g,_):"totpInfo"in _?wa._fromServerResponse(g,_):oe(g,"internal-error")}}class Sp extends fs{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Sp(_)}}class wa extends fs{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new wa(_)}}function Ta(E,g,_){var T;q((null===(T=_.url)||void 0===T?void 0:T.length)>0,E,"invalid-continue-uri"),q(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(q(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(q(_.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function t_(E,g,_){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,m.Z)(function*(E,g,_){var T;const N=Xn(E),L={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=N._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const te=yield Ys(N,L,"getOobCode",!0);_&&Ta(N,te,_),yield rc(N,te)}else _&&Ta(N,L,_),yield rc(N,L).catch(function(){var te=(0,m.Z)(function*(he){if("auth/missing-recaptcha-token"!==he.code)return Promise.reject(he);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const We=yield Ys(N,L,"getOobCode",!0);_&&Ta(N,We,_),yield rc(N,We)}});return function(he){return te.apply(this,arguments)}}())}),Ap.apply(this,arguments)}function xl(E,g,_){return eo.apply(this,arguments)}function eo(){return(eo=(0,m.Z)(function*(E,g,_){yield El((0,G.m9)(E),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Io(E,g){return uc.apply(this,arguments)}function uc(){return uc=(0,m.Z)(function*(E,g){yield function e_(E,g){return wi.apply(this,arguments)}((0,G.m9)(E),{oobCode:g})}),uc.apply(this,arguments)}function ps(E,g){return fr.apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(E,g){const _=(0,G.m9)(E),T=yield El(_,{oobCode:g}),N=T.requestType;switch(q(N,_,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(T.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(T.mfaInfo,_,"internal-error");default:q(T.email,_,"internal-error")}let L=null;return T.mfaInfo&&(L=fs._fromServerResponse(Xn(_),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:L},operation:N}})).apply(this,arguments)}function ou(E,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,m.Z)(function*(E,g){const{data:_}=yield ps((0,G.m9)(E),g);return _.email})).apply(this,arguments)}function au(E,g,_){return uu.apply(this,arguments)}function uu(){return uu=(0,m.Z)(function*(E,g,_){var T;const N=Xn(E),L={returnSecureToken:!0,email:g,password:_,clientType:"CLIENT_TYPE_WEB"};let te;if(null!==(T=N._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const rt=yield Ys(N,L,"signUpPassword");te=Ea(N,rt)}else te=Ea(N,L).catch(function(){var rt=(0,m.Z)(function*(wt){if("auth/missing-recaptcha-token"===wt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Jt=yield Ys(N,L,"signUpPassword");return Ea(N,Jt)}return Promise.reject(wt)});return function(wt){return rt.apply(this,arguments)}}());const he=yield te.catch(rt=>Promise.reject(rt)),We=yield Jr._fromIdTokenResponse(N,"signIn",he);return yield N._updateCurrentUser(We.user),We}),uu.apply(this,arguments)}function kl(E,g,_){return Pl((0,G.m9)(E),Ia.credential(g,_))}function ah(E,g,_){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,m.Z)(function*(E,g,_){var T;const N=Xn(E),L={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function te(he,We){q(We.handleCodeInApp,N,"argument-error"),We&&Ta(N,he,We)}if(null!==(T=N._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const he=yield Ys(N,L,"getOobCode",!0);te(he,_),yield bl(N,he)}else te(L,_),yield bl(N,L).catch(function(){var he=(0,m.Z)(function*(We){if("auth/missing-recaptcha-token"!==We.code)return Promise.reject(We);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const rt=yield Ys(N,L,"getOobCode",!0);te(rt,_),yield bl(N,rt)}});return function(We){return he.apply(this,arguments)}}())}),Eo.apply(this,arguments)}function Ml(E,g){const _=Ui.parseLink(g);return"EMAIL_SIGNIN"===_?.operation}function uh(E,g,_){return pr.apply(this,arguments)}function pr(){return(pr=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E),N=Ia.credentialWithLink(g,_||It());return q(N._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Pl(T,N)})).apply(this,arguments)}function cu(){return(cu=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:createAuthUri",ce(E,g))})).apply(this,arguments)}function Np(E,g){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,m.Z)(function*(E,g){const T={identifier:g,continueUri:an()?It():"http://localhost"},{signinMethods:N}=yield function Rp(E,g){return cu.apply(this,arguments)}((0,G.m9)(E),T);return N||[]}),Wo.apply(this,arguments)}function lu(E,g){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,m.Z)(function*(E,g){const _=(0,G.m9)(E),N={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&Ta(_.auth,N,g);const{email:L}=yield function Cl(E,g){return nc.apply(this,arguments)}(_.auth,N);L!==E.email&&(yield E.reload())}),Rs.apply(this,arguments)}function Ol(E,g,_){return cc.apply(this,arguments)}function cc(){return cc=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};_&&Ta(T.auth,L,_);const{email:te}=yield function wr(E,g){return Br.apply(this,arguments)}(T.auth,L);te!==E.email&&(yield E.reload())}),cc.apply(this,arguments)}function lh(){return(lh=(0,m.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function n_(E,g){return dh.apply(this,arguments)}function dh(){return dh=(0,m.Z)(function*(E,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const T=(0,G.m9)(E),L={idToken:yield T.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield Kt(T,function ch(E,g){return lh.apply(this,arguments)}(T.auth,L));T.displayName=te.displayName||null,T.photoURL=te.photoUrl||null;const he=T.providerData.find(({providerId:We})=>"password"===We);he&&(he.displayName=T.displayName,he.photoURL=T.photoURL),yield T._updateTokensIfNecessary(te)}),dh.apply(this,arguments)}function Pp(E,g){return du((0,G.m9)(E),g,null)}function hh(E,g){return du((0,G.m9)(E),null,g)}function du(E,g,_){return fh.apply(this,arguments)}function fh(){return(fh=(0,m.Z)(function*(E,g,_){const{auth:T}=E,L={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(L.email=g),_&&(L.password=_);const te=yield Kt(E,Ju(T,L));yield E._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class hu{constructor(g,_,T={}){this.isNewUser=g,this.providerId=_,this.profile=T}}class ph extends hu{constructor(g,_,T,N){super(g,_,T),this.username=N}}class dc extends hu{constructor(g,_){super(g,"facebook.com",_)}}class Ll extends ph{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class gh extends hu{constructor(g,_){super(g,"google.com",_)}}class hc extends ph{constructor(g,_,T){super(g,"twitter.com",_,T)}}function fu(E){const{user:g,_tokenResponse:_}=E;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function lc(E){var g,_;if(!E)return null;const{providerId:T}=E,N=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},L=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!T&&E?.idToken){const te=null===(_=null===(g=At(E.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new hu(L,"anonymous"!==te&&"custom"!==te?te:null)}if(!T)return null;switch(T){case"facebook.com":return new dc(L,N);case"github.com":return new Ll(L,N);case"google.com":return new gh(L,N);case"twitter.com":return new hc(L,N,E.screenName||null);case"custom":case"anonymous":return new hu(L,null);default:return new hu(L,T,N)}}(_)}class gs{constructor(g,_,T){this.type=g,this.credential=_,this.auth=T}static _fromIdtoken(g,_){return new gs("enroll",g,_)}static _fromMfaPendingCredential(g){return new gs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,T;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return gs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(T=g.multiFactorSession)&&void 0!==T&&T.idToken)return gs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ca{constructor(g,_,T){this.session=g,this.hints=_,this.signInResolver=T}static _fromError(g,_){const T=Xn(g),N=_.customData._serverResponse,L=(N.mfaInfo||[]).map(he=>fs._fromServerResponse(T,he));q(N.mfaPendingCredential,T,"internal-error");const te=gs._fromMfaPendingCredential(N.mfaPendingCredential);return new Ca(te,L,function(){var he=(0,m.Z)(function*(We){const rt=yield We._process(T,te);delete N.mfaInfo,delete N.mfaPendingCredential;const wt=Object.assign(Object.assign({},N),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(_.operationType){case"signIn":const Jt=yield Jr._fromIdTokenResponse(T,_.operationType,wt);return yield T._updateCurrentUser(Jt.user),Jt;case"reauthenticate":return q(_.user,T,"internal-error"),Jr._forOperation(_.user,_.operationType,wt);default:oe(T,"internal-error")}});return function(We){return he.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,m.Z)(function*(){return _.signInResolver(g)})()}}function gu(E,g){var _;const T=(0,G.m9)(E),N=g;return q(g.customData.operationType,T,"argument-error"),q(null===(_=N.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,T,"argument-error"),Ca._fromError(T,N)}class gc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(T=>fs._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new gc(g)}getSession(){var g=this;return(0,m.Z)(function*(){return gs._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var T=this;return(0,m.Z)(function*(){const N=g,L=yield T.getSession(),te=yield Kt(T.user,N._process(T.user.auth,L,_));return yield T.user._updateTokensIfNecessary(te),T.user.reload()})()}unenroll(g){var _=this;return(0,m.Z)(function*(){const T="string"==typeof g?g:g.uid,N=yield _.user.getIdToken();try{const L=yield Kt(_.user,function _h(E,g){return Se(E,"POST","/v2/accounts/mfaEnrollment:withdraw",ce(E,g))}(_.user.auth,{idToken:N,mfaEnrollmentId:T}));_.enrolledFactors=_.enrolledFactors.filter(({uid:te})=>te!==T),yield _.user._updateTokensIfNecessary(L),yield _.user.reload()}catch(L){throw L}})()}}const En=new WeakMap;function _u(E){const g=(0,G.m9)(E);return En.has(g)||En.set(g,gc._fromUser(g)),En.get(g)}const Ns="__sak";class hi{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ns,"1"),this.storage.removeItem(Ns),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const jl=(()=>{class E extends hi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,T)=>this.onStorageEvent(_,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function o_(){const E=(0,G.z$)();return V(E)||ot(E)}()&&function Ii(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ht(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const T of Object.keys(this.listeners)){const N=this.storage.getItem(T),L=this.localCache[T];N!==L&&_(T,L,N)}}onStorageEvent(_,T=!1){if(!_.key)return void this.forAllChangedKeys((he,We,rt)=>{this.notifyListeners(he,rt)});const N=_.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(N);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(N,_.newValue):this.storage.removeItem(N);else if(this.localCache[N]===_.newValue&&!T)return}const L=()=>{const he=this.storage.getItem(N);!T&&this.localCache[N]===he||this.notifyListeners(N,he)},te=this.storage.getItem(N);!function bn(){return(0,G.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,T){this.localCache[_]=T;const N=this.listeners[_];if(N)for(const L of Array.from(N))L(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,T,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:T,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(T)}_removeListener(_,T){this.listeners[_]&&(this.listeners[_].delete(T),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,T){var N=()=>super._set,L=this;return(0,m.Z)(function*(){yield N().call(L,_,T),L.localCache[_]=JSON.stringify(T)})()}_get(_){var T=()=>super._get,N=this;return(0,m.Z)(function*(){const L=yield T().call(N,_);return N.localCache[_]=JSON.stringify(L),L})()}_remove(_){var T=()=>super._remove,N=this;return(0,m.Z)(function*(){yield T().call(N,_),delete N.localCache[_]})()}}return E.type="LOCAL",E})(),mc=(()=>{class E extends hi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,T){}_removeListener(_,T){}}return E.type="SESSION",E})();let Mp=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const T=this.receivers.find(L=>L.isListeningto(_));if(T)return T;const N=new E(_);return this.receivers.push(N),N}isListeningto(_){return this.eventTarget===_}handleEvent(_){var T=this;return(0,m.Z)(function*(){const N=_,{eventId:L,eventType:te,data:he}=N.data,We=T.handlersMap[te];if(!We?.size)return;N.ports[0].postMessage({status:"ack",eventId:L,eventType:te});const rt=Array.from(We).map(function(){var Jt=(0,m.Z)(function*(Di){return Di(N.origin,he)});return function(Di){return Jt.apply(this,arguments)}}()),wt=yield function Ko(E){return Promise.all(E.map(function(){var g=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(T){return{fulfilled:!1,reason:T}}});return function(_){return g.apply(this,arguments)}}()))}(rt);N.ports[0].postMessage({status:"done",eventId:L,eventType:te,response:wt})})()}_subscribe(_,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(T)}_unsubscribe(_,T){this.handlersMap[_]&&T&&this.handlersMap[_].delete(T),(!T||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Zo(E="",g=10){let _="";for(let T=0;T<g;T++)_+=Math.floor(10*Math.random());return E+_}class a_{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,T=50){var N=this;return(0,m.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let te,he;return new Promise((We,rt)=>{const wt=Zo("",20);L.port1.start();const Jt=setTimeout(()=>{rt(new Error("unsupported_event"))},T);he={messageChannel:L,onMessage(Di){const ss=Di;if(ss.data.eventId===wt)switch(ss.data.status){case"ack":clearTimeout(Jt),te=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),We(ss.data.response);break;default:clearTimeout(Jt),clearTimeout(te),rt(new Error("invalid_response"))}}},N.handlers.add(he),L.port1.addEventListener("message",he.onMessage),N.target.postMessage({eventType:g,eventId:wt,data:_},[L.port2])}).finally(()=>{he&&N.removeMessageHandler(he)})})()}}function br(){return window}function vh(){return typeof br().WorkerGlobalScope<"u"&&"function"==typeof br().importScripts}function _c(){return(_c=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Dr="firebaseLocalStorageDb",gr="firebaseLocalStorage",wo="fbase_key";class Da{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function $l(E,g){return E.transaction([gr],g?"readwrite":"readonly").objectStore(gr)}function Ih(){const E=indexedDB.open(Dr,1);return new Promise((g,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const T=E.result;try{T.createObjectStore(gr,{keyPath:wo})}catch(N){_(N)}}),E.addEventListener("success",(0,m.Z)(function*(){const T=E.result;T.objectStoreNames.contains(gr)?g(T):(T.close(),yield function Lp(){const E=indexedDB.deleteDatabase(Dr);return new Da(E).toPromise()}(),g(yield Ih()))}))})}function Eh(E,g,_){return Me.apply(this,arguments)}function Me(){return(Me=(0,m.Z)(function*(E,g,_){const T=$l(E,!0).put({[wo]:g,value:_});return new Da(T).toPromise()})).apply(this,arguments)}function $i(){return($i=(0,m.Z)(function*(E,g){const _=$l(E,!1).get(g),T=yield new Da(_).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Hl(E,g){const _=$l(E,!0).delete(g);return new Da(_).toPromise()}const Ps=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield Ih()),_.db})()}_withRetries(_){var T=this;return(0,m.Z)(function*(){let N=0;for(;;)try{const L=yield T._openDb();return yield _(L)}catch(L){if(N++>3)throw L;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return vh()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=Mp._getInstance(function yc(){return vh()?self:null}()),_.receiver._subscribe("keyChanged",function(){var T=(0,m.Z)(function*(N,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(N,L){return T.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var T=(0,m.Z)(function*(N,L){return["keyChanged"]});return function(N,L){return T.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var T,N;if(_.activeServiceWorker=yield function Pt(){return _c.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new a_(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);L&&null!==(T=L[0])&&void 0!==T&&T.fulfilled&&null!==(N=L[0])&&void 0!==N&&N.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var T=this;return(0,m.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function u_(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:_},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ih();return yield Eh(_,Ns,"1"),yield Hl(_,Ns),!0}catch{}return!1})()}_withPendingWrite(_){var T=this;return(0,m.Z)(function*(){T.pendingWrites++;try{yield _()}finally{T.pendingWrites--}})()}_set(_,T){var N=this;return(0,m.Z)(function*(){return N._withPendingWrite((0,m.Z)(function*(){return yield N._withRetries(L=>Eh(L,_,T)),N.localCache[_]=T,N.notifyServiceWorker(_)}))})()}_get(_){var T=this;return(0,m.Z)(function*(){const N=yield T._withRetries(L=>function sn(E,g){return $i.apply(this,arguments)}(L,_));return T.localCache[_]=N,N})()}_remove(_){var T=this;return(0,m.Z)(function*(){return T._withPendingWrite((0,m.Z)(function*(){return yield T._withRetries(N=>Hl(N,_)),delete T.localCache[_],T.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const T=yield _._withRetries(te=>{const he=$l(te,!1).getAll();return new Da(he).toPromise()});if(!T)return[];if(0!==_.pendingWrites)return[];const N=[],L=new Set;for(const{fbase_key:te,value:he}of T)L.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(he)&&(_.notifyListeners(te,he),N.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!L.has(te)&&(_.notifyListeners(te,null),N.push(te));return N})()}notifyListeners(_,T){this.localCache[_]=T;const N=this.listeners[_];if(N)for(const L of Array.from(N))L(T)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(T)}_removeListener(_,T){this.listeners[_]&&(this.listeners[_].delete(T),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),Gr=1e12;class xs{constructor(g){this.auth=g,this.counter=Gr,this._widgets=new Map}render(g,_){const T=this.counter;return this._widgets.set(T,new Th(g,this.auth.name,_||{})),this.counter++,T}reset(g){var _;const T=g||Gr;null===(_=this._widgets.get(T))||void 0===_||_.delete(),this._widgets.delete(T)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Gr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,m.Z)(function*(){var T;return null===(T=_._widgets.get(g||Gr))||void 0===T||T.execute(),""})()}}class Th{constructor(g,_,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof g?document.getElementById(g):g;q(N,"argument-error",{appName:_}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Yo(E){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<E;T++)g.push(_.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ks=Zs("rcb"),c_=new wn(3e4,6e4);class Ic{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=br().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return q(function l_(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),g,"argument-error"),this.shouldResolveImmediately(_)&&rn(br().grecaptcha)?Promise.resolve(br().grecaptcha):new Promise((T,N)=>{const L=br().setTimeout(()=>{N(De(g,"network-request-failed"))},c_.get());br()[ks]=()=>{br().clearTimeout(L),delete br()[ks];const he=br().grecaptcha;if(!he||!rn(he))return void N(De(g,"internal-error"));const We=he.render;he.render=(rt,wt)=>{const Jt=We(rt,wt);return this.counter++,Jt},this.hostLanguage=_,T(he)},Yu(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:ks,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),N(De(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=br().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ec{load(g){return(0,m.Z)(function*(){return new xs(g)})()}clearedOneInstance(){}}const Wl="recaptcha",ql={theme:"light",type:"image"};class bh{constructor(g,_=Object.assign({},ql),T){this.parameters=_,this.type=Wl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(T),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof g?document.getElementById(g):g;q(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ec:new Ic,this.validateStartingState()}verify(){var g=this;return(0,m.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(_)||new Promise(L=>{const te=he=>{he&&(g.tokenChangeListeners.delete(te),L(he))};g.tokenChangeListeners.add(te),g.isInvisible&&T.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(T=>T(_)),"function"==typeof g)g(_);else if("string"==typeof g){const T=br()[g];"function"==typeof T&&T(_)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,m.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const T=document.createElement("div");_.appendChild(T),_=T}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,m.Z)(function*(){q(an()&&!vh(),g.auth,"internal-error"),yield function Dh(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Ks(E){return Ss.apply(this,arguments)}(g.auth);q(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kl{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Rt._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Wn(E,g,_){return is.apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(E,g,_){const T=Xn(E),N=yield To(T,g,(0,G.m9)(_));return new Kl(N,L=>Pl(T,L))})).apply(this,arguments)}function Et(E,g,_){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E);yield zo(!1,T,"phone");const N=yield To(T.auth,g,(0,G.m9)(_));return new Kl(N,L=>Tp(T,L))})).apply(this,arguments)}function Dn(E,g,_){return to.apply(this,arguments)}function to(){return(to=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E),N=yield To(T.auth,g,(0,G.m9)(_));return new Kl(N,L=>zn(T,L))})).apply(this,arguments)}function To(E,g,_){return qn.apply(this,arguments)}function qn(){return qn=(0,m.Z)(function*(E,g,_){var T;const N=yield _.verify();try{let L;if(q("string"==typeof N,E,"argument-error"),q(_.type===Wl,E,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const te=L.session;if("phoneNumber"in L)return q("enroll"===te.type,E,"internal-error"),(yield function mh(E,g){return Se(E,"POST","/v2/accounts/mfaEnrollment:start",ce(E,g))}(E,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{q("signin"===te.type,E,"internal-error");const he=(null===(T=L.multiFactorHint)||void 0===T?void 0:T.uid)||L.multiFactorUid;return q(he,E,"missing-multi-factor-info"),(yield function wh(E,g){return Se(E,"POST","/v2/accounts/mfaSignIn:start",ce(E,g))}(E,{mfaPendingCredential:te.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield function Ut(E,g){return Mn.apply(this,arguments)}(E,{phoneNumber:L.phoneNumber,recaptchaToken:N});return te}}finally{_._reset()}}),qn.apply(this,arguments)}function vt(E,g){return ms.apply(this,arguments)}function ms(){return(ms=(0,m.Z)(function*(E,g){yield ji((0,G.m9)(E),g)})).apply(this,arguments)}let Kn=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Xn(_)}verifyPhoneNumber(_,T){return To(this.auth,_,(0,G.m9)(T))}static credential(_,T){return Rt._fromVerification(_,T)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:T,temporaryProof:N}=_;return T&&N?Rt._fromTokenResponse(T,N):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Ms(E,g){return g?Be(g):(q(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class wc extends iu{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return mo(g,this._buildIdpRequest())}_linkToIdToken(g,_){return mo(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return mo(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Os(E){return Nl(E.auth,new wc(E),E.bypassAuthState)}function vu(E){const{auth:g,user:_}=E;return q(_,g,"internal-error"),sh(_,new wc(E),E.bypassAuthState)}function kr(E){return er.apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(E){const{auth:g,user:_}=E;return q(_,g,"internal-error"),ji(_,new wc(E),E.bypassAuthState)})).apply(this,arguments)}class ii{constructor(g,_,T,N,L=!1){this.auth=g,this.resolver=T,this.user=N,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,m.Z)(function*(T,N){g.pendingPromise={resolve:T,reject:N};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(T,N){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,m.Z)(function*(){const{urlResponse:T,sessionId:N,postBody:L,tenantId:te,error:he,type:We}=g;if(he)return void _.reject(he);const rt={auth:_.auth,requestUri:T,sessionId:N,tenantId:te||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(We)(rt))}catch(wt){_.reject(wt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Os;case"linkViaPopup":case"linkViaRedirect":return kr;case"reauthViaPopup":case"reauthViaRedirect":return vu;default:oe(this.auth,"internal-error")}}resolve(g){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const si=new wn(2e3,1e4);function fi(E,g,_){return _s.apply(this,arguments)}function _s(){return(_s=(0,m.Z)(function*(E,g,_){const T=Xn(E);Ce(E,g,Vi);const N=Ms(T,_);return new Co(T,"signInViaPopup",g,N).executeNotNull()})).apply(this,arguments)}function Tc(E,g,_){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E);Ce(T.auth,g,Vi);const N=Ms(T.auth,_);return new Co(T.auth,"reauthViaPopup",g,N,T).executeNotNull()})).apply(this,arguments)}function Qo(E,g,_){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E);Ce(T.auth,g,Vi);const N=Ms(T.auth,_);return new Co(T.auth,"linkViaPopup",g,N,T).executeNotNull()})).apply(this,arguments)}let Co=(()=>{class E extends ii{constructor(_,T,N,L,te){super(_,T,L,te),this.provider=N,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const T=yield _.execute();return q(T,_.auth,"internal-error"),T})()}onExecution(){var _=this;return(0,m.Z)(function*(){Ge(1===_.filter.length,"Popup operations only handle one event");const T=Zo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],T),_.authWindow.associatedEvent=T,_.resolver._originValidation(_.auth).catch(N=>{_.reject(N)}),_.resolver._isIframeWebStorageSupported(_.auth,N=>{N||_.reject(De(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var T,N;this.pollId=null!==(N=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==N&&N.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,si.get())};_()}}return E.currentPopupAction=null,E})();const Sh="pendingRedirect",Ci=new Map;class Vt extends ii{constructor(g,_,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,m.Z)(function*(){let T=Ci.get(_.auth._key());if(!T){try{const L=(yield function Ah(E,g){return no.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;T=()=>Promise.resolve(L)}catch(N){T=()=>Promise.reject(N)}Ci.set(_.auth._key(),T)}return _.bypassAuthState||Ci.set(_.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,T=this;return(0,m.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(T,g);if("unknown"!==g.type){if(g.eventId){const N=yield T.auth._redirectUserForId(g.eventId);if(N)return T.user=N,_().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function no(){return(no=(0,m.Z)(function*(E,g){const _=yI(g),T=f_(E);if(!(yield T._isAvailable()))return!1;const N="true"===(yield T._get(_));return yield T._remove(_),N})).apply(this,arguments)}function Iu(E,g){return d_.apply(this,arguments)}function d_(){return(d_=(0,m.Z)(function*(E,g){return f_(E)._set(yI(g),"true")})).apply(this,arguments)}function h_(){Ci.clear()}function Zl(E,g){Ci.set(E._key(),g)}function f_(E){return Be(E._redirectPersistence)}function yI(E){return dn(Sh,E.config.apiKey,E.name)}function Cc(E,g,_){return function Aa(E,g,_){return Rh.apply(this,arguments)}(E,g,_)}function Rh(){return(Rh=(0,m.Z)(function*(E,g,_){const T=Xn(E);Ce(E,g,Vi),yield T._initializationPromise;const N=Ms(T,_);return yield Iu(N,T),N._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function bc(E,g,_){return function Nh(E,g,_){return Eu.apply(this,arguments)}(E,g,_)}function Eu(){return(Eu=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E);Ce(T.auth,g,Vi),yield T.auth._initializationPromise;const N=Ms(T.auth,_);yield Iu(N,T.auth);const L=yield k(T);return N._openRedirect(T.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function vI(E,g,_){return function Up(E,g,_){return Ph.apply(this,arguments)}(E,g,_)}function Ph(){return(Ph=(0,m.Z)(function*(E,g,_){const T=(0,G.m9)(E);Ce(T.auth,g,Vi),yield T.auth._initializationPromise;const N=Ms(T.auth,_);yield zo(!1,T,g.providerId),yield Iu(N,T.auth);const L=yield k(T);return N._openRedirect(T.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function p_(E,g){return J.apply(this,arguments)}function J(){return(J=(0,m.Z)(function*(E,g){return yield Xn(E)._initializationPromise,on(E,g,!1)})).apply(this,arguments)}function on(E,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(E,g,_=!1){const T=Xn(E),N=Ms(T,g),te=yield new Vt(T,N,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield T._persistUserIfCurrent(te.user),yield T._setRedirectUser(null,g)),te})).apply(this,arguments)}function k(E){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,m.Z)(function*(E){const g=Zo(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class Xo{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(_=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Sc(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return On(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var T;if(g.error&&!On(g)){const N=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";_.onError(De(this.auth,N))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const T=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dc(g))}saveEventToCache(g){this.cachedEventUids.add(Dc(g)),this.lastProcessedEventTime=Date.now()}}function Dc(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function On({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===g?.code}function Do(E){return So.apply(this,arguments)}function So(){return(So=(0,m.Z)(function*(E,g={}){return Se(E,"GET","/v1/projects",g)})).apply(this,arguments)}const g_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yl=/^https?/;function Ac(){return(Ac=(0,m.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield Do(E);for(const _ of g)try{if(xh(_))return}catch{}oe(E,"unauthorized-domain")})).apply(this,arguments)}function xh(E){const g=It(),{protocol:_,hostname:T}=new URL(g);if(E.startsWith("chrome-extension://")){const te=new URL(E);return""===te.hostname&&""===T?"chrome-extension:"===_&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===T}if(!Yl.test(_))return!1;if(g_.test(E))return T===E;const N=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(T)}const Jo=new wn(3e4,6e4);function ea(){const E=br().___jsl;if(E?.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let un=null;const Rc=new wn(5e3,15e3),ys="__/auth/iframe",Nc="emulator/auth/iframe",Pc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Na=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pa(E){const g=E.config;q(g.authDomain,E,"auth-domain-config-required");const _=g.emulator?xr(g,Nc):`https://${E.config.authDomain}/${ys}`,T={apiKey:g.apiKey,appName:E.name,v:O.SDK_VERSION},N=Na.get(E.config.apiHost);N&&(T.eid=N);const L=E._getFrameworks();return L.length&&(T.fw=L.join(",")),`${_}?${(0,G.xO)(T).slice(1)}`}function ro(){return ro=(0,m.Z)(function*(E){const g=yield function Fs(E){return un=un||function Vp(E){return new Promise((g,_)=>{var T,N,L;function te(){ea(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ea(),_(De(E,"network-request-failed"))},timeout:Jo.get()})}if(null!==(N=null===(T=br().gapi)||void 0===T?void 0:T.iframes)&&void 0!==N&&N.Iframe)g(gapi.iframes.getContext());else{if(null===(L=br().gapi)||void 0===L||!L.load){const he=Zs("iframefcb");return br()[he]=()=>{gapi.load?te():_(De(E,"network-request-failed"))},Yu(`https://apis.google.com/js/api.js?onload=${he}`).catch(We=>_(We))}te()}}).catch(g=>{throw un=null,g})}(E),un}(E),_=br().gapi;return q(_,E,"internal-error"),g.open({where:document.body,url:Pa(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pc,dontclear:!0},T=>new Promise(function(){var N=(0,m.Z)(function*(L,te){yield T.restyle({setHideOnLeave:!1});const he=De(E,"network-request-failed"),We=br().setTimeout(()=>{te(he)},Rc.get());function rt(){br().clearTimeout(We),L(T)}T.ping(rt).then(rt,()=>{te(he)})});return function(L,te){return N.apply(this,arguments)}}()))}),ro.apply(this,arguments)}const w={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class re{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xe="__/auth/handler",yt="emulator/auth/handler",Ot=encodeURIComponent("fac");function Nt(E,g,_,T,N,L){return pi.apply(this,arguments)}function pi(){return(pi=(0,m.Z)(function*(E,g,_,T,N,L){q(E.config.authDomain,E,"auth-domain-config-required"),q(E.config.apiKey,E,"invalid-api-key");const te={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:T,v:O.SDK_VERSION,eventId:N};if(g instanceof Vi){g.setDefaultLanguage(E.languageCode),te.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[wt,Jt]of Object.entries(L||{}))te[wt]=Jt}if(g instanceof di){const wt=g.getScopes().filter(Jt=>""!==Jt);wt.length>0&&(te.scopes=wt.join(","))}E.tenantId&&(te.tid=E.tenantId);const he=te;for(const wt of Object.keys(he))void 0===he[wt]&&delete he[wt];const We=yield E._getAppCheckToken(),rt=We?`#${Ot}=${encodeURIComponent(We)}`:"";return`${function Sr({config:E}){return E.emulator?xr(E,yt):`https://${E.authDomain}/${Xe}`}(E)}?${(0,G.xO)(he).slice(1)}${rt}`})).apply(this,arguments)}const Vn="webStorageSupport",Us=class ta{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mc,this._completeRedirectFn=on,this._overrideRedirectResult=Zl}_openPopup(g,_,T,N){var L=this;return(0,m.Z)(function*(){var te;Ge(null===(te=L.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const he=yield Nt(g,_,T,It(),N);return function Ie(E,g,_,T=500,N=600){const L=Math.max((window.screen.availHeight-N)/2,0).toString(),te=Math.max((window.screen.availWidth-T)/2,0).toString();let he="";const We=Object.assign(Object.assign({},w),{width:T.toString(),height:N.toString(),top:L,left:te}),rt=(0,G.z$)().toLowerCase();_&&(he=M(rt)?"_blank":_),U(rt)&&(g=g||"http://localhost",We.scrollbars="yes");const wt=Object.entries(We).reduce((Di,[ss,kc])=>`${Di}${ss}=${kc},`,"");if(function Lt(E=(0,G.z$)()){var g;return ot(E)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(rt)&&"_self"!==he)return function nt(E,g){const _=document.createElement("a");_.href=E,_.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(T)}(g||"",he),new re(null);const Jt=window.open(g||"",he,wt);q(Jt,E,"popup-blocked");try{Jt.focus()}catch{}return new re(Jt)}(g,he,Zo())})()}_openRedirect(g,_,T,N){var L=this;return(0,m.Z)(function*(){return yield L._originValidation(g),function ba(E){br().location.href=E}(yield Nt(g,_,T,It(),N)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:N,promise:L}=this.eventManagers[_];return N?Promise.resolve(N):(Ge(L,"If manager is not set, promise should be"),L)}const T=this.initAndGetManager(g);return this.eventManagers[_]={promise:T},T.catch(()=>{delete this.eventManagers[_]}),T}initAndGetManager(g){var _=this;return(0,m.Z)(function*(){const T=yield function xa(E){return ro.apply(this,arguments)}(g),N=new Xo(g);return T.register("authEvent",L=>(q(L?.authEvent,g,"invalid-auth-event"),{status:N.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:N},_.iframes[g._key()]=T,N})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Vn,{type:Vn},N=>{var L;const te=null===(L=N?.[0])||void 0===L?void 0:L[Vn];void 0!==te&&_(!!te),oe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ra(E){return Ac.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ht()||V()||ot()}};class Gi{constructor(g){this.factorId=g}_process(g,_,T){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,T);case"signin":return this._finalizeSignIn(g,_.credential);default:return Pe("unexpected MultiFactorSessionType")}}}class Zn extends Gi{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Zn(g)}_finalizeEnroll(g,_,T){return function mu(E,g){return Se(E,"POST","/v2/accounts/mfaEnrollment:finalize",ce(E,g))}(g,{idToken:_,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Gl(E,g){return Se(E,"POST","/v2/accounts/mfaSignIn:finalize",ce(E,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let na=(()=>{class E{constructor(){}static assertion(_){return Zn._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var II="@firebase/auth";class DC{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(T=>{g(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,G.Pz)("authIdTokenMaxAge"),function Ql(E){(0,O._registerComponent)(new ve.wA("auth",(g,{options:_})=>{const T=g.getProvider("app").getImmediate(),N=g.getProvider("heartbeat"),L=g.getProvider("app-check-internal"),{apiKey:te,authDomain:he}=T.options;q(te&&!te.includes(":"),"invalid-api-key",{appName:T.name});const We={apiKey:te,authDomain:he,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vo(E)},rt=new Qu(T,N,L,We);return function Jm(E,g){const _=g?.persistence||[],T=(Array.isArray(_)?_:[_]).map(Be);g?.errorMap&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(T,g?.popupRedirectResolver)}(rt,_),rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,T)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ve.wA("auth-internal",g=>{const _=Xn(g.getProvider("auth").getImmediate());return new DC(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(II,"0.23.2",function bi(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,O.registerVersion)(II,"0.23.2","esm2017")}("Browser")},9058:(pt,Ae,F)=>{F.d(Ae,{$s:()=>Be,BH:()=>de,DV:()=>Gn,Dv:()=>ci,G6:()=>xr,GJ:()=>Cn,L:()=>me,LL:()=>je,P0:()=>ht,Pz:()=>De,Sg:()=>Ce,UG:()=>Pe,UI:()=>lr,US:()=>ve,Wj:()=>Wt,Wl:()=>St,Yr:()=>wn,ZB:()=>se,ZR:()=>Se,aH:()=>oe,b$:()=>an,cI:()=>cn,dS:()=>vi,eu:()=>ge,g5:()=>O,gK:()=>nn,gQ:()=>Mt,h$:()=>Re,hl:()=>ue,hu:()=>G,jU:()=>Ge,lb:()=>Nn,m9:()=>dn,ne:()=>Kt,p$:()=>K,pd:()=>At,r3:()=>ln,ru:()=>It,tV:()=>H,uI:()=>q,ug:()=>Li,vZ:()=>Un,w1:()=>An,w9:()=>Fn,xO:()=>ts,xb:()=>ui,z$:()=>Ue,zI:()=>_e,zd:()=>Tt});const m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},G=function(W,z){if(!W)throw O(z)},O=function(W){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+W)},ee=function(W){const z=[];let U=0;for(let V=0;V<W.length;V++){let M=W.charCodeAt(V);M<128?z[U++]=M:M<2048?(z[U++]=M>>6|192,z[U++]=63&M|128):55296==(64512&M)&&V+1<W.length&&56320==(64512&W.charCodeAt(V+1))?(M=65536+((1023&M)<<10)+(1023&W.charCodeAt(++V)),z[U++]=M>>18|240,z[U++]=M>>12&63|128,z[U++]=M>>6&63|128,z[U++]=63&M|128):(z[U++]=M>>12|224,z[U++]=M>>6&63|128,z[U++]=63&M|128)}return z},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,z){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let M=0;M<W.length;M+=3){const ne=W[M],Ne=M+1<W.length,qe=Ne?W[M+1]:0,xt=M+2<W.length,ot=xt?W[M+2]:0;let bn=(15&qe)<<2|ot>>6,Ht=63&ot;xt||(Ht=64,Ne||(bn=64)),V.push(U[ne>>2],U[(3&ne)<<4|qe>>4],U[bn],U[Ht])}return V.join("")},encodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(W):this.encodeByteArray(ee(W),z)},decodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(W):function(W){const z=[];let U=0,V=0;for(;U<W.length;){const M=W[U++];if(M<128)z[V++]=String.fromCharCode(M);else if(M>191&&M<224){const ne=W[U++];z[V++]=String.fromCharCode((31&M)<<6|63&ne)}else if(M>239&&M<365){const xt=((7&M)<<18|(63&W[U++])<<12|(63&W[U++])<<6|63&W[U++])-65536;z[V++]=String.fromCharCode(55296+(xt>>10)),z[V++]=String.fromCharCode(56320+(1023&xt))}else{const ne=W[U++],Ne=W[U++];z[V++]=String.fromCharCode((15&M)<<12|(63&ne)<<6|63&Ne)}}return z.join("")}(this.decodeStringToByteArray(W,z))},decodeStringToByteArray(W,z){this.init_();const U=z?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let M=0;M<W.length;){const ne=U[W.charAt(M++)],qe=M<W.length?U[W.charAt(M)]:0;++M;const ot=M<W.length?U[W.charAt(M)]:64;++M;const Lt=M<W.length?U[W.charAt(M)]:64;if(++M,null==ne||null==qe||null==ot||null==Lt)throw new Ee;V.push(ne<<2|qe>>4),64!==ot&&(V.push(qe<<4&240|ot>>2),64!==Lt&&V.push(ot<<6&192|Lt))}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Re=function(W){const z=ee(W);return ve.encodeByteArray(z,!0)},me=function(W){return Re(W).replace(/\./g,"")},H=function(W){try{return ve.decodeString(W,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function K(W){return se(void 0,W)}function se(W,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return z}for(const U in z)!z.hasOwnProperty(U)||!Ve(U)||(W[U]=se(W[U],z[U]));return W}function Ve(W){return"__proto__"!==W}const ke=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=W&&H(W[1]);return z&&JSON.parse(z)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},ht=W=>{const z=(W=>{var z,U;return null===(U=null===(z=ke())||void 0===z?void 0:z.emulatorHosts)||void 0===U?void 0:U[W]})(W);if(!z)return;const U=z.lastIndexOf(":");if(U<=0||U+1===z.length)throw new Error(`Invalid host ${z} with no separate hostname and port!`);const V=parseInt(z.substring(U+1),10);return"["===z[0]?[z.substring(1,U-1),V]:[z.substring(0,U),V]},oe=()=>{var W;return null===(W=ke())||void 0===W?void 0:W.config},De=W=>{var z;return null===(z=ke())||void 0===z?void 0:z[`_${W}`]};class de{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,U)=>{this.resolve=z,this.reject=U})}wrapCallback(z){return(U,V)=>{U?this.reject(U):this.resolve(V),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(U):z(U,V))}}}function Ce(W,z){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const V=z||"demo-project",M=W.iat||0,ne=W.sub||W.user_id;if(!ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${V}`,aud:V,iat:M,exp:M+3600,auth_time:M,sub:ne,user_id:ne,firebase:{sign_in_provider:"custom",identities:{}}},W);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(Ne)),""].join(".")}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function q(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Pe(){var W;const z=null===(W=ke())||void 0===W?void 0:W.forceEnvironment;if("node"===z)return!0;if("browser"===z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ge(){return"object"==typeof self&&self.self===self}function It(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function an(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function An(){const W=Ue();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function wn(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN}function xr(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function ge(){return new Promise((W,z)=>{try{let U=!0;const V="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(V);M.onsuccess=()=>{M.result.close(),U||self.indexedDB.deleteDatabase(V),W(!0)},M.onupgradeneeded=()=>{U=!1},M.onerror=()=>{var ne;z((null===(ne=M.error)||void 0===ne?void 0:ne.message)||"")}}catch(U){z(U)}})}function _e(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Se extends Error{constructor(z,U,V){super(U),this.code=z,this.customData=V,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(z,U,V){this.service=z,this.serviceName=U,this.errors=V}create(z,...U){const V=U[0]||{},M=`${this.service}/${z}`,ne=this.errors[z],Ne=ne?function Ze(W,z){return W.replace(ze,(U,V)=>{const M=z[V];return null!=M?String(M):`<${V}?>`})}(ne,V):"Error";return new Se(M,`${this.serviceName}: ${Ne} (${M}).`,V)}}const ze=/\{\$([^}]+)}/g;function cn(W){return JSON.parse(W)}function St(W){return JSON.stringify(W)}const Qt=function(W){let z={},U={},V={},M="";try{const ne=W.split(".");z=cn(H(ne[0])||""),U=cn(H(ne[1])||""),M=ne[2],V=U.d||{},delete U.d}catch{}return{header:z,claims:U,data:V,signature:M}},Fn=function(W){const U=Qt(W).claims;return!!U&&"object"==typeof U&&U.hasOwnProperty("iat")},Cn=function(W){const z=Qt(W).claims;return"object"==typeof z&&!0===z.admin};function ln(W,z){return Object.prototype.hasOwnProperty.call(W,z)}function Gn(W,z){if(Object.prototype.hasOwnProperty.call(W,z))return W[z]}function ui(W){for(const z in W)if(Object.prototype.hasOwnProperty.call(W,z))return!1;return!0}function lr(W,z,U){const V={};for(const M in W)Object.prototype.hasOwnProperty.call(W,M)&&(V[M]=z.call(U,W[M],M,W));return V}function Un(W,z){if(W===z)return!0;const U=Object.keys(W),V=Object.keys(z);for(const M of U){if(!V.includes(M))return!1;const ne=W[M],Ne=z[M];if(jn(ne)&&jn(Ne)){if(!Un(ne,Ne))return!1}else if(ne!==Ne)return!1}for(const M of V)if(!U.includes(M))return!1;return!0}function jn(W){return null!==W&&"object"==typeof W}function ts(W){const z=[];for(const[U,V]of Object.entries(W))Array.isArray(V)?V.forEach(M=>{z.push(encodeURIComponent(U)+"="+encodeURIComponent(M))}):z.push(encodeURIComponent(U)+"="+encodeURIComponent(V));return z.length?"&"+z.join("&"):""}function Tt(W){const z={};return W.replace(/^\?/,"").split("&").forEach(V=>{if(V){const[M,ne]=V.split("=");z[decodeURIComponent(M)]=decodeURIComponent(ne)}}),z}function At(W){const z=W.indexOf("?");if(!z)return"";const U=W.indexOf("#",z);return W.substring(z,U>0?U:void 0)}class Mt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,U){U||(U=0);const V=this.W_;if("string"==typeof z)for(let Lt=0;Lt<16;Lt++)V[Lt]=z.charCodeAt(U)<<24|z.charCodeAt(U+1)<<16|z.charCodeAt(U+2)<<8|z.charCodeAt(U+3),U+=4;else for(let Lt=0;Lt<16;Lt++)V[Lt]=z[U]<<24|z[U+1]<<16|z[U+2]<<8|z[U+3],U+=4;for(let Lt=16;Lt<80;Lt++){const bn=V[Lt-3]^V[Lt-8]^V[Lt-14]^V[Lt-16];V[Lt]=4294967295&(bn<<1|bn>>>31)}let ot,gn,M=this.chain_[0],ne=this.chain_[1],Ne=this.chain_[2],qe=this.chain_[3],xt=this.chain_[4];for(let Lt=0;Lt<80;Lt++){Lt<40?Lt<20?(ot=qe^ne&(Ne^qe),gn=1518500249):(ot=ne^Ne^qe,gn=1859775393):Lt<60?(ot=ne&Ne|qe&(ne|Ne),gn=2400959708):(ot=ne^Ne^qe,gn=3395469782);const bn=(M<<5|M>>>27)+ot+xt+gn+V[Lt]&4294967295;xt=qe,qe=Ne,Ne=4294967295&(ne<<30|ne>>>2),ne=M,M=bn}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+ne&4294967295,this.chain_[2]=this.chain_[2]+Ne&4294967295,this.chain_[3]=this.chain_[3]+qe&4294967295,this.chain_[4]=this.chain_[4]+xt&4294967295}update(z,U){if(null==z)return;void 0===U&&(U=z.length);const V=U-this.blockSize;let M=0;const ne=this.buf_;let Ne=this.inbuf_;for(;M<U;){if(0===Ne)for(;M<=V;)this.compress_(z,M),M+=this.blockSize;if("string"==typeof z){for(;M<U;)if(ne[Ne]=z.charCodeAt(M),++Ne,++M,Ne===this.blockSize){this.compress_(ne),Ne=0;break}}else for(;M<U;)if(ne[Ne]=z[M],++Ne,++M,Ne===this.blockSize){this.compress_(ne),Ne=0;break}}this.inbuf_=Ne,this.total_+=U}digest(){const z=[];let U=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&U,U/=256;this.compress_(this.buf_);let V=0;for(let M=0;M<5;M++)for(let ne=24;ne>=0;ne-=8)z[V]=this.chain_[M]>>ne&255,++V;return z}}function Kt(W,z){const U=new tr(W,z);return U.subscribe.bind(U)}class tr{constructor(z,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{z(this)}).catch(V=>{this.error(V)})}next(z){this.forEachObserver(U=>{U.next(z)})}error(z){this.forEachObserver(U=>{U.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,U,V){let M;if(void 0===z&&void 0===U&&void 0===V)throw new Error("Missing Observer.");M=function $t(W,z){if("object"!=typeof W||null===W)return!1;for(const U of z)if(U in W&&"function"==typeof W[U])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:U,complete:V},void 0===M.next&&(M.next=kn),void 0===M.error&&(M.error=kn),void 0===M.complete&&(M.complete=kn);const ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),ne}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,z)}sendOne(z,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{U(this.observers[z])}catch(V){typeof console<"u"&&console.error&&console.error(V)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const ci=function(W,z,U,V){let M;if(V<z?M="at least "+z:V>U&&(M=0===U?"none":"no more than "+U),M)throw new Error(W+" failed: Was called with "+V+(1===V?" argument.":" arguments.")+" Expects "+M+".")};function nn(W,z){return`${W} failed: ${z} argument `}function Wt(W,z,U,V){if((!V||U)&&"function"!=typeof U)throw new Error(nn(W,z)+"must be a valid function.")}function Nn(W,z,U,V){if((!V||U)&&("object"!=typeof U||null===U))throw new Error(nn(W,z)+"must be a valid context object.")}const vi=function(W){const z=[];let U=0;for(let V=0;V<W.length;V++){let M=W.charCodeAt(V);if(M>=55296&&M<=56319){const ne=M-55296;V++,G(V<W.length,"Surrogate pair missing trail surrogate."),M=65536+(ne<<10)+(W.charCodeAt(V)-56320)}M<128?z[U++]=M:M<2048?(z[U++]=M>>6|192,z[U++]=63&M|128):M<65536?(z[U++]=M>>12|224,z[U++]=M>>6&63|128,z[U++]=63&M|128):(z[U++]=M>>18|240,z[U++]=M>>12&63|128,z[U++]=M>>6&63|128,z[U++]=63&M|128)}return z},Li=function(W){let z=0;for(let U=0;U<W.length;U++){const V=W.charCodeAt(U);V<128?z++:V<2048?z+=2:V>=55296&&V<=56319?(z+=4,U++):z+=3}return z},Qn=1e3,ye=2,Y=144e5,Te=.5;function Be(W,z=Qn,U=ye){const V=z*Math.pow(U,W),M=Math.round(Te*V*(Math.random()-.5)*2);return Math.min(Y,V+M)}function dn(W){return W&&W._delegate?W._delegate:W}},4826:(pt,Ae,F)=>{var m=F(5879);let G=null;function O(){return G}class ae{}const ve=new m.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(me)},providedIn:"platform"})}return n})();const Re=new m.OlP("Location Initialized");let me=(()=>{class n extends Ee{constructor(){super(),this._doc=(0,m.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function H(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function K(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function se(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Ke)},providedIn:"root"})}return n})();const xe=new m.OlP("appBaseHref");let Ke=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return H(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+se(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+se(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+se(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(Ee),m.LFG(xe,8))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oe=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=H(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+se(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+se(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(Ee),m.LFG(xe,8))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ye=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function oe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(K(ht(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+se(r))}normalize(t){return n.stripTrailingSlash(function _t(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ht(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+se(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+se(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=se;static#t=this.joinWithSlash=H;static#n=this.stripTrailingSlash=K;static#r=this.\u0275fac=function(r){return new(r||n)(m.LFG(Ve))};static#i=this.\u0275prov=m.Yz7({token:n,factory:function(){return function ke(){return new Ye((0,m.LFG)(Ve))}()},providedIn:"root"})}return n})();function ht(n){return n.replace(/\/index.html$/,"")}let ma=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Jm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(m.s_b),m.Y36(m.Rgc))};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Jm{constructor(){this.$implicit=null,this.ngIf=null}}function nh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let nr=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({})}return n})();function Ui(n){return"server"===n}let di=(()=>{class n{static#e=this.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new yo((0,m.LFG)(ve),window)})}return n})();class yo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ic(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class gh extends ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class hc extends gh{static makeCurrent(){!function ee(n){G||(G=n)}(new hc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function r_(){return fu=fu||document.querySelector("base"),fu?fu.getAttribute("href"):null}();return null==t?null:function xp(n){Fl=Fl||document.createElement("a"),Fl.setAttribute("href",n);const e=Fl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function tu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Fl,fu=null,i_=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();const Vl=new m.OlP("EventManagerPlugins");let kp=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new m.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(Vl),m.LFG(m.R0b))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();class fc{constructor(e){this._doc=e}}const pu="ng-app-id";let pc=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ui(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${pu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(pu),a;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(pu,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,c=a.get(r)?.elements;c?c.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(ve),m.LFG(m.AFp),m.LFG(m.Ojb,8),m.LFG(m.Lbi))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();const gs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ca=/%COMP%/g,rs=new m.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function En(n,e){return e.map(t=>t.replace(Ca,n))}let _u=(()=>{class n{constructor(t,r,i,a,c,h,p,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=h,this.ngZone=p,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=Ui(h),this.defaultRenderer=new Ns(t,c,p,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===m.ifc.ShadowDom&&(r={...r,encapsulation:m.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof jl?i.applyToHost(t):i instanceof ri&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.doc,h=this.ngZone,p=this.eventManager,v=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case m.ifc.Emulated:a=new jl(p,v,r,this.appId,b,c,h,S);break;case m.ifc.ShadowDom:return new qo(p,v,t,r,c,h,this.nonce,S);default:a=new ri(p,v,r,b,c,h,S)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(kp),m.LFG(pc),m.LFG(m.AFp),m.LFG(rs),m.LFG(ve),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(m.Ojb))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();class Ns{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Bl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Bl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new m.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=gs[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=O().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Bl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qo extends Ns{constructor(e,t,r,i,a,c,h,p){super(e,a,c,p),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=En(i.id,i.styles);for(const b of v){const S=document.createElement("style");h&&S.setAttribute("nonce",h),S.textContent=b,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ri extends Ns{constructor(e,t,r,i,a,c,h,p){super(e,a,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=p?En(p,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class jl extends ri{constructor(e,t,r,i,a,c,h,p){const v=i+"-"+r.id;super(e,t,r,a,c,h,p,v),this.contentAttr=function _h(n){return"_ngcontent-%COMP%".replace(Ca,n)}(v),this.hostAttr=function gc(n){return"_nghost-%COMP%".replace(Ca,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let yh=(()=>{class n extends fc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(ve))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();const mc=["alt","control","meta","shift"],Ko={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zo=(()=>{class n extends fc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),mc.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),c+=v+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static matchEventFullKeyCode(t,r){let i=Ko[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),mc.forEach(c=>{c!==i&&(0,Mp[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(ve))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();const Dr=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Pt(){hc.makeCurrent()},multi:!0},{provide:ve,useFactory:function u_(){return(0,m.RDi)(document),document},deps:[]}]),Op=new m.OlP(""),gr=[{provide:m.rWj,useClass:class Ul{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new m.vHH(5103,!1);return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(p){c=c||p,a--,0==a&&r(c)};i.forEach(p=>{p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],wo=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function _c(){return new m.qLn},deps:[]},{provide:Vl,useClass:yh,multi:!0,deps:[ve,m.R0b,m.Lbi]},{provide:Vl,useClass:Zo,multi:!0,deps:[ve]},_u,pc,kp,{provide:m.FYo,useExisting:_u},{provide:class hs{},useClass:i_,deps:[]},[]];let Da=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(Op,12))};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({providers:[...wo,...gr],imports:[nr,m.hGG]})}return n})(),Me=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(ve))};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Eh(){return new Me((0,m.LFG)(ve))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var Wn=F(6304),is=F(8645),Et=F(2096),Hi=F(5592),Dn=F(2459),to=F(3019),To=F(3093),qn=F(4664),vt=F(7398),ms=F(4552);class Kn extends is.x{constructor(e=1/0,t=1/0,r=ms.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var Ms=F(3020);function wc(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Ms.B)({connector:()=>new Kn(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const vu=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var kr=F(9360),er=F(8251);function ii(n,e){return(0,kr.e)((t,r)=>{let i=0;t.subscribe((0,er.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var si=F(6232);function fi(n){return n<=0?()=>si.E:(0,kr.e)((e,t)=>{let r=0;e.subscribe((0,er.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _s(n){return(0,kr.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Tc(n=Sa){return(0,kr.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Sa(){return new vu}var Qo=F(2737);function Ls(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,a)=>n(i,a,r)):Qo.y,fi(1),t?_s(e):Tc(()=>new vu))}var Co=F(4674);function Sh(n,e){return(0,Co.m)(e)?(0,qn.w)(()=>n,e):(0,qn.w)(()=>n)}var Ci=F(5137),Vt=F(2793),Ah=F(4097);class Iu{constructor(){return(0,Ah.C6)()}}var J=F(5861),on=F(4303),rr=F(4537),k=F(9058),Mr=F(7879);const bo=new Map,Xo={activated:!1,tokenObservers:[]},Dc={initialized:!1,enabled:!1};function On(n){return bo.get(n)||Object.assign({},Xo)}function Do(){return Dc}const So="https://content-firebaseappcheck.googleapis.com/v1",Ra="exchangeDebugToken",Ac={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Jo{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,J.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function ea(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const un=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Rc(n){if(!On(n).activated)throw un.create("use-before-activation",{appName:n.name})}function Pc(n,e){return Na.apply(this,arguments)}function Na(){return(Na=(0,J.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,a)}catch(S){throw un.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw un.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw un.create("fetch-parse-error",{originalErrorMessage:S?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw un.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(p[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}})).apply(this,arguments)}function ro(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${So}/projects/${t}/apps/${r}:${Ra}?key=${i}`,body:{debug_token:e}}}const w="firebase-app-check-database",D=1,R="firebase-app-check-store";let Q=null;function Nt(){return(Nt=(0,J.Z)(function*(n,e){const r=(yield function re(){return Q||(Q=new Promise((n,e)=>{try{const t=indexedDB.open(w,D);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(un.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(R,{keyPath:"compositeKey"})}}catch(t){e(un.create("storage-open",{originalErrorMessage:t?.message}))}}),Q)}()).transaction(R,"readwrite"),a=r.objectStore(R).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=p=>{c()},r.onerror=p=>{var v;h(un.create("storage-set",{originalErrorMessage:null===(v=p.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const ta=new Mr.Yd("@firebase/app-check");function Zn(n,e){return(0,k.hl)()?function nt(n,e){return function Ot(n,e){return Nt.apply(this,arguments)}(function Vn(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ta.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ka(){return Do().enabled}function Ma(){return xc.apply(this,arguments)}function xc(){return(xc=(0,J.Z)(function*(){const n=Do();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const m_={error:"UNKNOWN_ERROR"};function DC(n){return k.US.encodeString(JSON.stringify(n),!1)}function bi(n){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,J.Z)(function*(n,e=!1){const t=n.app;Rc(t);const r=On(t);let a,i=r.token;if(i&&!_(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(_(p)?i=p:yield Zn(t,void 0))}if(!e&&i&&_(i))return{token:i.token};let h,c=!1;if(ka()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Pc(ro(t,yield Ma()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const p=yield r.exchangeTokenPromise;return yield Zn(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield On(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?ta.warn(p.message):ta.error(p),a=p}return i?a?h=_(i)?{token:i.token,internalError:a}:T(a):(h={token:i.token},r.token=i,yield Zn(t,i)):h=T(a),c&&function g(n,e){const t=On(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function wu(n){return __.apply(this,arguments)}function __(){return(__=(0,J.Z)(function*(n){const e=n.app;Rc(e);const{provider:t}=On(e);if(ka()){const r=yield Ma(),{token:i}=yield Pc(ro(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function jp(n,e){const t=On(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function EI(n){const{app:e}=n,t=On(e);let r=t.tokenRefresher;r||(r=function E(n){const{app:e}=n;return new Jo((0,J.Z)(function*(){let r;if(r=On(e).token?yield bi(n,!0):yield bi(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=On(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Ac.RETRIAL_MIN_WAIT,Ac.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _(n){return n.expireTimeMillis-Date.now()>0}function T(n){return{token:DC(m_),error:n}}class N{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=On(this.app);for(const t of e)jp(this.app,t.next);return Promise.resolve()}}const pN="app-check-internal";!function gN(){(0,on._registerComponent)(new rr.wA("app-check",n=>function L(n,e){return new N(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pN).initialize()})),(0,on._registerComponent)(new rr.wA(pN,n=>function te(n){return{getToken:e=>bi(n,e),getLimitedUseToken:()=>wu(n),addTokenListener:e=>function Xl(n,e,t,r){const{app:i}=n,a=On(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&_(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),EI(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>EI(n))}(n,"INTERNAL",e),removeTokenListener:e=>jp(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,on.registerVersion)("@firebase/app-check","0.8.0")}();class zp{constructor(){return(0,Vt.vb)("app-check")}}typeof window<"u"&&window;var Kp=F(120);const Oh=new m.OlP("angularfire2.auth.use-emulator"),Lh=new m.OlP("angularfire2.auth.settings"),DI=new m.OlP("angularfire2.auth.tenant-id"),SI=new m.OlP("angularfire2.auth.langugage-code"),AI=new m.OlP("angularfire2.auth.use-device-language"),C_=new m.OlP("angularfire.auth.persistence"),Zp=(n,e,t,r,i,a,c,h)=>(0,Wn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,a&&p.useDeviceLanguage(),c)for(const[v,b]of Object.entries(c))p.settings[v]=b;return h&&p.setPersistence(h),p},[t,r,i,a,c,h]);let Yp=(()=>{class n{constructor(t,r,i,a,c,h,p,v,b,S,x,$){const X=new is.x,pe=(0,Et.of)(void 0).pipe((0,To.Q)(c.outsideAngular),(0,qn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8661)))),(0,vt.U)(()=>(0,Wn.on)(t,a,r)),(0,vt.U)(we=>Zp(we,a,h,v,b,S,p,x)),wc({bufferSize:1,refCount:!1}));if(Ui(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Et.of)(null);else{pe.pipe(Ls()).subscribe();const Je=pe.pipe((0,qn.w)(ft=>ft.getRedirectResult().then(kt=>kt,()=>null)),Vt.iC,wc({bufferSize:1,refCount:!1})),ct=pe.pipe((0,qn.w)(ft=>new Hi.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(zt=>kt.next(zt),zt=>kt.error(zt),()=>kt.complete()))})))),tt=pe.pipe((0,qn.w)(ft=>new Hi.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(zt=>kt.next(zt),zt=>kt.error(zt),()=>kt.complete()))}))));this.authState=Je.pipe(Sh(ct),(0,Ci.R)(c.outsideAngular),(0,To.Q)(c.insideAngular)),this.user=Je.pipe(Sh(tt),(0,Ci.R)(c.outsideAngular),(0,To.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,qn.w)(ft=>ft?(0,Dn.D)(ft.getIdToken()):(0,Et.of)(null))),this.idTokenResult=this.user.pipe((0,qn.w)(ft=>ft?(0,Dn.D)(ft.getIdTokenResult()):(0,Et.of)(null))),this.credential=(0,to.T)(Je,X,this.authState.pipe(ii(ft=>!ft))).pipe((0,vt.U)(ft=>ft?.user?ft:null),(0,Ci.R)(c.outsideAngular),(0,To.Q)(c.insideAngular))}return(0,Wn.pX)(this,pe,a,{spy:{apply:(we,Je,ct)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&ct.then(tt=>X.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wn.Dh),m.LFG(Wn.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Vt.HU),m.LFG(Oh,8),m.LFG(Lh,8),m.LFG(DI,8),m.LFG(SI,8),m.LFG(AI,8),m.LFG(C_,8),m.LFG(zp,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IN=(()=>{class n{constructor(){Kp.Z.registerVersion("angularfire",Vt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Yp]}),n})();var RI=F(6321);class EN{constructor(e,t){this._delegate=e,this.firebase=t,(0,on._addComponent)(e,new rr.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,on.deleteApp)(this._delegate)))}_getService(e,t=on._DEFAULT_ENTRY_NAME){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=on._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,on._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,on._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const vs=new k.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),xI=function PI(){const n=function NI(n){const e={},t={__esModule:!0,initializeApp:function a(v,b={}){const S=on.initializeApp(v,b);if((0,k.r3)(e,S.name))return e[S.name];const x=new n(S,t);return e[S.name]=x,x},app:i,registerVersion:on.registerVersion,setLogLevel:on.setLogLevel,onLog:on.onLog,apps:null,SDK_VERSION:on.SDK_VERSION,INTERNAL:{registerComponent:function h(v){const b=v.name,S=b.replace("-compat","");if(on._registerComponent(v)&&"PUBLIC"===v.type){const x=($=i())=>{if("function"!=typeof $[S])throw vs.create("invalid-app-argument",{appName:b});return $[S]()};void 0!==v.serviceProps&&(0,k.ZB)(x,v.serviceProps),t[S]=x,n.prototype[S]=function(...$){return this._getService.bind(this,b).apply(this,v.multipleInstances?$:[])}}return"PUBLIC"===v.type?t[S]:null},removeApp:function r(v){delete e[v]},useAsService:function p(v,b){return"serverAuth"===b?null:b},modularAPIs:on}};function i(v){if(!(0,k.r3)(e,v=v||on._DEFAULT_ENTRY_NAME))throw vs.create("no-app",{appName:v});return e[v]}return t.default=t,Object.defineProperty(t,"apps",{get:function c(){return Object.keys(e).map(v=>e[v])}}),i.App=n,t}(EN);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:PI,extendNamespace:function e(t){(0,k.ZB)(n,t)},createSubscribe:k.ne,ErrorFactory:k.LL,deepExtend:k.ZB}),n}(),zi=new Mr.Yd("@firebase/app-compat");if((0,k.jU)()&&void 0!==self.firebase){zi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&zi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const TN=xI;!function PC(n){(0,on.registerVersion)("@firebase/app-compat","0.2.19",n)}();const kI="firebasestorage.googleapis.com",xC="storageBucket";class Ar extends k.ZR{constructor(e,t,r=0){super(Xp(e),`Firebase Storage: ${t} (${Xp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ar.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var mr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(mr||{});function Xp(n){return"storage/"+n}function Jp(){return new Ar(mr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function MI(){return new Ar(mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OI(){return new Ar(mr.CANCELED,"User canceled the upload/download.")}function D_(){return new Ar(mr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uh(n){return new Ar(mr.INVALID_ARGUMENT,n)}function FC(){return new Ar(mr.APP_DELETED,"The Firebase app was deleted.")}function UC(n){return new Ar(mr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tg(n,e){return new Ar(mr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Vh(n){throw new Ar(mr.INTERNAL_ERROR,"Internal error: "+n)}class gi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=gi.makeFromUrl(e,t)}catch{return new gi(e,"")}if(""===r.path)return r;throw function b_(n){return new Ar(mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ft){ft.path_=decodeURIComponent(ft.path)}const S=t.replace(/[.]/g,"\\."),tt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===kI?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ft=0;ft<tt.length;ft++){const kt=tt[ft],zt=kt.regex.exec(e);if(zt){let po=zt[kt.indices.path];po||(po=""),r=new gi(zt[kt.indices.bucket],po),kt.postModify(r);break}}if(null==r)throw function Fh(n){return new Ar(mr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class LI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Oa(n){return"string"==typeof n||n instanceof String}function VI(n){return A_()&&n instanceof Blob}function A_(){return typeof Blob<"u"&&!(0,k.UG)()}function BI(n,e,t,r){if(r<e)throw Uh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Uh(`Invalid value for '${n}'. Expected ${t} or less.`)}function Oc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ng(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Bh||{});function jI(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class BC{constructor(e,t,r,i,a,c,h,p,v,b,S,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=S,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($,X)=>{this.resolve_=$,this.reject_=X,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function PN(n){return void 0!==n}(p)?a():a(p)}catch(p){c(p)}else if(null!==h){const p=Jp();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(i.canceled?this.appDelete_?FC():OI():MI())};this.canceled_?t(0,new rg(!1,null,!0)):this.backoffId_=function FI(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function p(){return 2===h}let v=!1;function b(...we){v||(v=!0,e.apply(null,we))}function S(we){i=setTimeout(()=>{i=null,n($,p())},we)}function x(){a&&clearTimeout(a)}function $(we,...Je){if(v)return void x();if(we)return x(),void b.call(null,we,...Je);if(p()||c)return x(),void b.call(null,we,...Je);let tt;r<64&&(r*=2),1===h?(h=2,tt=0):tt=1e3*(r+Math.random()),S(tt)}let X=!1;function pe(we){X||(X=!0,x(),!v&&(null!==i?(we||(h=2),clearTimeout(i),S(0)):we||(h=1)))}return S(0),a=setTimeout(()=>{c=!0,pe(!0)},t),pe}((r,i)=>{if(i)return void r(!1,new rg(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===Bh.NO_ERROR,p=a.getStatus();if(!h||jI(p,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===Bh.ABORT;return void r(!1,new rg(!1,null,b))}const v=-1!==this.successCodes_.indexOf(p);r(!0,new rg(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function NN(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class rg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function N_(...n){const e=function HI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(A_())return new Blob(n);throw new Ar(mr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zI{constructor(e,t){this.data=e,this.contentType=t||null}}function P_(n,e){switch(n){case Wi.RAW:return new zI(GC(e));case Wi.BASE64:case Wi.BASE64URL:return new zI(zC(n,e));case Wi.DATA_URL:return new zI(function WC(n){const e=new WI(n);return e.base64?zC(Wi.BASE64,e.rest):function xN(n){let e;try{e=decodeURIComponent(n)}catch{throw tg(Wi.DATA_URL,"Malformed data URL.")}return GC(e)}(e.rest)}(e),function x_(n){return new WI(n).contentType}(e))}throw Jp()}function GC(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zC(n,e){switch(n){case Wi.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw tg(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wi.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw tg(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function GI(n){if(typeof atob>"u")throw function RN(n){return new Ar(mr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:tg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class WI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw tg(Wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function qI(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Is{constructor(e,t){let r=0,i="";VI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(VI(this.data_)){const i=function HC(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Is(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Is(r,!0)}}static getBlob(...e){if(A_()){const t=e.map(r=>r instanceof Is?r.data_:r);return new Is(N_.apply(null,t))}{const t=e.map(c=>Oa(c)?P_(Wi.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new Is(i,!0)}}uploadData(){return this.data_}}function KI(n){let e;try{e=JSON.parse(n)}catch{return null}return function VC(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function qC(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ZI(n,e){return e}class Es{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ZI}}let Cu=null;function ed(){if(Cu)return Cu;const n=[];n.push(new Es("bucket")),n.push(new Es("generation")),n.push(new Es("metageneration")),n.push(new Es("name","fullPath",!0));const t=new Es("name");t.xform=function e(a,c){return function k_(n){return!Oa(n)||n.length<2?n:qC(n)}(c)},n.push(t);const i=new Es("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Es("timeCreated")),n.push(new Es("updated")),n.push(new Es("md5Hash",null,!0)),n.push(new Es("cacheControl",null,!0)),n.push(new Es("contentDisposition",null,!0)),n.push(new Es("contentEncoding",null,!0)),n.push(new Es("contentLanguage",null,!0)),n.push(new Es("contentType",null,!0)),n.push(new Es("metadata","customMetadata",!0)),Cu=n,Cu}function YI(n,e,t){const r=KI(e);return null===r?null:function ZC(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function KC(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new gi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function QI(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const QC="prefixes",XC="items";class qi{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vs(n){if(!n)throw Jp()}function M_(n,e){return function t(r,i){const a=YI(n,i,e);return Vs(null!==a),a}}function sg(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function SN(){return new Ar(mr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function DN(){return new Ar(mr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function eg(n){return new Ar(mr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function OC(n){return new Ar(mr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function O_(n){const e=sg(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function bN(n){return new Ar(mr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function LN(n,e,t){const i=Oc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new qi(i,"GET",M_(n,t),c);return h.errorHandler=O_(e),h}function JC(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Oc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,b=new qi(h,"GET",function cL(n,e){return function t(r,i){const a=function ON(n,e,t){const r=KI(t);return null===r?null:function MN(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[QC])for(const i of t[QC]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new gi(e,a));r.prefixes.push(c)}if(t[XC])for(const i of t[XC]){const a=n._makeStorageReference(new gi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Vs(null!==a),a}}(n,e.bucket),v);return b.urlParams=a,b.errorHandler=sg(e),b}function La(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function XI(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class og{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function L_(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Vs(!1)}return Vs(!!t&&-1!==(e||["active"]).indexOf(t)),t}const JI={STATE_CHANGED:"state_changed"},Ki={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nb(n){switch(n){case"running":case"pausing":case"canceling":return Ki.RUNNING;case"paused":return Ki.PAUSED;case"success":return Ki.SUCCESS;case"canceled":return Ki.CANCELED;default:return Ki.ERROR}}class fL{constructor(e,t,r){if(function UI(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function td(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let rb=null;class jN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Vh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class $N extends jN{initXhr(){this.xhr_.responseType="text"}}function ra(){return rb?rb():new $N}class sb{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ed(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(mr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(jI(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=MI()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(mr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function tb(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=La(e,r,i),h={name:c.fullPath},p=Oc(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=QI(c,t),X=new qi(p,"POST",function $(pe){let we;L_(pe);try{we=pe.getResponseHeader("X-Goog-Upload-URL")}catch{Vs(!1)}return Vs(Oa(we)),we},n.maxUploadRetryTime);return X.urlParams=h,X.headers=b,X.body=S,X.errorHandler=sg(e),X}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ra,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function dL(n,e,t,r){const p=new qi(t,"POST",function a(v){const b=L_(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vs(!1)}S||Vs(!1);const x=Number(S);return Vs(!isNaN(x)),new og(x,r.size(),"final"===b)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=sg(e),p}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ra,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new og(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function hL(n,e,t,r,i,a,c,h){const p=new og(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function S_(){return new Ar(mr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=p.total-p.current;let b=v;i>0&&(b=Math.min(b,i));const S=p.current;let $="";$=0===b?"finalize":v===b?"upload, finalize":"upload";const X={"X-Goog-Upload-Command":$,"X-Goog-Upload-Offset":`${p.current}`},pe=r.slice(S,S+b);if(null===pe)throw D_();const tt=new qi(t,"POST",function we(ft,kt){const zt=L_(ft,["active","final"]),Yr=p.current+b,po=r.size();let vl;return vl="final"===zt?M_(e,a)(ft,kt):null,new og(Yr,po,"final"===zt,vl)},e.maxUploadRetryTime);return tt.headers=X,tt.body=pe.uploadData(),tt.progressCallback=h||null,tt.errorHandler=sg(n),tt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,ra,i,a,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=LN(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ra,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function jh(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let tt="";for(let ft=0;ft<2;ft++)tt+=Math.random().toString().slice(2);return tt}();c["Content-Type"]="multipart/related; boundary="+p;const v=La(e,r,i),b=QI(v,t),$=Is.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+p+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===$)throw D_();const X={name:v.fullPath},pe=Oc(a,n.host,n._protocol),Je=n.maxUploadRetryTime,ct=new qi(pe,"POST",M_(n,t),Je);return ct.urlParams=X,ct.headers=c,ct.body=$.uploadData(),ct.errorHandler=sg(e),ct}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ra,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=OI(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=nb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new fL(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(nb(this._state)){case Ki.SUCCESS:td(this._resolve.bind(null,this.snapshot))();break;case Ki.CANCELED:case Ki.ERROR:td(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(nb(this._state)){case Ki.RUNNING:case Ki.PAUSED:e.next&&td(e.next.bind(e,this.snapshot))();break;case Ki.SUCCESS:e.complete&&td(e.complete.bind(e))();break;default:e.error&&td(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ao{constructor(e,t){this._service=e,this._location=t instanceof gi?t:gi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ao(e,t)}get root(){const e=new gi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qC(this._location.path)}get storage(){return this._service}get parent(){const e=function kN(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new gi(this._location.bucket,e);return new Ao(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw UC(e)}}function ab(n,e,t){return tE.apply(this,arguments)}function tE(){return(tE=(0,J.Z)(function*(n,e,t){const i=yield nE(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield ab(n,e,i.nextPageToken))})).apply(this,arguments)}function nE(n,e){null!=e&&"number"==typeof e.maxResults&&BI("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=JC(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ra)}function ag(n){n._throwIfRoot("getDownloadURL");const e=function FN(n,e,t){const i=Oc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new qi(i,"GET",function lL(n,e){return function t(r,i){const a=YI(n,i,e);return Vs(null!==a),function YC(n,e,t,r){const i=KI(e);if(null===i||!Oa(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return Oc("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+ng({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=O_(e),h}(n.storage,n._location,ed());return n.storage.makeRequestWithTokens(e,ra).then(t=>{if(null===t)throw function AN(){return new Ar(mr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function $h(n,e){const t=function uL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new gi(n._location.bucket,t);return new Ao(n.storage,r)}function V_(n,e){if(n instanceof B_){const t=n;if(null==t._bucket)throw function LC(){return new Ar(mr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xC+"' property when initializing the app?")}();const r=new Ao(t,t._bucket);return null!=e?V_(r,e):r}return void 0!==e?$h(n,e):n}function lb(n,e){if(e&&function ub(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof B_)return function cb(n,e){return new Ao(n,e)}(n,e);throw Uh("To use ref(service, url), the first argument must be a Storage instance.")}return V_(n,e)}function db(n,e){const t=e?.[xC];return null==t?null:gi.makeFromBucketSpec(t,n)}class B_{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=kI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?gi.makeFromBucketSpec(i,this._host):db(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?gi.makeFromBucketSpec(this._url,e):db(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,J.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,J.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ao(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new LI(FC());{const c=function $C(n,e,t,r,i,a,c=!0){const h=ng(n.urlParams),p=n.url+h,v=Object.assign({},n.headers);return function R_(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function $I(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function jC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function ig(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new BC(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,J.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const ug="@firebase/storage",j_="storage";function rE(n,e,t){return function ob(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new sb(n,new Is(e),t)}(n=(0,k.m9)(n),e,t)}function pb(n){return ag(n=(0,k.m9)(n))}function Hh(n,e){return lb(n=(0,k.m9)(n),e)}function cg(n=(0,on.getApp)(),e){n=(0,k.m9)(n);const r=(0,on._getProvider)(n,j_).getImmediate({identifier:e}),i=(0,k.P0)("storage");return i&&H_(r,...i),r}function H_(n,e,t,r={}){!function hb(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function gb(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new B_(t,r,i,e,on.SDK_VERSION)}!function Gh(){(0,on._registerComponent)(new rr.wA(j_,gb,"PUBLIC").setMultipleInstances(!0)),(0,on.registerVersion)(ug,"0.11.2",""),(0,on.registerVersion)(ug,"0.11.2","esm2017")}();class G_{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class mb{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new G_(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new G_(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new G_(c,this,this._ref)):{next:t.next?c=>t.next(new G_(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class _b{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ia(e,this._service))}get items(){return this._delegate.items.map(e=>new ia(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ia{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Fa(n,e){return $h(n,e)}(this._delegate,e);return new ia(t,this.storage)}get root(){return new ia(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ia(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new mb(rE(this._delegate,e,t),this)}putString(e,t=Wi.RAW,r){this._throwIfRoot("putString");const i=P_(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new mb(new sb(this._delegate,new Is(i.data,!0),a),this)}listAll(){return function $_(n){return function qN(n){const e={prefixes:[],items:[]};return ab(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new _b(e,this.storage))}list(e){return function iE(n,e){return nE(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new _b(t,this.storage))}getMetadata(){return function nd(n){return function pL(n){n._throwIfRoot("getMetadata");const e=LN(n.storage,n._location,ed());return n.storage.makeRequestWithTokens(e,ra)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function YN(n,e){return function gL(n,e){n._throwIfRoot("updateMetadata");const t=function UN(n,e,t,r){const a=Oc(e.fullServerUrl(),n.host,n._protocol),h=QI(t,r),v=n.maxOperationRetryTime,b=new qi(a,"PATCH",M_(n,r),v);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=O_(e),b}(n.storage,n._location,e,ed());return n.storage.makeRequestWithTokens(t,ra)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return pb(this._delegate)}delete(){return this._throwIfRoot("delete"),function sE(n){return function Pn(n){n._throwIfRoot("deleteObject");const e=function VN(n,e){const r=Oc(e.fullServerUrl(),n.host,n._protocol),h=new qi(r,"DELETE",function c(p,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=O_(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ra)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw UC(e)}}class oE{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yb(e))throw Uh("ref() expected a child path but got a URL, use refFromURL instead.");return new ia(Hh(this._delegate,e),this)}refFromURL(e){if(!yb(e))throw Uh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gi.makeFromUrl(e,this._delegate.host)}catch{throw Uh("refFromUrl() expected a valid full URL but got an invalid one.")}return new ia(Hh(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){H_(this._delegate,e,t,r)}}function yb(n){return/^[A-Za-z]+:\/\//.test(n)}function IL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new oE(t,r)}function JN(n){const e=function XN(n){return new Hi.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function RC(n,e=RI.z){return(0,kr.e)((t,r)=>{let i=null,a=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function p(){const v=c+n,b=e.now();if(b<v)return i=this.schedule(void 0,v-b),void r.add(i);h()}t.subscribe((0,er.x)(r,v=>{a=v,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,vt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function uE(n){return{getDownloadURL:()=>(0,Et.of)(void 0).pipe(Vt.fc,(0,qn.w)(()=>n.getDownloadURL()),Vt.iC),getMetadata:()=>(0,Et.of)(void 0).pipe(Vt.fc,(0,qn.w)(()=>n.getMetadata()),Vt.iC),delete:()=>(0,Dn.D)(n.delete()),child:e=>uE(n.child(e)),updateMetadata:e=>(0,Dn.D)(n.updateMetadata(e)),put:(e,t)=>JN(n.put(e,t)),putString:(e,t,r)=>JN(n.putString(e,t,r)),list:e=>(0,Dn.D)(n.list(e)),listAll:()=>(0,Dn.D)(n.listAll())}}!function QN(n){const e={TaskState:Ki,TaskEvent:JI,StringFormat:Wi,Storage:oE,Reference:ia};n.INTERNAL.registerComponent(new rr.wA("storage-compat",IL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(TN);const z_=new m.OlP("angularfire2.storageBucket"),eP=new m.OlP("angularfire2.storage.maxUploadRetryTime"),cE=new m.OlP("angularfire2.storage.maxOperationRetryTime"),lE=new m.OlP("angularfire2.storage.use-emulator");let zh=(()=>{class n{constructor(t,r,i,a,c,h,p,v,b,S){const x=(0,Wn.on)(t,c,r);this.storage=(0,Wn.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const $=c.runOutsideAngular(()=>x.storage(i||void 0)),X=b;return X&&$.useEmulator(...X),p&&$.setMaxUploadRetryTime(p),v&&$.setMaxOperationRetryTime(v),$},[p,v])}ref(t){return uE(this.storage.ref(t))}refFromURL(t){return uE(this.storage.refFromURL(t))}upload(t,r,i){return uE(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wn.Dh),m.LFG(Wn.xv,8),m.LFG(z_,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Vt.HU),m.LFG(eP,8),m.LFG(cE,8),m.LFG(lE,8),m.LFG(zp,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),lg=(()=>{class n{constructor(){Kp.Z.registerVersion("angularfire",Vt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[zh],imports:[dE]}),n})();var Lc=F(7537),rd=F(4564);function dg(...n){return function Wh(){return(0,Lc.J)(1)}()((0,Dn.D)(n,(0,rd.yG)(n)))}function id(...n){const e=(0,rd.yG)(n);return(0,kr.e)((t,r)=>{(e?dg(n,t,e):dg(n,t)).subscribe(r)})}function Eb(){return(0,kr.e)((n,e)=>{let t,r=!1;n.subscribe((0,er.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Ua(n,e){return(0,kr.e)(function hE(n,e,t,r,i){return(a,c)=>{let h=t,p=e,v=0;a.subscribe((0,er.x)(c,b=>{const S=v++;p=h?n(p,b,S):(h=!0,b),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}(n,e,arguments.length>=2,!0))}var ut,wb=F(3997),Tb=(F(8661),F(3399)),Fc=F(7592),fE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ro={},pE=pE||{},Gt=fE||self;function W_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Uc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mE="closure_uid_"+(1e9*Math.random()>>>0),Cb=0;function _E(n,e,t){return n.call.apply(n.bind,arguments)}function q_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function os(n,e,t){return(os=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_E:q_).apply(null,arguments)}function hg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Si(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function bu(){this.s=this.s,this.o=this.o}bu.prototype.s=!1,bu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function gE(n){Object.prototype.hasOwnProperty.call(n,mE)&&n[mE]||(n[mE]=++Cb)}(this)},bu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function qh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Db(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(W_(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function zr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zr.prototype.h=function(){this.defaultPrevented=!0};var fg=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",()=>{},e),Gt.removeEventListener("test",()=>{},e)}catch{}return n}();function pg(n){return/^[\s\xa0]*$/.test(n)}function gg(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function Va(n){return-1!=gg().indexOf(n)}function yE(n){return yE[" "](n),n}yE[" "]=function(){};var vE,n,Sb=Va("Opera"),sd=Va("Trident")||Va("MSIE"),K_=Va("Edge"),Ab=K_||sd,Z_=Va("Gecko")&&!(-1!=gg().toLowerCase().indexOf("webkit")&&!Va("Edge"))&&!(Va("Trident")||Va("MSIE"))&&!Va("Edge"),Rb=-1!=gg().toLowerCase().indexOf("webkit")&&!Va("Edge");function Nb(){var n=Gt.document;return n?n.documentMode:void 0}e:{var Y_="",IE=(n=gg(),Z_?/rv:([^\);]+)(\)|;)/.exec(n):K_?/Edge\/([\d\.]+)/.exec(n):sd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Rb?/WebKit\/(\S+)/.exec(n):Sb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(IE&&(Y_=IE?IE[1]:""),sd){var Q_=Nb();if(null!=Q_&&Q_>parseFloat(Y_)){vE=String(Q_);break e}}vE=Y_}var wL=Gt.document&&sd&&(Nb()||parseInt(vE,10))||void 0;function Kh(n,e){if(zr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Z_){e:{try{yE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kh.$.h.call(this)}}Si(Kh,zr);var xb={2:"touch",3:"pen",4:"mouse"};Kh.prototype.h=function(){Kh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ws="closure_listenable_"+(1e6*Math.random()|0),kb=0;function TL(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++kb,this.fa=this.ia=!1}function Zh(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ba(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mb(n){const e={};for(const t in n)e[t]=n[t];return e}const rP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ob(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<rP.length;a++)t=rP[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Yh(n){this.src=n,this.g={},this.h=0}function No(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=bb(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Zh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function X_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Yh.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=X_(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new TL(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var TE="closure_lm_"+(1e6*Math.random()|0),Lb={};function mi(n,e,t,r,i){if(r&&r.once)return Ub(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)mi(n,e[a],t,r,i);return null}return t=ey(t),n&&n[ws]?n.O(e,t,Uc(r)?!!r.capture:!!r,i):Fb(n,e,t,!1,r,i)}function Fb(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Uc(i)?!!i.capture:!!i,h=DE(n);if(h||(n[TE]=h=new Yh(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function CE(){const e=Bb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fg||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ub(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Ub(n,e[a],t,r,i);return null}return t=ey(t),n&&n[ws]?n.P(e,t,Uc(r)?!!r.capture:!!r,i):Fb(n,e,t,!0,r,i)}function Vb(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Vb(n,e[a],t,r,i);else r=Uc(r)?!!r.capture:!!r,t=ey(t),n&&n[ws]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=X_(a=n.g[e],t,r,i))&&(Zh(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=DE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=X_(e,t,r,i)),(t=-1<n?e[n]:null)&&mg(t))}function mg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[ws])No(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=DE(e))?(No(t,n),0==t.h&&(t.src=null,e[TE]=null)):Zh(n)}}}function bE(n){return n in Lb?Lb[n]:Lb[n]="on"+n}function Bb(n,e){if(n.fa)n=!0;else{e=new Kh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&mg(n),n=t.call(r,e)}return n}function DE(n){return(n=n[TE])instanceof Yh?n:null}var J_="__closure_events_fn_"+(1e9*Math.random()>>>0);function ey(n){return"function"==typeof n?n:(n[J_]||(n[J_]=function(e){return n.handleEvent(e)}),n[J_])}function Ai(){bu.call(this),this.i=new Yh(this),this.S=this,this.J=null}function Zi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new zr(e,n);else if(e instanceof zr)e.target=e.target||n;else{var i=e;Ob(e=new zr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=ty(c,r,!0,e)&&i}if(i=ty(c=e.g=n,r,!0,e)&&i,i=ty(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ty(c=e.g=t[a],r,!1,e)&&i}function ty(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var h=c.listener,p=c.la||c.src;c.ia&&No(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Si(Ai,bu),Ai.prototype[ws]=!0,Ai.prototype.removeEventListener=function(n,e,t,r){Vb(this,n,e,t,r)},Ai.prototype.N=function(){if(Ai.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zh(t[r]);delete n.g[e],n.h--}}this.J=null},Ai.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ai.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ny=Gt.JSON.stringify;function Du(){var n=Jh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jb=new class Qh{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new iP,n=>n.reset());class iP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $b(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Hb(n){Gt.setTimeout(()=>{throw n},0)}let od,Su=!1,Jh=new class Xh{constructor(){this.h=this.g=null}add(e,t){const r=jb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},SE=()=>{const n=Gt.Promise.resolve(void 0);od=()=>{n.then(Gb)}};var Gb=()=>{for(var n;n=Du();){try{n.h.call(n.g)}catch(t){Hb(t)}var e=jb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Su=!1};function ry(n,e){Ai.call(this),this.h=n||1,this.g=e||Gt,this.j=os(this.qb,this),this.l=Date.now()}function AE(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function RE(n,e,t){if("function"==typeof n)t&&(n=os(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=os(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function zb(n){n.g=RE(()=>{n.g=null,n.i&&(n.i=!1,zb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Si(ry,Ai),(ut=ry.prototype).ga=!1,ut.T=null,ut.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Zi(this,"tick"),this.ga&&(AE(this),this.start()))}},ut.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.N=function(){ry.$.N.call(this),AE(this),delete this.g};class Wb extends bu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zb(this)}N(){super.N(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function iy(n){bu.call(this),this.h=n,this.g={}}Si(iy,bu);var qb=[];function sP(n,e,t,r){Array.isArray(t)||(t&&(qb[0]=t.toString()),t=qb);for(var i=0;i<t.length;i++){var a=mi(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function oP(n){Ba(n.g,function(e,t){this.g.hasOwnProperty(t)&&mg(e)},n),n.g={}}function _g(){this.g=!0}function Au(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return ny(t)}catch{return e}}(n,t)+(r?" "+r:"")})}iy.prototype.N=function(){iy.$.N.call(this),oP(this)},iy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_g.prototype.Ea=function(){this.g=!1},_g.prototype.info=function(){};var Vc={},Yb=null;function yg(){return Yb=Yb||new Ai}function NE(n){zr.call(this,Vc.Ta,n)}function Ft(n){const e=yg();Zi(e,new NE(e))}function PE(n,e){zr.call(this,Vc.STAT_EVENT,n),this.stat=e}function as(n){const e=yg();Zi(e,new PE(e,n))}function ad(n,e){zr.call(this,Vc.Ua,n),this.size=e}function ef(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}Vc.Ta="serverreachability",Si(NE,zr),Vc.STAT_EVENT="statevent",Si(PE,zr),Vc.Ua="timingevent",Si(ad,zr);var sy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bc(){}function tf(){}Bc.prototype.h=null;var wg,nf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ig(){zr.call(this,"d")}function Eg(){zr.call(this,"c")}function Tg(){}function ud(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new iy(this),this.P=aP,this.V=new ry(n=Ab?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qb}function Qb(){this.i=null,this.g="",this.h=!1}Si(Ig,zr),Si(Eg,zr),Si(Tg,Bc),Tg.prototype.g=function(){return new XMLHttpRequest},Tg.prototype.i=function(){return{}},wg=new Tg;var aP=45e3,xE={},Cg={};function kE(n,e,t){n.L=1,n.v=dy(ja(e)),n.s=t,n.S=!0,Xb(n,null)}function Xb(n,e){n.G=Date.now(),rf(n),n.A=ja(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),hP(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Qb,n.g=ED(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Wb(os(n.Pa,n,n.g),n.O)),sP(n.U,n.g,"readystatechange",n.nb),e=n.I?Mb(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ft(),function Kb(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),p=0;p<h.length;p++){var v=h[p].split("=");if(1<v.length){var b=v[0];v=v[1];var S=b.split("_");c=2<=S.length&&"type"==S[1]?c+(b+"=")+v+"&":c+(b+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Jb(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function eD(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=tD(n,t),i==Cg){4==e&&(n.o=4,as(14),r=!1),Au(n.j,n.m,null,"[Incomplete Response]");break}if(i==xE){n.o=4,as(15),Au(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Au(n.j,n.m,i,null),ME(n,i)}Jb(n)&&i!=Cg&&i!=xE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,as(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ey(e),e.M=!0,as(11))):(Au(n.j,n.m,t,"[Invalid Chunked Response]"),cd(n),Yi(n))}function tD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Cg:(t=Number(e.substring(t,r)),isNaN(t)?xE:(r+=1)+t>e.length?Cg:(e=e.slice(r,r+t),n.C=r+t,e))}function rf(n){n.Y=Date.now()+n.P,nD(n,n.P)}function nD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ef(os(n.lb,n),e)}function ay(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Yi(n){0==n.l.H||n.J||_P(n.l,n)}function cd(n){ay(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,AE(n.V),oP(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function ME(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||BE(t.i,n)))if(!n.K&&BE(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;wy(t),vy(t)}zE(t),as(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=ef(os(t.ib,t),6e3));if(1>=aD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else jc(t,11)}else if((n.K||t.g==n)&&wy(t),!pg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const b=v[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const S=v[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const x=v[5];null!=x&&"number"==typeof x&&0<x&&(t.L=r=1.5*x,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const X=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var a=r.i;a.g||-1==X.indexOf("spdy")&&-1==X.indexOf("quic")&&-1==X.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ag(a,a.h),a.h=null))}if(r.F){const pe=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;pe&&(r.Da=pe,ir(r.I,r.F,pe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=Og(r,r.J?r.pa:null,r.Y),c.K){uD(r.i,c);var h=c,p=r.L;p&&h.setTimeout(p),h.B&&(ay(h),rf(h)),r.g=c}else ID(r);0<t.j.length&&Iy(t)}else"stop"!=v[0]&&"close"!=v[0]||jc(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?jc(t,7):yy(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Ft()}catch{}}function LE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(W_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function OE(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(W_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function DL(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(W_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ut=ud.prototype).setTimeout=function(n){this.P=n},ut.nb=function(n){n=n.target;const e=this.M;e&&3==Ha(n)?e.l():this.Pa(n)},ut.Pa=function(n){try{if(n==this.g)e:{const b=Ha(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||Ab||this.g&&(this.h.h||this.g.ja()||mD(this.g)))){this.J||4!=b||7==e||Ft(),ay(this);var t=this.g.da();this.ca=t;t:if(Jb(this)){var r=mD(this.g);n="";var i=r.length,a=4==Ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){cd(this),Yi(this);var c="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function CL(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pg(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,as(12),cd(this),Yi(this);break e}Au(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ME(this,t)}this.S?(eD(this,b,c),Ab&&this.i&&3==b&&(sP(this.U,this.V,"tick",this.mb),this.V.start())):(Au(this.j,this.m,c,null),ME(this,c)),4==b&&cd(this),this.i&&!this.J&&(4==b?_P(this.l,this):(this.i=!1,rf(this)))}else(function gP(n){const e={};n=(n.g&&2<=Ha(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(pg(n[r]))continue;var t=$b(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function wE(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,as(12)):(this.o=0,as(13)),cd(this),Yi(this)}}}catch{}},ut.mb=function(){if(this.g){var n=Ha(this.g),e=this.g.ja();this.C<e.length&&(ay(this),eD(this,n,e),this.i&&4!=n&&rf(this))}},ut.cancel=function(){this.J=!0,cd(this)},ut.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function bL(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ft(),as(17)),cd(this),this.o=2,Yi(this)):nD(this,this.Y-n)};var rD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ld(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ld){this.h=n.h,uy(this,n.j),this.s=n.s,this.g=n.g,cy(this,n.m),this.l=n.l;var e=n.i,t=new sf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ly(this,t),this.o=n.o}else n&&(e=String(n).match(rD))?(this.h=!1,uy(this,e[1]||"",!0),this.s=bg(e[2]||""),this.g=bg(e[3]||"",!0),cy(this,e[4]),this.l=bg(e[5]||"",!0),ly(this,e[6]||"",!0),this.o=bg(e[7]||"")):(this.h=!1,this.i=new sf(null,this.h))}function ja(n){return new ld(n)}function uy(n,e,t){n.j=t?bg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function cy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ly(n,e,t){e instanceof sf?(n.i=e,function sD(n,e){e&&!n.j&&(Ru(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Sg(this,r),hP(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Dg(e,iD)),n.i=new sf(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function dy(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function bg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,cP),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cP(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ld.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dg(e,sa,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dg(e,sa,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dg(t,"/"==t.charAt(0)?lP:FE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dg(t,dP)),n.join("")};var sa=/[#\/\?@]/g,FE=/[#\?:]/g,lP=/[#\?]/g,iD=/[#\?@]/g,dP=/#/g;function sf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ru(n){n.g||(n.g=new Map,n.h=0,n.i&&function uP(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Sg(n,e){Ru(n),e=dd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function hy(n,e){return Ru(n),e=dd(n,e),n.g.has(e)}function hP(n,e,t){Sg(n,e),0<t.length&&(n.i=null,n.g.set(dd(n,e),qh(t)),n.h+=t.length)}function dd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function UE(n){this.l=n||VE,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ka&&Gt.g.Ka()&&Gt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=sf.prototype).add=function(n,e){Ru(this),this.i=null,n=dd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Ru(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ut.ta=function(){Ru(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ut.Z=function(n){Ru(this);let e=[];if("string"==typeof n)hy(this,n)&&(e=e.concat(this.g.get(dd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return Ru(this),this.i=null,hy(this,n=dd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var VE=10;function $a(n){return!!n.h||!!n.g&&n.g.size>=n.j}function aD(n){return n.h?1:n.g?n.g.size:0}function BE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ag(n,e){n.g?n.g.add(e):n.h=e}function uD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function jE(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return qh(n.i)}UE.prototype.cancel=function(){if(this.i=jE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var fP=class{stringify(n){return Gt.JSON.stringify(n,void 0)}parse(n){return Gt.JSON.parse(n,void 0)}};function fy(){this.g=new fP}function Rg(n,e,t){const r=t||"";try{LE(n,function(i,a){let c=i;Uc(i)&&(c=ny(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hd(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function py(n){this.l=n.fc||null,this.j=n.ob||!1}function gy(n,e){Ai.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=my,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Si(py,Bc),py.prototype.g=function(){return new gy(this.l,this.j)},py.prototype.i=function(n){return function(){return n}}({}),Si(gy,Ai);var my=0;function $E(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ng(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Pg(n)}function Pg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=gy.prototype).open=function(n,e){if(this.readyState!=my)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Pg(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Gt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ng(this)),this.readyState=my},ut.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Pg(this)),this.g&&(this.readyState=3,Pg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$E(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ut.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ng(this):Pg(this),3==this.readyState&&$E(this)}},ut.Za=function(n){this.g&&(this.response=this.responseText=n,Ng(this))},ut.Ya=function(n){this.g&&(this.response=n,Ng(this))},ut.ka=function(){this.g&&Ng(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(gy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lD=Gt.JSON.parse;function Rr(n){Ai.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=af,this.L=this.M=!1}Si(Rr,Ai);var af="",pP=/^https?$/i,dD=["POST","PUT"];function fD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,pD(n),_y(n)}function pD(n){n.F||(n.F=!0,Zi(n,"complete"),Zi(n,"error"))}function uf(n){if(n.h&&typeof pE<"u"&&(!n.C[1]||4!=Ha(n)||2!=n.da()))if(n.v&&4==Ha(n))RE(n.La,0,n);else if(Zi(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(rD)[1]||null;!i&&Gt.self&&Gt.self.location&&(i=Gt.self.location.protocol.slice(0,-1)),r=!pP.test(i?i.toLowerCase():"")}t=r}if(t)Zi(n,"complete"),Zi(n,"success");else{n.m=6;try{var a=2<Ha(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",pD(n)}}finally{_y(n)}}}function _y(n,e){if(n.g){gD(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Zi(n,"ready");try{t.onreadystatechange=r}catch{}}}function gD(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function mD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case af:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function _D(n){let e="";return Ba(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function HE(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=_D(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function xg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function GE(n){this.Ga=0,this.j=[],this.l=new _g,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=xg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=xg("baseRetryDelayMs",5e3,n),this.hb=xg("retryDelaySeedMs",1e4,n),this.eb=xg("forwardChannelMaxRetries",2,n),this.xa=xg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new UE(n&&n.concurrentRequestLimit),this.Ja=new fy,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function yy(n){if(kg(n),3==n.H){var e=n.W++,t=ja(n.I);if(ir(t,"SID",n.K),ir(t,"RID",e),ir(t,"TYPE","terminate"),Mg(n,t),(e=new ud(n,n.l,e)).L=2,e.v=dy(ja(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon)try{t=Gt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ED(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rf(e)}yP(n)}function vy(n){n.g&&(Ey(n),n.g.cancel(),n.g=null)}function kg(n){vy(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),wy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function Iy(n){if(!$a(n.i)&&!n.m){n.m=!0;var e=n.Na;od||SE(),Su||(od(),Su=!0),Jh.add(e,n),n.C=0}}function yD(n,e){var t;t=e?e.m:n.W++;const r=ja(n.I);ir(r,"SID",n.K),ir(r,"RID",t),ir(r,"AID",n.V),Mg(n,r),n.o&&n.s&&HE(r,n.o,n.s),t=new ud(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=vD(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Ag(n.i,t),kE(t,r,e)}function Mg(n,e){n.na&&Ba(n.na,function(t,r){ir(e,r,t)}),n.h&&LE({},function(t,r){ir(e,r,t)})}function vD(n,e,t){t=Math.min(n.j.length,t);var r=n.h?os(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let p=0;p<t;p++){let v=i[p].g;const b=i[p].map;if(v-=a,0>v)a=Math.max(0,i[p].g-100),h=!1;else try{Rg(b,c,"req"+v+"_")}catch{r&&r(b)}}if(h){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function ID(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;od||SE(),Su||(od(),Su=!0),Jh.add(e,n),n.A=0}}function zE(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ef(os(n.Ma,n),qE(n,n.A)),n.A++,0))}function Ey(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function WE(n){n.g=new ud(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ja(n.wa);ir(e,"RID","rpc"),ir(e,"SID",n.K),ir(e,"AID",n.V),ir(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ir(e,"TO",n.qa),ir(e,"TYPE","xmlhttp"),Mg(n,e),n.o&&n.s&&HE(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=dy(ja(e)),t.s=null,t.S=!0,Xb(t,n)}function wy(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function _P(n,e){var t=null;if(n.g==e){wy(n),Ey(n),n.g=null;var r=2}else{if(!BE(n.i,e))return;t=e.F,uD(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Zi(r=yg(),new ad(r,t)),Iy(n)}else ID(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function mP(n,e){return!(aD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ef(os(n.Na,n,e),qE(n,n.C)),n.C++,0)))}(n,e)||2==r&&zE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:jc(n,5);break;case 4:jc(n,10);break;case 3:jc(n,6);break;default:jc(n,2)}}function qE(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function jc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=os(n.pb,n);t||(t=new ld("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||uy(t,"https"),dy(t)),function cD(n,e){const t=new _g;if(Gt.Image){const r=new Image;r.onload=hg(hd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hg(hd,t,r,"TestLoadImage: error",!1,e),r.onabort=hg(hd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hg(hd,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else as(2);n.H=0,n.h&&n.h.za(e),yP(n),kg(n)}function yP(n){if(n.H=0,n.ma=[],n.h){const e=jE(n.i);(0!=e.length||0!=n.j.length)&&(Db(n.ma,e),Db(n.ma,n.j),n.i.i.length=0,qh(n.j),n.j.length=0),n.h.ya()}}function Og(n,e,t){var r=t instanceof ld?ja(t):new ld(t);if(""!=r.g)e&&(r.g=e+"."+r.g),cy(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ld(null);r&&uy(a,r),e&&(a.g=e),i&&cy(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&ir(r,t,e),ir(r,"VER",n.ra),Mg(n,r),r}function ED(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rr(t&&n.Ha&&!n.va?new py({ob:!0}):n.va)).Oa(n.J),e}function wD(){}function cf(){if(sd&&!(10<=Number(wL)))throw Error("Environmental error: no available transport.")}function io(n,e){Ai.call(this),this.g=new GE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!pg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wr(this)}function oa(n){Ig.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function lf(){Eg.call(this),this.status=1}function Wr(n){this.g=n}function Bs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function js(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function xn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(ut=Rr.prototype).Oa=function(n){this.M=n},ut.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wg.g(),this.C=function oy(n){return n.h||(n.h=n.i())}(this.u?this.u:wg),this.g.onreadystatechange=os(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void fD(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=bb(dD,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gD(this),0<this.B&&((this.L=function hD(n){return sd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=os(this.ua,this)):this.A=RE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){fD(this,a)}},ut.ua=function(){typeof pE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zi(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zi(this,"complete"),Zi(this,"abort"),_y(this))},ut.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_y(this,!0)),Rr.$.N.call(this)},ut.La=function(){this.s||(this.G||this.v||this.l?uf(this):this.kb())},ut.kb=function(){uf(this)},ut.isActive=function(){return!!this.g},ut.da=function(){try{return 2<Ha(this)?this.g.status:-1}catch{return-1}},ut.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lD(e)}},ut.Ia=function(){return this.m},ut.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=GE.prototype).ra=8,ut.H=1,ut.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ud(this,this.l,n);let a=this.s;if(this.U&&(a?(a=Mb(a),Ob(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=vD(this,i,e),ir(t=ja(this.I),"RID",n),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),Mg(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(_D(a)))+"&"+e:this.o&&HE(t,this.o,a)),Ag(this.i,i),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),i.aa=!0,kE(i,t,null)):kE(i,t,e),this.H=2}}else 3==this.H&&(n?yD(this,n):0==this.j.length||$a(this.i)||yD(this))},ut.Ma=function(){if(this.u=null,WE(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ef(os(this.jb,this),n)}},ut.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,as(10),vy(this),WE(this))},ut.ib=function(){null!=this.v&&(this.v=null,vy(this),zE(this),as(19))},ut.pb=function(n){n?(this.l.info("Successfully pinged google.com"),as(2)):(this.l.info("Failed to ping google.com"),as(1))},ut.isActive=function(){return!!this.h&&this.h.isActive(this)},(ut=wD.prototype).Ba=function(){},ut.Aa=function(){},ut.za=function(){},ut.ya=function(){},ut.isActive=function(){return!0},ut.Va=function(){},cf.prototype.g=function(n,e){return new io(n,e)},Si(io,Ai),io.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;as(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Og(n,null,n.Y),Iy(n)},io.prototype.close=function(){yy(this.g)},io.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ny(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Iy(e)},io.prototype.N=function(){this.g.h=null,delete this.j,yy(this.g),delete this.g,io.$.N.call(this)},Si(oa,Ig),Si(lf,Eg),Si(Wr,wD),Wr.prototype.Ba=function(){Zi(this.g,"a")},Wr.prototype.Aa=function(n){Zi(this.g,new oa(n))},Wr.prototype.za=function(n){Zi(this.g,new lf)},Wr.prototype.ya=function(){Zi(this.g,"b")},Si(Bs,function fd(){this.blockSize=-1}),Bs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Bs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)js(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){js(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){js(this,r),i=0;break}}this.h=i,this.i+=e},Bs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var df={};function $c(n){return-128<=n&&128>n?function nP(n,e){var t=df;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new xn([0|e],0>e?-1:0)}):new xn([0|n],0>n?-1:0)}function Ts(n){if(isNaN(n)||!isFinite(n))return aa;if(0>n)return Ri(Ts(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Hc;return new xn(e,0)}var Hc=4294967296,aa=$c(0),Gc=$c(1),gd=$c(16777216);function $s(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function so(n){return-1==n.h}function Ri(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new xn(t,~n.h).add(Gc)}function Lg(n,e){return n.add(Ri(e))}function Fg(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function hf(n,e){this.g=n,this.h=e}function Ug(n,e){if($s(e))throw Error("division by zero");if($s(n))return new hf(aa,aa);if(so(n))return e=Ug(Ri(n),e),new hf(Ri(e.g),Ri(e.h));if(so(e))return e=Ug(n,Ri(e)),new hf(Ri(e.g),e.h);if(30<n.g.length){if(so(n)||so(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Gc,r=e;0>=r.X(n);)t=KE(t),r=KE(r);var i=md(t,1),a=md(r,1);for(r=md(r,2),t=md(t,2);!$s(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=md(r,1),t=md(t,1)}return e=Lg(n,i.R(e)),new hf(i,e)}for(i=aa;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Ts(t)).R(e);so(c)||0<c.X(n);)c=(a=Ts(t-=r)).R(e);$s(a)&&(a=Gc),i=i.add(a),n=Lg(n,c)}return new hf(i,n)}function KE(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new xn(t,n.h)}function md(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new xn(i,n.h)}(ut=xn.prototype).ea=function(){if(so(this))return-Ri(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Hc+r)*e,e*=Hc}return n},ut.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if($s(this))return"0";if(so(this))return"-"+Ri(this).toString(n);for(var e=Ts(Math.pow(n,6)),t=this,r="";;){var i=Ug(t,e).g,a=((0<(t=Lg(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if($s(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},ut.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ut.X=function(n){return so(n=Lg(this,n))?-1:$s(n)?0:1},ut.abs=function(){return so(this)?Ri(this):this},ut.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new xn(t,-2147483648&t[t.length-1]?-1:0)},ut.R=function(n){if($s(this)||$s(n))return aa;if(so(this))return so(n)?Ri(this).R(Ri(n)):Ri(Ri(this).R(n));if(so(n))return Ri(this.R(Ri(n)));if(0>this.X(gd)&&0>n.X(gd))return Ts(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),h=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=c*p,Fg(t,2*r+2*i),t[2*r+2*i+1]+=a*p,Fg(t,2*r+2*i+1),t[2*r+2*i+1]+=c*h,Fg(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,Fg(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new xn(t,0)},ut.gb=function(n){return Ug(this,n).h},ut.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new xn(t,this.h&n.h)},ut.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new xn(t,this.h|n.h)},ut.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new xn(t,this.h^n.h)},cf.prototype.createWebChannel=cf.prototype.g,io.prototype.send=io.prototype.u,io.prototype.open=io.prototype.m,io.prototype.close=io.prototype.close,sy.NO_ERROR=0,sy.TIMEOUT=8,sy.HTTP_ERROR=6,vg.COMPLETE="complete",tf.EventType=nf,nf.OPEN="a",nf.CLOSE="b",nf.ERROR="c",nf.MESSAGE="d",Ai.prototype.listen=Ai.prototype.O,Rr.prototype.listenOnce=Rr.prototype.P,Rr.prototype.getLastError=Rr.prototype.Sa,Rr.prototype.getLastErrorCode=Rr.prototype.Ia,Rr.prototype.getStatus=Rr.prototype.da,Rr.prototype.getResponseJson=Rr.prototype.Wa,Rr.prototype.getResponseText=Rr.prototype.ja,Rr.prototype.send=Rr.prototype.ha,Rr.prototype.setWithCredentials=Rr.prototype.Oa,Bs.prototype.digest=Bs.prototype.l,Bs.prototype.reset=Bs.prototype.reset,Bs.prototype.update=Bs.prototype.j,xn.prototype.add=xn.prototype.add,xn.prototype.multiply=xn.prototype.R,xn.prototype.modulo=xn.prototype.gb,xn.prototype.compare=xn.prototype.X,xn.prototype.toNumber=xn.prototype.ea,xn.prototype.toString=xn.prototype.toString,xn.prototype.getBits=xn.prototype.D,xn.fromNumber=Ts,xn.fromString=function pd(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ri(pd(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ts(Math.pow(e,8)),r=aa,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=Ts(Math.pow(e,a)),r=r.R(a).add(Ts(c))):r=(r=r.R(t)).add(Ts(c))}return r};var TD=Ro.createWebChannelTransport=function(){return new cf},ZE=Ro.getStatEventTarget=function(){return yg()},YE=Ro.ErrorCode=sy,SL=Ro.EventType=vg,AL=Ro.Event=Vc,CD=Ro.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vP=Ro.FetchXmlHttpFactory=py,QE=Ro.WebChannel=tf,IP=Ro.XhrIo=Rr,RL=Ro.Md5=Bs,ff=Ro.Integer=xn;const bD="@firebase/firestore";class Ni{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ni.UNAUTHENTICATED=new Ni(null),Ni.GOOGLE_CREDENTIALS=new Ni("google-credentials-uid"),Ni.FIRST_PARTY=new Ni("first-party-uid"),Ni.MOCK_USER=new Ni("mock-user");let zc="9.23.0";const Po=new Mr.Yd("@firebase/firestore");function Vg(){return Po.logLevel}function $e(n,...e){if(Po.logLevel<=Mr.in.DEBUG){const t=e.map(XE);Po.debug(`Firestore (${zc}): ${n}`,...t)}}function sr(n,...e){if(Po.logLevel<=Mr.in.ERROR){const t=e.map(XE);Po.error(`Firestore (${zc}): ${n}`,...t)}}function oo(n,...e){if(Po.logLevel<=Mr.in.WARN){const t=e.map(XE);Po.warn(`Firestore (${zc}): ${n}`,...t)}}function XE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function Ct(n,e){n||dt()}function at(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Bg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ni.UNAUTHENTICATED))}shutdown(){}}class wP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TP{constructor(e){this.t=e,this.currentUser=Ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=c;e.enqueueRetryable((0,J.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},p=v=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>p(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new Bg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Ni(e)}}class JE{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ni.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class CP{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new JE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bP{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new ew(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function DD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class tw{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=DD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function pf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function SD(n){return n+"\0"}class _r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new _r(0,0))}static max(){return new bt(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _d{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_d.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _d?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends _d{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const DP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends _d{construct(e,t,r){return new or(e,t,r)}static isValidIdentifier(e){return DP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Le(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Le(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Le(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new Le(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(mn.fromString(e))}static fromName(e){return new et(mn.fromString(e).popFirst(5))}static empty(){return new et(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new mn(e.slice()))}}class gf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Cy(n){return n.fields.find(e=>2===e.kind)}function yd(n){return n.fields.filter(e=>2!==e.kind)}gf.UNKNOWN_ID=-1;class by{constructor(e,t){this.fieldPath=e,this.kind=t}}class vd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vd(0,ao.min())}}function rw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(1e9===r?new _r(t+1,0):new _r(t,r));return new ao(i,et.empty(),e)}function iw(n){return new ao(n.readTime,n.key,-1)}class ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ao(bt.min(),et.empty(),-1)}static max(){return new ao(bt.max(),et.empty(),-1)}}function sw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const ow="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nu(n){return jg.apply(this,arguments)}function jg(){return jg=(0,J.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==ow)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),jg.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},p=>r(p))}),c=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let p=0;p<a;p++){const v=p;t(e[v]).next(b=>{c[v]=b,++h,h===a&&r(c)},b=>i(b))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Sy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Or,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new mf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=$g(r.target.error);this.v.reject(new mf(e,i))}}static open(e,t,r,i){try{return new Sy(t,e.transaction(i,r))}catch(a){throw new mf(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AP(t)}}class xo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===xo.S((0,k.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Id(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.hl)())return!1;if(xo.C())return!0;const e=(0,k.z$)(),t=xo.S(e),r=0<t&&t<10,i=xo.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,J.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new mf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Le(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new mf(e,h))},a.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,J.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.$(e);const p=Sy.open(a.db,e,c?"readonly":"readwrite",r),v=i(p).next(b=>(p.P(),b)).catch(b=>(p.abort(b),le.reject(b))).toPromise();return v.catch(()=>{}),yield p.R,v}catch(p){const v=p,b="FirebaseError"!==v.name&&h<3;if($e("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AD{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Id(this.L.delete())}}class mf extends Le{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pu(n){return"IndexedDbTransactionError"===n.name}class AP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Id(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Id(this.store.add(e))}get(e){return Id(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Id(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Id(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const c=$g(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new AD(h),v=t(h.primaryKey,h.value,p);if(v instanceof le){const b=v.catch(S=>(p.done(),le.reject(S)));r.push(b)}p.isDone?i():null===p.K?h.continue():h.continue(p.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Id(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=$g(r.target.error);t(i)}})}let RD=!1;function $g(n){const e=xo.S((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RD||(RD=!0,setTimeout(()=>{throw r},0)),r}}return n}class aw{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,J.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Pu(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Nu(r)}yield t.et(6e4)}))}}class ND{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,J.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return le.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return $e("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(h=>{i-=h,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(h=>($e("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=iw(a);sw(c,r)>0&&(r=c)}),new ao(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Hs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function _f(n){return null==n}function yf(n){return 0===n&&1/n==-1/0}function uw(n){return"number"==typeof n&&Number.isInteger(n)&&!yf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cw(e)),e=PD(n.get(t),e);return cw(e)}function PD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function cw(n){return n+"\x01\x01"}function uo(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:dt()}a=c+2}return new mn(r)}const xu=["userId","batchId"];function Ay(n,e){return[n,Qi(e)]}function xD(n,e,t){return[n,Qi(e),t]}const lw={},Ed=["prefixPath","collectionGroup","readTime","documentId"],dw=["prefixPath","collectionGroup","documentId"],RP=["collectionGroup","readTime","prefixPath","documentId"],hw=["canonicalId","targetId"],xL=["targetId","path"],kL=["path","targetId"],NP=["collectionId","parent"],PP=["indexId","uid"],kD=["uid","sequenceNumber"],xP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_i=["indexId","uid","orderedDocumentKey"],MD=["userId","collectionPath","documentId"],kP=["userId","collectionPath","largestBatchId"],MP=["userId","collectionGroup","largestBatchId"],fw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OP=[...fw,"documentOverlays"],pw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gw=pw,vf=[...gw,"indexConfiguration","indexState","indexEntries"];class mw extends Dy{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Pi(n,e){const t=at(n);return xo.M(t.ht,e)}function _w(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ar{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hg(this.root,e,this.comparator,!0)}}class Hg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??xi.RED,this.left=i??xi.EMPTY,this.right=a??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new xi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return xi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new xi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tn{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OD(this.data.getIterator())}getIteratorFrom(e){return new OD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class OD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function If(n){return n.hasNext()?n.getNext():void 0}class Nr{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new Nr([])}unionWith(e){let t=new Tn(or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ko extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ko("Invalid base64 string: "+i):i}}(e);return new oi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new oi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const LD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qc(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=LD.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lr(n.seconds),nanos:Lr(n.nanos)}}function Lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ku(n){return"string"==typeof n?oi.fromBase64String(n):oi.fromUint8Array(n)}function Ry(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ef(n){const e=n.mapValue.fields.__previous_value__;return Ry(e)?Ef(e):e}function Mu(n){const e=qc(n.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}class LP{constructor(e,t,r,i,a,c,h,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=v}}class Ou{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ou("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}const Kc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ny={nullValue:"NULL_VALUE"};function Lu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ry(n)?4:ww(n)?9007199254740991:10:dt()}function ca(n,e){if(n===e)return!0;const t=Lu(n);if(t!==Lu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mu(n).isEqual(Mu(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=qc(r.timestampValue),c=qc(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ku(n.bytesValue).isEqual(ku(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Lr(r.geoPointValue.latitude)===Lr(i.geoPointValue.latitude)&&Lr(r.geoPointValue.longitude)===Lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Lr(r.integerValue)===Lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Lr(r.doubleValue),c=Lr(i.doubleValue);return a===c?yf(a)===yf(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return pf(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(_w(a)!==_w(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!ca(a[h],c[h])))return!1;return!0}(n,e);default:return dt()}var i}function Zc(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function Yc(n,e){if(n===e)return 0;const t=Lu(n),r=Lu(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Lr(i.integerValue||i.doubleValue),h=Lr(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return vw(n.timestampValue,e.timestampValue);case 4:return vw(Mu(n),Mu(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=ku(i),h=ku(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let p=0;p<c.length&&p<h.length;p++){const v=Bt(c[p],h[p]);if(0!==v)return v}return Bt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Bt(Lr(i.latitude),Lr(a.latitude));return 0!==c?c:Bt(Lr(i.longitude),Lr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let p=0;p<c.length&&p<h.length;++p){const v=Yc(c[p],h[p]);if(v)return v}return Bt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Kc.mapValue&&a===Kc.mapValue)return 0;if(i===Kc.mapValue)return 1;if(a===Kc.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=a.fields||{},v=Object.keys(p);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){const S=Bt(h[b],v[b]);if(0!==S)return S;const x=Yc(c[h[b]],p[v[b]]);if(0!==x)return x}return Bt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw dt()}}function vw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=qc(n),r=qc(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function wd(n){return Py(n)}function Py(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=qc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ku(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Py(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${Py(r.fields[h])}`;return a+"}"}(n.mapValue):dt();var e}function Td(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gg(n){return!!n&&"integerValue"in n}function Cd(n){return!!n&&"arrayValue"in n}function Iw(n){return!!n&&"nullValue"in n}function Ew(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zg(n){return!!n&&"mapValue"in n}function wf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ww(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function FD(n){return"nullValue"in n?Ny:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Td(Ou.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function UD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Td(Ou.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Kc:dt()}function Tw(n,e){const t=Yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VD(n,e){const t=Yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Xi{constructor(e){this.value=e}static empty(){return new Xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wf(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=wf(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());zg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Xi(wf(this.value))}}function BD(n){const e=[];return Wc(n.fields,(t,r)=>{const i=new or([t]);if(zg(r)){const a=BD(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Nr(e)}class ur{constructor(e,t,r,i,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new ur(e,0,bt.min(),bt.min(),bt.min(),Xi.empty(),0)}static newFoundDocument(e,t,r,i){return new ur(e,1,t,bt.min(),r,i,0)}static newNoDocument(e,t){return new ur(e,2,t,bt.min(),bt.min(),Xi.empty(),0)}static newUnknownDocument(e,t){return new ur(e,3,t,bt.min(),bt.min(),Xi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qc{constructor(e,t){this.position=e,this.inclusive=t}}function jD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?et.comparator(et.fromName(c.referenceValue),t.key):Yc(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function $D(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class Tf{constructor(e,t="asc"){this.field=e,this.dir=t}}function FP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class HD{}class _n extends HD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new WD(e,t,r):"array-contains"===t?new ZD(e,r):"in"===t?new Nw(e,r):"not-in"===t?new YD(e,r):"array-contains-any"===t?new QD(e,r):new _n(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new qD(e,r):new KD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yc(t,this.value)):null!==t&&Lu(this.value)===Lu(t)&&this.matchesComparison(Yc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Bn extends HD{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Bn(e,t)}matches(e){return Cf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Cf(n){return"and"===n.op}function Cw(n){return"or"===n.op}function bw(n){return GD(n)&&Cf(n)}function GD(n){for(const e of n.filters)if(e instanceof Bn)return!1;return!0}function Dw(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+wd(n.value);if(bw(n))return n.filters.map(e=>Dw(e)).join(",");{const e=n.filters.map(t=>Dw(t)).join(",");return`${n.op}(${e})`}}function zD(n,e){return n instanceof _n?(t=n,(r=e)instanceof _n&&t.op===r.op&&t.field.isEqual(r.field)&&ca(t.value,r.value)):n instanceof Bn?function(t,r){return r instanceof Bn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&zD(a,r.filters[c]),!0)}(n,e):void dt();var t,r}function Sw(n,e){const t=n.filters.concat(e);return Bn.create(t,n.op)}function Aw(n){return n instanceof _n?`${(e=n).field.canonicalString()} ${e.op} ${wd(e.value)}`:n instanceof Bn?function(e){return e.op.toString()+" {"+e.getFilters().map(Aw).join(" ,")+"}"}(n):"Filter";var e}class WD extends _n{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class qD extends _n{constructor(e,t){super(e,"in",t),this.keys=Rw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class KD extends _n{constructor(e,t){super(e,"not-in",t),this.keys=Rw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class ZD extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cd(t)&&Zc(t.arrayValue,this.value)}}class Nw extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zc(this.value.arrayValue,t)}}class YD extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zc(this.value.arrayValue,t)}}class QD extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zc(this.value.arrayValue,r))}}class XD{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.dt=null}}function Fu(n,e=null,t=[],r=[],i=null,a=null,c=null){return new XD(n,e,t,r,i,a,c)}function bd(n){const e=at(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),_f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wd(r)).join(",")),e.dt=t}return e.dt}function Wg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$D(n.startAt,e.startAt)&&$D(n.endAt,e.endAt)}function Uu(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Pw(n,e){return n.filters.filter(t=>t instanceof _n&&t.field.isEqual(e))}function ky(n,e,t){let r=Ny,i=!0;for(const a of Pw(n,e)){let c=Ny,h=!0;switch(a.op){case"<":case"<=":c=FD(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=Ny}Tw({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];Tw({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function UP(n,e,t){let r=Kc,i=!0;for(const a of Pw(n,e)){let c=Kc,h=!0;switch(a.op){case">=":case">":c=UD(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=Kc}VD({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];VD({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ga{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=p,this.wt=null,this._t=null}}function xw(n,e,t,r,i,a,c,h){return new Ga(n,e,t,r,i,a,c,h)}function qg(n){return new Ga(n)}function Dd(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function kw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function My(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Mw(n){return null!==n.collectionGroup}function Mo(n){const e=at(n);if(null===e.wt){e.wt=[];const t=My(e),r=kw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Tf(t)),e.wt.push(new Tf(or.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Tf(or.keyField(),a))}}}return e.wt}function Cs(n){const e=at(n);if(!e._t)if("F"===e.limitType)e._t=Fu(e.path,e.collectionGroup,Mo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Mo(e))t.push(new Tf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Qc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Qc(e.startAt.position,e.startAt.inclusive):null;e._t=Fu(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function bf(n,e){e.getFirstInequalityField(),My(n);const t=n.filters.concat([e]);return new Ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sd(n,e,t){return new Ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ki(n,e){return Wg(Cs(n),Cs(e))&&n.limitType===e.limitType}function VP(n){return`${bd(Cs(n))}|lt:${n.limitType}`}function Oy(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Aw(r)).join(", ")}]`),_f(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wd(r)).join(",")),`Target(${t})`}(Cs(n))}; limitType=${n.limitType})`}function Df(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Mo(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=jD(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,Mo(t),r)||t.endAt&&!function(i,a,c){const h=jD(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,Mo(t),r)));var t,r}function JD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ow(n){return(e,t)=>{let r=!1;for(const i of Mo(n)){const a=eS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function eS(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),p=c.data.field(i);return null!==h&&null!==p?Yc(h,p):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}class za{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return yw(this.inner)}size(){return this.innerSize}}const tS=new ar(et.comparator);function Gs(){return tS}const nS=new ar(et.comparator);function Kg(...n){let e=nS;for(const t of n)e=e.insert(t.key,t);return e}function Sf(n){let e=nS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wa(){return Zg()}function rS(){return Zg()}function Zg(){return new za(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ly=new ar(et.comparator),iS=new Tn(et.comparator);function qt(...n){let e=iS;for(const t of n)e=e.add(t);return e}const sS=new Tn(Bt);function Lw(){return sS}function Af(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function Rf(n){return{integerValue:""+n}}function oS(n,e){return uw(e)?Rf(e):Af(n,e)}class Fy{constructor(){this._=void 0}}function BP(n,e,t){return n instanceof Ad?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ry(i)&&(i=Ef(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Rd?Uw(n,e):n instanceof Nd?uS(n,e):function(r,i){const a=Fw(r,i),c=jP(a)+jP(r.gt);return Gg(a)&&Gg(r.gt)?Rf(c):Af(r.serializer,c)}(n,e)}function aS(n,e,t){return n instanceof Rd?Uw(n,e):n instanceof Nd?uS(n,e):t}function Fw(n,e){return n instanceof Yg?Gg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ad extends Fy{}class Rd extends Fy{constructor(e){super(),this.elements=e}}function Uw(n,e){const t=$P(e);for(const r of n.elements)t.some(i=>ca(i,r))||t.push(r);return{arrayValue:{values:t}}}class Nd extends Fy{constructor(e){super(),this.elements=e}}function uS(n,e){let t=$P(e);for(const r of n.elements)t=t.filter(i=>!ca(i,r));return{arrayValue:{values:t}}}class Yg extends Fy{constructor(e,t){super(),this.serializer=e,this.gt=t}}function jP(n){return Lr(n.integerValue||n.doubleValue)}function $P(n){return Cd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Uy{constructor(e,t){this.field=e,this.transform=t}}class Vy{constructor(e,t){this.version=e,this.transformResults=t}}class yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function By(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qg{}function Nf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new qa(n.key,yr.none()):new Jg(n.key,n.data,yr.none());{const t=n.data,r=Xi.empty();let i=new Tn(or.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Vu(n.key,r,new Nr(i.toArray()),yr.none())}}function HP(n,e,t){n instanceof Jg?function(r,i,a){const c=r.value.clone(),h=dS(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Vu?function(r,i,a){if(!By(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=dS(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Vw(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Xg(n,e,t,r){return n instanceof Jg?function(i,a,c,h){if(!By(i.precondition,a))return c;const p=i.value.clone(),v=hS(i.fieldTransforms,h,a);return p.setAll(v),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vu?function(i,a,c,h){if(!By(i.precondition,a))return c;const p=hS(i.fieldTransforms,h,a),v=a.data;return v.setAll(Vw(i)),v.setAll(p),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,By(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function GP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Fw(r.transform,i||null);null!=a&&(null===t&&(t=Xi.empty()),t.set(r.field,a))}return t||null}function lS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&pf(t,r,(i,a)=>function cS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rd&&r instanceof Rd||t instanceof Nd&&r instanceof Nd?pf(t.elements,r.elements,ca):t instanceof Yg&&r instanceof Yg?ca(t.gt,r.gt):t instanceof Ad&&r instanceof Ad);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Jg extends Qg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vu extends Qg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Vw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dS(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,aS(c,h,t[i]))}return r}function hS(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,BP(a,c,e))}return r}class qa extends Qg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bw extends Qg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jy{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&HP(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=rS();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const p=Nf(c,h);null!==p&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&pf(this.mutations,e.mutations,(t,r)=>lS(t,r))&&pf(this.baseMutations,e.baseMutations,(t,r)=>lS(t,r))}}class jw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=Ly;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new jw(e,t,r,i)}}class $y{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fS{constructor(e,t){this.count=e,this.unchangedNames=t}}var ai,yn;function pS(n){switch(n){default:return dt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function $w(n){if(void 0===n)return sr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case ai.OK:return fe.OK;case ai.CANCELLED:return fe.CANCELLED;case ai.UNKNOWN:return fe.UNKNOWN;case ai.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case ai.INTERNAL:return fe.INTERNAL;case ai.UNAVAILABLE:return fe.UNAVAILABLE;case ai.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case ai.NOT_FOUND:return fe.NOT_FOUND;case ai.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case ai.ABORTED:return fe.ABORTED;case ai.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case ai.DATA_LOSS:return fe.DATA_LOSS;default:return dt()}}(yn=ai||(ai={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class Hy{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Gy}static getOrCreateInstance(){return null===Gy&&(Gy=new Hy),Gy}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Gy=null;function gS(){return new TextEncoder}const WP=new ff([4294967295,4294967295],0);function zy(n){const e=gS().encode(n),t=new RL;return t.update(e),new Uint8Array(t.digest())}function mS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ff([t,r],0),new ff([i,a],0)]}class Wy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new em(`Invalid padding: ${t}`);if(r<0)throw new em(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new em(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new em(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ff.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(ff.fromNumber(r)));return 1===i.compare(WP)&&(i=new ff([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=zy(e),[r,i]=mS(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Wy(a,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(0===this.It)return;const t=zy(e),[r,i]=mS(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class em extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,nm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tm(bt.min(),i,new ar(Bt),Gs(),qt())}}class nm{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nm(r,t,qt(),qt(),qt())}}class qy{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class _S{constructor(e,t){this.targetId=e,this.Vt=t}}class yS{constructor(e,t,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class vS{constructor(){this.St=0,this.Dt=Gw(),this.Ct=oi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new nm(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Gw()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class qP{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Gs(),this.zt=Hw(),this.Wt=new ar(Bt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(Uu(c))if(0===i){const h=new et(c.path);this.Yt(r,h,ur.newNoDocument(h,bt.min()))}else Ct(1===i);else{const h=this.ie(r);if(h!==i){const p=this.re(e,h);0!==p&&(this.ee(r),this.Wt=this.Wt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Hy.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,b,S){var x,$,X,pe,we,Je;const ct={localCacheCount:b,existenceFilterCount:S.count},tt=S.unchangedNames;return tt&&(ct.bloomFilter={applied:0===v,hashCount:null!==(x=tt?.hashCount)&&void 0!==x?x:0,bitmapLength:null!==(pe=null===(X=null===($=tt?.bits)||void 0===$?void 0:$.bitmap)||void 0===X?void 0:X.length)&&void 0!==pe?pe:0,padding:null!==(Je=null===(we=tt?.bits)||void 0===we?void 0:we.padding)&&void 0!==Je?Je:0}),ct}(p,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:h=0}=r;let p,v;try{p=ku(a).toUint8Array()}catch(b){if(b instanceof ko)return oo("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{v=new Wy(p,c,h)}catch(b){return oo(b instanceof em?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(h)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const h=this.se(c);if(h){if(a.current&&Uu(h.target)){const p=new et(h.target.path);null!==this.jt.get(p)||this.ae(c,p)||this.Yt(c,p,ur.newNoDocument(p,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=qt();this.zt.forEach((a,c)=>{let h=!0;c.forEachWhile(p=>{const v=this.se(p);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new tm(e,t,this.Wt,this.jt,r);return this.jt=Gs(),this.zt=Hw(),this.Wt=new ar(Bt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new vS,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Tn(Bt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new vS),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Hw(){return new ar(et.comparator)}function Gw(){return new ar(et.comparator)}const KP={asc:"ASCENDING",desc:"DESCENDING"},ZP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IS={and:"AND",or:"OR"};class YP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zw(n,e){return n.useProto3Json||_f(e)?e:{value:e}}function Pf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ES(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ww(n,e){return Pf(n,e.toTimestamp())}function Pr(n){return Ct(!!n),bt.fromTimestamp(function(e){const t=qc(e);return new _r(t.seconds,t.nanos)}(n))}function Ky(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zy(n){const e=mn.fromString(n);return Ct(t0(e)),e}function rm(n,e){return Ky(n.databaseId,e.path)}function Ka(n,e){const t=Zy(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(Xc(t))}function im(n,e){return Ky(n.databaseId,e)}function wS(n){const e=Zy(n);return 4===e.length?mn.emptyPath():Xc(e)}function sm(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Xc(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qw(n,e,t){return{name:rm(n,e),fields:t.value.mapValue.fields}}function TS(n,e,t){const r=Ka(n,e.name),i=Pr(e.updateTime),a=e.createTime?Pr(e.createTime):bt.min(),c=new Xi({mapValue:{fields:e.fields}}),h=ur.newFoundDocument(r,i,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Pd(n,e){let t;if(e instanceof Jg)t={update:qw(n,e.key,e.value)};else if(e instanceof qa)t={delete:rm(n,e.key)};else if(e instanceof Vu)t={update:qw(n,e.key,e.data),updateMask:QP(e.fieldMask)};else{if(!(e instanceof Bw))return dt();t={verify:rm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Ad)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Rd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Nd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Yg)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Ww(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function Zw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?yr.updateTime(Pr(i.updateTime)):void 0!==i.exists?yr.exists(i.exists):yr.none():yr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),h=new Ad):"appendMissingElements"in c?h=new Rd(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Nd(c.removeAllFromArray.values||[]):"increment"in c?h=new Yg(a,c.increment):dt();const p=or.fromServerFormat(c.fieldPath);return new Uy(p,h)}(n,i)):[];var i;if(e.update){const i=Ka(n,e.update.name),a=new Xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Nr((e.updateMask.fieldPaths||[]).map(v=>or.fromServerFormat(v)));return new Vu(i,a,c,t,r)}return new Jg(i,a,t,r)}if(e.delete){const i=Ka(n,e.delete);return new qa(i,t)}if(e.verify){const i=Ka(n,e.verify);return new Bw(i,t)}return dt()}function Yw(n,e){return{documents:[im(n,e.path)]}}function Qw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=im(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=im(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return AS(Bn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(v=>{return{field:Jc((b=v).field),direction:bS(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=zw(n,e.limit);var h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function Xw(n){let e=wS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const S=e0(b);return S instanceof Bn&&bw(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new Tf(xf((S=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(b){let S;return S="object"==typeof b?b.value:b,_f(S)?null:S}(t.limit));let p=null;var b;t.startAt&&(p=new Qc((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new Qc(b.values||[],!b.before)}(t.endAt)),xw(e,i,c,a,h,"F",p,v)}function e0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xf(e.unaryFilter.field);return _n.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=xf(e.unaryFilter.field);return _n.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xf(e.unaryFilter.field);return _n.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xf(e.unaryFilter.field);return _n.create(a,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(n):void 0!==n.fieldFilter?_n.create(xf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Bn.create(e.compositeFilter.filters.map(t=>e0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dt()}}(e.compositeFilter.op))}(n):dt();var e}function bS(n){return KP[n]}function DS(n){return ZP[n]}function SS(n){return IS[n]}function Jc(n){return{fieldPath:n.canonicalString()}}function xf(n){return or.fromServerFormat(n.fieldPath)}function AS(n){return n instanceof _n?function(e){if("=="===e.op){if(Ew(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NAN"}};if(Iw(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ew(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NAN"}};if(Iw(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jc(e.field),op:DS(e.op),value:e.value}}}(n):n instanceof Bn?function(e){const t=e.getFilters().map(r=>AS(r));return 1===t.length?t[0]:{compositeFilter:{op:SS(e.op),filters:t}}}(n):dt()}function QP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function t0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class el{constructor(e,t,r,i,a=bt.min(),c=bt.min(),h=oi.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new el(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class n0{constructor(e){this.fe=e}}function RS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:r0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rm(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Pf(i,a.version.toTimestamp()),createTime:Pf(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xd(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:xd(e.version)}}var i,a;return r}function r0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kd(n){const e=new _r(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Md(n,e){const t=(e.baseMutations||[]).map(a=>Zw(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Zw(n.fe,a)),i=_r.fromMillis(e.localWriteTimeMs);return new jy(e.batchId,i,t,r)}function om(n){const e=kd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kd(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=Cs(qg(wS(i.documents[0])))):r=Cs(Xw(n.query)),new el(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,oi.fromBase64String(n.resumeToken))}function NS(n,e){const t=xd(e.snapshotVersion),r=xd(e.lastLimboFreeSnapshotVersion);let i;i=Uu(e.target)?Yw(n.fe,e.target):Qw(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bd(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function s0(n){const e=Xw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Sd(e,e.limit,"L"):e}function o0(n,e){return new $y(e.largestBatchId,Zw(n.fe,e.overlayMutation))}function PS(n,e){const t=e.path.lastSegment();return[n,Qi(e.path.popLast()),t]}function xS(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xd(r.readTime),documentKey:Qi(r.documentKey.path),largestBatchId:r.largestBatchId}}class JP{getBundleMetadata(e,t){return kS(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:kd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return kS(e).put({bundleId:(r=t).id,createTime:xd(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return MS(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:s0(i.bundledQuery),readTime:kd(i.readTime)};var i})}saveNamedQuery(e,t){return MS(e).put({name:(r=t).name,readTime:xd(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function kS(n){return Pi(n,"bundles")}function MS(n){return Pi(n,"namedQueries")}class tl{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new tl(e,t.uid||"")}getOverlay(e,t){return kf(e).get(PS(this.userId,t)).next(r=>r?o0(this.serializer,r):null)}getOverlays(e,t){const r=Wa();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const h=new $y(t,c);i.push(this.we(e,h))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Qi(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(kf(e).J("collectionPathOverlayIndex",h))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Wa(),a=Qi(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return kf(e).j("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const v=o0(this.serializer,p);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Wa();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kf(e).X({index:"collectionGroupOverlayIndex",range:h},(p,v,b)=>{const S=o0(this.serializer,v);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):b.done()}).next(()=>a)}we(e,t){return kf(e).put(function(r,i,a){const[c,h,p]=PS(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Pd(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function kf(n){return Pi(n,"documentOverlays")}class nl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Lr(e.integerValue));else if("doubleValue"in e){const r=Lr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),yf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ku(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?ww(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):dt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function OS(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function a0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=OS(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}nl.Ve=new nl;class LS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=a0(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=a0(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ex{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class tx{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yy{constructor(){this.je=new LS,this.ze=new ex(this.je),this.We=new tx(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Mf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mf(this.indexId,this.documentKey,this.arrayValue,r)}}function rl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=FS(n.arrayValue,e.arrayValue),0!==t?t:(t=FS(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function FS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Ct(e.collectionGroup===this.collectionId);const t=Cy(e);if(void 0!==t&&!this.en(t))return!1;const r=yd(e);let i=new Set,a=0,c=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[a];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[c++],h))return!1}++a}for(;a<r.length;++a)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function US(n){var e,t;if(Ct(n instanceof _n||n instanceof Bn),n instanceof _n){if(n instanceof Nw){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>_n.create(n.field,"==",a)))||[];return Bn.create(i,"or")}return n}const r=n.filters.map(i=>US(i));return Bn.create(r,n.op)}function rx(n){if(0===n.getFilters().length)return[];const e=c0(US(n));return Ct(Qy(e)),Od(e)||u0(e)?[e]:e.getFilters()}function Od(n){return n instanceof _n}function u0(n){return n instanceof Bn&&bw(n)}function Qy(n){return Od(n)||u0(n)||function(e){if(e instanceof Bn&&Cw(e)){for(const t of e.getFilters())if(!Od(t)&&!u0(t))return!1;return!0}return!1}(n)}function c0(n){if(Ct(n instanceof _n||n instanceof Bn),n instanceof _n)return n;if(1===n.filters.length)return c0(n.filters[0]);const e=n.filters.map(r=>c0(r));let t=Bn.create(e,n.op);return t=l0(t),Qy(t)?t:(Ct(t instanceof Bn),Ct(Cf(t)),Ct(t.filters.length>1),t.filters.reduce((r,i)=>VS(r,i)))}function VS(n,e){let t;return Ct(n instanceof _n||n instanceof Bn),Ct(e instanceof _n||e instanceof Bn),t=n instanceof _n?e instanceof _n?Bn.create([n,e],"and"):BS(n,e):e instanceof _n?BS(e,n):function(r,i){if(Ct(r.filters.length>0&&i.filters.length>0),Cf(r)&&Cf(i))return Sw(r,i.getFilters());const a=Cw(r)?r:i,c=Cw(r)?i:r,h=a.filters.map(p=>VS(p,c));return Bn.create(h,"or")}(n,e),l0(t)}function BS(n,e){if(Cf(e))return Sw(e,n.getFilters());{const t=e.filters.map(r=>VS(n,r));return Bn.create(t,"or")}}function l0(n){if(Ct(n instanceof _n||n instanceof Bn),n instanceof _n)return n;const e=n.getFilters();if(1===e.length)return l0(e[0]);if(GD(n))return n;const t=e.map(i=>l0(i)),r=[];return t.forEach(i=>{i instanceof _n?r.push(i):i instanceof Bn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Bn.create(r,n.op)}class am{constructor(){this.rn=new d0}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ao.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class d0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(mn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(mn.comparator)).toArray()}}const Xy=new Uint8Array(0);class ix{constructor(e,t){this.user=e,this.databaseId=t,this.on=new d0,this.un=new za(r=>bd(r),(r,i)=>Wg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Qi(i)};return um(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[SD(t),""],!1,!0);return um(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(uo(c.parent))}return r})}addFieldIndex(e,t){const r=Jy(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=Lf(e);return a.next(h=>{c.put(xS(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Jy(e),i=Lf(e),a=Of(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Of(e);let i=!0;const a=new Map;return le.forEach(this.cn(t),c=>this.an(e,c).next(h=>{i&&(i=!!h),a.set(c,h)})).next(()=>{if(i){let c=qt();const h=[];return le.forEach(a,(p,v)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${bd(t)}`);const S=function(tt,ft){const kt=Cy(ft);if(void 0===kt)return null;for(const zt of Pw(tt,kt.fieldPath))switch(zt.op){case"array-contains-any":return zt.value.arrayValue.values||[];case"array-contains":return[zt.value]}return null}(v,p),x=function(tt,ft){const kt=new Map;for(const zt of yd(ft))for(const Yr of Pw(tt,zt.fieldPath))switch(Yr.op){case"==":case"in":kt.set(zt.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return kt.set(zt.fieldPath.canonicalString(),Yr.value),Array.from(kt.values())}return null}(v,p),$=function(tt,ft){const kt=[];let zt=!0;for(const Yr of yd(ft)){const po=0===Yr.kind?ky(tt,Yr.fieldPath,tt.startAt):UP(tt,Yr.fieldPath,tt.startAt);kt.push(po.value),zt&&(zt=po.inclusive)}return new Qc(kt,zt)}(v,p),X=function(tt,ft){const kt=[];let zt=!0;for(const Yr of yd(ft)){const po=0===Yr.kind?UP(tt,Yr.fieldPath,tt.endAt):ky(tt,Yr.fieldPath,tt.endAt);kt.push(po.value),zt&&(zt=po.inclusive)}return new Qc(kt,zt)}(v,p),pe=this.hn(p,v,$),we=this.hn(p,v,X),Je=this.ln(p,v,x),ct=this.fn(p.indexId,S,pe,$.inclusive,we,X.inclusive,Je);return le.forEach(ct,tt=>r.H(tt,t.limit).next(ft=>{ft.forEach(kt=>{const zt=et.fromSegments(kt.documentKey);c.has(zt)||(c=c.add(zt),h.push(zt))})}))}).next(()=>h)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:rx(Bn.create(e.filters,"and")).map(r=>Fu(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,a.length),v=p/(null!=t?t.length:1),b=[];for(let S=0;S<p;++S){const x=t?this.dn(t[S/v]):Xy,$=this.wn(e,x,r[S%v],i),X=this._n(e,x,a[S%v],c),pe=h.map(we=>this.wn(e,x,we,!0));b.push(...this.createRange($,X,pe))}return b}wn(e,t,r,i){const a=new Mf(e,et.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Mf(e,et.empty(),t,r);return i?a.Je():a}an(e,t){const r=new nx(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const h of a)r.tn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return le.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let p=new Tn(or.comparator),v=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:p=p.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Yy;for(const i of yd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);nl.Ve._e(a,c)}return r.Qe()}dn(e){const t=new Yy;return nl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Yy;return nl.Ve._e(Td(this.databaseId,t),r.He(function(i){const a=yd(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Yy);let a=0;for(const c of yd(e)){const h=r[a++];for(const p of i)if(this.yn(t,c.fieldPath)&&Cd(h))i=this.pn(i,c,h);else{const v=p.He(c.kind);nl.Ve._e(h,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new Yy;p.seed(h.Qe()),nl.Ve._e(c,p.He(t.kind)),a.push(p)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof _n&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Jy(e),i=Lf(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return le.forEach(a,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(v,b){const S=b?new vd(b.sequenceNumber,new ao(kd(b.readTime),new et(uo(b.documentKey)),b.largestBatchId)):vd.empty(),x=v.fields.map(([$,X])=>new by(or.fromServerFormat($),X));return new gf(v.indexId,v.collectionGroup,x,S)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Jy(e),a=Lf(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>le.forEach(h,p=>a.put(xS(p.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?le.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),le.forEach(h,p=>this.En(e,i,p).next(v=>{const b=this.An(a,p);return v.isEqual(b)?le.resolve():this.vn(e,a,p,v,b)}))))})}Rn(e,t,r,i){return Of(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Of(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Of(e);let a=new Tn(rl);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,h)=>{a=a.add(new Mf(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}An(e,t){let r=new Tn(rl);const i=this.mn(t,e);if(null==i)return r;const a=Cy(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Cd(c))for(const h of c.arrayValue.values||[])r=r.add(new Mf(t.indexId,e.key,this.dn(h),i))}else r=r.add(new Mf(t.indexId,e.key,Xy,i));return r}vn(e,t,r,i,a){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,v,b,S){const x=h.getIterator(),$=p.getIterator();let X=If(x),pe=If($);for(;X||pe;){let we=!1,Je=!1;if(X&&pe){const ct=v(X,pe);ct<0?Je=!0:ct>0&&(we=!0)}else null!=X?Je=!0:we=!0;we?(b(pe),pe=If($)):Je?(S(X),X=If(x)):(X=If(x),pe=If($))}}(i,a,rl,h=>{c.push(this.Rn(e,t,r,h))},h=>{c.push(this.Pn(e,t,r,h))}),le.waitFor(c)}Tn(e){let t=1;return Lf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>rl(c,h)).filter((c,h,p)=>!h||0!==rl(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=rl(c,e),p=rl(c,t);if(0===h)i[0]=e.Je();else if(h>0&&p<0)i.push(c),i.push(c.Je());else if(p>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Xy,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Xy,[]]))}return a}bn(e,t){return rl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cm)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||dt())).next(cm)}}function um(n){return Pi(n,"collectionParents")}function Of(n){return Pi(n,"indexEntries")}function Jy(n){return Pi(n,"indexConfiguration")}function Lf(n){return Pi(n,"indexState")}function cm(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;sw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ao(e.readTime,e.documentKey,t)}const jS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class us{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new us(e,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function h0(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.X({range:c},(b,S,x)=>(h++,x.delete()));a.push(p.next(()=>{Ct(1===h)}));const v=[];for(const b of t.mutations){const S=xD(e,b.key.path,t.batchId);a.push(i.delete(S)),v.push(b.key)}return le.waitFor(a).next(()=>v)}function ev(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(41943040,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);class tv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new tv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return la(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ff(e),c=la(e);return c.add({}).next(h=>{Ct("number"==typeof h);const p=new jy(h,t,r,i),v=function(x,$,X){const pe=X.baseMutations.map(Je=>Pd(x.fe,Je)),we=X.mutations.map(Je=>Pd(x.fe,Je));return{userId:$,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:pe,mutations:we}}(this.serializer,this.userId,p),b=[];let S=new Tn((x,$)=>Bt(x.canonicalString(),$.canonicalString()));for(const x of i){const $=xD(this.userId,x.key.path,h);S=S.add(x.key.path.popLast()),b.push(c.put(v)),b.push(a.put($,lw))}return S.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Vn[h]=p.keys()}),le.waitFor(b).next(()=>p)})}lookupMutationBatch(e,t){return la(e).get(t).next(r=>r?(Ct(r.userId===this.userId),Md(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return la(e).X({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(Ct(h.batchId>=r),a=Md(this.serializer,h)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return la(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return la(e).j("userMutationsIndex",t).next(r=>r.map(i=>Md(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ay(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ff(e).X({range:i},(c,h,p)=>{const[v,b,S]=c,x=uo(b);if(v===this.userId&&t.path.isEqual(x))return la(e).get(S).next($=>{if(!$)throw dt();Ct($.userId===this.userId),a.push(Md(this.serializer,$))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Bt);const i=[];return t.forEach(a=>{const c=Ay(this.userId,a.path),h=IDBKeyRange.lowerBound(c),p=Ff(e).X({range:h},(v,b,S)=>{const[x,$,X]=v,pe=uo($);x===this.userId&&a.path.isEqual(pe)?r=r.add(X):S.done()});i.push(p)}),le.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Ay(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new Tn(Bt);return Ff(e).X({range:c},(p,v,b)=>{const[S,x,$]=p,X=uo(x);S===this.userId&&r.isPrefixOf(X)?X.length===i&&(h=h.add($)):b.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(la(e).get(a).next(c=>{if(null===c)throw dt();Ct(c.userId===this.userId),r.push(Md(this.serializer,c))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return h0(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ff(e).X({range:r},(a,c,h)=>{if(a[0]===this.userId){const p=uo(a[1]);i.push(p)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return f0(e,this.userId,t)}xn(e){return $S(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function f0(n,e,t){const r=Ay(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Ff(n).X({range:a,Y:!0},(h,p,v)=>{const[b,S,x]=h;b===e&&S===i&&(c=!0),v.done()}).next(()=>c)}function la(n){return Pi(n,"mutations")}function Ff(n){return Pi(n,"documentMutations")}function $S(n){return Pi(n,"mutationQueues")}class il{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new il(0)}static Mn(){return new il(-1)}}class HS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new il(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>bt.fromTimestamp(new _r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>sl(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return sl(e).X((c,h)=>{const p=om(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,a.push(this.removeTargetData(e,p)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return sl(e).X((r,i)=>{const a=om(i);t(a)})}$n(e){return p0(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}On(e,t){return p0(e).put("targetGlobalKey",t)}Fn(e,t){return sl(e).put(NS(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=bd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return sl(e).X({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const v=om(h);Wg(t,v.target)&&(a=v,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ol(e);return t.forEach(c=>{const h=Qi(c.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=ol(e);return le.forEach(t,a=>{const c=Qi(a.path);return le.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ol(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ol(e);let a=qt();return i.X({range:r,Y:!0},(c,h,p)=>{const v=uo(c[1]),b=new et(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Qi(t.path),i=IDBKeyRange.bound([r],[SD(r)],!1,!0);let a=0;return ol(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,h],p,v)=>{0!==c&&(a++,v.done())}).next(()=>a>0)}le(e,t){return sl(e).get(t).next(r=>r?om(r):null)}}function sl(n){return Pi(n,"targets")}function p0(n){return Pi(n,"targetGlobal")}function ol(n){return Pi(n,"targetDocuments")}function g0([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class GS{constructor(e){this.Ln=e,this.buffer=new Tn(g0),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();g0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,J.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Pu(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Nu(r)}yield t.Qn(3e5)}))}}class sx{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Hs.ct);const r=new GS(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(jS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jS):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,h,p,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),Vg()<=Mr.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(p-h)+`ms\n\tRemoved ${S} documents in `+(v-p)+`ms\nTotal Duration: ${v-b}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class m0{constructor(e,t){this.db=e,this.garbageCollector=function nv(n,e){return new sx(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return lm(e,r)}removeReference(e,t,r){return lm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lm(e,t)}Xn(e,t){return function(r,i){let a=!1;return $S(r).Z(c=>f0(r,c,i).next(h=>(h&&(a=!0),le.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,h)=>{if(h<=t){const p=this.Xn(e,c).next(v=>{if(!v)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),ol(e).delete([0,Qi(c.path)])))});i.push(p)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lm(e,t)}Yn(e,t){const r=ol(e);let i,a=Hs.ct;return r.X({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:v})=>{0===c?(a!==Hs.ct&&t(new et(uo(i)),a),a=v,i=p):a=Hs.ct}).next(()=>{a!==Hs.ct&&t(new et(uo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lm(n,e){return ol(n).put((r=n.currentSequenceNumber,{targetId:0,path:Qi(e.path),sequenceNumber:r}));var r}class rv{constructor(){this.changes=new za(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _0{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ld(e).put(r)}removeEntry(e,t,r){return Ld(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],r0(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=ur.newInvalidDocument(t);return Ld(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Uf(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:ur.newInvalidDocument(t)};return Ld(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Uf(t))},(i,a)=>{r={document:this.ts(t,a),size:ev(a)}}).next(()=>r)}getEntries(e,t){let r=Gs();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Gs(),i=new ar(et.comparator);return this.ns(e,t,(a,c)=>{const h=this.ts(a,c);r=r.insert(a,h),i=i.insert(a,ev(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let i=new Tn(y0);t.forEach(p=>i=i.add(p));const a=IDBKeyRange.bound(Uf(i.first()),Uf(i.last())),c=i.getIterator();let h=c.getNext();return Ld(e).X({index:"documentKeyIndex",range:a},(p,v,b)=>{const S=et.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&y0(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,v),h=c.hasNext()?c.getNext():null),h?b.G(Uf(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),r0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ld(e).j(IDBKeyRange.bound(c,h,!0)).next(p=>{let v=Gs();for(const b of p){const S=this.ts(et.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(Df(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=Gs();const c=iv(t,r),h=iv(t,ao.max());return Ld(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,v,b)=>{const S=this.ts(et.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new ox(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qS(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Zn(e,t){return qS(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function XP(n,e){let t;if(e.document)t=TS(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=kd(e.noDocument.readTime);t=ur.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=et.fromSegments(e.unknownDocument.path),i=kd(e.unknownDocument.version);t=ur.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new _r(r[0],r[1]);return bt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return ur.newInvalidDocument(e)}}function WS(n){return new _0(n)}class ox extends rv{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new za(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Tn((a,c)=>Bt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.us.get(a);if(t.push(this.os.removeEntry(e,a,h.readTime)),c.isValidDocument()){const p=RS(this.os.serializer,c);i=i.add(a.path.popLast());const v=ev(p);r+=v-h.size,t.push(this.os.addEntry(e,a,p))}else if(r-=h.size,this.trackRemovals){const p=RS(this.os.serializer,c.convertToNoDocument(bt.min()));t.push(this.os.addEntry(e,a,p))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function qS(n){return Pi(n,"remoteDocumentGlobal")}function Ld(n){return Pi(n,"remoteDocumentsV14")}function Uf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iv(n,e){const t=e.documentKey.path.toArray();return[n,r0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function y0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class ax{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class v0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Xg(r.mutation,i,Nr.empty(),_r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const i=Wa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Kg();return a.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Wa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Gs();const c=Zg(),h=Zg();return t.forEach((p,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof Vu)?a=a.insert(v.key,v):void 0!==b?(c.set(v.key,b.mutation.getFieldMask()),Xg(b.mutation,v,b.mutation.getFieldMask(),_r.now())):c.set(v.key,Nr.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((v,b)=>c.set(v,b)),t.forEach((v,b)=>{var S;return h.set(v,new ax(b,null!==(S=c.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Zg();let i=new ar((c,h)=>c-h),a=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const v=t.get(p);if(null===v)return;let b=r.get(p)||Nr.empty();b=h.applyToLocalView(v,b),r.set(p,b);const S=(i.get(h.batchId)||qt()).add(p);i=i.insert(h.batchId,S)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),v=p.key,b=p.value,S=rS();b.forEach(x=>{if(!a.has(x)){const $=Nf(t.get(x),r.get(x));null!==$&&S.set(x,$),a=a.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,S))}return le.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(Wa());let h=-1,p=a;return c.next(v=>le.forEach(v,(b,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(b)?le.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{p=p.insert(b,x)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,p,v,qt())).next(b=>({batchId:h,changes:Sf(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=Kg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Kg();return this.indexManager.getCollectionParents(e,i).next(c=>le.forEach(c,h=>{const p=(v=t,b=h.child(i),new Ga(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(v=>{v.forEach((b,S)=>{a=a.insert(b,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,p)=>{const v=p.getKey();null===a.get(v)&&(a=a.insert(v,ur.newInvalidDocument(v)))});let c=Kg();return a.forEach((h,p)=>{const v=i.get(h);void 0!==v&&Xg(v.mutation,p,Nr.empty(),_r.now()),Df(t,p)&&(c=c.insert(h,p))}),c})}}class KS{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:s0(r.bundledQuery),readTime:Pr(r.readTime)}),le.resolve();var r}}class ux{constructor(){this.overlays=new ar(et.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wa();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Wa(),a=t.length+1,c=new et(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ar((v,b)=>v-b);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=Wa(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const h=Wa(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,b)=>h.set(v,b)),!(h.size()>=i)););return le.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $y(t,r));let a=this.ls.get(t);void 0===a&&(a=qt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class sv{constructor(){this.fs=new Tn(yi.ds),this.ws=new Tn(yi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new yi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new yi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new et(new mn([])),r=new yi(t,e),i=new yi(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new mn([])),r=new yi(t,e),i=new yi(t,e+1);let a=qt();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new yi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||Bt(e.As,t.As)}static _s(e,t){return Bt(e.As,t.As)||et.comparator(e.key,t.key)}}class cx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Tn(yi.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new jy(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Rs=this.Rs.add(new yi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yi(t,0),i=new yi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const h=this.Ps(c.As);a.push(h)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Bt);return t.forEach(i=>{const a=new yi(i,0),c=new yi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],h=>{r=r.add(h.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;et.isDocumentKey(a)||(a=a.child(""));const c=new yi(new et(a),0);let h=new Tn(Bt);return this.Rs.forEachWhile(p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(p.As)),!0)},c),le.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,i=>{const a=new yi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new yi(t,0),i=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZS{constructor(e){this.Ds=e,this.docs=new ar(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ur.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Gs();const c=t.path,h=new et(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:v,value:{document:b}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||sw(iw(b),r)<=0||(i.has(b.key)||Df(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,t,r,i){dt()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lx(this)}getSize(e){return le.resolve(this.size)}}class lx extends rv{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class bs{constructor(e){this.persistence=e,this.xs=new za(t=>bd(t),Wg),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new sv,this.targetCount=0,this.Ms=il.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new il(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class al{constructor(e,t){this.$s={},this.overlays={},this.Os=new Hs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new bs(this),this.indexManager=new am,this.remoteDocumentCache=new ZS(r=>this.referenceDelegate.Ls(r)),this.serializer=new n0(t),this.qs=new KS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ux,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new cx(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new dx(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class dx extends Dy{constructor(e){super(),this.currentSequenceNumber=e}}class ov{constructor(e){this.persistence=e,this.Qs=new sv,this.js=null}static zs(e){return new ov(e)}get Ws(){if(this.js)return this.js;throw dt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const i=et.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,bt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class OL{constructor(e){this.serializer=e}O(e,t,r,i){const a=new Sy("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xu,{unique:!0}),h.createObjectStore("documentMutations"),E0(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=le.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),E0(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").j().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xu,{unique:!0});const b=p.store("mutations"),S=v.map(x=>b.put(x));return le.waitFor(S)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:MD});p.createIndex("collectionPathOverlayIndex",kP,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",MP,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:Ed});p.createIndex("documentKeyIndex",dw),p.createIndex("collectionGroupIndex",RP)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:PP}).createIndex("sequenceNumberIndex",kD,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:xP}).createIndex("documentKeyIndex",_i,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=ev(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>le.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(h=>le.forEach(h,p=>{Ct(p.userId===a.userId);const v=Md(this.serializer,p);return h0(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,h)=>{const p=new mn(c),v=[0,Qi(p)];a.push(t.get(v).next(b=>b?le.resolve():t.put({targetId:0,path:Qi(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:NP});const r=t.store("collectionParents"),i=new d0,a=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:Qi(p)})}};return t.store("remoteDocuments").X({Y:!0},(c,h)=>{const p=new mn(c);return a(p.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,h,p],v)=>{const b=uo(h);return a(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=om(i),c=NS(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const h=t.store("remoteDocumentsV14"),p=(v=c,v.document?new et(mn.fromString(v.document.name).popFirst(5)):v.noDocument?et.fromSegments(v.noDocument.path):v.unknownDocument?et.fromSegments(v.unknownDocument.path):dt()).path.toArray();var v;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(b))}).next(()=>le.waitFor(i))}si(e,t){const r=t.store("mutations"),i=WS(this.serializer),a=new al(ov.zs,this.serializer.fe);return r.j().next(c=>{const h=new Map;return c.forEach(p=>{var v;let b=null!==(v=h.get(p.userId))&&void 0!==v?v:qt();Md(this.serializer,p).keys().forEach(S=>b=b.add(S)),h.set(p.userId,b)}),le.forEach(h,(p,v)=>{const b=new Ni(v),S=tl.de(this.serializer,b),x=a.getIndexManager(b),$=tv.de(b,this.serializer,x,a.referenceDelegate);return new v0(i,$,S,x).recalculateAndSaveOverlaysForDocumentKeys(new mw(t,Hs.ct),p).next()})})}}function E0(n){n.createObjectStore("targetDocuments",{keyPath:xL}).createIndex("documentTargetsIndex",kL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hw,{unique:!0}),n.createObjectStore("targetGlobal")}const dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class YS{constructor(e,t,r,i,a,c,h,p,v,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=h,this.ri=v,this.oi=b,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=x=>Promise.resolve(),!YS.D())throw new Le(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m0(this,i),this.di=t+"main",this.serializer=new n0(p),this.wi=new xo(this.di,this.ui,new OL(this.serializer)),this.Bs=new HS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WS(this.serializer),this.qs=new JP,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(fe.FAILED_PRECONDITION,dm);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Hs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,J.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,J.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,J.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>w0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Pu(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return av(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return w0(e).delete(this.clientId)}bi(){var e=this;return(0,J.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Pi(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),h=a.filter(p=>-1===c.indexOf(p));return le.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):av(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Le(fe.FAILED_PRECONDITION,dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||w0(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,J.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new mw(t,Hs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>w0(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return tv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ix(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return tl.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?vf:14===c?gw:13===c?pw:12===c?OP:11===c?fw:void dt();var c;let h;return this.wi.runTransaction(e,i,a,p=>(h=new mw(p,this.Os?this.Os.next():Hs.ct),"readwrite-primary"===t?this.Ti(h).next(v=>!!v||this.Ei(h)).next(v=>{if(!v)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Le(fe.FAILED_PRECONDITION,ow);return r(h)}).next(v=>this.vi(h).next(()=>v)):this.Oi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Oi(e){return av(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(fe.FAILED_PRECONDITION,dm)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return av(e).put("owner",t)}static D(){return xo.D()}Ai(e){const t=av(e);return t.get("owner").next(r=>this.Ri(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,k.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function av(n){return Pi(n,"owner")}function w0(n){return Pi(n,"clientMetadata")}function Fd(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class T0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=qt(),i=qt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new T0(e,t.fromCache,r,i)}}class uv{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(Dd(t))return le.resolve(null);let r=Cs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Sd(t,null,"F"),r=Cs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=qt(...a);return this.Ui.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const v=this.ji(t,h);return this.zi(t,v,c,p.readTime)?this.Ki(e,Sd(t,null,"F")):this.Wi(e,v,t,p)}))})))}Gi(e,t,r,i){return Dd(t)||i.isEqual(bt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(Vg()<=Mr.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oy(t)),this.Wi(e,c,t,rw(i,-1)))})}ji(e,t){let r=new Tn(Ow(e));return t.forEach((i,a)=>{Df(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return Vg()<=Mr.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Oy(t)),this.Ui.getDocumentsMatchingQuery(e,t,ao.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class hx{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new ar(Bt),this.Yi=new za(a=>bd(a),Wg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function C0(n,e,t,r){return new hx(n,e,t,r)}function QS(n,e){return b0.apply(this,arguments)}function b0(){return b0=(0,J.Z)(function*(n,e){const t=at(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let p=qt();for(const v of i){c.push(v.batchId);for(const b of v.mutations)p=p.add(b.key)}for(const v of a){h.push(v.batchId);for(const b of v.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next(v=>({er:v,removedBatchIds:c,addedBatchIds:h}))})})}),b0.apply(this,arguments)}function cv(n){const e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function JS(n,e,t){let r=qt(),i=qt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Gs();return t.forEach((h,p)=>{const v=a.get(h);p.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(bt.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||0===p.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):$e("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",p.version)}),{nr:c,sr:i}})}function lv(n,e){const t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ul(n,e){const t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new el(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function hm(n,e,t){return dv.apply(this,arguments)}function dv(){return dv=(0,J.Z)(function*(n,e,t){const r=at(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Pu(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),dv.apply(this,arguments)}function hv(n,e,t){const r=at(n);let i=bt.min(),a=qt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,v){const b=at(h),S=b.Yi.get(v);return void 0!==S?le.resolve(b.Ji.get(S)):b.Bs.getTargetData(p,v)}(r,c,Cs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{a=p})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:bt.min(),t?a:qt())).next(h=>(eA(r,JD(e),h),{documents:h,ir:a})))}function D0(n,e){const t=at(n),r=at(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function Ud(n,e){const t=at(n),r=t.Xi.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,rw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eA(t,e,i),i))}function eA(n,e,t){let r=n.Xi.get(e)||bt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function fm(){return fm=(0,J.Z)(function*(n,e,t,r){const i=at(n);let a=qt(),c=Gs();for(const v of t){const b=e.rr(v.metadata.name);v.document&&(a=a.add(b));const S=e.ur(v);S.setReadTime(e.cr(v.metadata.readTime)),c=c.insert(b,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),p=yield ul(i,(v=r,Cs(qg(mn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>JS(v,h,c).next(b=>(h.apply(v),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(v,p.targetId).next(()=>i.Bs.addMatchingKeys(v,a,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.nr,b.sr)).next(()=>b.nr)))}),fm.apply(this,arguments)}function LL(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,J.Z)(function*(n,e,t=qt()){const r=yield ul(n,Cs(s0(e.bundledQuery))),i=at(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Pr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const h=r.withResumeToken(oi.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(a,h).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),S0.apply(this,arguments)}function px(n,e){return`firestore_clients_${n}_${e}`}function nA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function A0(n,e){return`firestore_targets_${n}_${e}`}class fv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Le(i.error.code,i.error.message))),c?new fv(e,t,i.state,a):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Le(r.error.code,r.error.message))),a?new Vf(e,r.state,i):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Lw();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=uw(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new pm(e,a):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class R0{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new R0(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pv{constructor(){this.activeTargetIds=Lw()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gv{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ar(Bt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=px(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new pv),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,J.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(px(e.persistenceKey,i));if(a){const c=pm.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(A0(this.persistenceKey,e));if(r){const i=Vf.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(A0(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,J.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=Hs.ct;if(null!=a)try{const h=JSON.parse(a);Ct("number"==typeof h),c=h}catch(h){sr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Hs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new fv(this.currentUser,e,t,r),a=nA(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=nA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=A0(this.persistenceKey,e),a=new Vf(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return pm.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return fv.ar(new Ni(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Vf.ar(i,t)}br(e){return R0.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,J.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],h=[];return a.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{a.has(p)||h.push(p)}),this.syncEngine.Wr(c,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Lw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class rA{constructor(){this.Hr=new pv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new pv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gx{Yr(e){}shutdown(){}}class N0{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mv=null;function _v(){return null===mv?mv=268435456+Math.round(2147483648*Math.random()):mv++,"0x"+mv.toString(16)}const iA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sA{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ji="WebChannelConnection";class mx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=_v(),h=this.To(e,t);$e("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const p={};return this.Eo(p,i,a),this.Ao(e,h,p,r).then(v=>($e("RestConnection",`Received RPC '${e}' ${c}: `,v),v),v=>{throw oo("RestConnection",`RPC '${e}' ${c} failed with error: `,v,"url: ",h,"request:",r),v})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${iA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=_v();return new Promise((c,h)=>{const p=new IP;p.setWithCredentials(!0),p.listenOnce(SL.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case YE.NO_ERROR:const b=p.getResponseJson();$e(Ji,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),c(b);break;case YE.TIMEOUT:$e(Ji,`RPC '${e}' ${a} timed out`),h(new Le(fe.DEADLINE_EXCEEDED,"Request time out"));break;case YE.HTTP_ERROR:const S=p.getStatus();if($e(Ji,`RPC '${e}' ${a} failed with status:`,S,"response text:",p.getResponseText()),S>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const $=x?.error;if($&&$.status&&$.message){const X=function(pe){const we=pe.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(we)>=0?we:fe.UNKNOWN}($.status);h(new Le(X,$.message))}else h(new Le(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Le(fe.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{$e(Ji,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);$e(Ji,`RPC '${e}' ${a} sending request:`,i),p.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=_v(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=TD(),h=ZE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.xmlHttpFactory=new vP({})),this.Eo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const b=a.join("");$e(Ji,`Creating RPC '${e}' stream ${i}: ${b}`,p);const S=c.createWebChannel(b,p);let x=!1,$=!1;const X=new sA({ro:we=>{$?$e(Ji,`Not sending because RPC '${e}' stream ${i} is closed:`,we):(x||($e(Ji,`Opening RPC '${e}' stream ${i} transport.`),S.open(),x=!0),$e(Ji,`RPC '${e}' stream ${i} sending:`,we),S.send(we))},oo:()=>S.close()}),pe=(we,Je,ct)=>{we.listen(Je,tt=>{try{ct(tt)}catch(ft){setTimeout(()=>{throw ft},0)}})};return pe(S,QE.EventType.OPEN,()=>{$||$e(Ji,`RPC '${e}' stream ${i} transport opened.`)}),pe(S,QE.EventType.CLOSE,()=>{$||($=!0,$e(Ji,`RPC '${e}' stream ${i} transport closed`),X.wo())}),pe(S,QE.EventType.ERROR,we=>{$||($=!0,oo(Ji,`RPC '${e}' stream ${i} transport errored:`,we),X.wo(new Le(fe.UNAVAILABLE,"The operation could not be completed")))}),pe(S,QE.EventType.MESSAGE,we=>{var Je;if(!$){const ct=we.data[0];Ct(!!ct);const ft=ct.error||(null===(Je=ct[0])||void 0===Je?void 0:Je.error);if(ft){$e(Ji,`RPC '${e}' stream ${i} received error:`,ft);const kt=ft.status;let zt=function(po){const vl=ai[po];if(void 0!==vl)return $w(vl)}(kt),Yr=ft.message;void 0===zt&&(zt=fe.INTERNAL,Yr="Unknown error status: "+kt+" with message "+ft.message),$=!0,X.wo(new Le(zt,Yr)),S.close()}else $e(Ji,`RPC '${e}' stream ${i} received:`,ct),X._o(ct)}}),pe(h,AL.STAT_EVENT,we=>{we.stat===CD.PROXY?$e(Ji,`RPC '${e}' stream ${i} detected buffering proxy`):we.stat===CD.NOPROXY&&$e(Ji,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{X.fo()},0),X}}function oA(){return typeof window<"u"?window:null}function P0(){return typeof document<"u"?document:null}function Bf(n){return new YP(n,!0)}class aA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class _x{constructor(e,t,r,i,a,c,h,p){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new aA(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,J.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,J.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,J.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Le(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,J.Z)(function*(){e.state=0,e.start()}))}tu(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FL extends _x{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Kw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:dt(),i=e.targetChange.targetIds||[],a=function(p,v){return p.useProto3Json?(Ct(void 0===v||"string"==typeof v),oi.fromBase64String(v||"")):(Ct(void 0===v||v instanceof Uint8Array),oi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const v=void 0===p.code?fe.UNKNOWN:$w(p.code);return new Le(v,p.message||"")}(c);t=new yS(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ka(n,r.document.name),a=Pr(r.document.updateTime),c=r.document.createTime?Pr(r.document.createTime):bt.min(),h=new Xi({mapValue:{fields:r.document.fields}}),p=ur.newFoundDocument(i,a,c,h);t=new qy(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ka(n,r.document),a=r.readTime?Pr(r.readTime):bt.min(),c=ur.newNoDocument(i,a);t=new qy([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ka(n,r.document);t=new qy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new fS(i,a);t=new _S(r.targetId,c)}}var p;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return bt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?bt.min():a.readTime?Pr(a.readTime):bt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=sm(this.serializer),t.addTarget=function(i,a){let c;const h=a.target;if(c=Uu(h)?{documents:Yw(i,h)}:{query:Qw(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=ES(i,a.resumeToken);const p=zw(i,a.expectedCount);null!==p&&(c.expectedCount=p)}else if(a.snapshotVersion.compareTo(bt.min())>0){c.readTime=Pf(i,a.snapshotVersion.toTimestamp());const p=zw(i,a.expectedCount);null!==p&&(c.expectedCount=p)}return c}(this.serializer,e);const r=function Jw(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=sm(this.serializer),t.removeTarget=e,this.Wo(t)}}class UL extends _x{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function CS(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let a=Pr(r.updateTime?r.updateTime:i);return a.isEqual(bt.min())&&(a=Pr(i)),new Vy(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.cu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sm(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Pd(this.serializer,r))};this.Wo(t)}}class VL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Le(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(fe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(fe.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class jL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(sr(t),this.mu=!1):$e("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class $L{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(h=>{r.enqueueAndForget((0,J.Z)(function*(){var p;cl(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,J.Z)(function*(v){const b=at(v);b.vu.add(4),yield Vd(b),b.bu.set("Unknown"),b.vu.delete(4),yield jf(b)}),function(v){return p.apply(this,arguments)})(c))}))}),this.bu=new jL(r,i)}}function jf(n){return gm.apply(this,arguments)}function gm(){return gm=(0,J.Z)(function*(n){if(cl(n))for(const e of n.Ru)yield e(!0)}),gm.apply(this,arguments)}function Vd(n){return x0.apply(this,arguments)}function x0(){return x0=(0,J.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),x0.apply(this,arguments)}function Bd(n,e){const t=at(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),yv(t)?k0(t):ym(t).Ko()&&cA(t,e))}function mm(n,e){const t=at(n),r=ym(t);t.Au.delete(e),r.Ko()&&yx(t,e),0===t.Au.size&&(r.Ko()?r.jo():cl(t)&&t.bu.set("Unknown"))}function cA(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ym(n).su(e)}function yx(n,e){n.Vu.qt(e),ym(n).iu(e)}function k0(n){n.Vu=new qP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),ym(n).start(),n.bu.gu()}function yv(n){return cl(n)&&!ym(n).Uo()&&n.Au.size>0}function cl(n){return 0===at(n).vu.size}function lA(n){n.Vu=void 0}function vx(n){return dA.apply(this,arguments)}function dA(){return dA=(0,J.Z)(function*(n){n.Au.forEach((e,t)=>{cA(n,e)})}),dA.apply(this,arguments)}function Ix(n,e){return jd.apply(this,arguments)}function jd(){return jd=(0,J.Z)(function*(n,e){lA(n),yv(n)?(n.bu.Iu(e),k0(n)):n.bu.set("Unknown")}),jd.apply(this,arguments)}function vv(n,e,t){return M0.apply(this,arguments)}function M0(){return M0=(0,J.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof yS&&2===e.state&&e.cause)try{yield(r=(0,J.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Iv(n,r)}else if(e instanceof qy?n.Vu.Ht(e):e instanceof _S?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(bt.min()))try{const r=yield cv(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.Au.get(p);v&&i.Au.set(p,v.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,p)=>{const v=i.Au.get(h);if(!v)return;i.Au.set(h,v.withResumeToken(oi.EMPTY_BYTE_STRING,v.snapshotVersion)),yx(i,h);const b=new el(v.target,h,p,v.sequenceNumber);cA(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield Iv(n,r)}var r}),M0.apply(this,arguments)}function Iv(n,e,t){return O0.apply(this,arguments)}function O0(){return O0=(0,J.Z)(function*(n,e,t){if(!Pu(e))throw e;n.vu.add(1),yield Vd(n),n.bu.set("Offline"),t||(t=()=>cv(n.localStore)),n.asyncQueue.enqueueRetryable((0,J.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield jf(n)}))}),O0.apply(this,arguments)}function hA(n,e){return e().catch(t=>Iv(n,t,e))}function $f(n){return L0.apply(this,arguments)}function L0(){return L0=(0,J.Z)(function*(n){const e=at(n),t=qr(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;F0(e);)try{const i=yield lv(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Ex(e,i)}catch(i){yield Iv(e,i)}fA(e)&&pA(e)}),L0.apply(this,arguments)}function F0(n){return cl(n)&&n.Eu.length<10}function Ex(n,e){n.Eu.push(e);const t=qr(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function fA(n){return cl(n)&&!qr(n).Uo()&&n.Eu.length>0}function pA(n){qr(n).start()}function wx(n){return U0.apply(this,arguments)}function U0(){return U0=(0,J.Z)(function*(n){qr(n).hu()}),U0.apply(this,arguments)}function Tx(n){return V0.apply(this,arguments)}function V0(){return V0=(0,J.Z)(function*(n){const e=qr(n);for(const t of n.Eu)e.uu(t.mutations)}),V0.apply(this,arguments)}function Cx(n,e,t){return B0.apply(this,arguments)}function B0(){return B0=(0,J.Z)(function*(n,e,t){const r=n.Eu.shift(),i=jw.from(r,e,t);yield hA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield $f(n)}),B0.apply(this,arguments)}function gA(n,e){return _m.apply(this,arguments)}function _m(){return _m=(0,J.Z)(function*(n,e){var t;e&&qr(n).ou&&(yield(t=(0,J.Z)(function*(r,i){if(pS(a=i.code)&&a!==fe.ABORTED){const c=r.Eu.shift();qr(r).Qo(),yield hA(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield $f(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),fA(n)&&pA(n)}),_m.apply(this,arguments)}function mA(n,e){return j0.apply(this,arguments)}function j0(){return j0=(0,J.Z)(function*(n,e){const t=at(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=cl(t);t.vu.add(3),yield Vd(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield jf(t)}),j0.apply(this,arguments)}function Ev(n,e){return wv.apply(this,arguments)}function wv(){return wv=(0,J.Z)(function*(n,e){const t=at(n);e?(t.vu.delete(2),yield jf(t)):e||(t.vu.add(2),yield Vd(t),t.bu.set("Unknown"))}),wv.apply(this,arguments)}function ym(n){return n.Su||(n.Su=function(e,t,r){const i=at(e);return i.fu(),new FL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:vx.bind(null,n),ao:Ix.bind(null,n),nu:vv.bind(null,n)}),n.Ru.push(function(){var e=(0,J.Z)(function*(t){t?(n.Su.Qo(),yv(n)?k0(n):n.bu.set("Unknown")):(yield n.Su.stop(),lA(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function qr(n){return n.Du||(n.Du=function(e,t,r){const i=at(e);return i.fu(),new UL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:wx.bind(null,n),ao:gA.bind(null,n),au:Tx.bind(null,n),cu:Cx.bind(null,n)}),n.Ru.push(function(){var e=(0,J.Z)(function*(t){t?(n.Du.Qo(),yield $f(n)):(yield n.Du.stop(),n.Eu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Tv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new Tv(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $d(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Pu(n))return new Le(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Hf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=Kg(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new Hf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Hf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $0{constructor(){this.Cu=new ar(et.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):dt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Gf{constructor(e,t,r,i,a,c,h,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Gf(e,t,Hf.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ki(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class H0{constructor(){this.Nu=void 0,this.listeners=[]}}class ll{constructor(){this.queries=new za(e=>VP(e),ki),this.onlineState="Unknown",this.ku=new Set}}function Cv(n,e){return vm.apply(this,arguments)}function vm(){return vm=(0,J.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new H0),i)try{a.Nu=yield t.onListen(r)}catch(c){const h=$d(c,`Initialization of query '${Oy(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&z0(t)}),vm.apply(this,arguments)}function Im(n,e){return G0.apply(this,arguments)}function G0(){return G0=(0,J.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),G0.apply(this,arguments)}function HL(n,e){const t=at(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.$u(i)&&(r=!0);c.Nu=i}}r&&z0(t)}function _A(n,e,t){const r=at(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function z0(n){n.ku.forEach(e=>{e.next()})}class W0{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Gf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Gf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class bx{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class yA{constructor(e){this.serializer=e}rr(e){return Ka(this.serializer,e)}ur(e){return e.metadata.exists?TS(this.serializer,e.document,!1):ur.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Pr(e)}}class vA{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dx(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=mn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new yA(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||qt()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,J.Z)(function*(){const t=yield function tA(n,e,t,r){return fm.apply(this,arguments)}(e.localStore,new yA(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield LL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Dx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class q0{constructor(e){this.key=e}}class IA{constructor(e){this.key=e}}class K0{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=Ow(e),this.ec=new Hf(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new $0,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const x=i.get(b),$=Df(this.query,S)?S:null,X=!!x&&this.mutatedKeys.has(x.key),pe=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let we=!1;x&&$?x.data.isEqual($.data)?X!==pe&&(r.track({type:3,doc:$}),we=!0):this.rc(x,$)||(r.track({type:2,doc:$}),we=!0,(p&&this.tc($,p)>0||v&&this.tc($,v)<0)&&(h=!0)):!x&&$?(r.track({type:0,doc:$}),we=!0):x&&!$&&(r.track({type:1,doc:x}),we=!0,(p||v)&&(h=!0)),we&&($?(c=c.add($),a=pe?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{ec:c,ic:r,zi:h,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,b)=>function(S,x){const $=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return $(S)-$(x)}(v.type,b.type)||this.tc(v.doc,b.doc)),this.oc(r);const c=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,p=h!==this.Xu;return this.Xu=h,0!==a.length||p?{snapshot:new Gf(this.query,e.ec,i,a,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new $0,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new IA(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new q0(r))}),t}hc(e){this.Yu=e.ir,this.Zu=qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Gf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class GL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Z0{constructor(e){this.key=e,this.fc=!1}}class EA{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new za(h=>VP(h),ki),this._c=new Map,this.mc=new Set,this.gc=new ar(et.comparator),this.yc=new Map,this.Ic=new sv,this.Tc={},this.Ec=new Map,this.Ac=il.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function wA(n,e){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,J.Z)(function*(n,e){const t=Rv(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield ul(t.localStore,Cs(e)),h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield bv(t,e,r,"current"===h,c.resumeToken),t.isPrimaryClient&&Bd(t.remoteStore,c)}return i}),Y0.apply(this,arguments)}function bv(n,e,t,r,i){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,J.Z)(function*(n,e,t,r,i){n.Rc=(S,x,$)=>{return(X=(0,J.Z)(function*(pe,we,Je,ct){let tt=we.view.sc(Je);tt.zi&&(tt=yield hv(pe.localStore,we.query,!1).then(({documents:zt})=>we.view.sc(zt,tt)));const ft=ct&&ct.targetChanges.get(we.targetId),kt=we.view.applyChanges(tt,pe.isPrimaryClient,ft);return RA(pe,we.targetId,kt.cc),kt.snapshot}),function(pe,we,Je,ct){return X.apply(this,arguments)})(n,S,x,$);var X};const a=yield hv(n.localStore,e,!0),c=new K0(e,a.ir),h=c.sc(a.documents),p=nm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=c.applyChanges(h,n.isPrimaryClient,p);RA(n,t,v.cc);const b=new GL(e,t,c);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),Dv.apply(this,arguments)}function zf(n,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,J.Z)(function*(n,e){const t=at(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!ki(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),mm(t.remoteStore,r.targetId),Em(t,r.targetId)}).catch(Nu))):(Em(t,r.targetId),yield hm(t.localStore,r.targetId,!0))}),Wf.apply(this,arguments)}function Sv(){return Sv=(0,J.Z)(function*(n,e,t){const r=Nv(n);try{const i=yield function(a,c){const h=at(a),p=_r.now(),v=c.reduce((x,$)=>x.add($.key),qt());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let $=Gs(),X=qt();return h.Zi.getEntries(x,v).next(pe=>{$=pe,$.forEach((we,Je)=>{Je.isValidDocument()||(X=X.add(we))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,$)).next(pe=>{b=pe;const we=[];for(const Je of c){const ct=GP(Je,b.get(Je.key).overlayedDocument);null!=ct&&we.push(new Vu(Je.key,ct,BD(ct.value.mapValue),yr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,p,we,c)}).next(pe=>{S=pe;const we=pe.applyToLocalDocumentSet(b,X);return h.documentOverlayCache.saveOverlays(x,pe.batchId,we)})}).then(()=>({batchId:S.batchId,changes:Sf(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let p=a.Tc[a.currentUser.toKey()];p||(p=new ar(Bt)),p=p.insert(c,h),a.Tc[a.currentUser.toKey()]=p}(r,i.batchId,t),yield Bu(r,i.changes),yield $f(r.remoteStore)}catch(i){const a=$d(i,"Failed to persist write");t.reject(a)}}),Sv.apply(this,arguments)}function CA(n,e){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,J.Z)(function*(n,e){const t=at(n);try{const r=yield function XS(n,e){const t=at(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((b,S)=>{const x=i.get(S);if(!x)return;h.push(t.Bs.removeMatchingKeys(a,b.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(a,b.addedDocuments,S)));let $=x.withSequenceNumber(a.currentSequenceNumber);var X,pe,we;null!==e.targetMismatches.get(S)?$=$.withResumeToken(oi.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):b.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(b.resumeToken,r)),i=i.insert(S,$),pe=$,we=b,(0===(X=x).resumeToken.approximateByteSize()||pe.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(a,$))});let p=Gs(),v=qt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(JS(a,c,e.documentUpdates).next(b=>{p=b.nr,v=b.sr})),!r.isEqual(bt.min())){const b=t.Bs.getLastRemoteSnapshotVersion(a).next(S=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return le.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,v)).next(()=>p)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Ct(c.fc):i.removedDocuments.size>0&&(Ct(c.fc),c.fc=!1))}),yield Bu(t,r,e)}catch(r){yield Nu(r)}}),Q0.apply(this,arguments)}function Sx(n,e,t){const r=at(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const h=c.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=at(a);h.onlineState=c;let p=!1;h.queries.forEach((v,b)=>{for(const S of b.listeners)S.Mu(c)&&(p=!0)}),p&&z0(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bA(n,e,t){return X0.apply(this,arguments)}function X0(){return X0=(0,J.Z)(function*(n,e,t){const r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new ar(et.comparator);c=c.insert(a,ur.newNoDocument(a,bt.min()));const h=qt().add(a),p=new tm(bt.min(),new Map,new ar(Bt),c,h);yield CA(r,p),r.gc=r.gc.remove(a),r.yc.delete(e),NA(r)}else yield hm(r.localStore,e,!1).then(()=>Em(r,e,t)).catch(Nu)}),X0.apply(this,arguments)}function Ax(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,J.Z)(function*(n,e){const t=at(n),r=e.batch.batchId;try{const i=yield function fx(n,e){const t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,v){const b=p.batch,S=b.keys();let x=le.resolve();return S.forEach($=>{x=x.next(()=>v.getEntry(h,$)).next(X=>{const pe=p.docVersions.get($);Ct(null!==pe),X.version.compareTo(pe)<0&&(b.applyToRemoteDocument(X,p),X.isValidDocument()&&(X.setReadTime(p.commitVersion),v.addEntry(X)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=qt();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);tT(t,r,null),eT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bu(t,i)}catch(i){yield Nu(i)}}),DA.apply(this,arguments)}function zL(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,J.Z)(function*(n,e,t){const r=at(n);try{const i=yield function(a,c){const h=at(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return h.mutationQueue.lookupMutationBatch(p,c).next(b=>(Ct(null!==b),v=b.keys(),h.mutationQueue.removeMutationBatch(p,b))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,v,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>h.localDocuments.getDocuments(p,v))})}(r.localStore,e);tT(r,e,t),eT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bu(r,i)}catch(i){yield Nu(i)}}),SA.apply(this,arguments)}function J0(){return J0=(0,J.Z)(function*(n,e){const t=at(n);cl(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=at(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=$d(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),J0.apply(this,arguments)}function eT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function tT(n,e,t){const r=at(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Em(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Rx(n,r)})}function Rx(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(mm(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),NA(n))}function RA(n,e,t){for(const r of t)r instanceof q0?(n.Ic.addReference(r.key,e),WL(n,r)):r instanceof IA?($e("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Rx(n,r.key)):dt()}function WL(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.mc.add(r),NA(n))}function NA(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(mn.fromString(e)),r=n.Ac.next();n.yc.set(r,new Z0(t)),n.gc=n.gc.insert(t,r),Bd(n.remoteStore,new el(Cs(qg(t.path)),r,"TargetPurposeLimboResolution",Hs.ct))}}function Bu(n,e,t){return qf.apply(this,arguments)}function qf(){return qf=(0,J.Z)(function*(n,e,t){const r=at(n),i=[],a=[],c=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,p)=>{c.push(r.Rc(p,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=T0.Li(p.targetId,v);a.push(b)}}))}),yield Promise.all(c),r.dc.nu(i),yield(h=(0,J.Z)(function*(p,v){const b=at(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(v,x=>le.forEach(x.Fi,$=>b.persistence.referenceDelegate.addReference(S,x.targetId,$)).next(()=>le.forEach(x.Bi,$=>b.persistence.referenceDelegate.removeReference(S,x.targetId,$)))))}catch(S){if(!Pu(S))throw S;$e("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const x=S.targetId;if(!S.fromCache){const $=b.Ji.get(x),pe=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);b.Ji=b.Ji.insert(x,pe)}}}),function(p,v){return h.apply(this,arguments)})(r.localStore,a))}),qf.apply(this,arguments)}function Nx(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,J.Z)(function*(n,e){const t=at(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield QS(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(h=>{h.reject(new Le(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bu(t,r.er)}var i}),nT.apply(this,arguments)}function PA(n,e){const t=at(n),r=t.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let i=qt();const a=t._c.get(e);if(!a)return i;for(const c of a){const h=t.wc.get(c);i=i.unionWith(h.view.nc)}return i}}function Hd(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,J.Z)(function*(n,e){const t=at(n),r=yield hv(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&RA(t,e.targetId,i.cc),i}),Av.apply(this,arguments)}function rT(n,e){return wm.apply(this,arguments)}function wm(){return wm=(0,J.Z)(function*(n,e){const t=at(n);return Ud(t.localStore,e).then(r=>Bu(t,r))}),wm.apply(this,arguments)}function Px(n,e,t,r){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,J.Z)(function*(n,e,t,r){const i=at(n),a=yield function(c,h){const p=at(c),v=at(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Sn(b,h).next(S=>S?p.localDocuments.getDocuments(b,S):le.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield $f(i.remoteStore):"acknowledged"===t||"rejected"===t?(tT(i,e,r||null),eT(i,e),h=e,at(at(i.localStore).mutationQueue).Cn(h)):dt(),yield Bu(i,a)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),Tm.apply(this,arguments)}function Kf(){return Kf=(0,J.Z)(function*(n,e){const t=at(n);if(Rv(t),Nv(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield xx(t,r.toArray());t.vc=!0,yield Ev(t.remoteStore,!0);for(const a of i)Bd(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Em(t,c),hm(t.localStore,c,!0))),mm(t.remoteStore,c)}),yield i,yield xx(t,r),function(a){const c=at(a);c.yc.forEach((h,p)=>{mm(c.remoteStore,p)}),c.Ic.Ts(),c.yc=new Map,c.gc=new ar(et.comparator)}(t),t.vc=!1,yield Ev(t.remoteStore,!1)}}),Kf.apply(this,arguments)}function xx(n,e,t){return xA.apply(this,arguments)}function xA(){return xA=(0,J.Z)(function*(n,e,t){const r=at(n),i=[],a=[];for(const c of e){let h;const p=r._c.get(c);if(p&&0!==p.length){h=yield ul(r.localStore,Cs(p[0]));for(const v of p){const b=r.wc.get(v),S=yield Hd(r,b);S.snapshot&&a.push(S.snapshot)}}else{const v=yield D0(r.localStore,c);h=yield ul(r.localStore,v),yield bv(r,kx(v),c,!1,h.resumeToken)}i.push(h)}return r.dc.nu(a),i}),xA.apply(this,arguments)}function kx(n){return xw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kA(n){const e=at(n);return at(at(e.localStore).persistence).$i()}function Mx(n,e,t,r){return sT.apply(this,arguments)}function sT(){return sT=(0,J.Z)(function*(n,e,t,r){const i=at(n);if(i.vc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield Ud(i.localStore,JD(a[0])),h=tm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oi.EMPTY_BYTE_STRING);yield Bu(i,c,h);break}case"rejected":yield hm(i.localStore,e,!0),Em(i,e,r);break;default:dt()}}),sT.apply(this,arguments)}function Ox(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,J.Z)(function*(n,e,t){const r=Rv(n);if(r.vc){for(const i of e){if(r._c.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const a=yield D0(r.localStore,i),c=yield ul(r.localStore,a);yield bv(r,kx(a),c.targetId,!1,c.resumeToken),Bd(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield hm(r.localStore,i,!1).then(()=>{mm(r.remoteStore,i),Em(r,i)}).catch(Nu))}}),oT.apply(this,arguments)}function Rv(n){const e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bA.bind(null,e),e.dc.nu=HL.bind(null,e.eventManager),e.dc.Pc=_A.bind(null,e.eventManager),e}function Nv(n){const e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ax.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zL.bind(null,e),e}class Cm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,J.Z)(function*(){t.serializer=Bf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return C0(this.persistence,new uv,e.initialUser,this.serializer)}createPersistence(e){return new al(ov.zs,this.serializer)}createSharedClientState(e){return new rA}terminate(){var e=this;return(0,J.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pv extends Cm{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,J.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Nv(r.Vc.syncEngine),yield $f(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return C0(this.persistence,new uv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new zS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new ND(t,this.persistence);return new aw(e.asyncQueue,r)}createPersistence(e){const t=Fd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new YS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oA(),P0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rA}}class xv extends Pv{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,J.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof gv&&(r.sharedClientState.syncEngine={jr:Px.bind(null,i),zr:Mx.bind(null,i),Wr:Ox.bind(null,i),$i:kA.bind(null,i),Qr:rT.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,J.Z)(function*(c){yield function iT(n,e){return Kf.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=oA();if(!gv.D(t))throw new Le(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Fd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class bm{initialize(e,t){var r=this;return(0,J.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Sx(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Nx.bind(null,r.syncEngine),yield Ev(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ll}createDatastore(e){const t=Bf(e.databaseInfo.databaseId),r=new mx(e.databaseInfo);return new VL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>Sx(this.syncEngine,h,0),c=N0.D()?new N0:new gx,new $L(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,p,v){const b=new EA(r,i,a,c,h,p);return v&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,J.Z)(function*(t){const r=at(t);$e("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Vd(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aT(n,e=10240){let t=0;return{read:()=>(0,J.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,J.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Zf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Fx{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,J.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,J.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,J.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new bx(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,J.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,J.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,J.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ux{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,J.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,J.Z)(function*(a,c){const h=at(a),p=sm(h.serializer)+"/documents",v={documents:c.map($=>rm(h.serializer,$))},b=yield h.vo("BatchGetDocuments",p,v,c.length),S=new Map;b.forEach($=>{const X=function ML(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Ka(t,r.found.name),a=Pr(r.found.updateTime),c=r.found.createTime?Pr(r.found.createTime):bt.min(),h=new Xi({mapValue:{fields:r.found.fields}});return ur.newFoundDocument(i,a,c,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Ka(t,r.missing),a=Pr(r.readTime);return ur.newNoDocument(i,a)}(n,e):dt()}(h.serializer,$);S.set(X.key.toString(),X)});const x=[];return c.forEach($=>{const X=S.get($.toString());Ct(!!X),x.push(X)}),x}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,J.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=et.fromPath(i);e.mutations.push(new Bw(a,e.precondition(a)))}),yield(r=(0,J.Z)(function*(i,a){const c=at(i),h=sm(c.serializer)+"/documents",p={writes:a.map(v=>Pd(c.serializer,v))};yield c.Io("Commit",h,p)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?yr.exists(!1):yr.updateTime(t):yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Le(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yr.updateTime(t)}return yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qL{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new aA(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,J.Z)(function*(){const t=new Ux(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!_f(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pS(t)}return!1}}class KL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ni.UNAUTHENTICATED,this.clientId=tw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,J.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,J.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=$d(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function kv(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,J.Z)(function*(a){r.isEqual(a)||(yield QS(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),uT.apply(this,arguments)}function cT(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Mv(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>mA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>mA(e.remoteStore,a)),n._onlineComponents=e}),lT.apply(this,arguments)}function dT(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Mv(n){return hT.apply(this,arguments)}function hT(){return hT=(0,J.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield kv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!dT(t))throw t;oo("Error using user provided cache. Falling back to memory cache: "+t),yield kv(n,new Cm)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield kv(n,new Cm);return n._offlineComponents}),hT.apply(this,arguments)}function Dm(n){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,J.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield cT(n,n._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield cT(n,new bm))),n._onlineComponents}),Ov.apply(this,arguments)}function Vx(n){return Mv(n).then(e=>e.persistence)}function Lv(n){return Mv(n).then(e=>e.localStore)}function Fv(n){return Dm(n).then(e=>e.remoteStore)}function Uv(n){return Dm(n).then(e=>e.syncEngine)}function Yf(n){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,J.Z)(function*(n){const e=yield Dm(n),t=e.eventManager;return t.onListen=wA.bind(null,e.syncEngine),t.onUnlisten=zf.bind(null,e.syncEngine),t}),Qf.apply(this,arguments)}function pT(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(i,a,c,h,p){const v=new Zf({next:S=>{a.enqueueAndForget(()=>Im(i,b));const x=S.docs.has(c);!x&&S.fromCache?p.reject(new Le(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&h&&"server"===h.source?p.reject(new Le(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),b=new W0(qg(c.path),v,{includeMetadataChanges:!0,Ku:!0});return Cv(i,b)}(yield Yf(n),n.asyncQueue,e,t,r)})),r.promise}function LA(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(i,a,c,h,p){const v=new Zf({next:S=>{a.enqueueAndForget(()=>Im(i,b)),S.fromCache&&"server"===h.source?p.reject(new Le(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),b=new W0(c,v,{includeMetadataChanges:!0,Ku:!0});return Cv(i,b)}(yield Yf(n),n.asyncQueue,e,t,r)})),r.promise}function FA(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const UA=new Map;function VA(n,e,t){if(!t)throw new Le(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Hx(n,e,t,r){if(!0===e&&!0===r)throw new Le(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Gx(n){if(!et.isDocumentKey(n))throw new Le(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zx(n){if(et.isDocumentKey(n))throw new Le(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gT(n);throw new Le(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Wx(n,e){if(e<=0)throw new Le(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class qx{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=FA(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NL;switch(t.type){case"firstParty":return new CP(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=UA.get(e);t&&($e("ComponentProvider","Removing Datastore"),UA.delete(e),t.terminate())}(this),Promise.resolve()}}class vr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class ju extends es{constructor(e,t,r){super(e,t,qg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new et(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function s(n,e,...t){if(n=(0,k.m9)(n),VA("collection","path",e),n instanceof Vv){const r=mn.fromString(e,...t);return zx(r),new ju(n,null,r)}{if(!(n instanceof vr||n instanceof ju))throw new Le(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return zx(r),new ju(n.firestore,null,r)}}function u(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=tw.A()),VA("doc","path",e),n instanceof Vv){const r=mn.fromString(e,...t);return Gx(r),new vr(n,null,new et(r))}{if(!(n instanceof vr||n instanceof ju))throw new Le(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return Gx(r),new vr(n.firestore,n instanceof ju?n.converter:null,new et(r))}}function l(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof vr||n instanceof ju)&&(e instanceof vr||e instanceof ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function d(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof es&&e instanceof es&&n.firestore===e.firestore&&ki(n._query,e._query)&&n.converter===e.converter}class f{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new aA(this,"async_queue_retry"),this.Xc=()=>{const t=P0();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=P0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=P0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Or;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,J.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Pu(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,sr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Tv.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&dt()}verifyOperationInProgress(){}sa(){var e=this;return(0,J.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function y(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class I{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class A extends Vv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new f,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ie(this),this._firestoreClient.terminate()}}function Z(n){return n._firestoreClient||ie(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ie(n){var e,t,r;const i=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new LP(n._databaseId,h,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,FA(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new KL(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function st(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,J.Z)(function*(){try{yield kv(n,t),yield cT(n,e),r.resolve()}catch(i){const a=i;if(!dT(a))throw a;oo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function Gd(n){if(n._initialized||n._terminated)throw new Le(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Za(oi.fromBase64String(e))}catch(t){throw new Le(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Za(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sm{constructor(e){this._methodName=e}}class BA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const _j=/^__.*__$/;class yj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Vu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jg(e,this.data,t,this.fieldTransforms)}}class JL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class jA{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new jA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return GA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(eF(this.ca)&&_j.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class vj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bf(e)}ya(e,t,r,i=!1){return new jA({ca:e,methodName:t,ga:r,path:or.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Am(n){const e=n._freezeSettings(),t=Bf(n._databaseId);return new vj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $A(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);Jx("Data must be an object, but it was:",c,r);const h=rF(r,c);let p,v;if(a.merge)p=new Nr(c.fieldMask),v=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const S of a.mergeFields){const x=_T(e,S,t);if(!c.contains(x))throw new Le(fe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);sF(b,x)||b.push(x)}p=new Nr(b),v=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,v=c.fieldTransforms;return new yj(new Xi(h),p,v)}class mT extends Sm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mT}}function tF(n,e,t){return new jA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Yx extends Sm{_toFieldTransform(e){return new Uy(e.path,new Ad)}isEqual(e){return e instanceof Yx}}class Ij extends Sm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=tF(this,e,!0),r=this.pa.map(a=>Rm(a,t)),i=new Rd(r);return new Uy(e.path,i)}isEqual(e){return this===e}}class Ej extends Sm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=tF(this,e,!0),r=this.pa.map(a=>Rm(a,t)),i=new Nd(r);return new Uy(e.path,i)}isEqual(e){return this===e}}class wj extends Sm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Yg(e.serializer,oS(e.serializer,this.Ia));return new Uy(e.path,t)}isEqual(e){return this===e}}function Qx(n,e,t,r){const i=n.ya(1,e,t);Jx("Data must be an object, but it was:",i,r);const a=[],c=Xi.empty();Wc(r,(p,v)=>{const b=HA(e,p,t);v=(0,k.m9)(v);const S=i.da(b);if(v instanceof mT)a.push(b);else{const x=Rm(v,S);null!=x&&(a.push(b),c.set(b,x))}});const h=new Nr(a);return new JL(c,h,i.fieldTransforms)}function Xx(n,e,t,r,i,a){const c=n.ya(1,e,t),h=[_T(e,r,t)],p=[i];if(a.length%2!=0)throw new Le(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(_T(e,a[x])),p.push(a[x+1]);const v=[],b=Xi.empty();for(let x=h.length-1;x>=0;--x)if(!sF(v,h[x])){const $=h[x];let X=p[x];X=(0,k.m9)(X);const pe=c.da($);if(X instanceof mT)v.push($);else{const we=Rm(X,pe);null!=we&&(v.push($),b.set($,we))}}const S=new Nr(v);return new JL(b,S,c.fieldTransforms)}function nF(n,e,t,r=!1){return Rm(t,n.ya(r?4:3,e))}function Rm(n,e){if(iF(n=(0,k.m9)(n)))return Jx("Unsupported field value:",e,n),rF(n,e);if(n instanceof Sm)return function(t,r){if(!eF(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=Rm(c,r.wa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oS(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=_r.fromDate(t);return{timestampValue:Pf(r.serializer,i)}}if(t instanceof _r){const i=new _r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Pf(r.serializer,i)}}if(t instanceof BA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Za)return{bytesValue:ES(r.serializer,t._byteString)};if(t instanceof vr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ky(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${gT(t)}`)}(n,e)}function rF(n,e){const t={};return yw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wc(n,(r,i)=>{const a=Rm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function iF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _r||n instanceof BA||n instanceof Za||n instanceof vr||n instanceof Sm)}function Jx(n,e,t){if(!iF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function _T(n,e,t){if((e=(0,k.m9)(e))instanceof Wd)return e._internalPath;if("string"==typeof e)return HA(n,e);throw GA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Tj=new RegExp("[~\\*/\\[\\]]");function HA(n,e,t){if(e.search(Tj)>=0)throw GA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wd(...e.split("."))._internalPath}catch{throw GA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GA(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Le(fe.INVALID_ARGUMENT,h+n+p)}function sF(n,e){return n.some(t=>t.isEqual(e))}class yT{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cj extends yT{data(){return super.data()}}function zA(n,e){return"string"==typeof e?HA(n,e):e instanceof Wd?e._internalPath:e._delegate._internalPath}function oF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ek{}class vT extends ek{}function Xf(n,e,...t){let r=[];e instanceof ek&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof Bv).length,c=i.filter(h=>h instanceof IT).length;if(a>1||a>0&&c>0)throw new Le(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class IT extends vT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new IT(e,t,r)}_apply(e){const t=this._parse(e);return lF(e._query,t),new es(e.firestore,e.converter,bf(e._query,t))}_parse(e){const t=Am(e.firestore);return function(i,a,c,h,p,v,b){let S;if(p.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Le(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){cF(b,v);const x=[];for(const $ of b)x.push(uF(h,i,$));S={arrayValue:{values:x}}}else S=uF(h,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||cF(b,v),S=nF(c,"where",b,"in"===v||"not-in"===v);return _n.create(p,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Bv extends ek{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const h of c)lF(a,h),a=bf(a,h)}(e._query,t),new es(e.firestore,e.converter,bf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tk extends vT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tk(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Le(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Tf(i,a);return function(h,p){if(null===kw(h)){const v=My(h);null!==v&&dF(0,v,p.field)}}(r,c),c}(e._query,this._field,this._direction);return new es(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ga(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class WA extends vT{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new WA(e,t,r)}_apply(e){return new es(e.firestore,e.converter,Sd(e._query,this._limit,this._limitType))}}class qA extends vT{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qA(e,t,r)}_apply(e){const t=aF(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(i=t,new Ga((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class KA extends vT{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new KA(e,t,r)}_apply(e){const t=aF(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(i=t,new Ga((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function aF(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof yT)return function(i,a,c,h,p){if(!h)throw new Le(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const b of Mo(i))if(b.field.isKeyField())v.push(Td(a,h.key));else{const S=h.data.field(b.field);if(Ry(S))throw new Le(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const x=b.field.canonicalString();throw new Le(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}v.push(S)}return new Qc(v,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Am(n.firestore);return function(a,c,h,p,v,b){const S=a.explicitOrderBy;if(v.length>S.length)throw new Le(fe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let $=0;$<v.length;$++){const X=v[$];if(S[$].field.isKeyField()){if("string"!=typeof X)throw new Le(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof X}`);if(!Mw(a)&&-1!==X.indexOf("/"))throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${X}' contains a slash.`);const pe=a.path.child(mn.fromString(X));if(!et.isDocumentKey(pe))throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${pe}' is not because it contains an odd number of segments.`);const we=new et(pe);x.push(Td(c,we))}else{const pe=nF(h,p,X);x.push(pe)}}return new Qc(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function uF(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Le(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(e)&&-1!==t.indexOf("/"))throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!et.isDocumentKey(r))throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Td(n,new et(r))}if(t instanceof vr)return Td(n,t._key);throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gT(t)}.`)}function cF(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lF(n,e){if(e.isInequality()){const r=My(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Le(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=kw(n);null!==a&&dF(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Le(fe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dF(n,e,t){if(!t.isEqual(e))throw new Le(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nk{convertValue(e,t="none"){switch(Lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Wc(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new BA(Lr(e.latitude),Lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ef(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}convertTimestamp(e){const t=qc(e);return new _r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);Ct(t0(r));const i=new Ou(r.get(1),r.get(3)),a=new et(r.popFirst(5));return i.isEqual(t)||sr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function ZA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class kj extends nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}class Nm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qd extends yT{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ET(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ET extends qd{data(e={}){return super.data(e)}}class Jf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Nm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ET(this._firestore,this._userDataWriter,r.key,r,new Nm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new ET(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Nm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new ET(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Nm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return 0!==c.type&&(p=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),v=a.indexOf(c.doc.key)),{type:Oj(c.type),doc:h,oldIndex:p,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Oj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function fF(n,e){return n instanceof qd&&e instanceof qd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Jf&&e instanceof Jf&&n._firestore===e._firestore&&d(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ep extends nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}function pF(n,e,t){n=vn(n,vr);const r=vn(n.firestore,A),i=ZA(n.converter,e,t);return jv(r,[$A(Am(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,yr.none())])}function gF(n,e,t,...r){n=vn(n,vr);const i=vn(n.firestore,A),a=Am(i);let c;return c="string"==typeof(e=(0,k.m9)(e))||e instanceof Wd?Xx(a,"updateDoc",n._key,e,t,r):Qx(a,"updateDoc",n._key,e),jv(i,[c.toMutation(n._key,yr.exists(!0))])}function mF(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||y(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(y(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let p,v,b;if(n instanceof vr)v=vn(n.firestore,A),b=qg(n._key.path),p={next:S=>{e[c]&&e[c](rk(v,n,S))},error:e[c+1],complete:e[c+2]};else{const S=vn(n,es);v=vn(S.firestore,A),b=S._query;const x=new ep(v);p={next:$=>{e[c]&&e[c](new Jf(v,x,S,$))},error:e[c+1],complete:e[c+2]},oF(n._query)}return function(S,x,$,X){const pe=new Zf(X),we=new W0(x,pe,$);return S.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return Cv(yield Yf(S),we)})),()=>{pe.Dc(),S.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return Im(yield Yf(S),we)}))}}(Z(v),b,h,p)}function jv(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function TA(n,e,t){return Sv.apply(this,arguments)}(yield Uv(t),r,i)})),i.promise}(Z(n),e)}function rk(n,e,t){const r=t.docs.get(e._key),i=new ep(n);return new qd(n,i,e._key,r,new Nm(t.hasPendingWrites,t.fromCache),e.converter)}const Jj={maxAttempts:5};class _F{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Am(e)}set(e,t,r){this._verifyNotCommitted();const i=tp(e,this._firestore),a=ZA(i.converter,t,r),c=$A(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,yr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=tp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof Wd?Xx(this._dataReader,"WriteBatch.update",a._key,t,r,i):Qx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tp(e,this._firestore);return this._mutations=this._mutations.concat(new qa(t._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tp(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Le(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class e$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Am(e)}get(e){const t=tp(e,this._firestore),r=new kj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const a=i[0];if(a.isFoundDocument())return new yT(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new yT(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=tp(e,this._firestore),a=ZA(i.converter,t,r),c=$A(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=tp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof Wd?Xx(this._dataReader,"Transaction.update",a._key,t,r,i):Qx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=tp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tp(e,this._firestore),r=new ep(this._firestore);return super.get(e).then(i=>new qd(this._firestore,r,t._key,i._document,new Nm(!1,!1),t.converter))}}function ik(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vF(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function IF(){if(!function ua(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){zc=Fc.SDK_VERSION,(0,Fc._registerComponent)(new rr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new A(new TP(t.getProvider("auth-internal")),new bP(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Le(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(h.options.projectId,p)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Fc.registerVersion)(bD,"3.13.0",n),(0,Fc.registerVersion)(bD,"3.13.0","esm2017")}();class wT{constructor(e){this._delegate=e}static fromBase64String(e){return IF(),new wT(Za.fromBase64String(e))}static fromUint8Array(e){return vF(),new wT(Za.fromUint8Array(e))}toBase64(){return IF(),this._delegate.toBase64()}toUint8Array(){return vF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sk(n){return function c$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class l${enableIndexedDbPersistence(e,t){return function be(n,e){Gd(n=vn(n,A));const t=Z(n);if(t._uninitializedComponentsProvider)throw new Le(fe.FAILED_PRECONDITION,"SDK cache is already specified.");oo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new bm;return st(t,i,new Pv(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function He(n){Gd(n=vn(n,A));const e=Z(n);if(e._uninitializedComponentsProvider)throw new Le(fe.FAILED_PRECONDITION,"SDK cache is already specified.");oo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new bm;return st(e,r,new xv(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Dt(n){if(n._initialized&&!n._terminated)throw new Le(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{yield(t=(0,J.Z)(function*(r){if(!xo.D())return Promise.resolve();const i=r+"main";yield xo.delete(i)}),function(r){return t.apply(this,arguments)})(Fd(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class EF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ou||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Kx(n,e,t,r={}){var i;const a=(n=vn(n,Vv))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let h,p;if("string"==typeof r.mockUserToken)h=r.mockUserToken,p=Ni.MOCK_USER;else{h=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Le(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ni(v)}n._authCredentials=new wP(new Bg(h,p))}}(this._delegate,e,t,r)}enableNetwork(){return function jt(n){return function Bx(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield Vx(n),t=yield Fv(n);return e.setNetworkEnabled(!0),function(r){const i=at(r);return i.vu.delete(0),jf(i)}(t)}))}(Z(n=vn(n,A)))}(this._delegate)}disableNetwork(){return function en(n){return function jx(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield Vx(n),t=yield Fv(n);return e.setNetworkEnabled(!1),(r=(0,J.Z)(function*(i){const a=at(i);a.vu.add(0),yield Vd(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Z(n=vn(n,A)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Hx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Fe(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function AA(n,e){return J0.apply(this,arguments)}(yield Uv(e),t)})),t.promise}(Z(n=vn(n,A)))}(this._delegate)}onSnapshotsInSync(e){return function Gj(n,e){return function YL(n,e){const t=new Zf(e);return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return r=yield Yf(n),i=t,at(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return r=yield Yf(n),i=t,void at(r).ku.delete(i);var r,i}))}}(Z(n=vn(n,A)),y(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $v(this,s(this._delegate,e))}catch(t){throw co(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ya(this,u(this._delegate,e))}catch(t){throw co(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new lo(this,function o(n,e){if(n=vn(n,Vv),VA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(t=e,new Ga(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw co(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function t$(n,e,t){n=vn(n,A);const r=Object.assign(Object.assign({},Jj),t);return function(i){if(i.maxAttempts<1)throw new Le(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const h=new Or;return i.asyncQueue.enqueueAndForget((0,J.Z)(function*(){const p=yield function fT(n){return Dm(n).then(e=>e.datastore)}(i);new qL(i.asyncQueue,p,c,a,h).run()})),h.promise}(Z(n),i=>e(new e$(n,i)),r)}(this._delegate,t=>e(new wF(this,t)))}batch(){return Z(this._delegate),new TF(new _F(this._delegate,e=>jv(this._delegate,e)))}loadBundle(e){return function zs(n,e){const t=Z(n=vn(n,A)),r=new I;return function $x(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?gS().encode(a):a,p=function(p,v){if(p instanceof Uint8Array)return aT(p,v);if(p instanceof ArrayBuffer)return aT(new Uint8Array(p),v);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new Fx(p,c);var p}(t,Bf(e));n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){!function MA(n,e,t){const r=at(n);var i;(i=(0,J.Z)(function*(a,c,h){try{const p=yield c.getMetadata();if(yield function(x,$){const X=at(x),pe=Pr($.createTime);return X.persistence.runTransaction("hasNewerBundle","readonly",we=>X.qs.getBundleMetadata(we,$.id)).then(we=>!!we&&we.createTime.compareTo(pe)>=0)}(a.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(Dx(p));const v=new vA(p,a.localStore,c.serializer);let b=yield c.bc();for(;b;){const x=yield v.zu(b);x&&h._updateProgress(x),b=yield c.bc()}const S=yield v.complete();return yield Bu(a,S.Ju,void 0),yield function(x,$){const X=at(x);return X.persistence.runTransaction("Save bundle","readwrite",pe=>X.qs.saveBundleMetadata(pe,$))}(a.localStore,p),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(p){return oo("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var x}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Uv(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function $u(n,e){return function QL(n,e){return n.asyncQueue.enqueue((0,J.Z)(function*(){return function(t,r){const i=at(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield Lv(n),e)}))}(Z(n=vn(n,A)),e).then(t=>t?new es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new lo(this,t):null)}}class YA extends nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new wT(new Za(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ya.forKey(t,this.firestore,null)}}class wF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YA(e)}get(e){const t=xm(e);return this._delegate.get(t).then(r=>new TT(this._firestore,new qd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=xm(e);return r?(ik("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=xm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=xm(e);return this._delegate.delete(t),this}}class TF{constructor(e){this._delegate=e}set(e,t,r){const i=xm(e);return r?(ik("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=xm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=xm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ET(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new CT(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Pm(e,new YA(e),t),i.set(t,a)),a}}Pm.INSTANCES=new WeakMap;class Ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ya(t,new vr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new Ya(t,new vr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $v(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $v(this.firestore,s(this._delegate,e))}catch(t){throw co(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof vr&&l(this._delegate,e)}set(e,t){t=ik("DocumentReference.set",t);try{return t?pF(this._delegate,e,t):pF(this._delegate,e)}catch(r){throw co(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?gF(this._delegate,e):gF(this._delegate,e,t,...r)}catch(i){throw co(i,"updateDoc()","DocumentReference.update()")}}delete(){return function $j(n){return jv(vn(n.firestore,A),[new qa(n._key,yr.none())])}(this._delegate)}onSnapshot(...e){const t=CF(e),r=bF(e,i=>new TT(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return mF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Fj(n){n=vn(n,vr);const e=vn(n.firestore,A),t=Z(e),r=new ep(e);return function OA(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(r=(0,J.Z)(function*(i,a,c){try{const h=yield function(p,v){const b=at(p);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Le(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=$d(h,`Failed to get document '${a} from cache`);c.reject(p)}}),function(i,a,c){return r.apply(this,arguments)})(yield Lv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qd(e,r,n._key,i,new Nm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Uj(n){n=vn(n,vr);const e=vn(n.firestore,A);return pT(Z(e),n._key,{source:"server"}).then(t=>rk(e,n,t))}(this._delegate):function Lj(n){n=vn(n,vr);const e=vn(n.firestore,A);return pT(Z(e),n._key).then(t=>rk(e,n,t))}(this._delegate),t.then(r=>new TT(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ya(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}function co(n,e,t){return n.message=n.message.replace(e,t),n}function CF(n){for(const e of n)if("object"==typeof e&&!sk(e))return e;return{}}function bF(n,e){var t,r;let i;return i=sk(n[0])?n[0]:sk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class TT{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fF(this._delegate,e._delegate)}}class CT extends TT{data(e){const t=this._delegate.data(e);return function EP(n,e){n||dt()}(void 0!==t),t}}class lo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YA(e)}where(e,t,r){try{return new lo(this.firestore,Xf(this._delegate,function bj(n,e,t){const r=e,i=zA("where",n);return IT._create(i,r,t)}(e,t,r)))}catch(i){throw co(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new lo(this.firestore,Xf(this._delegate,function Dj(n,e="asc"){const t=e,r=zA("orderBy",n);return tk._create(r,t)}(e,t)))}catch(r){throw co(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new lo(this.firestore,Xf(this._delegate,function Sj(n){return Wx("limit",n),WA._create("limit",n,"F")}(e)))}catch(t){throw co(t,"limit()","Query.limit()")}}limitToLast(e){try{return new lo(this.firestore,Xf(this._delegate,function Aj(n){return Wx("limitToLast",n),WA._create("limitToLast",n,"L")}(e)))}catch(t){throw co(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new lo(this.firestore,Xf(this._delegate,function Rj(...n){return qA._create("startAt",n,!0)}(...e)))}catch(t){throw co(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new lo(this.firestore,Xf(this._delegate,function Nj(...n){return qA._create("startAfter",n,!1)}(...e)))}catch(t){throw co(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new lo(this.firestore,Xf(this._delegate,function Pj(...n){return KA._create("endBefore",n,!1)}(...e)))}catch(t){throw co(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new lo(this.firestore,Xf(this._delegate,function xj(...n){return KA._create("endAt",n,!0)}(...e)))}catch(t){throw co(t,"endAt()","Query.endAt()")}}isEqual(e){return d(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Bj(n){n=vn(n,es);const e=vn(n.firestore,A),t=Z(e),r=new ep(e);return function ZL(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(r=(0,J.Z)(function*(i,a,c){try{const h=yield hv(i,a,!0),p=new K0(a,h.ir),v=p.sc(h.documents),b=p.applyChanges(v,!1);c.resolve(b.snapshot)}catch(h){const p=$d(h,`Failed to execute query '${a} against cache`);c.reject(p)}}),function(i,a,c){return r.apply(this,arguments)})(yield Lv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Jf(e,r,n,i))}(this._delegate):"server"===e?.source?function jj(n){n=vn(n,es);const e=vn(n.firestore,A),t=Z(e),r=new ep(e);return LA(t,n._query,{source:"server"}).then(i=>new Jf(e,r,n,i))}(this._delegate):function Vj(n){n=vn(n,es);const e=vn(n.firestore,A),t=Z(e),r=new ep(e);return oF(n._query),LA(t,n._query).then(i=>new Jf(e,r,n,i))}(this._delegate),t.then(r=>new ok(this.firestore,new Jf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CF(e),r=bF(e,i=>new ok(this.firestore,new Jf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return mF(this._delegate,t,r)}withConverter(e){return new lo(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}class h${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new CT(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ok{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new lo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new CT(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new h$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new CT(this._firestore,r))})}isEqual(e){return fF(this._delegate,e._delegate)}}class $v extends lo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ya(this.firestore,e):null}doc(e){try{return new Ya(this.firestore,void 0===e?u(this._delegate):u(this._delegate,e))}catch(t){throw co(t,"doc()","CollectionReference.doc()")}}add(e){return function Hj(n,e){const t=vn(n.firestore,A),r=u(n),i=ZA(n.converter,e);return jv(t,[$A(Am(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ya(this.firestore,t))}isEqual(e){return l(this._delegate,e._delegate)}withConverter(e){return new $v(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}function xm(n){return vn(n,vr)}class ak{constructor(...e){this._delegate=new Wd(...e)}static documentId(){return new ak(or.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Wd&&this._delegate._internalPath.isEqual(e._internalPath)}}class km{constructor(e){this._delegate=e}static serverTimestamp(){const e=function r$(){return new Yx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new km(e)}static delete(){const e=function n$(){return new mT("deleteField")}();return e._methodName="FieldValue.delete",new km(e)}static arrayUnion(...e){const t=function i$(...n){return new Ij("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new km(t)}static arrayRemove(...e){const t=function s$(...n){return new Ej("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new km(t)}static increment(e){const t=function o$(n){return new wj("increment",n)}(e);return t._methodName="FieldValue.increment",new km(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const f$={Firestore:EF,GeoPoint:BA,Timestamp:_r,Blob:wT,Transaction:wF,WriteBatch:TF,DocumentReference:Ya,DocumentSnapshot:TT,Query:lo,QueryDocumentSnapshot:CT,QuerySnapshot:ok,CollectionReference:$v,FieldPath:ak,FieldValue:km,setLogLevel:function d$(n){!function Ty(n){Po.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function DF(n,e){return function m$(n,e=RI.z){return new Hi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function uk(n,e){return DF(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function QA(n,e){return uk(n,e).pipe(id(void 0),Eb(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(b=>b.doc.ref.isEqual(c.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function SF(n,e,t){return QA(n,t).pipe(Ua((r,i)=>function y$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function v$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ck(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ck(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ck(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,wb.x)(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ck(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function AF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function g$(n){(function p$(n,e){n.INTERNAL.registerComponent(new rr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},f$)))})(n,(e,t)=>new EF(e,t,new l$)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Tb.Z);class RF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(id(void 0),Eb(),ii(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),Vt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ua((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AF(e);return SF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}valueChanges(e={}){return uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Vt.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Vt.iC)}add(e){return this.ref.add(e)}doc(e){return new NF(this.ref.doc(e),this.afs)}}class NF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=kF(r,t);return new RF(i,a,this.afs)}snapshotChanges(){return function _$(n,e){return DF(n,e).pipe(id(void 0),Eb(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dn.D)(this.ref.get(e)).pipe(Vt.iC)}}class I${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QA(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),Vt.iC):QA(this.query,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ua((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AF(e);return SF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}valueChanges(e={}){return uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Vt.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Vt.iC)}}const PF=new m.OlP("angularfire2.enableFirestorePersistence"),xF=new m.OlP("angularfire2.firestore.persistenceSettings"),E$=new m.OlP("angularfire2.firestore.settings"),w$=new m.OlP("angularfire2.firestore.use-emulator");function kF(n,e=(t=>t)){return{query:e(n),ref:n}}let MF=(()=>{class n{constructor(t,r,i,a,c,h,p,v,b,S,x,$,X,pe,we,Je,ct){this.schedulers=p;const tt=(0,Wn.on)(t,h,r),ft=b;S&&Zp(tt,h,x,X,pe,we,$,Je),[this.firestore,this.persistenceEnabled$]=(0,Wn.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const kt=h.runOutsideAngular(()=>tt.firestore());if(a&&kt.settings(a),ft&&kt.useEmulator(...ft),i&&!Ui(c)){const zt=()=>{try{return(0,Dn.D)(kt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Yr){return typeof console<"u"&&console.warn(Yr),(0,Et.of)(!1)}};return[kt,h.runOutsideAngular(zt)]}return[kt,(0,Et.of)(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=kF(i,r),h=this.schedulers.ngZone.run(()=>a);return new RF(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new I$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wn.Dh),m.LFG(Wn.xv,8),m.LFG(PF,8),m.LFG(E$,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Vt.HU),m.LFG(xF,8),m.LFG(w$,8),m.LFG(Yp,8),m.LFG(Oh,8),m.LFG(Lh,8),m.LFG(DI,8),m.LFG(SI,8),m.LFG(AI,8),m.LFG(C_,8),m.LFG(zp,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),T$=(()=>{class n{constructor(){Kp.Z.registerVersion("angularfire",Vt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:PF,useValue:!0},{provide:xF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[MF]}),n})();var XA=F(4829),OF=F(2420);const LF="@firebase/database";let lk="";function UF(n){lk=n}class D${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class S${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new D$(e)}}catch{}return new S$},Mm=VF("localStorage"),dk=VF("sessionStorage"),Hv=new Mr.Yd("@firebase/database"),BF=function(){let n=1;return function(){return n++}}(),jF=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},bT=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=bT.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let Om=null,$F=!0;const HF=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hv.logLevel=Mr.in.VERBOSE,Om=Hv.log.bind(Hv),e&&dk.set("logging_enabled",!0)):"function"==typeof n?Om=n:(Om=null,dk.remove("logging_enabled"))},cs=function(...n){if(!0===$F&&($F=!1,null===Om&&!0===dk.get("logging_enabled")&&HF(!0)),Om){const e=bT.apply(null,n);Om(e)}},DT=function(n){return function(...e){cs(n,...e)}},hk=function(...n){const e="FIREBASE INTERNAL ERROR: "+bT(...n);Hv.error(e)},dl=function(...n){const e=`FIREBASE FATAL ERROR: ${bT(...n)}`;throw Hv.error(e),new Error(e)},Ws=function(...n){const e="FIREBASE WARNING: "+bT(...n);Hv.warn(e)},JA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},np="[MIN_NAME]",Kd="[MAX_NAME]",Lm=function(n,e){if(n===e)return 0;if(n===np||e===Kd)return-1;if(e===np||n===Kd)return 1;{const t=WF(n),r=WF(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},N$=function(n,e){return n===e?0:n<e?-1:1},ST=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},fk=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=fk(n[e[r]]);return t+="}",t},GF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ls(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zF=function(n){(0,k.hu)(!JA(n),"Invalid JSON number");const r=1023;let i,a,c,h,p;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(p=52;p;p-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let S="";for(p=0;p<64;p+=8){let x=parseInt(b.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),S+=x}return S.toLowerCase()},M$=new RegExp("^-?(0*)\\d{1,10}$"),WF=function(n){if(M$.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Gv=function(n){try{n()}catch(e){setTimeout(()=>{throw Ws("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},AT=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class U${constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ws(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class V${constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(cs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ws(e)}}let RT=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const QF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eU="websocket",tU="long_polling";class gk{constructor(e,t,r,i,a=!1,c="",h=!1,p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nU(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===eU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==tU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function B$(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ls(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class j${constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const mk={},_k={};function yk(n){const e=n.toString();return mk[e]||(mk[e]=new j$),mk[e]}class H${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class rp{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=DT(e),this.stats_=yk(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),nU(t,tU,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new H$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vk((...a)=>{const[c,h,p,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&QF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){rp.forceAllow_=!0}static forceDisallow(){rp.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!rp.forceAllow_&&(rp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=GF(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class vk{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=BF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=vk.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){cs("frame writing exception"),h.stack&&cs(h.stack),cs(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||cs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{cs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let tR=null;typeof MozWebSocket<"u"?tR=MozWebSocket:typeof WebSocket<"u"&&(tR=WebSocket);let zv=(()=>{class n{constructor(t,r,i,a,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=DT(this.connId),this.stats_=yk(r),this.connURL=n.connectionURL_(r,h,p,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&QF.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),c&&(h.p=c),nU(t,eU,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mm.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${lk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new tR(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==tR&&!n.forceDisallow_}static previouslyFailed(){return Mm.isInMemoryStorage||!0===Mm.get("previous_websocket_failure")}markConnectionHealthy(){Mm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=GF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[rp,zv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=zv&&zv.isAvailable();let i=r&&!zv.previouslyFailed();if(t.webSocketOnly&&(r||Ws("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zv];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class mU{constructor(e,t,r,i,a,c,h,p,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=DT("c:"+this.id+":"),this.transportManager_=new cU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=AT(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ST("t",e),r=ST("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ST("t",e),r=ST("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ST("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?hk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ws("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),AT(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):AT(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _U{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class yU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nR extends yU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nR}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ln(){return new Hn("")}function hn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ip(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Hn(n.pieces_,e)}function Ek(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function NT(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function EU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Hn(e,0)}function Fr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Hn(t,0)}function fn(n){return n.pieceNum_>=n.pieces_.length}function ho(n,e){const t=hn(n),r=hn(e);if(null===t)return e;if(t===r)return ho(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function dH(n,e){const t=NT(n,0),r=NT(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Lm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function wk(n,e){if(ip(n)!==ip(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Qa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ip(n)>ip(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class hH{constructor(e,t){this.errorPrefix_=t,this.parts_=NT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);wU(this)}}function wU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Fm(n))}function Fm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Tk extends yU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Tk}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const PT=1e3;let iR,Um=(()=>{class n extends _U{constructor(t,r,i,a,c,h,p,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=DT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=PT,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nR.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,k.Wl)(c)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const v=p.d,b=p.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ws(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):hk("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=PT,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=PT,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=PT),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,J.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,v=null;const b=function(){v?v.close():(p=!0,a())};t.realtime_={close:b,sendRequest:function($){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest($)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,X]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?cs("getToken() completed but was canceled"):(cs("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=X&&X.token,v=new mU(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,pe=>{Ws(pe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch($){t.log_("Failed to get token: "+$),p||(t.repoInfo_.nodeAdmin&&Ws($),b())}}})()}interrupt(t){cs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){cs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=PT,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>fk(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Hn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){cs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){cs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+lk.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=nR.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class In{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new In(e,t)}}class rR{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new In(np,e),i=new In(np,t);return 0!==this.compare(r,i)}minPost(){return In.MIN}}class bU extends rR{static get __EMPTY_NODE(){return iR}static set __EMPTY_NODE(e){iR=e}compare(e,t){return Lm(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return In.MIN}maxPost(){return new In(Kd,iR)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new In(e,iR)}toString(){return".key"}}const hl=new bU;class sR{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let bk,Hu=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Oo.EMPTY_NODE,this.right=c??Oo.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Oo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Oo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Oo{constructor(e,t=Oo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Oo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Hu.BLACK,null,null))}remove(e){return new Oo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sR(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sR(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sR(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sR(this.root_,null,this.comparator_,!0,e)}}function IH(n,e){return Lm(n.name,e.name)}function Ck(n,e){return Lm(n,e)}Oo.EMPTY_NODE=new class vH{copy(e,t,r,i,a){return this}insert(e,t,r){return new Hu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const DU=function(n){return"number"==typeof n?"number:"+zF(n):"string:"+n},SU=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===bk||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===bk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AU,RU,NU,Wv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SU(this.priorityNode_)}static set __childrenNodeConstructor(t){AU=t}static get __childrenNodeConstructor(){return AU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return fn(t)?this:".priority"===hn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=hn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===ip(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+DU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?zF(this.value_):this.value_,this.lazyHash_=jF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ir=new class CH extends rR{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Lm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return In.MIN}maxPost(){return new In(Kd,new Wv("[PRIORITY-POST]",NU))}makePost(e,t){const r=RU(e);return new In(t,new Wv("[PRIORITY-POST]",r))}toString(){return".priority"}},bH=Math.log(2);class DH{constructor(e){this.count=parseInt(Math.log(e+1)/bH,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const oR=function(n,e,t,r){n.sort(e);const i=function(p,v){const b=v-p;let S,x;if(0===b)return null;if(1===b)return S=n[p],x=t?t(S):S,new Hu(x,S.node,Hu.BLACK,null,null);{const $=parseInt(b/2,10)+p,X=i(p,$),pe=i($+1,v);return S=n[$],x=t?t(S):S,new Hu(x,S.node,Hu.BLACK,X,pe)}},h=function(p){let v=null,b=null,S=n.length;const x=function(X,pe){const we=S-X,Je=S;S-=X;const ct=i(we+1,Je),tt=n[we],ft=t?t(tt):tt;$(new Hu(ft,tt.node,pe,null,ct))},$=function(X){v?(v.left=X,v=X):(b=X,v=X)};for(let X=0;X<p.count;++X){const pe=p.nextBitIsOne(),we=Math.pow(2,p.count-(X+1));pe?x(we,Hu.BLACK):(x(we,Hu.BLACK),x(we,Hu.RED))}return b}(new DH(n.length));return new Oo(r||e,h)};let Dk;const qv={};class Zd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(qv&&Ir,"ChildrenNode.ts has not been loaded"),Dk=Dk||new Zd({".priority":qv},{".priority":Ir}),Dk}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Oo?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==hl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(In.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?oR(r,e.getCompare()):qv;const p=e.toString(),v=Object.assign({},this.indexSet_);v[p]=e;const b=Object.assign({},this.indexes_);return b[p]=h,new Zd(b,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const c=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(c,"Missing index implementation for "+a),i===qv){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(In.Wrap);let v=p.getNext();for(;v;)v.name!==e.name&&h.push(v),v=p.getNext();return h.push(e),oR(h,c.getCompare())}return qv}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new In(e.name,h))),p.insert(e,e.node)}});return new Zd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===qv)return i;{const a=t.get(e.name);return a?i.remove(new In(e.name,a)):i}});return new Zd(r,this.indexSet_)}}let xT,Yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SU(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xT||(xT=new n(new Oo(Ck),null,Zd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xT}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?xT:r}}getChild(t){const r=hn(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new In(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?xT:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=hn(t);if(null===i)return r;{(0,k.hu)(".priority"!==hn(t)||1===ip(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Ir,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+DU(this.getPriority().val())+":"),this.forEachChild(Ir,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":jF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new In(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new In(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new In(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,In.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,In.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===kT?-1:0}withIndex(t){if(t===hl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===hl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ir),a=r.getIterator(Ir);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===hl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const kT=new class SH extends Yt{constructor(){super(new Oo(Ck),Yt.EMPTY_NODE,Zd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(In,{MIN:{value:new In(np,Yt.EMPTY_NODE)},MAX:{value:new In(Kd,kT)}}),bU.__EMPTY_NODE=Yt.EMPTY_NODE,Wv.__childrenNodeConstructor=Yt,function EH(n){bk=n}(kT),function TH(n){NU=n}(kT);const AH=!0;function Kr(n,e=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Wv(n,Kr(e));if(n instanceof Array||!AH){let t=Yt.EMPTY_NODE;return ls(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Kr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Kr(e))}{const t=[];let r=!1;if(ls(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Kr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new In(c,p)))}}),0===t.length)return Yt.EMPTY_NODE;const a=oR(t,IH,c=>c.name,Ck);if(r){const c=oR(t,Ir.getCompare());return new Yt(a,Kr(e),new Zd({".priority":c},{".priority":Ir}))}return new Yt(a,Kr(e),Zd.Default)}}!function wH(n){RU=n}(Kr);class Sk extends rR{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!fn(e)&&".priority"!==hn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Lm(e.name,t.name):a}makePost(e,t){const r=Kr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new In(t,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,kT);return new In(Kd,e)}toString(){return NT(this.indexPath_,0).join("/")}}const Ak=new class RH extends rR{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Lm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return In.MIN}maxPost(){return In.MAX}makePost(e,t){const r=Kr(e);return new In(t,r)}toString(){return".value"}};function PU(n){return{type:"value",snapshotNode:n}}function Kv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function MT(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function OT(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Rk{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(MT(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Kv(t,r)):c.trackChildChange(OT(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ir,(i,a)=>{t.hasChild(i)||r.trackChildChange(MT(i,a))}),t.isLeafNode()||t.forEachChild(Ir,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(OT(i,a,c))}else r.trackChildChange(Kv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class LT{constructor(e){this.indexedFilter_=new Rk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=LT.getStartPost_(e),this.endPost_=LT.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new In(t,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const a=this;return t.forEachChild(Ir,(c,h)=>{a.matches(new In(c,h))||(i=i.updateImmediateChild(c,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class PH{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new LT(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new In(t,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Yt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(x,$)=>S($,x)}else c=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const p=new In(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(p);if(h.hasChild(t)){const S=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const $=null==x?1:c(x,p);if(b&&!r.isEmpty()&&$>=0)return a?.trackChildChange(OT(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(MT(t,S));const pe=h.updateImmediateChild(t,Yt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(a?.trackChildChange(Kv(x.name,x.node)),pe.updateImmediateChild(x.name,x.node)):pe}}return r.isEmpty()?e:b&&c(v,p)>=0?(null!=a&&(a.trackChildChange(MT(v.name,v.node)),a.trackChildChange(Kv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Yt.EMPTY_NODE)):e}}class aR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ir}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:np}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ir}copy(){const e=new aR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Nk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Pk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function uR(n,e){const t=n.copy();return t.index_=e,t}function xU(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ir?t="$priority":n.index_===Ak?t="$value":n.index_===hl?t="$key":((0,k.hu)(n.index_ instanceof Sk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function kU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ir&&(e.i=n.index_.toString()),e}class cR extends _U{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=DT("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=cR.getListenId_(e,r),h={};this.listens_[c]=h;const p=xU(e._queryParams);this.restRequest_(a+".json",p,(v,b)=>{let S=b;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,c)===h){let x;x=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(x,null)}})}unlisten(e,t){const r=cR.getListenId_(e,t);delete this.listens_[r]}get(e){const t=xU(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,k.cI)(h.responseText)}catch{Ws("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Ws("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class FH{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function lR(){return{value:null,children:new Map}}function Zv(n,e,t){if(fn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=hn(e);n.children.has(r)||n.children.set(r,lR()),Zv(n.children.get(r),e=cr(e),t)}}function xk(n,e){if(fn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ir,(r,i)=>{Zv(n,new Hn(r),i)}),xk(n,e)}}if(n.children.size>0){const t=hn(e);return e=cr(e),n.children.has(t)&&xk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function kk(n,e,t){null!==n.value?t(e,n.value):function UH(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{kk(i,new Hn(e.toString()+"/"+r),t)})}class VH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ls(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class $H{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new VH(e);const r=1e4+2e4*Math.random();AT(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ls(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),AT(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var fl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(fl||{});function Lk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class dR{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=fl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(fn(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Hn(e));return new dR(Ln(),t,this.revert)}}return(0,k.hu)(hn(this.path)===e,"operationForChild called for unrelated child."),new dR(cr(this.path),this.affectedTree,this.revert)}}class FT{constructor(e,t){this.source=e,this.path=t,this.type=fl.LISTEN_COMPLETE}operationForChild(e){return fn(this.path)?new FT(this.source,Ln()):new FT(this.source,cr(this.path))}}class Vm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=fl.OVERWRITE}operationForChild(e){return fn(this.path)?new Vm(this.source,Ln(),this.snap.getImmediateChild(e)):new Vm(this.source,cr(this.path),this.snap)}}class Yv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=fl.MERGE}operationForChild(e){if(fn(this.path)){const t=this.children.subtree(new Hn(e));return t.isEmpty()?null:t.value?new Vm(this.source,Ln(),t.value):new Yv(this.source,Ln(),t)}return(0,k.hu)(hn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Yv(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class sp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fn(e))return this.isFullyInitialized()&&!this.filtered_;const t=hn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class HH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UT(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function WH(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new In(e.childName,e.snapshotNode),i=new In(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function zH(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(p,n.query_))})})}function hR(n,e){return{eventCache:n,serverCache:e}}function VT(n,e,t,r){return hR(new sp(e,t,r),n.serverCache)}function OU(n,e,t,r){return hR(n.eventCache,new sp(e,t,r))}function fR(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Bm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Fk;class Er{constructor(e,t=(()=>(Fk||(Fk=new Oo(N$)),Fk))()){this.value=e,this.children=t}static fromObject(e){let t=new Er(null);return ls(e,(r,i)=>{t=t.set(new Hn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ln(),value:this.value};if(fn(e))return null;{const r=hn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=a?{path:Fr(new Hn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fn(e))return this;{const t=hn(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new Er(null)}}set(e,t){if(fn(e))return new Er(t,this.children);{const r=hn(e),a=(this.children.get(r)||new Er(null)).set(cr(e),t),c=this.children.insert(r,a);return new Er(this.value,c)}}remove(e){if(fn(e))return this.children.isEmpty()?new Er(null):new Er(null,this.children);{const t=hn(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Er(null):new Er(this.value,a)}return this}}get(e){if(fn(e))return this.value;{const t=hn(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(fn(e))return t;{const r=hn(e),a=(this.children.get(r)||new Er(null)).setTree(cr(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Er(this.value,c)}}fold(e){return this.fold_(Ln(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Fr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ln(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(fn(e))return null;{const a=hn(e),c=this.children.get(a);return c?c.findOnPath_(cr(e),Fr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ln(),t)}foreachOnPath_(e,t,r){if(fn(e))return this;{this.value&&r(t,this.value);const i=hn(e),a=this.children.get(i);return a?a.foreachOnPath_(cr(e),Fr(t,i),r):new Er(null)}}foreach(e){this.foreach_(Ln(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Fr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Gu{constructor(e){this.writeTree_=e}static empty(){return new Gu(new Er(null))}}function BT(n,e,t){if(fn(e))return new Gu(new Er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=ho(i,e);return a=a.updateChild(c,t),new Gu(n.writeTree_.set(i,a))}{const i=new Er(t),a=n.writeTree_.setTree(e,i);return new Gu(a)}}}function Uk(n,e,t){let r=n;return ls(t,(i,a)=>{r=BT(r,Fr(e,i),a)}),r}function LU(n,e){if(fn(e))return Gu.empty();{const t=n.writeTree_.setTree(e,new Er(null));return new Gu(t)}}function Vk(n,e){return null!=jm(n,e)}function jm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ho(t.path,e)):null}function FU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ir,(r,i)=>{e.push(new In(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new In(r,i.value))}),e}function op(n,e){if(fn(e))return n;{const t=jm(n,e);return new Gu(null!=t?new Er(t):n.writeTree_.subtree(e))}}function Bk(n){return n.writeTree_.isEmpty()}function Qv(n,e){return UU(Ln(),n.writeTree_,e)}function UU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=UU(Fr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Fr(n,".priority"),r)),t}}function pR(n,e){return HU(e,n)}function XH(n,e){if(n.snap)return Qa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Qa(Fr(n.path,t),e))return!0;return!1}function eG(n){return n.visible}function VU(n,e,t){let r=Gu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)Qa(t,c)?(h=ho(t,c),r=BT(r,h,a.snap)):Qa(c,t)&&(h=ho(c,t),r=BT(r,Ln(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Qa(t,c))h=ho(t,c),r=Uk(r,h,a.children);else if(Qa(c,t))if(h=ho(c,t),fn(h))r=Uk(r,Ln(),a.children);else{const p=(0,k.DV)(a.children,hn(h));if(p){const v=p.getChild(cr(h));r=BT(r,Ln(),v)}}}}}return r}function BU(n,e,t,r,i){if(r||i){const a=op(n.visibleWrites,e);return!i&&Bk(a)?t:i||null!=t||Vk(a,Ln())?Qv(VU(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Qa(v.path,e)||Qa(e,v.path))},e),t||Yt.EMPTY_NODE):null}{const a=jm(n.visibleWrites,e);if(null!=a)return a;{const c=op(n.visibleWrites,e);return Bk(c)?t:null!=t||Vk(c,Ln())?Qv(c,t||Yt.EMPTY_NODE):null}}}function gR(n,e,t,r){return BU(n.writeTree,n.treePath,e,t,r)}function jk(n,e){return function tG(n,e,t){let r=Yt.EMPTY_NODE;const i=jm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ir,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=op(n.visibleWrites,e);return t.forEachChild(Ir,(c,h)=>{const p=Qv(op(a,new Hn(c)),h);r=r.updateImmediateChild(c,p)}),FU(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return FU(op(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function jU(n,e,t,r){return function nG(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Fr(e,t);if(Vk(n.visibleWrites,a))return null;{const c=op(n.visibleWrites,a);return Bk(c)?i.getChild(t):Qv(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function mR(n,e){return function iG(n,e){return jm(n.visibleWrites,e)}(n.writeTree,Fr(n.treePath,e))}function $k(n,e,t){return function rG(n,e,t,r){const i=Fr(e,t),a=jm(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Qv(op(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function $U(n,e){return HU(Fr(n.treePath,e),n.writeTree)}function HU(n,e){return{treePath:n,writeTree:e}}class uG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,OT(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,MT(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Kv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,OT(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const GU=new class cG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Hk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new sp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $k(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Bm(this.viewCache_),a=function aG(n,e,t,r,i,a){return function sG(n,e,t,r,i,a,c){let h;const p=op(n.visibleWrites,e),v=jm(p,Ln());if(null!=v)h=v;else{if(null==t)return[];h=Qv(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const b=[],S=c.getCompare(),x=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let $=x.getNext();for(;$&&b.length<i;)0!==S($,r)&&b.push($),$=x.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function zU(n,e,t,r,i,a){const c=e.eventCache;if(null!=mR(r,t))return e;{let h,p;if(fn(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Bm(e),S=jk(r,v instanceof Yt?v:Yt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=gR(r,Bm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=hn(t);if(".priority"===v){(0,k.hu)(1===ip(t),"Can't have a priority with additional path components");const b=c.getNode();p=e.serverCache.getNode();const S=jU(r,t,b,p);h=null!=S?n.filter.updatePriority(b,S):c.getNode()}else{const b=cr(t);let S;if(c.isCompleteForChild(v)){p=e.serverCache.getNode();const x=jU(r,t,c.getNode(),p);S=null!=x?c.getNode().getImmediateChild(v).updateChild(b,x):c.getNode().getImmediateChild(v)}else S=$k(r,v,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),v,S,b,i,a):c.getNode()}}return VT(e,h,c.isFullyInitialized()||fn(t),n.filter.filtersNodes())}}function _R(n,e,t,r,i,a,c,h){const p=e.serverCache;let v;const b=c?n.filter:n.filter.getIndexedFilter();if(fn(t))v=b.updateFullNode(p.getNode(),r,null);else if(b.filtersNodes()&&!p.isFiltered()){const $=p.getNode().updateChild(t,r);v=b.updateFullNode(p.getNode(),$,null)}else{const $=hn(t);if(!p.isCompleteForPath(t)&&ip(t)>1)return e;const X=cr(t),we=p.getNode().getImmediateChild($).updateChild(X,r);v=".priority"===$?b.updatePriority(p.getNode(),we):b.updateChild(p.getNode(),$,we,X,GU,null)}const S=OU(e,v,p.isFullyInitialized()||fn(t),b.filtersNodes());return zU(n,S,t,i,new Hk(i,S,a),h)}function Gk(n,e,t,r,i,a,c){const h=e.eventCache;let p,v;const b=new Hk(i,e,a);if(fn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=VT(e,v,!0,n.filter.filtersNodes());else{const S=hn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),p=VT(e,v,h.isFullyInitialized(),h.isFiltered());else{const x=cr(t),$=h.getNode().getImmediateChild(S);let X;if(fn(x))X=r;else{const pe=b.getCompleteChild(S);X=null!=pe?".priority"===Ek(x)&&pe.getChild(EU(x)).isEmpty()?pe:pe.updateChild(x,r):Yt.EMPTY_NODE}p=$.equals(X)?e:VT(e,n.filter.updateChild(h.getNode(),S,X,x,b,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function WU(n,e){return n.eventCache.isCompleteForChild(e)}function qU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zk(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,p=e;v=fn(t)?r:new Er(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((S,x)=>{if(b.hasChild(S)){const X=qU(0,e.serverCache.getNode().getImmediateChild(S),x);p=_R(n,p,new Hn(S),X,i,a,c,h)}}),v.children.inorderTraversal((S,x)=>{const $=!e.serverCache.isCompleteForChild(S)&&null===x.value;if(!b.hasChild(S)&&!$){const pe=qU(0,e.serverCache.getNode().getImmediateChild(S),x);p=_R(n,p,new Hn(S),pe,i,a,c,h)}}),p}class yG{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Rk(r.getIndex()),a=function xH(n){return n.loadsAllData()?new Rk(n.getIndex()):n.hasLimit()?new PH(n):new LT(n)}(r);this.processor_=function lG(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,p=i.updateFullNode(Yt.EMPTY_NODE,c.getNode(),null),v=a.updateFullNode(Yt.EMPTY_NODE,h.getNode(),null),b=new sp(p,c.isFullyInitialized(),i.filtersNodes()),S=new sp(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=hR(S,b),this.eventGenerator_=new HH(this.query_)}get query(){return this.query_}}function EG(n,e){const t=Bm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!fn(e)&&!t.getImmediateChild(hn(e)).isEmpty())?t.getChild(e):null}function KU(n){return 0===n.eventRegistrations_.length}function ZU(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function YU(n,e,t,r){e.type===fl.MERGE&&null!==e.source.queryId&&((0,k.hu)(Bm(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(fR(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function hG(n,e,t,r,i){const a=new uG;let c,h;if(t.type===fl.OVERWRITE){const v=t;v.source.fromUser?c=Gk(n,e,v.path,v.snap,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!fn(v.path),c=_R(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===fl.MERGE){const v=t;v.source.fromUser?c=function pG(n,e,t,r,i,a,c){let h=e;return r.foreach((p,v)=>{const b=Fr(t,p);WU(e,hn(b))&&(h=Gk(n,h,b,v,i,a,c))}),r.foreach((p,v)=>{const b=Fr(t,p);WU(e,hn(b))||(h=Gk(n,h,b,v,i,a,c))}),h}(n,e,v.path,v.children,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),c=zk(n,e,v.path,v.children,r,i,h,a))}else if(t.type===fl.ACK_USER_WRITE){const v=t;c=v.revert?function _G(n,e,t,r,i,a){let c;if(null!=mR(r,t))return e;{const h=new Hk(r,e,i),p=e.eventCache.getNode();let v;if(fn(t)||".priority"===hn(t)){let b;if(e.serverCache.isFullyInitialized())b=gR(r,Bm(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Yt,"serverChildren would be complete if leaf node"),b=jk(r,S)}v=n.filter.updateFullNode(p,b,a)}else{const b=hn(t);let S=$k(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=p.getImmediateChild(b)),v=null!=S?n.filter.updateChild(p,b,S,cr(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,Yt.EMPTY_NODE,cr(t),h,a):p,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=gR(r,Bm(e)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=mR(r,Ln()),VT(e,v,c,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function gG(n,e,t,r,i,a,c){if(null!=mR(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(fn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return _R(n,e,t,p.getNode().getChild(t),i,a,h,c);if(fn(t)){let v=new Er(null);return p.getNode().forEachChild(hl,(b,S)=>{v=v.set(new Hn(b),S)}),zk(n,e,t,v,i,a,h,c)}return e}{let v=new Er(null);return r.foreach((b,S)=>{const x=Fr(t,b);p.isCompleteForPath(x)&&(v=v.set(b,p.getNode().getChild(x)))}),zk(n,e,t,v,i,a,h,c)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==fl.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);c=function mG(n,e,t,r,i){const a=e.serverCache;return zU(n,OU(e,a.getNode(),a.isFullyInitialized()||fn(t),a.isFiltered()),t,r,GU,i)}(n,e,t.path,r,a)}const p=a.getChanges();return function fG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=fR(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(PU(fR(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function dG(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,QU(n,a.changes,a.viewCache.eventCache.getNode(),null)}function QU(n,e,t,r){return function GH(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function NH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),UT(n,i,"child_removed",e,r,t),UT(n,i,"child_added",e,r,t),UT(n,i,"child_moved",a,r,t),UT(n,i,"child_changed",e,r,t),UT(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let yR,IR;class XU{constructor(){this.views=new Map}}function Wk(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),YU(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(YU(c,e,t,r));return a}}function JU(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=gR(t,i?r:null),p=!1;h?p=!0:r instanceof Yt?(h=jk(t,r),p=!1):(h=Yt.EMPTY_NODE,p=!1);const v=hR(new sp(h,p,!1),new sp(r,i,!1));return new yG(e,v)}return c}function e2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ap(n,e){let t=null;for(const r of n.views.values())t=t||EG(r,e);return t}function t2(n,e){return e._queryParams.loadsAllData()?vR(n):n.views.get(e._queryIdentifier)}function n2(n,e){return null!=t2(n,e)}function up(n){return null!=vR(n)}function vR(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let PG=1;class r2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Er(null),this.pendingWriteTree_=function oG(){return{visibleWrites:Gu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qk(n,e,t,r,i){return function KH(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=BT(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Xv(n,new Vm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function cp(n,e,t=!1){const r=function YH(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function QH(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&XH(h,r.path)?i=!1:Qa(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function JH(n){n.visibleWrites=VU(n.allWrites,eG,Ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=LU(n.visibleWrites,r.path):ls(r.children,p=>{n.visibleWrites=LU(n.visibleWrites,Fr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let a=new Er(null);return null!=r.snap?a=a.set(Ln(),!0):ls(r.children,c=>{a=a.set(new Hn(c),!0)}),Xv(n,new dR(r.path,a,t))}return[]}function jT(n,e,t){return Xv(n,new Vm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ER(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let h=[];if(c&&("default"===e._queryIdentifier||n2(c,e))){const p=function AG(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const h=up(n);if("default"===i)for(const[p,v]of n.views.entries())c=c.concat(ZU(v,t,r)),KU(v)&&(n.views.delete(p),v.query._queryParams.loadsAllData()||a.push(v.query));else{const p=n.views.get(i);p&&(c=c.concat(ZU(p,t,r)),KU(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return h&&!up(n)&&a.push(new(function bG(){return(0,k.hu)(yR,"Reference.ts has not been loaded"),yR}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function DG(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=p.removed;if(h=p.events,!i){const b=-1!==v.findIndex(x=>x._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(x,$)=>up($));if(b&&!S){const x=n.syncPointTree_.subtree(a);if(!x.isEmpty()){const $=function UG(n){return n.fold((e,t,r)=>{if(t&&up(t))return[vR(t)];{let i=[];return t&&(i=e2(t)),ls(r,(a,c)=>{i=i.concat(c)}),i}})}(x);for(let X=0;X<$.length;++X){const pe=$[X],we=pe.query,Je=a2(n,pe);n.listenProvider_.startListening(HT(we),$T(n,we),Je.hashFn,Je.onComplete)}}}!S&&v.length>0&&!r&&(b?n.listenProvider_.stopListening(HT(e),null):v.forEach(x=>{const $=n.queryToTagMap.get(TR(x));n.listenProvider_.stopListening(HT(x),$)}))}!function VG(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=TR(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return h}function i2(n,e,t,r){const i=Zk(n,r);if(null!=i){const a=Yk(i),c=a.path,h=a.queryId,p=ho(c,e);return Qk(n,c,new Vm(Lk(h),p,t))}return[]}function Kk(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(x,$)=>{const X=ho(x,i);a=a||ap($,X),c=c||up($)});let p,h=n.syncPointTree_.get(i);h?(c=c||up(h),a=a||ap(h,Ln())):(h=new XU,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?p=!0:(p=!1,a=Yt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild(($,X)=>{const pe=ap(X,Ln());pe&&(a=a.updateImmediateChild($,pe))}));const v=n2(h,e);if(!v&&!e._queryParams.loadsAllData()){const x=TR(e);(0,k.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const $=function BG(){return PG++}();n.queryToTagMap.set(x,$),n.tagToQueryMap.set($,x)}let S=function SG(n,e,t,r,i,a){const c=JU(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function wG(n,e){n.eventRegistrations_.push(e)}(c,t),function TG(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ir,(a,c)=>{r.push(Kv(a,c))}),t.isFullyInitialized()&&r.push(PU(t.getNode())),QU(n,r,t.getNode(),e)}(c,t)}(h,e,t,pR(n.pendingWriteTree_,i),a,p);if(!v&&!c&&!r){const x=t2(h,e);S=S.concat(function jG(n,e,t){const r=e._path,i=$T(n,e),a=a2(n,t),c=n.listenProvider_.startListening(HT(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!up(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((v,b,S)=>{if(!fn(v)&&b&&up(b))return[vR(b).query];{let x=[];return b&&(x=x.concat(e2(b).map($=>$.query))),ls(S,($,X)=>{x=x.concat(X)}),x}});for(let v=0;v<p.length;++v){const b=p[v];n.listenProvider_.stopListening(HT(b),$T(n,b))}}return c}(n,e,x))}return S}function wR(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const v=ap(h,ho(c,e));if(v)return v});return BU(i,e,a,t,!0)}function Xv(n,e){return s2(e,n.syncPointTree_,null,pR(n.pendingWriteTree_,Ln()))}function s2(n,e,t,r){if(fn(n.path))return o2(n,e,t,r);{const i=e.get(Ln());null==t&&null!=i&&(t=ap(i,Ln()));let a=[];const c=hn(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const v=t?t.getImmediateChild(c):null,b=$U(r,c);a=a.concat(s2(h,p,v,b))}return i&&(a=a.concat(Wk(i,n,r,t))),a}}function o2(n,e,t,r){const i=e.get(Ln());null==t&&null!=i&&(t=ap(i,Ln()));let a=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,v=$U(r,c),b=n.operationForChild(c);b&&(a=a.concat(o2(b,h,p,v)))}),i&&(a=a.concat(Wk(i,n,r,t))),a}function a2(n,e){const t=e.query,r=$T(n,t);return{hashFn:()=>(function vG(n){return n.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function OG(n,e,t){const r=Zk(n,t);if(r){const i=Yk(r),a=i.path,c=i.queryId,h=ho(a,e);return Qk(n,a,new FT(Lk(c),h))}return[]}(n,t._path,r):function MG(n,e){return Xv(n,new FT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function k$(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ER(n,t,null,a)}}}}function $T(n,e){const t=TR(e);return n.queryToTagMap.get(t)}function TR(n){return n._path.toString()+"$"+n._queryIdentifier}function Zk(n,e){return n.tagToQueryMap.get(e)}function Yk(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Hn(n.substr(0,e))}}function Qk(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),Wk(r,t,pR(n.pendingWriteTree_,e),null)}function HT(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function NG(){return(0,k.hu)(IR,"Reference.ts has not been loaded"),IR}())(n._repo,n._path):n}class Xk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Xk(t)}node(){return this.node_}}class Jk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Fr(this.path_,e);return new Jk(this.syncTree_,t)}node(){return wR(this.syncTree_,this.path_)}}const $G=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},u2=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?HG(n[".sv"],e,t):"object"==typeof n[".sv"]?GG(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},HG=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},GG=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},c2=function(n,e,t,r){return tM(e,new Jk(t,n),r)},eM=function(n,e,t){return tM(n,new Xk(e),t)};function tM(n,e,t){const r=n.getPriority().val(),i=u2(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=u2(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Wv(h,Kr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Wv(i))),c.forEachChild(Ir,(h,p)=>{const v=tM(p,e.getImmediateChild(h),t);v!==p&&(a=a.updateImmediateChild(h,v))}),a}}class nM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function CR(n,e){let t=e instanceof Hn?e:new Hn(e),r=n,i=hn(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new nM(i,r,a),t=cr(t),i=hn(t)}return r}function $m(n){return n.node.value}function rM(n,e){n.node.value=e,iM(n)}function l2(n){return n.node.childCount>0}function bR(n,e){ls(n.node.children,(t,r)=>{e(new nM(t,n,r))})}function d2(n,e,t,r){t&&!r&&e(n),bR(n,i=>{d2(i,e,!0,r)}),t&&r&&e(n)}function GT(n){return new Hn(null===n.parent?n.name:GT(n.parent)+"/"+n.name)}function iM(n){null!==n.parent&&function qG(n,e,t){const r=function zG(n){return void 0===$m(n)&&!l2(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,iM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,iM(n))}(n.parent,n.name,n)}const KG=/[\[\].#$\/\u0000-\u001F\u007F]/,ZG=/[\[\].#$\u0000-\u001F\u007F]/,sM=10485760,DR=function(n){return"string"==typeof n&&0!==n.length&&!KG.test(n)},h2=function(n){return"string"==typeof n&&0!==n.length&&!ZG.test(n)},zT=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!JA(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},pl=function(n,e,t,r){r&&void 0===e||WT((0,k.gK)(n,"value"),e,t)},WT=function(n,e,t){const r=t instanceof Hn?new hH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Fm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Fm(r)+" with contents = "+e.toString());if(JA(e))throw new Error(n+"contains "+e.toString()+" "+Fm(r));if("string"==typeof e&&e.length>sM/3&&(0,k.ug)(e)>sM)throw new Error(n+"contains a string greater than "+sM+" utf8 bytes "+Fm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(ls(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!DR(c)))throw new Error(n+" contains an invalid key ("+c+") "+Fm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),wU(n)})(r,c),WT(n,h,r),function pH(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Fm(r)+" in addition to actual children.")}},f2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];ls(e,(c,h)=>{const p=new Hn(c);if(WT(i,h,Fr(t,p)),".priority"===Ek(p)&&!zT(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=NT(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!DR(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(dH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Qa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},oM=function(n,e,t){if(!t||void 0!==e){if(JA(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zT(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qT=function(n,e,t,r){if(!(r&&void 0===t||DR(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},KT=function(n,e,t,r){if(!(r&&void 0===t||h2(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},XG=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),KT(n,e,t,r)},Xa=function(n,e){if(".info"===hn(e))throw new Error(n+" failed = Can't modify data under /.info/")},p2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!DR(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),h2(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class JG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function SR(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!wk(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function g2(n,e,t){SR(n,t),m2(n,r=>wk(r,e))}function da(n,e,t){SR(n,t),m2(n,r=>Qa(r,e)||Qa(e,r))}function m2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(e4(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function e4(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Om&&cs("event: "+t.toString()),Gv(r)}}}const _2="repo_interrupt",t4=25;class n4{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new JG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lR(),this.transactionQueueTree_=new nM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function y2(n){const t=n.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ZT(n){return $G({timestamp:y2(n)})}function v2(n,e,t,r,i){n.dataUpdateCount++;const a=new Hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,k.UI)(t,v=>Kr(v));c=function LG(n,e,t,r){const i=Zk(n,r);if(i){const a=Yk(i),c=a.path,h=a.queryId,p=ho(c,e),v=Er.fromObject(t);return Qk(n,c,new Yv(Lk(h),p,v))}return[]}(n.serverSyncTree_,a,p,i)}else{const p=Kr(t);c=i2(n.serverSyncTree_,a,p,i)}else if(r){const p=(0,k.UI)(t,v=>Kr(v));c=function kG(n,e,t){const r=Er.fromObject(t);return Xv(n,new Yv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,p)}else{const p=Kr(t);c=jT(n.serverSyncTree_,a,p)}let h=a;c.length>0&&(h=eI(n,a)),da(n.eventQueue_,h,c)}function I2(n,e){aM(n,"connected",e),!1===e&&function a4(n){Jv(n,"onDisconnectEvents");const e=ZT(n),t=lR();kk(n.onDisconnect_,Ln(),(i,a)=>{const c=c2(i,a,n.serverSyncTree_,e);Zv(t,i,c)});let r=[];kk(t,Ln(),(i,a)=>{r=r.concat(jT(n.serverSyncTree_,i,a));const c=dM(n,i);eI(n,c)}),n.onDisconnect_=lR(),da(n.eventQueue_,Ln(),r)}(n)}function aM(n,e,t){const r=new Hn("/.info/"+e),i=Kr(t);n.infoData_.updateSnapshot(r,i);const a=jT(n.infoSyncTree_,r,i);da(n.eventQueue_,r,a)}function AR(n){return n.nextWriteId_++}function uM(n,e,t,r,i){Jv(n,"set",{path:e.toString(),value:t,priority:r});const a=ZT(n),c=Kr(t,r),h=wR(n.serverSyncTree_,e),p=eM(c,h,a),v=AR(n),b=qk(n.serverSyncTree_,e,p,v,!0);SR(n.eventQueue_,b),n.server_.put(e.toString(),c.val(!0),(x,$)=>{const X="ok"===x;X||Ws("set at "+e+" failed: "+x);const pe=cp(n.serverSyncTree_,v,!X);da(n.eventQueue_,e,pe),lp(0,i,x,$)});const S=dM(n,e);eI(n,S),da(n.eventQueue_,S,[])}function u4(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&xk(n.onDisconnect_,e),lp(0,t,r,i)})}function E2(n,e,t,r){const i=Kr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Zv(n.onDisconnect_,e,i),lp(0,r,a,c)})}function cM(n,e,t){let r;r=".info"===hn(e._path)?ER(n.infoSyncTree_,e,t):ER(n.serverSyncTree_,e,t),g2(n.eventQueue_,e._path,r)}function w2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_2)}function Jv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),cs(t,...e)}function lp(n,e,t,r){e&&Gv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function lM(n,e,t){return wR(n.serverSyncTree_,e,t)||Yt.EMPTY_NODE}function RR(n,e=n.transactionQueueTree_){if(e||NR(n,e),$m(e)){const t=C2(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function p4(n,e,t){const r=t.map(v=>v.currentWriteId),i=lM(n,e,r);let a=i;const c=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,k.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=ho(e,b.path);a=a.updateChild(S,b.currentOutputSnapshotRaw)}const h=a.val(!0),p=e;n.server_.put(p.toString(),h,v=>{Jv(n,"transaction put response",{path:p.toString(),status:v});let b=[];if("ok"===v){const S=[];for(let x=0;x<t.length;x++)t[x].status=2,b=b.concat(cp(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&S.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();NR(n,CR(n.transactionQueueTree_,e)),RR(n,n.transactionQueueTree_),da(n.eventQueue_,e,b);for(let x=0;x<S.length;x++)Gv(S[x])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ws("transaction at "+p.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}eI(n,e)}},c)}(n,GT(e),t)}else l2(e)&&bR(e,t=>{RR(n,t)})}function eI(n,e){const t=T2(n,e),r=GT(t);return function g4(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],v=ho(t,p.path);let S,b=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,S=p.abortReason,i=i.concat(cp(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=t4)b=!0,S="maxretry",i=i.concat(cp(n.serverSyncTree_,p.currentWriteId,!0));else{const x=lM(n,p.path,c);p.currentInputSnapshot=x;const $=e[h].update(x.val());if(void 0!==$){WT("transaction failed: Data returned ",$,p.path);let X=Kr($);"object"==typeof $&&null!=$&&(0,k.r3)($,".priority")||(X=X.updatePriority(x.getPriority()));const we=p.currentWriteId,Je=ZT(n),ct=eM(X,x,Je);p.currentOutputSnapshotRaw=X,p.currentOutputSnapshotResolved=ct,p.currentWriteId=AR(n),c.splice(c.indexOf(we),1),i=i.concat(qk(n.serverSyncTree_,p.path,ct,p.currentWriteId,p.applyLocally)),i=i.concat(cp(n.serverSyncTree_,we,!0))}else b=!0,S="nodata",i=i.concat(cp(n.serverSyncTree_,p.currentWriteId,!0))}da(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}NR(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Gv(r[h]);RR(n,n.transactionQueueTree_)}(n,C2(n,t),r),r}function T2(n,e){let t,r=n.transactionQueueTree_;for(t=hn(e);null!==t&&void 0===$m(r);)r=CR(r,t),t=hn(e=cr(e));return r}function C2(n,e){const t=[];return b2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function b2(n,e,t){const r=$m(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);bR(e,i=>{b2(n,i,t)})}function NR(n,e){const t=$m(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,rM(e,t.length>0?t:void 0)}bR(e,r=>{NR(n,r)})}function dM(n,e){const t=GT(T2(n,e)),r=CR(n.transactionQueueTree_,e);return function WG(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hM(n,i)}),hM(n,r),d2(r,i=>{hM(n,i)}),t}function hM(n,e){const t=$m(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,k.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,k.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(cp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?rM(e,void 0):t.length=a+1,da(n.eventQueue_,GT(e),i);for(let c=0;c<r.length;c++)Gv(r[c])}}const fM=function(n,e){const t=y4(n),r=t.namespace;return"firebase.com"===t.domain&&dl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&dl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ws("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Hn(t.pathString)}},y4=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",p=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function m4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const x=function _4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ws(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(v+1),10)):v=e.length;const $=e.slice(0,v);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const X=e.indexOf(".");r=e.substring(0,X).toLowerCase(),t=e.substring(X+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}},D2="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",v4=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=D2.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=D2.charAt(e[i]);return(0,k.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class S2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class A2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pM{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class R2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return u4(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Xa("OnDisconnect.remove",this._path);const e=new k.BH;return E2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Xa("OnDisconnect.set",this._path),pl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return E2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Xa("OnDisconnect.setWithPriority",this._path),pl("OnDisconnect.setWithPriority",e,this._path,!1),oM("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function c4(n,e,t,r,i){const a=Kr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&Zv(n.onDisconnect_,e,a),lp(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Xa("OnDisconnect.update",this._path),f2("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function l4(n,e,t,r){if((0,k.xb)(t))return cs("onDisconnect().update() called with empty data.  Don't do anything."),void lp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&ls(t,(c,h)=>{const p=Kr(h);Zv(n.onDisconnect_,Fr(e,c),p)}),lp(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Lo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return fn(this._path)?null:Ek(this._path)}get ref(){return new Ja(this._repo,this._path)}get _queryIdentifier(){const e=kU(this._queryParams),t=fk(e);return"{}"===t?"default":t}get _queryObject(){return kU(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Lo))return!1;const t=this._repo===e._repo,r=wk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function lH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function PR(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function dp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===hl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==np)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Kd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Ir){if(null!=e&&!zT(e)||null!=t&&!zT(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof Sk||n.getIndex()===Ak,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xR(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ja extends Lo{constructor(e,t){super(e,t,new aR,!1)}get parent(){const e=EU(this._path);return null===e?null:new Ja(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Hm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Hn(e),r=Gm(this.ref,e);return new Hm(this._node.getChild(t),r,Ir)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Hm(i,Gm(this.ref,r),Ir)))}hasChild(e){const t=new Hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function N2(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Gm(n._root,e):n._root}function P2(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=fM(e,n._repo.repoInfo_.nodeAdmin);p2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&dl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),N2(n,t.path.toString())}function Gm(n,e){return null===hn((n=(0,k.m9)(n))._path)?XG("child","path",e,!1):KT("child","path",e,!1),new Ja(n._repo,Fr(n._path,e))}function gM(n,e){n=(0,k.m9)(n),Xa("set",n._path),pl("set",e,n._path,!1);const t=new k.BH;return uM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function C4(n,e){f2("update",e,n._path,!1);const t=new k.BH;return function o4(n,e,t,r){Jv(n,"update",{path:e.toString(),value:t});let i=!0;const a=ZT(n),c={};if(ls(t,(h,p)=>{i=!1,c[h]=c2(Fr(e,h),Kr(p),n.serverSyncTree_,a)}),i)cs("update() called with empty data.  Don't do anything."),lp(0,r,"ok",void 0);else{const h=AR(n),p=function xG(n,e,t,r){!function ZH(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Uk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Er.fromObject(t);return Xv(n,new Yv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);SR(n.eventQueue_,p),n.server_.merge(e.toString(),t,(v,b)=>{const S="ok"===v;S||Ws("update at "+e+" failed: "+v);const x=cp(n.serverSyncTree_,h,!S),$=x.length>0?eI(n,e):e;da(n.eventQueue_,$,x),lp(0,r,v,b)}),ls(t,v=>{const b=dM(n,Fr(e,v));eI(n,b)}),da(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function b4(n){n=(0,k.m9)(n);const e=new pM(()=>{}),t=new YT(e);return function s4(n,e,t){const r=function FG(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,b)=>{const S=ho(v,t);r=r||ap(b,S)});let i=n.syncPointTree_.get(t);i?r=r||ap(i,Ln()):(i=new XU,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new sp(r,!0,!1):null;return function IG(n){return fR(n.viewCache_)}(JU(i,e,pR(n.pendingWriteTree_,e._path),a?c.getNode():Yt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Kr(i).withIndex(e._queryParams.getIndex());let c;if(Kk(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=jT(n.serverSyncTree_,e._path,a);else{const h=$T(n.serverSyncTree_,e);c=i2(n.serverSyncTree_,e._path,a,h)}return da(n.eventQueue_,e._path,c),ER(n.serverSyncTree_,e,t,null,!0),a},i=>(Jv(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Hm(r,new Ja(n._repo,n._path),n._queryParams.getIndex()))}class YT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new S2("value",this,new Hm(e.snapshotNode,new Ja(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A2(this,e,t):null}matches(e){return e instanceof YT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kR{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A2(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Gm(new Ja(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new S2(e.type,this,new Hm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kR&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function QT(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const p=t,v=(b,S)=>{cM(n._repo,n,h),p(b,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const c=new pM(t,a||void 0),h="value"===e?new YT(c):new kR(e,c);return function d4(n,e,t){let r;r=".info"===hn(e._path)?Kk(n.infoSyncTree_,e,t):Kk(n.serverSyncTree_,e,t),g2(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>cM(n._repo,n,h)}function mM(n,e,t,r){return QT(n,"value",e,t,r)}function x2(n,e,t,r){return QT(n,"child_added",e,t,r)}function k2(n,e,t,r){return QT(n,"child_changed",e,t,r)}function M2(n,e,t,r){return QT(n,"child_moved",e,t,r)}function O2(n,e,t,r){return QT(n,"child_removed",e,t,r)}function L2(n,e,t){let r=null;const i=t?new pM(t):null;"value"===e?r=new YT(i):e&&(r=new kR(e,i)),cM(n._repo,n,r)}class zu{}class F2 extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pl("endAt",this._value,e._path,!0);const t=Pk(e._queryParams,this._value,this._key);if(xR(t),dp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class S4 extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pl("endBefore",this._value,e._path,!1);const t=function LH(n,e,t){let r;return r=Pk(n,e,n.index_===hl||t?t:np),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(xR(t),dp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class U2 extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pl("startAt",this._value,e._path,!0);const t=Nk(e._queryParams,this._value,this._key);if(xR(t),dp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class N4 extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pl("startAfter",this._value,e._path,!1);const t=function OH(n,e,t){let r;return r=Nk(n,e,n.index_===hl||t?t:Kd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(xR(t),dp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Lo(e._repo,e._path,t,e._orderByCalled)}}class x4 extends zu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lo(e._repo,e._path,function kH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class M4 extends zu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lo(e._repo,e._path,function MH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class L4 extends zu{constructor(e){super(),this._path=e}_apply(e){PR(e,"orderByChild");const t=new Hn(this._path);if(fn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Sk(t),i=uR(e._queryParams,r);return dp(i),new Lo(e._repo,e._path,i,!0)}}class U4 extends zu{_apply(e){PR(e,"orderByKey");const t=uR(e._queryParams,hl);return dp(t),new Lo(e._repo,e._path,t,!0)}}class B4 extends zu{_apply(e){PR(e,"orderByPriority");const t=uR(e._queryParams,Ir);return dp(t),new Lo(e._repo,e._path,t,!0)}}class $4 extends zu{_apply(e){PR(e,"orderByValue");const t=uR(e._queryParams,Ak);return dp(t),new Lo(e._repo,e._path,t,!0)}}class G4 extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(pl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new F2(this._value,this._key)._apply(new U2(this._value,this._key)._apply(e))}}function Wu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function CG(n){(0,k.hu)(!yR,"__referenceConstructor has already been defined"),yR=n})(Ja),function RG(n){(0,k.hu)(!IR,"__referenceConstructor has already been defined"),IR=n}(Ja);const _M={};function B2(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||dl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cs("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,v,c=fM(a,i),h=c.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(p=!0,a=`http://${v}?ns=${h.namespace}`,c=fM(a,i),h=c.repoInfo):p=!c.repoInfo.secure;const b=i&&p?new RT(RT.OWNER):new V$(n.name,n.options,e);p2("Invalid Firebase Database URL",c),fn(c.path)||dl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function Z4(n,e,t,r){let i=_M[e.name];i||(i={},_M[e.name]=i);let a=i[n.toURLString()];return a&&dl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new n4(n,false,t,r),i[n.toURLString()]=a,a}(h,n,b,new U$(n.name,t));return new Q4(S,n)}class Q4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function r4(n,e,t){if(n.stats_=yk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new cR(n.repoInfo_,(r,i,a,c)=>{v2(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>I2(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Um(n.repoInfo_,e,(r,i,a,c)=>{v2(n,r,i,a,c)},r=>{I2(n,r)},r=>{!function i4(n,e){ls(e,(t,r)=>{aM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function $$(n,e){const t=n.toString();return _k[t]||(_k[t]=e()),_k[t]}(n.repoInfo_,()=>new $H(n.stats_,n.server_)),n.infoData_=new FH,n.infoSyncTree_=new r2({startListening:(r,i,a,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=jT(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),aM(n,"connected",!1),n.serverSyncTree_=new r2({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,p)=>{const v=c(h,p);da(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ja(this._repo,Ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function K4(n,e){const t=_M[e];(!t||t[n.key]!==n)&&dl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),w2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&dl("Cannot call "+e+" on a deleted database.")}}function j2(){cU.IS_TRANSPORT_INITIALIZED&&Ws("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function X4(){j2(),rp.forceDisallow()}function J4(){j2(),zv.forceDisallow(),rp.forceAllow()}function nz(n,e){HF(n,e)}const iz={".sv":"timestamp"};class az{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Um.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Um.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function rz(n){UF(Fc.SDK_VERSION),(0,Fc._registerComponent)(new rr.wA("database",(e,{instanceIdentifier:t})=>B2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Fc.registerVersion)(LF,"0.14.4",n),(0,Fc.registerVersion)(LF,"0.14.4","esm2017")}();const dz=new Mr.Yd("@firebase/database-compat"),H2=function(n){dz.warn("FIREBASE WARNING: "+n)};class pz{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,H2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class gz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class hp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),KT("DataSnapshot.child","path",e,!1),new hp(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),KT("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new hp(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new ha(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ds{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const c=Ds.getCancelAndContextArgs_("Query.on",r,i),h=(v,b)=>{t.call(c.context,new hp(this.database,v),b)};h.userCallback=t,h.context=c.context;const p=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return mM(this._delegate,h,p),t;case"child_added":return x2(this._delegate,h,p),t;case"child_removed":return O2(this._delegate,h,p),t;case"child_changed":return k2(this._delegate,h,p),t;case"child_moved":return M2(this._delegate,h,p),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,L2(this._delegate,e,i)}else L2(this._delegate,e)}get(){return b4(this._delegate).then(e=>new hp(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Ds.getCancelAndContextArgs_("Query.once",r,i),c=new k.BH,h=(v,b)=>{const S=new hp(this.database,v);t&&t.call(a.context,S,b),c.resolve(S)};h.userCallback=t,h.context=a.context;const p=v=>{a.cancel&&a.cancel.call(a.context,v),c.reject(v)};switch(e){case"value":mM(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":x2(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":O2(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":k2(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":M2(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Ds(this.database,Wu(this._delegate,function k4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new x4(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Ds(this.database,Wu(this._delegate,function O4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new M4(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Ds(this.database,Wu(this._delegate,function F4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return KT("orderByChild","path",n,!1),new L4(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Ds(this.database,Wu(this._delegate,function V4(){return new U4}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Ds(this.database,Wu(this._delegate,function j4(){return new B4}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Ds(this.database,Wu(this._delegate,function H4(){return new $4}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Ds(this.database,Wu(this._delegate,function R4(n=null,e){return qT("startAt","key",e,!0),new U2(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Ds(this.database,Wu(this._delegate,function P4(n,e){return qT("startAfter","key",e,!0),new N4(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Ds(this.database,Wu(this._delegate,function D4(n,e){return qT("endAt","key",e,!0),new F2(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Ds(this.database,Wu(this._delegate,function A4(n,e){return qT("endBefore","key",e,!0),new S4(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Ds(this.database,Wu(this._delegate,function z4(n,e){return qT("equalTo","key",e,!0),new G4(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ds))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ha(this.database,new Ja(this._delegate._repo,this._delegate._path))}}class ha extends Ds{constructor(e,t){super(e,new Lo(t._repo,t._path,new aR,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ha(this.database,Gm(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ha(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new ha(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=gM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,H2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=C4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function T4(n,e,t){if(Xa("setWithPriority",n._path),pl("setWithPriority",e,n._path,!1),oM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return uM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function E4(n){return Xa("remove",n._path),gM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function uz(n,e,t){var r;if(n=(0,k.m9)(n),Xa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,h=mM(n,()=>{});return function f4(n,e,t,r,i,a){Jv(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:BF(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=lM(n,e,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{WT("transaction failed: Data returned ",p,c.path),c.status=0;const v=CR(n.transactionQueueTree_,e),b=$m(v)||[];let S;b.push(c),rM(v,b),"object"==typeof p&&null!==p&&(0,k.r3)(p,".priority")?(S=(0,k.DV)(p,".priority"),(0,k.hu)(zT(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(wR(n.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const x=ZT(n),$=Kr(p,S),X=eM($,h,x);c.currentOutputSnapshotRaw=$,c.currentOutputSnapshotResolved=X,c.currentWriteId=AR(n);const pe=qk(n.serverSyncTree_,e,X,c.currentWriteId,c.applyLocally);da(n.eventQueue_,e,pe),RR(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,v,b)=>{let S=null;p?a.reject(p):(S=new Hm(b,new Ja(n._repo,n._path),Ir),a.resolve(new az(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new gz(a.committed,new hp(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function w4(n,e){n=(0,k.m9)(n),Xa("setPriority",n._path),oM("setPriority",e,!1);const t=new k.BH;return uM(n._repo,Fr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function I4(n,e){n=(0,k.m9)(n),Xa("push",n._path),pl("push",e,n._path,!0);const t=y2(n._repo),r=v4(t),i=Gm(n,r),a=Gm(n,r);let c;return c=null!=e?gM(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new ha(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new ha(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Xa("Reference.onDisconnect",this._delegate._path),new pz(new R2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class XT{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:X4,forceLongPolling:J4}}useEmulator(e,t,r={}){!function $2(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&dl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&dl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new RT(RT.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new RT(c)}!function q4(n,e,t,r){n.repoInfo_=new gk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof ha){const t=P2(this._delegate,e.toString());return new ha(this,t)}{const t=N2(this._delegate,e);return new ha(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=P2(this._delegate,e);return new ha(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function ez(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),w2(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function tz(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function h4(n){n.persistentConnection_&&n.persistentConnection_.resume(_2)}(n._repo)}(this._delegate)}}XT.ServerValue={TIMESTAMP:function sz(){return iz}(),increment:n=>function oz(n){return{".sv":{increment:n}}}(n)};var _z=Object.freeze({__proto__:null,initStandalone:function mz({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){UF(t);const c=new rr.zt("auth-internal",new rr.H0("database-standalone"));return c.setComponent(new rr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new XT(B2(n,c,void 0,e,a),n),namespace:i}}});const yz=XT.ServerValue;function G2(n){return null==n}function z2(n){return"function"==typeof n.set}function W2(n,e){return z2(e)?e:n.ref(e)}function q2(n,e){if(function Iz(n){return"string"==typeof n}(n))return e.stringCase();if(z2(n))return e.firebaseCase();if(function Ez(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function JT(n,e,t="on",r=RI.z){return new Hi.y(i=>{let a=null;return a=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,vt.U)(i=>{const{snapshot:a,prevKey:c}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,Ms.B)())}function K2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Cz(n,e){const{payload:t,prevKey:r,key:i}=e,a=K2(n,i),c=function Tz(n,e){if(G2(e))return 0;{const t=K2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const v={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function Z2(n){return(G2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Y2(n,e,t){return function wz(n,e,t){return JT(n,"value","once",t).pipe((0,qn.w)(r=>{const i=[(0,Et.of)(r)];return e.forEach(a=>i.push(JT(n,a,"on",t))),(0,to.T)(...i).pipe(Ua(Cz,[]))}),(0,wb.x)())}(n,e=Z2(e),t)}function Q2(n,e,t){const r=(e=Z2(e)).map(i=>JT(n,i,"on",t));return(0,to.T)(...r)}function X2(n,e){return function(r,i){return q2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Az(n){return function(t){return t?q2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function J2(n,e){return function(){return JT(n,"value","on",e)}}!function vz(n){n.INTERNAL.registerComponent(new rr.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new XT(i,r)},"PUBLIC").setServiceProps({Reference:ha,Query:Ds,Database:XT,DataSnapshot:hp,enableLogging:nz,INTERNAL:_z,ServerValue:yz}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Tb.Z);const Pz=new m.OlP("angularfire2.realtimeDatabaseURL"),xz=new m.OlP("angularfire2.database.use-emulator");let kz=(()=>{class n{constructor(t,r,i,a,c,h,p,v,b,S,x,$,X,pe,we){this.schedulers=h;const Je=p,ct=(0,Wn.on)(t,c,r);v&&Zp(ct,c,b,x,$,X,S,pe),this.database=(0,Wn.cc)(`${ct.name}.database.${i}`,"AngularFireDatabase",ct.name,()=>{const tt=c.runOutsideAngular(()=>ct.database(i||void 0));return Je&&tt.useEmulator(...Je),tt},[Je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>W2(this.database,t));let a=i;return r&&(a=r(i)),function Rz(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:X2(r,"update"),set:X2(r,"set"),push:i=>r.push(i),remove:Az(r),snapshotChanges:i=>Y2(n,i,t).pipe(Vt.iC),stateChanges:i=>Q2(n,i,t).pipe(Vt.iC),auditTrail:i=>function bz(n,e,t){return function Sz(n,e,t){return function Dz(n,e){return JT(n,"value","on",e).pipe((0,vt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function C$(...n){const e=(0,rd.jO)(n);return(0,kr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,XA.Xf)(n[p]).subscribe((0,er.x)(r,v=>{a[p]=v,!h&&!c[p]&&(c[p]=!0,(h=c.every(Qo.y))&&(c=null))},OF.Z));t.subscribe((0,er.x)(r,p=>{if(h){const v=[p,...a];r.next(e?e(...v):v)}}))})}(e),(0,vt.U)(([i,a])=>{const c=i.lastKeyToLoad,h=a.map(p=>p.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function b$(n){return(0,kr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,er.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,vt.U)(i=>i.actions))}(n,Q2(n,e).pipe(Ua((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Vt.iC),valueChanges:(i,a)=>Y2(n,i,t).pipe((0,vt.U)(h=>h.map(p=>a&&a.idField?Object.assign(Object.assign({},p.payload.val()),{[a.idField]:p.key}):p.payload.val())),Vt.iC)}}(a,this)}object(t){return function Nz(n,e){return{query:n,snapshotChanges:()=>J2(n,e.schedulers.outsideAngular)().pipe(Vt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>J2(n,e.schedulers.outsideAngular)().pipe(Vt.iC,(0,vt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>W2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wn.Dh),m.LFG(Wn.xv,8),m.LFG(Pz,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Vt.HU),m.LFG(xz,8),m.LFG(Yp,8),m.LFG(Oh,8),m.LFG(Lh,8),m.LFG(DI,8),m.LFG(SI,8),m.LFG(AI,8),m.LFG(C_,8),m.LFG(zp,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Mz=(()=>{class n{constructor(){Kp.Z.registerVersion("angularfire",Vt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[kz]}),n})();F(6710);class tV{constructor(){return(0,Vt.vb)("auth")}}class IM{constructor(e){return e}}const nV="storage",EM=new m.OlP("angularfire2.storage-instances");function Bz(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new IM(r)}}const jz={provide:class Uz{constructor(){return(0,Vt.vb)(nV)}},deps:[[new m.FiY,EM]]},$z={provide:IM,useFactory:function Vz(n,e){const t=(0,Vt.JM)(nV,n,e);return t&&new IM(t)},deps:[[new m.FiY,EM],class no{constructor(e){return e}}]};let Hz=(()=>{class n{constructor(){(0,Ah.KN)("angularfire",Vt.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[$z,jz]}),n})();function Gz(n,...e){return{ngModule:Hz,providers:[{provide:EM,useFactory:Bz(n),multi:!0,deps:[m.R0b,m.zs3,Vt.HU,Iu,[new m.FiY,tV],[new m.FiY,zp],...e]}]}}const zz=(0,Vt.u3)(pb,!0),Wz=(0,Vt.u3)(cg,!0),rV_firebase={apiKey:"AIzaSyCpKvN8eYnVGjGmnUFS70UhxqP9SQZ2HIk",authDomain:"fir-app-demo-acd72.firebaseapp.com",databaseURL:"https://fir-app-demo-acd72-default-rtdb.firebaseio.com",projectId:"fir-app-demo-acd72",storageBucket:"fir-app-demo-acd72.appspot.com",messagingSenderId:"315780365463",appId:"1:315780365463:web:42e83c38ef17d42b8b7dd2",measurementId:"G-91Y2LEH5BC"};var qu=F(5619);const{isArray:Kz}=Array,{getPrototypeOf:Zz,prototype:Yz,keys:Qz}=Object;const{isArray:eW}=Array;var iW=F(7103);function wM(...n){const e=(0,rd.yG)(n),t=(0,rd.jO)(n),{args:r,keys:i}=function Xz(n){if(1===n.length){const e=n[0];if(Kz(e))return{args:e,keys:null};if(function Jz(n){return n&&"object"==typeof n&&Zz(n)===Yz}(e)){const t=Qz(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Dn.D)([],e);const a=new Hi.y(function sW(n,e,t=Qo.y){return r=>{iV(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)iV(e,()=>{const v=(0,Dn.D)(n[p],e);let b=!1;v.subscribe((0,er.x)(r,S=>{a[p]=S,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function rW(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):Qo.y));return t?a.pipe(function nW(n){return(0,vt.U)(e=>function tW(n,e){return eW(e)?n(...e):n(e)}(n,e))}(t)):a}function iV(n,e,t){n?(0,iW.f)(t,n,e):e()}function sV(n){return new Hi.y(e=>{(0,XA.Xf)(n()).subscribe(e)})}var oW=F(8407);function eC(n,e){const t=(0,Co.m)(n)?n:()=>n,r=i=>i.error(t());return new Hi.y(e?i=>e.schedule(r,0,i):r)}var TM=F(7394);function CM(){return(0,kr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,er.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class oV extends Hi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new TM.w0;const t=this.getSubject();e.add(this.source.subscribe((0,er.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=TM.w0.EMPTY)}return e}refCount(){return CM()(this)}}var fo=F(1631);function tC(n,e){return(0,Co.m)(e)?(0,fo.z)(n,e,1):(0,fo.z)(n,1)}var qs=F(9397);function zm(n){return(0,kr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,er.x)(t,void 0,void 0,c=>{a=(0,XA.Xf)(n(c,zm(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function bM(n){return n<=0?()=>si.E:(0,kr.e)((e,t)=>{let r=[];e.subscribe((0,er.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function DM(n){return(0,kr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const tn="primary",nC=Symbol("RouteTitle");class lW{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function tI(n){return new lW(n)}function dW(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function gl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!aV(n[i],e[i]))return!1;return!0}function aV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function uV(n){return n.length>0?n[n.length-1]:null}function fp(n){return function qz(n){return!!n&&(n instanceof Hi.y||(0,Co.m)(n.lift)&&(0,Co.m)(n.subscribe))}(n)?n:(0,m.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):(0,Et.of)(n)}const fW={exact:function dV(n,e,t){if(!Wm(n.segments,e.segments)||!MR(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!dV(n.children[r],e.children[r],t))return!1;return!0},subset:hV},cV={exact:function pW(n,e){return gl(n,e)},subset:function gW(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aV(n[t],e[t]))},ignored:()=>!0};function lV(n,e,t){return fW[t.paths](n.root,e.root,t.matrixParams)&&cV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function hV(n,e,t){return fV(n,e,e.segments,t)}function fV(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Wm(i,t)||e.hasChildren()||!MR(i,t,r))}if(n.segments.length===t.length){if(!Wm(n.segments,t)||!MR(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!hV(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Wm(n.segments,i)&&MR(n.segments,i,r)&&n.children[tn])&&fV(n.children[tn],e,a,r)}}function MR(n,e,t){return e.every((r,i)=>cV[t](n[i].parameters,r.parameters))}class nI{constructor(e=new Yn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tI(this.queryParams)),this._queryParamMap}toString(){return yW.serialize(this)}}class Yn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return OR(this)}}class rC{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=tI(this.parameters)),this._parameterMap}toString(){return mV(this)}}function Wm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let iC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(){return new SM},providedIn:"root"})}return n})();class SM{parse(e){const t=new RW(e);return new nI(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sC(e.root,!0)}`,r=function EW(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${LR(t)}=${LR(i)}`).join("&"):`${LR(t)}=${LR(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function vW(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const yW=new SM;function OR(n){return n.segments.map(e=>mV(e)).join("/")}function sC(n,e){if(!n.hasChildren())return OR(n);if(e){const t=n.children[tn]?sC(n.children[tn],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==tn&&r.push(`${i}:${sC(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function _W(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===tn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==tn&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===tn?[sC(n.children[tn],!1)]:[`${i}:${sC(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[tn]?`${OR(n)}/${t[0]}`:`${OR(n)}/(${t.join("//")})`}}function pV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function LR(n){return pV(n).replace(/%3B/gi,";")}function AM(n){return pV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function FR(n){return decodeURIComponent(n)}function gV(n){return FR(n.replace(/\+/g,"%20"))}function mV(n){return`${AM(n.path)}${function IW(n){return Object.keys(n).map(e=>`;${AM(e)}=${AM(n[e])}`).join("")}(n.parameters)}`}const wW=/^[^\/()?;#]+/;function RM(n){const e=n.match(wW);return e?e[0]:""}const TW=/^[^\/()?;=#]+/,bW=/^[^=?&#]+/,SW=/^[^&#]+/;class RW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yn([],{}):new Yn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[tn]=new Yn(e,t)),r}parseSegment(){const e=RM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new rC(FR(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function CW(n){const e=n.match(TW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=RM(this.remaining);i&&(r=i,this.capture(r))}e[FR(t)]=FR(r)}parseQueryParam(e){const t=function DW(n){const e=n.match(bW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function AW(n){const e=n.match(SW);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=gV(t),a=gV(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=RM(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=tn);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[tn]:new Yn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function _V(n){return n.segments.length>0?new Yn([],{[tn]:n}):n}function yV(n){const e={};for(const r of Object.keys(n.children)){const a=yV(n.children[r]);if(r===tn&&0===a.segments.length&&a.hasChildren())for(const[c,h]of Object.entries(a.children))e[c]=h;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function NW(n){if(1===n.numberOfChildren&&n.children[tn]){const e=n.children[tn];return new Yn(n.segments.concat(e.segments),e.children)}return n}(new Yn(n.segments,e))}function qm(n){return n instanceof nI}function vV(n){let e;const i=_V(function t(a){const c={};for(const p of a.children){const v=t(p);c[p.outlet]=v}const h=new Yn(a.url,c);return a===n&&(e=h),h}(n.root));return e??i}function IV(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return NM(i,i,i,t,r);const a=function xW(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new wV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Object.entries(a.outlets).forEach(([p,v])=>{h[p]="string"==typeof v?v.split("/"):v}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new wV(t,e,r)}(e);if(a.toRoot())return NM(i,i,new Yn([],{}),t,r);const c=function kW(n,e,t){if(n.isAbsolute)return new VR(e,!0,0);if(!t)return new VR(e,!1,NaN);if(null===t.parent)return new VR(t,!0,0);const r=UR(n.commands[0])?0:1;return function MW(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new VR(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),h=c.processChildren?aC(c.segmentGroup,c.index,a.commands):TV(c.segmentGroup,c.index,a.commands);return NM(i,c.segmentGroup,h,t,r)}function UR(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function oC(n){return"object"==typeof n&&null!=n&&n.outlets}function NM(n,e,t,r,i){let c,a={};r&&Object.entries(r).forEach(([p,v])=>{a[p]=Array.isArray(v)?v.map(b=>`${b}`):`${v}`}),c=n===e?t:EV(n,e,t);const h=_V(yV(c));return new nI(h,a,i)}function EV(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:EV(a,e,t)}),new Yn(n.segments,r)}class wV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&UR(r[0]))throw new m.vHH(4003,!1);const i=r.find(oC);if(i&&i!==uV(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class VR{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function TV(n,e,t){if(n||(n=new Yn([],{})),0===n.segments.length&&n.hasChildren())return aC(n,e,t);const r=function LW(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(oC(h))break;const p=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&v&&"object"==typeof v&&void 0===v.outlets){if(!bV(p,v,c))return a;r+=2}else{if(!bV(p,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Yn(n.segments.slice(0,r.pathIndex),{});return a.children[tn]=new Yn(n.segments.slice(r.pathIndex),n.children),aC(a,0,i)}return r.match&&0===i.length?new Yn(n.segments,{}):r.match&&!n.hasChildren()?PM(n,e,t):r.match?aC(n,0,i):PM(n,e,t)}function aC(n,e,t){if(0===t.length)return new Yn(n.segments,{});{const r=function OW(n){return oC(n[0])?n[0].outlets:{[tn]:n}}(t),i={};if(Object.keys(r).some(a=>a!==tn)&&n.children[tn]&&1===n.numberOfChildren&&0===n.children[tn].segments.length){const a=aC(n.children[tn],e,t);return new Yn(n.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[a]=TV(n.children[a],e,c))}),Object.entries(n.children).forEach(([a,c])=>{void 0===r[a]&&(i[a]=c)}),new Yn(n.segments,i)}}function PM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(oC(a)){const p=FW(a.outlets);return new Yn(r,p)}if(0===i&&UR(t[0])){r.push(new rC(n.segments[e].path,CV(t[0]))),i++;continue}const c=oC(a)?a.outlets[tn]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&UR(h)?(r.push(new rC(c,CV(h))),i+=2):(r.push(new rC(c,{})),i++)}return new Yn(r,{})}function FW(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=PM(new Yn([],{}),0,r))}),e}function CV(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function bV(n,e,t){return n==t.path&&gl(e,t.parameters)}const uC="imperative";class ml{constructor(e,t){this.id=e,this.url=t}}class BR extends ml{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pp extends ml{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cC extends ml{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rI extends ml{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class jR extends ml{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DV extends ml{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UW extends ml{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VW extends ml{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class BW extends ml{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jW extends ml{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $W{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class HW{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class GW{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zW{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WW{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qW{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SV{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xM{}class kM{constructor(e){this.url=e}}class KW{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new lC,this.attachRef=null}}let lC=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new KW,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class AV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=MM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=MM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=OM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return OM(e,this._root).map(t=>t.value)}}function MM(n,e){if(n===e.value)return e;for(const t of e.children){const r=MM(n,t);if(r)return r}return null}function OM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=OM(n,t);if(r.length)return r.unshift(e),r}return[]}class Yd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function iI(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RV extends AV{constructor(e,t){super(e),this.snapshot=t,LM(this,e)}toString(){return this.snapshot.toString()}}function NV(n,e){const t=function ZW(n,e){const c=new $R([],{},{},"",{},tn,e,null,{});return new xV("",new Yd(c,[]))}(0,e),r=new qu.X([new rC("",{})]),i=new qu.X({}),a=new qu.X({}),c=new qu.X({}),h=new qu.X(""),p=new sI(r,i,c,h,a,tn,e,t.root);return p.snapshot=t.root,new RV(new Yd(p,[]),t)}class sI{constructor(e,t,r,i,a,c,h,p){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,vt.U)(v=>v[nC]))??(0,Et.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>tI(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>tI(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PV(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function YW(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class $R{get title(){return this.data?.[nC]}constructor(e,t,r,i,a,c,h,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=p,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tI(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tI(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xV extends AV{constructor(e,t){super(t),this.url=e,LM(this,t)}toString(){return kV(this._root)}}function LM(n,e){e.value._routerState=n,e.children.forEach(t=>LM(n,t))}function kV(n){const e=n.children.length>0?` { ${n.children.map(kV).join(", ")} } `:"";return`${n.value}${e}`}function FM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),gl(e.params,t.params)||n.paramsSubject.next(t.params),function hW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),gl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function UM(n,e){const t=gl(n.params,e.params)&&function mW(n,e){return Wm(n,e)&&n.every((t,r)=>gl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||UM(n.parent,e.parent))}let VM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=tn,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(lC),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb),this.inputBinder=(0,m.f3M)(HR,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new QW(t,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]})}return n})();class QW{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===sI?this.route:e===lC?this.childContexts:this.parent.get(e,t)}}const HR=new m.OlP("");let MV=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=wM([r.queryParams,r.params,r.data]).pipe((0,qn.w)(([a,c,h],p)=>(h={...a,...c,...h},0===p?(0,Et.of)(h):Promise.resolve(h)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,m.qFp)(r.component);if(c)for(const{templateName:h}of c.inputs)t.activatedComponentRef.setInput(h,a[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();function dC(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function JW(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dC(n,r,i);return dC(n,r)})}(n,e,t);return new Yd(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>dC(n,h)),c}}const r=function e3(n){return new sI(new qu.X(n.url),new qu.X(n.params),new qu.X(n.queryParams),new qu.X(n.fragment),new qu.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>dC(n,a));return new Yd(r,i)}}const BM="ngNavigationCancelingError";function OV(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=qm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LV(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function LV(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[BM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function FV(n){return n&&n[BM]}let UV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(r,i){1&r&&m._UZ(0,"router-outlet")},dependencies:[VM],encapsulation:2})}return n})();function jM(n){const e=n.children&&n.children.map(jM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==tn&&(t.component=UV),t}function Ku(n){return n.outlet||tn}function hC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class u3{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),FM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=iI(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=iI(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=iI(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=iI(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new qW(a.value.snapshot))}),e.children.length&&this.forwardEvent(new zW(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(FM(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),FM(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=hC(i.snapshot);c.attachRef=null,c.route=i,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class VV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class GR{constructor(e,t){this.component=e,this.route=t}}function c3(n,e,t){const r=n._root;return fC(r,e?e._root:null,t,[r.value])}function oI(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function fC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=iI(e);return n.children.forEach(c=>{(function d3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const p=function h3(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wm(n.url,e.url)||!gl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!UM(n,e)||!gl(n.queryParams,e.queryParams);default:return!UM(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new VV(r)):(a.data=c.data,a._resolvedData=c._resolvedData),fC(n,e,a.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new GR(h.outlet.component,c))}else c&&pC(e,h,i),i.canActivateChecks.push(new VV(r)),fC(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,h])=>pC(h,t.getContext(c),i)),i}function pC(n,e,t){const r=iI(n),i=n.value;Object.entries(r).forEach(([a,c])=>{pC(c,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new GR(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function gC(n){return"function"==typeof n}function BV(n){return n instanceof vu||"EmptyError"===n?.name}const zR=Symbol("INITIAL_VALUE");function aI(){return(0,qn.w)(n=>wM(n.map(e=>e.pipe(fi(1),id(zR)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===zR)return zR;if(!1===t||t instanceof nI)return t}return!0}),ii(e=>e!==zR),fi(1)))}function jV(n){return(0,oW.z)((0,qs.b)(e=>{if(qm(e))throw OV(0,e)}),(0,vt.U)(e=>!0===e))}class WR{constructor(e){this.segmentGroup=e||null}}class $V{constructor(e){this.urlTree=e}}function uI(n){return eC(new WR(n))}function HV(n){return eC(new $V(n))}class x3{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new m.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Et.of)(r);if(i.numberOfChildren>1||!i.children[tn])return eC(new m.vHH(4e3,!1));i=i.children[tn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new nI(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const h=a.substring(1);r[i]=t[h]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([h,p])=>{c[h]=this.createSegmentGroup(e,p,r,i)}),new Yn(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const $M={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function k3(n,e,t,r,i){const a=HM(n,e,t);return a.matched?(r=function n3(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function R3(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Et.of)(!0);const a=i.map(c=>{const h=oI(c,n);return fp(function y3(n){return n&&gC(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,Et.of)(a).pipe(aI(),jV())}(r,e,t).pipe((0,vt.U)(c=>!0===c?a:{...$M}))):(0,Et.of)(a)}function HM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...$M}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dW)(t,n,e);if(!i)return{...$M};const a={};Object.entries(i.posParams??{}).forEach(([h,p])=>{a[h]=p.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function GV(n,e,t,r){return t.length>0&&function L3(n,e,t){return t.some(r=>qR(n,e,r)&&Ku(r)!==tn)}(n,t,r)?{segmentGroup:new Yn(e,O3(r,new Yn(t,n.children))),slicedSegments:[]}:0===t.length&&function F3(n,e,t){return t.some(r=>qR(n,e,r))}(n,t,r)?{segmentGroup:new Yn(n.segments,M3(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Yn(n.segments,n.children),slicedSegments:t}}function M3(n,e,t,r,i){const a={};for(const c of r)if(qR(n,t,c)&&!i[Ku(c)]){const h=new Yn([],{});a[Ku(c)]=h}return{...i,...a}}function O3(n,e){const t={};t[tn]=e;for(const r of n)if(""===r.path&&Ku(r)!==tn){const i=new Yn([],{});t[Ku(r)]=i}return t}function qR(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class j3{constructor(e,t,r,i,a,c,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new x3(this.urlSerializer,this.urlTree)}noMatchError(e){return new m.vHH(4002,!1)}recognize(){const e=GV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,tn).pipe(zm(t=>{if(t instanceof $V)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof WR?this.noMatchError(t):t}),(0,vt.U)(t=>{const r=new $R([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tn,this.rootComponentType,null,{}),i=new Yd(r,t),a=new xV("",i),c=function PW(n,e,t=null,r=null){return IV(vV(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(a._root),{state:a,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,tn).pipe(zm(r=>{throw r instanceof WR?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=PV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Dn.D)(i).pipe(tC(a=>{const c=r.children[a],h=function o3(n,e){const t=n.filter(r=>Ku(r)===e);return t.push(...n.filter(r=>Ku(r)!==e)),t}(t,a);return this.processSegmentGroup(e,h,c,a)}),Ua((a,c)=>(a.push(...c),a)),_s(null),function aW(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,a)=>n(i,a,r)):Qo.y,bM(1),t?_s(e):Tc(()=>new vu))}(),(0,fo.z)(a=>{if(null===a)return uI(r);const c=zV(a);return function $3(n){n.sort((e,t)=>e.value.outlet===tn?-1:t.value.outlet===tn?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,Et.of)(c)}))}processSegment(e,t,r,i,a,c){return(0,Dn.D)(t).pipe(tC(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,a,c).pipe(zm(p=>{if(p instanceof WR)return(0,Et.of)(null);throw p}))),Ls(h=>!!h),zm(h=>{if(BV(h))return function V3(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,Et.of)([]):uI(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,a,c,h){return function U3(n,e,t,r){return!!(Ku(n)===r||r!==tn&&qR(e,t,n))&&("**"===n.path||HM(e,n,t).matched)}(r,i,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,c):uI(i):uI(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?HV(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,fo.z)(c=>{const h=new Yn(c,{});return this.processSegment(e,t,h,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:p,remainingSegments:v,positionalParamSegments:b}=HM(t,i,a);if(!h)return uI(t);const S=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,b);return i.redirectTo.startsWith("/")?HV(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,fo.z)(x=>this.processSegment(e,r,t,x.concat(v),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,c){let h;if("**"===r.path){const p=i.length>0?uV(i).parameters:{},v=new $R(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WV(r),Ku(r),r.component??r._loadedComponent??null,r,qV(r));h=(0,Et.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=k3(t,r,i,e).pipe((0,vt.U)(({matched:p,consumedSegments:v,remainingSegments:b,parameters:S})=>p?{snapshot:new $R(v,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WV(r),Ku(r),r.component??r._loadedComponent??null,r,qV(r)),consumedSegments:v,remainingSegments:b}:null));return h.pipe((0,qn.w)(p=>null===p?uI(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,qn.w)(({routes:v})=>{const b=r._loadedInjector??e,{snapshot:S,consumedSegments:x,remainingSegments:$}=p,{segmentGroup:X,slicedSegments:pe}=GV(t,x,$,v);if(0===pe.length&&X.hasChildren())return this.processChildren(b,v,X).pipe((0,vt.U)(Je=>null===Je?null:[new Yd(S,Je)]));if(0===v.length&&0===pe.length)return(0,Et.of)([new Yd(S,[])]);const we=Ku(r)===a;return this.processSegment(b,v,X,pe,we?tn:a,!0).pipe((0,vt.U)(Je=>[new Yd(S,Je)]))}))))}getChildConfig(e,t,r){return t.children?(0,Et.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Et.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function A3(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Et.of)(!0);const a=i.map(c=>{const h=oI(c,n);return fp(function p3(n){return n&&gC(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,Et.of)(a).pipe(aI(),jV())}(e,t,r).pipe((0,fo.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,qs.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function P3(n){return eC(LV(!1,3))}())):(0,Et.of)({routes:[],injector:e})}}function H3(n){const e=n.value.routeConfig;return e&&""===e.path}function zV(n){const e=[],t=new Set;for(const r of n){if(!H3(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=zV(r.children);e.push(new Yd(r.value,i))}return e.filter(r=>!t.has(r))}function WV(n){return n.data||{}}function qV(n){return n.resolve||{}}function KV(n){return"string"==typeof n.title||null===n.title}function GM(n){return(0,qn.w)(e=>{const t=n(e);return t?(0,Dn.D)(t).pipe((0,vt.U)(()=>e)):(0,Et.of)(e)})}const cI=new m.OlP("ROUTES");let zM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.f3M)(m.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Et.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=fp(t.loadComponent()).pipe((0,vt.U)(ZV),(0,qs.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),DM(()=>{this.componentLoaders.delete(t)})),i=new oV(r,()=>new is.x).pipe(CM());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Et.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function Y3(n,e,t,r){return fp(n.loadChildren()).pipe((0,vt.U)(ZV),(0,fo.z)(i=>i instanceof m.YKP||Array.isArray(i)?(0,Et.of)(i):(0,Dn.D)(e.compileModuleAsync(i))),(0,vt.U)(i=>{r&&r(n);let a,c,h=!1;return Array.isArray(i)?(c=i,!0):(a=i.create(t).injector,c=a.get(cI,[],{optional:!0,self:!0}).flat()),{routes:c.map(jM),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(DM(()=>{this.childrenLoaders.delete(r)})),c=new oV(a,()=>new is.x).pipe(CM());return this.childrenLoaders.set(r,c),c}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZV(n){return function Q3(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let KR=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new is.x,this.transitionAbortSubject=new is.x,this.configLoader=(0,m.f3M)(zM),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(iC),this.rootContexts=(0,m.f3M)(lC),this.inputBindingEnabled=null!==(0,m.f3M)(HR,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Et.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new HW(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new $W(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new qu.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:uC,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ii(a=>0!==a.id),(0,vt.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,qn.w)(a=>{this.currentTransition=a;let c=!1,h=!1;return(0,Et.of)(a).pipe((0,qs.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,qn.w)(p=>{const v=p.currentBrowserUrl.toString(),b=!t.navigated||p.extractedUrl.toString()!==v||v!==p.currentUrlTree.toString();if(!b&&"reload"!==(p.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const x="";return this.events.next(new rI(p.id,this.urlSerializer.serialize(p.rawUrl),x,0)),p.resolve(null),si.E}if(t.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return(0,Et.of)(p).pipe((0,qn.w)(x=>{const $=this.transitions?.getValue();return this.events.next(new BR(x.id,this.urlSerializer.serialize(x.extractedUrl),x.source,x.restoredState)),$!==this.transitions?.getValue()?si.E:Promise.resolve(x)}),function G3(n,e,t,r,i,a){return(0,fo.z)(c=>function B3(n,e,t,r,i,a,c="emptyOnly"){return new j3(n,e,t,r,i,c,a).recognize()}(n,e,t,r,c.extractedUrl,i,a).pipe((0,vt.U)(({state:h,tree:p})=>({...c,targetSnapshot:h,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,qs.b)(x=>{a.targetSnapshot=x.targetSnapshot,a.urlAfterRedirects=x.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects};const $=new DV(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next($)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){const{id:x,extractedUrl:$,source:X,restoredState:pe,extras:we}=p,Je=new BR(x,this.urlSerializer.serialize($),X,pe);this.events.next(Je);const ct=NV(0,this.rootComponentType).snapshot;return this.currentTransition=a={...p,targetSnapshot:ct,urlAfterRedirects:$,extras:{...we,skipLocationChange:!1,replaceUrl:!1}},(0,Et.of)(a)}{const x="";return this.events.next(new rI(p.id,this.urlSerializer.serialize(p.extractedUrl),x,1)),p.resolve(null),si.E}}),(0,qs.b)(p=>{const v=new UW(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}),(0,vt.U)(p=>(this.currentTransition=a={...p,guards:c3(p.targetSnapshot,p.currentSnapshot,this.rootContexts)},a)),function I3(n,e){return(0,fo.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?(0,Et.of)({...t,guardsResult:!0}):function E3(n,e,t,r){return(0,Dn.D)(n).pipe((0,fo.z)(i=>function S3(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,Et.of)(!0);const c=a.map(h=>{const p=hC(e)??i,v=oI(h,p);return fp(function _3(n){return n&&gC(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):p.runInContext(()=>v(n,e,t,r))).pipe(Ls())});return(0,Et.of)(c).pipe(aI())}(i.component,i.route,t,e,r)),Ls(i=>!0!==i,!0))}(c,r,i,n).pipe((0,fo.z)(h=>h&&function f3(n){return"boolean"==typeof n}(h)?function w3(n,e,t,r){return(0,Dn.D)(e).pipe(tC(i=>dg(function C3(n,e){return null!==n&&e&&e(new GW(n)),(0,Et.of)(!0)}(i.route.parent,r),function T3(n,e){return null!==n&&e&&e(new WW(n)),(0,Et.of)(!0)}(i.route,r),function D3(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function l3(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>sV(()=>{const h=c.guards.map(p=>{const v=hC(c.node)??t,b=oI(p,v);return fp(function m3(n){return n&&gC(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(Ls())});return(0,Et.of)(h).pipe(aI())}));return(0,Et.of)(a).pipe(aI())}(n,i.path,t),function b3(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Et.of)(!0);const i=r.map(a=>sV(()=>{const c=hC(e)??t,h=oI(a,c);return fp(function g3(n){return n&&gC(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(Ls())}));return(0,Et.of)(i).pipe(aI())}(n,i.route,t))),Ls(i=>!0!==i,!0))}(r,a,n,e):(0,Et.of)(h)),(0,vt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,p=>this.events.next(p)),(0,qs.b)(p=>{if(a.guardsResult=p.guardsResult,qm(p.guardsResult))throw OV(0,p.guardsResult);const v=new VW(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(v)}),ii(p=>!!p.guardsResult||(this.cancelNavigationTransition(p,"",3),!1)),GM(p=>{if(p.guards.canActivateChecks.length)return(0,Et.of)(p).pipe((0,qs.b)(v=>{const b=new BW(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}),(0,qn.w)(v=>{let b=!1;return(0,Et.of)(v).pipe(function z3(n,e){return(0,fo.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Et.of)(t);let a=0;return(0,Dn.D)(i).pipe(tC(c=>function W3(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!KV(i)&&(a[nC]=i.title),function q3(n,e,t,r){const i=function K3(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Et.of)({});const a={};return(0,Dn.D)(i).pipe((0,fo.z)(c=>function Z3(n,e,t,r){const i=hC(e)??r,a=oI(n,i);return fp(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(Ls(),(0,qs.b)(h=>{a[c]=h}))),bM(1),function uW(n){return(0,vt.U)(()=>n)}(a),zm(c=>BV(c)?si.E:eC(c)))}(a,n,e,r).pipe((0,vt.U)(c=>(n._resolvedData=c,n.data=PV(n,t).resolve,i&&KV(i)&&(n.data[nC]=i.title),null)))}(c.route,r,n,e)),(0,qs.b)(()=>a++),bM(1),(0,fo.z)(c=>a===i.length?(0,Et.of)(t):si.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,qs.b)({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(v,"",2)}}))}),(0,qs.b)(v=>{const b=new jW(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}))}),GM(p=>{const v=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,qs.b)(x=>{b.component=x}),(0,vt.U)(()=>{})));for(const x of b.children)S.push(...v(x));return S};return wM(v(p.targetSnapshot.root)).pipe(_s(),fi(1))}),GM(()=>this.afterPreactivation()),(0,vt.U)(p=>{const v=function XW(n,e,t){const r=dC(n,e._root,t?t._root:void 0);return new RV(r,e)}(t.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=a={...p,targetRouterState:v},a}),(0,qs.b)(()=>{this.events.next(new xM)}),((n,e,t,r)=>(0,vt.U)(i=>(new u3(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),fi(1),(0,qs.b)({next:p=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),t.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{c=!0}}),function cW(n){return(0,kr.e)((e,t)=>{(0,XA.Xf)(n).subscribe((0,er.x)(t,()=>t.complete(),OF.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,qs.b)(p=>{throw p}))),DM(()=>{c||h||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),zm(p=>{if(h=!0,FV(p))this.events.next(new cC(a.id,this.urlSerializer.serialize(a.extractedUrl),p.message,p.cancellationCode)),function t3(n){return FV(n)&&qm(n.url)}(p)?this.events.next(new kM(p.url)):a.resolve(!1);else{this.events.next(new jR(a.id,this.urlSerializer.serialize(a.extractedUrl),p,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(p))}catch(v){a.reject(v)}}return si.E}))}))}cancelNavigationTransition(t,r,i){const a=new cC(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YV(n){return n!==uC}let QV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===tn);return r}getResolvedTitleForRoute(t){return t.data[nC]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(X3)},providedIn:"root"})}return n})(),X3=(()=>{class n extends QV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(Me))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(t6)},providedIn:"root"})}return n})();class e6{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let t6=(()=>{class n extends e6{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=m.n5z(n)))(i||n)}}();static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ZR=new m.OlP("",{providedIn:"root",factory:()=>({})});let n6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(r6)},providedIn:"root"})}return n})(),r6=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mC=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(mC||{});function XV(n,e){n.events.pipe(ii(t=>t instanceof pp||t instanceof cC||t instanceof jR||t instanceof rI),(0,vt.U)(t=>t instanceof pp||t instanceof rI?mC.COMPLETE:t instanceof cC&&(0===t.code||1===t.code)?mC.REDIRECTING:mC.FAILED),ii(t=>t!==mC.REDIRECTING),fi(1)).subscribe(()=>{e()})}function i6(n){throw n}function s6(n,e,t){return e.parse("/")}const o6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this._events=new is.x,this.options=(0,m.f3M)(ZR,{optional:!0})||{},this.pendingTasks=(0,m.f3M)(m.HDt),this.errorHandler=this.options.errorHandler||i6,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||s6,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(n6),this.routeReuseStrategy=(0,m.f3M)(J3),this.titleStrategy=(0,m.f3M)(QV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,m.f3M)(cI,{optional:!0})?.flat()??[],this.navigationTransitions=(0,m.f3M)(KR),this.urlSerializer=(0,m.f3M)(iC),this.location=(0,m.f3M)(Ye),this.componentInputBindingEnabled=!!(0,m.f3M)(HR,{optional:!0}),this.eventsSubscription=new TM.w0,this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new nI,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NV(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(JV(r)&&this._events.next(r));if(r instanceof BR)YV(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof rI)this.rawUrlTree=i.rawUrl;else if(r instanceof DV){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof xM)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof cC)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof kM){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||YV(i.source)};this.scheduleNavigation(a,uC,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof jR&&this.restoreHistory(i,!0),r instanceof pp&&(this.navigated=!0),JV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),uC,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(a.state=p)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,v=p?this.currentUrlTree.fragment:c;let S,b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}null!==b&&(b=this.removeEmptyProps(b));try{S=vV(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return IV(S,t,b,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=qm(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,uC,null,r)}navigate(t,r={skipLocationChange:!1}){return function u6(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new m.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...o6}:!1===r?{...a6}:r,qm(t))return lV(this.currentUrlTree,t,i);const a=this.parseUrl(t);return lV(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,p,v;c?(h=c.resolve,p=c.reject,v=c.promise):v=new Promise((S,x)=>{h=S,p=x});const b=this.pendingTasks.add();return XV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:h,reject:p,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JV(n){return!(n instanceof xM||n instanceof kM)}let Km=(()=>{class n{constructor(t,r,i,a,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new is.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof pp&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,m.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Fo),m.Y36(sI),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Ve))};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&m.NdJ("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&m.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",m.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",m.VuI],replaceUrl:["replaceUrl","replaceUrl",m.VuI],routerLink:"routerLink"},standalone:!0,features:[m.Xq5,m.TTD]})}return n})();class eB{}let d6=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof pp),tC(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,Dn.D)(i).pipe((0,Lc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Et.of)(null);const a=i.pipe((0,fo.z)(c=>null===c?(0,Et.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Dn.D)([a,c]).pipe((0,Lc.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(Fo),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(eB),m.LFG(zM))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const WM=new m.OlP("");let tB=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof BR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pp?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof rI&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof SV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new SV(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){m.$Z()};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac})}return n})();function Qd(n,e){return{\u0275kind:n,\u0275providers:e}}function rB(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Fo),i=n.get(iB);1===n.get(qM)&&r.initialNavigation(),n.get(sB,null,m.XFs.Optional)?.setUpPreloading(),n.get(WM,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const iB=new m.OlP("",{factory:()=>new is.x}),qM=new m.OlP("",{providedIn:"root",factory:()=>1}),sB=new m.OlP("");function g6(n){return Qd(0,[{provide:sB,useExisting:d6},{provide:eB,useExisting:n}])}const oB=new m.OlP("ROUTER_FORROOT_GUARD"),_6=[Ye,{provide:iC,useClass:SM},Fo,lC,{provide:sI,useFactory:function nB(n){return n.routerState.root},deps:[Fo]},zM,[]];function y6(){return new m.PXZ("Router",Fo)}let aB=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_6,[],{provide:cI,multi:!0,useValue:t},{provide:oB,useFactory:w6,deps:[[Fo,new m.FiY,new m.tp0]]},{provide:ZR,useValue:r||{}},r?.useHash?{provide:Ve,useClass:Oe}:{provide:Ve,useClass:Ke},{provide:WM,useFactory:()=>{const n=(0,m.f3M)(di),e=(0,m.f3M)(m.R0b),t=(0,m.f3M)(ZR),r=(0,m.f3M)(KR),i=(0,m.f3M)(iC);return t.scrollOffset&&n.setOffset(t.scrollOffset),new tB(i,r,n,e,t)}},r?.preloadingStrategy?g6(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:y6},r?.initialNavigation?T6(r):[],r?.bindToComponentInputs?Qd(8,[MV,{provide:HR,useExisting:MV}]).\u0275providers:[],[{provide:uB,useFactory:rB},{provide:m.tb,multi:!0,useExisting:uB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:cI,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(oB,8))};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({})}return n})();function w6(n){return"guarded"}function T6(n){return["disabled"===n.initialNavigation?Qd(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Fo);return()=>{e.setUpLocationChangeListener()}}},{provide:qM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Qd(2,[{provide:qM,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(Re,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Fo),a=e.get(iB);XV(i,()=>{r(!0)}),e.get(KR).afterPreactivation=()=>(r(!0),a.closed?(0,Et.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const uB=new m.OlP("");var KM=F(7582);const b6=function hB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fB=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),YR=new Mr.Yd("@firebase/auth");function QR(n,...e){YR.logLevel<=Mr.in.ERROR&&YR.error(`Auth (${on.SDK_VERSION}): ${n}`,...e)}function Uo(n,...e){throw ZM(n,...e)}function _l(n,...e){return ZM(n,...e)}function ZM(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fB.create(n,...e)}function it(n,e,...t){if(!n)throw ZM(e,...t)}function yl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw QR(e),new Error(e)}function gp(n,e){n||yl(e)}function gB(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class yC{constructor(e,t){this.shortDelay=e,this.longDelay=t,gp(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function S6(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function YM(){return"http:"===gB()||"https:"===gB()}()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class mB{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void yl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void yl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void yl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const R6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},N6=new yC(3e4,6e4);function Ur(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Zr(n,e,t,r){return XM.apply(this,arguments)}function XM(){return XM=(0,J.Z)(function*(n,e,t,r,i={}){return _B(n,i,(0,J.Z)(function*(){let a={},c={};r&&("GET"===e?c=r:a={body:JSON.stringify(r)});const h=(0,k.xO)(Object.assign({key:n.config.apiKey},c)).slice(1),p=yield n._getAdditionalHeaders();return p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode),mB.fetch()(yB(n,n.config.apiHost,t,h),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},a))}))}),XM.apply(this,arguments)}function _B(n,e,t){return JM.apply(this,arguments)}function JM(){return JM=(0,J.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},R6),e);try{const i=new P6(n),a=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=yield a.json();if("needConfirmation"in c)throw vC(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[p,v]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw vC(n,"credential-already-in-use",c);if("EMAIL_EXISTS"===p)throw vC(n,"email-already-in-use",c);if("USER_DISABLED"===p)throw vC(n,"user-disabled",c);const b=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw function pB(n,e,t){const r=Object.assign(Object.assign({},b6()),{[e]:t});return new k.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,b,v);Uo(n,b)}}catch(i){if(i instanceof k.ZR)throw i;Uo(n,"network-request-failed",{message:String(i)})}}),JM.apply(this,arguments)}function eO(){return eO=(0,J.Z)(function*(n,e,t,r,i={}){const a=yield Zr(n,e,t,r,i);return"mfaPendingCredential"in a&&Uo(n,"multi-factor-auth-required",{_serverResponse:a}),a}),eO.apply(this,arguments)}function yB(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function QM(n,e){gp(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class P6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_l(this.auth,"network-request-failed")),N6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vC(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=_l(n,e,r);return i.customData._tokenResponse=t,i}function rO(){return rO=(0,J.Z)(function*(n,e){return Zr(n,"POST","/v1/accounts:delete",e)}),rO.apply(this,arguments)}function sO(){return sO=(0,J.Z)(function*(n,e){return Zr(n,"POST","/v1/accounts:lookup",e)}),sO.apply(this,arguments)}function IC(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function oO(){return oO=(0,J.Z)(function*(n,e=!1){const t=(0,k.m9)(n),r=yield t.getIdToken(e),i=XR(r);it(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:IC(aO(i.auth_time)),issuedAtTime:IC(aO(i.iat)),expirationTime:IC(aO(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}),oO.apply(this,arguments)}function aO(n){return 1e3*Number(n)}function XR(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return QR("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,k.tV)(t);return i?JSON.parse(i):(QR("Failed to decode base64 JWT payload"),null)}catch(i){return QR("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Jd(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,J.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof k.ZR&&function U6({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),uO.apply(this,arguments)}class V6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,J.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,J.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class IB{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=IC(this.lastLoginAt),this.creationTime=IC(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function EC(n){return cO.apply(this,arguments)}function cO(){return cO=(0,J.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Jd(n,function O6(n,e){return sO.apply(this,arguments)}(t,{idToken:r}));it(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const c=null!==(e=a.providerUserInfo)&&void 0!==e&&e.length?function $6(n){return n.map(e=>{var{providerId:t}=e,r=(0,KM._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(a.providerUserInfo):[],h=function j6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,c),b=!!n.isAnonymous&&!(n.email&&a.passwordHash||h?.length),S={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new IB(a.createdAt,a.lastLoginAt),isAnonymous:b};Object.assign(n,S)}),cO.apply(this,arguments)}function lO(){return lO=(0,J.Z)(function*(n){const e=(0,k.m9)(n);yield EC(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),lO.apply(this,arguments)}function dO(){return dO=(0,J.Z)(function*(n,e){const t=yield _B(n,{},(0,J.Z)(function*(){const r=(0,k.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=yB(n,i,"/v1/token",`key=${a}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",mB.fetch()(c,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),dO.apply(this,arguments)}class wC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function F6(n){const e=XR(n);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,J.Z)(function*(){return it(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,J.Z)(function*(){const{accessToken:i,refreshToken:a,expiresIn:c}=yield function H6(n,e){return dO.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,a,Number(c))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new wC;return r&&(it("string"==typeof r,"internal-error",{appName:e}),c.refreshToken=r),i&&(it("string"==typeof i,"internal-error",{appName:e}),c.accessToken=i),a&&(it("number"==typeof a,"internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wC,this.toJSON())}_performRefresh(){return yl("not implemented")}}function mp(n,e){it("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Zm{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=(0,KM._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new IB(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,J.Z)(function*(){const r=yield Jd(t,t.stsTokenManager.getToken(t.auth,e));return it(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function L6(n){return oO.apply(this,arguments)}(this,e)}reload(){return function B6(n){return lO.apply(this,arguments)}(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,J.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield EC(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,J.Z)(function*(){const t=yield e.getIdToken();return yield Jd(e,function k6(n,e){return rO.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,c,h,p,v,b;const S=null!==(r=t.displayName)&&void 0!==r?r:void 0,x=null!==(i=t.email)&&void 0!==i?i:void 0,$=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,X=null!==(c=t.photoURL)&&void 0!==c?c:void 0,pe=null!==(h=t.tenantId)&&void 0!==h?h:void 0,we=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,Je=null!==(v=t.createdAt)&&void 0!==v?v:void 0,ct=null!==(b=t.lastLoginAt)&&void 0!==b?b:void 0,{uid:tt,emailVerified:ft,isAnonymous:kt,providerData:zt,stsTokenManager:Yr}=t;it(tt&&Yr,e,"internal-error");const po=wC.fromJSON(this.name,Yr);it("string"==typeof tt,e,"internal-error"),mp(S,e.name),mp(x,e.name),it("boolean"==typeof ft,e,"internal-error"),it("boolean"==typeof kt,e,"internal-error"),mp($,e.name),mp(X,e.name),mp(pe,e.name),mp(we,e.name),mp(Je,e.name),mp(ct,e.name);const vl=new Zm({uid:tt,auth:e,email:x,emailVerified:ft,displayName:S,isAnonymous:kt,photoURL:X,phoneNumber:$,tenantId:pe,stsTokenManager:po,createdAt:Je,lastLoginAt:ct});return zt&&Array.isArray(zt)&&(vl.providerData=zt.map(d5=>Object.assign({},d5))),we&&(vl._redirectEventId=we),vl}static _fromIdTokenResponse(e,t,r=!1){return(0,J.Z)(function*(){const i=new wC;i.updateFromServerResponse(t);const a=new Zm({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield EC(a),a})()}}const EB=new Map;function eh(n){gp(n instanceof Function,"Expected a class definition");let e=EB.get(n);return e?(gp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,EB.set(n,e),e)}const wB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,J.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,J.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,J.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,J.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function JR(n,e,t){return`firebase:${n}:${e}:${t}`}class dI{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=JR(this.userKey,i.apiKey,a),this.fullPersistenceKey=JR("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,J.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Zm._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,J.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,J.Z)(function*(){if(!t.length)return new dI(eh(wB),e,r);const i=(yield Promise.all(t.map(function(){var v=(0,J.Z)(function*(b){if(yield b._isAvailable())return b});return function(b){return v.apply(this,arguments)}}()))).filter(v=>v);let a=i[0]||eh(wB);const c=JR(r,e.config.apiKey,e.name);let h=null;for(const v of t)try{const b=yield v._get(c);if(b){const S=Zm._fromJSON(e,b);v!==a&&(h=S),a=v;break}}catch{}const p=i.filter(v=>v._shouldAllowMigration);return a._shouldAllowMigration&&p.length?(a=p[0],h&&(yield a._set(c,h.toJSON())),yield Promise.all(t.map(function(){var v=(0,J.Z)(function*(b){if(b!==a)try{yield b._remove(c)}catch{}});return function(b){return v.apply(this,arguments)}}())),new dI(a,e,r)):new dI(a,e,r)})()}}function TB(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function DB(n=(0,k.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function CB(n=(0,k.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function AB(n=(0,k.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function RB(n=(0,k.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function hO(n=(0,k.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function bB(n=(0,k.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function SB(n=(0,k.z$)()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function NB(n,e=[]){let t;switch(n){case"Browser":t=TB((0,k.z$)());break;case"Worker":t=`${TB((0,k.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${on.SDK_VERSION}/${r}`}class W6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,h)=>{try{c(e(a))}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,J.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const a of r)try{a()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function fO(){return fO=(0,J.Z)(function*(n,e={}){return Zr(n,"GET","/v2/passwordPolicy",Ur(n,e))}),fO.apply(this,arguments)}class Z6{constructor(e){var t,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=c.minPasswordLength)&&void 0!==t?t:6,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),void 0!==c.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),void 0!==c.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),void 0!==c.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),void 0!==c.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=null===(t=p.meetsMinPasswordLength)||void 0===t||t),p.isValid&&(p.isValid=null===(r=p.meetsMaxPasswordLength)||void 0===r||r),p.isValid&&(p.isValid=null===(i=p.containsLowercaseLetter)||void 0===i||i),p.isValid&&(p.isValid=null===(a=p.containsUppercaseLetter)||void 0===a||a),p.isValid&&(p.isValid=null===(c=p.containsNumericCharacter)||void 0===c||c),p.isValid&&(p.isValid=null===(h=p.containsNonAlphanumericCharacter)||void 0===h||h),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Y6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PB(this),this.idTokenSubscription=new PB(this),this.beforeStateQueue=new W6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=eh(t)),this._initializationPromise=this.queue((0,J.Z)(function*(){var i,a;if(!r._deleted&&(r.persistenceManager=yield dI.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(a=r.currentUser)||void 0===a?void 0:a.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,J.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,J.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let a=i,c=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,p=a?._redirectEventId,v=yield t.tryRedirectSignIn(e);(!h||h===p)&&v?.user&&(a=v.user,c=!0)}if(!a)return t.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{yield t.beforeStateQueue.runMiddleware(a)}catch(h){a=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null)}return it(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a)})()}tryRedirectSignIn(e){var t=this;return(0,J.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,J.Z)(function*(){try{yield EC(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function A6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,J.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,J.Z)(function*(){const r=e?(0,k.m9)(e):null;return r&&it(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,J.Z)(function*(){if(!r._deleted)return e&&it(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,J.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,J.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,J.Z)(function*(){yield t.assertedPersistence.setPersistence(eh(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,J.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,J.Z)(function*(){const t=yield function q6(n){return fO.apply(this,arguments)}(e),r=new Z6(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new k.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,J.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,J.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&eh(e)||t._popupRedirectResolver;it(r,t,"argument-error"),t.redirectPersistenceManager=yield dI.create(t,[eh(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,J.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,J.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,J.Z)(function*(){if(e===t.currentUser)return t.queue((0,J.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),"function"==typeof t){const p=e.addObserver(t,r,i);return()=>{c=!0,p()}}{const p=e.addObserver(t);return()=>{c=!0,p()}}}directlySetCurrentUser(e){var t=this;return(0,J.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,J.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const a=yield e._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r})()}_getAppCheckToken(){var e=this;return(0,J.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function D6(n,...e){YR.logLevel<=Mr.in.WARN&&YR.warn(`Auth (${on.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class PB{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,k.ne)(t=>this.observer=t)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class a9{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yl("not implemented")}_getIdTokenResponse(e){return yl("not implemented")}_linkToIdToken(e,t){return yl("not implemented")}_getReauthenticationResolver(e){return yl("not implemented")}}function th(n,e){return xO.apply(this,arguments)}function xO(){return xO=(0,J.Z)(function*(n,e){return function Xd(n,e,t,r){return eO.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Ur(n,e))}),xO.apply(this,arguments)}class hI extends a9{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Uo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=(0,KM._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new hI(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){return th(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,th(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,th(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,k.xO)(t)}return e}}class yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class VB extends yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let E9=(()=>{class n extends VB{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return hI._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();(function xB(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new yC(3e4,6e4),new yC(2e3,1e4),new yC(3e4,6e4),new yC(5e3,15e3),encodeURIComponent("fac");var cj="@firebase/auth";class Kq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,J.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,k.Pz)("authIdTokenMaxAge"),function Yq(n){(0,on._registerComponent)(new rr.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;it(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NB(n)},v=new Y6(r,i,a,p);return function r9(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(eh);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,on._registerComponent)(new rr.wA("auth-internal",e=>{const t=function Mi(n){return(0,k.m9)(n)}(e.getProvider("auth").getImmediate());return new Kq(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,on.registerVersion)(cj,"1.3.0",function Zq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,on.registerVersion)(cj,"1.3.0","esm2017")}("Browser");let pI=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new E9).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(MF),m.LFG(Yp),m.LFG(Fo),m.LFG(m.R0b))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e5=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(pI))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(r,i){if(1&r){const a=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign In"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(a);const h=m.MAs(7),p=m.MAs(10);return m.KtG(i.authService.SignIn(h.value,p.value))}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()(),m.TgZ(17,"div",11)(18,"span",12),m._uU(19,"Forgot Password?"),m.qZA()()(),m.TgZ(20,"div",13)(21,"span"),m._uU(22,"Don't have an account?"),m.TgZ(23,"span",14),m._uU(24," Sign Up"),m.qZA()()()()()}},dependencies:[Km]})}return n})(),t5=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(pI))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(r,i){if(1&r){const a=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign Up"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(a);const h=m.MAs(7),p=m.MAs(10);return m.KtG(i.authService.SignUp(h.value,p.value))}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()(),m.TgZ(17,"div",11)(18,"span"),m._uU(19,"Already have an account? "),m.TgZ(20,"span",12),m._uU(21,"Log In"),m.qZA()()()()()()}},dependencies:[Km]})}return n})(),hj=(()=>{class n{constructor(){this.title="angular-firebase-app",this.storage=cg(),this.file={}}onFileChange(t){this.file=t.target.files[0],console.log(this.file)}addData(){console.log("button clicked!");const r=rE(Hh(this.storage,this.file.name),this.file);r.on("state_changed",i=>{console.log("Upload is "+i.bytesTransferred/i.totalBytes*100+"% done")},()=>{zz(r.snapshot.ref).then(i=>{console.log("File available at",i)})})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&m._UZ(0,"router-outlet")},dependencies:[VM]})}return n})();function n5(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",4)(1,"div",18)(2,"div",19),m._UZ(3,"img",20),m.TgZ(4,"div",21)(5,"h1"),m._uU(6,"Hello: "),m.TgZ(7,"strong"),m._uU(8),m.qZA()(),m.TgZ(9,"p"),m._uU(10,"User ID: "),m.TgZ(11,"strong"),m._uU(12),m.qZA()(),m.TgZ(13,"p"),m._uU(14,"Email: "),m.TgZ(15,"strong"),m._uU(16),m.qZA()(),m.TgZ(17,"p"),m._uU(18,"Email Verified: "),m.TgZ(19,"strong"),m._uU(20),m.qZA()(),m.TgZ(21,"p")(22,"input",22),m.NdJ("change",function(i){m.CHM(t);const a=m.oxw();return m.KtG(a.myapp.onFileChange(i))}),m.qZA()(),m.TgZ(23,"p")(24,"button",23),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.myapp.addData())}),m._uU(25,"Upload File..."),m.qZA()()()()()()}if(2&n){const t=e.ngIf;m.xp6(3),m.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",m.LSH),m.s9C("alt",t.displayName),m.xp6(5),m.Oqu(t.displayName?t.displayName:"User"),m.xp6(4),m.Oqu(t.uid),m.xp6(4),m.Oqu(t.email),m.xp6(4),m.Oqu(t.emailVerified)}}let r5=(()=>{class n{constructor(t,r){this.authService=t,this.myapp=r}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(pI),m.Y36(hj))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"],["type","file",3,"change"],[3,"click"]],template:function(r,i){1&r&&(m.TgZ(0,"nav",0)(1,"a",1),m._UZ(2,"img",2),m.qZA()(),m.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),m._UZ(10,"i",10),m._uU(11,"User Profile "),m.qZA()(),m.TgZ(12,"li",8)(13,"a",11),m.NdJ("click",function(){return i.authService.SignOut()}),m._UZ(14,"i",12),m._uU(15,"Log out "),m.qZA()()()()(),m.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),m._uU(20,"User Profile"),m.qZA()(),m.YNc(21,n5,26,6,"div",17),m.qZA()()()()),2&r&&(m.xp6(21),m.Q6J("ngIf",i.authService.userData))},dependencies:[ma]})}return n})(),i5=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(pI))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(r,i){if(1&r){const a=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Reset Password"),m.qZA(),m.TgZ(5,"p",3),m._uU(6,"Please enter your email address to request a password reset."),m.qZA(),m.TgZ(7,"div",4),m._UZ(8,"input",5,6),m.qZA(),m.TgZ(10,"div",4)(11,"input",7),m.NdJ("click",function(){m.CHM(a);const h=m.MAs(9);return m.KtG(i.authService.ForgotPassword(h.value))}),m.qZA()()(),m.TgZ(12,"div",8)(13,"span"),m._uU(14,"Go back to ? "),m.TgZ(15,"span",9),m._uU(16,"Log In"),m.qZA()()()()()}},dependencies:[Km]})}return n})();function s5(n,e){if(1&n&&(m.TgZ(0,"div",4)(1,"p",9),m._uU(2,"We have sent a confirmation email to "),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m._uU(5,"."),m.qZA(),m.TgZ(6,"p",9),m._uU(7,"Please check your email and click on the link to verfiy your email address."),m.qZA()()),2&n){const t=e.ngIf;m.xp6(4),m.Oqu(t.email)}}const o5=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:e5},{path:"register-user",component:t5},{path:"dashboard",component:r5,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(pI),m.LFG(Fo))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"forgot-password",component:i5},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(pI))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(r,i){1&r&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Thank You for Registering"),m.qZA(),m.YNc(5,s5,8,1,"div",3),m.TgZ(6,"div",4)(7,"button",5),m.NdJ("click",function(){return i.authService.SendVerificationMail()}),m._UZ(8,"i",6),m._uU(9," Resend Verification Email "),m.qZA()()(),m.TgZ(10,"div",7)(11,"span"),m._uU(12,"Go back to?"),m.TgZ(13,"span",8),m._uU(14," Sign in"),m.qZA()()()()()),2&r&&(m.xp6(5),m.Q6J("ngIf",i.authService.userData))},dependencies:[ma,Km]})}return n})()}];let a5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({imports:[aB.forRoot(o5),aB]})}return n})();(0,on.registerVersion)("firebase","10.4.0","app"),(0,on.initializeApp)(rV_firebase);let l5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n,bootstrap:[hj]});static#n=this.\u0275inj=m.cJS({imports:[Da,a5,Wn.hO.initializeApp(rV_firebase),IN,T$,lg,Mz,Gz(()=>Wz())]})}return n})();Dr().bootstrapModule(l5).catch(n=>console.error(n))},5619:(pt,Ae,F)=>{F.d(Ae,{X:()=>G});var m=F(8645);class G extends m.x{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const ae=super._subscribe(ee);return!ae.closed&&ee.next(this._value),ae}getValue(){const{hasError:ee,thrownError:ae,_value:ve}=this;if(ee)throw ae;return this._throwIfClosed(),ve}next(ee){super.next(this._value=ee)}}},5592:(pt,Ae,F)=>{F.d(Ae,{y:()=>Re});var m=F(305),G=F(7394),O=F(4850),ee=F(8407),ae=F(2653),ve=F(4674),Ee=F(1441);let Re=(()=>{class se{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const Ke=new se;return Ke.source=this,Ke.operator=xe,Ke}subscribe(xe,Ke,Oe){const Ye=function K(se){return se&&se instanceof m.Lv||function H(se){return se&&(0,ve.m)(se.next)&&(0,ve.m)(se.error)&&(0,ve.m)(se.complete)}(se)&&(0,G.Nn)(se)}(xe)?xe:new m.Hp(xe,Ke,Oe);return(0,Ee.x)(()=>{const{operator:ke,source:_t}=this;Ye.add(ke?ke.call(Ye,_t):_t?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(xe){try{return this._subscribe(xe)}catch(Ke){xe.error(Ke)}}forEach(xe,Ke){return new(Ke=me(Ke))((Oe,Ye)=>{const ke=new m.Hp({next:_t=>{try{xe(_t)}catch(ht){Ye(ht),ke.unsubscribe()}},error:Ye,complete:Oe});this.subscribe(ke)})}_subscribe(xe){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(xe)}[O.L](){return this}pipe(...xe){return(0,ee.U)(xe)(this)}toPromise(xe){return new(xe=me(xe))((Ke,Oe)=>{let Ye;this.subscribe(ke=>Ye=ke,ke=>Oe(ke),()=>Ke(Ye))})}}return se.create=Ve=>new se(Ve),se})();function me(se){var Ve;return null!==(Ve=se??ae.config.Promise)&&void 0!==Ve?Ve:Promise}},8645:(pt,Ae,F)=>{F.d(Ae,{x:()=>Ee});var m=F(5592),G=F(7394);const ee=(0,F(2306).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=F(9039),ve=F(1441);let Ee=(()=>{class me extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(K){const se=new Re(this,this);return se.operator=K,se}_throwIfClosed(){if(this.closed)throw new ee}next(K){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(K)}})}error(K){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=K;const{observers:se}=this;for(;se.length;)se.shift().error(K)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:K}=this;for(;K.length;)K.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var K;return(null===(K=this.observers)||void 0===K?void 0:K.length)>0}_trySubscribe(K){return this._throwIfClosed(),super._trySubscribe(K)}_subscribe(K){return this._throwIfClosed(),this._checkFinalizedStatuses(K),this._innerSubscribe(K)}_innerSubscribe(K){const{hasError:se,isStopped:Ve,observers:xe}=this;return se||Ve?G.Lc:(this.currentObservers=null,xe.push(K),new G.w0(()=>{this.currentObservers=null,(0,ae.P)(xe,K)}))}_checkFinalizedStatuses(K){const{hasError:se,thrownError:Ve,isStopped:xe}=this;se?K.error(Ve):xe&&K.complete()}asObservable(){const K=new m.y;return K.source=this,K}}return me.create=(H,K)=>new Re(H,K),me})();class Re extends Ee{constructor(H,K){super(),this.destination=H,this.source=K}next(H){var K,se;null===(se=null===(K=this.destination)||void 0===K?void 0:K.next)||void 0===se||se.call(K,H)}error(H){var K,se;null===(se=null===(K=this.destination)||void 0===K?void 0:K.error)||void 0===se||se.call(K,H)}complete(){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===K||K.call(H)}_subscribe(H){var K,se;return null!==(se=null===(K=this.source)||void 0===K?void 0:K.subscribe(H))&&void 0!==se?se:G.Lc}}},305:(pt,Ae,F)=>{F.d(Ae,{Hp:()=>Oe,Lv:()=>se});var m=F(4674),G=F(7394),O=F(2653),ee=F(3894),ae=F(2420);const ve=me("C",void 0,void 0);function me(oe,De,de){return{kind:oe,value:De,error:de}}var H=F(7599),K=F(1441);class se extends G.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,G.Nn)(De)&&De.add(this)):this.destination=ht}static create(De,de,Ce){return new Oe(De,de,Ce)}next(De){this.isStopped?_t(function Re(oe){return me("N",oe,void 0)}(De),this):this._next(De)}error(De){this.isStopped?_t(function Ee(oe){return me("E",void 0,oe)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?_t(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function xe(oe,De){return Ve.call(oe,De)}class Ke{constructor(De){this.partialObserver=De}next(De){const{partialObserver:de}=this;if(de.next)try{de.next(De)}catch(Ce){Ye(Ce)}}error(De){const{partialObserver:de}=this;if(de.error)try{de.error(De)}catch(Ce){Ye(Ce)}else Ye(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(de){Ye(de)}}}class Oe extends se{constructor(De,de,Ce){let Ue;if(super(),(0,m.m)(De)||!De)Ue={next:De??void 0,error:de??void 0,complete:Ce??void 0};else{let q;this&&O.config.useDeprecatedNextContext?(q=Object.create(De),q.unsubscribe=()=>this.unsubscribe(),Ue={next:De.next&&xe(De.next,q),error:De.error&&xe(De.error,q),complete:De.complete&&xe(De.complete,q)}):Ue=De}this.destination=new Ke(Ue)}}function Ye(oe){O.config.useDeprecatedSynchronousErrorHandling?(0,K.O)(oe):(0,ee.h)(oe)}function _t(oe,De){const{onStoppedNotification:de}=O.config;de&&H.z.setTimeout(()=>de(oe,De))}const ht={closed:!0,next:ae.Z,error:function ke(oe){throw oe},complete:ae.Z}},7394:(pt,Ae,F)=>{F.d(Ae,{Lc:()=>ve,w0:()=>ae,Nn:()=>Ee});var m=F(4674);const O=(0,F(2306).d)(me=>function(K){me(this),this.message=K?`${K.length} errors occurred during unsubscription:\n${K.map((se,Ve)=>`${Ve+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=K});var ee=F(9039);class ae{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:K}=this;if(K)if(this._parentage=null,Array.isArray(K))for(const xe of K)xe.remove(this);else K.remove(this);const{initialTeardown:se}=this;if((0,m.m)(se))try{se()}catch(xe){H=xe instanceof O?xe.errors:[xe]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const xe of Ve)try{Re(xe)}catch(Ke){H=H??[],Ke instanceof O?H=[...H,...Ke.errors]:H.push(Ke)}}if(H)throw new O(H)}}add(H){var K;if(H&&H!==this)if(this.closed)Re(H);else{if(H instanceof ae){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(K=this._finalizers)&&void 0!==K?K:[]).push(H)}}_hasParent(H){const{_parentage:K}=this;return K===H||Array.isArray(K)&&K.includes(H)}_addParent(H){const{_parentage:K}=this;this._parentage=Array.isArray(K)?(K.push(H),K):K?[K,H]:H}_removeParent(H){const{_parentage:K}=this;K===H?this._parentage=null:Array.isArray(K)&&(0,ee.P)(K,H)}remove(H){const{_finalizers:K}=this;K&&(0,ee.P)(K,H),H instanceof ae&&H._removeParent(this)}}ae.EMPTY=(()=>{const me=new ae;return me.closed=!0,me})();const ve=ae.EMPTY;function Ee(me){return me instanceof ae||me&&"closed"in me&&(0,m.m)(me.remove)&&(0,m.m)(me.add)&&(0,m.m)(me.unsubscribe)}function Re(me){(0,m.m)(me)?me():me.unsubscribe()}},2653:(pt,Ae,F)=>{F.d(Ae,{config:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(pt,Ae,F)=>{F.d(Ae,{E:()=>G});const G=new(F(5592).y)(ae=>ae.complete())},2459:(pt,Ae,F)=>{F.d(Ae,{D:()=>De});var m=F(4829),G=F(3093),O=F(5137),ve=F(5592),Re=F(4971),me=F(4674),H=F(7103);function se(de,Ce){if(!de)throw new Error("Iterable cannot be null");return new ve.y(Ue=>{(0,H.f)(Ue,Ce,()=>{const q=de[Symbol.asyncIterator]();(0,H.f)(Ue,Ce,()=>{q.next().then(Pe=>{Pe.done?Ue.complete():Ue.next(Pe.value)})},0,!0)})})}var Ve=F(8382),xe=F(4026),Ke=F(4266),Oe=F(3664),Ye=F(5726),ke=F(9853),_t=F(541);function De(de,Ce){return Ce?function oe(de,Ce){if(null!=de){if((0,Ve.c)(de))return function ee(de,Ce){return(0,m.Xf)(de).pipe((0,O.R)(Ce),(0,G.Q)(Ce))}(de,Ce);if((0,Ke.z)(de))return function Ee(de,Ce){return new ve.y(Ue=>{let q=0;return Ce.schedule(function(){q===de.length?Ue.complete():(Ue.next(de[q++]),Ue.closed||this.schedule())})})}(de,Ce);if((0,xe.t)(de))return function ae(de,Ce){return(0,m.Xf)(de).pipe((0,O.R)(Ce),(0,G.Q)(Ce))}(de,Ce);if((0,Ye.D)(de))return se(de,Ce);if((0,Oe.T)(de))return function K(de,Ce){return new ve.y(Ue=>{let q;return(0,H.f)(Ue,Ce,()=>{q=de[Re.h](),(0,H.f)(Ue,Ce,()=>{let Pe,Ge;try{({value:Pe,done:Ge}=q.next())}catch(It){return void Ue.error(It)}Ge?Ue.complete():Ue.next(Pe)},0,!0)}),()=>(0,me.m)(q?.return)&&q.return()})}(de,Ce);if((0,_t.L)(de))return function ht(de,Ce){return se((0,_t.Q)(de),Ce)}(de,Ce)}throw(0,ke.z)(de)}(de,Ce):(0,m.Xf)(de)}},4829:(pt,Ae,F)=>{F.d(Ae,{Xf:()=>Ve});var m=F(7582),G=F(4266),O=F(4026),ee=F(5592),ae=F(8382),ve=F(5726),Ee=F(9853),Re=F(3664),me=F(541),H=F(4674),K=F(3894),se=F(4850);function Ve(oe){if(oe instanceof ee.y)return oe;if(null!=oe){if((0,ae.c)(oe))return function xe(oe){return new ee.y(De=>{const de=oe[se.L]();if((0,H.m)(de.subscribe))return de.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,G.z)(oe))return function Ke(oe){return new ee.y(De=>{for(let de=0;de<oe.length&&!De.closed;de++)De.next(oe[de]);De.complete()})}(oe);if((0,O.t)(oe))return function Oe(oe){return new ee.y(De=>{oe.then(de=>{De.closed||(De.next(de),De.complete())},de=>De.error(de)).then(null,K.h)})}(oe);if((0,ve.D)(oe))return ke(oe);if((0,Re.T)(oe))return function Ye(oe){return new ee.y(De=>{for(const de of oe)if(De.next(de),De.closed)return;De.complete()})}(oe);if((0,me.L)(oe))return function _t(oe){return ke((0,me.Q)(oe))}(oe)}throw(0,Ee.z)(oe)}function ke(oe){return new ee.y(De=>{(function ht(oe,De){var de,Ce,Ue,q;return(0,m.mG)(this,void 0,void 0,function*(){try{for(de=(0,m.KL)(oe);!(Ce=yield de.next()).done;)if(De.next(Ce.value),De.closed)return}catch(Pe){Ue={error:Pe}}finally{try{Ce&&!Ce.done&&(q=de.return)&&(yield q.call(de))}finally{if(Ue)throw Ue.error}}De.complete()})})(oe,De).catch(de=>De.error(de))})}},3019:(pt,Ae,F)=>{F.d(Ae,{T:()=>ve});var m=F(7537),G=F(4829),O=F(6232),ee=F(4564),ae=F(2459);function ve(...Ee){const Re=(0,ee.yG)(Ee),me=(0,ee._6)(Ee,1/0),H=Ee;return H.length?1===H.length?(0,G.Xf)(H[0]):(0,m.J)(me)((0,ae.D)(H,Re)):O.E}},2096:(pt,Ae,F)=>{F.d(Ae,{of:()=>O});var m=F(4564),G=F(2459);function O(...ee){const ae=(0,m.yG)(ee);return(0,G.D)(ee,ae)}},8251:(pt,Ae,F)=>{F.d(Ae,{x:()=>G});var m=F(305);function G(ee,ae,ve,Ee,Re){return new O(ee,ae,ve,Ee,Re)}class O extends m.Lv{constructor(ae,ve,Ee,Re,me,H){super(ae),this.onFinalize=me,this.shouldUnsubscribe=H,this._next=ve?function(K){try{ve(K)}catch(se){ae.error(se)}}:super._next,this._error=Re?function(K){try{Re(K)}catch(se){ae.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(K){ae.error(K)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},3997:(pt,Ae,F)=>{F.d(Ae,{x:()=>ee});var m=F(2737),G=F(9360),O=F(8251);function ee(ve,Ee=m.y){return ve=ve??ae,(0,G.e)((Re,me)=>{let H,K=!0;Re.subscribe((0,O.x)(me,se=>{const Ve=Ee(se);(K||!ve(H,Ve))&&(K=!1,H=Ve,me.next(se))}))})}function ae(ve,Ee){return ve===Ee}},7398:(pt,Ae,F)=>{F.d(Ae,{U:()=>O});var m=F(9360),G=F(8251);function O(ee,ae){return(0,m.e)((ve,Ee)=>{let Re=0;ve.subscribe((0,G.x)(Ee,me=>{Ee.next(ee.call(ae,me,Re++))}))})}},7537:(pt,Ae,F)=>{F.d(Ae,{J:()=>O});var m=F(1631),G=F(2737);function O(ee=1/0){return(0,m.z)(G.y,ee)}},1631:(pt,Ae,F)=>{F.d(Ae,{z:()=>Re});var m=F(7398),G=F(4829),O=F(9360),ee=F(7103),ae=F(8251),Ee=F(4674);function Re(me,H,K=1/0){return(0,Ee.m)(H)?Re((se,Ve)=>(0,m.U)((xe,Ke)=>H(se,xe,Ve,Ke))((0,G.Xf)(me(se,Ve))),K):("number"==typeof H&&(K=H),(0,O.e)((se,Ve)=>function ve(me,H,K,se,Ve,xe,Ke,Oe){const Ye=[];let ke=0,_t=0,ht=!1;const oe=()=>{ht&&!Ye.length&&!ke&&H.complete()},De=Ce=>ke<se?de(Ce):Ye.push(Ce),de=Ce=>{xe&&H.next(Ce),ke++;let Ue=!1;(0,G.Xf)(K(Ce,_t++)).subscribe((0,ae.x)(H,q=>{Ve?.(q),xe?De(q):H.next(q)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(ke--;Ye.length&&ke<se;){const q=Ye.shift();Ke?(0,ee.f)(H,Ke,()=>de(q)):de(q)}oe()}catch(q){H.error(q)}}))};return me.subscribe((0,ae.x)(H,De,()=>{ht=!0,oe()})),()=>{Oe?.()}}(se,Ve,me,K)))}},3093:(pt,Ae,F)=>{F.d(Ae,{Q:()=>ee});var m=F(7103),G=F(9360),O=F(8251);function ee(ae,ve=0){return(0,G.e)((Ee,Re)=>{Ee.subscribe((0,O.x)(Re,me=>(0,m.f)(Re,ae,()=>Re.next(me),ve),()=>(0,m.f)(Re,ae,()=>Re.complete(),ve),me=>(0,m.f)(Re,ae,()=>Re.error(me),ve)))})}},3020:(pt,Ae,F)=>{F.d(Ae,{B:()=>ae});var m=F(4829),G=F(8645),O=F(305),ee=F(9360);function ae(Ee={}){const{connector:Re=(()=>new G.x),resetOnError:me=!0,resetOnComplete:H=!0,resetOnRefCountZero:K=!0}=Ee;return se=>{let Ve,xe,Ke,Oe=0,Ye=!1,ke=!1;const _t=()=>{xe?.unsubscribe(),xe=void 0},ht=()=>{_t(),Ve=Ke=void 0,Ye=ke=!1},oe=()=>{const De=Ve;ht(),De?.unsubscribe()};return(0,ee.e)((De,de)=>{Oe++,!ke&&!Ye&&_t();const Ce=Ke=Ke??Re();de.add(()=>{Oe--,0===Oe&&!ke&&!Ye&&(xe=ve(oe,K))}),Ce.subscribe(de),!Ve&&Oe>0&&(Ve=new O.Hp({next:Ue=>Ce.next(Ue),error:Ue=>{ke=!0,_t(),xe=ve(ht,me,Ue),Ce.error(Ue)},complete:()=>{Ye=!0,_t(),xe=ve(ht,H),Ce.complete()}}),(0,m.Xf)(De).subscribe(Ve))})(se)}}function ve(Ee,Re,...me){if(!0===Re)return void Ee();if(!1===Re)return;const H=new O.Hp({next:()=>{H.unsubscribe(),Ee()}});return(0,m.Xf)(Re(...me)).subscribe(H)}},5137:(pt,Ae,F)=>{F.d(Ae,{R:()=>G});var m=F(9360);function G(O,ee=0){return(0,m.e)((ae,ve)=>{ve.add(O.schedule(()=>ae.subscribe(ve),ee))})}},4664:(pt,Ae,F)=>{F.d(Ae,{w:()=>ee});var m=F(4829),G=F(9360),O=F(8251);function ee(ae,ve){return(0,G.e)((Ee,Re)=>{let me=null,H=0,K=!1;const se=()=>K&&!me&&Re.complete();Ee.subscribe((0,O.x)(Re,Ve=>{me?.unsubscribe();let xe=0;const Ke=H++;(0,m.Xf)(ae(Ve,Ke)).subscribe(me=(0,O.x)(Re,Oe=>Re.next(ve?ve(Ve,Oe,Ke,xe++):Oe),()=>{me=null,se()}))},()=>{K=!0,se()}))})}},9397:(pt,Ae,F)=>{F.d(Ae,{b:()=>ae});var m=F(4674),G=F(9360),O=F(8251),ee=F(2737);function ae(ve,Ee,Re){const me=(0,m.m)(ve)||Ee||Re?{next:ve,error:Ee,complete:Re}:ve;return me?(0,G.e)((H,K)=>{var se;null===(se=me.subscribe)||void 0===se||se.call(me);let Ve=!0;H.subscribe((0,O.x)(K,xe=>{var Ke;null===(Ke=me.next)||void 0===Ke||Ke.call(me,xe),K.next(xe)},()=>{var xe;Ve=!1,null===(xe=me.complete)||void 0===xe||xe.call(me),K.complete()},xe=>{var Ke;Ve=!1,null===(Ke=me.error)||void 0===Ke||Ke.call(me,xe),K.error(xe)},()=>{var xe,Ke;Ve&&(null===(xe=me.unsubscribe)||void 0===xe||xe.call(me)),null===(Ke=me.finalize)||void 0===Ke||Ke.call(me)}))}):ee.y}},1954:(pt,Ae,F)=>{F.d(Ae,{o:()=>ae});var m=F(7394);class G extends m.w0{constructor(Ee,Re){super()}schedule(Ee,Re=0){return this}}const O={setInterval(ve,Ee,...Re){const{delegate:me}=O;return me?.setInterval?me.setInterval(ve,Ee,...Re):setInterval(ve,Ee,...Re)},clearInterval(ve){const{delegate:Ee}=O;return(Ee?.clearInterval||clearInterval)(ve)},delegate:void 0};var ee=F(9039);class ae extends G{constructor(Ee,Re){super(Ee,Re),this.scheduler=Ee,this.work=Re,this.pending=!1}schedule(Ee,Re=0){var me;if(this.closed)return this;this.state=Ee;const H=this.id,K=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(K,H,Re)),this.pending=!0,this.delay=Re,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(K,this.id,Re),this}requestAsyncId(Ee,Re,me=0){return O.setInterval(Ee.flush.bind(Ee,this),me)}recycleAsyncId(Ee,Re,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return Re;null!=Re&&O.clearInterval(Re)}execute(Ee,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(Ee,Re);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,Re){let H,me=!1;try{this.work(Ee)}catch(K){me=!0,H=K||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:Re}=this,{actions:me}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(me,this),null!=Ee&&(this.id=this.recycleAsyncId(Re,Ee,null)),this.delay=null,super.unsubscribe()}}}},2631:(pt,Ae,F)=>{F.d(Ae,{v:()=>O});var m=F(4552);class G{constructor(ae,ve=G.now){this.schedulerActionCtor=ae,this.now=ve}schedule(ae,ve=0,Ee){return new this.schedulerActionCtor(this,ae).schedule(Ee,ve)}}G.now=m.l.now;class O extends G{constructor(ae,ve=G.now){super(ae,ve),this.actions=[],this._active=!1}flush(ae){const{actions:ve}=this;if(this._active)return void ve.push(ae);let Ee;this._active=!0;do{if(Ee=ae.execute(ae.state,ae.delay))break}while(ae=ve.shift());if(this._active=!1,Ee){for(;ae=ve.shift();)ae.unsubscribe();throw Ee}}}},6321:(pt,Ae,F)=>{F.d(Ae,{z:()=>O});var m=F(1954);const O=new(F(2631).v)(m.o)},4552:(pt,Ae,F)=>{F.d(Ae,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},7599:(pt,Ae,F)=>{F.d(Ae,{z:()=>m});const m={setTimeout(G,O,...ee){const{delegate:ae}=m;return ae?.setTimeout?ae.setTimeout(G,O,...ee):setTimeout(G,O,...ee)},clearTimeout(G){const{delegate:O}=m;return(O?.clearTimeout||clearTimeout)(G)},delegate:void 0}},4971:(pt,Ae,F)=>{F.d(Ae,{h:()=>G});const G=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(pt,Ae,F)=>{F.d(Ae,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(pt,Ae,F)=>{F.d(Ae,{_6:()=>ve,jO:()=>ee,yG:()=>ae});var m=F(4674);function O(Ee){return Ee[Ee.length-1]}function ee(Ee){return(0,m.m)(O(Ee))?Ee.pop():void 0}function ae(Ee){return function G(Ee){return Ee&&(0,m.m)(Ee.schedule)}(O(Ee))?Ee.pop():void 0}function ve(Ee,Re){return"number"==typeof O(Ee)?Ee.pop():Re}},9039:(pt,Ae,F)=>{function m(G,O){if(G){const ee=G.indexOf(O);0<=ee&&G.splice(ee,1)}}F.d(Ae,{P:()=>m})},2306:(pt,Ae,F)=>{function m(G){const ee=G(ae=>{Error.call(ae),ae.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}F.d(Ae,{d:()=>m})},1441:(pt,Ae,F)=>{F.d(Ae,{O:()=>ee,x:()=>O});var m=F(2653);let G=null;function O(ae){if(m.config.useDeprecatedSynchronousErrorHandling){const ve=!G;if(ve&&(G={errorThrown:!1,error:null}),ae(),ve){const{errorThrown:Ee,error:Re}=G;if(G=null,Ee)throw Re}}else ae()}function ee(ae){m.config.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=ae)}},7103:(pt,Ae,F)=>{function m(G,O,ee,ae=0,ve=!1){const Ee=O.schedule(function(){ee(),ve?G.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(G.add(Ee),!ve)return Ee}F.d(Ae,{f:()=>m})},2737:(pt,Ae,F)=>{function m(G){return G}F.d(Ae,{y:()=>m})},4266:(pt,Ae,F)=>{F.d(Ae,{z:()=>m});const m=G=>G&&"number"==typeof G.length&&"function"!=typeof G},5726:(pt,Ae,F)=>{F.d(Ae,{D:()=>G});var m=F(4674);function G(O){return Symbol.asyncIterator&&(0,m.m)(O?.[Symbol.asyncIterator])}},4674:(pt,Ae,F)=>{function m(G){return"function"==typeof G}F.d(Ae,{m:()=>m})},8382:(pt,Ae,F)=>{F.d(Ae,{c:()=>O});var m=F(4850),G=F(4674);function O(ee){return(0,G.m)(ee[m.L])}},3664:(pt,Ae,F)=>{F.d(Ae,{T:()=>O});var m=F(4971),G=F(4674);function O(ee){return(0,G.m)(ee?.[m.h])}},4026:(pt,Ae,F)=>{F.d(Ae,{t:()=>G});var m=F(4674);function G(O){return(0,m.m)(O?.then)}},541:(pt,Ae,F)=>{F.d(Ae,{L:()=>ee,Q:()=>O});var m=F(7582),G=F(4674);function O(ae){return(0,m.FC)(this,arguments,function*(){const Ee=ae.getReader();try{for(;;){const{value:Re,done:me}=yield(0,m.qq)(Ee.read());if(me)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(Re)}}finally{Ee.releaseLock()}})}function ee(ae){return(0,G.m)(ae?.getReader)}},9360:(pt,Ae,F)=>{F.d(Ae,{A:()=>G,e:()=>O});var m=F(4674);function G(ee){return(0,m.m)(ee?.lift)}function O(ee){return ae=>{if(G(ae))return ae.lift(function(ve){try{return ee(ve,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(pt,Ae,F)=>{function m(){}F.d(Ae,{Z:()=>m})},8407:(pt,Ae,F)=>{F.d(Ae,{U:()=>O,z:()=>G});var m=F(2737);function G(...ee){return O(ee)}function O(ee){return 0===ee.length?m.y:1===ee.length?ee[0]:function(ve){return ee.reduce((Ee,Re)=>Re(Ee),ve)}}},3894:(pt,Ae,F)=>{F.d(Ae,{h:()=>O});var m=F(2653),G=F(7599);function O(ee){G.z.setTimeout(()=>{const{onUnhandledError:ae}=m.config;if(!ae)throw ee;ae(ee)})}},9853:(pt,Ae,F)=>{function m(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ae,{z:()=>m})},5879:(pt,Ae,F)=>{F.d(Ae,{$8M:()=>Na,$WT:()=>ya,$Z:()=>ef,AFp:()=>oE,AaK:()=>se,CHM:()=>$i,CRH:()=>KS,EJc:()=>mm,EpF:()=>ow,F4k:()=>Nu,FYo:()=>gg,FiY:()=>he,GfV:()=>Sb,HDt:()=>yv,JOm:()=>Lh,KtG:()=>Hl,LFG:()=>qe,LSH:()=>U_,Lbi:()=>aE,Lck:()=>TS,MAs:()=>bt,MMx:()=>Yw,NdJ:()=>jg,Ojb:()=>QN,OlP:()=>Pn,Oqu:()=>Gg,P3R:()=>nE,PXZ:()=>W0,Q6J:()=>_d,QGY:()=>Dy,Qsj:()=>Va,R0b:()=>mi,RDi:()=>Es,Rgc:()=>am,SBq:()=>fg,Sil:()=>lA,Suo:()=>v0,TTD:()=>fc,TgZ:()=>or,VuI:()=>UA,X6Q:()=>Ax,XFs:()=>Tt,Xpm:()=>ec,Xq5:()=>jc,Xts:()=>$h,Y36:()=>ad,YKP:()=>qw,YNc:()=>DD,Yjl:()=>bl,Yz7:()=>gt,Z0I:()=>ln,ZZ4:()=>xv,_UZ:()=>gf,_c5:()=>kv,_uU:()=>wd,aQg:()=>Zf,c2e:()=>Vd,cJS:()=>Fn,cg1:()=>ky,dDg:()=>Hf,dqk:()=>$t,eFA:()=>q0,eJc:()=>dm,eoX:()=>$0,f3M:()=>ot,g9A:()=>vb,h0i:()=>Xc,hGG:()=>uT,iGM:()=>y0,ifc:()=>As,ip1:()=>jf,jDz:()=>Xw,kL8:()=>Ga,lG2:()=>_a,lqb:()=>Fa,lri:()=>Tv,n5z:()=>Rc,oAB:()=>Cl,oxw:()=>Pu,q4F:()=>sd,qFp:()=>es,qLn:()=>Ba,qZA:()=>et,rWj:()=>$d,rg0:()=>Fl,s9C:()=>$g,sBO:()=>J0,s_b:()=>la,soG:()=>Bd,tb:()=>Im,tp0:()=>rt,uIk:()=>xn,vHH:()=>oe,vpe:()=>No,wAp:()=>Dd,xp6:()=>PE,z2F:()=>zf,zSh:()=>iE,zs3:()=>ws});var m=F(8645),G=F(7394),O=F(5592),ee=F(3019),ae=F(5619),ve=F(2096),Ee=F(3020),Re=F(4664),me=F(3997);function H(s){for(let o in s)if(s[o]===H)return o;throw Error("Could not find renamed property on target object.")}function se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const xe=H({__forward_ref__:H});function Ke(s){return s.__forward_ref__=Ke,s.toString=function(){return se(this())},s}function Oe(s){return Ye(s)?s():s}function Ye(s){return"function"==typeof s&&s.hasOwnProperty(xe)&&s.__forward_ref__===Ke}function ke(s){return s&&!!s.\u0275providers}const ht="https://g.co/ng/security#xss";class oe extends Error{constructor(o,u){super(function De(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function de(s){return"string"==typeof s?s:null==s?"":String(s)}function Ge(s,o){throw new oe(-201,!1)}function Ze(s,o){null==s&&function ze(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function gt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Fn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cn(s){return Gn(s,Un)||Gn(s,Vr)}function ln(s){return null!==Cn(s)}function Gn(s,o){return s.hasOwnProperty(o)?s[o]:null}function lr(s){return s&&(s.hasOwnProperty(jn)||s.hasOwnProperty(ts))?s[jn]:null}const Un=H({\u0275prov:H}),jn=H({\u0275inj:H}),Vr=H({ngInjectableDef:H}),ts=H({ngInjectorDef:H});var Tt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(Tt||{});let At;function Kt(s){const o=At;return At=s,o}function tr(s,o,u){const l=Cn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&Tt.Optional?null:void 0!==o?o:void Ge(se(s))}const $t=globalThis,Be={},lt="__NG_DI_FLAG__",mt="ngTempTokenPath",W=/\n/gm,U="__source";let V;function ne(s){const o=V;return V=s,o}function Ne(s,o=Tt.Default){if(void 0===V)throw new oe(-203,!1);return null===V?tr(s,void 0,o):V.get(s,o&Tt.Optional?null:void 0,o)}function qe(s,o=Tt.Default){return(function Mt(){return At}()||Ne)(Oe(s),o)}function ot(s,o=Tt.Default){return qe(s,gn(o))}function gn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Lt(s){const o=[];for(let u=0;u<s.length;u++){const l=Oe(s[u]);if(Array.isArray(l)){if(0===l.length)throw new oe(900,!1);let d,f=Tt.Default;for(let y=0;y<l.length;y++){const I=l[y],C=Ht(I);"number"==typeof C?-1===C?d=I.token:f|=C:d=I}o.push(qe(d,f))}else o.push(qe(l))}return o}function bn(s,o){return s[lt]=o,s.prototype[lt]=o,s}function Ht(s){return s[lt]}function Ks(s){return{toString:s}.toString()}var Ss=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(Ss||{}),As=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(As||{});const ns={},rn=[],go=H({\u0275cmp:H}),fa=H({\u0275dir:H}),Zu=H({\u0275pipe:H}),Yu=H({\u0275mod:H}),Zs=H({\u0275fac:H}),tu=H({__NG_ELEMENT_ID__:H}),pa=H({__NG_ENV_ID__:H});function Il(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}u=d+1}}function ga(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const f=u[l++],y=u[l++],I=u[l++];s.setAttribute(o,y,I,f)}else{const f=d,y=u[++l];Bo(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),l++}}return l}function Ys(s){return 3===s||4===s||6===s}function Bo(s){return 64===s.charCodeAt(0)}function nu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||Qu(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function Qu(s,o,u,l,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const I=s[f++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=f-1;break}}}for(;f<s.length;){const I=s[f];if("number"==typeof I)break;if(I===u){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}const Xn="ng-template";function Xm(s,o,u){let l=0,d=!0;for(;l<s.length;){let f=s[l++];if("string"==typeof f&&d){const y=s[l++];if(u&&"class"===f&&-1!==Il(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;l<s.length&&"string"==typeof(f=s[l++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function ma(s){return 4===s.type&&s.value!==Xn}function Jm(s,o,u){return o===(4!==s.type||u?s.value:Xn)}function nh(s,o,u){let l=4;const d=s.attrs||[],f=function iu(s){for(let o=0;o<s.length;o++)if(Ys(s[o]))return o;return s.length}(d);let y=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!y)if(4&l){if(l=2|1&l,""!==C&&!Jm(s,C,u)||""===C&&1===o.length){if(Ei(l))return!1;y=!0}}else{const A=8&l?C:o[++I];if(8&l&&null!==s.attrs){if(!Xm(s.attrs,A,u)){if(Ei(l))return!1;y=!0}continue}const j=ru(8&l?"class":C,d,ma(s),u);if(-1===j){if(Ei(l))return!1;y=!0;continue}if(""!==A){let Z;Z=j>f?"":d[j+1].toLowerCase();const ie=8&l?Z:null;if(ie&&-1!==Il(ie,A,0)||2&l&&A!==Z){if(Ei(l))return!1;y=!0}}}}else{if(!y&&!Ei(l)&&!Ei(C))return!1;if(y&&Ei(C))continue;y=!1,l=C|1&l}}return Ei(l)||y}function Ei(s){return 0==(1&s)}function ru(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function El(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function Xu(s,o,u=!1){for(let l=0;l<o.length;l++)if(nh(s,o[l],u))return!0;return!1}function Ju(s,o){return s?":not("+o.trim()+")":o}function wl(s){let o=s[0],u=1,l=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&l){const I=s[++u];d+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Ei(y)&&(o+=Ju(f,d),d=""),l=y,f=f||!Ei(l);u++}return""!==d&&(o+=Ju(f,d)),o}function ec(s){return Ks(()=>{const o=Ip(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Ss.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||As.Emulated,styles:s.styles||rn,_:null,schemas:s.schemas||null,tView:null,id:""};Dl(u);const l=s.dependencies;return u.directiveDefs=jo(l,!1),u.pipeDefs=jo(l,!0),u.id=function va(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function tc(s){return Xt(s)||wr(s)}function Tl(s){return null!==s}function Cl(s){return Ks(()=>({type:s.type,bootstrap:s.bootstrap||rn,declarations:s.declarations||rn,imports:s.imports||rn,exports:s.exports||rn,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function rc(s,o){if(null==s)return ns;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=l,o&&(o[d]=f)}return u}function _a(s){return Ks(()=>{const o=Ip(s);return Dl(o),o})}function bl(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Xt(s){return s[go]||null}function wr(s){return s[fa]||null}function Br(s){return s[Zu]||null}function ya(s){const o=Xt(s)||wr(s)||Br(s);return null!==o&&o.standalone}function jr(s,o){const u=s[Yu]||null;if(!u&&!0===o)throw new Error(`Type ${se(s)} does not have '\u0275mod' property.`);return u}function Ip(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||ns,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||rn,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rc(s.inputs,o),outputs:rc(s.outputs)}}function Dl(s){s.features?.forEach(o=>o(s))}function jo(s,o){if(!s)return null;const u=o?Br:tc;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(Tl)}const Jn=0,Qe=1,Ut=2,Mn=3,Fi=4,Qs=5,li=6,$o=7,nr=8,Xs=9,_o=10,Rt=11,ds=12,Ep=13,Ui=14,Tr=15,Ia=16,Vi=17,di=18,yo=19,ic=20,Ho=21,hs=22,sc=23,Bi=24,Zt=25,Al=1,Ea=2,$r=7,vo=9,Cr=11;function ei(s){return Array.isArray(s)&&"object"==typeof s[Al]}function ti(s){return Array.isArray(s)&&!0===s[Al]}function Rl(s){return 0!=(4&s.flags)}function Js(s){return s.componentOffset>-1}function ji(s){return 1==(1&s.flags)}function Ti(s){return!!s.template}function zo(s){return 0!=(512&s[Ut])}function eo(s,o){return s.hasOwnProperty(Zs)?s[Zs]:null}let fr=null,ou=!1;function ni(s){const o=fr;return fr=s,o}const au={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function kl(s){if(!lu(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Rp(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function Ml(s){s.dirty=!0,function ah(s){if(void 0===s.liveConsumerNode)return;const o=ou;ou=!0;try{for(const u of s.liveConsumerNode)u.dirty||Ml(u)}finally{ou=o}}(s),s.consumerMarkedDirty?.(s)}function uh(s){return s&&(s.nextProducerIndex=0),ni(s)}function pr(s,o){if(ni(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(lu(s))for(let u=s.nextProducerIndex;u<s.producerNode.length;u++)Wo(s.producerNode[u],s.producerIndexOfThis[u]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Rp(s){Rs(s);for(let o=0;o<s.producerNode.length;o++){const u=s.producerNode[o],l=s.producerLastReadVersion[o];if(l!==u.version||(kl(u),l!==u.version))return!0}return!1}function cu(s){if(Rs(s),lu(s))for(let o=0;o<s.producerNode.length;o++)Wo(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Wo(s,o){if(function Ol(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),Rs(s),1===s.liveConsumerNode.length)for(let l=0;l<s.producerNode.length;l++)Wo(s.producerNode[l],s.producerIndexOfThis[l]);const u=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[u],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[u],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const l=s.liveConsumerIndexOfThis[o],d=s.liveConsumerNode[o];Rs(d),d.producerIndexOfThis[l]=o}}function lu(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function Rs(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let hh=null;function Fl(s){const o=ni(null);try{return s()}finally{ni(o)}}const Ul=()=>{},i_=(()=>({...au,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:Ul}))();class kp{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function fc(){return pu}function pu(s){return s.type.prototype.ngOnChanges&&(s.setInput=gs),pc}function pc(){const s=gu(this),o=s?.current;if(o){const u=s.previous;if(u===ns)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function gs(s,o,u,l){const d=this.declaredInputs[u],f=gu(s)||function mh(s,o){return s[Ca]=o}(s,{previous:ns,current:null}),y=f.current||(f.current={}),I=f.previous,C=I[d];y[d]=new kp(C&&C.currentValue,o,I===ns),s[l]=o}fc.ngInherit=!0;const Ca="__ngSimpleChanges__";function gu(s){return s[Ca]||null}const rs=function(s,o,u){};function En(s){for(;Array.isArray(s);)s=s[Jn];return s}function hi(s,o){return En(o[s.index])}function Bl(s,o){return s.data[o]}function ri(s,o){const u=o[s];return ei(u)?u:u[Jn]}function Ko(s,o){return null==o?null:s[o]}function Mp(s){s[Vi]=0}function Zo(s){1024&s[Ut]||(s[Ut]|=1024,br(s,1))}function a_(s){1024&s[Ut]&&(s[Ut]&=-1025,br(s,-1))}function br(s,o){let u=s[Mn];if(null===u)return;u[Qs]+=o;let l=u;for(u=u[Mn];null!==u&&(1===o&&1===l[Qs]||-1===o&&0===l[Qs]);)u[Qs]+=o,l=u,u=u[Mn]}const Pt={lFrame:Et(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function gr(){return Pt.bindingsEnabled}function Me(){return Pt.lFrame.lView}function sn(){return Pt.lFrame.tView}function $i(s){return Pt.lFrame.contextLView=s,s[nr]}function Hl(s){return Pt.lFrame.contextLView=null,s}function Hr(){let s=vc();for(;null!==s&&64===s.type;)s=s.parent;return s}function vc(){return Pt.lFrame.currentTNode}function Ps(s,o){const u=Pt.lFrame;u.currentTNode=s,u.isParent=o}function wh(){return Pt.lFrame.isParent}function Yo(){return Pt.lFrame.bindingIndex++}function Ic(s,o){const u=Pt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ec(o)}function Ec(s){Pt.lFrame.currentDirectiveIndex=s}function ql(){return Pt.lFrame.currentQueryIndex}function bh(s){Pt.lFrame.currentQueryIndex=s}function Dh(s){const o=s[Qe];return 2===o.type?o.declTNode:1===o.type?s[li]:null}function Kl(s,o,u){if(u&Tt.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&Tt.Host||(d=Dh(f),null===d||(f=f[Ui],10&d.type))););if(null===d)return!1;o=d,s=f}const l=Pt.lFrame=is();return l.currentTNode=o,l.lView=s,!0}function Wn(s){const o=is(),u=s[Qe];Pt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function is(){const s=Pt.lFrame,o=null===s?null:s.child;return null===o?Et(s):o}function Et(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Hi(){const s=Pt.lFrame;return Pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Dn=Hi;function to(){const s=Hi();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function vt(){return Pt.lFrame.selectedIndex}function ms(s){Pt.lFrame.selectedIndex=s}function Kn(){const s=Pt.lFrame;return Bl(s.tView,s.selectedIndex)}let er=!0;function ii(){return er}function si(s){er=s}function _s(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:P}=f;y&&(s.contentHooks??=[]).push(-u,y),I&&((s.contentHooks??=[]).push(u,I),(s.contentCheckHooks??=[]).push(u,I)),C&&(s.viewHooks??=[]).push(-u,C),A&&((s.viewHooks??=[]).push(u,A),(s.viewCheckHooks??=[]).push(u,A)),null!=P&&(s.destroyHooks??=[]).push(u,P)}}function Tc(s,o,u){Ls(s,o,3,u)}function Sa(s,o,u,l){(3&s[Ut])===u&&Ls(s,o,u,l)}function Qo(s,o){let u=s[Ut];(3&u)===o&&(u&=8191,u+=1,s[Ut]=u)}function Ls(s,o,u,l){const f=l??-1,y=o.length-1;let I=0;for(let C=void 0!==l?65535&s[Vi]:0;C<y;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=l&&I>=l)break}else o[C]<0&&(s[Vi]+=65536),(I<f||-1==f)&&(Sh(s,u,o,C),s[Vi]=(4294901760&s[Vi])+C+2),C++}function Co(s,o){rs(4,s,o);const u=ni(null);try{o.call(s)}finally{ni(u),rs(5,s,o)}}function Sh(s,o,u,l){const d=u[l]<0,f=u[l+1],I=s[d?-u[l]:u[l]];d?s[Ut]>>13<s[Vi]>>16&&(3&s[Ut])===o&&(s[Ut]+=8192,Co(I,f)):Co(I,f)}const Ci=-1;class Vt{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Cc(s){return s!==Ci}function Aa(s){return 32767&s}function bc(s,o){let u=function Rh(s){return s>>16}(s),l=o;for(;u>0;)l=l[Ui],u--;return l}let Nh=!0;function Eu(s){const o=Nh;return Nh=s,o}const Up=255,Ph=5;let p_=0;const J={};function rr(s,o){const u=Mr(s,o);if(-1!==u)return u;const l=o[Qe];l.firstCreatePass&&(s.injectorIndex=o.length,k(l.data,s),k(o,null),k(l.blueprint,null));const d=bo(s,o),f=s.injectorIndex;if(Cc(d)){const y=Aa(d),I=bc(d,o),C=I[Qe].data;for(let A=0;A<8;A++)o[f+A]=I[y+A]|C[y+A]}return o[f+8]=d,f}function k(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Mr(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function bo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=Pc(d),null===l)return Ci;if(u++,d=d[Ui],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return Ci}function Xo(s,o,u){!function on(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(tu)&&(l=u[tu]),null==l&&(l=u[tu]=p_++);const d=l&Up;o.data[s+(d>>Ph)]|=1<<d}(s,o,u)}function On(s,o,u){if(u&Tt.Optional||void 0!==s)return s;Ge()}function Sc(s,o,u,l){if(u&Tt.Optional&&void 0===l&&(l=null),!(u&(Tt.Self|Tt.Host))){const d=s[Xs],f=Kt(void 0);try{return d?d.get(o,l,u&Tt.Optional):tr(o,l,u&Tt.Optional)}finally{Kt(f)}}return On(l,0,u)}function Do(s,o,u,l=Tt.Default,d){if(null!==s){if(2048&o[Ut]&&!(l&Tt.Self)){const y=function Nc(s,o,u,l,d){let f=s,y=o;for(;null!==f&&null!==y&&2048&y[Ut]&&!(512&y[Ut]);){const I=So(f,y,u,l|Tt.Self,J);if(I!==J)return I;let C=f.parent;if(!C){const A=y[ic];if(A){const P=A.get(u,J,l);if(P!==J)return P}C=Pc(y),y=y[Ui]}f=C}return d}(s,o,u,l,J);if(y!==J)return y}const f=So(s,o,u,l,J);if(f!==J)return f}return Sc(o,u,l,d)}function So(s,o,u,l,d){const f=function Ac(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(tu)?s[tu]:void 0;return"number"==typeof o?o>=0?o&Up:Fs:o}(u);if("function"==typeof f){if(!Kl(o,s,l))return l&Tt.Host?On(d,0,l):Sc(o,u,l,d);try{let y;if(y=f(l),null!=y||l&Tt.Optional)return y;Ge()}finally{Dn()}}else if("number"==typeof f){let y=null,I=Mr(s,o),C=Ci,A=l&Tt.Host?o[Tr][li]:null;for((-1===I||l&Tt.SkipSelf)&&(C=-1===I?bo(s,o):o[I+8],C!==Ci&&Jo(l,!1)?(y=o[Qe],I=Aa(C),o=bc(C,o)):I=-1);-1!==I;){const P=o[Qe];if(xh(f,I,P.data)){const j=g_(I,o,u,y,l,A);if(j!==J)return j}C=o[I+8],C!==Ci&&Jo(l,o[Qe].data[I+8]===A)&&xh(f,I,o)?(y=P,I=Aa(C),o=bc(C,o)):I=-1}}return d}function g_(s,o,u,l,d,f){const y=o[Qe],I=y.data[s+8],P=Yl(I,y,u,null==l?Js(I)&&Nh:l!=y&&0!=(3&I.type),d&Tt.Host&&f===I);return null!==P?Ra(o,y,P,I):J}function Yl(s,o,u,l,d){const f=s.providerIndexes,y=o.data,I=1048575&f,C=s.directiveStart,P=f>>20,Z=d?I+P:s.directiveEnd;for(let ie=l?I:I+P;ie<Z;ie++){const be=y[ie];if(ie<C&&u===be||ie>=C&&be.type===u)return ie}if(d){const ie=y[C];if(ie&&Ti(ie)&&ie.type===u)return C}return null}function Ra(s,o,u,l){let d=s[u];const f=o.data;if(function Ah(s){return s instanceof Vt}(d)){const y=d;y.resolving&&function Ue(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new oe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():de(s)}(f[u]));const I=Eu(y.canSeeViewProviders);y.resolving=!0;const A=y.injectImpl?Kt(y.injectImpl):null;Kl(s,l,Tt.Default);try{d=s[u]=y.factory(void 0,f,s,l),o.firstCreatePass&&u>=l.directiveStart&&function fi(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=pu(o);(u.preOrderHooks??=[]).push(s,y),(u.preOrderCheckHooks??=[]).push(s,y)}d&&(u.preOrderHooks??=[]).push(0-s,d),f&&((u.preOrderHooks??=[]).push(s,f),(u.preOrderCheckHooks??=[]).push(s,f))}(u,f[u],o)}finally{null!==A&&Kt(A),Eu(I),y.resolving=!1,Dn()}}return d}function xh(s,o,u){return!!(u[o+(s>>Ph)]&1<<s)}function Jo(s,o){return!(s&Tt.Self||s&Tt.Host&&o)}class un{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return Do(this._tNode,this._lView,o,gn(l),u)}}function Fs(){return new un(Hr(),Me())}function Rc(s){return Ks(()=>{const o=s.prototype.constructor,u=o[Zs]||ys(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const f=d[Zs]||ys(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function ys(s){return Ye(s)?()=>{const o=ys(Oe(s));return o&&o()}:eo(s)}function Pc(s){const o=s[Qe],u=o.type;return 2===u?o.declTNode:1===u?s[li]:null}function Na(s){return function Dc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const f=u[d];if(Ys(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(Hr(),s)}const xa="__parameters__";function R(s,o,u){return Ks(()=>{const l=function D(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return I.annotation=y,I;function I(C,A,P){const j=C.hasOwnProperty(xa)?C[xa]:Object.defineProperty(C,xa,{value:[]})[xa];for(;j.length<=P;)j.push(null);return(j[P]=j[P]||[]).push(y),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function na(s,o){s.forEach(u=>Array.isArray(u)?na(u,o):o(u))}function Bp(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ka(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const he=bn(R("Optional"),8),rt=bn(R("SkipSelf"),4);function T_(s){return 128==(128&s.flags)}var Lh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Lh||{});const Zp=new Map;let Yp=0;const xI="__ngContext__";function zi(s,o){ei(o)?(s[xI]=o[yo],function RI(s){Zp.set(s[yo],s)}(o)):s[xI]=o}let Xp;function Jp(s,o){return Xp(s,o)}function eg(s){const o=s[Mn];return ti(o)?o[Mn]:o}function OC(s){return OI(s[ds])}function MI(s){return OI(s[Fi])}function OI(s){for(;null!==s&&!ti(s);)s=s[Fi];return s}function Fh(s,o,u,l,d){if(null!=l){let f,y=!1;ti(l)?f=l:ei(l)&&(y=!0,l=l[Jn]);const I=En(l);0===s&&null!==u?null==d?VI(o,u,I):Oa(o,u,I,d||null,!0):1===s&&null!==u?Oa(o,u,I,d||null,!0):2===s?function N_(s,o,u){const l=ng(s,o);l&&function BI(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,I,y):3===s&&o.destroyNode(I),null!=f&&function GC(s,o,u,l,d){const f=u[$r];f!==En(u)&&Fh(o,s,l,f,d);for(let I=Cr;I<u.length;I++){const C=u[I];Wi(C[Qe],C,s,o,l,f)}}(o,s,f,u,d)}}function S_(s,o,u){return s.createElement(o,u)}function Vh(s,o){const u=s[vo],l=u.indexOf(o);a_(o),u.splice(l,1)}function gi(s,o){if(s.length<=Cr)return;const u=Cr+o,l=s[u];if(l){const d=l[Ia];null!==d&&d!==s&&Vh(d,l),o>0&&(s[u-1][Fi]=l[Fi]);const f=ka(s,Cr+o);!function AN(s,o){Wi(s,o,o[Rt],2,null,null),o[Jn]=null,o[li]=null}(l[Qe],l);const y=f[di];null!==y&&y.detachView(f[Qe]),l[Mn]=null,l[Fi]=null,l[Ut]&=-129}return l}function LI(s,o){if(!(256&o[Ut])){const u=o[Rt];o[sc]&&cu(o[sc]),o[Bi]&&cu(o[Bi]),u.destroyNode&&Wi(s,o,u,3,null,null),function FC(s){let o=s[ds];if(!o)return FI(s[Qe],s);for(;o;){let u=null;if(ei(o))u=o[ds];else{const l=o[Cr];l&&(u=l)}if(!u){for(;o&&!o[Fi]&&o!==s;)ei(o)&&FI(o[Qe],o),o=o[Mn];null===o&&(o=s),ei(o)&&FI(o[Qe],o),u=o&&o[Fi]}o=u}}(o)}}function FI(s,o){if(!(256&o[Ut])){o[Ut]&=-129,o[Ut]|=256,function PN(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof Vt)){const f=u[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const I=d[f[y]],C=f[y+1];rs(4,I,C);try{C.call(I)}finally{rs(5,I,C)}}else{rs(4,d,f);try{f.call(d)}finally{rs(5,d,f)}}}}}(s,o),function NN(s,o){const u=s.cleanup,l=o[$o];if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+3];y>=0?l[y]():l[-y].unsubscribe(),f+=2}else u[f].call(l[u[f+1]]);null!==l&&(o[$o]=null);const d=o[Ho];if(null!==d){o[Ho]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(s,o),1===o[Qe].type&&o[Rt].destroy();const u=o[Ia];if(null!==u&&ti(o[Mn])){u!==o[Mn]&&Vh(u,o);const l=o[di];null!==l&&l.detachView(s)}!function EN(s){Zp.delete(s[yo])}(o)}}function UI(s,o,u){return function VC(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[Jn];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=s.data[l.directiveStart+d];if(f===As.None||f===As.Emulated)return null}return hi(l,u)}}(s,o.parent,u)}function Oa(s,o,u,l,d){s.insertBefore(o,u,l,d)}function VI(s,o,u){s.appendChild(o,u)}function A_(s,o,u,l,d){null!==l?Oa(s,o,u,l,d):VI(s,o,u)}function ng(s,o){return s.parentNode(o)}let $I,ZI,k_,rg=function BC(s,o,u){return 40&s.type?hi(s,u):null};function R_(s,o,u,l){const d=UI(s,l,o),f=o[Rt],I=function jI(s,o,u){return rg(s,o,u)}(l.parent||o[li],l,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)A_(f,d,u[C],I,!1);else A_(f,d,u,I,!1);void 0!==$I&&$I(f,l,o,u,d)}function ig(s,o){if(null!==o){const u=o.type;if(3&u)return hi(o,s);if(4&u)return HI(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return ig(s,l);{const d=s[o.index];return ti(d)?HI(-1,d):En(d)}}if(32&u)return Jp(o,s)()||En(s[o.index]);{const l=$C(s,o);return null!==l?Array.isArray(l)?l[0]:ig(eg(s[Tr]),l):ig(s,o.next)}}return null}function $C(s,o){return null!==o?s[Tr][li].projection[o.projection]:null}function HI(s,o){const u=Cr+s+1;if(u<o.length){const l=o[u],d=l[Qe].firstChild;if(null!==d)return ig(l,d)}return o[$r]}function GI(s,o,u,l,d,f,y){for(;null!=u;){const I=l[u.index],C=u.type;if(y&&0===o&&(I&&zi(En(I),l),u.flags|=2),32!=(32&u.flags))if(8&C)GI(s,o,u.child,l,d,f,!1),Fh(o,s,d,I,f);else if(32&C){const A=Jp(u,l);let P;for(;P=A();)Fh(o,s,d,P,f);Fh(o,s,d,I,f)}else 16&C?P_(s,o,l,u,d,f):Fh(o,s,d,I,f);u=y?u.projectionNext:u.next}}function Wi(s,o,u,l,d,f){GI(u,l,s.firstChild,o,d,f,!1)}function P_(s,o,u,l,d,f){const y=u[Tr],C=y[li].projection[l.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Fh(o,s,d,C[A],f);else{let A=C;const P=y[Mn];T_(l)&&(A.flags|=128),GI(s,o,A,P,d,f,!0)}}function WI(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function WC(s,o,u){const{mergedAttrs:l,classes:d,styles:f}=u;null!==l&&ga(s,o,l),null!==d&&WI(s,o,d),null!==f&&function zC(s,o,u){s.setAttribute(o,"style",u)}(s,o,f)}function Es(s){ZI=s}function YI(s){return function ed(){if(void 0===k_&&(k_=null,$t.trustedTypes))try{k_=$t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return k_}()?.createScriptURL(s)||s}class YC{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ht})`}}function qi(s){return s instanceof YC?s.changingThisBreaksApplicationSecurity:s}function Vs(s,o){const u=function M_(s){return s instanceof YC&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ht})`)}return u===o}const VN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ao=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Ao||{});function U_(s){const o=ag();return o?o.sanitize(Ao.URL,s)||"":Vs(s,"URL")?qi(s):function XI(s){return(s=String(s)).match(VN)?s:"unsafe:"+s}(de(s))}function ob(s){const o=ag();if(o)return YI(o.sanitize(Ao.RESOURCE_URL,s)||"");if(Vs(s,"ResourceURL"))return YI(qi(s));throw new oe(904,!1)}function nE(s,o,u){return function tE(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?ob:U_}(o,u)(s)}function ag(){const s=Me();return s&&s[_o].sanitizer}class Pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=gt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $h=new Pn("ENVIRONMENT_INITIALIZER"),ub=new Pn("INJECTOR",-1),cb=new Pn("INJECTOR_DEF_TYPES");class V_{get(o,u=Be){if(u===Be){const l=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw l.name="NullInjectorError",l}return u}}function db(...s){return{\u0275providers:hb(0,s),\u0275fromNgModule:!0}}function hb(s,...o){const u=[],l=new Set;let d;const f=y=>{u.push(y)};return na(o,y=>{const I=y;ug(I,f,[],l)&&(d||=[],d.push(I))}),void 0!==d&&B_(d,f),u}function B_(s,o){for(let u=0;u<s.length;u++){const{ngModule:l,providers:d}=s[u];j_(d,f=>{o(f,l)})}}function ug(s,o,u,l){if(!(s=Oe(s)))return!1;let d=null,f=lr(s);const y=!f&&Xt(s);if(f||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(f=lr(C),!f)return!1;d=C}const I=l.has(d);if(y){if(I)return!1;if(l.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)ug(A,o,u,l)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let A;l.add(d);try{na(f.imports,P=>{ug(P,o,u,l)&&(A||=[],A.push(P))})}finally{}void 0!==A&&B_(A,o)}if(!I){const A=eo(d)||(()=>new d);o({provide:d,useFactory:A,deps:rn},d),o({provide:cb,useValue:d,multi:!0},d),o({provide:$h,useValue:()=>qe(d),multi:!0},d)}const C=f.providers;if(null!=C&&!I){const A=s;j_(C,P=>{o(P,A)})}}}return d!==s&&void 0!==s.providers}function j_(s,o){for(let u of s)ke(u)&&(u=u.\u0275providers),Array.isArray(u)?j_(u,o):o(u)}const mL=H({provide:String,useValue:H});function fb(s){return null!==s&&"object"==typeof s&&mL in s}function nd(s){return"function"==typeof s}const iE=new Pn("Set Injector scope."),$_={},pb={};let sE;function Hh(){return void 0===sE&&(sE=new V_),sE}class Fa{}class cg extends Fa{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ia(o,y=>this.processProvider(y)),this.records.set(ub,Gh(void 0,this)),d.has("environment")&&this.records.set(Fa,Gh(void 0,this));const f=this.records.get(iE);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(cb.multi,rn,Tt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=ne(this),l=Kt(void 0);try{return o()}finally{ne(u),Kt(l)}}get(o,u=Be,l=Tt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(pa))return o[pa](this);l=gn(l);const f=ne(this),y=Kt(void 0);try{if(!(l&Tt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const A=function _b(s){return"function"==typeof s||"object"==typeof s&&s instanceof Pn}(o)&&Cn(o);C=A&&this.injectableDefInScope(A)?Gh(H_(o),$_):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(l&Tt.Self?Hh():this.parent).get(o,u=l&Tt.Optional&&u===Be?null:u)}catch(I){if("NullInjectorError"===I.name){if((I[mt]=I[mt]||[]).unshift(se(o)),f)throw I;return function Ii(s,o,u,l){const d=s[mt];throw o[U]&&d.unshift(o[U]),s.message=function Vo(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=se(o);if(Array.isArray(o))d=o.map(se).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];f.push(y+":"+("string"==typeof I?JSON.stringify(I):se(I)))}d=`{${f.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(W,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[mt]=null,s}(I,o,"R3InjectorError",this.source)}throw I}finally{Kt(y),ne(f)}}resolveInjectorInitializers(){const o=ne(this),u=Kt(void 0);try{const d=this.get($h.multi,rn,Tt.Self);for(const f of d)f()}finally{ne(o),Kt(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(se(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(o){let u=nd(o=Oe(o))?o:Oe(o&&o.provide);const l=function yL(s){return fb(s)?Gh(void 0,s.useValue):Gh(function gb(s,o,u){let l;if(nd(s)){const d=Oe(s);return eo(d)||H_(d)}if(fb(s))l=()=>Oe(s.useValue);else if(function rE(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Lt(s.deps||[]));else if(function ZN(s){return!(!s||!s.useExisting)}(s))l=()=>qe(Oe(s.useExisting));else{const d=Oe(s&&(s.useClass||s.provide));if(!function G_(s){return!!s.deps}(s))return eo(d)||H_(d);l=()=>new d(...Lt(s.deps))}return l}(s),$_)}(o);if(nd(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Gh(void 0,$_,!0),d.factory=()=>Lt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===$_&&(u.value=pb,u.value=u.factory()),"object"==typeof u.value&&u.value&&function mb(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Oe(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function H_(s){const o=Cn(s),u=null!==o?o.factory:eo(s);if(null!==u)return u;if(s instanceof Pn)throw new oe(204,!1);if(s instanceof Function)return function _L(s){const o=s.length;if(o>0)throw function Ma(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new oe(204,!1);const u=function ui(s){return s&&(s[Un]||s[Vr])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new oe(204,!1)}function Gh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function ia(s,o){for(const u of s)Array.isArray(u)?ia(u,o):u&&ke(u)?ia(u.\u0275providers,o):o(u)}const oE=new Pn("AppId",{providedIn:"root",factory:()=>yb}),yb="ng",vb=new Pn("Platform Initializer"),aE=new Pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),QN=new Pn("CSP nonce",{providedIn:"root",factory:()=>function Cu(){if(void 0!==ZI)return ZI;if(typeof document<"u")return document;throw new oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let tP=(s,o,u)=>null;function fE(s,o,u=!1){return tP(s,o,u)}class os{}class hg{}class bb{resolveComponentFactory(o){throw function Si(s){const o=Error(`No component factory found for ${se(s)}.`);return o.ngComponent=s,o}(o)}}let qh=(()=>{class s{static#e=this.NULL=new bb}return s})();function Db(){return zr(Hr(),Me())}function zr(s,o){return new fg(hi(s,o))}let fg=(()=>{class s{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=Db}return s})();function pg(s){return s instanceof fg?s.nativeElement:s}class gg{}let Va=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function yE(){const s=Me(),u=ri(Hr().index,s);return(ei(u)?u:s)[Rt]}()}return s})(),nP=(()=>{class s{static#e=this.\u0275prov=gt({token:s,providedIn:"root",factory:()=>null})}return s})();class Sb{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const sd=new Sb("16.2.8"),K_={};function Kh(s,o=null,u=null,l){const d=xb(s,o,u,l);return d.resolveInjectorInitializers(),d}function xb(s,o=null,u=null,l,d=new Set){const f=[u||rn,db(s)];return l=l||("object"==typeof s?void 0:se(s)),new cg(f,o||Hh(),l||null,d)}let ws=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=Be;static#t=this.NULL=new V_;static create(u,l){if(Array.isArray(u))return Kh({name:""},l,u,"");{const d=u.name??"";return Kh({name:d},u.parent,u.providers,d)}}static#n=this.\u0275prov=gt({token:s,providedIn:"any",factory:()=>qe(ub)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function Zh(s){return s.ngOriginalError}class Ba{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Zh(o);for(;u&&Zh(u);)u=Zh(u);return u||null}}function Yh(s){return o=>{setTimeout(s,void 0,o)}}const No=class Ob extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,f=u||(()=>null),y=l;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=Yh(f),d&&(d=Yh(d)),y&&(y=Yh(y)));const I=super.subscribe({next:d,error:f,complete:y});return o instanceof G.w0&&o.add(I),I}};function X_(...s){}class mi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new No(!1),this.onMicrotaskEmpty=new No(!1),this.onStable=new No(!1),this.onError=new No(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function TE(){const s="function"==typeof $t.requestAnimationFrame;let o=$t[s?"requestAnimationFrame":"setTimeout"],u=$t[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function Vb(s){const o=()=>{!function Ub(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,mg(s),s.isCheckStableRunning=!0,CE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),mg(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,f,y,I)=>{if(function Ai(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(I))return u.invokeTask(d,f,y,I);try{return bE(s),u.invokeTask(d,f,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),Bb(s)}},onInvoke:(u,l,d,f,y,I,C)=>{try{return bE(s),u.invoke(d,f,y,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Bb(s)}},onHasTask:(u,l,d,f)=>{u.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,mg(s),CE(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,l,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mi.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(mi.isInAngularZone())throw new oe(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,Fb,X_,X_);try{return f.runTask(y,u,l)}finally{f.cancelTask(y)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const Fb={};function CE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function mg(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function bE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Bb(s){s._nesting--,CE(s)}class DE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new No,this.onMicrotaskEmpty=new No,this.onStable=new No,this.onError=new No}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const J_=new Pn("",{providedIn:"root",factory:ey});function ey(){const s=ot(mi);let o=!0;const u=new O.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new O.y(d=>{let f;s.runOutsideAngular(()=>{f=s.onStable.subscribe(()=>{mi.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=s.onUnstable.subscribe(()=>{mi.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ee.T)(u,l.pipe((0,Ee.B)()))}function Du(s){return s instanceof Function?s():s}let od=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=gt({token:s,providedIn:"root",factory:()=>new s})}return s})();function Su(s){for(;s;){s[Ut]|=64;const o=eg(s);if(zo(s)&&!o)return s;s=o}return null}const Gb=new Pn("",{providedIn:"root",factory:()=>!1});let Au=null;function Zb(s,o){return s[o]??NE()}function Vc(s,o){const u=NE();u.producerNode?.length&&(s[o]=Au,u.lView=s,Au=yg())}const Yb={...au,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{Su(s.lView)},lView:null};function yg(){return Object.create(Yb)}function NE(){return Au??=yg(),Au}const Ft={};function PE(s){as(sn(),Me(),vt()+s,!1)}function as(s,o,u,l){if(!l)if(3==(3&o[Ut])){const f=s.preOrderCheckHooks;null!==f&&Tc(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Sa(o,f,0,u)}ms(u)}function ad(s,o=Tt.Default){const u=Me();return null===u?qe(s,o):Do(Hr(),u,Oe(s),o)}function ef(){throw new Error("invalid")}function vg(s,o,u,l,d,f,y,I,C,A,P){const j=o.blueprint.slice();return j[Jn]=d,j[Ut]=140|l,(null!==A||s&&2048&s[Ut])&&(j[Ut]|=2048),Mp(j),j[Mn]=j[Ui]=s,j[nr]=u,j[_o]=y||s&&s[_o],j[Rt]=I||s&&s[Rt],j[Xs]=C||s&&s[Xs]||null,j[li]=f,j[yo]=function IN(){return Yp++}(),j[hs]=P,j[ic]=A,j[Tr]=2==o.type?s[Tr]:j,j}function Bc(s,o,u,l,d){let f=s.data[o];if(null===f)f=function oy(s,o,u,l,d){const f=vc(),y=wh(),C=s.data[o]=function eD(s,o,u,l,d,f){let y=o?o.injectorIndex:-1,I=0;return function wo(){return null!==Pt.skipHydrationRootTNode}()&&(I|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(s,o,u,l,d),function c_(){return Pt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=u,f.value=l,f.attrs=d;const y=function yu(){const s=Pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ps(f,!0),f}function tf(s,o,u,l){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function nf(s,o,u,l,d){const f=Zb(o,sc),y=vt(),I=2&l;try{ms(-1),I&&o.length>Zt&&as(s,o,Zt,!1),rs(I?2:0,d);const A=I?f:null,P=uh(A);try{null!==A&&(A.dirty=!1),u(l,d)}finally{pr(A,P)}}finally{I&&null===o[sc]&&Vc(o,sc),ms(y),rs(I?3:1,d)}}function Ig(s,o,u){if(Rl(o)){const l=ni(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const I=s.data[y];I.contentQueries&&I.contentQueries(1,u[y],y)}}finally{ni(l)}}}function Eg(s,o,u){gr()&&(function ld(s,o,u,l){const d=u.directiveStart,f=u.directiveEnd;Js(u)&&function cP(s,o,u){const l=hi(o,s),d=Tg(u);let y=16;u.signals?y=4096:u.onPush&&(y=64);const I=Sg(s,vg(s,d,null,y,l,o,null,s[_o].rendererFactory.createRenderer(l,u),null,null,null));s[o.index]=I}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||rr(u,o),zi(l,o);const y=u.initialInputs;for(let I=d;I<f;I++){const C=s.data[I],A=Ra(o,s,I,u);zi(A,o),null!==y&&lP(0,I-d,A,C,0,y),Ti(C)&&(ri(u.index,o)[nr]=Ra(o,s,I,u))}}(s,o,u,hi(u,o)),64==(64&u.flags)&&ja(s,o,u))}function wg(s,o,u=hi){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],I=-1===y?u(o,s):s[y];s[d++]=I}}}function Tg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ud(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function ud(s,o,u,l,d,f,y,I,C,A,P){const j=Zt+l,Z=j+d,ie=function Qb(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Ft);return u}(j,Z),be="function"==typeof A?A():A;return ie[Qe]={type:s,blueprint:ie,template:u,queries:null,viewQuery:I,declTNode:o,data:ie.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:be,incompleteFirstPass:!1,ssrId:P}}let Cg=s=>null;function tD(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const f=s[d];null===l?rf(u,o,d,f):l.hasOwnProperty(d)&&rf(u,o,l[d],f)}return u}function rf(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function Yi(s,o,u,l,d,f,y,I){const C=hi(o,u);let P,A=o.inputs;!I&&null!=A&&(P=A[l])?(VE(s,u,P,l,d),Js(o)&&function cd(s,o){const u=ri(o,s);16&u[Ut]||(u[Ut]|=64)}(u,o.index)):3&o.type&&(l=function ay(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,f.setProperty(C,l,d))}function OE(s,o,u,l){if(gr()){const d=null===l?null:{"":-1},f=function cy(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let f=0;f<u.length;f++){const y=u[f];if(Xu(o,y.selectors,!1))if(l||(l=[]),Ti(y))if(null!==y.findHostDirectiveDefs){const I=[];d=d||new Map,y.findHostDirectiveDefs(y,I,d),l.unshift(...I,y),ly(s,o,I.length)}else l.unshift(y),ly(s,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(s,u);let y,I;null===f?y=I=null:[y,I]=f,null!==y&&LE(s,o,u,y,d,I),d&&function ir(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new oe(-301,!1);l.push(o[d],f)}}}(u,l,d)}u.mergedAttrs=nu(u.mergedAttrs,u.attrs)}function LE(s,o,u,l,d,f){for(let A=0;A<l.length;A++)Xo(rr(u,o),s,l[A].type);!function bg(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let A=0;A<l.length;A++){const P=l[A];P.providersResolver&&P.providersResolver(P)}let y=!1,I=!1,C=tf(s,o,l.length,null);for(let A=0;A<l.length;A++){const P=l[A];u.mergedAttrs=nu(u.mergedAttrs,P.hostAttrs),Dg(s,u,o,C,P),dy(C,P,d),null!==P.contentQueries&&(u.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=64);const j=P.type.prototype;!y&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),y=!0),!I&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),I=!0),C++}!function nD(s,o,u){const d=o.directiveEnd,f=s.data,y=o.attrs,I=[];let C=null,A=null;for(let P=o.directiveStart;P<d;P++){const j=f[P],Z=u?u.get(j):null,be=Z?Z.outputs:null;C=tD(j.inputs,P,C,Z?Z.inputs:null),A=tD(j.outputs,P,A,be);const He=null===C||null===y||ma(o)?null:dP(C,P,y);I.push(He)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=A}(s,u,f)}function ja(s,o,u){const l=u.directiveStart,d=u.directiveEnd,f=u.index,y=function l_(){return Pt.lFrame.currentDirectiveIndex}();try{ms(f);for(let I=l;I<d;I++){const C=s.data[I],A=o[I];Ec(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&uy(C,A)}}finally{ms(-1),Ec(y)}}function uy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ly(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function dy(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Ti(o)&&(u[""]=s)}}function Dg(s,o,u,l,d){s.data[l]=d;const f=d.factory||(d.factory=eo(d.type)),y=new Vt(f,Ti(d),ad);s.blueprint[l]=y,u[l]=y,function rD(s,o,u,l,d){const f=d.hostBindings;if(f){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const I=~o.index;(function uP(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=I&&y.push(I),y.push(u,l,f)}}(s,o,l,tf(s,u,d.hostVars,Ft),d)}function sa(s,o,u,l,d,f){const y=hi(s,o);!function FE(s,o,u,l,d,f,y){if(null==f)s.removeAttribute(o,d,u);else{const I=null==y?de(f):y(f,l||"",d);s.setAttribute(o,d,I,u)}}(o[Rt],y,f,s.value,u,l,d)}function lP(s,o,u,l,d,f){const y=f[o];if(null!==y)for(let I=0;I<y.length;)iD(l,u,y[I++],y[I++],y[I++])}function iD(s,o,u,l,d){const f=ni(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(d=y[l].call(o,d)),null!==s.setInput?s.setInput(o,d,u,l):o[l]=d}finally{ni(f)}}function dP(s,o,u){let l=null,d=0;for(;d<u.length;){const f=u[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(s.hasOwnProperty(f)){null===l&&(l=[]);const y=s[f];for(let I=0;I<y.length;I+=2)if(y[I]===o){l.push(f,y[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function sf(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null,null]}function Ru(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const f=u[l+1];if(-1!==f){const y=s.data[f];bh(u[l]),y.contentQueries(2,o[f],f)}}}function Sg(s,o){return s[ds]?s[Ep][Fi]=o:s[ds]=o,s[Ep]=o,o}function hy(s,o,u){bh(0);const l=ni(null);try{o(s,u)}finally{ni(l)}}function dd(s){return s[$o]||(s[$o]=[])}function sD(s){return s.cleanup||(s.cleanup=[])}function UE(s,o){const u=s[Xs],l=u?u.get(Ba,null):null;l&&l.handleError(o)}function VE(s,o,u,l,d){for(let f=0;f<u.length;){const y=u[f++],I=u[f++];iD(s.data[y],o[y],l,I,d)}}function $a(s,o,u){const l=function Ns(s,o){return En(o[s])}(o,s);!function LC(s,o,u){s.setValue(o,u)}(s[Rt],l,u)}function aD(s,o){const u=ri(o,s),l=u[Qe];!function BE(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(l,u);const d=u[Jn];null!==d&&null===u[hs]&&(u[hs]=fE(d,u[Xs])),Ag(l,u,u[nr])}function Ag(s,o,u){Wn(o);try{const l=s.viewQuery;null!==l&&hy(1,l,u);const d=s.template;null!==d&&nf(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ru(s,o),s.staticViewQueries&&hy(2,s.viewQuery,u);const f=s.components;null!==f&&function uD(s,o){for(let u=0;u<o.length;u++)aD(s,o[u])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Ut]&=-5,to()}}let jE=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,l,d){const f=typeof Zone>"u"?null:Zone.current,y=function xp(s,o,u){const l=Object.create(i_);u&&(l.consumerAllowSignalWrites=!0),l.fn=s,l.schedule=o;const d=y=>{l.cleanupFn=y};return l.ref={notify:()=>Ml(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Rp(l))return;l.hasRun=!0;const y=uh(l);try{l.cleanupFn(),l.cleanupFn=Ul,l.fn(d)}finally{pr(l,y)}},cleanup:()=>l.cleanupFn()},l.ref}(u,A=>{this.all.has(A)&&this.queue.set(A,f)},d);let I;this.all.add(y),y.notify();const C=()=>{y.cleanup(),I?.(),this.all.delete(y),this.queue.delete(y)};return I=l?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=gt({token:s,providedIn:"root",factory:()=>new s})}return s})();function fy(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?f=I:1==f?d=Ve(d,I):2==f&&(l=Ve(l,I+": "+o[++y]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function Rg(s,o,u,l,d=!1){for(;null!==u;){const f=o[u.index];null!==f&&l.push(En(f)),ti(f)&&cD(f,l);const y=u.type;if(8&y)Rg(s,o,u.child,l);else if(32&y){const I=Jp(u,o);let C;for(;C=I();)l.push(C)}else if(16&y){const I=$C(o,u);if(Array.isArray(I))l.push(...I);else{const C=eg(o[Tr]);Rg(C[Qe],C,I,l,!0)}}u=d?u.projectionNext:u.next}return l}function cD(s,o){for(let u=Cr;u<s.length;u++){const l=s[u],d=l[Qe].firstChild;null!==d&&Rg(l[Qe],l,d,o)}s[$r]!==s[Jn]&&o.push(s[$r])}function hd(s,o,u,l=!0){const d=o[_o],f=d.rendererFactory,y=d.afterRenderEventManager;f.begin?.(),y?.begin();try{my(s,o,s.template,u)}catch(C){throw l&&UE(o,C),C}finally{f.end?.(),d.effectManager?.flush(),y?.end()}}function my(s,o,u,l){const d=o[Ut];if(256!=(256&d)){o[_o].effectManager?.flush(),Wn(o);try{Mp(o),function Th(s){return Pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&nf(s,o,u,2,l);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&Tc(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Sa(o,A,0,null),Qo(o,0)}if(function Ng(s){for(let o=OC(s);null!==o;o=MI(o)){if(!o[Ea])continue;const u=o[vo];for(let l=0;l<u.length;l++){Zo(u[l])}}}(o),$E(o,2),null!==s.contentQueries&&Ru(s,o),y){const A=s.contentCheckHooks;null!==A&&Tc(o,A)}else{const A=s.contentHooks;null!==A&&Sa(o,A,1),Qo(o,1)}!function sy(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const l=Zb(o,Bi);try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)ms(~f);else{const y=f,I=u[++d],C=u[++d];Ic(I,y),l.dirty=!1;const A=uh(l);try{C(2,o[y])}finally{pr(l,A)}}}}finally{null===o[Bi]&&Vc(o,Bi),ms(-1)}}(s,o);const I=s.components;null!==I&&Rr(o,I,0);const C=s.viewQuery;if(null!==C&&hy(2,C,l),y){const A=s.viewCheckHooks;null!==A&&Tc(o,A)}else{const A=s.viewHooks;null!==A&&Sa(o,A,2),Qo(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Ut]&=-73,a_(o)}finally{to()}}}function $E(s,o){for(let u=OC(s);null!==u;u=MI(u))for(let l=Cr;l<u.length;l++)lD(u[l],o)}function Pg(s,o,u){lD(ri(o,s),u)}function lD(s,o){if(!function yh(s){return 128==(128&s[Ut])}(s))return;const u=s[Qe],l=s[Ut];if(80&l&&0===o||1024&l||2===o)my(u,s,u.template,s[nr]);else if(s[Qs]>0){$E(s,1);const d=u.components;null!==d&&Rr(s,d,1)}}function Rr(s,o,u){for(let l=0;l<o.length;l++)Pg(s,o[l],u)}class af{get rootNodes(){const o=this._lView,u=o[Qe];return Rg(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nr]}set context(o){this._lView[nr]=o}get destroyed(){return 256==(256&this._lView[Ut])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Mn];if(ti(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(gi(o,l),ka(u,l))}this._attachedToViewContainer=!1}LI(this._lView[Qe],this._lView)}onDestroy(o){!function ba(s,o){if(256==(256&s[Ut]))throw new oe(911,!1);null===s[Ho]&&(s[Ho]=[]),s[Ho].push(o)}(this._lView,o)}markForCheck(){Su(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ut]&=-129}reattach(){this._lView[Ut]|=128}detectChanges(){hd(this._lView[Qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uh(s,o){Wi(s,o,o[Rt],2,null,null)}(this._lView[Qe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=o}}class pP extends af{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;hd(o[Qe],o,o[nr],!1)}checkNoChanges(){}get context(){return null}}class dD extends qh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Xt(o);return new uf(u,this.ngModule)}}function hD(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class pD{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=gn(l);const d=this.injector.get(o,K_,l);return d!==K_||u===K_?d:this.parentInjector.get(o,u,l)}}class uf extends hg{get inputs(){const o=this.componentDef,u=o.inputTransforms,l=hD(o.inputs);if(null!==u)for(const d of l)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return l}get outputs(){return hD(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function e_(s){return s.map(wl).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let f=(d=d||this.ngModule)instanceof Fa?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new pD(o,f):o,I=y.get(gg,null);if(null===I)throw new oe(407,!1);const j={rendererFactory:I,sanitizer:y.get(nP,null),effectManager:y.get(jE,null),afterRenderEventManager:y.get(od,null)},Z=I.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",be=l?function aP(s,o,u,l){const f=l.get(Gb,!1)||u===As.ShadowDom,y=s.selectRootElement(o,f);return function xE(s){Cg(s)}(y),y}(Z,l,this.componentDef.encapsulation,y):S_(Z,ie,function fD(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(ie)),Dt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Fe=null;null!==be&&(Fe=fE(be,y,!0));const jt=ud(0,null,null,1,0,null,null,null,null,null,null),en=vg(null,jt,null,Dt,null,null,j,Z,y,null,Fe);let $n,zs;Wn(en);try{const $u=this.componentDef;let Gd,zd=null;$u.findHostDirectiveDefs?(Gd=[],zd=new Map,$u.findHostDirectiveDefs($u,Gd,zd),Gd.push($u)):Gd=[$u];const Zx=function gD(s,o){const u=s[Qe],l=Zt;return s[l]=o,Bc(u,l,2,"#host",null)}(en,be),Za=function Ha(s,o,u,l,d,f,y){const I=d[Qe];!function mD(s,o,u,l){for(const d of s)o.mergedAttrs=nu(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(fy(o,o.mergedAttrs,!0),null!==u&&WC(l,u,o))}(l,s,o,y);let C=null;null!==o&&(C=fE(o,d[Xs]));const A=f.rendererFactory.createRenderer(o,u);let P=16;u.signals?P=4096:u.onPush&&(P=64);const j=vg(d,Tg(u),null,P,d[s.index],s,f,A,null,null,C);return I.firstCreatePass&&ly(I,s,l.length-1),Sg(d,j),d[s.index]=j}(Zx,be,$u,Gd,en,j,Z);zs=Bl(jt,Zt),be&&function _D(s,o,u,l){if(l)ga(s,u,["ng-version",sd.full]);else{const{attrs:d,classes:f}=function wi(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&u.push(f);else{if(!Ei(d))break;d=f}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&ga(s,u,d),f&&f.length>0&&WI(s,u,f.join(" "))}}(Z,$u,be,l),void 0!==u&&function HE(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const f=u[d];l.push(null!=f?Array.from(f):null)}}(zs,this.ngContentSelectors,u),$n=function gP(s,o,u,l,d,f){const y=Hr(),I=d[Qe],C=hi(y,d);LE(I,d,y,u,null,l);for(let P=0;P<u.length;P++)zi(Ra(d,I,y.directiveStart+P,y),d);ja(I,d,y),C&&zi(C,d);const A=Ra(d,I,y.directiveStart+y.componentOffset,y);if(s[nr]=d[nr]=A,null!==f)for(const P of f)P(A,o);return Ig(I,y,s),A}(Za,$u,Gd,zd,en,[xg]),Ag(jt,en,null)}finally{to()}return new _y(this.componentType,$n,zr(zs,en),en,zs)}}class _y extends os{constructor(o,u,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new pP(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const f=this._rootLView;VE(f[Qe],f,d,o,u),this.previousInputValues.set(o,u),Su(ri(this._tNode.index,f))}}get injector(){return new un(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function xg(){const s=Hr();_s(Me()[Qe],s)}function jc(s){const o=s.inputConfig,u={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(u[l]=d[2])}s.inputTransforms=u}function Og(s){return!!cf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function cf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Wr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function xn(s,o,u,l){const d=Me();return Wr(d,Yo(),o)&&(sn(),sa(Kn(),d,s,o,u,l)),xn}function $c(s,o,u,l){return Wr(s,Yo(),u)?o+de(u)+l:Ft}function DD(s,o,u,l,d,f,y,I){const C=Me(),A=sn(),P=s+Zt,j=A.firstCreatePass?function PL(s,o,u,l,d,f,y,I,C){const A=o.consts,P=Bc(o,s,4,y||null,Ko(A,I));OE(o,u,P,Ko(A,C)),_s(o,P);const j=P.tView=ud(2,P,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,P),j.queries=o.queries.embeddedTView(P)),P}(P,A,C,o,u,l,d,f,y):A.data[P];Ps(j,!1);const Z=tw(A,C,j,s);ii()&&R_(A,C,Z,j),zi(Z,C),Sg(C,C[P]=sf(Z,C,Z,j)),ji(j)&&Eg(A,C,j),null!=y&&wg(C,j,I)}let tw=function Bt(s,o,u,l){return si(!0),o[Rt].createComment("")};function bt(s){return function qo(s,o){return s[o]}(function Fp(){return Pt.lFrame.contextLView}(),Zt+s)}function _d(s,o,u){const l=Me();return Wr(l,Yo(),o)&&Yi(sn(),Kn(),l,s,o,l[Rt],u,!1),_d}function mn(s,o,u,l,d){const y=d?"class":"style";VE(s,u,o.inputs[y],y,l)}function or(s,o,u,l){const d=Me(),f=sn(),y=Zt+s,I=d[Rt],C=f.firstCreatePass?function DP(s,o,u,l,d,f){const y=o.consts,C=Bc(o,s,2,l,Ko(y,d));return OE(o,u,C,Ko(y,f)),null!==C.attrs&&fy(C,C.attrs,!1),null!==C.mergedAttrs&&fy(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,f,d,o,u,l):f.data[y],A=Cy(f,d,C,I,o,s);d[y]=A;const P=ji(C);return Ps(C,!0),WC(I,A,C),32!=(32&C.flags)&&ii()&&R_(f,d,A,C),0===function yc(){return Pt.lFrame.elementDepthCount}()&&zi(A,d),function Dr(){Pt.lFrame.elementDepthCount++}(),P&&(Eg(f,d,C),Ig(f,C,d)),null!==l&&wg(d,C),or}function et(){let s=Hr();wh()?function Gl(){Pt.lFrame.isParent=!1}():(s=s.parent,Ps(s,!1));const o=s;(function Da(s){return Pt.skipHydrationRootTNode===s})(o)&&function Eh(){Pt.skipHydrationRootTNode=null}(),function Op(){Pt.lFrame.elementDepthCount--}();const u=sn();return u.firstCreatePass&&(_s(u,s),Rl(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function h_(s){return 0!=(8&s.flags)}(o)&&mn(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Zl(s){return 0!=(16&s.flags)}(o)&&mn(u,o,Me(),o.stylesWithoutHost,!1),et}function gf(s,o,u,l){return or(s,o,u,l),et(),gf}let Cy=(s,o,u,l,d,f)=>(si(!0),S_(l,d,function kr(){return Pt.lFrame.currentNamespace}()));function ow(){return Me()}function Dy(s){return!!s&&"function"==typeof s.then}function Nu(s){return!!s&&"function"==typeof s.subscribe}function jg(s,o,u,l){const d=Me(),f=sn(),y=Hr();return function xo(s,o,u,l,d,f,y){const I=ji(l),A=s.firstCreatePass&&sD(s),P=o[nr],j=dd(o);let Z=!0;if(3&l.type||y){const He=hi(l,o),st=y?y(He):He,Dt=j.length,Fe=y?en=>y(En(en[l.index])):l.index;let jt=null;if(!y&&I&&(jt=function Sy(s,o,u,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===l){const I=o[$o],C=d[f+2];return I.length>C?I[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,l.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=f,jt.__ngLastListenerFn__=f,Z=!1;else{f=mf(l,o,P,f,!1);const en=u.listen(st,d,f);j.push(f,en),A&&A.push(d,Fe,Dt,Dt+1)}}else f=mf(l,o,P,f,!1);const ie=l.outputs;let be;if(Z&&null!==ie&&(be=ie[d])){const He=be.length;if(He)for(let st=0;st<He;st+=2){const $n=o[be[st]][be[st+1]].subscribe(f),zs=j.length;j.push(f,$n),A&&A.push(d,l.index,zs,-(zs+1))}}}(f,d,d[Rt],y,s,o,l),jg}function AD(s,o,u,l){try{return rs(6,o,u),!1!==u(l)}catch(d){return UE(s,d),!1}finally{rs(7,o,u)}}function mf(s,o,u,l,d){return function f(y){if(y===Function)return l;Su(s.componentOffset>-1?ri(s.index,o):o);let C=AD(o,u,l,y),A=f.__ngNextListenerFn__;for(;A;)C=AD(o,u,A,y)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&y.preventDefault(),C}}function Pu(s=1){return function To(s){return(Pt.lFrame.contextLView=function qn(s,o){for(;s>0;)o=o[Ui],s--;return o}(s,Pt.lFrame.contextLView))[nr]}(s)}function $g(s,o,u){return aw(s,"",o,"",u),$g}function aw(s,o,u,l,d){const f=Me(),y=$c(f,o,u,l);return y!==Ft&&Yi(sn(),Kn(),f,s,y,f[Rt],d,!1),aw}function wd(s,o=""){const u=Me(),l=sn(),d=s+Zt,f=l.firstCreatePass?Bc(l,d,1,o,null):l.data[d],y=Py(l,u,f,o,s);u[d]=y,ii()&&R_(l,u,y,f),Ps(f,!1)}let Py=(s,o,u,l,d)=>(si(!0),function b_(s,o){return s.createText(o)}(o[Rt],l));function Gg(s){return Cd("",s,""),Gg}function Cd(s,o,u){const l=Me(),d=$c(l,s,o,u);return d!==Ft&&$a(l,vt(),d),Cd}const Fu=void 0;var Wg=["en",[["a","p"],["AM","PM"],Fu],[["AM","PM"],Fu,Fu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fu,"{1} 'at' {0}",Fu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bd(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Uu={};function ky(s){const o=function kw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=xw(o);if(u)return u;const l=o.split("-")[0];if(u=xw(l),u)return u;if("en"===l)return Wg;throw new oe(701,!1)}function Ga(s){return ky(s)[Dd.PluralCase]}function xw(s){return s in Uu||(Uu[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),Uu[s]}var Dd=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Dd||{});const Mo="en-US";let Oy=Mo;class Xc{}class qw{}function TS(s,o){return new Kw(s,o??null,[])}class Kw extends Xc{constructor(o,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dD(this);const d=jr(o);this._bootstrapComponents=Du(d.bootstrap),this._r3Injector=xb(o,u,[{provide:Xc,useValue:this},{provide:qh,useValue:this.componentFactoryResolver},...l],se(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Pd extends qw{constructor(o){super(),this.moduleType=o}create(o){return new Kw(this.moduleType,o,[])}}class CS extends Xc{constructor(o){super(),this.componentFactoryResolver=new dD(this),this.instance=null;const u=new cg([...o.providers,{provide:Xc,useValue:this},{provide:qh,useValue:this.componentFactoryResolver}],o.parent||Hh(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Yw(s,o,u=null){return new CS({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let Qw=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const l=hb(0,u.type),d=l.length>0?Yw([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=gt({token:s,providedIn:"environment",factory:()=>new s(qe(Fa))})}return s})();function Xw(s){s.getStandaloneInjector=o=>o.get(Qw).getOrCreateStandaloneInjector(s)}function u0(){return this._results[Symbol.iterator]()}class Qy{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new No)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Qy.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=u0)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function Zn(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Gi(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function BS(s,o,u,l=!0){const d=o[Qe];if(function UC(s,o,u,l){const d=Cr+l,f=u.length;l>0&&(u[d-1][Fi]=o),l<f-Cr?(o[Fi]=u[d],Bp(u,Cr+l,o)):(u.push(o),o[Fi]=null),o[Mn]=u;const y=o[Ia];null!==y&&u!==y&&function tg(s,o){const u=s[vo];o[Tr]!==o[Mn][Mn][Tr]&&(s[Ea]=!0),null===u?s[vo]=[o]:u.push(o)}(y,o);const I=o[di];null!==I&&I.insertView(s),o[Ut]|=128}(d,o,s,u),l){const f=HI(u,s),y=o[Rt],I=ng(y,s[$r]);null!==I&&function RN(s,o,u,l,d,f){l[Jn]=d,l[li]=o,Wi(s,l,u,1,d,f)}(d,s[li],y,o,I,f)}}let am=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=ix}return s})();const d0=am,Xy=class extends d0{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u)}createEmbeddedViewImpl(o,u,l){const d=function c0(s,o,u,l){const d=o.tView,I=vg(s,d,u,4096&s[Ut]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);I[Ia]=s[o.index];const A=s[di];return null!==A&&(I[di]=A.createEmbeddedView(d)),Ag(d,I,u),I}(this._declarationLView,this._declarationTContainer,o,{injector:u,hydrationInfo:l});return new af(d)}};function ix(){return um(Hr(),Me())}function um(s,o){return 4&s.type?new Xy(o,s,zr(s,o)):null}let la=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=Ff}return s})();function Ff(){return p0(Hr(),Me())}const $S=la,il=class extends $S{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return zr(this._hostTNode,this._hostLView)}get injector(){return new un(this._hostTNode,this._hostLView)}get parentInjector(){const o=bo(this._hostTNode,this._hostLView);if(Cc(o)){const u=bc(o,this._hostLView),l=Aa(o);return new un(u[Qe].data[l+8],u)}return new un(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=HS(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-Cr}createEmbeddedView(o,u,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const I=o.createEmbeddedViewImpl(u||{},f,null);return this.insertImpl(I,d,false),I}createComponent(o,u,l,d,f){const y=o&&!function Us(s){return"function"==typeof s}(o);let I;if(y)I=u;else{const He=u||{};I=He.index,l=He.injector,d=He.projectableNodes,f=He.environmentInjector||He.ngModuleRef}const C=y?o:new uf(Xt(o)),A=l||this.parentInjector;if(!f&&null==C.ngModule){const st=(y?A:this.parentInjector).get(Fa,null);st&&(f=st)}Xt(C.componentType??{});const ie=C.create(A,d,null,f);return this.insertImpl(ie.hostView,I,false),ie}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,l){const d=o._lView;if(function mc(s){return ti(s[Mn])}(d)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const A=d[Mn],P=new il(A,A[li],A[Mn]);P.detach(P.indexOf(o))}}const y=this._adjustIndex(u),I=this._lContainer;return BS(I,d,y,!l),o.attachToViewContainerRef(),Bp(sl(I),y,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=HS(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=gi(this._lContainer,u);l&&(ka(sl(this._lContainer),u),LI(l[Qe],l))}detach(o){const u=this._adjustIndex(o,-1),l=gi(this._lContainer,u);return l&&null!=ka(sl(this._lContainer),u)?new af(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function HS(s){return s[8]}function sl(s){return s[8]||(s[8]=[])}function p0(s,o){let u;const l=o[s.index];return ti(l)?u=l:(u=sf(l,o,null,s),o[s.index]=u,Sg(o,u)),g0(u,o,s,l),new il(u,s,o)}let g0=function GS(s,o,u,l){if(s[$r])return;let d;d=8&u.type?En(l):function ol(s,o){const u=s[Rt],l=u.createComment(""),d=hi(o,s);return Oa(u,ng(u,d),l,function Bh(s,o){return s.nextSibling(o)}(u,d),!1),l}(o,u),s[$r]=d};class nv{constructor(o){this.queryList=o,this.matches=null}clone(){return new nv(this.queryList)}setDirty(){this.queryList.setDirty()}}class m0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<l;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new m0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==ZS(o,u).matches&&this.queries[u].setDirty()}}class lm{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class rv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==u?u.push(f):u=[f])}return null!==u?new rv(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class _0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new _0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,u,WS(u,f)),this.matchTNodeWithReadOption(o,u,Yl(u,o,f,!1,!1))}else l===am?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Yl(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===fg||d===la||d===am&&4&u.type)this.addMatch(u.index,-2);else{const f=Yl(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function WS(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function qS(s,o,u,l){return-1===u?function ox(s,o){return 11&s.type?zr(s,o):4&s.type?um(s,o):null}(o,s):-2===u?function Ld(s,o,u){return u===fg?zr(o,s):u===am?um(o,s):u===la?p0(o,s):void 0}(s,o,l):Ra(s,s[Qe],u,o)}function Uf(s,o,u,l){const d=o[di].queries[l];if(null===d.matches){const f=s.data,y=u.matches,I=[];for(let C=0;C<y.length;C+=2){const A=y[C];I.push(A<0?null:qS(o,f[A],y[C+1],u.metadata.read))}d.matches=I}return d.matches}function iv(s,o,u,l){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=Uf(s,o,d,u);for(let I=0;I<f.length;I+=2){const C=f[I];if(C>0)l.push(y[I/2]);else{const A=f[I+1],P=o[-C];for(let j=Cr;j<P.length;j++){const Z=P[j];Z[Ia]===Z[Mn]&&iv(Z[Qe],Z,A,l)}if(null!==P[vo]){const j=P[vo];for(let Z=0;Z<j.length;Z++){const ie=j[Z];iv(ie[Qe],ie,A,l)}}}}}return l}function y0(s){const o=Me(),u=sn(),l=ql();bh(l+1);const d=ZS(u,l);if(s.dirty&&function jl(s){return 4==(4&s[Ut])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?iv(u,o,l,[]):Uf(u,o,d,l);s.reset(f,pg),s.notifyOnChanges()}return!0}return!1}function v0(s,o,u,l){const d=sn();if(d.firstCreatePass){const f=Hr();(function yi(s,o,u){null===s.queries&&(s.queries=new rv),s.queries.track(new _0(o,u))})(d,new lm(o,u,l),f.index),function cx(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function sv(s,o,u){const l=new Qy(4==(4&u));(function Jb(s,o,u,l){const d=dd(o);d.push(u),s.firstCreatePass&&sD(s).push(l,d.length-1)})(s,o,l,l.destroy),null===o[di]&&(o[di]=new m0),o[di].queries.push(new nv(l))}(d,Me(),u)}function KS(){return function ux(s,o){return s[di].queries[o].queryList}(Me(),ql())}function ZS(s,o){return s.queries.getByIndex(o)}function dm(s){return!!jr(s)}const jf=new Pn("Application Initializer");let gm=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=ot(jf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const f=d();if(Dy(f))u.push(f);else if(Nu(f)){const y=new Promise((I,C)=>{f.subscribe({complete:I,error:C})});u.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Vd=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const Bd=new Pn("LocaleId",{providedIn:"root",factory:()=>ot(Bd,Tt.Optional|Tt.SkipSelf)||function x0(){return typeof $localize<"u"&&$localize.locale||Mo}()}),mm=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let yv=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ae.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class cl{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let lA=(()=>{class s{compileModuleSync(u){return new Pd(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),f=Du(jr(u).declarations).reduce((y,I)=>{const C=Xt(I);return C&&y.push(new uf(C)),y},[]);return new cl(l,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const Tv=new Pn(""),$d=new Pn("");let H0,Hf=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H0||(function Gf(s){H0=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||s)(qe(mi),qe($0),qe($d))};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac})}return s})(),$0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return H0?.findTestabilityInTree(this,u,l)??null}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),ll=null;const Cv=new Pn("AllowMultipleToken"),vm=new Pn("PlatformDestroyListeners"),Im=new Pn("appBootstrapListener");class W0{constructor(o,u){this.name=o,this.token=u}}function q0(s,o,u=[]){const l=`Platform: ${o}`,d=new Pn(l);return(f=[])=>{let y=Z0();if(!y||y.injector.get(Cv,!1)){const I=[...u,...f,{provide:d,useValue:!0}];s?s(I):function bx(s){if(ll&&!ll.get(Cv,!1))throw new oe(400,!1);(function _A(){!function fh(s){hh=s}(()=>{throw new oe(600,!1)})})(),ll=s;const o=s.get(EA);(function vA(s){s.get(vb,null)?.forEach(u=>u())})(s)}(function K0(s=[],o){return ws.create({name:o,providers:[{provide:iE,useValue:"platform"},{provide:vm,useValue:new Set([()=>ll=null])},...s]})}(I,l))}return function IA(s){const o=Z0();if(!o)throw new oe(401,!1);return o}()}}function Z0(){return ll?.get(EA)??null}let EA=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function Y0(s="zone.js",o){return"noop"===s?new DE:"zone.js"===s?new mi(o):s}(l?.ngZone,function wA(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function Zw(s,o,u){return new Kw(s,o,u)}(u.moduleType,this.injector,function bA(s){return[{provide:mi,useFactory:s},{provide:$h,multi:!0,useFactory:()=>{const o=ot(Q0,{optional:!0});return()=>o.initialize()}},{provide:Sv,useFactory:CA},{provide:J_,useFactory:ey}]}(()=>d)),y=f.injector.get(Ba,null);return d.runOutsideAngular(()=>{const I=d.onError.subscribe({next:C=>{y.handleError(C)}});f.onDestroy(()=>{Wf(this._modules,f),I.unsubscribe()})}),function bv(s,o,u){try{const l=u();return Dy(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(y,d,()=>{const I=f.injector.get(gm);return I.runInitializers(),I.donePromise.then(()=>(function Df(s){Ze(s,"Expected localeId to be defined"),"string"==typeof s&&(Oy=s.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Bd,Mo)||Mo),this._moduleDoBootstrap(f),f))})})}bootstrapModule(u,l=[]){const d=Dv({},l);return function G0(s,o,u){const l=new Pd(u);return Promise.resolve(l)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const l=u.injector.get(zf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new oe(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(vm,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||s)(qe(ws))};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function Dv(s,o){return Array.isArray(o)?o.reduce(Dv,s):{...s,...o}}let zf=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ot(Sv),this.zoneIsStable=ot(J_),this.componentTypes=[],this.components=[],this.isStable=ot(yv).hasPendingTasks.pipe((0,Re.w)(u=>u?(0,ve.of)(!1):this.zoneIsStable),(0,me.x)(),(0,Ee.B)()),this._injector=ot(Fa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const d=u instanceof hg;if(!this._injector.get(gm).done)throw!d&&ya(u),new oe(405,!1);let y;y=d?u:this._injector.get(qh).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const I=function z0(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Xc),A=y.create(ws.NULL,[],l||y.selector,I),P=A.location.nativeElement,j=A.injector.get(Tv,null);return j?.registerApplication(P),A.onDestroy(()=>{this.detachView(A.hostView),Wf(this.components,A),j?.unregisterApplication(P)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Wf(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(Im,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Wf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new oe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Wf(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const Sv=new Pn("",{providedIn:"root",factory:()=>ot(Ba).handleError.bind(void 0)});function CA(){const s=ot(mi),o=ot(Ba);return u=>s.runOutsideAngular(()=>o.handleError(u))}let Q0=(()=>{class s{constructor(){this.zone=ot(mi),this.applicationRef=ot(zf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Ax(){return!1}let J0=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=eT}return s})();function eT(s){return function tT(s,o,u){if(Js(s)&&!u){const l=ri(s.index,o);return new af(l,l)}return 47&s.type?new af(o[Tr],o):null}(Hr(),Me(),16==(16&s))}class kA{constructor(){}supports(o){return Og(o)}create(o){return new sT(o)}}const Mx=(s,o)=>o;class sT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Mx}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,f=null;for(;u||l;){const y=!l||u&&u.currentIndex<Nv(l,d,f)?u:l,I=Nv(y,d,f),C=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const A=I-d,P=C-d;if(A!=P){for(let Z=0;Z<A;Z++){const ie=Z<f.length?f[Z]:f[Z]=0,be=ie+Z;P<=be&&be<A&&(f[Z]=ie+1)}f[y.previousIndex]=P-A}}I!==C&&o(y,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Og(o))throw new oe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)f=o[I],y=this._trackByFn(I,f),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,f,y,I)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,I),l=!0),u=u._next}else d=0,function wD(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,I=>{y=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,I,y,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,y,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new Ox(u,l),f,d),o}_verifyReinsertion(o,u,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Rv),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Ox{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class Rv{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new oT,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nv(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class MA{constructor(){}supports(o){return o instanceof Map||cf(o)}create(){return new Cm}}class Cm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||cf(o)))throw new oe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new Lx(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class Lx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pv(){return new xv([new kA])}let xv=(()=>{class s{static#e=this.\u0275prov=gt({token:s,providedIn:"root",factory:Pv});constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Pv()),deps:[[s,new rt,new he]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new oe(901,!1)}}return s})();function aT(){return new Zf([new MA])}let Zf=(()=>{class s{static#e=this.\u0275prov=gt({token:s,providedIn:"root",factory:aT});constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||aT()),deps:[[s,new rt,new he]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new oe(901,!1)}}return s})();const kv=q0(null,"core",[]);let uT=(()=>{class s{constructor(u){}static#e=this.\u0275fac=function(l){return new(l||s)(qe(zf))};static#t=this.\u0275mod=Cl({type:s});static#n=this.\u0275inj=Fn({})}return s})();function UA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function es(s){const o=Xt(s);if(!o)return null;const u=new uf(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(pt,Ae,F)=>{F.d(Ae,{Z:()=>Ke});var m=F(9058),G=F(4537),O=F(7592),ee=F(7879);class ae{constructor(Ye,ke){this._delegate=Ye,this.firebase=ke,(0,O._addComponent)(Ye,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ye,ke=O._DEFAULT_ENTRY_NAME){var _t;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider(Ye);return!ht.isInitialized()&&"EXPLICIT"===(null===(_t=ht.getComponent())||void 0===_t?void 0:_t.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:ke})}_removeServiceInstance(Ye,ke=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(ke)}_addComponent(Ye){(0,O._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,O._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function me(){const Oe=function Re(Oe){const Ye={},ke={__esModule:!0,initializeApp:function oe(Ue,q={}){const Pe=O.initializeApp(Ue,q);if((0,m.r3)(Ye,Pe.name))return Ye[Pe.name];const Ge=new Oe(Pe,ke);return Ye[Pe.name]=Ge,Ge},app:ht,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function de(Ue){const q=Ue.name,Pe=q.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const Ge=(It=ht())=>{if("function"!=typeof It[Pe])throw Ee.create("invalid-app-argument",{appName:q});return It[Pe]()};void 0!==Ue.serviceProps&&(0,m.ZB)(Ge,Ue.serviceProps),ke[Pe]=Ge,Oe.prototype[Pe]=function(...It){return this._getService.bind(this,q).apply(this,Ue.multipleInstances?It:[])}}return"PUBLIC"===Ue.type?ke[Pe]:null},removeApp:function _t(Ue){delete Ye[Ue]},useAsService:function Ce(Ue,q){return"serverAuth"===q?null:q},modularAPIs:O}};function ht(Ue){if(!(0,m.r3)(Ye,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Ue});return Ye[Ue]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function De(){return Object.keys(Ye).map(Ue=>Ye[Ue])}}),ht.App=Oe,ke}(ae);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function Ye(ke){(0,m.ZB)(Oe,ke)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Oe}(),K=new ee.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=H;!function xe(Oe){(0,O.registerVersion)("@firebase/app-compat","0.2.13",Oe)}()},7592:(pt,Ae,F)=>{F.r(Ae),F.d(Ae,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Fn,_DEFAULT_ENTRY_NAME:()=>ue,_addComponent:()=>Se,_addOrOverwriteComponent:()=>je,_apps:()=>_e,_clearComponents:()=>St,_components:()=>ce,_getProvider:()=>ze,_registerComponent:()=>Ze,_removeServiceInstance:()=>cn,deleteApp:()=>ui,getApp:()=>ln,getApps:()=>Gn,initializeApp:()=>Cn,onLog:()=>jn,registerVersion:()=>Un,setLogLevel:()=>Vr});var m=F(5861),G=F(4537),O=F(7879),ee=F(9058),ae=F(1878);class ve{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Te=>{if(function Ee(ye){const Y=ye.getComponent();return"VERSION"===Y?.type}(Te)){const Be=Te.getImmediate();return`${Be.library}/${Be.version}`}return null}).filter(Te=>Te).join(" ")}}const Re="@firebase/app",H=new O.Yd("@firebase/app"),ue="[DEFAULT]",ge={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_e=new Map,ce=new Map;function Se(ye,Y){try{ye.container.addComponent(Y)}catch(Te){H.debug(`Component ${Y.name} failed to register with FirebaseApp ${ye.name}`,Te)}}function je(ye,Y){ye.container.addOrOverwriteComponent(Y)}function Ze(ye){const Y=ye.name;if(ce.has(Y))return H.debug(`There were multiple attempts to register component ${Y}.`),!1;ce.set(Y,ye);for(const Te of _e.values())Se(Te,ye);return!0}function ze(ye,Y){const Te=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Te&&Te.triggerHeartbeat(),ye.container.getProvider(Y)}function cn(ye,Y,Te=ue){ze(ye,Y).clearInstance(Te)}function St(){ce.clear()}const gt=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pn{constructor(Y,Te,Be){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Te),this._name=Te.name,this._automaticDataCollectionEnabled=Te.automaticDataCollectionEnabled,this._container=Be,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw gt.create("app-deleted",{appName:this._name})}}const Fn="9.23.0";function Cn(ye,Y={}){let Te=ye;"object"!=typeof Y&&(Y={name:Y});const Be=Object.assign({name:ue,automaticDataCollectionEnabled:!1},Y),lt=Be.name;if("string"!=typeof lt||!lt)throw gt.create("bad-app-name",{appName:String(lt)});if(Te||(Te=(0,ee.aH)()),!Te)throw gt.create("no-options");const mt=_e.get(lt);if(mt){if((0,ee.vZ)(Te,mt.options)&&(0,ee.vZ)(Be,mt.config))return mt;throw gt.create("duplicate-app",{appName:lt})}const dn=new G.H0(lt);for(const z of ce.values())dn.addComponent(z);const W=new pn(Te,Be,dn);return _e.set(lt,W),W}function ln(ye=ue){const Y=_e.get(ye);if(!Y&&ye===ue&&(0,ee.aH)())return Cn();if(!Y)throw gt.create("no-app",{appName:ye});return Y}function Gn(){return Array.from(_e.values())}function ui(ye){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(ye){const Y=ye.name;_e.has(Y)&&(_e.delete(Y),yield Promise.all(ye.container.getProviders().map(Te=>Te.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Un(ye,Y,Te){var Be;let lt=null!==(Be=ge[ye])&&void 0!==Be?Be:ye;Te&&(lt+=`-${Te}`);const mt=lt.match(/\s|\//),dn=Y.match(/\s|\//);if(mt||dn){const W=[`Unable to register library "${lt}" with version "${Y}":`];return mt&&W.push(`library name "${lt}" contains illegal characters (whitespace or "/")`),mt&&dn&&W.push("and"),dn&&W.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void H.warn(W.join(" "))}Ze(new G.wA(`${lt}-version`,()=>({library:lt,version:Y}),"VERSION"))}function jn(ye,Y){if(null!==ye&&"function"!=typeof ye)throw gt.create("invalid-log-argument");(0,O.Am)(ye,Y)}function Vr(ye){(0,O.Ub)(ye)}const ts="firebase-heartbeat-database",Tt=1,At="firebase-heartbeat-store";let Mt=null;function Kt(){return Mt||(Mt=(0,ae.X3)(ts,Tt,{upgrade:(ye,Y)=>{0===Y&&ye.createObjectStore(At)}}).catch(ye=>{throw gt.create("idb-open",{originalErrorMessage:ye.message})})),Mt}function dr(){return(dr=(0,m.Z)(function*(ye){try{return yield(yield Kt()).transaction(At).objectStore(At).get(ci(ye))}catch(Y){if(Y instanceof ee.ZR)H.warn(Y.message);else{const Te=gt.create("idb-get",{originalErrorMessage:Y?.message});H.warn(Te.message)}}})).apply(this,arguments)}function $t(ye,Y){return kn.apply(this,arguments)}function kn(){return(kn=(0,m.Z)(function*(ye,Y){try{const Be=(yield Kt()).transaction(At,"readwrite");yield Be.objectStore(At).put(Y,ci(ye)),yield Be.done}catch(Te){if(Te instanceof ee.ZR)H.warn(Te.message);else{const Be=gt.create("idb-set",{originalErrorMessage:Te?.message});H.warn(Be.message)}}})).apply(this,arguments)}function ci(ye){return`${ye.name}!${ye.options.appId}`}class Wt{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Te=this.container.getProvider("app").getImmediate();this._storage=new Li(Te),this._heartbeatsCachePromise=this._storage.read().then(Be=>(this._heartbeatsCache=Be,Be))}triggerHeartbeat(){var Y=this;return(0,m.Z)(function*(){const Be=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),lt=Nn();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==lt&&!Y._heartbeatsCache.heartbeats.some(mt=>mt.date===lt))return Y._heartbeatsCache.heartbeats.push({date:lt,agent:Be}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(mt=>{const dn=new Date(mt.date).valueOf();return Date.now()-dn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,m.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Te=Nn(),{heartbeatsToSend:Be,unsentEntries:lt}=function vi(ye,Y=1024){const Te=[];let Be=ye.slice();for(const lt of ye){const mt=Te.find(dn=>dn.agent===lt.agent);if(mt){if(mt.dates.push(lt.date),hr(Te)>Y){mt.dates.pop();break}}else if(Te.push({agent:lt.agent,dates:[lt.date]}),hr(Te)>Y){Te.pop();break}Be=Be.slice(1)}return{heartbeatsToSend:Te,unsentEntries:Be}}(Y._heartbeatsCache.heartbeats),mt=(0,ee.L)(JSON.stringify({version:2,heartbeats:Be}));return Y._heartbeatsCache.lastSentHeartbeatDate=Te,lt.length>0?(Y._heartbeatsCache.heartbeats=lt,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),mt})()}}function Nn(){return(new Date).toISOString().substring(0,10)}class Li{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,m.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function tr(ye){return dr.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Te=this;return(0,m.Z)(function*(){var Be;if(yield Te._canUseIndexedDBPromise){const mt=yield Te.read();return $t(Te.app,{lastSentHeartbeatDate:null!==(Be=Y.lastSentHeartbeatDate)&&void 0!==Be?Be:mt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Te=this;return(0,m.Z)(function*(){var Be;if(yield Te._canUseIndexedDBPromise){const mt=yield Te.read();return $t(Te.app,{lastSentHeartbeatDate:null!==(Be=Y.lastSentHeartbeatDate)&&void 0!==Be?Be:mt.lastSentHeartbeatDate,heartbeats:[...mt.heartbeats,...Y.heartbeats]})}})()}}function hr(ye){return(0,ee.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Qn(ye){Ze(new G.wA("platform-logger",Y=>new ve(Y),"PRIVATE")),Ze(new G.wA("heartbeat",Y=>new Wt(Y),"PRIVATE")),Un(Re,"0.9.13",ye),Un(Re,"0.9.13","esm2017"),Un("fire-js","")}("")},4097:(pt,Ae,F)=>{F.d(Ae,{C6:()=>m.getApps,KN:()=>m.registerVersion,Mq:()=>m.getApp});var m=F(7592);(0,m.registerVersion)("firebase","9.23.0","app")},120:(pt,Ae,F)=>{F.d(Ae,{Z:()=>m.Z});var m=F(3399);m.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(pt,Ae,F)=>{F.r(Ae);var m=F(5861),G=F(3399),O=F(6710),ee=F(9058),Ee=(F(7592),F(7879),F(4537));function Re(){return window}function K(){return K=(0,m.Z)(function*(U,V,M){var ne;const{BuildInfo:Ne}=Re();(0,O.as)(V.sessionId,"AuthEvent did not contain a session ID");const qe=yield function ke(U){return _t.apply(this,arguments)}(V.sessionId),xt={};return(0,O.at)()?xt.ibi=Ne.packageName:(0,O.au)()?xt.apn=Ne.packageName:(0,O.av)(U,"operation-not-supported-in-this-environment"),Ne.displayName&&(xt.appDisplayName=Ne.displayName),xt.sessionId=qe,(0,O.aw)(U,M,V.type,void 0,null!==(ne=V.eventId)&&void 0!==ne?ne:void 0,xt)}),K.apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(U){const{BuildInfo:V}=Re(),M={};(0,O.at)()?M.iosBundleId=V.packageName:(0,O.au)()?M.androidPackageName=V.packageName:(0,O.av)(U,"operation-not-supported-in-this-environment"),yield(0,O.ax)(U,M)})).apply(this,arguments)}function Oe(){return(Oe=(0,m.Z)(function*(U,V,M){const{cordova:ne}=Re();let Ne=()=>{};try{yield new Promise((qe,xt)=>{let ot=null;function gn(){var Ht;qe();const Ii=null===(Ht=ne.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof Ii&&Ii(),"function"==typeof M?.close&&M.close()}function Lt(){ot||(ot=window.setTimeout(()=>{xt((0,O.az)(U,"redirect-cancelled-by-user"))},2e3))}function bn(){"visible"===document?.visibilityState&&Lt()}V.addPassiveListener(gn),document.addEventListener("resume",Lt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",bn,!1),Ne=()=>{V.removePassiveListener(gn),document.removeEventListener("resume",Lt,!1),document.removeEventListener("visibilitychange",bn,!1),ot&&window.clearTimeout(ot)}})}finally{Ne()}})).apply(this,arguments)}function _t(){return(_t=(0,m.Z)(function*(U){const V=function ht(U){if((0,O.as)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const V=new ArrayBuffer(U.length),M=new Uint8Array(V);for(let ne=0;ne<U.length;ne++)M[ne]=U.charCodeAt(ne);return M}(U),M=yield crypto.subtle.digest("SHA-256",V);return Array.from(new Uint8Array(M)).map(Ne=>Ne.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class De extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(V=>{this.resolveInialized=V})}addPassiveListener(V){this.passiveListeners.add(V)}removePassiveListener(V){this.passiveListeners.delete(V)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(V){return this.resolveInialized(),this.passiveListeners.forEach(M=>M(V)),super.onEvent(V)}initialized(){var V=this;return(0,m.Z)(function*(){yield V.initPromise})()}}function Ue(U){return q.apply(this,arguments)}function q(){return(q=(0,m.Z)(function*(U){const V=yield It()._get(an(U));return V&&(yield It()._remove(an(U))),V})).apply(this,arguments)}function Ge(){const U=[];for(let M=0;M<20;M++){const ne=Math.floor(62*Math.random());U.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(ne))}return U.join("")}function It(){return(0,O.aC)(O.b)}function an(U){return(0,O.aD)("authEvent",U.config.apiKey,U.name)}function Rn(U){if(!U?.includes("?"))return{};const[V,...M]=U.split("?");return(0,ee.zd)(M.join("?"))}const ue=class xr{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(V){var M=this;return(0,m.Z)(function*(){const ne=V._key();let Ne=M.eventManagers.get(ne);return Ne||(Ne=new De(V),M.eventManagers.set(ne,Ne),M.attachCallbackListeners(V,Ne)),Ne})()}_openPopup(V){(0,O.av)(V,"operation-not-supported-in-this-environment")}_openRedirect(V,M,ne,Ne){var qe=this;return(0,m.Z)(function*(){!function Ye(U){var V,M,ne,Ne,qe,xt,ot,gn,Lt,bn;const Ht=Re();(0,O.aA)("function"==typeof(null===(V=Ht?.universalLinks)||void 0===V?void 0:V.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(M=Ht?.BuildInfo)||void 0===M?void 0:M.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(qe=null===(Ne=null===(ne=Ht?.cordova)||void 0===ne?void 0:ne.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===qe?void 0:qe.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(gn=null===(ot=null===(xt=Ht?.cordova)||void 0===xt?void 0:xt.plugins)||void 0===ot?void 0:ot.browsertab)||void 0===gn?void 0:gn.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(bn=null===(Lt=Ht?.cordova)||void 0===Lt?void 0:Lt.InAppBrowser)||void 0===bn?void 0:bn.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(V);const xt=yield qe._initialize(V);yield xt.initialized(),xt.resetRedirect(),(0,O.aG)(),yield qe._originValidation(V);const ot=function de(U,V,M=null){return{type:V,eventId:M,urlResponse:null,sessionId:Ge(),postBody:null,tenantId:U.tenantId,error:(0,O.az)(U,"no-auth-event")}}(V,ne,Ne);yield function Ce(U,V){return It()._set(an(U),V)}(V,ot);const gn=yield function H(U,V,M){return K.apply(this,arguments)}(V,ot,M),Lt=yield function xe(U){const{cordova:V}=Re();return new Promise(M=>{V.plugins.browsertab.isAvailable(ne=>{let Ne=null;ne?V.plugins.browsertab.openUrl(U):Ne=V.InAppBrowser.open(U,(0,O.ay)()?"_blank":"_system","location=yes"),M(Ne)})})}(gn);return function Ke(U,V,M){return Oe.apply(this,arguments)}(V,xt,Lt)})()}_isIframeWebStorageSupported(V,M){throw new Error("Method not implemented.")}_originValidation(V){const M=V._key();return this.originValidationPromises[M]||(this.originValidationPromises[M]=function se(U){return Ve.apply(this,arguments)}(V)),this.originValidationPromises[M]}attachCallbackListeners(V,M){const{universalLinks:ne,handleOpenURL:Ne,BuildInfo:qe}=Re(),xt=setTimeout((0,m.Z)(function*(){yield Ue(V),M.onEvent(ge())}),500),ot=function(){var bn=(0,m.Z)(function*(Ht){clearTimeout(xt);const Ii=yield Ue(V);let Vo=null;Ii&&Ht?.url&&(Vo=function Pe(U,V){var M,ne;const Ne=function An(U){const V=Rn(U),M=V.link?decodeURIComponent(V.link):void 0,ne=Rn(M).link,Ne=V.deep_link_id?decodeURIComponent(V.deep_link_id):void 0;return Rn(Ne).link||Ne||ne||M||U}(V);if(Ne.includes("/__/auth/callback")){const qe=Rn(Ne),xt=qe.firebaseError?function Sn(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(qe.firebaseError)):null,ot=null===(ne=null===(M=xt?.code)||void 0===M?void 0:M.split("auth/"))||void 0===ne?void 0:ne[1],gn=ot?(0,O.az)(ot):null;return gn?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:gn,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Ne,postBody:null}}return null}(Ii,Ht.url)),M.onEvent(Vo||ge())});return function(Ii){return bn.apply(this,arguments)}}();typeof ne<"u"&&"function"==typeof ne.subscribe&&ne.subscribe(null,ot);const gn=Ne,Lt=`${qe.packageName.toLowerCase()}://`;Re().handleOpenURL=function(){var bn=(0,m.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Lt)&&ot({url:Ht}),"function"==typeof gn)try{gn(Ht)}catch(Ii){console.error(Ii)}});return function(Ht){return bn.apply(this,arguments)}}()}};function ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}function Ze(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function cn(U=(0,ee.z$)()){return!("file:"!==Ze()&&"ionic:"!==Ze()&&"capacitor:"!==Ze()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fn(){try{const U=self.localStorage,V=O.aL();if(U)return U.setItem(V,"1"),U.removeItem(V),!function pn(U=(0,ee.z$)()){return function Qt(){return(0,ee.w1)()&&11===document?.documentMode}()||function gt(U=(0,ee.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,ee.hl)()}catch{return Cn()&&(0,ee.hl)()}return!1}function Cn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ln(){return(function ze(){return"http:"===Ze()||"https:"===Ze()}()||(0,ee.ru)()||cn())&&!function St(){return(0,ee.b$)()||(0,ee.UG)()}()&&Fn()&&!Cn()}function Gn(){return cn()&&typeof document<"u"}function lr(){return(lr=(0,m.Z)(function*(){return!!Gn()&&new Promise(U=>{const V=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(V),U(!0)})})})).apply(this,arguments)}const jn={LOCAL:"local",NONE:"none",SESSION:"session"},Vr=O.aA,ts="persistence";function At(U){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,m.Z)(function*(U){yield U._initializationPromise;const V=tr(),M=O.aD(ts,U.config.apiKey,U.name);V&&V.setItem(M,U._getPersistence())})).apply(this,arguments)}function tr(){var U;try{return(null===(U=function Un(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const dr=O.aA;class $t{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(ue),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(V){var M=this;return(0,m.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._initialize(V)})()}_openPopup(V,M,ne,Ne){var qe=this;return(0,m.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openPopup(V,M,ne,Ne)})()}_openRedirect(V,M,ne,Ne){var qe=this;return(0,m.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openRedirect(V,M,ne,Ne)})()}_isIframeWebStorageSupported(V,M){this.assertedUnderlyingResolver._isIframeWebStorageSupported(V,M)}_originValidation(V){return this.assertedUnderlyingResolver._originValidation(V)}get _shouldInitProactively(){return Gn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var V=this;return(0,m.Z)(function*(){if(V.underlyingResolver)return;const M=yield function ui(){return lr.apply(this,arguments)}();V.underlyingResolver=M?V.cordovaResolver:V.browserResolver})()}}function kn(U){return U.unwrap()}function nn(U){return Wt(U)}function Wt(U){const{_tokenResponse:V}=U instanceof ee.ZR?U.customData:U;if(!V)return null;if(!(U instanceof ee.ZR)&&"temporaryProof"in V&&"phoneNumber"in V)return O.P.credentialFromResult(U);const M=V.providerId;if(!M||M===O.p.PASSWORD)return null;let ne;switch(M){case O.p.GOOGLE:ne=O.V;break;case O.p.FACEBOOK:ne=O.U;break;case O.p.GITHUB:ne=O.W;break;case O.p.TWITTER:ne=O.Z;break;default:const{oauthIdToken:Ne,oauthAccessToken:qe,oauthTokenSecret:xt,pendingToken:ot,nonce:gn}=V;return qe||xt||Ne||ot?ot?M.startsWith("saml.")?O.aO._create(M,ot):O.L._fromParams({providerId:M,signInMethod:M,pendingToken:ot,idToken:Ne,accessToken:qe}):new O.X(M).credential({idToken:Ne,accessToken:qe,rawNonce:gn}):null}return U instanceof ee.ZR?ne.credentialFromError(U):ne.credentialFromResult(U)}function Nn(U,V){return V.catch(M=>{throw M instanceof ee.ZR&&function Qr(U,V){var M;const ne=null===(M=V.customData)||void 0===M?void 0:M._tokenResponse;if("auth/multi-factor-auth-required"===V?.code)V.resolver=new hr(U,O.aq(U,V));else if(ne){const Ne=Wt(V),qe=V;Ne&&(qe.credential=Ne,qe.tenantId=ne.tenantId||void 0,qe.email=ne.email||void 0,qe.phoneNumber=ne.phoneNumber||void 0)}}(U,M),M}).then(M=>{const Ne=M.user;return{operationType:M.operationType,credential:nn(M),additionalUserInfo:O.ao(M),user:Qn.getOrCreate(Ne)}})}function vi(U,V){return Li.apply(this,arguments)}function Li(){return(Li=(0,m.Z)(function*(U,V){const M=yield V;return{verificationId:M.verificationId,confirm:ne=>Nn(U,M.confirm(ne))}})).apply(this,arguments)}class hr{constructor(V,M){this.resolver=M,this.auth=function ci(U){return U.wrapped()}(V)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(V){return Nn(kn(this.auth),this.resolver.resolveSignIn(V))}}class Qn{constructor(V){this._delegate=V,this.multiFactor=O.ar(V)}static getOrCreate(V){return Qn.USER_MAP.has(V)||Qn.USER_MAP.set(V,new Qn(V)),Qn.USER_MAP.get(V)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(V){return this._delegate.getIdTokenResult(V)}getIdToken(V){return this._delegate.getIdToken(V)}linkAndRetrieveDataWithCredential(V){return this.linkWithCredential(V)}linkWithCredential(V){var M=this;return(0,m.Z)(function*(){return Nn(M.auth,O.a0(M._delegate,V))})()}linkWithPhoneNumber(V,M){var ne=this;return(0,m.Z)(function*(){return vi(ne.auth,O.l(ne._delegate,V,M))})()}linkWithPopup(V){var M=this;return(0,m.Z)(function*(){return Nn(M.auth,O.d(M._delegate,V,$t))})()}linkWithRedirect(V){var M=this;return(0,m.Z)(function*(){return yield At(O.aH(M.auth)),O.g(M._delegate,V,$t)})()}reauthenticateAndRetrieveDataWithCredential(V){return this.reauthenticateWithCredential(V)}reauthenticateWithCredential(V){var M=this;return(0,m.Z)(function*(){return Nn(M.auth,O.a1(M._delegate,V))})()}reauthenticateWithPhoneNumber(V,M){return vi(this.auth,O.r(this._delegate,V,M))}reauthenticateWithPopup(V){return Nn(this.auth,O.e(this._delegate,V,$t))}reauthenticateWithRedirect(V){var M=this;return(0,m.Z)(function*(){return yield At(O.aH(M.auth)),O.h(M._delegate,V,$t)})()}sendEmailVerification(V){return O.ae(this._delegate,V)}unlink(V){var M=this;return(0,m.Z)(function*(){return yield O.an(M._delegate,V),M})()}updateEmail(V){return O.aj(this._delegate,V)}updatePassword(V){return O.ak(this._delegate,V)}updatePhoneNumber(V){return O.u(this._delegate,V)}updateProfile(V){return O.ai(this._delegate,V)}verifyBeforeUpdateEmail(V,M){return O.af(this._delegate,V,M)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qn.USER_MAP=new WeakMap;const ye=O.aA;let Y=(()=>{class U{constructor(M,ne){if(this.app=M,ne.isInitialized())return this._delegate=ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ne}=M.options;ye(Ne,"invalid-api-key",{appName:M.name}),ye(Ne,"invalid-api-key",{appName:M.name});const qe=typeof window<"u"?$t:void 0;this._delegate=ne.initialize({options:{persistence:Be(Ne,M.name),popupRedirectResolver:qe}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(M){this._delegate.languageCode=M}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(M){this._delegate.tenantId=M}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(M,ne){O.I(this._delegate,M,ne)}applyActionCode(M){return O.a5(this._delegate,M)}checkActionCode(M){return O.a6(this._delegate,M)}confirmPasswordReset(M,ne){return O.a4(this._delegate,M,ne)}createUserWithEmailAndPassword(M,ne){var Ne=this;return(0,m.Z)(function*(){return Nn(Ne._delegate,O.a8(Ne._delegate,M,ne))})()}fetchProvidersForEmail(M){return this.fetchSignInMethodsForEmail(M)}fetchSignInMethodsForEmail(M){return O.ad(this._delegate,M)}isSignInWithEmailLink(M){return O.ab(this._delegate,M)}getRedirectResult(){var M=this;return(0,m.Z)(function*(){ye(ln(),M._delegate,"operation-not-supported-in-this-environment");const ne=yield O.j(M._delegate,$t);return ne?Nn(M._delegate,Promise.resolve(ne)):{credential:null,user:null}})()}addFrameworkForLogging(M){!function _e(U,V){(0,O.aH)(U)._logFramework(V)}(this._delegate,M)}onAuthStateChanged(M,ne,Ne){const{next:qe,error:xt,complete:ot}=Te(M,ne,Ne);return this._delegate.onAuthStateChanged(qe,xt,ot)}onIdTokenChanged(M,ne,Ne){const{next:qe,error:xt,complete:ot}=Te(M,ne,Ne);return this._delegate.onIdTokenChanged(qe,xt,ot)}sendSignInLinkToEmail(M,ne){return O.aa(this._delegate,M,ne)}sendPasswordResetEmail(M,ne){return O.a3(this._delegate,M,ne||void 0)}setPersistence(M){var ne=this;return(0,m.Z)(function*(){let Ne;switch(function Tt(U,V){Vr(Object.values(jn).includes(V),U,"invalid-persistence-type"),(0,ee.b$)()?Vr(V!==jn.SESSION,U,"unsupported-persistence-type"):(0,ee.UG)()?Vr(V===jn.NONE,U,"unsupported-persistence-type"):Cn()?Vr(V===jn.NONE||V===jn.LOCAL&&(0,ee.hl)(),U,"unsupported-persistence-type"):Vr(V===jn.NONE||Fn(),U,"unsupported-persistence-type")}(ne._delegate,M),M){case jn.SESSION:Ne=O.a;break;case jn.LOCAL:Ne=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case jn.NONE:Ne=O.N;break;default:return O.av("argument-error",{appName:ne._delegate.name})}return ne._delegate.setPersistence(Ne)})()}signInAndRetrieveDataWithCredential(M){return this.signInWithCredential(M)}signInAnonymously(){return Nn(this._delegate,O._(this._delegate))}signInWithCredential(M){return Nn(this._delegate,O.$(this._delegate,M))}signInWithCustomToken(M){return Nn(this._delegate,O.a2(this._delegate,M))}signInWithEmailAndPassword(M,ne){return Nn(this._delegate,O.a9(this._delegate,M,ne))}signInWithEmailLink(M,ne){return Nn(this._delegate,O.ac(this._delegate,M,ne))}signInWithPhoneNumber(M,ne){return vi(this._delegate,O.s(this._delegate,M,ne))}signInWithPopup(M){var ne=this;return(0,m.Z)(function*(){return ye(ln(),ne._delegate,"operation-not-supported-in-this-environment"),Nn(ne._delegate,O.c(ne._delegate,M,$t))})()}signInWithRedirect(M){var ne=this;return(0,m.Z)(function*(){return ye(ln(),ne._delegate,"operation-not-supported-in-this-environment"),yield At(ne._delegate),O.f(ne._delegate,M,$t)})()}updateCurrentUser(M){return this._delegate.updateCurrentUser(M)}verifyPasswordResetCode(M){return O.a7(this._delegate,M)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=jn,U})();function Te(U,V,M){let ne=U;"function"!=typeof U&&({next:ne,error:V,complete:M}=U);const Ne=ne;return{next:xt=>Ne(xt&&Qn.getOrCreate(xt)),error:V,complete:M}}function Be(U,V){const M=function Kt(U,V){const M=tr();if(!M)return[];const ne=O.aD(ts,U,V);switch(M.getItem(ne)){case jn.NONE:return[O.N];case jn.LOCAL:return[O.i,O.a];case jn.SESSION:return[O.a];default:return[]}}(U,V);if(typeof self<"u"&&!M.includes(O.i)&&M.push(O.i),typeof window<"u")for(const ne of[O.b,O.a])M.includes(ne)||M.push(ne);return M.includes(O.N)||M.push(O.N),M}class lt{constructor(){this.providerId="phone",this._delegate=new O.P(kn(G.Z.auth()))}static credential(V,M){return O.P.credential(V,M)}verifyPhoneNumber(V,M){return this._delegate.verifyPhoneNumber(V,M)}unwrap(){return this._delegate}}lt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,lt.PROVIDER_ID=O.P.PROVIDER_ID;const mt=O.aA;class dn{constructor(V,M,ne=G.Z.app()){var Ne;mt(null===(Ne=ne.options)||void 0===Ne?void 0:Ne.apiKey,"invalid-api-key",{appName:ne.name}),this._delegate=new O.R(V,M,ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function z(U){U.INTERNAL.registerComponent(new Ee.wA("auth-compat",V=>{const M=V.getProvider("app-compat").getImmediate(),ne=V.getProvider("auth");return new Y(M,ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:lt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:dn,TwitterAuthProvider:O.Z,Auth:Y,AuthCredential:O.J,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.4.2")}(G.Z)},4303:(pt,Ae,F)=>{F.r(Ae),F.d(Ae,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Fn,_DEFAULT_ENTRY_NAME:()=>ue,_addComponent:()=>Se,_addOrOverwriteComponent:()=>je,_apps:()=>_e,_clearComponents:()=>St,_components:()=>ce,_getProvider:()=>ze,_registerComponent:()=>Ze,_removeServiceInstance:()=>cn,deleteApp:()=>ui,getApp:()=>ln,getApps:()=>Gn,initializeApp:()=>Cn,onLog:()=>jn,registerVersion:()=>Un,setLogLevel:()=>Vr});var m=F(5861),G=F(4537),O=F(7879),ee=F(9058),ae=F(1878);class ve{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Te=>{if(function Ee(ye){const Y=ye.getComponent();return"VERSION"===Y?.type}(Te)){const Be=Te.getImmediate();return`${Be.library}/${Be.version}`}return null}).filter(Te=>Te).join(" ")}}const Re="@firebase/app",H=new O.Yd("@firebase/app"),ue="[DEFAULT]",ge={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_e=new Map,ce=new Map;function Se(ye,Y){try{ye.container.addComponent(Y)}catch(Te){H.debug(`Component ${Y.name} failed to register with FirebaseApp ${ye.name}`,Te)}}function je(ye,Y){ye.container.addOrOverwriteComponent(Y)}function Ze(ye){const Y=ye.name;if(ce.has(Y))return H.debug(`There were multiple attempts to register component ${Y}.`),!1;ce.set(Y,ye);for(const Te of _e.values())Se(Te,ye);return!0}function ze(ye,Y){const Te=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Te&&Te.triggerHeartbeat(),ye.container.getProvider(Y)}function cn(ye,Y,Te=ue){ze(ye,Y).clearInstance(Te)}function St(){ce.clear()}const gt=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pn{constructor(Y,Te,Be){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Te),this._name=Te.name,this._automaticDataCollectionEnabled=Te.automaticDataCollectionEnabled,this._container=Be,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw gt.create("app-deleted",{appName:this._name})}}const Fn="10.4.0";function Cn(ye,Y={}){let Te=ye;"object"!=typeof Y&&(Y={name:Y});const Be=Object.assign({name:ue,automaticDataCollectionEnabled:!1},Y),lt=Be.name;if("string"!=typeof lt||!lt)throw gt.create("bad-app-name",{appName:String(lt)});if(Te||(Te=(0,ee.aH)()),!Te)throw gt.create("no-options");const mt=_e.get(lt);if(mt){if((0,ee.vZ)(Te,mt.options)&&(0,ee.vZ)(Be,mt.config))return mt;throw gt.create("duplicate-app",{appName:lt})}const dn=new G.H0(lt);for(const z of ce.values())dn.addComponent(z);const W=new pn(Te,Be,dn);return _e.set(lt,W),W}function ln(ye=ue){const Y=_e.get(ye);if(!Y&&ye===ue&&(0,ee.aH)())return Cn();if(!Y)throw gt.create("no-app",{appName:ye});return Y}function Gn(){return Array.from(_e.values())}function ui(ye){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(ye){const Y=ye.name;_e.has(Y)&&(_e.delete(Y),yield Promise.all(ye.container.getProviders().map(Te=>Te.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Un(ye,Y,Te){var Be;let lt=null!==(Be=ge[ye])&&void 0!==Be?Be:ye;Te&&(lt+=`-${Te}`);const mt=lt.match(/\s|\//),dn=Y.match(/\s|\//);if(mt||dn){const W=[`Unable to register library "${lt}" with version "${Y}":`];return mt&&W.push(`library name "${lt}" contains illegal characters (whitespace or "/")`),mt&&dn&&W.push("and"),dn&&W.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void H.warn(W.join(" "))}Ze(new G.wA(`${lt}-version`,()=>({library:lt,version:Y}),"VERSION"))}function jn(ye,Y){if(null!==ye&&"function"!=typeof ye)throw gt.create("invalid-log-argument");(0,O.Am)(ye,Y)}function Vr(ye){(0,O.Ub)(ye)}const ts="firebase-heartbeat-database",Tt=1,At="firebase-heartbeat-store";let Mt=null;function Kt(){return Mt||(Mt=(0,ae.X3)(ts,Tt,{upgrade:(ye,Y)=>{0===Y&&ye.createObjectStore(At)}}).catch(ye=>{throw gt.create("idb-open",{originalErrorMessage:ye.message})})),Mt}function dr(){return(dr=(0,m.Z)(function*(ye){try{return yield(yield Kt()).transaction(At).objectStore(At).get(ci(ye))}catch(Y){if(Y instanceof ee.ZR)H.warn(Y.message);else{const Te=gt.create("idb-get",{originalErrorMessage:Y?.message});H.warn(Te.message)}}})).apply(this,arguments)}function $t(ye,Y){return kn.apply(this,arguments)}function kn(){return(kn=(0,m.Z)(function*(ye,Y){try{const Be=(yield Kt()).transaction(At,"readwrite");yield Be.objectStore(At).put(Y,ci(ye)),yield Be.done}catch(Te){if(Te instanceof ee.ZR)H.warn(Te.message);else{const Be=gt.create("idb-set",{originalErrorMessage:Te?.message});H.warn(Be.message)}}})).apply(this,arguments)}function ci(ye){return`${ye.name}!${ye.options.appId}`}class Wt{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Te=this.container.getProvider("app").getImmediate();this._storage=new Li(Te),this._heartbeatsCachePromise=this._storage.read().then(Be=>(this._heartbeatsCache=Be,Be))}triggerHeartbeat(){var Y=this;return(0,m.Z)(function*(){const Be=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),lt=Nn();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==lt&&!Y._heartbeatsCache.heartbeats.some(mt=>mt.date===lt))return Y._heartbeatsCache.heartbeats.push({date:lt,agent:Be}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(mt=>{const dn=new Date(mt.date).valueOf();return Date.now()-dn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,m.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Te=Nn(),{heartbeatsToSend:Be,unsentEntries:lt}=function vi(ye,Y=1024){const Te=[];let Be=ye.slice();for(const lt of ye){const mt=Te.find(dn=>dn.agent===lt.agent);if(mt){if(mt.dates.push(lt.date),hr(Te)>Y){mt.dates.pop();break}}else if(Te.push({agent:lt.agent,dates:[lt.date]}),hr(Te)>Y){Te.pop();break}Be=Be.slice(1)}return{heartbeatsToSend:Te,unsentEntries:Be}}(Y._heartbeatsCache.heartbeats),mt=(0,ee.L)(JSON.stringify({version:2,heartbeats:Be}));return Y._heartbeatsCache.lastSentHeartbeatDate=Te,lt.length>0?(Y._heartbeatsCache.heartbeats=lt,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),mt})()}}function Nn(){return(new Date).toISOString().substring(0,10)}class Li{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,m.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function tr(ye){return dr.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Te=this;return(0,m.Z)(function*(){var Be;if(yield Te._canUseIndexedDBPromise){const mt=yield Te.read();return $t(Te.app,{lastSentHeartbeatDate:null!==(Be=Y.lastSentHeartbeatDate)&&void 0!==Be?Be:mt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Te=this;return(0,m.Z)(function*(){var Be;if(yield Te._canUseIndexedDBPromise){const mt=yield Te.read();return $t(Te.app,{lastSentHeartbeatDate:null!==(Be=Y.lastSentHeartbeatDate)&&void 0!==Be?Be:mt.lastSentHeartbeatDate,heartbeats:[...mt.heartbeats,...Y.heartbeats]})}})()}}function hr(ye){return(0,ee.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Qn(ye){Ze(new G.wA("platform-logger",Y=>new ve(Y),"PRIVATE")),Ze(new G.wA("heartbeat",Y=>new Wt(Y),"PRIVATE")),Un(Re,"0.9.19",ye),Un(Re,"0.9.19","esm2017"),Un("fire-js","")}("")},4537:(pt,Ae,F)=>{F.d(Ae,{H0:()=>Re,wA:()=>O,zt:()=>ae});var m=F(5861),G=F(9058);class O{constructor(H,K,se){this.name=H,this.instanceFactory=K,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ee="[DEFAULT]";class ae{constructor(H,K){this.name=H,this.container=K,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const K=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(K)){const se=new G.BH;if(this.instancesDeferred.set(K,se),this.isInitialized(K)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:K});Ve&&se.resolve(Ve)}catch{}}return this.instancesDeferred.get(K).promise}getImmediate(H){var K;const se=this.normalizeInstanceIdentifier(H?.identifier),Ve=null!==(K=H?.optional)&&void 0!==K&&K;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(xe){if(Ve)return null;throw xe}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function Ee(me){return"EAGER"===me.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[K,se]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(K);try{const xe=this.getOrInitializeService({instanceIdentifier:Ve});se.resolve(xe)}catch{}}}}clearInstance(H=ee){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,m.Z)(function*(){const K=Array.from(H.instances.values());yield Promise.all([...K.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...K.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ee){return this.instances.has(H)}getOptions(H=ee){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:K={}}=H,se=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:se,options:K});for(const[xe,Ke]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(xe)&&Ke.resolve(Ve);return Ve}onInit(H,K){var se;const Ve=this.normalizeInstanceIdentifier(K),xe=null!==(se=this.onInitCallbacks.get(Ve))&&void 0!==se?se:new Set;xe.add(H),this.onInitCallbacks.set(Ve,xe);const Ke=this.instances.get(Ve);return Ke&&H(Ke,Ve),()=>{xe.delete(H)}}invokeOnInitCallbacks(H,K){const se=this.onInitCallbacks.get(K);if(se)for(const Ve of se)try{Ve(H,K)}catch{}}getOrInitializeService({instanceIdentifier:H,options:K={}}){let se=this.instances.get(H);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(me=H,me===ee?void 0:me),options:K}),this.instances.set(H,se),this.instancesOptions.set(H,K),this.invokeOnInitCallbacks(se,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,se)}catch{}var me;return se||null}normalizeInstanceIdentifier(H=ee){return this.component?this.component.multipleInstances?H:ee:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const K=this.getProvider(H.name);if(K.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);K.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const K=new ae(H,this);return this.providers.set(H,K),K}getProviders(){return Array.from(this.providers.values())}}},7879:(pt,Ae,F)=>{F.d(Ae,{Am:()=>me,Ub:()=>Re,Yd:()=>Ee,in:()=>G});const m=[];var G=function(H){return H[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",H}(G||{});const O={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ee=G.INFO,ae={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ve=(H,K,...se)=>{if(K<H.logLevel)return;const Ve=(new Date).toISOString(),xe=ae[K];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${K})`);console[xe](`[${Ve}]  ${H.name}:`,...se)};class Ee{constructor(K){this.name=K,this._logLevel=ee,this._logHandler=ve,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(K){if(!(K in G))throw new TypeError(`Invalid value "${K}" assigned to \`logLevel\``);this._logLevel=K}setLogLevel(K){this._logLevel="string"==typeof K?O[K]:K}get logHandler(){return this._logHandler}set logHandler(K){if("function"!=typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K}get userLogHandler(){return this._userLogHandler}set userLogHandler(K){this._userLogHandler=K}debug(...K){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...K),this._logHandler(this,G.DEBUG,...K)}log(...K){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...K),this._logHandler(this,G.VERBOSE,...K)}info(...K){this._userLogHandler&&this._userLogHandler(this,G.INFO,...K),this._logHandler(this,G.INFO,...K)}warn(...K){this._userLogHandler&&this._userLogHandler(this,G.WARN,...K),this._logHandler(this,G.WARN,...K)}error(...K){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...K),this._logHandler(this,G.ERROR,...K)}}function Re(H){m.forEach(K=>{K.setLogLevel(H)})}function me(H,K){for(const se of m){let Ve=null;K&&K.level&&(Ve=O[K.level]),se.userLogHandler=null===H?null:(xe,Ke,...Oe)=>{const Ye=Oe.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch{return null}}).filter(ke=>ke).join(" ");Ke>=(Ve??xe.logLevel)&&H({level:G[Ke].toLowerCase(),message:Ye,args:Oe,type:xe.name})}}}},1878:(pt,Ae,F)=>{F.d(Ae,{X3:()=>ht});var m=F(5861);const G=(q,Pe)=>Pe.some(Ge=>q instanceof Ge);let O,ee;const Ee=new WeakMap,Re=new WeakMap,me=new WeakMap,H=new WeakMap,K=new WeakMap;let xe={get(q,Pe,Ge){if(q instanceof IDBTransaction){if("done"===Pe)return Re.get(q);if("objectStoreNames"===Pe)return q.objectStoreNames||me.get(q);if("store"===Pe)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return ke(q[Pe])},set:(q,Pe,Ge)=>(q[Pe]=Ge,!0),has:(q,Pe)=>q instanceof IDBTransaction&&("done"===Pe||"store"===Pe)||Pe in q};function Ye(q){return"function"==typeof q?function Oe(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...Pe){return q.apply(_t(this),Pe),ke(Ee.get(this))}:function(...Pe){return ke(q.apply(_t(this),Pe))}:function(Pe,...Ge){const It=q.call(_t(this),Pe,...Ge);return me.set(It,Pe.sort?Pe.sort():[Pe]),ke(It)}}(q):(q instanceof IDBTransaction&&function Ve(q){if(Re.has(q))return;const Pe=new Promise((Ge,It)=>{const an=()=>{q.removeEventListener("complete",Sn),q.removeEventListener("error",An),q.removeEventListener("abort",An)},Sn=()=>{Ge(),an()},An=()=>{It(q.error||new DOMException("AbortError","AbortError")),an()};q.addEventListener("complete",Sn),q.addEventListener("error",An),q.addEventListener("abort",An)});Re.set(q,Pe)}(q),G(q,function ae(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,xe):q)}function ke(q){if(q instanceof IDBRequest)return function se(q){const Pe=new Promise((Ge,It)=>{const an=()=>{q.removeEventListener("success",Sn),q.removeEventListener("error",An)},Sn=()=>{Ge(ke(q.result)),an()},An=()=>{It(q.error),an()};q.addEventListener("success",Sn),q.addEventListener("error",An)});return Pe.then(Ge=>{Ge instanceof IDBCursor&&Ee.set(Ge,q)}).catch(()=>{}),K.set(Pe,q),Pe}(q);if(H.has(q))return H.get(q);const Pe=Ye(q);return Pe!==q&&(H.set(q,Pe),K.set(Pe,q)),Pe}const _t=q=>K.get(q);function ht(q,Pe,{blocked:Ge,upgrade:It,blocking:an,terminated:Sn}={}){const An=indexedDB.open(q,Pe),Rn=ke(An);return It&&An.addEventListener("upgradeneeded",wn=>{It(ke(An.result),wn.oldVersion,wn.newVersion,ke(An.transaction),wn)}),Ge&&An.addEventListener("blocked",wn=>Ge(wn.oldVersion,wn.newVersion,wn)),Rn.then(wn=>{Sn&&wn.addEventListener("close",()=>Sn()),an&&wn.addEventListener("versionchange",xr=>an(xr.oldVersion,xr.newVersion,xr))}).catch(()=>{}),Rn}const De=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],Ce=new Map;function Ue(q,Pe){if(!(q instanceof IDBDatabase)||Pe in q||"string"!=typeof Pe)return;if(Ce.get(Pe))return Ce.get(Pe);const Ge=Pe.replace(/FromIndex$/,""),It=Pe!==Ge,an=de.includes(Ge);if(!(Ge in(It?IDBIndex:IDBObjectStore).prototype)||!an&&!De.includes(Ge))return;const Sn=function(){var An=(0,m.Z)(function*(Rn,...wn){const xr=this.transaction(Rn,an?"readwrite":"readonly");let ue=xr.store;return It&&(ue=ue.index(wn.shift())),(yield Promise.all([ue[Ge](...wn),an&&xr.done]))[0]});return function(wn){return An.apply(this,arguments)}}();return Ce.set(Pe,Sn),Sn}!function Ke(q){xe=q(xe)}(q=>({...q,get:(Pe,Ge,It)=>Ue(Pe,Ge)||q.get(Pe,Ge,It),has:(Pe,Ge)=>!!Ue(Pe,Ge)||q.has(Pe,Ge)}))},5861:(pt,Ae,F)=>{function m(O,ee,ae,ve,Ee,Re,me){try{var H=O[Re](me),K=H.value}catch(se){return void ae(se)}H.done?ee(K):Promise.resolve(K).then(ve,Ee)}function G(O){return function(){var ee=this,ae=arguments;return new Promise(function(ve,Ee){var Re=O.apply(ee,ae);function me(K){m(Re,ve,Ee,me,H,"next",K)}function H(K){m(Re,ve,Ee,me,H,"throw",K)}me(void 0)})}}F.d(Ae,{Z:()=>G})},7582:(pt,Ae,F)=>{function ee(ue,ge){var _e={};for(var ce in ue)Object.prototype.hasOwnProperty.call(ue,ce)&&ge.indexOf(ce)<0&&(_e[ce]=ue[ce]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(ce=Object.getOwnPropertySymbols(ue);Se<ce.length;Se++)ge.indexOf(ce[Se])<0&&Object.prototype.propertyIsEnumerable.call(ue,ce[Se])&&(_e[ce[Se]]=ue[ce[Se]])}return _e}function se(ue,ge,_e,ce){return new(_e||(_e=Promise))(function(je,Ze){function ze(Qt){try{St(ce.next(Qt))}catch(gt){Ze(gt)}}function cn(Qt){try{St(ce.throw(Qt))}catch(gt){Ze(gt)}}function St(Qt){Qt.done?je(Qt.value):function Se(je){return je instanceof _e?je:new _e(function(Ze){Ze(je)})}(Qt.value).then(ze,cn)}St((ce=ce.apply(ue,ge||[])).next())})}function oe(ue){return this instanceof oe?(this.v=ue,this):new oe(ue)}function De(ue,ge,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,ce=_e.apply(ue,ge||[]),je=[];return Se={},Ze("next"),Ze("throw"),Ze("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function Ze(pn){ce[pn]&&(Se[pn]=function(Fn){return new Promise(function(Cn,ln){je.push([pn,Fn,Cn,ln])>1||ze(pn,Fn)})})}function ze(pn,Fn){try{!function cn(pn){pn.value instanceof oe?Promise.resolve(pn.value.v).then(St,Qt):gt(je[0][2],pn)}(ce[pn](Fn))}catch(Cn){gt(je[0][3],Cn)}}function St(pn){ze("next",pn)}function Qt(pn){ze("throw",pn)}function gt(pn,Fn){pn(Fn),je.shift(),je.length&&ze(je[0][0],je[0][1])}}function Ce(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ge=ue[Symbol.asyncIterator];return ge?ge.call(ue):(ue=function Oe(ue){var ge="function"==typeof Symbol&&Symbol.iterator,_e=ge&&ue[ge],ce=0;if(_e)return _e.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&ce>=ue.length&&(ue=void 0),{value:ue&&ue[ce++],done:!ue}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),_e={},ce("next"),ce("throw"),ce("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ce(je){_e[je]=ue[je]&&function(Ze){return new Promise(function(ze,cn){!function Se(je,Ze,ze,cn){Promise.resolve(cn).then(function(St){je({value:St,done:ze})},Ze)}(ze,cn,(Ze=ue[je](Ze)).done,Ze.value)})}}}F.d(Ae,{FC:()=>De,KL:()=>Ce,_T:()=>ee,mG:()=>se,qq:()=>oe}),"function"==typeof SuppressedError&&SuppressedError}},pt=>{pt(pt.s=4826)}]);